<div class="app-layout">
     <app-navbar></app-navbar>

     <main class="main-content">
          <div class="main-container">
               <div class="content-wrapper">
                    <!-- Left Wallet panel ==== -->
                    <app-wallet-panel (walletSelected)="onWalletSelected($event)"></app-wallet-panel>

                    <!-- Right form -->
                    <div class="form-panel">
                         <!-- Menu bar -->
                         <div class="menu-bar">
                              <button class="menu-btn" [class.active]="activeTab() === 'createOffer'" (click)="setTab('createOffer')">
                                   <ng-icon name="heroCurrencyDollar" size="20" class="text-red-600"></ng-icon>
                                   Create Offer
                              </button>
                              <!-- <button class="menu-btn" [class.active]="activeTab() === 'getOffers'" (click)="setTab('getOffers')">
                         <ng-icon name="heroPlusCircle" size="20" class="text-red-600"></ng-icon>
                         Get Offers
                    </button> -->
                              <button class="menu-btn" [class.active]="activeTab() === 'getOrderBook'" (click)="setTab('getOrderBook')">
                                   <ng-icon name="heroCurrencyDollar" size="20" class="text-red-600"></ng-icon>
                                   Get Order Book
                              </button>
                              <button class="menu-btn" [class.active]="activeTab() === 'cancelOffer'" (click)="setTab('cancelOffer')">
                                   <ng-icon name="heroTrash" size="20" class="text-red-600"></ng-icon>
                                   Cancel Offer
                              </button>
                         </div>

                         <!-- Create Offer Menu -->
                         @if (activeTab() === 'createOffer') {
                         <div>
                              <div class="submenu-info-text">
                                   <div class="blue-button-submenu">
                                        <ng-icon name="heroCurrencyDollar" size="27" class="text-red-600"></ng-icon>
                                   </div>
                                   <div>
                                        <h2 class="submenu-info-main-text">Create Offer</h2>
                                        <p class="submenu-info-secondary-text">Create Offer on the XRPL DEX.</p>
                                   </div>
                              </div>
                         </div>
                         }

                         <!-- Get Offer Menu -->
                         <!-- @if (activeTab() === 'getOffers') {
               <div>
                    <div class="submenu-info-text">
                         <div class="blue-button-submenu">
                              <ng-icon name="heroPlusCircle" size="27" class="text-red-600"></ng-icon>
                         </div>
                         <div>
                              <h2 class="submenu-info-main-text">Offers</h2>
                              <p class="submenu-info-secondary-text">Get existing offers, orderbooks and create offers on the XRPL DEX.</p>
                         </div>
                    </div>
               </div>
               } -->

                         <!-- Get OrderBook Menu -->
                         @if (activeTab() === 'getOrderBook') {
                         <div>
                              <div class="submenu-info-text">
                                   <div class="blue-button-submenu">
                                        <ng-icon name="heroCurrencyDollar" size="27" class="text-red-600"></ng-icon>
                                   </div>
                                   <div>
                                        <h2 class="submenu-info-main-text">Get Order Book</h2>
                                        <p class="submenu-info-secondary-text">Get order book on the XRPL Dex for the currency pair.</p>
                                   </div>
                              </div>
                         </div>
                         }

                         <!-- Cancel Offer Menu -->
                         @if (activeTab() === 'cancelOffer') {
                         <div>
                              <div class="submenu-info-text">
                                   <div class="red-button-submenu">
                                        <ng-icon name="heroTrash" size="27" class="text-red-600"></ng-icon>
                                   </div>
                                   <div>
                                        <h2 class="submenu-info-main-text">Cancel Offer</h2>
                                        <p class="submenu-info-secondary-text">Cancel offer on the XRPL DEX.</p>
                                   </div>
                              </div>
                         </div>
                         }

                         <!-- Info Message -->
                         <!-- Replace the problematic sections in your template -->

                         <!-- Info Message -->
                         @if (infoData(); as info) {
                         <div class="info-message-wrapper">
                              <div class="info-panel">
                                   <div class="info-text">
                                        <span> @if (info.isOrderBookTab) { Order Book Stats: {{ $any(info).pair }} } @else { @switch (activeTab()) { @case ('createOffer') { Outstanding Offers } @case ('getOffers') { Existing Offers } @case ('getOrderBook') { Existing Offers } @case ('cancelOffer') { Cancellable Offers } } ({{ info.offerCount }}) } </span>

                                        <div style="margin-bottom: 16px; line-height: 1.5; cursor: default">
                                             <ng-icon name="heroInformationCircle" size="20" class="text-blue-600" style="vertical-align: -4px; margin-right: 8px"></ng-icon>
                                             <code>{{ info.walletName }}</code>
                                             @if (info.offerCount === 0) { has no outstanding offers. } @else { has <strong>{{ info.offerCount }}</strong> outstanding offer{{ info.offerCount === 1 ? '' : 's' }} @switch (activeTab()) { @case ('createOffer') { created. } @case ('getOffers') { on the DEX. } @case ('getOrderBook') { on the DEX. } @case ('cancelOffer') { that can be cancelled. } } }
                                        </div>

                                        @if (info.offerCount > 0 || info.isOrderBookTab) {
                                        <div class="credential-info-panel" (click)="toggleInfoPanel()" style="background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 10px; padding: 14px 16px; cursor: pointer; user-select: none; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); transition: all 0.2s">
                                             <div class="info-header" style="display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: #0369a1">
                                                  <span> @if (info.isOrderBookTab) { Order Book Stats: {{ $any(info).pair }} } @else { @switch (activeTab()) { @case ('createOffer') { Outstanding Offers } @case ('getOffers') { Existing Offers } @case ('getOrderBook') { Existing Offers } @case ('cancelOffer') { Cancellable Offers } } ({{ info.offerCount }}) } </span>
                                                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#0369a1" stroke-width="3" [style.transform]="infoPanelExpanded() ? 'rotate(180deg)' : 'rotate(0)'" style="transition: transform 0.25s ease">
                                                       <path d="M6 9l6 6 6-6" />
                                                  </svg>
                                             </div>

                                             <!-- Inside the expanded panel -->
                                             @if (infoPanelExpanded()) {
                                             <div style="margin-top: 12px; font-size: 0.9em; line-height: 1.7">
                                                  @if (info.isOrderBookTab) {
                                                  <ul style="padding-left: 22px; margin: 0">
                                                       <li><strong>Pair:</strong> {{ $any(info).pair }}</li>
                                                       <li><strong>VWAP:</strong> {{ $any(info).stats.vwap }} {{ $any(info).pair }}</li>
                                                       <li><strong>Simple Avg:</strong> {{ $any(info).stats.simpleAvg }} {{ $any(info).pair }}</li>
                                                       <li><strong>Best Rate:</strong> {{ $any(info).stats.bestRate }} {{ $any(info).pair }}</li>
                                                       <li><strong>Spread:</strong> {{ $any(info).stats.spread }} ({{ $any(info).stats.spreadPercent }}%)</li>
                                                       <li><strong>Depth (30% slippage):</strong> {{ $any(info).stats.depth }}</li>
                                                       <li><strong>Execution (15 input):</strong> {{ $any(info).stats.execution }}</li>
                                                       <li><strong>Volatility:</strong> {{ $any(info).stats.volatility }}</li>
                                                       <li><strong>Liquidity Ratio:</strong> {{ $any(info).stats.liquidityRatio }}</li>
                                                  </ul>
                                                  } @else {
                                                  <!-- Existing offers list -->
                                                  <ul style="padding-left: 22px; margin: 0">
                                                       @for (offer of info.offersToShow; track offer.index) {
                                                       <li style="margin-bottom: 16px; display: flex; align-items: flex-start; gap: 12px">
                                                            <app-tooltip-link [href]="txUiService.explorerUrl() + 'offer/' + offer.index" tooltipText="View Offer on XRPL Explorer">
                                                                 <div style="font-weight: 500; margin-bottom: 4px">{{ offer.takerGets }} â†’ {{ offer.takerPays }}</div>
                                                                 <div style="color: #555; font-size: 0.88em">
                                                                      <span>Offer Index:</span>
                                                                      <code style="font-size: 0.95em">{{ offer.index }}</code>
                                                                 </div>
                                                                 @if (offer.flags.length) {
                                                                 <div style="color: #555; font-size: 0.88em"><span>Flags:</span> {{ offer.flags.join(', ') }}</div>
                                                                 }
                                                            </app-tooltip-link>

                                                            <button (click)="copyAndToast(offer.index, 'Offer Index'); $event.stopPropagation()" class="copy-btn" title="Copy Offer Index">
                                                                 <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                                                      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                                                 </svg>
                                                            </button>
                                                       </li>
                                                       }
                                                  </ul>
                                                  }
                                             </div>
                                             }
                                        </div>
                                        }
                                   </div>
                              </div>
                         </div>
                         }

                         <!-- Warning Message -->
                         @if (txUiService.warningMessage) {
                         <div class="warning-panel">
                              <ng-icon name="heroExclamationTriangle" size="20" class="text-yellow-600"></ng-icon>
                              <div class="warning-text" [innerHTML]="txUiService.safeWarning"></div>
                         </div>
                         }

                         <!-- Existing offers on selected account -->
                         <!-- @if (existingOffers().length > 0) {
               <div class="outstanding-checks-panel">
                    <div class="panel-header" (click)="toggleExistingOffers()" style="cursor: pointer; user-select: none">
                         <h3 class="panel-title" style="margin: 0; font-size: 0.8rem; display: flex; align-items: center; gap: 0.5rem">
                              <ng-icon name="heroQueueList" size="20" class="text-red-600"></ng-icon>
                              Existing Offers ({{ existingOffers().length }})
                         </h3>
                    </div>

                    <div class="credential-list-container" [class.collapsed]="displayExistingOffers()">
                         @if (!displayExistingOffers()) {
                         <div class="checks-list">
                              @for (offer of existingOffers(); track offer.Sequence){
                              <div class="check-card">
                                   <div class="check-extras">
                                        @if (offer.LedgerEntryType) {
                                        <span class="badge badge-invoice">LedgerEntryType: {{ offer.LedgerEntryType }}</span>
                                        } @else {
                                        <span class="badge badge-tag-not-set">LedgerEntryType: Not set</span>
                                        } @if (offer.Account) {
                                        <span class="badge badge-address">Account: {{ offer.Account }}</span>
                                        } @else {
                                        <span class="badge badge-address-not-set">Account: Not set</span>
                                        } @if (offer.Flags !== undefined && offer.Flags !== 0) {
                                        <span class="badge badge-expire">
                                             Flags: @for (f of decodeOfferFlags(offer.Flags); track f) {
                                             <span>{{ f }}</span>
                                             }
                                             <span class="flag-original"> ({{ offer.Flags }})</span>
                                        </span>
                                        } @else {
                                        <span class="badge badge-expire-not-set">Flags: Not set</span>
                                        }

                                        <div class="line-break"></div>

                                        @if (offer.TakerGets) {
                                        <span class="badge badge-uri">TakerGets: {{ offer.TakerGets }}</span>
                                        } @else {
                                        <span class="badge badge-uri-not-set">TakerGets: Not set</span>
                                        } @if (offer.TakerPays) {
                                        <span class="badge badge-uri">TakerPays: {{ offer.TakerPays }}</span>
                                        } @else {
                                        <span class="badge badge-uri-not-set"> TakerPays: Not set</span>
                                        } @if (offer.TxHash) {
                                        <span class="badge badge-credential-index">Hash: {{ offer.TxHash }}</span>
                                        } @else {
                                        <span class="badge badge-credential-index-not-set">Hash: Not set</span>
                                        }
                                   </div>

                                   <div class="button-group">
                                        <button class="icon-btn copy-check-id" (click)="copyOfferHash(offer.TxHash); $event.stopPropagation(); $event.preventDefault()" title="Copy NFT Token ID" type="button">
                                             <ng-icon name="heroClipboardDocumentList" size="20" class="text-red-600"></ng-icon>
                                             <a [href]="`${this.txUiService.explorerUrl()}entry/` + offer.TxHash" target="_blank" rel="noopener noreferrer" class="icon-btn" style="padding-left: 20px" title="View on XRPL Win" (click)="$event.stopPropagation()">
                                                  <ng-icon name="heroArrowTopRightOnSquare" size="20" class="text-blue-600"></ng-icon>
                                             </a>
                                        </button>
                                   </div>
                              </div>
                              }
                         </div>
                         }
                    </div>
               </div>
               } -->

                         <form #theForm="ngForm" class="send-form">
                              <div [@tabTransition]="activeTab()">
                                   <div class="tab-content-columns">
                                        <!-- ==================== LEFT: FORM FIELDS ==================== -->
                                        <div class="tab-content-container form-fields-container">
                                             <!-- Get Offers -->
                                             @if(activeTab() !== 'cancelOffer') {
                                             <div class="form-row">
                                                  <!-- Info -->
                                                  <div class="form-group">
                                                       <span class="tooltip" tooltip-data="Taker Gets.">
                                                            <label for="weWantCurrencyField">Taker Gets - Buy Side</label>
                                                       </span>
                                                  </div>
                                                  <div class="form-group">
                                                       <span class="tooltip" tooltip-data="Taker Pays.">
                                                            <label for="weSpendCurrencyField">Taker Pays - Sell Side</label>
                                                       </span>
                                                  </div>
                                             </div>

                                             <div class="form-row">
                                                  <!-- We Want Currency -->
                                                  <div class="form-group">
                                                       <label for="weWantCurrency">Currency Code</label>
                                                       <p class="form-hint">The token you want to receive or deposit/withdraw.</p>
                                                       <app-select-search-dropdown [items]="weWantCurrencyItems()" [value]="selectedWeWantCurrencyItem()" [showShortAddress]="false" (valueChange)="onWeWantCurrencySelected($event)" placeholder="Search currency code..." emptyMessage="No currencies available">
                                                            <ng-template #itemTemplate let-item>
                                                                 <div class="flex items-center gap-2">
                                                                      @if (item.id === 'XRP') {
                                                                      <span class="text-yellow-500 font-bold">XRP</span>
                                                                      } @else {
                                                                      <span>{{ item.display }}</span>
                                                                      }
                                                                      <span class="text-xs text-gray-500">({{ item.secondary }})</span>
                                                                 </div>
                                                            </ng-template>
                                                       </app-select-search-dropdown>
                                                  </div>

                                                  <!-- We Spend Currency -->
                                                  <div class="form-group">
                                                       <label for="weSpendCurrency">Currency Code</label>
                                                       <p class="form-hint">The token you want to spend or deposit/withdraw.</p>
                                                       <app-select-search-dropdown [items]="weSpendCurrencyItems()" [value]="selectedWeSpendCurrencyItem()" [showShortAddress]="false" (valueChange)="onWeSpendCurrencySelected($event)" placeholder="Search currency code..." emptyMessage="No currencies available">
                                                            <ng-template #itemTemplate let-item>
                                                                 <div class="flex items-center gap-2">
                                                                      @if (item.id === 'XRP') {
                                                                      <span class="text-yellow-500 font-bold">XRP</span>
                                                                      } @else {
                                                                      <span>{{ item.display }}</span>
                                                                      }
                                                                      <span class="text-xs text-gray-500">({{ item.secondary }})</span>
                                                                 </div>
                                                            </ng-template>
                                                       </app-select-search-dropdown>
                                                  </div>
                                             </div>

                                             <div class="form-row">
                                                  <!-- Issuer -->
                                                  <div class="form-group">
                                                       <label for="weWantIssuer">Issuer</label>
                                                       <p class="form-hint">The XRPL account that issues the token you want to receive.</p>
                                                       <app-select-search-dropdown [items]="weWantIssuerItems()" [value]="selectedWeWantIssuerItem()" [showShortAddress]="true" (valueChange)="onWeWantIssuerSelected($event)" placeholder="Search issuer address or name..." emptyMessage="No issuers available for this currency">
                                                            <ng-template #itemTemplate let-item>
                                                                 <div class="flex flex-col">
                                                                      <span class="font-medium">{{ item.display }}</span>
                                                                      <span class="text-xs text-gray-500">{{ item.secondary }}</span>
                                                                 </div>
                                                            </ng-template>
                                                       </app-select-search-dropdown>
                                                  </div>
                                                  <div class="form-group">
                                                       <label for="weWantIssuer">Issuer</label>
                                                       <p class="form-hint">The XRPL account that issues the token you want to receive.</p>
                                                       <app-select-search-dropdown [items]="weSpendIssuerItems()" [value]="selectedWeSpendIssuerItem()" [showShortAddress]="true" (valueChange)="onWeSpendIssuerSelected($event)" placeholder="Search issuer address or name..." emptyMessage="No issuers available for this currency">
                                                            <ng-template #itemTemplate let-item>
                                                                 <div class="flex flex-col">
                                                                      <span class="font-medium">{{ item.display }}</span>
                                                                      <span class="text-xs text-gray-500">{{ item.secondary }}</span>
                                                                 </div>
                                                            </ng-template>
                                                       </app-select-search-dropdown>
                                                  </div>
                                             </div>

                                             @if(activeTab() === 'createOffer') {
                                             <div class="form-row">
                                                  <!-- Amount -->
                                                  <div class="form-group">
                                                       <label>Amount</label>
                                                       <input type="text" [(ngModel)]="weWantAmount" name="weWantAmountField" (ngModelChange)="onWeWantAmountChange()" placeholder="e.g. 10.5" />
                                                  </div>
                                                  <div class="form-group">
                                                       <label>Amount</label>
                                                       <input type="text" [(ngModel)]="weSpendAmount" name="weSpendAmount" (ngModelChange)="onWeSpendAmountChange()" placeholder="e.g. 10.5" />
                                                  </div>
                                             </div>

                                             <div class="form-row">
                                                  <!-- Currency Balance -->
                                                  <div class="form-group">
                                                       <label>Currency Balance</label>
                                                       <input type="text" [value]="(weWantBalance$ | async) ?? '0'" readonly name="weWantTokenBalanceField" />
                                                  </div>
                                                  <div class="form-group">
                                                       <label>Currency Balance</label>
                                                       <input type="text" [value]="(weSpendBalance$ | async) ?? '0'" readonly name="weSpendTokenBalanceField" />
                                                  </div>
                                             </div>
                                             }

                                             <!-- Flags header -->
                                             @if(activeTab() === 'createOffer') {
                                             <div class="token-flags-header" style="margin-top: 0.8em; margin-bottom: 0.5em">
                                                  <lucide-icon name="flag" size="20"></lucide-icon>
                                                  <span class="token-flags-title">Offer Flags</span>
                                             </div>

                                             <div class="form-row-account-flags">
                                                  @for (flag of offerFlagsConfig; track flag.key) {
                                                  <div class="flag-item-account-flags" [class.enabled]="flags[flag.key]" (click)="toggleFlag(flag.key)">
                                                       <div class="flag-header-account">
                                                            <input type="checkbox" [id]="flag.key" [name]="flag.key" [checked]="flags[flag.key]" class="flag-checkbox" />
                                                            <svg class="flag-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                                 <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0L3 7m1.582 2H12" />
                                                            </svg>
                                                            <span class="flag-title-account-flags">{{ flag.title }}</span>
                                                       </div>

                                                       <div class="flag-value">{{ FLAG_VALUES[flag.key] }} {{ flag.key }}</div>
                                                       <div class="flag-desc">{{ flag.desc }}</div>
                                                  </div>
                                                  }
                                                  <div class="flag-item-account-flags">
                                                       <div class="flags-total">
                                                            <span class="total-label">Total Flags Value:</span>
                                                            <span class="total-value">{{ totalFlagsValue() }} ({{ totalFlagsHex() }})</span>
                                                       </div>
                                                  </div>
                                             </div>
                                             } }

                                             <!-- Cancel offer -->
                                             @if (activeTab() === 'cancelOffer' && existingOffers().length > 0) {
                                             <div class="form-row" style="margin-bottom: 1.2em">
                                                  <div class="form-group">
                                                       <label>Select Offers to cancel</label>
                                                       <p class="form-hint">Select existing offers to cancel for the selected account.</p>
                                                       <div class="combobox-container" (clickOutside)="closeOfferDropdown()">
                                                            <input #offerDropdownInput type="text" [value]="offerSearchQuery()" (input)="onOfferSearchInput($event)" (focus)="openOfferDropdown()" (keydown)="onOfferKeyDown($event)" [placeholder]="selectedOfferSequences().length > 0 ? selectedOfferSequences().length + ' offer(s) selected' : 'Search offers by sequence...'" class="combobox-input" autocomplete="off" />
                                                            <button class="combobox-toggle" (click)="toggleOfferDropdown()" type="button">
                                                                 <lucide-icon name="chevron-down" size="18"></lucide-icon>
                                                            </button>
                                                       </div>
                                                  </div>
                                             </div>

                                             @if (selectedOffers().length > 0) {
                                             <div class="offer-container">
                                                  <!-- List of selected offers -->
                                                  <div class="offer-list">
                                                       @for (offer of selectedOffers(); track offer.Sequence) {
                                                       <div class="offer-item">
                                                            <span class="offer-sequence">{{ formatOfferDisplay(offer) }}</span>
                                                            <button type="button" class="offer-remove" (click)="toggleOfferSelection(offer)" aria-label="Remove offer">
                                                                 <ng-icon name="heroXCircle" size="16" color="red"></ng-icon>
                                                            </button>
                                                       </div>
                                                       }
                                                  </div>

                                                  <!-- Footer row -->
                                                  <div class="offer-footer">
                                                       <button type="button" class="clear-btn" (click)="clearAllOfferSelections()">Clear all</button>
                                                  </div>
                                             </div>
                                             }

                                             <!-- Dropdown Template -->
                                             <ng-template #offerDropdownTemplate>
                                                  <div class="combobox-wrapper" (click)="$event.stopPropagation()">
                                                       <div class="combobox-dropdown-overlay offer-dropdown" style="max-height: 340px; overflow-y: auto; padding: 8px 0">
                                                            <!-- Header: Select All + Clear -->
                                                            <div class="dropdown-header" style="display: flex; justify-content: space-between; align-items: center; padding: 8px 16px; border-bottom: 1px solid #e5e7eb; background: #f9fafb">
                                                                 <label class="checkbox-label" style="display: flex; align-items: center; gap: 8px; font-weight: 600; color: #374151; cursor: pointer">
                                                                      <input type="checkbox" [checked]="allOffersSelected()" (change)="toggleSelectAllOffers()" style="width: 16px; height: 16px" />
                                                                      <span>Select All</span>
                                                                 </label>
                                                                 <button class="clear-btn" (click)="clearAllOfferSelections()" [disabled]="selectedOfferSequences().length === 0" style="color: #dc2626; font-size: 0.875rem; font-weight: 500; background: none; border: none; cursor: pointer; opacity: 0.8" [style.opacity]="selectedOfferSequences().length === 0 ? 0.5 : 1">Clear</button>
                                                            </div>

                                                            <!-- Offer Items -->
                                                            @for (offer of filteredOffers(); track offer.Sequence; let i = $index) {
                                                            <label class="combobox-item offer-item" [class.highlighted]="highlightedOfferIndex() === i" (mouseenter)="highlightedOfferIndex.set(i)" style="display: flex; align-items: center; gap: 10px; padding: 10px 16px; cursor: pointer; user-select: none">
                                                                 <input type="checkbox" [checked]="selectedOfferSequences().includes(offer.Sequence)" (change)="toggleOfferSelection(offer)" style="width: 16px; height: 16px; cursor: pointer" />
                                                                 <span class="offer-sequence" style="font-family: monospace; font-size: 0.95em; color: #1f2937"> {{ formatOfferDisplay(offer) }} </span>
                                                            </label>
                                                            } @empty {
                                                            <div class="combobox-empty" style="padding: 16px; text-align: center; color: #6b7280">No offers match your search</div>
                                                            }
                                                       </div>
                                                  </div>
                                             </ng-template>
                                             }
                                        </div>
                                   </div>

                                   <app-transaction-options [showWhenTab]="['createOffer', 'cancelOffer']" [activeTab]="activeTab" [multiSigningEnabled]="txUiService.multiSigningEnabled" [regularKeySigningEnabled]="txUiService.regularKeySigningEnabled" />

                                   <!-- Action buttons -->
                                   <div class="button-row">
                                        <!-- @if (activeTab() === 'getOffers') {
                              <button type="button" class="btn-primary-blue" (click)="getOffers()" [disabled]="txUiService.spinner()">{{ txUiService.spinner() ? 'Processing...' : 'Get Offers' }}</button>
                              <button type="button" class="btn-primary-green" (click)="invertOrder()" [disabled]="txUiService.spinner()">{{ txUiService.spinner() ? 'Processing...' : 'Invert Order' }}</button>
                              } @else  -->
                                        @if(activeTab() === 'createOffer') {
                                        <button type="button" class="btn-primary-green" (click)="createOffer()" [disabled]="txUiService.spinner()">{{ txUiService.spinner() ? 'Processing...' : 'Create Offer' }}</button>
                                        <button type="button" class="btn-primary-green" (click)="invertOrder()" [disabled]="txUiService.spinner()">{{ txUiService.spinner() ? 'Processing...' : 'Invert Order' }}</button>
                                        } @else if(activeTab() === 'getOrderBook') {
                                        <button type="button" class="btn-primary-blue" (click)="getOrderBook()" [disabled]="txUiService.spinner()">{{ txUiService.spinner() ? 'Processing...' : 'Get Orderbook' }}</button>
                                        <button type="button" class="btn-primary-green" (click)="invertOrder()" [disabled]="txUiService.spinner()">{{ txUiService.spinner() ? 'Processing...' : 'Invert Order' }}</button>
                                        } @else if(activeTab() === 'cancelOffer') {
                                        <button type="button" class="btn-primary-red" (click)="cancelOffer()" [disabled]="txUiService.spinner()">{{ txUiService.spinner() ? 'Processing...' : 'Cancel Offer' }}</button>
                                        <button type="button" (click)="clearFields()" class="btn-secondary-clear-fields">Clear Fields</button>
                                        }
                                   </div>

                                   <!-- Execution time -->
                                   <div style="display: flex">
                                        <input type="text" [(ngModel)]="executionTime" name="executionTime" readonly />
                                   </div>
                                   <app-transaction-preview></app-transaction-preview>
                              </div>
                         </form>
                    </div>
               </div>
          </div>
     </main>
</div>

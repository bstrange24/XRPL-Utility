var O2e=Object.create;var rI=Object.defineProperty,N2e=Object.defineProperties,B2e=Object.getOwnPropertyDescriptor,V2e=Object.getOwnPropertyDescriptors,U2e=Object.getOwnPropertyNames,_C=Object.getOwnPropertySymbols,j2e=Object.getPrototypeOf,oI=Object.prototype.hasOwnProperty,rq=Object.prototype.propertyIsEnumerable;var iq=(n,t,e)=>t in n?rI(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,le=(n,t)=>{for(var e in t||={})oI.call(t,e)&&iq(n,e,t[e]);if(_C)for(var e of _C(t))rq.call(t,e)&&iq(n,e,t[e]);return n},Ge=(n,t)=>N2e(n,V2e(t));var l_=(n,t)=>{var e={};for(var i in n)oI.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&_C)for(var i of _C(n))t.indexOf(i)<0&&rq.call(n,i)&&(e[i]=n[i]);return e};var me=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var H2e=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of U2e(t))!oI.call(n,r)&&r!==e&&rI(n,r,{get:()=>t[r],enumerable:!(i=B2e(t,r))||i.enumerable});return n};var _i=(n,t,e)=>(e=n!=null?O2e(j2e(n)):{},H2e(t||!n||!n.__esModule?rI(e,"default",{value:n,enumerable:!0}):e,n));var z=(n,t,e)=>new Promise((i,r)=>{var o=l=>{try{a(e.next(l))}catch(c){r(c)}},s=l=>{try{a(e.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((e=e.apply(n,t)).next())});var r4=me((uEt,PL)=>{"use strict";var zke=Object.prototype.hasOwnProperty,Ua="~";function iw(){}Object.create&&(iw.prototype=Object.create(null),new iw().__proto__||(Ua=!1));function qke(n,t,e){this.fn=n,this.context=t,this.once=e||!1}function fJ(n,t,e,i,r){if(typeof e!="function")throw new TypeError("The listener must be a function");var o=new qke(e,i||n,r),s=Ua?Ua+t:t;return n._events[s]?n._events[s].fn?n._events[s]=[n._events[s],o]:n._events[s].push(o):(n._events[s]=o,n._eventsCount++),n}function i4(n,t){--n._eventsCount===0?n._events=new iw:delete n._events[t]}function la(){this._events=new iw,this._eventsCount=0}la.prototype.eventNames=function(){var t=[],e,i;if(this._eventsCount===0)return t;for(i in e=this._events)zke.call(e,i)&&t.push(Ua?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};la.prototype.listeners=function(t){var e=Ua?Ua+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s};la.prototype.listenerCount=function(t){var e=Ua?Ua+t:t,i=this._events[e];return i?i.fn?1:i.length:0};la.prototype.emit=function(t,e,i,r,o,s){var a=Ua?Ua+t:t;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,d,u;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,r),!0;case 5:return l.fn.call(l.context,e,i,r,o),!0;case 6:return l.fn.call(l.context,e,i,r,o,s),!0}for(u=1,d=new Array(c-1);u<c;u++)d[u-1]=arguments[u];l.fn.apply(l.context,d)}else{var h=l.length,f;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,i);break;case 4:l[u].fn.call(l[u].context,e,i,r);break;default:if(!d)for(f=1,d=new Array(c-1);f<c;f++)d[f-1]=arguments[f];l[u].fn.apply(l[u].context,d)}}return!0};la.prototype.on=function(t,e,i){return fJ(this,t,e,i,!1)};la.prototype.once=function(t,e,i){return fJ(this,t,e,i,!0)};la.prototype.removeListener=function(t,e,i,r){var o=Ua?Ua+t:t;if(!this._events[o])return this;if(!e)return i4(this,o),this;var s=this._events[o];if(s.fn)s.fn===e&&(!r||s.once)&&(!i||s.context===i)&&i4(this,o);else{for(var a=0,l=[],c=s.length;a<c;a++)(s[a].fn!==e||r&&!s[a].once||i&&s[a].context!==i)&&l.push(s[a]);l.length?this._events[o]=l.length===1?l[0]:l:i4(this,o)}return this};la.prototype.removeAllListeners=function(t){var e;return t?(e=Ua?Ua+t:t,this._events[e]&&i4(this,e)):(this._events=new iw,this._eventsCount=0),this};la.prototype.off=la.prototype.removeListener;la.prototype.addListener=la.prototype.on;la.prefixed=Ua;la.EventEmitter=la;typeof PL<"u"&&(PL.exports=la)});var Nt=me(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.XRPLFaucetError=io.NotFoundError=io.ValidationError=io.ResponseFormatError=io.TimeoutError=io.RippledNotInitializedError=io.DisconnectedError=io.NotConnectedError=io.RippledError=io.ConnectionError=io.UnexpectedError=io.XrplError=void 0;var Rh=class extends Error{constructor(t="",e){super(t),this.name=this.constructor.name,this.message=t,this.data=e,Error.captureStackTrace!=null&&Error.captureStackTrace(this,this.constructor)}toString(){let t=`[${this.name}(${this.message}`;return this.data&&(t+=`, ${JSON.stringify(this.data)}`),t+=")]",t}inspect(){return this.toString()}};io.XrplError=Rh;var LL=class extends Rh{};io.RippledError=LL;var RL=class extends Rh{};io.UnexpectedError=RL;var lp=class extends Rh{};io.ConnectionError=lp;var OL=class extends lp{};io.NotConnectedError=OL;var NL=class extends lp{};io.DisconnectedError=NL;var BL=class extends lp{};io.RippledNotInitializedError=BL;var VL=class extends lp{};io.TimeoutError=VL;var UL=class extends lp{};io.ResponseFormatError=UL;var jL=class extends Rh{};io.ValidationError=jL;var HL=class extends Rh{};io.XRPLFaucetError=HL;var WL=class extends Rh{constructor(t="Not found"){super(t)}};io.NotFoundError=WL});var zL=me(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});Oh.DEFAULT_API_VERSION=Oh.RIPPLED_API_V2=Oh.RIPPLED_API_V1=void 0;Oh.RIPPLED_API_V1=1;Oh.RIPPLED_API_V2=2;Oh.DEFAULT_API_VERSION=Oh.RIPPLED_API_V2});var qL=me(o4=>{"use strict";Object.defineProperty(o4,"__esModule",{value:!0});o4.AccountRootFlags=void 0;var pJ=(function(n){return n[n.lsfPasswordSpent=65536]="lsfPasswordSpent",n[n.lsfRequireDestTag=131072]="lsfRequireDestTag",n[n.lsfRequireAuth=262144]="lsfRequireAuth",n[n.lsfDisallowXRP=524288]="lsfDisallowXRP",n[n.lsfDisableMaster=1048576]="lsfDisableMaster",n[n.lsfNoFreeze=2097152]="lsfNoFreeze",n[n.lsfGlobalFreeze=4194304]="lsfGlobalFreeze",n[n.lsfDefaultRipple=8388608]="lsfDefaultRipple",n[n.lsfDepositAuth=16777216]="lsfDepositAuth",n[n.lsfAMM=33554432]="lsfAMM",n[n.lsfDisallowIncomingNFTokenOffer=67108864]="lsfDisallowIncomingNFTokenOffer",n[n.lsfDisallowIncomingCheck=134217728]="lsfDisallowIncomingCheck",n[n.lsfDisallowIncomingPayChan=268435456]="lsfDisallowIncomingPayChan",n[n.lsfDisallowIncomingTrustline=536870912]="lsfDisallowIncomingTrustline",n[n.lsfAllowTrustLineClawback=2147483648]="lsfAllowTrustLineClawback",n[n.lsfAllowTrustLineLocking=1073741824]="lsfAllowTrustLineLocking",n})(pJ||(o4.AccountRootFlags=pJ={}))});var mJ=me(s4=>{"use strict";Object.defineProperty(s4,"__esModule",{value:!0});s4.crypto=void 0;s4.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var ja=me(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.wrapXOFConstructorWithOpts=On.wrapConstructorWithOpts=On.wrapConstructor=On.Hash=On.nextTick=On.swap32IfBE=On.byteSwapIfBE=On.swap8IfBE=On.isLE=void 0;On.isBytes=yJ;On.anumber=$L;On.abytes=C2;On.ahash=$ke;On.aexists=Kke;On.aoutput=Gke;On.u8=Xke;On.u32=Yke;On.clean=Zke;On.createView=Qke;On.rotr=Jke;On.rotl=e4e;On.byteSwap=GL;On.byteSwap32=vJ;On.bytesToHex=n4e;On.hexToBytes=i4e;On.asyncLoop=o4e;On.utf8ToBytes=XL;On.bytesToUtf8=s4e;On.toBytes=a4;On.kdfInputToBytes=a4e;On.concatBytes=l4e;On.checkOpts=c4e;On.createHasher=bJ;On.createOptHasher=wJ;On.createXOFer=SJ;On.randomBytes=d4e;var S2=mJ();function yJ(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function $L(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function C2(n,...t){if(!yJ(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function $ke(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");$L(n.outputLen),$L(n.blockLen)}function Kke(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Gke(n,t){C2(n);let e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Xke(n){return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}function Yke(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Zke(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function Qke(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Jke(n,t){return n<<32-t|n>>>t}function e4e(n,t){return n<<t|n>>>32-t>>>0}On.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function GL(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}On.swap8IfBE=On.isLE?n=>n:n=>GL(n);On.byteSwapIfBE=On.swap8IfBE;function vJ(n){for(let t=0;t<n.length;t++)n[t]=GL(n[t]);return n}On.swap32IfBE=On.isLE?n=>n:vJ;var _J=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",t4e=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function n4e(n){if(C2(n),_J)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=t4e[n[e]];return t}var Nh={_0:48,_9:57,A:65,F:70,a:97,f:102};function gJ(n){if(n>=Nh._0&&n<=Nh._9)return n-Nh._0;if(n>=Nh.A&&n<=Nh.F)return n-(Nh.A-10);if(n>=Nh.a&&n<=Nh.f)return n-(Nh.a-10)}function i4e(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(_J)return Uint8Array.fromHex(n);let t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(e);for(let r=0,o=0;r<e;r++,o+=2){let s=gJ(n.charCodeAt(o)),a=gJ(n.charCodeAt(o+1));if(s===void 0||a===void 0){let l=n[o]+n[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}i[r]=s*16+a}return i}var r4e=()=>z(null,null,function*(){});On.nextTick=r4e;function o4e(n,t,e){return z(this,null,function*(){let i=Date.now();for(let r=0;r<n;r++){e(r);let o=Date.now()-i;o>=0&&o<t||(yield(0,On.nextTick)(),i+=o)}})}function XL(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function s4e(n){return new TextDecoder().decode(n)}function a4(n){return typeof n=="string"&&(n=XL(n)),C2(n),n}function a4e(n){return typeof n=="string"&&(n=XL(n)),C2(n),n}function l4e(...n){let t=0;for(let i=0;i<n.length;i++){let r=n[i];C2(r),t+=r.length}let e=new Uint8Array(t);for(let i=0,r=0;i<n.length;i++){let o=n[i];e.set(o,r),r+=o.length}return e}function c4e(n,t){if(t!==void 0&&{}.toString.call(t)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(n,t)}var KL=class{};On.Hash=KL;function bJ(n){let t=i=>n().update(a4(i)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function wJ(n){let t=(i,r)=>n(r).update(a4(i)).digest(),e=n({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=i=>n(i),t}function SJ(n){let t=(i,r)=>n(r).update(a4(i)).digest(),e=n({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=i=>n(i),t}On.wrapConstructor=bJ;On.wrapConstructorWithOpts=wJ;On.wrapXOFConstructorWithOpts=SJ;function d4e(n=32){if(S2.crypto&&typeof S2.crypto.getRandomValues=="function")return S2.crypto.getRandomValues(new Uint8Array(n));if(S2.crypto&&typeof S2.crypto.randomBytes=="function")return Uint8Array.from(S2.crypto.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}});var YL=me(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.equal=cp.concat=cp.HEX_REGEX=void 0;var u4e=ja();cp.HEX_REGEX=/^[A-F0-9]*$/iu;function h4e(n){return(0,u4e.concatBytes)(...n)}cp.concat=h4e;function f4e(n,t){if(n.byteLength!==t.byteLength)return!1;let e=new Int8Array(n),i=new Int8Array(t);for(let r=0;r!==n.byteLength;r++)if(e[r]!==i[r])return!1;return!0}cp.equal=f4e});var qi=me(ps=>{"use strict";var p4e=ps&&ps.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),m4e=ps&&ps.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&p4e(t,n,e)};Object.defineProperty(ps,"__esModule",{value:!0});ps.randomBytes=ps.stringToHex=ps.hexToString=ps.hexToBytes=ps.bytesToHex=void 0;var CJ=ja(),g4e=YL(),y4e=n=>(0,CJ.bytesToHex)(n instanceof Uint8Array?n:Uint8Array.from(n)).toUpperCase();ps.bytesToHex=y4e;var v4e=n=>{let t=n.length,e=new Uint8Array(t/2);if(!g4e.HEX_REGEX.test(n))throw new Error("Invalid hex string");for(let i=0;i<e.length;i++){let r=i*2,o=n.slice(r,r+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[i]=s}return e};ps.hexToBytes=v4e;var _4e=(n,t="utf8")=>new TextDecoder(t).decode((0,ps.hexToBytes)(n));ps.hexToString=_4e;var b4e=n=>(0,ps.bytesToHex)(new TextEncoder().encode(n));ps.stringToHex=b4e;ps.randomBytes=CJ.randomBytes;m4e(YL(),ps)});var p4=me(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.bytes=Qt.stringToBytes=Qt.str=Qt.bytesToString=Qt.hex=Qt.utf8=Qt.bech32m=Qt.bech32=Qt.base58check=Qt.createBase58check=Qt.base58xmr=Qt.base58xrp=Qt.base58flickr=Qt.base58=Qt.base64urlnopad=Qt.base64url=Qt.base64nopad=Qt.base64=Qt.base32crockford=Qt.base32hexnopad=Qt.base32hex=Qt.base32nopad=Qt.base32=Qt.base16=Qt.utils=void 0;function wm(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function JL(n,...t){if(!wm(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function EJ(n,t){return Array.isArray(t)?t.length===0?!0:n?t.every(e=>typeof e=="string"):t.every(e=>Number.isSafeInteger(e)):!1}function eR(n){if(typeof n!="function")throw new Error("function expected");return!0}function dp(n,t){if(typeof t!="string")throw new Error(`${n}: string expected`);return!0}function x2(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function c4(n){if(!Array.isArray(n))throw new Error("array expected")}function d4(n,t){if(!EJ(!0,t))throw new Error(`${n}: array of strings expected`)}function tR(n,t){if(!EJ(!1,t))throw new Error(`${n}: array of numbers expected`)}function Ha(...n){let t=o=>o,e=(o,s)=>a=>o(s(a)),i=n.map(o=>o.encode).reduceRight(e,t),r=n.map(o=>o.decode).reduce(e,t);return{encode:i,decode:r}}function hl(n){let t=typeof n=="string"?n.split(""):n,e=t.length;d4("alphabet",t);let i=new Map(t.map((r,o)=>[r,o]));return{encode:r=>(c4(r),r.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=e)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${n}`);return t[o]})),decode:r=>(c4(r),r.map(o=>{dp("alphabet.decode",o);let s=i.get(o);if(s===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${n}`);return s}))}}function fl(n=""){return dp("join",n),{encode:t=>(d4("join.decode",t),t.join(n)),decode:t=>(dp("join.decode",t),t.split(n))}}function ow(n,t="="){return x2(n),dp("padding",t),{encode(e){for(d4("padding.encode",e);e.length*n%8;)e.push(t);return e},decode(e){d4("padding.decode",e);let i=e.length;if(i*n%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;i>0&&e[i-1]===t;i--)if((i-1)*n%8===0)throw new Error("padding: invalid, string has too much padding");return e.slice(0,i)}}}function AJ(n){return eR(n),{encode:t=>t,decode:t=>n(t)}}function ZL(n,t,e){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(e<2)throw new Error(`convertRadix: invalid to=${e}, base cannot be less than 2`);if(c4(n),!n.length)return[];let i=0,r=[],o=Array.from(n,a=>{if(x2(a),a<0||a>=t)throw new Error(`invalid integer: ${a}`);return a}),s=o.length;for(;;){let a=0,l=!0;for(let c=i;c<s;c++){let d=o[c],u=t*a,h=u+d;if(!Number.isSafeInteger(h)||u/t!==a||h-d!==u)throw new Error("convertRadix: carry overflow");let f=h/e;a=h%e;let p=Math.floor(f);if(o[c]=p,!Number.isSafeInteger(p)||p*e+a!==h)throw new Error("convertRadix: carry overflow");if(l)p?l=!1:i=c;else continue}if(r.push(a),l)break}for(let a=0;a<n.length-1&&n[a]===0;a++)r.push(0);return r.reverse()}var DJ=(n,t)=>t===0?n:DJ(t,n%t),u4=(n,t)=>n+(t-DJ(n,t)),l4=(()=>{let n=[];for(let t=0;t<40;t++)n.push(2**t);return n})();function h4(n,t,e,i){if(c4(n),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(e<=0||e>32)throw new Error(`convertRadix2: wrong to=${e}`);if(u4(t,e)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${e} carryBits=${u4(t,e)}`);let r=0,o=0,s=l4[t],a=l4[e]-1,l=[];for(let c of n){if(x2(c),c>=s)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(r=r<<t|c,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=e;o-=e)l.push((r>>o-e&a)>>>0);let d=l4[o];if(d===void 0)throw new Error("invalid carry");r&=d-1}if(r=r<<e-o&a,!i&&o>=t)throw new Error("Excess padding");if(!i&&r>0)throw new Error(`Non-zero padding: ${r}`);return i&&o>0&&l.push(r>>>0),l}function IJ(n){x2(n);let t=2**8;return{encode:e=>{if(!wm(e))throw new Error("radix.encode input should be Uint8Array");return ZL(Array.from(e),t,n)},decode:e=>(tR("radix.decode",e),Uint8Array.from(ZL(e,n,t)))}}function Hl(n,t=!1){if(x2(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(u4(8,n)>32||u4(n,8)>32)throw new Error("radix2: carry overflow");return{encode:e=>{if(!wm(e))throw new Error("radix2.encode input should be Uint8Array");return h4(Array.from(e),8,n,!t)},decode:e=>(tR("radix2.decode",e),Uint8Array.from(h4(e,n,8,t)))}}function xJ(n){return eR(n),function(...t){try{return n.apply(null,t)}catch{}}}function FJ(n,t){return x2(n),eR(t),{encode(e){if(!wm(e))throw new Error("checksum.encode: input should be Uint8Array");let i=t(e).slice(0,n),r=new Uint8Array(e.length+n);return r.set(e),r.set(i,e.length),r},decode(e){if(!wm(e))throw new Error("checksum.decode: input should be Uint8Array");let i=e.slice(0,-n),r=e.slice(-n),o=t(i).slice(0,n);for(let s=0;s<n;s++)if(o[s]!==r[s])throw new Error("Invalid checksum");return i}}}Qt.utils={alphabet:hl,chain:Ha,checksum:FJ,convertRadix:ZL,convertRadix2:h4,radix:IJ,radix2:Hl,join:fl,padding:ow};Qt.base16=Ha(Hl(4),hl("0123456789ABCDEF"),fl(""));Qt.base32=Ha(Hl(5),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ow(5),fl(""));Qt.base32nopad=Ha(Hl(5),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),fl(""));Qt.base32hex=Ha(Hl(5),hl("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ow(5),fl(""));Qt.base32hexnopad=Ha(Hl(5),hl("0123456789ABCDEFGHIJKLMNOPQRSTUV"),fl(""));Qt.base32crockford=Ha(Hl(5),hl("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),fl(""),AJ(n=>n.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));var PJ=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",LJ=(n,t)=>{dp("base64",n);let e=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,i=t?"base64url":"base64";if(n.length>0&&!e.test(n))throw new Error("invalid base64");return Uint8Array.fromBase64(n,{alphabet:i,lastChunkHandling:"strict"})};Qt.base64=PJ?{encode(n){return JL(n),n.toBase64()},decode(n){return LJ(n,!1)}}:Ha(Hl(6),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ow(6),fl(""));Qt.base64nopad=Ha(Hl(6),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),fl(""));Qt.base64url=PJ?{encode(n){return JL(n),n.toBase64({alphabet:"base64url"})},decode(n){return LJ(n,!0)}}:Ha(Hl(6),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ow(6),fl(""));Qt.base64urlnopad=Ha(Hl(6),hl("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),fl(""));var nR=n=>Ha(IJ(58),hl(n),fl(""));Qt.base58=nR("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Qt.base58flickr=nR("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Qt.base58xrp=nR("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var kJ=[0,2,3,5,6,7,9,10,11];Qt.base58xmr={encode(n){let t="";for(let e=0;e<n.length;e+=8){let i=n.subarray(e,e+8);t+=Qt.base58.encode(i).padStart(kJ[i.length],"1")}return t},decode(n){let t=[];for(let e=0;e<n.length;e+=11){let i=n.slice(e,e+11),r=kJ.indexOf(i.length),o=Qt.base58.decode(i);for(let s=0;s<o.length-r;s++)if(o[s]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-r)))}return Uint8Array.from(t)}};var w4e=n=>Ha(FJ(4,t=>n(n(t))),Qt.base58);Qt.createBase58check=w4e;Qt.base58check=Qt.createBase58check;var QL=Ha(hl("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),fl("")),MJ=[996825010,642813549,513874426,1027748829,705979059];function rw(n){let t=n>>25,e=(n&33554431)<<5;for(let i=0;i<MJ.length;i++)(t>>i&1)===1&&(e^=MJ[i]);return e}function TJ(n,t,e=1){let i=n.length,r=1;for(let o=0;o<i;o++){let s=n.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${n})`);r=rw(r)^s>>5}r=rw(r);for(let o=0;o<i;o++)r=rw(r)^n.charCodeAt(o)&31;for(let o of t)r=rw(r)^o;for(let o=0;o<6;o++)r=rw(r);return r^=e,QL.encode(h4([r%l4[30]],30,5,!1))}function RJ(n){let t=n==="bech32"?1:734539939,e=Hl(5),i=e.decode,r=e.encode,o=xJ(i);function s(u,h,f=90){dp("bech32.encode prefix",u),wm(h)&&(h=Array.from(h)),tR("bech32.encode",h);let p=u.length;if(p===0)throw new TypeError(`Invalid prefix length ${p}`);let y=p+7+h.length;if(f!==!1&&y>f)throw new TypeError(`Length ${y} exceeds limit ${f}`);let v=u.toLowerCase(),b=TJ(v,h,t);return`${v}1${QL.encode(h)}${b}`}function a(u,h=90){dp("bech32.decode input",u);let f=u.length;if(f<8||h!==!1&&f>h)throw new TypeError(`invalid string length: ${f} (${u}). Expected (8..${h})`);let p=u.toLowerCase();if(u!==p&&u!==u.toUpperCase())throw new Error("String must be lowercase or uppercase");let y=p.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');let v=p.slice(0,y),b=p.slice(y+1);if(b.length<6)throw new Error("Data must be at least 6 characters long");let S=QL.decode(b).slice(0,-6),x=TJ(v,S,t);if(!b.endsWith(x))throw new Error(`Invalid checksum in ${u}: expected "${x}"`);return{prefix:v,words:S}}let l=xJ(a);function c(u){let{prefix:h,words:f}=a(u,!1);return{prefix:h,words:f,bytes:i(f)}}function d(u,h){return s(u,r(h))}return{encode:s,decode:a,encodeFromBytes:d,decodeToBytes:c,decodeUnsafe:l,fromWords:i,fromWordsUnsafe:o,toWords:r}}Qt.bech32=RJ("bech32");Qt.bech32m=RJ("bech32m");Qt.utf8={encode:n=>new TextDecoder().decode(n),decode:n=>new TextEncoder().encode(n)};var S4e=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",C4e={encode(n){return JL(n),n.toHex()},decode(n){return dp("hex",n),Uint8Array.fromHex(n)}};Qt.hex=S4e?C4e:Ha(Hl(4),hl("0123456789abcdef"),fl(""),AJ(n=>{if(typeof n!="string"||n.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof n} with length ${n.length}`);return n.toLowerCase()}));var f4={utf8:Qt.utf8,hex:Qt.hex,base16:Qt.base16,base32:Qt.base32,base64:Qt.base64,base64url:Qt.base64url,base58:Qt.base58,base58xmr:Qt.base58xmr},OJ="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",x4e=(n,t)=>{if(typeof n!="string"||!f4.hasOwnProperty(n))throw new TypeError(OJ);if(!wm(t))throw new TypeError("bytesToString() expects Uint8Array");return f4[n].encode(t)};Qt.bytesToString=x4e;Qt.str=Qt.bytesToString;var k4e=(n,t)=>{if(!f4.hasOwnProperty(n))throw new TypeError(OJ);if(typeof t!="string")throw new TypeError("stringToBytes() expects string");return f4[n].decode(t)};Qt.stringToBytes=k4e;Qt.bytes=Qt.stringToBytes});var rR=me(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.SHA512_IV=Wa.SHA384_IV=Wa.SHA224_IV=Wa.SHA256_IV=Wa.HashMD=void 0;Wa.setBigUint64=NJ;Wa.Chi=M4e;Wa.Maj=T4e;var vu=ja();function NJ(n,t,e,i){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,i);let r=BigInt(32),o=BigInt(4294967295),s=Number(e>>r&o),a=Number(e&o),l=i?4:0,c=i?0:4;n.setUint32(t+l,s,i),n.setUint32(t+c,a,i)}function M4e(n,t,e){return n&t^~n&e}function T4e(n,t,e){return n&t^n&e^t&e}var iR=class extends vu.Hash{constructor(t,e,i,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=i,this.isLE=r,this.buffer=new Uint8Array(t),this.view=(0,vu.createView)(this.buffer)}update(t){(0,vu.aexists)(this),t=(0,vu.toBytes)(t),(0,vu.abytes)(t);let{view:e,buffer:i,blockLen:r}=this,o=t.length;for(let s=0;s<o;){let a=Math.min(r-this.pos,o-s);if(a===r){let l=(0,vu.createView)(t);for(;r<=o-s;s+=r)this.process(l,s);continue}i.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,vu.aexists)(this),(0,vu.aoutput)(t,this),this.finished=!0;let{buffer:e,view:i,blockLen:r,isLE:o}=this,{pos:s}=this;e[s++]=128,(0,vu.clean)(this.buffer.subarray(s)),this.padOffset>r-s&&(this.process(i,0),s=0);for(let u=s;u<r;u++)e[u]=0;NJ(i,r-8,BigInt(this.length*8),o),this.process(i,0);let a=(0,vu.createView)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)a.setUint32(4*u,d[u],o)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:i,length:r,finished:o,destroyed:s,pos:a}=this;return t.destroyed=s,t.finished=o,t.length=r,t.pos=a,r%e&&t.buffer.set(i),t}clone(){return this._cloneInto()}};Wa.HashMD=iR;Wa.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);Wa.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]);Wa.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]);Wa.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])});var oee=me(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.toBig=Si.shrSL=Si.shrSH=Si.rotrSL=Si.rotrSH=Si.rotrBL=Si.rotrBH=Si.rotr32L=Si.rotr32H=Si.rotlSL=Si.rotlSH=Si.rotlBL=Si.rotlBH=Si.add5L=Si.add5H=Si.add4L=Si.add4H=Si.add3L=Si.add3H=void 0;Si.add=QJ;Si.fromBig=sR;Si.split=BJ;var m4=BigInt(2**32-1),oR=BigInt(32);function sR(n,t=!1){return t?{h:Number(n&m4),l:Number(n>>oR&m4)}:{h:Number(n>>oR&m4)|0,l:Number(n&m4)|0}}function BJ(n,t=!1){let e=n.length,i=new Uint32Array(e),r=new Uint32Array(e);for(let o=0;o<e;o++){let{h:s,l:a}=sR(n[o],t);[i[o],r[o]]=[s,a]}return[i,r]}var VJ=(n,t)=>BigInt(n>>>0)<<oR|BigInt(t>>>0);Si.toBig=VJ;var UJ=(n,t,e)=>n>>>e;Si.shrSH=UJ;var jJ=(n,t,e)=>n<<32-e|t>>>e;Si.shrSL=jJ;var HJ=(n,t,e)=>n>>>e|t<<32-e;Si.rotrSH=HJ;var WJ=(n,t,e)=>n<<32-e|t>>>e;Si.rotrSL=WJ;var zJ=(n,t,e)=>n<<64-e|t>>>e-32;Si.rotrBH=zJ;var qJ=(n,t,e)=>n>>>e-32|t<<64-e;Si.rotrBL=qJ;var $J=(n,t)=>t;Si.rotr32H=$J;var KJ=(n,t)=>n;Si.rotr32L=KJ;var GJ=(n,t,e)=>n<<e|t>>>32-e;Si.rotlSH=GJ;var XJ=(n,t,e)=>t<<e|n>>>32-e;Si.rotlSL=XJ;var YJ=(n,t,e)=>t<<e-32|n>>>64-e;Si.rotlBH=YJ;var ZJ=(n,t,e)=>n<<e-32|t>>>64-e;Si.rotlBL=ZJ;function QJ(n,t,e,i){let r=(t>>>0)+(i>>>0);return{h:n+e+(r/2**32|0)|0,l:r|0}}var JJ=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0);Si.add3L=JJ;var eee=(n,t,e,i)=>t+e+i+(n/2**32|0)|0;Si.add3H=eee;var tee=(n,t,e,i)=>(n>>>0)+(t>>>0)+(e>>>0)+(i>>>0);Si.add4L=tee;var nee=(n,t,e,i,r)=>t+e+i+r+(n/2**32|0)|0;Si.add4H=nee;var iee=(n,t,e,i,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0);Si.add5L=iee;var ree=(n,t,e,i,r,o)=>t+e+i+r+o+(n/2**32|0)|0;Si.add5H=ree;var E4e={fromBig:sR,split:BJ,toBig:VJ,shrSH:UJ,shrSL:jJ,rotrSH:HJ,rotrSL:WJ,rotrBH:zJ,rotrBL:qJ,rotr32H:$J,rotr32L:KJ,rotlSH:GJ,rotlSL:XJ,rotlBH:YJ,rotlBL:ZJ,add:QJ,add3L:JJ,add3H:eee,add4L:tee,add4H:nee,add5H:ree,add5L:iee};Si.default=E4e});var Cm=me(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.sha512_224=ro.sha512_256=ro.sha384=ro.sha512=ro.sha224=ro.sha256=ro.SHA512_256=ro.SHA512_224=ro.SHA384=ro.SHA512=ro.SHA224=ro.SHA256=void 0;var Nn=rR(),Li=oee(),es=ja(),A4e=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),up=new Uint32Array(64),sw=class extends Nn.HashMD{constructor(t=32){super(64,t,8,!1),this.A=Nn.SHA256_IV[0]|0,this.B=Nn.SHA256_IV[1]|0,this.C=Nn.SHA256_IV[2]|0,this.D=Nn.SHA256_IV[3]|0,this.E=Nn.SHA256_IV[4]|0,this.F=Nn.SHA256_IV[5]|0,this.G=Nn.SHA256_IV[6]|0,this.H=Nn.SHA256_IV[7]|0}get(){let{A:t,B:e,C:i,D:r,E:o,F:s,G:a,H:l}=this;return[t,e,i,r,o,s,a,l]}set(t,e,i,r,o,s,a,l){this.A=t|0,this.B=e|0,this.C=i|0,this.D=r|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=l|0}process(t,e){for(let u=0;u<16;u++,e+=4)up[u]=t.getUint32(e,!1);for(let u=16;u<64;u++){let h=up[u-15],f=up[u-2],p=(0,es.rotr)(h,7)^(0,es.rotr)(h,18)^h>>>3,y=(0,es.rotr)(f,17)^(0,es.rotr)(f,19)^f>>>10;up[u]=y+up[u-7]+p+up[u-16]|0}let{A:i,B:r,C:o,D:s,E:a,F:l,G:c,H:d}=this;for(let u=0;u<64;u++){let h=(0,es.rotr)(a,6)^(0,es.rotr)(a,11)^(0,es.rotr)(a,25),f=d+h+(0,Nn.Chi)(a,l,c)+A4e[u]+up[u]|0,y=((0,es.rotr)(i,2)^(0,es.rotr)(i,13)^(0,es.rotr)(i,22))+(0,Nn.Maj)(i,r,o)|0;d=c,c=l,l=a,a=s+f|0,s=o,o=r,r=i,i=f+y|0}i=i+this.A|0,r=r+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(i,r,o,s,a,l,c,d)}roundClean(){(0,es.clean)(up)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,es.clean)(this.buffer)}};ro.SHA256=sw;var g4=class extends sw{constructor(){super(28),this.A=Nn.SHA224_IV[0]|0,this.B=Nn.SHA224_IV[1]|0,this.C=Nn.SHA224_IV[2]|0,this.D=Nn.SHA224_IV[3]|0,this.E=Nn.SHA224_IV[4]|0,this.F=Nn.SHA224_IV[5]|0,this.G=Nn.SHA224_IV[6]|0,this.H=Nn.SHA224_IV[7]|0}};ro.SHA224=g4;var see=Li.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),D4e=see[0],I4e=see[1],hp=new Uint32Array(80),fp=new Uint32Array(80),Sm=class extends Nn.HashMD{constructor(t=64){super(128,t,16,!1),this.Ah=Nn.SHA512_IV[0]|0,this.Al=Nn.SHA512_IV[1]|0,this.Bh=Nn.SHA512_IV[2]|0,this.Bl=Nn.SHA512_IV[3]|0,this.Ch=Nn.SHA512_IV[4]|0,this.Cl=Nn.SHA512_IV[5]|0,this.Dh=Nn.SHA512_IV[6]|0,this.Dl=Nn.SHA512_IV[7]|0,this.Eh=Nn.SHA512_IV[8]|0,this.El=Nn.SHA512_IV[9]|0,this.Fh=Nn.SHA512_IV[10]|0,this.Fl=Nn.SHA512_IV[11]|0,this.Gh=Nn.SHA512_IV[12]|0,this.Gl=Nn.SHA512_IV[13]|0,this.Hh=Nn.SHA512_IV[14]|0,this.Hl=Nn.SHA512_IV[15]|0}get(){let{Ah:t,Al:e,Bh:i,Bl:r,Ch:o,Cl:s,Dh:a,Dl:l,Eh:c,El:d,Fh:u,Fl:h,Gh:f,Gl:p,Hh:y,Hl:v}=this;return[t,e,i,r,o,s,a,l,c,d,u,h,f,p,y,v]}set(t,e,i,r,o,s,a,l,c,d,u,h,f,p,y,v){this.Ah=t|0,this.Al=e|0,this.Bh=i|0,this.Bl=r|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=u|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=y|0,this.Hl=v|0}process(t,e){for(let x=0;x<16;x++,e+=4)hp[x]=t.getUint32(e),fp[x]=t.getUint32(e+=4);for(let x=16;x<80;x++){let k=hp[x-15]|0,L=fp[x-15]|0,D=Li.rotrSH(k,L,1)^Li.rotrSH(k,L,8)^Li.shrSH(k,L,7),V=Li.rotrSL(k,L,1)^Li.rotrSL(k,L,8)^Li.shrSL(k,L,7),O=hp[x-2]|0,R=fp[x-2]|0,G=Li.rotrSH(O,R,19)^Li.rotrBH(O,R,61)^Li.shrSH(O,R,6),Z=Li.rotrSL(O,R,19)^Li.rotrBL(O,R,61)^Li.shrSL(O,R,6),K=Li.add4L(V,Z,fp[x-7],fp[x-16]),C=Li.add4H(K,D,G,hp[x-7],hp[x-16]);hp[x]=C|0,fp[x]=K|0}let{Ah:i,Al:r,Bh:o,Bl:s,Ch:a,Cl:l,Dh:c,Dl:d,Eh:u,El:h,Fh:f,Fl:p,Gh:y,Gl:v,Hh:b,Hl:S}=this;for(let x=0;x<80;x++){let k=Li.rotrSH(u,h,14)^Li.rotrSH(u,h,18)^Li.rotrBH(u,h,41),L=Li.rotrSL(u,h,14)^Li.rotrSL(u,h,18)^Li.rotrBL(u,h,41),D=u&f^~u&y,V=h&p^~h&v,O=Li.add5L(S,L,V,I4e[x],fp[x]),R=Li.add5H(O,b,k,D,D4e[x],hp[x]),G=O|0,Z=Li.rotrSH(i,r,28)^Li.rotrBH(i,r,34)^Li.rotrBH(i,r,39),K=Li.rotrSL(i,r,28)^Li.rotrBL(i,r,34)^Li.rotrBL(i,r,39),C=i&o^i&a^o&a,A=r&s^r&l^s&l;b=y|0,S=v|0,y=f|0,v=p|0,f=u|0,p=h|0,{h:u,l:h}=Li.add(c|0,d|0,R|0,G|0),c=a|0,d=l|0,a=o|0,l=s|0,o=i|0,s=r|0;let I=Li.add3L(G,K,A);i=Li.add3H(I,R,Z,C),r=I|0}({h:i,l:r}=Li.add(this.Ah|0,this.Al|0,i|0,r|0)),{h:o,l:s}=Li.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l}=Li.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=Li.add(this.Dh|0,this.Dl|0,c|0,d|0),{h:u,l:h}=Li.add(this.Eh|0,this.El|0,u|0,h|0),{h:f,l:p}=Li.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:y,l:v}=Li.add(this.Gh|0,this.Gl|0,y|0,v|0),{h:b,l:S}=Li.add(this.Hh|0,this.Hl|0,b|0,S|0),this.set(i,r,o,s,a,l,c,d,u,h,f,p,y,v,b,S)}roundClean(){(0,es.clean)(hp,fp)}destroy(){(0,es.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};ro.SHA512=Sm;var y4=class extends Sm{constructor(){super(48),this.Ah=Nn.SHA384_IV[0]|0,this.Al=Nn.SHA384_IV[1]|0,this.Bh=Nn.SHA384_IV[2]|0,this.Bl=Nn.SHA384_IV[3]|0,this.Ch=Nn.SHA384_IV[4]|0,this.Cl=Nn.SHA384_IV[5]|0,this.Dh=Nn.SHA384_IV[6]|0,this.Dl=Nn.SHA384_IV[7]|0,this.Eh=Nn.SHA384_IV[8]|0,this.El=Nn.SHA384_IV[9]|0,this.Fh=Nn.SHA384_IV[10]|0,this.Fl=Nn.SHA384_IV[11]|0,this.Gh=Nn.SHA384_IV[12]|0,this.Gl=Nn.SHA384_IV[13]|0,this.Hh=Nn.SHA384_IV[14]|0,this.Hl=Nn.SHA384_IV[15]|0}};ro.SHA384=y4;var ca=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),da=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]),v4=class extends Sm{constructor(){super(28),this.Ah=ca[0]|0,this.Al=ca[1]|0,this.Bh=ca[2]|0,this.Bl=ca[3]|0,this.Ch=ca[4]|0,this.Cl=ca[5]|0,this.Dh=ca[6]|0,this.Dl=ca[7]|0,this.Eh=ca[8]|0,this.El=ca[9]|0,this.Fh=ca[10]|0,this.Fl=ca[11]|0,this.Gh=ca[12]|0,this.Gl=ca[13]|0,this.Hh=ca[14]|0,this.Hl=ca[15]|0}};ro.SHA512_224=v4;var _4=class extends Sm{constructor(){super(32),this.Ah=da[0]|0,this.Al=da[1]|0,this.Bh=da[2]|0,this.Bl=da[3]|0,this.Ch=da[4]|0,this.Cl=da[5]|0,this.Dh=da[6]|0,this.Dl=da[7]|0,this.Eh=da[8]|0,this.El=da[9]|0,this.Fh=da[10]|0,this.Fl=da[11]|0,this.Gh=da[12]|0,this.Gl=da[13]|0,this.Hh=da[14]|0,this.Hl=da[15]|0}};ro.SHA512_256=_4;ro.sha256=(0,es.createHasher)(()=>new sw);ro.sha224=(0,es.createHasher)(()=>new g4);ro.sha512=(0,es.createHasher)(()=>new Sm);ro.sha384=(0,es.createHasher)(()=>new y4);ro.sha512_256=(0,es.createHasher)(()=>new _4);ro.sha512_224=(0,es.createHasher)(()=>new v4)});var aee=me(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.sha224=_u.SHA224=_u.sha256=_u.SHA256=void 0;var b4=Cm();_u.SHA256=b4.SHA256;_u.sha256=b4.sha256;_u.SHA224=b4.SHA224;_u.sha224=b4.sha224});var lee=me(aR=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0});function F4e(n){return Array.isArray(n)?new Uint8Array(n):n}aR.default=F4e});var w4=me(aw=>{"use strict";var P4e=aw&&aw.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(aw,"__esModule",{value:!0});var cee=P4e(lee());function L4e(n){function t(e){return n((0,cee.default)(e))}return t.create=()=>{let e=n.create();return{update(i){return e.update((0,cee.default)(i)),this},digest(){return e.digest()}}},t}aw.default=L4e});var lR=me(k2=>{"use strict";var R4e=k2&&k2.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(k2,"__esModule",{value:!0});k2.sha256=void 0;var O4e=aee(),N4e=R4e(w4());k2.sha256=(0,N4e.default)(O4e.sha256)});var dee=me(M2=>{"use strict";Object.defineProperty(M2,"__esModule",{value:!0});M2.concatArgs=M2.arrayEqual=void 0;function B4e(n,t){return n.length!==t.length?!1:n.every((e,i)=>e===t[i])}M2.arrayEqual=B4e;function V4e(n){return typeof n=="number"}function U4e(...n){return n.flatMap(t=>V4e(t)?[t]:Array.from(t))}M2.concatArgs=U4e});var vee=me(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.isValidClassicAddress=oo.decodeAccountPublic=oo.encodeAccountPublic=oo.encodeNodePublic=oo.decodeNodePublic=oo.decodeAddress=oo.decodeAccountID=oo.encodeAddress=oo.encodeAccountID=oo.decodeSeed=oo.encodeSeed=oo.codec=void 0;var j4e=p4(),H4e=lR(),S4=dee(),cR=class{constructor(t){this._sha256=t.sha256,this._codec=j4e.base58xrp}encode(t,e){let i=e.versions;return this._encodeVersioned(t,i,e.expectedLength)}decode(t,e){var i;let r=e.versions,o=e.versionTypes,s=this.decodeChecked(t);if(r.length>1&&!e.expectedLength)throw new Error("expectedLength is required because there are >= 2 possible versions");let a=typeof r[0]=="number"?1:r[0].length,l=(i=e.expectedLength)!==null&&i!==void 0?i:s.length-a,c=s.slice(0,-l),d=s.slice(-l);for(let u=0;u<r.length;u++){let h=Array.isArray(r[u])?r[u]:[r[u]];if((0,S4.arrayEqual)(c,h))return{version:h,bytes:d,type:o?o[u]:null}}throw new Error("version_invalid: version bytes do not match any of the provided version(s)")}encodeChecked(t){let e=this._sha256(this._sha256(t)).slice(0,4);return this._encodeRaw(Uint8Array.from((0,S4.concatArgs)(t,e)))}decodeChecked(t){let e=this._decodeRaw(t);if(e.byteLength<5)throw new Error("invalid_input_size: decoded data must have length >= 5");if(!this._verifyCheckSum(e))throw new Error("checksum_invalid");return e.slice(0,-4)}_encodeVersioned(t,e,i){if(!yee(t,i))throw new Error("unexpected_payload_length: bytes.length does not match expectedLength. Ensure that the bytes are a Uint8Array.");return this.encodeChecked((0,S4.concatArgs)(e,t))}_encodeRaw(t){return this._codec.encode(Uint8Array.from(t))}_decodeRaw(t){return this._codec.decode(t)}_verifyCheckSum(t){let e=this._sha256(this._sha256(t.slice(0,-4))).slice(0,4),i=t.slice(-4);return(0,S4.arrayEqual)(e,i)}},uee=0,hee=35,fee=33,pee=28,mee=[1,225,75],W4e={sha256:H4e.sha256},Bh=new cR(W4e);oo.codec=Bh;function z4e(n,t){if(!yee(n,16))throw new Error("entropy must have length 16");let e={expectedLength:16,versions:t==="ed25519"?mee:[fee]};return Bh.encode(n,e)}oo.encodeSeed=z4e;function q4e(n,t={versionTypes:["ed25519","secp256k1"],versions:[mee,fee],expectedLength:16}){return Bh.decode(n,t)}oo.decodeSeed=q4e;function gee(n){let t={versions:[uee],expectedLength:20};return Bh.encode(n,t)}oo.encodeAccountID=gee;oo.encodeAddress=gee;function dR(n){let t={versions:[uee],expectedLength:20};return Bh.decode(n,t).bytes}oo.decodeAccountID=dR;oo.decodeAddress=dR;function $4e(n){let t={versions:[pee],expectedLength:33};return Bh.decode(n,t).bytes}oo.decodeNodePublic=$4e;function K4e(n){let t={versions:[pee],expectedLength:33};return Bh.encode(n,t)}oo.encodeNodePublic=K4e;function G4e(n){let t={versions:[hee],expectedLength:33};return Bh.encode(n,t)}oo.encodeAccountPublic=G4e;function X4e(n){let t={versions:[hee],expectedLength:33};return Bh.decode(n,t).bytes}oo.decodeAccountPublic=X4e;function Y4e(n){try{dR(n)}catch{return!1}return!0}oo.isValidClassicAddress=Y4e;function yee(n,t){return"byteLength"in n?n.byteLength===t:n.length===t}});var ml=me(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.isValidXAddress=_r.decodeXAddress=_r.xAddressToClassicAddress=_r.encodeXAddress=_r.classicAddressToXAddress=_r.isValidClassicAddress=_r.decodeAccountPublic=_r.encodeAccountPublic=_r.decodeNodePublic=_r.encodeNodePublic=_r.decodeAccountID=_r.encodeAccountID=_r.decodeSeed=_r.encodeSeed=_r.codec=void 0;var lw=qi(),pl=vee();Object.defineProperty(_r,"codec",{enumerable:!0,get:function(){return pl.codec}});Object.defineProperty(_r,"encodeSeed",{enumerable:!0,get:function(){return pl.encodeSeed}});Object.defineProperty(_r,"decodeSeed",{enumerable:!0,get:function(){return pl.decodeSeed}});Object.defineProperty(_r,"encodeAccountID",{enumerable:!0,get:function(){return pl.encodeAccountID}});Object.defineProperty(_r,"decodeAccountID",{enumerable:!0,get:function(){return pl.decodeAccountID}});Object.defineProperty(_r,"encodeNodePublic",{enumerable:!0,get:function(){return pl.encodeNodePublic}});Object.defineProperty(_r,"decodeNodePublic",{enumerable:!0,get:function(){return pl.decodeNodePublic}});Object.defineProperty(_r,"encodeAccountPublic",{enumerable:!0,get:function(){return pl.encodeAccountPublic}});Object.defineProperty(_r,"decodeAccountPublic",{enumerable:!0,get:function(){return pl.decodeAccountPublic}});Object.defineProperty(_r,"isValidClassicAddress",{enumerable:!0,get:function(){return pl.isValidClassicAddress}});var C4={main:Uint8Array.from([5,68]),test:Uint8Array.from([4,147])},Z4e=4294967295;function Q4e(n,t,e){let i=(0,pl.decodeAccountID)(n);return _ee(i,t,e)}_r.classicAddressToXAddress=Q4e;function _ee(n,t,e){if(n.length!==20)throw new Error("Account ID must be 20 bytes");if(t!==!1&&t>Z4e)throw new Error("Invalid tag");let i=t||0,r=t===!1||t==null?0:1,o=(0,lw.concat)([e?C4.test:C4.main,n,Uint8Array.from([r,i&255,i>>8&255,i>>16&255,i>>24&255,0,0,0,0])]);return pl.codec.encodeChecked(o)}_r.encodeXAddress=_ee;function J4e(n){let{accountId:t,tag:e,test:i}=uR(n);return{classicAddress:(0,pl.encodeAccountID)(t),tag:e,test:i}}_r.xAddressToClassicAddress=J4e;function uR(n){let t=pl.codec.decodeChecked(n),e=eMe(t),i=t.slice(2,22),r=tMe(t);return{accountId:i,tag:r,test:e}}_r.decodeXAddress=uR;function eMe(n){let t=n.slice(0,2);if((0,lw.equal)(C4.main,t))return!1;if((0,lw.equal)(C4.test,t))return!0;throw new Error("Invalid X-address: bad prefix")}function tMe(n){let t=n[22];if(t>=2)throw new Error("Unsupported X-address");if(t===1)return n[23]+n[24]*256+n[25]*65536+n[26]*16777216;if(t!==0)throw new Error("flag must be zero to indicate no tag");if(!(0,lw.equal)((0,lw.hexToBytes)("0000000000000000"),n.slice(23,31)))throw new Error("remaining bytes must be zero");return!1}function nMe(n){try{uR(n)}catch{return!1}return!0}_r.isValidXAddress=nMe});var bee=me((IEt,iMe)=>{iMe.exports={FIELDS:[["Generic",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:0,type:"Unknown"}],["Invalid",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:-1,type:"Unknown"}],["ObjectEndMarker",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"STObject"}],["ArrayEndMarker",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"STArray"}],["taker_gets_funded",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:258,type:"Amount"}],["taker_pays_funded",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:259,type:"Amount"}],["LedgerEntryType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt16"}],["TransactionType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt16"}],["SignerWeight",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt16"}],["TransferFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt16"}],["TradingFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt16"}],["DiscountedFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt16"}],["Version",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt16"}],["HookStateChangeCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt16"}],["HookEmitCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt16"}],["HookExecutionIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt16"}],["HookApiVersion",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt16"}],["LedgerFixType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt16"}],["ManagementFeeRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt16"}],["NetworkID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt32"}],["Flags",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt32"}],["SourceTag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt32"}],["Sequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt32"}],["PreviousTxnLgrSeq",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt32"}],["LedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt32"}],["CloseTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"UInt32"}],["ParentCloseTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"UInt32"}],["SigningTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"UInt32"}],["Expiration",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"UInt32"}],["TransferRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"UInt32"}],["WalletSize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"UInt32"}],["OwnerCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"UInt32"}],["DestinationTag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"UInt32"}],["LastUpdateTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:15,type:"UInt32"}],["HighQualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt32"}],["HighQualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt32"}],["LowQualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt32"}],["LowQualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt32"}],["QualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt32"}],["QualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt32"}],["StampEscrow",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt32"}],["BondAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"UInt32"}],["LoadFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"UInt32"}],["OfferSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"UInt32"}],["FirstLedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"UInt32"}],["LastLedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"UInt32"}],["TransactionIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"UInt32"}],["OperationLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"UInt32"}],["ReferenceFeeUnits",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"UInt32"}],["ReserveBase",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"UInt32"}],["ReserveIncrement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"UInt32"}],["SetFlag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"UInt32"}],["ClearFlag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:34,type:"UInt32"}],["SignerQuorum",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:35,type:"UInt32"}],["CancelAfter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:36,type:"UInt32"}],["FinishAfter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:37,type:"UInt32"}],["SignerListID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:38,type:"UInt32"}],["SettleDelay",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:39,type:"UInt32"}],["TicketCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:40,type:"UInt32"}],["TicketSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:41,type:"UInt32"}],["NFTokenTaxon",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:42,type:"UInt32"}],["MintedNFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:43,type:"UInt32"}],["BurnedNFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:44,type:"UInt32"}],["HookStateCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:45,type:"UInt32"}],["EmitGeneration",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:46,type:"UInt32"}],["VoteWeight",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:48,type:"UInt32"}],["FirstNFTokenSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:50,type:"UInt32"}],["OracleDocumentID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:51,type:"UInt32"}],["PermissionValue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:52,type:"UInt32"}],["MutableFlags",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:53,type:"UInt32"}],["StartDate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:54,type:"UInt32"}],["PaymentInterval",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:55,type:"UInt32"}],["GracePeriod",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:56,type:"UInt32"}],["PreviousPaymentDate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:57,type:"UInt32"}],["NextPaymentDueDate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:58,type:"UInt32"}],["PaymentRemaining",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:59,type:"UInt32"}],["PaymentTotal",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:60,type:"UInt32"}],["LoanSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:61,type:"UInt32"}],["CoverRateMinimum",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:62,type:"UInt32"}],["CoverRateLiquidation",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:63,type:"UInt32"}],["OverpaymentFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:64,type:"UInt32"}],["InterestRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:65,type:"UInt32"}],["LateInterestRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:66,type:"UInt32"}],["CloseInterestRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:67,type:"UInt32"}],["OverpaymentInterestRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:68,type:"UInt32"}],["IndexNext",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt64"}],["IndexPrevious",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt64"}],["BookNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt64"}],["OwnerNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt64"}],["BaseFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt64"}],["ExchangeRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt64"}],["LowNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"UInt64"}],["HighNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"UInt64"}],["DestinationNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"UInt64"}],["Cookie",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"UInt64"}],["ServerVersion",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"UInt64"}],["NFTokenOfferNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"UInt64"}],["EmitBurden",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"UInt64"}],["HookOn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt64"}],["HookInstructionCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt64"}],["HookReturnCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt64"}],["ReferenceCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt64"}],["XChainClaimID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt64"}],["XChainAccountCreateCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt64"}],["XChainAccountClaimCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt64"}],["AssetPrice",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"UInt64"}],["MaximumAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"UInt64"}],["OutstandingAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"UInt64"}],["MPTAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"UInt64"}],["IssuerNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"UInt64"}],["SubjectNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"UInt64"}],["LockedAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"UInt64"}],["VaultNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"UInt64"}],["LoanBrokerNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"UInt64"}],["EmailHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash128"}],["LedgerHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash256"}],["ParentHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash256"}],["TransactionHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Hash256"}],["AccountHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Hash256"}],["PreviousTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Hash256"}],["LedgerIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Hash256"}],["WalletLocator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Hash256"}],["RootIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Hash256"}],["AccountTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Hash256"}],["NFTokenID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Hash256"}],["EmitParentTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Hash256"}],["EmitNonce",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Hash256"}],["EmitHookHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Hash256"}],["AMMID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"Hash256"}],["BookDirectory",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Hash256"}],["InvoiceID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Hash256"}],["Nickname",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"Hash256"}],["Amendment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"Hash256"}],["Digest",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"Hash256"}],["Channel",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"Hash256"}],["ConsensusHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"Hash256"}],["CheckID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"Hash256"}],["ValidatedHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"Hash256"}],["PreviousPageMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"Hash256"}],["NextPageMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"Hash256"}],["NFTokenBuyOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"Hash256"}],["NFTokenSellOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"Hash256"}],["HookStateKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"Hash256"}],["HookHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"Hash256"}],["HookNamespace",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"Hash256"}],["HookSetTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"Hash256"}],["DomainID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:34,type:"Hash256"}],["VaultID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:35,type:"Hash256"}],["ParentBatchID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:36,type:"Hash256"}],["LoanBrokerID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:37,type:"Hash256"}],["LoanID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:38,type:"Hash256"}],["hash",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Hash256"}],["index",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:258,type:"Hash256"}],["Amount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Amount"}],["Balance",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Amount"}],["LimitAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Amount"}],["TakerPays",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Amount"}],["TakerGets",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Amount"}],["LowLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Amount"}],["HighLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Amount"}],["Fee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Amount"}],["SendMax",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Amount"}],["DeliverMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Amount"}],["Amount2",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Amount"}],["BidMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Amount"}],["BidMax",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Amount"}],["MinimumOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Amount"}],["RippleEscrow",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Amount"}],["DeliveredAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"Amount"}],["NFTokenBrokerFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"Amount"}],["BaseFeeDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"Amount"}],["ReserveBaseDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"Amount"}],["ReserveIncrementDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"Amount"}],["LPTokenOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"Amount"}],["LPTokenIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"Amount"}],["EPrice",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"Amount"}],["Price",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"Amount"}],["SignatureReward",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"Amount"}],["MinAccountCreateAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"Amount"}],["LPTokenBalance",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"Amount"}],["PublicKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"Blob"}],["MessageKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"Blob"}],["SigningPubKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"Blob"}],["TxnSignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:4,type:"Blob"}],["URI",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"Blob"}],["Signature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:6,type:"Blob"}],["Domain",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:7,type:"Blob"}],["FundCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:8,type:"Blob"}],["RemoveCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:9,type:"Blob"}],["ExpireCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:10,type:"Blob"}],["CreateCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:11,type:"Blob"}],["MemoType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:12,type:"Blob"}],["MemoData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:13,type:"Blob"}],["MemoFormat",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:14,type:"Blob"}],["Fulfillment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:16,type:"Blob"}],["Condition",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:17,type:"Blob"}],["MasterSignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:18,type:"Blob"}],["UNLModifyValidator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:19,type:"Blob"}],["ValidatorToDisable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:20,type:"Blob"}],["ValidatorToReEnable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:21,type:"Blob"}],["HookStateData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:22,type:"Blob"}],["HookReturnString",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:23,type:"Blob"}],["HookParameterName",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:24,type:"Blob"}],["HookParameterValue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:25,type:"Blob"}],["DIDDocument",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:26,type:"Blob"}],["Data",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:27,type:"Blob"}],["AssetClass",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:28,type:"Blob"}],["Provider",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:29,type:"Blob"}],["MPTokenMetadata",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:30,type:"Blob"}],["CredentialType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:31,type:"Blob"}],["Account",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"AccountID"}],["Owner",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"AccountID"}],["Destination",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"AccountID"}],["Issuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:4,type:"AccountID"}],["Authorize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"AccountID"}],["Unauthorize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:6,type:"AccountID"}],["RegularKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:8,type:"AccountID"}],["NFTokenMinter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:9,type:"AccountID"}],["EmitCallback",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:10,type:"AccountID"}],["Holder",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:11,type:"AccountID"}],["Delegate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:12,type:"AccountID"}],["HookAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:16,type:"AccountID"}],["OtherChainSource",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:18,type:"AccountID"}],["OtherChainDestination",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:19,type:"AccountID"}],["AttestationSignerAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:20,type:"AccountID"}],["AttestationRewardAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:21,type:"AccountID"}],["LockingChainDoor",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:22,type:"AccountID"}],["IssuingChainDoor",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:23,type:"AccountID"}],["Subject",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:24,type:"AccountID"}],["Borrower",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:25,type:"AccountID"}],["Counterparty",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:26,type:"AccountID"}],["Number",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Number"}],["AssetsAvailable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Number"}],["AssetsMaximum",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Number"}],["AssetsTotal",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Number"}],["LossUnrealized",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Number"}],["DebtTotal",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Number"}],["DebtMaximum",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Number"}],["CoverAvailable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Number"}],["LoanOriginationFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Number"}],["LoanServiceFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Number"}],["LatePaymentFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Number"}],["ClosePaymentFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Number"}],["PrincipalOutstanding",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Number"}],["PrincipalRequested",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"Number"}],["TotalValueOutstanding",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:15,type:"Number"}],["PeriodicPayment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Number"}],["ManagementFeeOutstanding",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Number"}],["LoanScale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Int32"}],["TransactionMetaData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"STObject"}],["CreatedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"STObject"}],["DeletedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"STObject"}],["ModifiedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"STObject"}],["PreviousFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"STObject"}],["FinalFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"STObject"}],["NewFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"STObject"}],["TemplateEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"STObject"}],["Memo",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"STObject"}],["SignerEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"STObject"}],["NFToken",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"STObject"}],["EmitDetails",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"STObject"}],["Hook",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"STObject"}],["Permission",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:15,type:"STObject"}],["Signer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"STObject"}],["Majority",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"STObject"}],["DisabledValidator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"STObject"}],["EmittedTxn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"STObject"}],["HookExecution",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"STObject"}],["HookDefinition",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"STObject"}],["HookParameter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"STObject"}],["HookGrant",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"STObject"}],["VoteEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"STObject"}],["AuctionSlot",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"STObject"}],["AuthAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"STObject"}],["XChainClaimProofSig",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"STObject"}],["XChainCreateAccountProofSig",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"STObject"}],["XChainClaimAttestationCollectionElement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"STObject"}],["XChainCreateAccountAttestationCollectionElement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"STObject"}],["PriceData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"STObject"}],["Credential",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"STObject"}],["RawTransaction",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:34,type:"STObject"}],["BatchSigner",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:35,type:"STObject"}],["Book",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:36,type:"STObject"}],["CounterpartySignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!1,nth:37,type:"STObject"}],["Signers",{isSerialized:!0,isSigningField:!1,isVLEncoded:!1,nth:3,type:"STArray"}],["SignerEntries",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"STArray"}],["Template",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"STArray"}],["Necessary",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"STArray"}],["Sufficient",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"STArray"}],["AffectedNodes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"STArray"}],["Memos",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"STArray"}],["NFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"STArray"}],["Hooks",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"STArray"}],["VoteSlots",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"STArray"}],["AdditionalBooks",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"STArray"}],["Majorities",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"STArray"}],["DisabledValidators",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"STArray"}],["HookExecutions",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"STArray"}],["HookParameters",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"STArray"}],["HookGrants",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"STArray"}],["XChainClaimAttestations",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"STArray"}],["XChainCreateAccountAttestations",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"STArray"}],["PriceDataSeries",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"STArray"}],["AuthAccounts",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"STArray"}],["AuthorizeCredentials",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"STArray"}],["UnauthorizeCredentials",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"STArray"}],["AcceptedCredentials",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"STArray"}],["Permissions",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"STArray"}],["RawTransactions",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"STArray"}],["BatchSigners",{isSerialized:!0,isSigningField:!1,isVLEncoded:!1,nth:31,type:"STArray"}],["CloseResolution",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt8"}],["Method",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt8"}],["TransactionResult",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt8"}],["Scale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt8"}],["AssetScale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt8"}],["TickSize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt8"}],["UNLModifyDisabling",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt8"}],["HookResult",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt8"}],["WasLockingChainSend",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt8"}],["WithdrawalPolicy",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt8"}],["TakerPaysCurrency",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash160"}],["TakerPaysIssuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash160"}],["TakerGetsCurrency",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Hash160"}],["TakerGetsIssuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Hash160"}],["Paths",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"PathSet"}],["Indexes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"Vector256"}],["Hashes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"Vector256"}],["Amendments",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"Vector256"}],["NFTokenOffers",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:4,type:"Vector256"}],["CredentialIDs",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"Vector256"}],["MPTokenIssuanceID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash192"}],["ShareMPTID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash192"}],["LockingChainIssue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Issue"}],["IssuingChainIssue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Issue"}],["Asset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Issue"}],["Asset2",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Issue"}],["XChainBridge",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"XChainBridge"}],["BaseAsset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Currency"}],["QuoteAsset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Currency"}],["Transaction",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Transaction"}],["LedgerEntry",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"LedgerEntry"}],["Validation",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Validation"}],["Metadata",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Metadata"}]],LEDGER_ENTRY_TYPES:{AMM:121,AccountRoot:97,Amendments:102,Bridge:105,Check:67,Credential:129,DID:73,Delegate:131,DepositPreauth:112,DirectoryNode:100,Escrow:117,FeeSettings:115,Invalid:-1,LedgerHashes:104,Loan:137,LoanBroker:136,MPToken:127,MPTokenIssuance:126,NFTokenOffer:55,NFTokenPage:80,NegativeUNL:78,Offer:111,Oracle:128,PayChannel:120,PermissionedDomain:130,RippleState:114,SignerList:83,Ticket:84,Vault:132,XChainOwnedClaimID:113,XChainOwnedCreateAccountClaimID:116},TRANSACTION_RESULTS:{tecAMM_ACCOUNT:168,tecAMM_BALANCE:163,tecAMM_EMPTY:166,tecAMM_FAILED:164,tecAMM_INVALID_TOKENS:165,tecAMM_NOT_EMPTY:167,tecARRAY_EMPTY:190,tecARRAY_TOO_LARGE:191,tecBAD_CREDENTIALS:193,tecCANT_ACCEPT_OWN_NFTOKEN_OFFER:158,tecCLAIM:100,tecCRYPTOCONDITION_ERROR:146,tecDIR_FULL:121,tecDST_TAG_NEEDED:143,tecDUPLICATE:149,tecEMPTY_DID:187,tecEXPIRED:148,tecFAILED_PROCESSING:105,tecFROZEN:137,tecHAS_OBLIGATIONS:151,tecHOOK_REJECTED:153,tecINCOMPLETE:169,tecINSUFFICIENT_FUNDS:159,tecINSUFFICIENT_PAYMENT:161,tecINSUFFICIENT_RESERVE:141,tecINSUFF_FEE:136,tecINSUF_RESERVE_LINE:122,tecINSUF_RESERVE_OFFER:123,tecINTERNAL:144,tecINVALID_UPDATE_TIME:188,tecINVARIANT_FAILED:147,tecKILLED:150,tecLIMIT_EXCEEDED:195,tecLOCKED:192,tecMAX_SEQUENCE_REACHED:154,tecNEED_MASTER_KEY:142,tecNFTOKEN_BUY_SELL_MISMATCH:156,tecNFTOKEN_OFFER_TYPE_MISMATCH:157,tecNO_ALTERNATIVE_KEY:130,tecNO_AUTH:134,tecNO_DELEGATE_PERMISSION:198,tecNO_DST:124,tecNO_DST_INSUF_XRP:125,tecNO_ENTRY:140,tecNO_ISSUER:133,tecNO_LINE:135,tecNO_LINE_INSUF_RESERVE:126,tecNO_LINE_REDUNDANT:127,tecNO_PERMISSION:139,tecNO_REGULAR_KEY:131,tecNO_SUITABLE_NFTOKEN_PAGE:155,tecNO_TARGET:138,tecOBJECT_NOT_FOUND:160,tecOVERSIZE:145,tecOWNERS:132,tecPATH_DRY:128,tecPATH_PARTIAL:101,tecPRECISION_LOSS:197,tecPSEUDO_ACCOUNT:196,tecTOKEN_PAIR_NOT_FOUND:189,tecTOO_SOON:152,tecUNFUNDED:129,tecUNFUNDED_ADD:102,tecUNFUNDED_AMM:162,tecUNFUNDED_OFFER:103,tecUNFUNDED_PAYMENT:104,tecWRONG_ASSET:194,tecXCHAIN_ACCOUNT_CREATE_PAST:181,tecXCHAIN_ACCOUNT_CREATE_TOO_MANY:182,tecXCHAIN_BAD_CLAIM_ID:172,tecXCHAIN_BAD_PUBLIC_KEY_ACCOUNT_PAIR:185,tecXCHAIN_BAD_TRANSFER_ISSUE:170,tecXCHAIN_CLAIM_NO_QUORUM:173,tecXCHAIN_CREATE_ACCOUNT_DISABLED:186,tecXCHAIN_CREATE_ACCOUNT_NONXRP_ISSUE:175,tecXCHAIN_INSUFF_CREATE_AMOUNT:180,tecXCHAIN_NO_CLAIM_ID:171,tecXCHAIN_NO_SIGNERS_LIST:178,tecXCHAIN_PAYMENT_FAILED:183,tecXCHAIN_PROOF_UNKNOWN_KEY:174,tecXCHAIN_REWARD_MISMATCH:177,tecXCHAIN_SELF_COMMIT:184,tecXCHAIN_SENDING_ACCOUNT_MISMATCH:179,tecXCHAIN_WRONG_CHAIN:176,tefALREADY:-198,tefBAD_ADD_AUTH:-197,tefBAD_AUTH:-196,tefBAD_AUTH_MASTER:-183,tefBAD_LEDGER:-195,tefBAD_QUORUM:-185,tefBAD_SIGNATURE:-186,tefCREATED:-194,tefEXCEPTION:-193,tefFAILURE:-199,tefINTERNAL:-192,tefINVALID_LEDGER_FIX_TYPE:-178,tefINVARIANT_FAILED:-182,tefMASTER_DISABLED:-188,tefMAX_LEDGER:-187,tefNFTOKEN_IS_NOT_TRANSFERABLE:-179,tefNOT_MULTI_SIGNING:-184,tefNO_AUTH_REQUIRED:-191,tefNO_TICKET:-180,tefPAST_SEQ:-190,tefTOO_BIG:-181,tefWRONG_PRIOR:-189,telBAD_DOMAIN:-398,telBAD_PATH_COUNT:-397,telBAD_PUBLIC_KEY:-396,telCAN_NOT_QUEUE:-392,telCAN_NOT_QUEUE_BALANCE:-391,telCAN_NOT_QUEUE_BLOCKED:-389,telCAN_NOT_QUEUE_BLOCKS:-390,telCAN_NOT_QUEUE_FEE:-388,telCAN_NOT_QUEUE_FULL:-387,telENV_RPC_FAILED:-383,telFAILED_PROCESSING:-395,telINSUF_FEE_P:-394,telLOCAL_ERROR:-399,telNETWORK_ID_MAKES_TX_NON_CANONICAL:-384,telNO_DST_PARTIAL:-393,telREQUIRES_NETWORK_ID:-385,telWRONG_NETWORK:-386,temARRAY_EMPTY:-253,temARRAY_TOO_LARGE:-252,temBAD_AMM_TOKENS:-261,temBAD_AMOUNT:-298,temBAD_CURRENCY:-297,temBAD_EXPIRATION:-296,temBAD_FEE:-295,temBAD_ISSUER:-294,temBAD_LIMIT:-293,temBAD_NFTOKEN_TRANSFER_FEE:-262,temBAD_OFFER:-292,temBAD_PATH:-291,temBAD_PATH_LOOP:-290,temBAD_QUORUM:-271,temBAD_REGKEY:-289,temBAD_SEND_XRP_LIMIT:-288,temBAD_SEND_XRP_MAX:-287,temBAD_SEND_XRP_NO_DIRECT:-286,temBAD_SEND_XRP_PARTIAL:-285,temBAD_SEND_XRP_PATHS:-284,temBAD_SEQUENCE:-283,temBAD_SIGNATURE:-282,temBAD_SIGNER:-272,temBAD_SRC_ACCOUNT:-281,temBAD_TICK_SIZE:-269,temBAD_TRANSFER_FEE:-251,temBAD_TRANSFER_RATE:-280,temBAD_WEIGHT:-270,temCANNOT_PREAUTH_SELF:-267,temDISABLED:-273,temDST_IS_SRC:-279,temDST_NEEDED:-278,temEMPTY_DID:-254,temINVALID:-277,temINVALID_ACCOUNT_ID:-268,temINVALID_COUNT:-266,temINVALID_FLAG:-276,temINVALID_INNER_BATCH:-250,temMALFORMED:-299,temREDUNDANT:-275,temRIPPLE_EMPTY:-274,temSEQ_AND_TICKET:-263,temUNCERTAIN:-265,temUNKNOWN:-264,temXCHAIN_BAD_PROOF:-259,temXCHAIN_BRIDGE_BAD_ISSUES:-258,temXCHAIN_BRIDGE_BAD_MIN_ACCOUNT_CREATE_AMOUNT:-256,temXCHAIN_BRIDGE_BAD_REWARD_AMOUNT:-255,temXCHAIN_BRIDGE_NONDOOR_OWNER:-257,temXCHAIN_EQUAL_DOOR_ACCOUNTS:-260,terADDRESS_COLLISION:-86,terFUNDS_SPENT:-98,terINSUF_FEE_B:-97,terLAST:-91,terNO_ACCOUNT:-96,terNO_AMM:-87,terNO_AUTH:-95,terNO_DELEGATE_PERMISSION:-85,terNO_LINE:-94,terNO_RIPPLE:-90,terOWNERS:-93,terPRE_SEQ:-92,terPRE_TICKET:-88,terQUEUED:-89,terRETRY:-99,tesSUCCESS:0},TRANSACTION_TYPES:{AMMBid:39,AMMClawback:31,AMMCreate:35,AMMDelete:40,AMMDeposit:36,AMMVote:38,AMMWithdraw:37,AccountDelete:21,AccountSet:3,Batch:71,CheckCancel:18,CheckCash:17,CheckCreate:16,Clawback:30,CredentialAccept:59,CredentialCreate:58,CredentialDelete:60,DIDDelete:50,DIDSet:49,DelegateSet:64,DepositPreauth:19,EnableAmendment:100,EscrowCancel:4,EscrowCreate:1,EscrowFinish:2,Invalid:-1,LedgerStateFix:53,LoanBrokerCoverClawback:78,LoanBrokerCoverDeposit:76,LoanBrokerCoverWithdraw:77,LoanBrokerDelete:75,LoanBrokerSet:74,LoanDelete:81,LoanManage:82,LoanPay:84,LoanSet:80,MPTokenAuthorize:57,MPTokenIssuanceCreate:54,MPTokenIssuanceDestroy:55,MPTokenIssuanceSet:56,NFTokenAcceptOffer:29,NFTokenBurn:26,NFTokenCancelOffer:28,NFTokenCreateOffer:27,NFTokenMint:25,NFTokenModify:61,OfferCancel:8,OfferCreate:7,OracleDelete:52,OracleSet:51,Payment:0,PaymentChannelClaim:15,PaymentChannelCreate:13,PaymentChannelFund:14,PermissionedDomainDelete:63,PermissionedDomainSet:62,SetFee:101,SetRegularKey:5,SignerListSet:12,TicketCreate:10,TrustSet:20,UNLModify:102,VaultClawback:70,VaultCreate:65,VaultDelete:67,VaultDeposit:68,VaultSet:66,VaultWithdraw:69,XChainAccountCreateCommit:44,XChainAddAccountCreateAttestation:46,XChainAddClaimAttestation:45,XChainClaim:43,XChainCommit:42,XChainCreateBridge:48,XChainCreateClaimID:41,XChainModifyBridge:47},TYPES:{AccountID:8,Amount:6,Blob:7,Currency:26,Done:-1,Hash128:4,Hash160:17,Hash192:21,Hash256:5,Int32:10,Int64:11,Issue:24,LedgerEntry:10002,Metadata:10004,NotPresent:0,Number:9,PathSet:18,STArray:15,STObject:14,Transaction:10001,UInt16:1,UInt32:2,UInt384:22,UInt512:23,UInt64:3,UInt8:16,UInt96:20,Unknown:-2,Validation:10003,Vector256:19,XChainBridge:25}}});var fR=me(T2=>{"use strict";Object.defineProperty(T2,"__esModule",{value:!0});T2.BytesLookup=T2.Bytes=void 0;var cw=class{constructor(t,e,i){this.name=t,this.ordinal=e,this.ordinalWidth=i,this.bytes=new Uint8Array(i);for(let r=0;r<i;r++)this.bytes[i-r-1]=e>>>r*8&255}toJSON(){return this.name}toBytesSink(t){t.put(this.bytes)}toBytes(){return this.bytes}};T2.Bytes=cw;var hR=class{constructor(t,e){this.ordinalWidth=e,Object.entries(t).forEach(([i,r])=>{this.add(i,r)})}add(t,e){if(this[t])throw new SyntaxError(`Attempted to add a value with a duplicate name "${t}". This is not allowed because it is unclear how to decode.`);if(this[e.toString()])throw new SyntaxError(`Attempted to add a duplicate value under a different name (Given name: "${t}" and previous name: "${this[e.toString()]}. This is not allowed because it is unclear how to decode.
Given value: ${e.toString()}`);this[t]=new cw(t,e,this.ordinalWidth),this[e.toString()]=this[t]}from(t){return t instanceof cw?t:this[t]}fromParser(t){return this.from(t.readUIntN(this.ordinalWidth).toString())}};T2.BytesLookup=hR});var A2=me(E2=>{"use strict";Object.defineProperty(E2,"__esModule",{value:!0});E2.BinarySerializer=E2.BytesList=void 0;var pR=qi(),dw=class{constructor(){this.bytesArray=[]}getLength(){return(0,pR.concat)(this.bytesArray).byteLength}put(t){let e=Uint8Array.from(t);return this.bytesArray.push(e),this}toBytesSink(t){t.put(this.toBytes())}toBytes(){return(0,pR.concat)(this.bytesArray)}toHex(){return(0,pR.bytesToHex)(this.toBytes())}};E2.BytesList=dw;var mR=class{constructor(t){this.sink=new dw,this.sink=t}write(t){t.toBytesSink(this.sink)}put(t){this.sink.put(t)}writeType(t,e){this.write(t.from(e))}writeBytesList(t){t.toBytesSink(this.sink)}encodeVariableLength(t){let e=new Uint8Array(3);if(t<=192)return e[0]=t,e.slice(0,1);if(t<=12480)return t-=193,e[0]=193+(t>>>8),e[1]=t&255,e.slice(0,2);if(t<=918744)return t-=12481,e[0]=241+(t>>>16),e[1]=t>>8&255,e[2]=t&255,e.slice(0,3);throw new Error("Overflow error")}writeFieldAndValue(t,e,i=!1){let r=t.associatedType.from(e);if(r.toBytesSink===void 0||t.name===void 0)throw new Error;this.sink.put(t.header),t.isVariableLengthEncoded?this.writeLengthEncoded(r,i):r.toBytesSink(this.sink)}writeLengthEncoded(t,e=!1){let i=new dw;e||t.toBytesSink(i),this.put(this.encodeVariableLength(i.getLength())),this.writeBytesList(i)}};E2.BinarySerializer=mR});var Wl=me(D2=>{"use strict";Object.defineProperty(D2,"__esModule",{value:!0});D2.Comparable=D2.SerializedType=void 0;var rMe=A2(),oMe=qi(),x4=class{constructor(t){this.bytes=new Uint8Array(0),this.bytes=t??new Uint8Array(0)}static fromParser(t,e){throw new Error("fromParser not implemented")}static from(t){throw new Error("from not implemented")}toBytesSink(t){t.put(this.bytes)}toHex(){return(0,oMe.bytesToHex)(this.toBytes())}toBytes(){if(this.bytes)return this.bytes;let t=new rMe.BytesList;return this.toBytesSink(t),t.toBytes()}toJSON(t,e){return this.toHex()}toString(){return this.toHex()}};D2.SerializedType=x4;var gR=class extends x4{lt(t){return this.compareTo(t)<0}eq(t){return this.compareTo(t)===0}gt(t){return this.compareTo(t)>0}gte(t){return this.compareTo(t)>-1}lte(t){return this.compareTo(t)<1}compareTo(t){throw new Error(`cannot compare ${this.toString()} and ${t.toString()}`)}};D2.Comparable=gR});var yR=me(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.DELEGATABLE_PERMISSIONS_WIDTH=wc.TRANSACTION_RESULT_WIDTH=wc.TRANSACTION_TYPE_WIDTH=wc.LEDGER_ENTRY_WIDTH=wc.TYPE_WIDTH=void 0;wc.TYPE_WIDTH=2;wc.LEDGER_ENTRY_WIDTH=2;wc.TRANSACTION_TYPE_WIDTH=2;wc.TRANSACTION_RESULT_WIDTH=1;wc.DELEGATABLE_PERMISSIONS_WIDTH=4});var wee=me(k4=>{"use strict";Object.defineProperty(k4,"__esModule",{value:!0});k4.FieldLookup=void 0;var sMe=fR(),aMe=Wl(),lMe=yR();function cMe(n,t){let e=[];return n<16?t<16?e.push(n<<4|t):e.push(n<<4,t):t<16?e.push(t,n):e.push(0,n,t),Uint8Array.from(e)}function dMe([n,t],e){let i=cMe(e,t.nth);return{name:n,nth:t.nth,isVariableLengthEncoded:t.isVLEncoded,isSerialized:t.isSerialized,isSigningField:t.isSigningField,ordinal:e<<16|t.nth,type:new sMe.Bytes(t.type,e,lMe.TYPE_WIDTH),header:i,associatedType:aMe.SerializedType}}var vR=class{constructor(t,e){t.forEach(([i,r])=>{let o=e[r.type];this[i]=dMe([i,r],o),this[this[i].ordinal.toString()]=this[i]})}fromString(t){return this[t]}};k4.FieldLookup=vR});var bR=me(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.BytesLookup=bu.Bytes=bu.FieldLookup=bu.XrplDefinitionsBase=void 0;var xm=fR();Object.defineProperty(bu,"Bytes",{enumerable:!0,get:function(){return xm.Bytes}});Object.defineProperty(bu,"BytesLookup",{enumerable:!0,get:function(){return xm.BytesLookup}});var See=wee();Object.defineProperty(bu,"FieldLookup",{enumerable:!0,get:function(){return See.FieldLookup}});var uw=yR(),_R=class{constructor(t,e){this.type=new xm.BytesLookup(t.TYPES,uw.TYPE_WIDTH),this.ledgerEntryType=new xm.BytesLookup(t.LEDGER_ENTRY_TYPES,uw.LEDGER_ENTRY_WIDTH),this.transactionType=new xm.BytesLookup(t.TRANSACTION_TYPES,uw.TRANSACTION_TYPE_WIDTH),this.transactionResult=new xm.BytesLookup(t.TRANSACTION_RESULTS,uw.TRANSACTION_RESULT_WIDTH),this.field=new See.FieldLookup(t.FIELDS,t.TYPES),this.transactionNames=Object.entries(t.TRANSACTION_TYPES).filter(([o,s])=>s>=0).map(([o,s])=>o),this.dataTypes={},this.associateTypes(e),this.granularPermissions={TrustlineAuthorize:65537,TrustlineFreeze:65538,TrustlineUnfreeze:65539,AccountDomainSet:65540,AccountEmailHashSet:65541,AccountMessageKeySet:65542,AccountTransferRateSet:65543,AccountTickSizeSet:65544,PaymentMint:65545,PaymentBurn:65546,MPTokenIssuanceLock:65547,MPTokenIssuanceUnlock:65548};let i=Object.fromEntries(Object.entries(t.TRANSACTION_TYPES).map(([o,s])=>[o,s+1])),r=Object.assign(Object.assign({},this.granularPermissions),i);this.delegatablePermissions=new xm.BytesLookup(r,uw.DELEGATABLE_PERMISSIONS_WIDTH)}associateTypes(t){this.dataTypes=Object.assign({},this.dataTypes,t),Object.values(this.field).forEach(e=>{e.associatedType=this.dataTypes[e.type.name]}),this.field.TransactionType.associatedType=this.transactionType,this.field.TransactionResult.associatedType=this.transactionResult,this.field.LedgerEntryType.associatedType=this.ledgerEntryType,this.field.PermissionValue&&(this.field.PermissionValue.associatedType=this.delegatablePermissions)}getAssociatedTypes(){return this.dataTypes}};bu.XrplDefinitionsBase=_R});var Vh=me(Oo=>{"use strict";var uMe=Oo&&Oo.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.TRANSACTION_TYPES=Oo.TransactionType=Oo.TransactionResult=Oo.LedgerEntryType=Oo.Type=Oo.Field=Oo.DEFAULT_DEFINITIONS=Oo.XrplDefinitionsBase=Oo.Bytes=void 0;var hMe=uMe(bee()),wR=bR();Object.defineProperty(Oo,"XrplDefinitionsBase",{enumerable:!0,get:function(){return wR.XrplDefinitionsBase}});Object.defineProperty(Oo,"Bytes",{enumerable:!0,get:function(){return wR.Bytes}});var km=new wR.XrplDefinitionsBase(hMe.default,{});Oo.DEFAULT_DEFINITIONS=km;var fMe=km.type;Oo.Type=fMe;var pMe=km.ledgerEntryType;Oo.LedgerEntryType=pMe;var mMe=km.transactionType;Oo.TransactionType=mMe;var gMe=km.transactionResult;Oo.TransactionResult=gMe;var yMe=km.field;Oo.Field=yMe;var vMe=km.transactionNames;Oo.TRANSACTION_TYPES=vMe});var wu=me(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.compare=vo.equal=vo.readInt64BE=vo.readInt32BE=vo.readUInt32BE=vo.readUInt16BE=vo.writeInt64BE=vo.writeInt32BE=vo.writeUInt32BE=vo.writeUInt16BE=vo.writeUInt8=void 0;function _Me(n,t,e){t=Number(t),n[e]=t}vo.writeUInt8=_Me;function bMe(n,t,e){t=Number(t),n[e]=t>>>8,n[e+1]=t}vo.writeUInt16BE=bMe;function wMe(n,t,e){n[e]=t>>>24&255,n[e+1]=t>>>16&255,n[e+2]=t>>>8&255,n[e+3]=t&255}vo.writeUInt32BE=wMe;function SMe(n,t,e){new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(e,t,!1)}vo.writeInt32BE=SMe;function CMe(n,t,e){new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(e,t,!1)}vo.writeInt64BE=CMe;function xMe(n,t){return new DataView(n.buffer).getUint16(t,!1).toString(10)}vo.readUInt16BE=xMe;function kMe(n,t){return new DataView(n.buffer).getUint32(t,!1).toString(10)}vo.readUInt32BE=kMe;function MMe(n,t){return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(t,!1)}vo.readInt32BE=MMe;function TMe(n,t){return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(t,!1)}vo.readInt64BE=TMe;function EMe(n,t){let e=n instanceof ArrayBuffer?new Uint8Array(n,0):n,i=t instanceof ArrayBuffer?new Uint8Array(t,0):t;return e.byteLength!=i.byteLength?!1:xee(e)&&xee(i)?IMe(e,i)===0:Cee(e)&&Cee(i)?DMe(e,i)===0:AMe(e,i)===0}vo.equal=EMe;function AMe(n,t){let e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength),i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return M4(e,i)}function DMe(n,t){let e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);return M4(e,i)}function IMe(n,t){let e=new Uint32Array(n.buffer,n.byteOffset,n.byteLength/4),i=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4);return M4(e,i)}function M4(n,t){if(n.byteLength!==t.byteLength)throw new Error("Cannot compare arrays of different length");for(let e=0;e<n.length-1;e+=1){if(n[e]>t[e])return 1;if(n[e]<t[e])return-1}return 0}vo.compare=M4;function Cee(n){return n.byteOffset%2===0&&n.byteLength%2===0}function xee(n){return n.byteOffset%4===0&&n.byteLength%4===0}});var hw=me(T4=>{"use strict";Object.defineProperty(T4,"__esModule",{value:!0});T4.Hash=void 0;var FMe=Wl(),kee=qi(),PMe=wu(),SR=class extends FMe.Comparable{constructor(t){if(super(t),this.bytes.length!==this.constructor.width)throw new Error(`Invalid Hash length ${this.bytes.byteLength}`)}static from(t){if(t instanceof this)return t;if(typeof t=="string"){if(!kee.HEX_REGEX.test(t))throw new Error(`Invalid hash string ${t}`);return new this((0,kee.hexToBytes)(t))}throw new Error("Cannot construct Hash from given value")}static fromParser(t,e){return new this(t.read(e??this.width))}compareTo(t){return(0,PMe.compare)(this.bytes,this.constructor.from(t).bytes)}toString(){return this.toHex()}nibblet(t){let e=t>0?t/2|0:0,i=this.bytes[e];return t%2===0?i=(i&240)>>>4:i=i&15,i}};T4.Hash=SR});var A4=me(E4=>{"use strict";Object.defineProperty(E4,"__esModule",{value:!0});E4.Hash160=void 0;var LMe=hw(),Mm=class n extends LMe.Hash{constructor(t){t&&t.byteLength===0&&(t=n.ZERO_160.bytes),super(t??n.ZERO_160.bytes)}};E4.Hash160=Mm;Mm.width=20;Mm.ZERO_160=new Mm(new Uint8Array(Mm.width))});var I2=me(I4=>{"use strict";Object.defineProperty(I4,"__esModule",{value:!0});I4.AccountID=void 0;var D4=ml(),RMe=A4(),OMe=qi(),NMe=/^[A-F0-9]{40}$/,fw=class n extends RMe.Hash160{constructor(t){super(t??n.defaultAccountID.bytes)}static from(t){if(t instanceof n)return t;if(typeof t=="string")return t===""?new n:NMe.test(t)?new n((0,OMe.hexToBytes)(t)):this.fromBase58(t);throw new Error("Cannot construct AccountID from value given")}static fromBase58(t){if((0,D4.isValidXAddress)(t)){let e=(0,D4.xAddressToClassicAddress)(t);if(e.tag!==!1)throw new Error("Only allowed to have tag on Account or Destination");t=e.classicAddress}return new n(Uint8Array.from((0,D4.decodeAccountID)(t)))}toJSON(){return this.toBase58()}toBase58(){return(0,D4.encodeAccountID)(this.bytes)}};I4.AccountID=fw;fw.defaultAccountID=new fw(new Uint8Array(20))});var Uh=me(F4=>{"use strict";Object.defineProperty(F4,"__esModule",{value:!0});F4.BinaryParser=void 0;var BMe=Vh(),VMe=qi(),CR=class{constructor(t,e=BMe.DEFAULT_DEFINITIONS){this.bytes=(0,VMe.hexToBytes)(t),this.definitions=e}peek(){if(this.bytes.byteLength===0)throw new Error;return this.bytes[0]}skip(t){if(t>this.bytes.byteLength)throw new Error;this.bytes=this.bytes.slice(t)}read(t){if(t>this.bytes.byteLength)throw new Error;let e=this.bytes.slice(0,t);return this.skip(t),e}readUIntN(t){if(0>=t||t>4)throw new Error("invalid n");return this.read(t).reduce((e,i)=>e<<8|i)>>>0}readUInt8(){return this.readUIntN(1)}readUInt16(){return this.readUIntN(2)}readUInt32(){return this.readUIntN(4)}size(){return this.bytes.byteLength}end(t){let e=this.bytes.byteLength;return e===0||t!==void 0&&e<=t}readVariableLength(){return this.read(this.readVariableLengthLength())}readVariableLengthLength(){let t=this.readUInt8();if(t<=192)return t;if(t<=240){let e=this.readUInt8();return 193+(t-193)*256+e}else if(t<=254){let e=this.readUInt8(),i=this.readUInt8();return 12481+(t-241)*65536+e*256+i}throw new Error("Invalid variable length indicator")}readFieldOrdinal(){let t=this.readUInt8(),e=t&15;if(t>>=4,t===0&&(t=this.readUInt8(),t===0||t<16))throw new Error(`Cannot read FieldOrdinal, type_code ${t} out of range`);if(e===0&&(e=this.readUInt8(),e===0||e<16))throw new Error(`Cannot read FieldOrdinal, field_code ${e} out of range`);return t<<16|e}readField(){return this.definitions.field.fromString(this.readFieldOrdinal().toString())}readType(t){return t.fromParser(this)}typeForField(t){return t.associatedType}readFieldValue(t){let e=this.typeForField(t);if(!e)throw new Error(`unsupported: (${t.name}, ${t.type.name})`);let i=t.isVariableLengthEncoded?this.readVariableLengthLength():void 0,r=e.fromParser(this,i);if(r===void 0)throw new Error(`fromParser for (${t.name}, ${t.type.name}) -> undefined `);return r}readFieldAndValue(){let t=this.readField();return[t,this.readFieldValue(t)]}};F4.BinaryParser=CR});var gw=me(P4=>{"use strict";Object.defineProperty(P4,"__esModule",{value:!0});P4.Currency=void 0;var UMe=A4(),pw=qi(),jMe=/^0{40}$/,HMe=/^[A-Z0-9a-z?!@#$%^&*(){}[\]|]{3}$/,WMe=/^[A-F0-9]{40}$/,zMe=/^0{24}[\x00-\x7F]{6}0{10}$/;function qMe(n){let t=new Uint8Array(20);if(n!=="XRP"){let e=n.split("").map(i=>i.charCodeAt(0));t.set(e,12)}return t}function $Me(n){return HMe.test(n)}function KMe(n){let t=(0,pw.hexToString)((0,pw.bytesToHex)(n));return t==="XRP"?null:$Me(t)?t:null}function GMe(n){return WMe.test(n)}function XMe(n){return n.length===3||GMe(n)}function YMe(n){return n.byteLength===20}function ZMe(n){return n instanceof Uint8Array?YMe(n):XMe(n)}function QMe(n){if(!ZMe(n))throw new Error(`Unsupported Currency representation: ${n}`);return n.length===3?qMe(n):(0,pw.hexToBytes)(n)}var mw=class n extends UMe.Hash160{constructor(t){super(t??n.XRP.bytes);let e=(0,pw.bytesToHex)(this.bytes);jMe.test(e)?this._iso="XRP":zMe.test(e)?this._iso=KMe(this.bytes.slice(12,15)):this._iso=null}iso(){return this._iso}static from(t){if(t instanceof n)return t;if(typeof t=="string")return new n(QMe(t));throw new Error("Cannot construct Currency from value given")}toJSON(){let t=this.iso();return t!==null?t:(0,pw.bytesToHex)(this.bytes)}};P4.Currency=mw;mw.XRP=new mw(new Uint8Array(20))});var Us=me((Mee,L4)=>{"use strict";(function(n){"use strict";var t,e=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,r=Math.floor,o="[BigNumber Error] ",s=o+"Number primitive has more than 15 significant digits: ",a=1e14,l=14,c=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],u=1e7,h=1e9;function f(L){var D,V,O,R=ue.prototype={constructor:ue,toString:null,valueOf:null},G=new ue(1),Z=20,K=4,C=-7,A=21,I=-1e7,T=1e7,M=!1,F=1,q=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},te="0123456789abcdefghijklmnopqrstuvwxyz",se=!0;function ue(re,ae){var fe,De,be,Ae,Ce,we,ve,xe,Te=this;if(!(Te instanceof ue))return new ue(re,ae);if(ae==null){if(re&&re._isBigNumber===!0){Te.s=re.s,!re.c||re.e>T?Te.c=Te.e=null:re.e<I?Te.c=[Te.e=0]:(Te.e=re.e,Te.c=re.c.slice());return}if((we=typeof re=="number")&&re*0==0){if(Te.s=1/re<0?(re=-re,-1):1,re===~~re){for(Ae=0,Ce=re;Ce>=10;Ce/=10,Ae++);Ae>T?Te.c=Te.e=null:(Te.e=Ae,Te.c=[re]);return}xe=String(re)}else{if(!e.test(xe=String(re)))return O(Te,xe,we);Te.s=xe.charCodeAt(0)==45?(xe=xe.slice(1),-1):1}(Ae=xe.indexOf("."))>-1&&(xe=xe.replace(".","")),(Ce=xe.search(/e/i))>0?(Ae<0&&(Ae=Ce),Ae+=+xe.slice(Ce+1),xe=xe.substring(0,Ce)):Ae<0&&(Ae=xe.length)}else{if(b(ae,2,te.length,"Base"),ae==10&&se)return Te=new ue(re),ce(Te,Z+Te.e+1,K);if(xe=String(re),we=typeof re=="number"){if(re*0!=0)return O(Te,xe,we,ae);if(Te.s=1/re<0?(xe=xe.slice(1),-1):1,ue.DEBUG&&xe.replace(/^0\.0*|\./,"").length>15)throw Error(s+re)}else Te.s=xe.charCodeAt(0)===45?(xe=xe.slice(1),-1):1;for(fe=te.slice(0,ae),Ae=Ce=0,ve=xe.length;Ce<ve;Ce++)if(fe.indexOf(De=xe.charAt(Ce))<0){if(De=="."){if(Ce>Ae){Ae=ve;continue}}else if(!be&&(xe==xe.toUpperCase()&&(xe=xe.toLowerCase())||xe==xe.toLowerCase()&&(xe=xe.toUpperCase()))){be=!0,Ce=-1,Ae=0;continue}return O(Te,String(re),we,ae)}we=!1,xe=V(xe,ae,10,Te.s),(Ae=xe.indexOf("."))>-1?xe=xe.replace(".",""):Ae=xe.length}for(Ce=0;xe.charCodeAt(Ce)===48;Ce++);for(ve=xe.length;xe.charCodeAt(--ve)===48;);if(xe=xe.slice(Ce,++ve)){if(ve-=Ce,we&&ue.DEBUG&&ve>15&&(re>c||re!==r(re)))throw Error(s+Te.s*re);if((Ae=Ae-Ce-1)>T)Te.c=Te.e=null;else if(Ae<I)Te.c=[Te.e=0];else{if(Te.e=Ae,Te.c=[],Ce=(Ae+1)%l,Ae<0&&(Ce+=l),Ce<ve){for(Ce&&Te.c.push(+xe.slice(0,Ce)),ve-=l;Ce<ve;)Te.c.push(+xe.slice(Ce,Ce+=l));Ce=l-(xe=xe.slice(Ce)).length}else Ce-=ve;for(;Ce--;xe+="0");Te.c.push(+xe)}}else Te.c=[Te.e=0]}ue.clone=f,ue.ROUND_UP=0,ue.ROUND_DOWN=1,ue.ROUND_CEIL=2,ue.ROUND_FLOOR=3,ue.ROUND_HALF_UP=4,ue.ROUND_HALF_DOWN=5,ue.ROUND_HALF_EVEN=6,ue.ROUND_HALF_CEIL=7,ue.ROUND_HALF_FLOOR=8,ue.EUCLID=9,ue.config=ue.set=function(re){var ae,fe;if(re!=null)if(typeof re=="object"){if(re.hasOwnProperty(ae="DECIMAL_PLACES")&&(fe=re[ae],b(fe,0,h,ae),Z=fe),re.hasOwnProperty(ae="ROUNDING_MODE")&&(fe=re[ae],b(fe,0,8,ae),K=fe),re.hasOwnProperty(ae="EXPONENTIAL_AT")&&(fe=re[ae],fe&&fe.pop?(b(fe[0],-h,0,ae),b(fe[1],0,h,ae),C=fe[0],A=fe[1]):(b(fe,-h,h,ae),C=-(A=fe<0?-fe:fe))),re.hasOwnProperty(ae="RANGE"))if(fe=re[ae],fe&&fe.pop)b(fe[0],-h,-1,ae),b(fe[1],1,h,ae),I=fe[0],T=fe[1];else if(b(fe,-h,h,ae),fe)I=-(T=fe<0?-fe:fe);else throw Error(o+ae+" cannot be zero: "+fe);if(re.hasOwnProperty(ae="CRYPTO"))if(fe=re[ae],fe===!!fe)if(fe)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))M=fe;else throw M=!fe,Error(o+"crypto unavailable");else M=fe;else throw Error(o+ae+" not true or false: "+fe);if(re.hasOwnProperty(ae="MODULO_MODE")&&(fe=re[ae],b(fe,0,9,ae),F=fe),re.hasOwnProperty(ae="POW_PRECISION")&&(fe=re[ae],b(fe,0,h,ae),q=fe),re.hasOwnProperty(ae="FORMAT"))if(fe=re[ae],typeof fe=="object")$=fe;else throw Error(o+ae+" not an object: "+fe);if(re.hasOwnProperty(ae="ALPHABET"))if(fe=re[ae],typeof fe=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(fe))se=fe.slice(0,10)=="0123456789",te=fe;else throw Error(o+ae+" invalid: "+fe)}else throw Error(o+"Object expected: "+re);return{DECIMAL_PLACES:Z,ROUNDING_MODE:K,EXPONENTIAL_AT:[C,A],RANGE:[I,T],CRYPTO:M,MODULO_MODE:F,POW_PRECISION:q,FORMAT:$,ALPHABET:te}},ue.isBigNumber=function(re){if(!re||re._isBigNumber!==!0)return!1;if(!ue.DEBUG)return!0;var ae,fe,De=re.c,be=re.e,Ae=re.s;e:if({}.toString.call(De)=="[object Array]"){if((Ae===1||Ae===-1)&&be>=-h&&be<=h&&be===r(be)){if(De[0]===0){if(be===0&&De.length===1)return!0;break e}if(ae=(be+1)%l,ae<1&&(ae+=l),String(De[0]).length==ae){for(ae=0;ae<De.length;ae++)if(fe=De[ae],fe<0||fe>=a||fe!==r(fe))break e;if(fe!==0)return!0}}}else if(De===null&&be===null&&(Ae===null||Ae===1||Ae===-1))return!0;throw Error(o+"Invalid BigNumber: "+re)},ue.maximum=ue.max=function(){return Ie(arguments,-1)},ue.minimum=ue.min=function(){return Ie(arguments,1)},ue.random=(function(){var re=9007199254740992,ae=Math.random()*re&2097151?function(){return r(Math.random()*re)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(fe){var De,be,Ae,Ce,we,ve=0,xe=[],Te=new ue(G);if(fe==null?fe=Z:b(fe,0,h),Ce=i(fe/l),M)if(crypto.getRandomValues){for(De=crypto.getRandomValues(new Uint32Array(Ce*=2));ve<Ce;)we=De[ve]*131072+(De[ve+1]>>>11),we>=9e15?(be=crypto.getRandomValues(new Uint32Array(2)),De[ve]=be[0],De[ve+1]=be[1]):(xe.push(we%1e14),ve+=2);ve=Ce/2}else if(crypto.randomBytes){for(De=crypto.randomBytes(Ce*=7);ve<Ce;)we=(De[ve]&31)*281474976710656+De[ve+1]*1099511627776+De[ve+2]*4294967296+De[ve+3]*16777216+(De[ve+4]<<16)+(De[ve+5]<<8)+De[ve+6],we>=9e15?crypto.randomBytes(7).copy(De,ve):(xe.push(we%1e14),ve+=7);ve=Ce/7}else throw M=!1,Error(o+"crypto unavailable");if(!M)for(;ve<Ce;)we=ae(),we<9e15&&(xe[ve++]=we%1e14);for(Ce=xe[--ve],fe%=l,Ce&&fe&&(we=d[l-fe],xe[ve]=r(Ce/we)*we);xe[ve]===0;xe.pop(),ve--);if(ve<0)xe=[Ae=0];else{for(Ae=-1;xe[0]===0;xe.splice(0,1),Ae-=l);for(ve=1,we=xe[0];we>=10;we/=10,ve++);ve<l&&(Ae-=l-ve)}return Te.e=Ae,Te.c=xe,Te}})(),ue.sum=function(){for(var re=1,ae=arguments,fe=new ue(ae[0]);re<ae.length;)fe=fe.plus(ae[re++]);return fe},V=(function(){var re="0123456789";function ae(fe,De,be,Ae){for(var Ce,we=[0],ve,xe=0,Te=fe.length;xe<Te;){for(ve=we.length;ve--;we[ve]*=De);for(we[0]+=Ae.indexOf(fe.charAt(xe++)),Ce=0;Ce<we.length;Ce++)we[Ce]>be-1&&(we[Ce+1]==null&&(we[Ce+1]=0),we[Ce+1]+=we[Ce]/be|0,we[Ce]%=be)}return we.reverse()}return function(fe,De,be,Ae,Ce){var we,ve,xe,Te,ke,B,W,ie,ye=fe.indexOf("."),Me=Z,Fe=K;for(ye>=0&&(Te=q,q=0,fe=fe.replace(".",""),ie=new ue(De),B=ie.pow(fe.length-ye),q=Te,ie.c=ae(k(y(B.c),B.e,"0"),10,be,re),ie.e=ie.c.length),W=ae(fe,De,be,Ce?(we=te,re):(we=re,te)),xe=Te=W.length;W[--Te]==0;W.pop());if(!W[0])return we.charAt(0);if(ye<0?--xe:(B.c=W,B.e=xe,B.s=Ae,B=D(B,ie,Me,Fe,be),W=B.c,ke=B.r,xe=B.e),ve=xe+Me+1,ye=W[ve],Te=be/2,ke=ke||ve<0||W[ve+1]!=null,ke=Fe<4?(ye!=null||ke)&&(Fe==0||Fe==(B.s<0?3:2)):ye>Te||ye==Te&&(Fe==4||ke||Fe==6&&W[ve-1]&1||Fe==(B.s<0?8:7)),ve<1||!W[0])fe=ke?k(we.charAt(1),-Me,we.charAt(0)):we.charAt(0);else{if(W.length=ve,ke)for(--be;++W[--ve]>be;)W[ve]=0,ve||(++xe,W=[1].concat(W));for(Te=W.length;!W[--Te];);for(ye=0,fe="";ye<=Te;fe+=we.charAt(W[ye++]));fe=k(fe,xe,we.charAt(0))}return fe}})(),D=(function(){function re(De,be,Ae){var Ce,we,ve,xe,Te=0,ke=De.length,B=be%u,W=be/u|0;for(De=De.slice();ke--;)ve=De[ke]%u,xe=De[ke]/u|0,Ce=W*ve+xe*B,we=B*ve+Ce%u*u+Te,Te=(we/Ae|0)+(Ce/u|0)+W*xe,De[ke]=we%Ae;return Te&&(De=[Te].concat(De)),De}function ae(De,be,Ae,Ce){var we,ve;if(Ae!=Ce)ve=Ae>Ce?1:-1;else for(we=ve=0;we<Ae;we++)if(De[we]!=be[we]){ve=De[we]>be[we]?1:-1;break}return ve}function fe(De,be,Ae,Ce){for(var we=0;Ae--;)De[Ae]-=we,we=De[Ae]<be[Ae]?1:0,De[Ae]=we*Ce+De[Ae]-be[Ae];for(;!De[0]&&De.length>1;De.splice(0,1));}return function(De,be,Ae,Ce,we){var ve,xe,Te,ke,B,W,ie,ye,Me,Fe,tt,gt,Ut,Cn,jt,Ht,Kr,Rn=De.s==be.s?1:-1,Zn=De.c,Ji=be.c;if(!Zn||!Zn[0]||!Ji||!Ji[0])return new ue(!De.s||!be.s||(Zn?Ji&&Zn[0]==Ji[0]:!Ji)?NaN:Zn&&Zn[0]==0||!Ji?Rn*0:Rn/0);for(ye=new ue(Rn),Me=ye.c=[],xe=De.e-be.e,Rn=Ae+xe+1,we||(we=a,xe=p(De.e/l)-p(be.e/l),Rn=Rn/l|0),Te=0;Ji[Te]==(Zn[Te]||0);Te++);if(Ji[Te]>(Zn[Te]||0)&&xe--,Rn<0)Me.push(1),ke=!0;else{for(Cn=Zn.length,Ht=Ji.length,Te=0,Rn+=2,B=r(we/(Ji[0]+1)),B>1&&(Ji=re(Ji,B,we),Zn=re(Zn,B,we),Ht=Ji.length,Cn=Zn.length),Ut=Ht,Fe=Zn.slice(0,Ht),tt=Fe.length;tt<Ht;Fe[tt++]=0);Kr=Ji.slice(),Kr=[0].concat(Kr),jt=Ji[0],Ji[1]>=we/2&&jt++;do{if(B=0,ve=ae(Ji,Fe,Ht,tt),ve<0){if(gt=Fe[0],Ht!=tt&&(gt=gt*we+(Fe[1]||0)),B=r(gt/jt),B>1)for(B>=we&&(B=we-1),W=re(Ji,B,we),ie=W.length,tt=Fe.length;ae(W,Fe,ie,tt)==1;)B--,fe(W,Ht<ie?Kr:Ji,ie,we),ie=W.length,ve=1;else B==0&&(ve=B=1),W=Ji.slice(),ie=W.length;if(ie<tt&&(W=[0].concat(W)),fe(Fe,W,tt,we),tt=Fe.length,ve==-1)for(;ae(Ji,Fe,Ht,tt)<1;)B++,fe(Fe,Ht<tt?Kr:Ji,tt,we),tt=Fe.length}else ve===0&&(B++,Fe=[0]);Me[Te++]=B,Fe[0]?Fe[tt++]=Zn[Ut]||0:(Fe=[Zn[Ut]],tt=1)}while((Ut++<Cn||Fe[0]!=null)&&Rn--);ke=Fe[0]!=null,Me[0]||Me.splice(0,1)}if(we==a){for(Te=1,Rn=Me[0];Rn>=10;Rn/=10,Te++);ce(ye,Ae+(ye.e=Te+xe*l-1)+1,Ce,ke)}else ye.e=xe,ye.r=+ke;return ye}})();function Se(re,ae,fe,De){var be,Ae,Ce,we,ve;if(fe==null?fe=K:b(fe,0,8),!re.c)return re.toString();if(be=re.c[0],Ce=re.e,ae==null)ve=y(re.c),ve=De==1||De==2&&(Ce<=C||Ce>=A)?x(ve,Ce):k(ve,Ce,"0");else if(re=ce(new ue(re),ae,fe),Ae=re.e,ve=y(re.c),we=ve.length,De==1||De==2&&(ae<=Ae||Ae<=C)){for(;we<ae;ve+="0",we++);ve=x(ve,Ae)}else if(ae-=Ce+(De===2&&Ae>Ce),ve=k(ve,Ae,"0"),Ae+1>we){if(--ae>0)for(ve+=".";ae--;ve+="0");}else if(ae+=Ae-we,ae>0)for(Ae+1==we&&(ve+=".");ae--;ve+="0");return re.s<0&&be?"-"+ve:ve}function Ie(re,ae){for(var fe,De,be=1,Ae=new ue(re[0]);be<re.length;be++)De=new ue(re[be]),(!De.s||(fe=v(Ae,De))===ae||fe===0&&Ae.s===ae)&&(Ae=De);return Ae}function Be(re,ae,fe){for(var De=1,be=ae.length;!ae[--be];ae.pop());for(be=ae[0];be>=10;be/=10,De++);return(fe=De+fe*l-1)>T?re.c=re.e=null:fe<I?re.c=[re.e=0]:(re.e=fe,re.c=ae),re}O=(function(){var re=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ae=/^([^.]+)\.$/,fe=/^\.([^.]+)$/,De=/^-?(Infinity|NaN)$/,be=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Ae,Ce,we,ve){var xe,Te=we?Ce:Ce.replace(be,"");if(De.test(Te))Ae.s=isNaN(Te)?null:Te<0?-1:1;else{if(!we&&(Te=Te.replace(re,function(ke,B,W){return xe=(W=W.toLowerCase())=="x"?16:W=="b"?2:8,!ve||ve==xe?B:ke}),ve&&(xe=ve,Te=Te.replace(ae,"$1").replace(fe,"0.$1")),Ce!=Te))return new ue(Te,xe);if(ue.DEBUG)throw Error(o+"Not a"+(ve?" base "+ve:"")+" number: "+Ce);Ae.s=null}Ae.c=Ae.e=null}})();function ce(re,ae,fe,De){var be,Ae,Ce,we,ve,xe,Te,ke=re.c,B=d;if(ke){e:{for(be=1,we=ke[0];we>=10;we/=10,be++);if(Ae=ae-be,Ae<0)Ae+=l,Ce=ae,ve=ke[xe=0],Te=r(ve/B[be-Ce-1]%10);else if(xe=i((Ae+1)/l),xe>=ke.length)if(De){for(;ke.length<=xe;ke.push(0));ve=Te=0,be=1,Ae%=l,Ce=Ae-l+1}else break e;else{for(ve=we=ke[xe],be=1;we>=10;we/=10,be++);Ae%=l,Ce=Ae-l+be,Te=Ce<0?0:r(ve/B[be-Ce-1]%10)}if(De=De||ae<0||ke[xe+1]!=null||(Ce<0?ve:ve%B[be-Ce-1]),De=fe<4?(Te||De)&&(fe==0||fe==(re.s<0?3:2)):Te>5||Te==5&&(fe==4||De||fe==6&&(Ae>0?Ce>0?ve/B[be-Ce]:0:ke[xe-1])%10&1||fe==(re.s<0?8:7)),ae<1||!ke[0])return ke.length=0,De?(ae-=re.e+1,ke[0]=B[(l-ae%l)%l],re.e=-ae||0):ke[0]=re.e=0,re;if(Ae==0?(ke.length=xe,we=1,xe--):(ke.length=xe+1,we=B[l-Ae],ke[xe]=Ce>0?r(ve/B[be-Ce]%B[Ce])*we:0),De)for(;;)if(xe==0){for(Ae=1,Ce=ke[0];Ce>=10;Ce/=10,Ae++);for(Ce=ke[0]+=we,we=1;Ce>=10;Ce/=10,we++);Ae!=we&&(re.e++,ke[0]==a&&(ke[0]=1));break}else{if(ke[xe]+=we,ke[xe]!=a)break;ke[xe--]=0,we=1}for(Ae=ke.length;ke[--Ae]===0;ke.pop());}re.e>T?re.c=re.e=null:re.e<I&&(re.c=[re.e=0])}return re}function pe(re){var ae,fe=re.e;return fe===null?re.toString():(ae=y(re.c),ae=fe<=C||fe>=A?x(ae,fe):k(ae,fe,"0"),re.s<0?"-"+ae:ae)}return R.absoluteValue=R.abs=function(){var re=new ue(this);return re.s<0&&(re.s=1),re},R.comparedTo=function(re,ae){return v(this,new ue(re,ae))},R.decimalPlaces=R.dp=function(re,ae){var fe,De,be,Ae=this;if(re!=null)return b(re,0,h),ae==null?ae=K:b(ae,0,8),ce(new ue(Ae),re+Ae.e+1,ae);if(!(fe=Ae.c))return null;if(De=((be=fe.length-1)-p(this.e/l))*l,be=fe[be])for(;be%10==0;be/=10,De--);return De<0&&(De=0),De},R.dividedBy=R.div=function(re,ae){return D(this,new ue(re,ae),Z,K)},R.dividedToIntegerBy=R.idiv=function(re,ae){return D(this,new ue(re,ae),0,1)},R.exponentiatedBy=R.pow=function(re,ae){var fe,De,be,Ae,Ce,we,ve,xe,Te,ke=this;if(re=new ue(re),re.c&&!re.isInteger())throw Error(o+"Exponent not an integer: "+pe(re));if(ae!=null&&(ae=new ue(ae)),we=re.e>14,!ke.c||!ke.c[0]||ke.c[0]==1&&!ke.e&&ke.c.length==1||!re.c||!re.c[0])return Te=new ue(Math.pow(+pe(ke),we?re.s*(2-S(re)):+pe(re))),ae?Te.mod(ae):Te;if(ve=re.s<0,ae){if(ae.c?!ae.c[0]:!ae.s)return new ue(NaN);De=!ve&&ke.isInteger()&&ae.isInteger(),De&&(ke=ke.mod(ae))}else{if(re.e>9&&(ke.e>0||ke.e<-1||(ke.e==0?ke.c[0]>1||we&&ke.c[1]>=24e7:ke.c[0]<8e13||we&&ke.c[0]<=9999975e7)))return Ae=ke.s<0&&S(re)?-0:0,ke.e>-1&&(Ae=1/Ae),new ue(ve?1/Ae:Ae);q&&(Ae=i(q/l+2))}for(we?(fe=new ue(.5),ve&&(re.s=1),xe=S(re)):(be=Math.abs(+pe(re)),xe=be%2),Te=new ue(G);;){if(xe){if(Te=Te.times(ke),!Te.c)break;Ae?Te.c.length>Ae&&(Te.c.length=Ae):De&&(Te=Te.mod(ae))}if(be){if(be=r(be/2),be===0)break;xe=be%2}else if(re=re.times(fe),ce(re,re.e+1,1),re.e>14)xe=S(re);else{if(be=+pe(re),be===0)break;xe=be%2}ke=ke.times(ke),Ae?ke.c&&ke.c.length>Ae&&(ke.c.length=Ae):De&&(ke=ke.mod(ae))}return De?Te:(ve&&(Te=G.div(Te)),ae?Te.mod(ae):Ae?ce(Te,q,K,Ce):Te)},R.integerValue=function(re){var ae=new ue(this);return re==null?re=K:b(re,0,8),ce(ae,ae.e+1,re)},R.isEqualTo=R.eq=function(re,ae){return v(this,new ue(re,ae))===0},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(re,ae){return v(this,new ue(re,ae))>0},R.isGreaterThanOrEqualTo=R.gte=function(re,ae){return(ae=v(this,new ue(re,ae)))===1||ae===0},R.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},R.isLessThan=R.lt=function(re,ae){return v(this,new ue(re,ae))<0},R.isLessThanOrEqualTo=R.lte=function(re,ae){return(ae=v(this,new ue(re,ae)))===-1||ae===0},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return this.s>0},R.isZero=function(){return!!this.c&&this.c[0]==0},R.minus=function(re,ae){var fe,De,be,Ae,Ce=this,we=Ce.s;if(re=new ue(re,ae),ae=re.s,!we||!ae)return new ue(NaN);if(we!=ae)return re.s=-ae,Ce.plus(re);var ve=Ce.e/l,xe=re.e/l,Te=Ce.c,ke=re.c;if(!ve||!xe){if(!Te||!ke)return Te?(re.s=-ae,re):new ue(ke?Ce:NaN);if(!Te[0]||!ke[0])return ke[0]?(re.s=-ae,re):new ue(Te[0]?Ce:K==3?-0:0)}if(ve=p(ve),xe=p(xe),Te=Te.slice(),we=ve-xe){for((Ae=we<0)?(we=-we,be=Te):(xe=ve,be=ke),be.reverse(),ae=we;ae--;be.push(0));be.reverse()}else for(De=(Ae=(we=Te.length)<(ae=ke.length))?we:ae,we=ae=0;ae<De;ae++)if(Te[ae]!=ke[ae]){Ae=Te[ae]<ke[ae];break}if(Ae&&(be=Te,Te=ke,ke=be,re.s=-re.s),ae=(De=ke.length)-(fe=Te.length),ae>0)for(;ae--;Te[fe++]=0);for(ae=a-1;De>we;){if(Te[--De]<ke[De]){for(fe=De;fe&&!Te[--fe];Te[fe]=ae);--Te[fe],Te[De]+=a}Te[De]-=ke[De]}for(;Te[0]==0;Te.splice(0,1),--xe);return Te[0]?Be(re,Te,xe):(re.s=K==3?-1:1,re.c=[re.e=0],re)},R.modulo=R.mod=function(re,ae){var fe,De,be=this;return re=new ue(re,ae),!be.c||!re.s||re.c&&!re.c[0]?new ue(NaN):!re.c||be.c&&!be.c[0]?new ue(be):(F==9?(De=re.s,re.s=1,fe=D(be,re,0,3),re.s=De,fe.s*=De):fe=D(be,re,0,F),re=be.minus(fe.times(re)),!re.c[0]&&F==1&&(re.s=be.s),re)},R.multipliedBy=R.times=function(re,ae){var fe,De,be,Ae,Ce,we,ve,xe,Te,ke,B,W,ie,ye,Me,Fe=this,tt=Fe.c,gt=(re=new ue(re,ae)).c;if(!tt||!gt||!tt[0]||!gt[0])return!Fe.s||!re.s||tt&&!tt[0]&&!gt||gt&&!gt[0]&&!tt?re.c=re.e=re.s=null:(re.s*=Fe.s,!tt||!gt?re.c=re.e=null:(re.c=[0],re.e=0)),re;for(De=p(Fe.e/l)+p(re.e/l),re.s*=Fe.s,ve=tt.length,ke=gt.length,ve<ke&&(ie=tt,tt=gt,gt=ie,be=ve,ve=ke,ke=be),be=ve+ke,ie=[];be--;ie.push(0));for(ye=a,Me=u,be=ke;--be>=0;){for(fe=0,B=gt[be]%Me,W=gt[be]/Me|0,Ce=ve,Ae=be+Ce;Ae>be;)xe=tt[--Ce]%Me,Te=tt[Ce]/Me|0,we=W*xe+Te*B,xe=B*xe+we%Me*Me+ie[Ae]+fe,fe=(xe/ye|0)+(we/Me|0)+W*Te,ie[Ae--]=xe%ye;ie[Ae]=fe}return fe?++De:ie.splice(0,1),Be(re,ie,De)},R.negated=function(){var re=new ue(this);return re.s=-re.s||null,re},R.plus=function(re,ae){var fe,De=this,be=De.s;if(re=new ue(re,ae),ae=re.s,!be||!ae)return new ue(NaN);if(be!=ae)return re.s=-ae,De.minus(re);var Ae=De.e/l,Ce=re.e/l,we=De.c,ve=re.c;if(!Ae||!Ce){if(!we||!ve)return new ue(be/0);if(!we[0]||!ve[0])return ve[0]?re:new ue(we[0]?De:be*0)}if(Ae=p(Ae),Ce=p(Ce),we=we.slice(),be=Ae-Ce){for(be>0?(Ce=Ae,fe=ve):(be=-be,fe=we),fe.reverse();be--;fe.push(0));fe.reverse()}for(be=we.length,ae=ve.length,be-ae<0&&(fe=ve,ve=we,we=fe,ae=be),be=0;ae;)be=(we[--ae]=we[ae]+ve[ae]+be)/a|0,we[ae]=a===we[ae]?0:we[ae]%a;return be&&(we=[be].concat(we),++Ce),Be(re,we,Ce)},R.precision=R.sd=function(re,ae){var fe,De,be,Ae=this;if(re!=null&&re!==!!re)return b(re,1,h),ae==null?ae=K:b(ae,0,8),ce(new ue(Ae),re,ae);if(!(fe=Ae.c))return null;if(be=fe.length-1,De=be*l+1,be=fe[be]){for(;be%10==0;be/=10,De--);for(be=fe[0];be>=10;be/=10,De++);}return re&&Ae.e+1>De&&(De=Ae.e+1),De},R.shiftedBy=function(re){return b(re,-c,c),this.times("1e"+re)},R.squareRoot=R.sqrt=function(){var re,ae,fe,De,be,Ae=this,Ce=Ae.c,we=Ae.s,ve=Ae.e,xe=Z+4,Te=new ue("0.5");if(we!==1||!Ce||!Ce[0])return new ue(!we||we<0&&(!Ce||Ce[0])?NaN:Ce?Ae:1/0);if(we=Math.sqrt(+pe(Ae)),we==0||we==1/0?(ae=y(Ce),(ae.length+ve)%2==0&&(ae+="0"),we=Math.sqrt(+ae),ve=p((ve+1)/2)-(ve<0||ve%2),we==1/0?ae="5e"+ve:(ae=we.toExponential(),ae=ae.slice(0,ae.indexOf("e")+1)+ve),fe=new ue(ae)):fe=new ue(we+""),fe.c[0]){for(ve=fe.e,we=ve+xe,we<3&&(we=0);;)if(be=fe,fe=Te.times(be.plus(D(Ae,be,xe,1))),y(be.c).slice(0,we)===(ae=y(fe.c)).slice(0,we))if(fe.e<ve&&--we,ae=ae.slice(we-3,we+1),ae=="9999"||!De&&ae=="4999"){if(!De&&(ce(be,be.e+Z+2,0),be.times(be).eq(Ae))){fe=be;break}xe+=4,we+=4,De=1}else{(!+ae||!+ae.slice(1)&&ae.charAt(0)=="5")&&(ce(fe,fe.e+Z+2,1),re=!fe.times(fe).eq(Ae));break}}return ce(fe,fe.e+Z+1,K,re)},R.toExponential=function(re,ae){return re!=null&&(b(re,0,h),re++),Se(this,re,ae,1)},R.toFixed=function(re,ae){return re!=null&&(b(re,0,h),re=re+this.e+1),Se(this,re,ae)},R.toFormat=function(re,ae,fe){var De,be=this;if(fe==null)re!=null&&ae&&typeof ae=="object"?(fe=ae,ae=null):re&&typeof re=="object"?(fe=re,re=ae=null):fe=$;else if(typeof fe!="object")throw Error(o+"Argument not an object: "+fe);if(De=be.toFixed(re,ae),be.c){var Ae,Ce=De.split("."),we=+fe.groupSize,ve=+fe.secondaryGroupSize,xe=fe.groupSeparator||"",Te=Ce[0],ke=Ce[1],B=be.s<0,W=B?Te.slice(1):Te,ie=W.length;if(ve&&(Ae=we,we=ve,ve=Ae,ie-=Ae),we>0&&ie>0){for(Ae=ie%we||we,Te=W.substr(0,Ae);Ae<ie;Ae+=we)Te+=xe+W.substr(Ae,we);ve>0&&(Te+=xe+W.slice(Ae)),B&&(Te="-"+Te)}De=ke?Te+(fe.decimalSeparator||"")+((ve=+fe.fractionGroupSize)?ke.replace(new RegExp("\\d{"+ve+"}\\B","g"),"$&"+(fe.fractionGroupSeparator||"")):ke):Te}return(fe.prefix||"")+De+(fe.suffix||"")},R.toFraction=function(re){var ae,fe,De,be,Ae,Ce,we,ve,xe,Te,ke,B,W=this,ie=W.c;if(re!=null&&(we=new ue(re),!we.isInteger()&&(we.c||we.s!==1)||we.lt(G)))throw Error(o+"Argument "+(we.isInteger()?"out of range: ":"not an integer: ")+pe(we));if(!ie)return new ue(W);for(ae=new ue(G),xe=fe=new ue(G),De=ve=new ue(G),B=y(ie),Ae=ae.e=B.length-W.e-1,ae.c[0]=d[(Ce=Ae%l)<0?l+Ce:Ce],re=!re||we.comparedTo(ae)>0?Ae>0?ae:xe:we,Ce=T,T=1/0,we=new ue(B),ve.c[0]=0;Te=D(we,ae,0,1),be=fe.plus(Te.times(De)),be.comparedTo(re)!=1;)fe=De,De=be,xe=ve.plus(Te.times(be=xe)),ve=be,ae=we.minus(Te.times(be=ae)),we=be;return be=D(re.minus(fe),De,0,1),ve=ve.plus(be.times(xe)),fe=fe.plus(be.times(De)),ve.s=xe.s=W.s,Ae=Ae*2,ke=D(xe,De,Ae,K).minus(W).abs().comparedTo(D(ve,fe,Ae,K).minus(W).abs())<1?[xe,De]:[ve,fe],T=Ce,ke},R.toNumber=function(){return+pe(this)},R.toPrecision=function(re,ae){return re!=null&&b(re,1,h),Se(this,re,ae,2)},R.toString=function(re){var ae,fe=this,De=fe.s,be=fe.e;return be===null?De?(ae="Infinity",De<0&&(ae="-"+ae)):ae="NaN":(re==null?ae=be<=C||be>=A?x(y(fe.c),be):k(y(fe.c),be,"0"):re===10&&se?(fe=ce(new ue(fe),Z+be+1,K),ae=k(y(fe.c),fe.e,"0")):(b(re,2,te.length,"Base"),ae=V(k(y(fe.c),be,"0"),10,re,De,!0)),De<0&&fe.c[0]&&(ae="-"+ae)),ae},R.valueOf=R.toJSON=function(){return pe(this)},R._isBigNumber=!0,L!=null&&ue.set(L),ue}function p(L){var D=L|0;return L>0||L===D?D:D-1}function y(L){for(var D,V,O=1,R=L.length,G=L[0]+"";O<R;){for(D=L[O++]+"",V=l-D.length;V--;D="0"+D);G+=D}for(R=G.length;G.charCodeAt(--R)===48;);return G.slice(0,R+1||1)}function v(L,D){var V,O,R=L.c,G=D.c,Z=L.s,K=D.s,C=L.e,A=D.e;if(!Z||!K)return null;if(V=R&&!R[0],O=G&&!G[0],V||O)return V?O?0:-K:Z;if(Z!=K)return Z;if(V=Z<0,O=C==A,!R||!G)return O?0:!R^V?1:-1;if(!O)return C>A^V?1:-1;for(K=(C=R.length)<(A=G.length)?C:A,Z=0;Z<K;Z++)if(R[Z]!=G[Z])return R[Z]>G[Z]^V?1:-1;return C==A?0:C>A^V?1:-1}function b(L,D,V,O){if(L<D||L>V||L!==r(L))throw Error(o+(O||"Argument")+(typeof L=="number"?L<D||L>V?" out of range: ":" not an integer: ":" not a primitive number: ")+String(L))}function S(L){var D=L.c.length-1;return p(L.e/l)==D&&L.c[D]%2!=0}function x(L,D){return(L.length>1?L.charAt(0)+"."+L.slice(1):L)+(D<0?"e":"e+")+D}function k(L,D,V){var O,R;if(D<0){for(R=V+".";++D;R+=V);L=R+L}else if(O=L.length,++D>O){for(R=V,D-=O;--D;R+=V);L+=R}else D<O&&(L=L.slice(0,D)+"."+L.slice(D));return L}t=f(),t.default=t.BigNumber=t,typeof define=="function"&&define.amd?define(function(){return t}):typeof L4<"u"&&L4.exports?L4.exports=t:(n||(n=typeof self<"u"&&self?self:window),n.BigNumber=t)})(Mee)});var O4=me(R4=>{"use strict";Object.defineProperty(R4,"__esModule",{value:!0});R4.Hash192=void 0;var JMe=hw(),Tm=class n extends JMe.Hash{constructor(t){t&&t.byteLength===0&&(t=n.ZERO_192.bytes),super(t??n.ZERO_192.bytes)}};R4.Hash192=Tm;Tm.width=24;Tm.ZERO_192=new Tm(new Uint8Array(Tm.width))});var Pee=me(F2=>{"use strict";var e6e=F2&&F2.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(F2,"__esModule",{value:!0});F2.Amount=void 0;var Tee=Uh(),Eee=I2(),Aee=gw(),t6e=Wl(),jh=e6e(Us()),Em=qi(),Su=wu(),Dee=O4(),Iee=-96,Fee=80,kR=16,n6e=new jh.default("1e17"),i6e=new jh.default("1e-6"),xR=BigInt(4294967295),r6e=BigInt(9223372036854776e3);jh.default.config({EXPONENTIAL_AT:[Iee-kR,Fee+kR]});function o6e(n){let t=Object.keys(n).sort();return t.length===3&&t[0]==="currency"&&t[1]==="issuer"&&t[2]==="value"}function s6e(n){let t=Object.keys(n).sort();return t.length===2&&t[0]==="mpt_issuance_id"&&t[1]==="value"}var yw=class n extends t6e.SerializedType{constructor(t){super(t??n.defaultAmount.bytes)}static from(t){if(t instanceof n)return t;let e=new Uint8Array(8);if(typeof t=="string"){n.assertXrpIsValid(t);let i=BigInt(t),r=[new Uint8Array(4),new Uint8Array(4)];return(0,Su.writeUInt32BE)(r[0],Number(i>>BigInt(32)),0),(0,Su.writeUInt32BE)(r[1],Number(i&BigInt(xR)),0),e=(0,Em.concat)(r),e[0]|=64,new n(e)}if(o6e(t)){let i=new jh.default(t.value);if(n.assertIouIsValid(i),i.isZero())e[0]|=128;else{let s=i.times(`1e${-((i.e||0)-15)}`).abs().toString(),a=BigInt(s),l=[new Uint8Array(4),new Uint8Array(4)];(0,Su.writeUInt32BE)(l[0],Number(a>>BigInt(32)),0),(0,Su.writeUInt32BE)(l[1],Number(a&BigInt(xR)),0),e=(0,Em.concat)(l),e[0]|=128,i.gt(new jh.default(0))&&(e[0]|=64);let d=97+((i.e||0)-15);e[0]|=d>>>2,e[1]|=(d&3)<<6}let r=Aee.Currency.from(t.currency).toBytes(),o=Eee.AccountID.from(t.issuer).toBytes();return new n((0,Em.concat)([e,r,o]))}if(s6e(t)){n.assertMptIsValid(t.value);let i=new Uint8Array(1);i[0]|=96;let r=BigInt(t.value),o=[new Uint8Array(4),new Uint8Array(4)];(0,Su.writeUInt32BE)(o[0],Number(r>>BigInt(32)),0),(0,Su.writeUInt32BE)(o[1],Number(r&BigInt(xR)),0),e=(0,Em.concat)(o);let s=Dee.Hash192.from(t.mpt_issuance_id).toBytes();return new n((0,Em.concat)([i,e,s]))}throw new Error("Invalid type to construct an Amount")}static fromParser(t){if(t.peek()&128)return new n(t.read(48));let r=t.peek()&32?33:8;return new n(t.read(r))}toJSON(){if(this.isNative()){let t=this.bytes,i=t[0]&64?"":"-";t[0]&=63;let r=BigInt((0,Su.readUInt32BE)(t.slice(0,4),0)),o=BigInt((0,Su.readUInt32BE)(t.slice(4),0)),s=r<<BigInt(32)|o;return`${i}${s.toString()}`}if(this.isIOU()){let t=new Tee.BinaryParser(this.toString()),e=t.read(8),i=Aee.Currency.fromParser(t),r=Eee.AccountID.fromParser(t),o=e[0],s=e[1],l=o&64?"":"-",c=((o&63)<<2)+((s&255)>>6)-97;e[0]=0,e[1]&=63;let d=new jh.default(`${l}0x${(0,Em.bytesToHex)(e)}`).times(`1e${c}`);return n.assertIouIsValid(d),{value:d.toString(),currency:i.toJSON(),issuer:r.toJSON()}}if(this.isMPT()){let t=new Tee.BinaryParser(this.toString()),e=t.read(1),i=t.read(8),r=Dee.Hash192.fromParser(t),s=e[0]&64?"":"-",a=BigInt((0,Su.readUInt32BE)(i.slice(0,4),0)),l=BigInt((0,Su.readUInt32BE)(i.slice(4),0)),c=a<<BigInt(32)|l;return{value:`${s}${c.toString()}`,mpt_issuance_id:r.toString()}}throw new Error("Invalid amount to construct JSON")}static assertXrpIsValid(t){if(t.indexOf(".")!==-1)throw new Error(`${t.toString()} is an illegal amount`);let e=new jh.default(t);if(!e.isZero()&&(e.lt(i6e)||e.gt(n6e)))throw new Error(`${t.toString()} is an illegal amount`)}static assertIouIsValid(t){if(!t.isZero()){let e=t.precision(),i=(t.e||0)-15;if(e>kR||i>Fee||i<Iee)throw new Error("Decimal precision out of range");this.verifyNoDecimal(t)}}static assertMptIsValid(t){if(t.indexOf(".")!==-1)throw new Error(`${t.toString()} is an illegal amount`);let e=new jh.default(t);if(!e.isZero()){if(e<(0,jh.default)(0))throw new Error(`${t.toString()} is an illegal amount`);if(Number(BigInt(t)&BigInt(r6e))!=0)throw new Error(`${t.toString()} is an illegal amount`)}}static verifyNoDecimal(t){if(t.times(`1e${-((t.e||0)-15)}`).abs().toString().indexOf(".")!==-1)throw new Error("Decimal place found in integerNumberString")}isNative(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)===0}isMPT(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)!==0}isIOU(){return(this.bytes[0]&128)!==0}};F2.Amount=yw;yw.defaultAmount=new yw((0,Em.hexToBytes)("4000000000000000"))});var Lee=me(N4=>{"use strict";Object.defineProperty(N4,"__esModule",{value:!0});N4.Blob=void 0;var a6e=Wl(),l6e=qi(),MR=class n extends a6e.SerializedType{constructor(t){super(t)}static fromParser(t,e){return new n(t.read(e))}static from(t){if(t instanceof n)return t;if(typeof t=="string"){if(!/^[A-F0-9]*$/iu.test(t))throw new Error("Cannot construct Blob from a non-hex string");return new n((0,l6e.hexToBytes)(t))}throw new Error("Cannot construct Blob from value given")}};N4.Blob=MR});var Ree=me(B4=>{"use strict";Object.defineProperty(B4,"__esModule",{value:!0});B4.Hash128=void 0;var c6e=hw(),d6e=qi(),Am=class n extends c6e.Hash{constructor(t){t&&t.byteLength===0&&(t=n.ZERO_128.bytes),super(t??n.ZERO_128.bytes)}toHex(){let t=(0,d6e.bytesToHex)(this.toBytes());return/^0+$/.exec(t)?"":t}};B4.Hash128=Am;Am.width=16;Am.ZERO_128=new Am(new Uint8Array(Am.width))});var U4=me(V4=>{"use strict";Object.defineProperty(V4,"__esModule",{value:!0});V4.Hash256=void 0;var u6e=hw(),Dm=class n extends u6e.Hash{constructor(t){super(t??n.ZERO_256.bytes)}};V4.Hash256=Dm;Dm.width=32;Dm.ZERO_256=new Dm(new Uint8Array(Dm.width))});var AR=me(H4=>{"use strict";Object.defineProperty(H4,"__esModule",{value:!0});H4.Issue=void 0;var P2=qi(),h6e=Uh(),j4=I2(),TR=gw(),f6e=Wl(),p6e=O4(),Oee=wu();function m6e(n){let t=Object.keys(n).sort(),e=t.length===1&&t[0]==="currency",i=t.length===2&&t[0]==="currency"&&t[1]==="issuer",r=t.length===1&&t[0]==="mpt_issuance_id";return e||i||r}var g6e=44,ER=j4.AccountID.from("0000000000000000000000000000000000000001"),vw=class n extends f6e.SerializedType{constructor(t){super(t??n.XRP_ISSUE.bytes)}static from(t){if(t instanceof n)return t;if(m6e(t)){if(t.currency){let e=TR.Currency.from(t.currency.toString()).toBytes();if(t.issuer){let i=j4.AccountID.from(t.issuer.toString()).toBytes();return new n((0,P2.concat)([e,i]))}return new n(e)}if(t.mpt_issuance_id){let e=p6e.Hash192.from(t.mpt_issuance_id.toString()).toBytes(),i=e.slice(4),r=Number((0,Oee.readUInt32BE)(e.slice(0,4),0)),o=new Uint8Array(4);return new DataView(o.buffer).setUint32(0,r,!0),new n((0,P2.concat)([i,ER.toBytes(),o]))}}throw new Error("Invalid type to construct an Issue")}static fromParser(t){let e=t.read(20);if(new TR.Currency(e).toJSON()==="XRP")return new n(e);let i=new j4.AccountID(t.read(20));if(ER.toHex()===i.toHex()){let r=t.read(4);return new n((0,P2.concat)([e,ER.toBytes(),r]))}return new n((0,P2.concat)([e,i.toBytes()]))}toJSON(){if(this.toBytes().length===g6e){let r=this.toBytes().slice(0,20),o=new DataView(this.toBytes().slice(40).buffer).getUint32(0,!0),s=new Uint8Array(4);return(0,Oee.writeUInt32BE)(s,o,0),{mpt_issuance_id:(0,P2.bytesToHex)((0,P2.concat)([s,r]))}}let t=new h6e.BinaryParser(this.toString()),e=TR.Currency.fromParser(t);if(e.toJSON()==="XRP")return{currency:e.toJSON()};let i=j4.AccountID.fromParser(t);return{currency:e.toJSON(),issuer:i.toJSON()}}};H4.Issue=vw;vw.XRP_ISSUE=new vw(new Uint8Array(20))});var Bee=me(q4=>{"use strict";Object.defineProperty(q4,"__esModule",{value:!0});q4.STNumber=void 0;var y6e=Wl(),W4=wu(),v6e=BigInt("1000000000000000"),_6e=BigInt("9999999999999999"),b6e=-32768,w6e=32768,Nee=-2147483648;function S6e(n){let e=/^([-+]?)([0-9]+)(?:\.([0-9]+))?(?:[eE]([+-]?[0-9]+))?$/.exec(n);if(!e)throw new Error(`Unable to parse number from string: ${n}`);let[,i,r,o,s]=e,l=r.replace(/^0+(?=\d)/,"")||"0",c=0;o&&(l+=o,c-=o.length),s&&(c+=parseInt(s,10));let d=BigInt(l);i==="-"&&(d=-d);let u=d<BigInt(0);return{mantissa:d,exponent:c,isNegative:u}}function C6e(n,t){let e=n<BigInt(0)?-n:n,i=n<BigInt(0);for(;e!==BigInt(0)&&e<v6e&&t>b6e;)t-=1,e*=BigInt(10);for(;e>_6e;){if(t>=w6e)throw new Error("Mantissa and exponent are too large");t+=1,e/=BigInt(10)}return i&&(e=-e),{mantissa:e,exponent:t}}var z4=class n extends y6e.SerializedType{constructor(t){let e=t??n.defaultBytes;if(!(e instanceof Uint8Array)||e.length!==12)throw new Error(`STNumber must be constructed from a 12-byte Uint8Array, got ${e?.length}`);super(e)}static from(t){if(t instanceof n)return t;if(typeof t=="string")return n.fromValue(t);throw new Error("STNumber.from: Only string or STNumber instance is supported")}static fromValue(t){let{mantissa:e,exponent:i,isNegative:r}=S6e(t),o,s;e===BigInt(0)&&i===0&&!r?(o=BigInt(0),s=Nee):{mantissa:o,exponent:s}=C6e(e,i);let a=new Uint8Array(12);return(0,W4.writeInt64BE)(a,o,0),(0,W4.writeInt32BE)(a,s,8),new n(a)}static fromParser(t){return new n(t.read(12))}toJSON(){let t=this.bytes;if(!t||t.length!==12)throw new Error("STNumber internal bytes not set or wrong length");let e=(0,W4.readInt64BE)(t,0),i=(0,W4.readInt32BE)(t,8);if(e===BigInt(0)&&i===Nee)return"0";if(i===0)return e.toString();if(i<-25||i>-5)return`${e}e${i}`;let r=e<BigInt(0),o=e<BigInt(0)?-e:e,s=27,a=23,l=o.toString(),c="0".repeat(s)+l+"0".repeat(a),d=i+43,u=c.slice(0,d).replace(/^0+/,"")||"0",h=c.slice(d).replace(/0+$/,"");return`${r?"-":""}${u}${h?"."+h:""}`}};q4.STNumber=z4;z4.defaultBytes=new Uint8Array(12)});var Uee=me($4=>{"use strict";Object.defineProperty($4,"__esModule",{value:!0});$4.PathSet=void 0;var L2=I2(),DR=gw(),OR=Uh(),NR=Wl(),Im=qi(),LR=0,Vee=255,IR=1,FR=16,PR=32;function x6e(n){return n.issuer!==void 0||n.account!==void 0||n.currency!==void 0}function k6e(n){return Array.isArray(n)&&n.length===0||Array.isArray(n)&&Array.isArray(n[0])&&n[0].length===0||Array.isArray(n)&&Array.isArray(n[0])&&x6e(n[0][0])}var _w=class n extends NR.SerializedType{static from(t){if(t instanceof n)return t;let e=[Uint8Array.from([0])];return t.account&&(e.push(L2.AccountID.from(t.account).toBytes()),e[0][0]|=IR),t.currency&&(e.push(DR.Currency.from(t.currency).toBytes()),e[0][0]|=FR),t.issuer&&(e.push(L2.AccountID.from(t.issuer).toBytes()),e[0][0]|=PR),new n((0,Im.concat)(e))}static fromParser(t){let e=t.readUInt8(),i=[Uint8Array.from([e])];return e&IR&&i.push(t.read(L2.AccountID.width)),e&FR&&i.push(t.read(DR.Currency.width)),e&PR&&i.push(t.read(L2.AccountID.width)),new n((0,Im.concat)(i))}toJSON(){let t=new OR.BinaryParser((0,Im.bytesToHex)(this.bytes)),e=t.readUInt8(),i,r,o;e&IR&&(i=L2.AccountID.fromParser(t).toJSON()),e&FR&&(r=DR.Currency.fromParser(t).toJSON()),e&PR&&(o=L2.AccountID.fromParser(t).toJSON());let s={};return i&&(s.account=i),o&&(s.issuer=o),r&&(s.currency=r),s}type(){return this.bytes[0]}},bw=class n extends NR.SerializedType{static from(t){if(t instanceof n)return t;let e=[];return t.forEach(i=>{e.push(_w.from(i).toBytes())}),new n((0,Im.concat)(e))}static fromParser(t){let e=[];for(;!t.end()&&(e.push(_w.fromParser(t).toBytes()),!(t.peek()===LR||t.peek()===Vee)););return new n((0,Im.concat)(e))}toJSON(){let t=[],e=new OR.BinaryParser(this.toString());for(;!e.end();)t.push(_w.fromParser(e).toJSON());return t}},RR=class n extends NR.SerializedType{static from(t){if(t instanceof n)return t;if(k6e(t)){let e=[];return t.forEach(i=>{e.push(bw.from(i).toBytes()),e.push(Uint8Array.from([Vee]))}),e[e.length-1]=Uint8Array.from([LR]),new n((0,Im.concat)(e))}throw new Error("Cannot construct PathSet from given value")}static fromParser(t){let e=[];for(;!t.end()&&(e.push(bw.fromParser(t).toBytes()),e.push(t.read(1)),e[e.length-1][0]!=LR););return new n((0,Im.concat)(e))}toJSON(){let t=[],e=new OR.BinaryParser(this.toString());for(;!e.end();)t.push(bw.fromParser(e).toJSON()),e.skip(1);return t}};$4.PathSet=RR});var ww=me(K4=>{"use strict";Object.defineProperty(K4,"__esModule",{value:!0});K4.UInt=void 0;var M6e=Wl();function T6e(n,t){return n<t?-1:n==t?0:1}var BR=class extends M6e.Comparable{constructor(t){super(t)}compareTo(t){return T6e(this.valueOf(),t.valueOf())}toJSON(){let t=this.valueOf();return typeof t=="number"?t:t.toString()}static checkUintRange(t,e,i){if(t<e||t>i)throw new Error(`Invalid ${this.constructor.name}: ${t} must be >= ${e} and <= ${i}`)}};K4.UInt=BR});var Y4=me(X4=>{"use strict";Object.defineProperty(X4,"__esModule",{value:!0});X4.UInt64=void 0;var E6e=ww(),G4=qi(),R2=wu(),A6e=Vh(),D6e=/^[a-fA-F0-9]{1,16}$/,I6e=/^[0-9]{1,20}$/,jee=BigInt(4294967295),F6e=new Set(["MaximumAmount","OutstandingAmount","MPTAmount","LockedAmount"]);function Hee(n){return F6e.has(n)}var Fm=class n extends E6e.UInt{constructor(t){super(t??n.defaultUInt64.bytes)}static fromParser(t){return new n(t.read(n.width))}static from(t,e=""){if(t instanceof n)return t;let i=new Uint8Array(n.width);if(typeof t=="number"){if(t<0)throw new Error("value must be an unsigned integer");let r=BigInt(t),o=[new Uint8Array(4),new Uint8Array(4)];return(0,R2.writeUInt32BE)(o[0],Number(r>>BigInt(32)),0),(0,R2.writeUInt32BE)(o[1],Number(r&BigInt(jee)),0),new n((0,G4.concat)(o))}if(typeof t=="string"){if(Hee(e)){if(!I6e.test(t))throw new Error(`${e} ${t} is not a valid base 10 string`);t=BigInt(t).toString(16)}if(typeof t=="string"&&!D6e.test(t))throw new Error(`${t} is not a valid hex-string`);let r=t.padStart(16,"0");return i=(0,G4.hexToBytes)(r),new n(i)}if(typeof t=="bigint"){let r=[new Uint8Array(4),new Uint8Array(4)];return(0,R2.writeUInt32BE)(r[0],Number(Number(t>>BigInt(32))),0),(0,R2.writeUInt32BE)(r[1],Number(t&BigInt(jee)),0),new n((0,G4.concat)(r))}throw new Error("Cannot construct UInt64 from given value")}toJSON(t=A6e.DEFAULT_DEFINITIONS,e=""){let i=(0,G4.bytesToHex)(this.bytes);return Hee(e)?BigInt("0x"+i).toString(10):i}valueOf(){let t=BigInt((0,R2.readUInt32BE)(this.bytes.slice(0,4),0)),e=BigInt((0,R2.readUInt32BE)(this.bytes.slice(4),0));return t<<BigInt(32)|e}toBytes(){return this.bytes}};X4.UInt64=Fm;Fm.width=64/8;Fm.defaultUInt64=new Fm(new Uint8Array(Fm.width))});var J4=me(Q4=>{"use strict";Object.defineProperty(Q4,"__esModule",{value:!0});Q4.STObject=void 0;var P6e=Vh(),L6e=Wl(),qee=ml(),R6e=Uh(),Z4=A2(),O6e=WR(),N6e=Y4(),Wee=Uint8Array.from([225]),zee="ObjectEndMarker",VR="STObject",B6e="Destination",V6e="Account",UR="SourceTag",jR="DestinationTag";function U6e(n,t){let e=(0,qee.xAddressToClassicAddress)(t),i;if(n===B6e)i=jR;else if(n===V6e)i=UR;else if(e.tag!==!1)throw new Error(`${n} cannot have an associated tag`);return e.tag!==!1?{[n]:e.classicAddress,[i]:e.tag}:{[n]:e.classicAddress}}function j6e(n,t){if(!(n[UR]===void 0||t[UR]===void 0))throw new Error("Cannot have Account X-Address and SourceTag");if(!(n[jR]===void 0||t[jR]===void 0))throw new Error("Cannot have Destination X-Address and DestinationTag")}var HR=class n extends L6e.SerializedType{static fromParser(t){let e=new Z4.BytesList,i=new Z4.BinarySerializer(e);for(;!t.end();){let r=t.readField();if(r.name===zee)break;let o=t.readFieldValue(r);i.writeFieldAndValue(r,o),r.type.name===VR&&i.put(Wee)}return new n(e.toBytes())}static from(t,e,i=P6e.DEFAULT_DEFINITIONS){if(t instanceof n)return t;let r=new Z4.BytesList,o=new Z4.BinarySerializer(r),s=!1,a=Object.entries(t).reduce((d,[u,h])=>{let f;return h&&(0,qee.isValidXAddress)(h.toString())&&(f=U6e(u,h.toString()),j6e(f,t)),Object.assign(d,f??{[u]:h})},{});function l(d){return d!==void 0&&a[d.name]!==void 0&&d.isSerialized}let c=Object.keys(a).map(d=>{if(!(d in i.field)){if(d[0]===d[0].toLowerCase())return;throw new Error(`Field ${d} is not defined in the definitions`)}return i.field[d]}).filter(l).sort((d,u)=>d.ordinal-u.ordinal);return e!==void 0&&(c=c.filter(e)),c.forEach(d=>{let u=d.type.name===VR?this.from(a[d.name],void 0,i):d.type.name==="STArray"?O6e.STArray.from(a[d.name],i):d.type.name==="UInt64"?N6e.UInt64.from(a[d.name],d.name):d.associatedType.from(a[d.name]);if(u==null)throw new TypeError(`Unable to interpret "${d.name}: ${a[d.name]}".`);u.name==="UNLModify"&&(s=!0);let h=d.name=="Account"&&s;o.writeFieldAndValue(d,u,h),d.type.name===VR&&o.put(Wee)}),new n(r.toBytes())}toJSON(t){let e=new R6e.BinaryParser(this.toString(),t),i={};for(;!e.end();){let r=e.readField();if(r.name===zee)break;i[r.name]=e.readFieldValue(r).toJSON(t,r.name)}return i}};Q4.STObject=HR});var WR=me(eM=>{"use strict";Object.defineProperty(eM,"__esModule",{value:!0});eM.STArray=void 0;var $ee=Vh(),H6e=Wl(),Kee=J4(),W6e=Uh(),Gee=qi(),Xee=Uint8Array.from([241]),Yee="ArrayEndMarker",z6e=Uint8Array.from([225]);function q6e(n){return Array.isArray(n)&&n.every(t=>typeof t=="object"&&Object.keys(t).length===1&&typeof Object.values(t)[0]=="object")}var zR=class n extends H6e.SerializedType{static fromParser(t){let e=[];for(;!t.end();){let i=t.readField();if(i.name===Yee)break;e.push(i.header,t.readFieldValue(i).toBytes(),z6e)}return e.push(Xee),new n((0,Gee.concat)(e))}static from(t,e=$ee.DEFAULT_DEFINITIONS){if(t instanceof n)return t;if(q6e(t)){let i=[];return t.forEach(r=>{i.push(Kee.STObject.from(r,void 0,e).toBytes())}),i.push(Xee),new n((0,Gee.concat)(i))}throw new Error("Cannot construct STArray from value given")}toJSON(t=$ee.DEFAULT_DEFINITIONS){let e=[],i=new W6e.BinaryParser(this.toString(),t);for(;!i.end();){let r=i.readField();if(r.name===Yee)break;let o={};o[r.name]=Kee.STObject.fromParser(i).toJSON(t),e.push(o)}return e}};eM.STArray=zR});var Qee=me(tM=>{"use strict";Object.defineProperty(tM,"__esModule",{value:!0});tM.UInt16=void 0;var $6e=ww(),Zee=wu(),Pm=class n extends $6e.UInt{constructor(t){super(t??n.defaultUInt16.bytes)}static fromParser(t){return new n(t.read(n.width))}static from(t){if(t instanceof n)return t;if(typeof t=="number"){n.checkUintRange(t,0,65535);let e=new Uint8Array(n.width);return(0,Zee.writeUInt16BE)(e,t,0),new n(e)}throw new Error("Can not construct UInt16 with given value")}valueOf(){return parseInt((0,Zee.readUInt16BE)(this.bytes,0))}};tM.UInt16=Pm;Pm.width=16/8;Pm.defaultUInt16=new Pm(new Uint8Array(Pm.width))});var $R=me(nM=>{"use strict";Object.defineProperty(nM,"__esModule",{value:!0});nM.UInt32=void 0;var K6e=ww(),qR=wu(),Lm=class n extends K6e.UInt{constructor(t){super(t??n.defaultUInt32.bytes)}static fromParser(t){return new n(t.read(n.width))}static from(t){if(t instanceof n)return t;let e=new Uint8Array(n.width);if(typeof t=="string"){let i=Number.parseInt(t);return(0,qR.writeUInt32BE)(e,i,0),new n(e)}if(typeof t=="number")return n.checkUintRange(t,0,4294967295),(0,qR.writeUInt32BE)(e,t,0),new n(e);throw new Error("Cannot construct UInt32 from given value")}valueOf(){return parseInt((0,qR.readUInt32BE)(this.bytes,0),10)}};nM.UInt32=Lm;Lm.width=32/8;Lm.defaultUInt32=new Lm(new Uint8Array(Lm.width))});var KR=me(iM=>{"use strict";Object.defineProperty(iM,"__esModule",{value:!0});iM.UInt8=void 0;var G6e=ww(),X6e=qi(),Y6e=wu(),Rm=class n extends G6e.UInt{constructor(t){super(t??n.defaultUInt8.bytes)}static fromParser(t){return new n(t.read(n.width))}static from(t){if(t instanceof n)return t;if(typeof t=="number"){n.checkUintRange(t,0,255);let e=new Uint8Array(n.width);return(0,Y6e.writeUInt8)(e,t,0),new n(e)}throw new Error("Cannot construct UInt8 from given value")}valueOf(){return parseInt((0,X6e.bytesToHex)(this.bytes),16)}};iM.UInt8=Rm;Rm.width=8/8;Rm.defaultUInt8=new Rm(new Uint8Array(Rm.width))});var tte=me(rM=>{"use strict";Object.defineProperty(rM,"__esModule",{value:!0});rM.Vector256=void 0;var Z6e=Wl(),Jee=U4(),ete=A2(),Q6e=qi();function J6e(n){return Array.isArray(n)&&(n.length===0||typeof n[0]=="string")}var GR=class n extends Z6e.SerializedType{constructor(t){super(t)}static fromParser(t,e){let i=new ete.BytesList,o=(e??t.size())/32;for(let s=0;s<o;s++)Jee.Hash256.fromParser(t).toBytesSink(i);return new n(i.toBytes())}static from(t){if(t instanceof n)return t;if(J6e(t)){let e=new ete.BytesList;return t.forEach(i=>{Jee.Hash256.from(i).toBytesSink(e)}),new n(e.toBytes())}throw new Error("Cannot construct Vector256 from given value")}toJSON(){if(this.bytes.byteLength%32!==0)throw new Error("Invalid bytes for Vector256");let t=[];for(let e=0;e<this.bytes.byteLength;e+=32)t.push((0,Q6e.bytesToHex)(this.bytes.slice(e,e+32)));return t}};rM.Vector256=GR});var ite=me(oM=>{"use strict";Object.defineProperty(oM,"__esModule",{value:!0});oM.XChainBridge=void 0;var eTe=Uh(),Sw=I2(),tTe=Wl(),nte=AR(),XR=qi();function nTe(n){let t=Object.keys(n).sort();return t.length===4&&t[0]==="IssuingChainDoor"&&t[1]==="IssuingChainIssue"&&t[2]==="LockingChainDoor"&&t[3]==="LockingChainIssue"}var O2=class n extends tTe.SerializedType{constructor(t){super(t??n.ZERO_XCHAIN_BRIDGE.bytes)}static from(t){if(t instanceof n)return t;if(!nTe(t))throw new Error("Invalid type to construct an XChainBridge");let e=[];return this.TYPE_ORDER.forEach(i=>{let{name:r,type:o}=i;o===Sw.AccountID&&e.push(Uint8Array.from([20]));let s=o.from(t[r]);e.push(s.toBytes())}),new n((0,XR.concat)(e))}static fromParser(t){let e=[];return this.TYPE_ORDER.forEach(i=>{let{type:r}=i;r===Sw.AccountID&&(t.skip(1),e.push(Uint8Array.from([20])));let o=r.fromParser(t);e.push(o.toBytes())}),new n((0,XR.concat)(e))}toJSON(){let t=new eTe.BinaryParser(this.toString()),e={};return n.TYPE_ORDER.forEach(i=>{let{name:r,type:o}=i;o===Sw.AccountID&&t.skip(1);let s=o.fromParser(t).toJSON();e[r]=s}),e}};oM.XChainBridge=O2;O2.ZERO_XCHAIN_BRIDGE=new O2((0,XR.concat)([Uint8Array.from([20]),new Uint8Array(40),Uint8Array.from([20]),new Uint8Array(40)]));O2.TYPE_ORDER=[{name:"LockingChainDoor",type:Sw.AccountID},{name:"LockingChainIssue",type:nte.Issue},{name:"IssuingChainDoor",type:Sw.AccountID},{name:"IssuingChainIssue",type:nte.Issue}]});var pp=me(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.Vector256=Qi.UInt64=Qi.UInt32=Qi.UInt16=Qi.UInt8=Qi.STObject=Qi.STArray=Qi.PathSet=Qi.Hash256=Qi.Hash192=Qi.Hash160=Qi.Hash128=Qi.Currency=Qi.Blob=Qi.Amount=Qi.AccountID=Qi.coreTypes=void 0;var rte=I2();Object.defineProperty(Qi,"AccountID",{enumerable:!0,get:function(){return rte.AccountID}});var ote=Pee();Object.defineProperty(Qi,"Amount",{enumerable:!0,get:function(){return ote.Amount}});var ste=Lee();Object.defineProperty(Qi,"Blob",{enumerable:!0,get:function(){return ste.Blob}});var ate=gw();Object.defineProperty(Qi,"Currency",{enumerable:!0,get:function(){return ate.Currency}});var lte=Ree();Object.defineProperty(Qi,"Hash128",{enumerable:!0,get:function(){return lte.Hash128}});var cte=A4();Object.defineProperty(Qi,"Hash160",{enumerable:!0,get:function(){return cte.Hash160}});var dte=O4();Object.defineProperty(Qi,"Hash192",{enumerable:!0,get:function(){return dte.Hash192}});var ute=U4();Object.defineProperty(Qi,"Hash256",{enumerable:!0,get:function(){return ute.Hash256}});var iTe=AR(),rTe=Bee(),hte=Uee();Object.defineProperty(Qi,"PathSet",{enumerable:!0,get:function(){return hte.PathSet}});var fte=WR();Object.defineProperty(Qi,"STArray",{enumerable:!0,get:function(){return fte.STArray}});var pte=J4();Object.defineProperty(Qi,"STObject",{enumerable:!0,get:function(){return pte.STObject}});var mte=Qee();Object.defineProperty(Qi,"UInt16",{enumerable:!0,get:function(){return mte.UInt16}});var gte=$R();Object.defineProperty(Qi,"UInt32",{enumerable:!0,get:function(){return gte.UInt32}});var yte=Y4();Object.defineProperty(Qi,"UInt64",{enumerable:!0,get:function(){return yte.UInt64}});var vte=KR();Object.defineProperty(Qi,"UInt8",{enumerable:!0,get:function(){return vte.UInt8}});var _te=tte();Object.defineProperty(Qi,"Vector256",{enumerable:!0,get:function(){return _te.Vector256}});var oTe=ite(),sTe=Vh(),bte={AccountID:rte.AccountID,Amount:ote.Amount,Blob:ste.Blob,Currency:ate.Currency,Hash128:lte.Hash128,Hash160:cte.Hash160,Hash192:dte.Hash192,Hash256:ute.Hash256,Issue:iTe.Issue,Number:rTe.STNumber,PathSet:hte.PathSet,STArray:fte.STArray,STObject:pte.STObject,UInt8:vte.UInt8,UInt16:mte.UInt16,UInt32:gte.UInt32,UInt64:yte.UInt64,Vector256:_te.Vector256,XChainBridge:oTe.XChainBridge};Qi.coreTypes=bte;sTe.DEFAULT_DEFINITIONS.associateTypes(bte)});var N2=me(sM=>{"use strict";Object.defineProperty(sM,"__esModule",{value:!0});sM.HashPrefix=void 0;var aTe=wu();function hd(n){let t=new Uint8Array(4);return(0,aTe.writeUInt32BE)(t,n,0),t}var lTe={transactionID:hd(1415073280),transaction:hd(1397638144),accountStateEntry:hd(1296846336),innerNode:hd(1296649728),ledgerHeader:hd(1280791040),transactionSig:hd(1398036480),transactionMultiSig:hd(1397576704),validation:hd(1447119872),proposal:hd(1347571712),paymentChannelClaim:hd(1129073920),batch:hd(1111705600)};sM.HashPrefix=lTe});var wte=me(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.sha512_256=ks.SHA512_256=ks.sha512_224=ks.SHA512_224=ks.sha384=ks.SHA384=ks.sha512=ks.SHA512=void 0;var mp=Cm();ks.SHA512=mp.SHA512;ks.sha512=mp.sha512;ks.SHA384=mp.SHA384;ks.sha384=mp.sha384;ks.SHA512_224=mp.SHA512_224;ks.sha512_224=mp.sha512_224;ks.SHA512_256=mp.SHA512_256;ks.sha512_256=mp.sha512_256});var aM=me(B2=>{"use strict";var cTe=B2&&B2.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(B2,"__esModule",{value:!0});B2.sha512=void 0;var dTe=wte(),uTe=cTe(w4());B2.sha512=(0,uTe.default)(dTe.sha512)});var Cw=me(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.transactionID=gp.sha512Half=gp.Sha512Half=void 0;var hTe=N2(),Ste=pp(),fTe=A2(),pTe=aM(),lM=class n extends fTe.BytesList{constructor(){super(...arguments),this.hash=pTe.sha512.create()}static put(t){return new n().put(t)}put(t){return this.hash.update(t),this}finish256(){return Uint8Array.from(this.hash.digest().slice(0,32))}finish(){return new Ste.Hash256(this.finish256())}};gp.Sha512Half=lM;function Cte(...n){let t=new lM;return n.forEach(e=>t.put(e)),t.finish256()}gp.sha512Half=Cte;function mTe(n){return new Ste.Hash256(Cte(hTe.HashPrefix.transactionID,n))}gp.transactionID=mTe});var ZR=me(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.signingBatchData=zr.transactionID=zr.sha512Half=zr.binaryToJSON=zr.signingClaimData=zr.signingData=zr.multiSigningData=zr.readJSON=zr.serializeObject=zr.makeParser=zr.BytesList=zr.BinarySerializer=zr.BinaryParser=void 0;var gTe=qi(),yp=pp(),xte=Uh();Object.defineProperty(zr,"BinaryParser",{enumerable:!0,get:function(){return xte.BinaryParser}});var cM=N2(),xw=A2();Object.defineProperty(zr,"BinarySerializer",{enumerable:!0,get:function(){return xw.BinarySerializer}});Object.defineProperty(zr,"BytesList",{enumerable:!0,get:function(){return xw.BytesList}});var kte=Cw();Object.defineProperty(zr,"sha512Half",{enumerable:!0,get:function(){return kte.sha512Half}});Object.defineProperty(zr,"transactionID",{enumerable:!0,get:function(){return kte.transactionID}});var Mte=Vh(),Tte=(n,t)=>new xte.BinaryParser(n instanceof Uint8Array?(0,gTe.bytesToHex)(n):n,t);zr.makeParser=Tte;var Ete=(n,t=Mte.DEFAULT_DEFINITIONS)=>n.readType(yp.coreTypes.STObject).toJSON(t);zr.readJSON=Ete;var yTe=(n,t)=>Ete(Tte(n,t),t);zr.binaryToJSON=yTe;function YR(n,t={}){let{prefix:e,suffix:i,signingFieldsOnly:r=!1,definitions:o}=t,s=new xw.BytesList;e&&s.put(e);let a=r?l=>l.isSigningField:void 0;return yp.coreTypes.STObject.from(n,a,o).toBytesSink(s),i&&s.put(i),s.toBytes()}zr.serializeObject=YR;function vTe(n,t=cM.HashPrefix.transactionSig,e={}){return YR(n,{prefix:t,signingFieldsOnly:!0,definitions:e.definitions})}zr.signingData=vTe;function _Te(n){let t=BigInt(String(n.amount)),e=cM.HashPrefix.paymentChannelClaim,i=yp.coreTypes.Hash256.from(n.channel).toBytes(),r=yp.coreTypes.UInt64.from(t).toBytes(),o=new xw.BytesList;return o.put(e),o.put(i),o.put(r),o.toBytes()}zr.signingClaimData=_Te;function bTe(n,t,e={definitions:Mte.DEFAULT_DEFINITIONS}){let i=cM.HashPrefix.transactionMultiSig,r=yp.coreTypes.AccountID.from(t).toBytes();return YR(n,{prefix:i,suffix:r,signingFieldsOnly:!0,definitions:e.definitions})}zr.multiSigningData=bTe;function wTe(n){if(n.flags==null)throw Error("No field `flags'");if(n.txIDs==null)throw Error("No field `txIDs`");let t=cM.HashPrefix.batch,e=yp.coreTypes.UInt32.from(n.flags).toBytes(),i=yp.coreTypes.UInt32.from(n.txIDs.length).toBytes(),r=new xw.BytesList;return r.put(t),r.put(e),r.put(i),n.txIDs.forEach(o=>{r.put(yp.coreTypes.Hash256.from(o).toBytes())}),r.toBytes()}zr.signingBatchData=wTe});var eO=me(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.ShaMapLeaf=vp.ShaMapNode=vp.ShaMap=void 0;var Ate=pp(),STe=N2(),Dte=Cw(),kw=class{};vp.ShaMapNode=kw;var Mw=class extends kw{constructor(t,e){super(),this.index=t,this.item=e}isLeaf(){return!0}isInner(){return!1}hashPrefix(){return this.item===void 0?new Uint8Array(0):this.item.hashPrefix()}hash(){let t=Dte.Sha512Half.put(this.hashPrefix());return this.toBytesSink(t),t.finish()}toBytesSink(t){this.item!==void 0&&this.item.toBytesSink(t),this.index.toBytesSink(t)}};vp.ShaMapLeaf=Mw;var QR=class n extends kw{constructor(t=0){super(),this.depth=t,this.slotBits=0,this.branches=Array(16)}isInner(){return!0}isLeaf(){return!1}hashPrefix(){return STe.HashPrefix.innerNode}setBranch(t,e){this.slotBits=this.slotBits|1<<t,this.branches[t]=e}empty(){return this.slotBits===0}hash(){if(this.empty())return Ate.coreTypes.Hash256.ZERO_256;let t=Dte.Sha512Half.put(this.hashPrefix());return this.toBytesSink(t),t.finish()}toBytesSink(t){for(let e=0;e<this.branches.length;e++){let i=this.branches[e];(i?i.hash():Ate.coreTypes.Hash256.ZERO_256).toBytesSink(t)}}addItem(t,e,i){if(t===void 0)throw new Error;if(t!==void 0){let r=t.nibblet(this.depth),o=this.branches[r];if(o===void 0)this.setBranch(r,i||new Mw(t,e));else if(o instanceof Mw){let s=new n(this.depth+1);s.addItem(o.index,void 0,o),s.addItem(t,e,i),this.setBranch(r,s)}else if(o instanceof n)o.addItem(t,e,i);else throw new Error("invalid ShaMap.addItem call")}}},JR=class extends QR{};vp.ShaMap=JR});var iO=me(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.decodeLedgerData=Cu.ledgerHash=Cu.transactionTreeHash=Cu.accountStateHash=void 0;var CTe=eO(),nO=N2(),xTe=Cw(),Pte=ZR(),_p=U4(),Ite=J4(),Lte=Y4(),tO=$R(),Fte=KR(),kTe=Uh();function Rte(n,t){let e=new CTe.ShaMap;return t.forEach(i=>e.addItem(...n(i))),e.hash()}function MTe(n){if(!n.hash)throw new Error;return[_p.Hash256.from(n.hash),{hashPrefix(){return nO.HashPrefix.transaction},toBytesSink(i){let r=new Pte.BinarySerializer(i);r.writeLengthEncoded(Ite.STObject.from(n)),r.writeLengthEncoded(Ite.STObject.from(n.metaData))}},void 0]}function TTe(n){let t=_p.Hash256.from(n.index),e=(0,Pte.serializeObject)(n);return[t,{hashPrefix(){return nO.HashPrefix.accountStateEntry},toBytesSink(r){r.put(e)}},void 0]}function ETe(n){return Rte(MTe,n)}Cu.transactionTreeHash=ETe;function ATe(n){return Rte(TTe,n)}Cu.accountStateHash=ATe;function DTe(n){let t=new xTe.Sha512Half;if(t.put(nO.HashPrefix.ledgerHeader),n.parent_close_time===void 0||n.close_flags===void 0)throw new Error;return tO.UInt32.from(n.ledger_index).toBytesSink(t),Lte.UInt64.from(BigInt(String(n.total_coins))).toBytesSink(t),_p.Hash256.from(n.parent_hash).toBytesSink(t),_p.Hash256.from(n.transaction_hash).toBytesSink(t),_p.Hash256.from(n.account_hash).toBytesSink(t),tO.UInt32.from(n.parent_close_time).toBytesSink(t),tO.UInt32.from(n.close_time).toBytesSink(t),Fte.UInt8.from(n.close_time_resolution).toBytesSink(t),Fte.UInt8.from(n.close_flags).toBytesSink(t),t.finish()}Cu.ledgerHash=DTe;function ITe(n,t){if(typeof n!="string")throw new Error("binary must be a hex string");let e=new kTe.BinaryParser(n,t);return{ledger_index:e.readUInt32(),total_coins:e.readType(Lte.UInt64).valueOf().toString(),parent_hash:e.readType(_p.Hash256).toHex(),transaction_hash:e.readType(_p.Hash256).toHex(),account_hash:e.readType(_p.Hash256).toHex(),parent_close_time:e.readUInt32(),close_time:e.readUInt32(),close_time_resolution:e.readUInt8(),close_flags:e.readUInt8()}}Cu.decodeLedgerData=ITe});var Bte=me(V2=>{"use strict";var FTe=V2&&V2.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(V2,"__esModule",{value:!0});V2.quality=void 0;var PTe=pp(),Ote=FTe(Us()),Nte=qi(),rO=class{static encode(t){let e=(0,Ote.default)(t),i=(e?.e||0)-15,r=e.times(`1e${-i}`).abs().toString(),o=PTe.coreTypes.UInt64.from(BigInt(r)).toBytes();return o[0]=i+100,o}static decode(t){let e=(0,Nte.hexToBytes)(t).slice(-8),i=e[0]-100;return new Ote.default(`0x${(0,Nte.bytesToHex)(e.slice(1))}`).times(`1e${i}`)}};V2.quality=rO});var Vte=me(sr=>{"use strict";var LTe=sr&&sr.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),RTe=sr&&sr.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),dM=sr&&sr.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&LTe(t,n,e);return RTe(t,n),t};Object.defineProperty(sr,"__esModule",{value:!0});sr.types=sr.ShaMap=sr.HashPrefix=sr.quality=sr.TransactionResult=sr.Type=sr.LedgerEntryType=sr.TransactionType=sr.Field=sr.DEFAULT_DEFINITIONS=sr.ledgerHashes=sr.binary=sr.hashes=void 0;var U2=Vh();Object.defineProperty(sr,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return U2.DEFAULT_DEFINITIONS}});Object.defineProperty(sr,"Field",{enumerable:!0,get:function(){return U2.Field}});Object.defineProperty(sr,"TransactionType",{enumerable:!0,get:function(){return U2.TransactionType}});Object.defineProperty(sr,"LedgerEntryType",{enumerable:!0,get:function(){return U2.LedgerEntryType}});Object.defineProperty(sr,"Type",{enumerable:!0,get:function(){return U2.Type}});Object.defineProperty(sr,"TransactionResult",{enumerable:!0,get:function(){return U2.TransactionResult}});var OTe=dM(pp());sr.types=OTe;var NTe=dM(ZR());sr.binary=NTe;var BTe=eO();Object.defineProperty(sr,"ShaMap",{enumerable:!0,get:function(){return BTe.ShaMap}});var VTe=dM(iO());sr.ledgerHashes=VTe;var UTe=dM(Cw());sr.hashes=UTe;var jTe=Bte();Object.defineProperty(sr,"quality",{enumerable:!0,get:function(){return jTe.quality}});var HTe=N2();Object.defineProperty(sr,"HashPrefix",{enumerable:!0,get:function(){return HTe.HashPrefix}})});var Ute=me(uM=>{"use strict";Object.defineProperty(uM,"__esModule",{value:!0});uM.XrplDefinitions=void 0;var WTe=bR(),zTe=pp(),oO=class extends WTe.XrplDefinitionsBase{constructor(t,e){let i=Object.assign({},zTe.coreTypes,e);super(t,i)}};uM.XrplDefinitions=oO});var gl=me(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.coreTypes=Ir.DEFAULT_DEFINITIONS=Ir.XrplDefinitionsBase=Ir.XrplDefinitions=Ir.TRANSACTION_TYPES=Ir.decodeLedgerData=Ir.decodeQuality=Ir.encodeQuality=Ir.encodeForSigningBatch=Ir.encodeForMultisigning=Ir.encodeForSigningClaim=Ir.encodeForSigning=Ir.encode=Ir.decode=void 0;var hM=Vte(),qTe=iO();Object.defineProperty(Ir,"decodeLedgerData",{enumerable:!0,get:function(){return qTe.decodeLedgerData}});var sO=Vh();Object.defineProperty(Ir,"XrplDefinitionsBase",{enumerable:!0,get:function(){return sO.XrplDefinitionsBase}});Object.defineProperty(Ir,"TRANSACTION_TYPES",{enumerable:!0,get:function(){return sO.TRANSACTION_TYPES}});Object.defineProperty(Ir,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return sO.DEFAULT_DEFINITIONS}});var $Te=Ute();Object.defineProperty(Ir,"XrplDefinitions",{enumerable:!0,get:function(){return $Te.XrplDefinitions}});var KTe=pp();Object.defineProperty(Ir,"coreTypes",{enumerable:!0,get:function(){return KTe.coreTypes}});var j2=qi(),{signingData:GTe,signingClaimData:XTe,multiSigningData:YTe,signingBatchData:ZTe,binaryToJSON:QTe,serializeObject:JTe}=hM.binary;function eEe(n,t){if(typeof n!="string")throw new Error("binary must be a hex string");return QTe(n,t)}Ir.decode=eEe;function tEe(n,t){if(typeof n!="object")throw new Error;return(0,j2.bytesToHex)(JTe(n,{definitions:t}))}Ir.encode=tEe;function nEe(n,t){if(typeof n!="object")throw new Error;return(0,j2.bytesToHex)(GTe(n,hM.HashPrefix.transactionSig,{definitions:t}))}Ir.encodeForSigning=nEe;function iEe(n){if(typeof n!="object")throw new Error;return(0,j2.bytesToHex)(XTe(n))}Ir.encodeForSigningClaim=iEe;function rEe(n,t,e){if(typeof n!="object")throw new Error;let i=e?{definitions:e}:void 0;return(0,j2.bytesToHex)(YTe(n,t,i))}Ir.encodeForMultisigning=rEe;function oEe(n){if(typeof n!="object")throw new Error("Need an object to encode a Batch transaction");return(0,j2.bytesToHex)(ZTe(n))}Ir.encodeForSigningBatch=oEe;function sEe(n){if(typeof n!="string")throw new Error;return(0,j2.bytesToHex)(hM.quality.encode(n))}Ir.encodeQuality=sEe;function aEe(n){if(typeof n!="string")throw new Error;return hM.quality.decode(n).toString()}Ir.decodeQuality=aEe});var Ms=me(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.isHex=Sc.hasFlag=Sc.isFlagEnabled=Sc.onlyHasFields=Sc.INTEGER_SANITY_CHECK=void 0;var lEe=/^[0-9A-Fa-f]+$/u;Sc.INTEGER_SANITY_CHECK=/^[0-9]+$/u;function cEe(n,t){return Object.keys(n).every(e=>t.includes(e))}Sc.onlyHasFields=cEe;function jte(n,t){return(BigInt(t)&BigInt(n))===BigInt(t)}Sc.isFlagEnabled=jte;function dEe(n,t,e){return n.Flags==null?!1:typeof n.Flags=="number"?jte(n.Flags,t):n.Flags[e]===!0}Sc.hasFlag=dEe;function uEe(n){return lEe.test(n)}Sc.isHex=uEe});var At=me(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.isDomainID=an.containsDuplicates=an.validateCredentialsList=an.validateCredentialType=an.parseAmountValue=an.validateBaseTransaction=an.GlobalFlags=an.validateOptionalField=an.validateRequiredField=an.validateHexMetadata=an.isLedgerEntryId=an.isArray=an.isXChainBridge=an.isTokenAmount=an.isAmount=an.isAccount=an.isClawbackAmount=an.isMPTAmount=an.isAuthorizeCredential=an.isIssuedCurrencyAmount=an.isIssuedCurrency=an.isCurrency=an.isXRPLNumber=an.isValue=an.isNull=an.isNumber=an.isString=an.isRecord=an.VAULT_DATA_MAX_BYTE_LENGTH=an.MAX_AUTHORIZED_CREDENTIALS=void 0;var hEe=qi(),Hte=ml(),fEe=gl(),No=Nt(),Om=Ms(),pEe=3;an.MAX_AUTHORIZED_CREDENTIALS=8;var mEe=64,Wte=mEe*2,gEe=64;an.VAULT_DATA_MAX_BYTE_LENGTH=256;function yEe(n){if(!zl(n))return!1;let t=n.Memo;if(!zl(t))return!1;let e=Object.keys(t).length,i=t.MemoData==null||uo(t.MemoData)&&(0,Om.isHex)(t.MemoData),r=t.MemoFormat==null||uo(t.MemoFormat)&&(0,Om.isHex)(t.MemoFormat),o=t.MemoType==null||uo(t.MemoType)&&(0,Om.isHex)(t.MemoType);return e>=1&&e<=pEe&&i&&r&&o&&(0,Om.onlyHasFields)(t,["MemoFormat","MemoData","MemoType"])}var vEe=3;function _Ee(n){if(!zl(n))return!1;let t=n.Signer;return zl(t)?Object.keys(t).length===vEe&&uo(t.Account)&&uo(t.TxnSignature)&&uo(t.SigningPubKey):!1}var qte=1,bEe=1,$te=2,wEe=2,SEe=3,CEe=4,xEe=1;function zl(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}an.isRecord=zl;function uo(n){return typeof n=="string"}an.isString=uo;function H2(n){return typeof n=="number"}an.isNumber=H2;function kEe(n){return n==null}an.isNull=kEe;function MEe(n){return e=>e===n}an.isValue=MEe;function TEe(n){return typeof n=="string"&&/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][-+]?\d+)?$/u.test(n.trim())}an.isXRPLNumber=TEe;function EEe(n){return zl(n)&&(Object.keys(n).length===$te&&uo(n.issuer)&&uo(n.currency)||Object.keys(n).length===qte&&n.currency==="XRP"||Object.keys(n).length===bEe&&uo(n.mpt_issuance_id))}an.isCurrency=EEe;function aO(n){return zl(n)&&(Object.keys(n).length===$te&&uo(n.issuer)&&uo(n.currency)||Object.keys(n).length===qte&&n.currency==="XRP")}an.isIssuedCurrency=aO;function pM(n){return zl(n)&&Object.keys(n).length===SEe&&uo(n.value)&&uo(n.issuer)&&uo(n.currency)}an.isIssuedCurrencyAmount=pM;function Kte(n){return zl(n)&&zl(n.Credential)&&Object.keys(n).length===xEe&&typeof n.Credential.CredentialType=="string"&&typeof n.Credential.Issuer=="string"}an.isAuthorizeCredential=Kte;function mM(n){return zl(n)&&Object.keys(n).length===wEe&&typeof n.value=="string"&&typeof n.mpt_issuance_id=="string"}an.isMPTAmount=mM;function AEe(n){return pM(n)||mM(n)}an.isClawbackAmount=AEe;function Gte(n){return typeof n=="string"&&((0,Hte.isValidClassicAddress)(n)||(0,Hte.isValidXAddress)(n))}an.isAccount=Gte;function Xte(n){return typeof n=="string"||pM(n)||mM(n)}an.isAmount=Xte;function DEe(n){return pM(n)||mM(n)}an.isTokenAmount=DEe;function IEe(n){return zl(n)&&Object.keys(n).length===CEe&&typeof n.LockingChainDoor=="string"&&aO(n.LockingChainIssue)&&typeof n.IssuingChainDoor=="string"&&aO(n.IssuingChainIssue)}an.isXChainBridge=IEe;function fM(n){return n!=null&&Array.isArray(n)}an.isArray=fM;function FEe(n){return uo(n)&&(0,Om.isHex)(n)&&n.length===gEe}an.isLedgerEntryId=FEe;function PEe(n,t){return uo(n)&&(0,Om.isHex)(n)&&n.length>0&&n.length<=t}an.validateHexMetadata=PEe;function Yte(n,t,e,i={}){var r,o;let s=(r=i.paramName)!==null&&r!==void 0?r:t,a=(o=i.txType)!==null&&o!==void 0?o:n.TransactionType;if(n[t]==null)throw new No.ValidationError(`${a}: missing field ${String(s)}`);if(!e(n[t]))throw new No.ValidationError(`${a}: invalid field ${String(s)}`)}an.validateRequiredField=Yte;function fd(n,t,e,i={}){var r,o;let s=(r=i.paramName)!==null&&r!==void 0?r:t,a=(o=i.txType)!==null&&o!==void 0?o:n.TransactionType;if(n[t]!==void 0&&!e(n[t]))throw new No.ValidationError(`${a}: invalid field ${String(s)}`)}an.validateOptionalField=fd;var zte=(function(n){return n[n.tfInnerBatchTxn=1073741824]="tfInnerBatchTxn",n})(zte||(an.GlobalFlags=zte={}));function LEe(n){if(!zl(n))throw new No.ValidationError("BaseTransaction: invalid, expected a valid object");if(n.TransactionType===void 0)throw new No.ValidationError("BaseTransaction: missing field TransactionType");if(typeof n.TransactionType!="string")throw new No.ValidationError("BaseTransaction: TransactionType not string");if(!fEe.TRANSACTION_TYPES.includes(n.TransactionType))throw new No.ValidationError(`BaseTransaction: Unknown TransactionType ${n.TransactionType}`);Yte(n,"Account",uo),fd(n,"Fee",uo),fd(n,"Sequence",H2),fd(n,"AccountTxnID",uo),fd(n,"LastLedgerSequence",H2);let t=n.Memos;if(t!=null&&(!fM(t)||!t.every(yEe)))throw new No.ValidationError("BaseTransaction: invalid Memos");let e=n.Signers;if(e!=null&&(!fM(e)||e.length===0||!e.every(_Ee)))throw new No.ValidationError("BaseTransaction: invalid Signers");fd(n,"SourceTag",H2),fd(n,"SigningPubKey",uo),fd(n,"TicketSequence",H2),fd(n,"TxnSignature",uo),fd(n,"NetworkID",H2),fd(n,"Delegate",Gte);let i=n.Delegate;if(i!=null&&i===n.Account)throw new No.ValidationError("BaseTransaction: Account and Delegate addresses cannot be the same")}an.validateBaseTransaction=LEe;function REe(n){return Xte(n)?parseFloat(typeof n=="string"?n:n.value):NaN}an.parseAmountValue=REe;function OEe(n){if(typeof n.TransactionType!="string")throw new No.ValidationError("Invalid TransactionType");if(n.CredentialType===void 0)throw new No.ValidationError(`${n.TransactionType}: missing field CredentialType`);if(!uo(n.CredentialType))throw new No.ValidationError(`${n.TransactionType}: CredentialType must be a string`);if(n.CredentialType.length===0)throw new No.ValidationError(`${n.TransactionType}: CredentialType cannot be an empty string`);if(n.CredentialType.length>Wte)throw new No.ValidationError(`${n.TransactionType}: CredentialType length cannot be > ${Wte}`);if(!hEe.HEX_REGEX.test(n.CredentialType))throw new No.ValidationError(`${n.TransactionType}: CredentialType must be encoded in hex`)}an.validateCredentialType=OEe;function NEe(n,t,e,i){if(n!=null){if(!fM(n))throw new No.ValidationError(`${t}: Credentials must be an array`);if(n.length>i)throw new No.ValidationError(`${t}: Credentials length cannot exceed ${i} elements`);if(n.length===0)throw new No.ValidationError(`${t}: Credentials cannot be an empty array`);if(n.forEach(r=>{if(e){if(!uo(r))throw new No.ValidationError(`${t}: Invalid Credentials ID list format`)}else if(!Kte(r))throw new No.ValidationError(`${t}: Invalid Credentials format`)}),Zte(n))throw new No.ValidationError(`${t}: Credentials cannot contain duplicate elements`)}}an.validateCredentialsList=NEe;function BEe(n){return typeof n[0]!="string"}function Zte(n){if(typeof n[0]=="string")return new Set(n.map(i=>JSON.stringify(i))).size!==n.length;let t=new Set;if(BEe(n))for(let e of n){let i=`${e.Credential.Issuer}-${e.Credential.CredentialType}`;if(t.has(i))return!0;t.add(i)}return!1}an.containsDuplicates=Zte;var VEe=64;function UEe(n){return uo(n)&&n.length===VEe&&(0,Om.isHex)(n)}an.isDomainID=UEe});var yM=me(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.validateAccountSet=bp.AccountSetTfFlags=bp.AccountSetAsfFlags=void 0;var xu=Nt(),lO=At(),gM=(function(n){return n[n.asfRequireDest=1]="asfRequireDest",n[n.asfRequireAuth=2]="asfRequireAuth",n[n.asfDisallowXRP=3]="asfDisallowXRP",n[n.asfDisableMaster=4]="asfDisableMaster",n[n.asfAccountTxnID=5]="asfAccountTxnID",n[n.asfNoFreeze=6]="asfNoFreeze",n[n.asfGlobalFreeze=7]="asfGlobalFreeze",n[n.asfDefaultRipple=8]="asfDefaultRipple",n[n.asfDepositAuth=9]="asfDepositAuth",n[n.asfAuthorizedNFTokenMinter=10]="asfAuthorizedNFTokenMinter",n[n.asfDisallowIncomingNFTokenOffer=12]="asfDisallowIncomingNFTokenOffer",n[n.asfDisallowIncomingCheck=13]="asfDisallowIncomingCheck",n[n.asfDisallowIncomingPayChan=14]="asfDisallowIncomingPayChan",n[n.asfDisallowIncomingTrustline=15]="asfDisallowIncomingTrustline",n[n.asfAllowTrustLineClawback=16]="asfAllowTrustLineClawback",n[n.asfAllowTrustLineLocking=17]="asfAllowTrustLineLocking",n})(gM||(bp.AccountSetAsfFlags=gM={})),Qte=(function(n){return n[n.tfRequireDestTag=65536]="tfRequireDestTag",n[n.tfOptionalDestTag=131072]="tfOptionalDestTag",n[n.tfRequireAuth=262144]="tfRequireAuth",n[n.tfOptionalAuth=524288]="tfOptionalAuth",n[n.tfDisallowXRP=1048576]="tfDisallowXRP",n[n.tfAllowXRP=2097152]="tfAllowXRP",n})(Qte||(bp.AccountSetTfFlags=Qte={})),jEe=3,HEe=15;function WEe(n){if((0,lO.validateBaseTransaction)(n),(0,lO.validateOptionalField)(n,"NFTokenMinter",lO.isAccount),n.ClearFlag!==void 0){if(typeof n.ClearFlag!="number")throw new xu.ValidationError("AccountSet: invalid ClearFlag");if(!Object.values(gM).includes(n.ClearFlag))throw new xu.ValidationError("AccountSet: invalid ClearFlag")}if(n.Domain!==void 0&&typeof n.Domain!="string")throw new xu.ValidationError("AccountSet: invalid Domain");if(n.EmailHash!==void 0&&typeof n.EmailHash!="string")throw new xu.ValidationError("AccountSet: invalid EmailHash");if(n.MessageKey!==void 0&&typeof n.MessageKey!="string")throw new xu.ValidationError("AccountSet: invalid MessageKey");if(n.SetFlag!==void 0){if(typeof n.SetFlag!="number")throw new xu.ValidationError("AccountSet: invalid SetFlag");if(!Object.values(gM).includes(n.SetFlag))throw new xu.ValidationError("AccountSet: invalid SetFlag")}if(n.TransferRate!==void 0&&typeof n.TransferRate!="number")throw new xu.ValidationError("AccountSet: invalid TransferRate");if(n.TickSize!==void 0){if(typeof n.TickSize!="number")throw new xu.ValidationError("AccountSet: invalid TickSize");if(n.TickSize!==0&&(n.TickSize<jEe||n.TickSize>HEe))throw new xu.ValidationError("AccountSet: invalid TickSize")}}bp.validateAccountSet=WEe});var _M=me(W2=>{"use strict";Object.defineProperty(W2,"__esModule",{value:!0});W2.validateAMMClawback=W2.AMMClawbackFlags=void 0;var vM=Nt(),Hh=At(),Jte=(function(n){return n[n.tfClawTwoAssets=1]="tfClawTwoAssets",n})(Jte||(W2.AMMClawbackFlags=Jte={}));function zEe(n){(0,Hh.validateBaseTransaction)(n),(0,Hh.validateRequiredField)(n,"Holder",Hh.isAccount),(0,Hh.validateRequiredField)(n,"Asset",Hh.isIssuedCurrency);let t=n.Asset;if(n.Holder===t.issuer)throw new vM.ValidationError("AMMClawback: Holder and Asset.issuer must be distinct");if(n.Account!==t.issuer)throw new vM.ValidationError("AMMClawback: Account must be the same as Asset.issuer");if((0,Hh.validateRequiredField)(n,"Asset2",Hh.isIssuedCurrency),(0,Hh.validateOptionalField)(n,"Amount",Hh.isIssuedCurrencyAmount),n.Amount!=null){if(n.Amount.currency!==t.currency)throw new vM.ValidationError("AMMClawback: Amount.currency must match Asset.currency");if(n.Amount.issuer!==t.issuer)throw new vM.ValidationError("AMMClawback: Amount.issuer must match Amount.issuer")}}W2.validateAMMClawback=zEe});var bM=me(z2=>{"use strict";Object.defineProperty(z2,"__esModule",{value:!0});z2.validateAMMDeposit=z2.AMMDepositFlags=void 0;var pd=Nt(),Nm=At(),ene=(function(n){return n[n.tfLPToken=65536]="tfLPToken",n[n.tfSingleAsset=524288]="tfSingleAsset",n[n.tfTwoAsset=1048576]="tfTwoAsset",n[n.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",n[n.tfLimitLPToken=4194304]="tfLimitLPToken",n[n.tfTwoAssetIfEmpty=8388608]="tfTwoAssetIfEmpty",n})(ene||(z2.AMMDepositFlags=ene={}));function qEe(n){if((0,Nm.validateBaseTransaction)(n),n.Asset==null)throw new pd.ValidationError("AMMDeposit: missing field Asset");if(!(0,Nm.isIssuedCurrency)(n.Asset))throw new pd.ValidationError("AMMDeposit: Asset must be a Currency");if(n.Asset2==null)throw new pd.ValidationError("AMMDeposit: missing field Asset2");if(!(0,Nm.isIssuedCurrency)(n.Asset2))throw new pd.ValidationError("AMMDeposit: Asset2 must be a Currency");if(n.Amount2!=null&&n.Amount==null)throw new pd.ValidationError("AMMDeposit: must set Amount with Amount2");if(n.EPrice!=null&&n.Amount==null)throw new pd.ValidationError("AMMDeposit: must set Amount with EPrice");if(n.LPTokenOut==null&&n.Amount==null)throw new pd.ValidationError("AMMDeposit: must set at least LPTokenOut or Amount");if(n.LPTokenOut!=null&&!(0,Nm.isIssuedCurrencyAmount)(n.LPTokenOut))throw new pd.ValidationError("AMMDeposit: LPTokenOut must be an IssuedCurrencyAmount");if(n.Amount!=null&&!(0,Nm.isAmount)(n.Amount))throw new pd.ValidationError("AMMDeposit: Amount must be an Amount");if(n.Amount2!=null&&!(0,Nm.isAmount)(n.Amount2))throw new pd.ValidationError("AMMDeposit: Amount2 must be an Amount");if(n.EPrice!=null&&!(0,Nm.isAmount)(n.EPrice))throw new pd.ValidationError("AMMDeposit: EPrice must be an Amount")}z2.validateAMMDeposit=qEe});var wM=me(q2=>{"use strict";Object.defineProperty(q2,"__esModule",{value:!0});q2.validateAMMWithdraw=q2.AMMWithdrawFlags=void 0;var ku=Nt(),Bm=At(),tne=(function(n){return n[n.tfLPToken=65536]="tfLPToken",n[n.tfWithdrawAll=131072]="tfWithdrawAll",n[n.tfOneAssetWithdrawAll=262144]="tfOneAssetWithdrawAll",n[n.tfSingleAsset=524288]="tfSingleAsset",n[n.tfTwoAsset=1048576]="tfTwoAsset",n[n.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",n[n.tfLimitLPToken=4194304]="tfLimitLPToken",n})(tne||(q2.AMMWithdrawFlags=tne={}));function $Ee(n){if((0,Bm.validateBaseTransaction)(n),n.Asset==null)throw new ku.ValidationError("AMMWithdraw: missing field Asset");if(!(0,Bm.isIssuedCurrency)(n.Asset))throw new ku.ValidationError("AMMWithdraw: Asset must be a Currency");if(n.Asset2==null)throw new ku.ValidationError("AMMWithdraw: missing field Asset2");if(!(0,Bm.isIssuedCurrency)(n.Asset2))throw new ku.ValidationError("AMMWithdraw: Asset2 must be a Currency");if(n.Amount2!=null&&n.Amount==null)throw new ku.ValidationError("AMMWithdraw: must set Amount with Amount2");if(n.EPrice!=null&&n.Amount==null)throw new ku.ValidationError("AMMWithdraw: must set Amount with EPrice");if(n.LPTokenIn!=null&&!(0,Bm.isIssuedCurrencyAmount)(n.LPTokenIn))throw new ku.ValidationError("AMMWithdraw: LPTokenIn must be an IssuedCurrencyAmount");if(n.Amount!=null&&!(0,Bm.isAmount)(n.Amount))throw new ku.ValidationError("AMMWithdraw: Amount must be an Amount");if(n.Amount2!=null&&!(0,Bm.isAmount)(n.Amount2))throw new ku.ValidationError("AMMWithdraw: Amount2 must be an Amount");if(n.EPrice!=null&&!(0,Bm.isAmount)(n.EPrice))throw new ku.ValidationError("AMMWithdraw: EPrice must be an Amount")}q2.validateAMMWithdraw=$Ee});var Tw=me($2=>{"use strict";Object.defineProperty($2,"__esModule",{value:!0});$2.validateBatch=$2.BatchFlags=void 0;var SM=Nt(),KEe=Ms(),Fr=At(),nne=(function(n){return n[n.tfAllOrNothing=65536]="tfAllOrNothing",n[n.tfOnlyOne=131072]="tfOnlyOne",n[n.tfUntilFailure=262144]="tfUntilFailure",n[n.tfIndependent=524288]="tfIndependent",n})(nne||($2.BatchFlags=nne={}));function GEe(n,t){if(n.TransactionType==="Batch")throw new SM.ValidationError(`Batch: RawTransactions[${t}] is a Batch transaction. Cannot nest Batch transactions.`);if(!(0,KEe.hasFlag)(n,Fr.GlobalFlags.tfInnerBatchTxn,"tfInnerBatchTxn"))throw new SM.ValidationError(`Batch: RawTransactions[${t}] must contain the \`tfInnerBatchTxn\` flag.`);(0,Fr.validateOptionalField)(n,"Fee",(0,Fr.isValue)("0"),{paramName:`RawTransactions[${t}].RawTransaction.Fee`,txType:"Batch"}),(0,Fr.validateOptionalField)(n,"SigningPubKey",(0,Fr.isValue)(""),{paramName:`RawTransactions[${t}].RawTransaction.SigningPubKey`,txType:"Batch"}),(0,Fr.validateOptionalField)(n,"TxnSignature",Fr.isNull,{paramName:`RawTransactions[${t}].RawTransaction.TxnSignature`,txType:"Batch"}),(0,Fr.validateOptionalField)(n,"Signers",Fr.isNull,{paramName:`RawTransactions[${t}].RawTransaction.Signers`,txType:"Batch"}),(0,Fr.validateOptionalField)(n,"LastLedgerSequence",Fr.isNull,{paramName:`RawTransactions[${t}].RawTransaction.LastLedgerSequence`,txType:"Batch"})}function XEe(n){var t;(0,Fr.validateBaseTransaction)(n),(0,Fr.validateRequiredField)(n,"RawTransactions",Fr.isArray),n.RawTransactions.forEach((e,i)=>{if(!(0,Fr.isRecord)(e))throw new SM.ValidationError(`Batch: RawTransactions[${i}] is not object.`);(0,Fr.validateRequiredField)(e,"RawTransaction",Fr.isRecord,{paramName:`RawTransactions[${i}].RawTransaction`,txType:"Batch"});let r=e.RawTransaction;GEe(r,i)}),(0,Fr.validateOptionalField)(n,"BatchSigners",Fr.isArray),(t=n.BatchSigners)===null||t===void 0||t.forEach((e,i)=>{if(!(0,Fr.isRecord)(e))throw new SM.ValidationError(`Batch: BatchSigners[${i}] is not object.`);let r=e;(0,Fr.validateRequiredField)(r,"BatchSigner",Fr.isRecord,{paramName:`BatchSigners[${i}].BatchSigner`,txType:"Batch"});let o=r.BatchSigner;(0,Fr.validateRequiredField)(o,"Account",Fr.isString,{paramName:`BatchSigners[${i}].BatchSigner.Account`,txType:"Batch"}),(0,Fr.validateOptionalField)(o,"SigningPubKey",Fr.isString,{paramName:`BatchSigners[${i}].BatchSigner.SigningPubKey`,txType:"Batch"}),(0,Fr.validateOptionalField)(o,"TxnSignature",Fr.isString,{paramName:`BatchSigners[${i}].BatchSigner.TxnSignature`,txType:"Batch"}),(0,Fr.validateOptionalField)(o,"Signers",Fr.isArray,{paramName:`BatchSigners[${i}].BatchSigner.Signers`,txType:"Batch"})})}$2.validateBatch=XEe});var xM=me(K2=>{"use strict";Object.defineProperty(K2,"__esModule",{value:!0});K2.validateLoanManage=K2.LoanManageFlags=void 0;var ine=Nt(),CM=At(),wp=(function(n){return n[n.tfLoanDefault=65536]="tfLoanDefault",n[n.tfLoanImpair=131072]="tfLoanImpair",n[n.tfLoanUnimpair=262144]="tfLoanUnimpair",n})(wp||(K2.LoanManageFlags=wp={}));function YEe(n){if((0,CM.validateBaseTransaction)(n),(0,CM.validateRequiredField)(n,"LoanID",CM.isString),!(0,CM.isLedgerEntryId)(n.LoanID))throw new ine.ValidationError("LoanManage: LoanID must be 64 characters hexadecimal string");let t=n.Flags;if(t==null)return;let e=0;if(typeof t=="number"?e=t:(t.tfLoanImpair&&(e|=wp.tfLoanImpair),t.tfLoanUnimpair&&(e|=wp.tfLoanUnimpair)),(e&wp.tfLoanImpair)===wp.tfLoanImpair&&(e&wp.tfLoanUnimpair)===wp.tfLoanUnimpair)throw new ine.ValidationError("LoanManage: tfLoanImpair and tfLoanUnimpair cannot both be present")}K2.validateLoanManage=YEe});var kM=me(G2=>{"use strict";Object.defineProperty(G2,"__esModule",{value:!0});G2.validateMPTokenAuthorize=G2.MPTokenAuthorizeFlags=void 0;var Ew=At(),rne=(function(n){return n[n.tfMPTUnauthorize=1]="tfMPTUnauthorize",n})(rne||(G2.MPTokenAuthorizeFlags=rne={}));function ZEe(n){(0,Ew.validateBaseTransaction)(n),(0,Ew.validateRequiredField)(n,"MPTokenIssuanceID",Ew.isString),(0,Ew.validateOptionalField)(n,"Holder",Ew.isAccount)}G2.validateMPTokenAuthorize=ZEe});var sne=me((A8t,one)=>{"use strict";one.exports=function(n,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var e=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&(function(o){return function(s){return function(a,l){var c={key:a,value:s[a]},d={key:l,value:s[l]};return o(c,d)}}})(t.cmp),r=[];return(function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var a,l;if(Array.isArray(s)){for(l="[",a=0;a<s.length;a++)a&&(l+=","),l+=o(s[a])||"null";return l+"]"}if(s===null)return"null";if(r.indexOf(s)!==-1){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=r.push(s)-1,d=Object.keys(s).sort(i&&i(s));for(l="",a=0;a<d.length;a++){var u=d[a],h=o(s[u]);h&&(l&&(l+=","),l+=JSON.stringify(u)+":"+h)}return r.splice(c,1),"{"+l+"}"}})(n)}});var MM=me(ua=>{"use strict";var QEe=ua&&ua.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ua,"__esModule",{value:!0});ua.validateMPTokenMetadata=ua.decodeMPTokenMetadata=ua.encodeMPTokenMetadata=ua.MPT_META_WARNING_HEADER=ua.MAX_MPT_META_BYTE_LENGTH=void 0;var uO=qi(),JEe=QEe(sne()),ts=At(),ane=Ms();ua.MAX_MPT_META_BYTE_LENGTH=1024;ua.MPT_META_WARNING_HEADER="MPTokenMetadata is not properly formatted as JSON as per the XLS-89 standard. While adherence to this standard is not mandatory, such non-compliant MPToken's might not be discoverable by Explorers and Indexers in the XRPL ecosystem.";var X2=[{long:"uri",compact:"u"},{long:"category",compact:"c"},{long:"title",compact:"t"}],Aw=[{long:"ticker",compact:"t",validate(n){var t;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];let e=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact];return!(0,ts.isString)(e)||!/^[A-Z0-9]{1,6}$/u.test(e)?[`${this.long}/${this.compact}: should have uppercase letters (A-Z) and digits (0-9) only. Max 6 characters recommended.`]:[]}},{long:"name",compact:"n",validate(n){var t;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];let e=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact];return!(0,ts.isString)(e)||e.length===0?[`${this.long}/${this.compact}: should be a non-empty string.`]:[]}},{long:"icon",compact:"i",validate(n){var t;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];let e=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact];return!(0,ts.isString)(e)||e.length===0?[`${this.long}/${this.compact}: should be a non-empty string.`]:[]}},{long:"asset_class",compact:"ac",validate(n){var t;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];let e=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact],i=["rwa","memes","wrapped","gaming","defi","other"];return!(0,ts.isString)(e)||!i.includes(e)?[`${this.long}/${this.compact}: should be one of ${i.join(", ")}.`]:[]}},{long:"issuer_name",compact:"in",validate(n){var t;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];let e=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact];return!(0,ts.isString)(e)||e.length===0?[`${this.long}/${this.compact}: should be a non-empty string.`]:[]}},{long:"desc",compact:"d",validate(n){var t;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];if(n[this.long]===void 0&&n[this.compact]===void 0)return[];let e=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact];return!(0,ts.isString)(e)||e.length===0?[`${this.long}/${this.compact}: should be a non-empty string.`]:[]}},{long:"asset_subclass",compact:"as",required:!1,validate(n){var t;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];let e=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact];if((n.asset_class==="rwa"||n.ac==="rwa")&&e===void 0)return[`${this.long}/${this.compact}: required when asset_class is rwa.`];if(n[this.long]===void 0&&n[this.compact]===void 0)return[];let i=["stablecoin","commodity","real_estate","private_credit","equity","treasury","other"];return!(0,ts.isString)(e)||!i.includes(e)?[`${this.long}/${this.compact}: should be one of ${i.join(", ")}.`]:[]}},{long:"uris",compact:"us",required:!1,validate(n){var t,e,i,r;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];if(n[this.long]===void 0&&n[this.compact]===void 0)return[];let o=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact];if(!Array.isArray(o)||o.length===0)return[`${this.long}/${this.compact}: should be a non-empty array.`];let s=[];for(let a of o){if(!(0,ts.isRecord)(a)||Object.keys(a).length!==X2.length){s.push(`${this.long}/${this.compact}: should be an array of objects each with uri/u, category/c, and title/t properties.`);continue}for(let u of X2)if(a[u.long]!=null&&a[u.compact]!=null){s.push(`${this.long}/${this.compact}: should not have both ${u.long} and ${u.compact} fields.`);break}let l=(e=a.uri)!==null&&e!==void 0?e:a.u,c=(i=a.category)!==null&&i!==void 0?i:a.c,d=(r=a.title)!==null&&r!==void 0?r:a.t;(!(0,ts.isString)(l)||!(0,ts.isString)(c)||!(0,ts.isString)(d))&&s.push(`${this.long}/${this.compact}: should be an array of objects each with uri/u, category/c, and title/t properties.`)}return s}},{long:"additional_info",compact:"ai",required:!1,validate(n){var t;if(n[this.long]!=null&&n[this.compact]!=null)return[`${this.long}/${this.compact}: both long and compact forms present. expected only one.`];if(n[this.long]===void 0&&n[this.compact]===void 0)return[];let e=(t=n[this.long])!==null&&t!==void 0?t:n[this.compact];return!(0,ts.isString)(e)&&!(0,ts.isRecord)(e)?[`${this.long}/${this.compact}: should be a string or JSON object.`]:[]}}];function cO(n,t){let e={};for(let[i,r]of Object.entries(n)){let o=t.find(({long:s,compact:a})=>s===i||a===i);if(o===void 0){e[i]=r;continue}if(n[o.long]!==void 0&&n[o.compact]!==void 0){e[i]=r;continue}e[o.compact]=r}return e}function e8e(n){let t=n;if(!(0,ts.isRecord)(t))throw new Error("MPTokenMetadata must be JSON object.");return t=cO(t,Aw),Array.isArray(t.uris)&&(t.uris=t.uris.map(e=>(0,ts.isRecord)(e)?cO(e,X2):e)),Array.isArray(t.us)&&(t.us=t.us.map(e=>(0,ts.isRecord)(e)?cO(e,X2):e)),(0,uO.stringToHex)((0,JEe.default)(t)).toUpperCase()}ua.encodeMPTokenMetadata=e8e;function dO(n,t){let e={};for(let[i,r]of Object.entries(n)){let o=t.find(({long:s,compact:a})=>s===i||a===i);if(o===void 0){e[i]=r;continue}if(n[o.long]!==void 0&&n[o.compact]!==void 0){e[i]=r;continue}e[o.long]=r}return e}function t8e(n){if(!(0,ane.isHex)(n))throw new Error("MPTokenMetadata must be in hex format.");let t;try{t=JSON.parse((0,uO.hexToString)(n))}catch(i){throw new Error(`MPTokenMetadata is not properly formatted as JSON - ${String(i)}`)}if(!(0,ts.isRecord)(t))throw new Error("MPTokenMetadata must be a JSON object.");let e=t;return e=dO(e,Aw),Array.isArray(e.uris)&&(e.uris=e.uris.map(i=>(0,ts.isRecord)(i)?dO(i,X2):i)),Array.isArray(e.us)&&(e.us=e.us.map(i=>(0,ts.isRecord)(i)?dO(i,X2):i)),e}ua.decodeMPTokenMetadata=t8e;function n8e(n){let t=[];if(!(0,ane.isHex)(n))return t.push("MPTokenMetadata must be in hex format."),t;if(n.length/2>ua.MAX_MPT_META_BYTE_LENGTH)return t.push(`MPTokenMetadata must be max ${ua.MAX_MPT_META_BYTE_LENGTH} bytes.`),t;let e;try{e=JSON.parse((0,uO.hexToString)(n))}catch(r){return t.push(`MPTokenMetadata is not properly formatted as JSON - ${String(r)}`),t}if(!(0,ts.isRecord)(e))return t.push("MPTokenMetadata is not properly formatted JSON object as per XLS-89."),t;Object.keys(e).length>Aw.length&&t.push(`MPTokenMetadata must not contain more than ${Aw.length} top-level fields (found ${Object.keys(e).length}).`);let i=e;for(let r of Aw)t.push(...r.validate(i));return t}ua.validateMPTokenMetadata=n8e});var EM=me(Y2=>{"use strict";Object.defineProperty(Y2,"__esModule",{value:!0});Y2.validateMPTokenIssuanceCreate=Y2.MPTokenIssuanceCreateFlags=void 0;var Dw=Nt(),hO=Ms(),TM=MM(),Wh=At(),i8e="9223372036854775807",lne=5e4,fO=(function(n){return n[n.tfMPTCanLock=2]="tfMPTCanLock",n[n.tfMPTRequireAuth=4]="tfMPTRequireAuth",n[n.tfMPTCanEscrow=8]="tfMPTCanEscrow",n[n.tfMPTCanTrade=16]="tfMPTCanTrade",n[n.tfMPTCanTransfer=32]="tfMPTCanTransfer",n[n.tfMPTCanClawback=64]="tfMPTCanClawback",n})(fO||(Y2.MPTokenIssuanceCreateFlags=fO={}));function r8e(n){var t,e;if((0,Wh.validateBaseTransaction)(n),(0,Wh.validateOptionalField)(n,"MaximumAmount",Wh.isString),(0,Wh.validateOptionalField)(n,"MPTokenMetadata",Wh.isString),(0,Wh.validateOptionalField)(n,"TransferFee",Wh.isNumber),(0,Wh.validateOptionalField)(n,"AssetScale",Wh.isNumber),typeof n.MPTokenMetadata=="string"&&(!(0,hO.isHex)(n.MPTokenMetadata)||n.MPTokenMetadata.length/2>TM.MAX_MPT_META_BYTE_LENGTH))throw new Dw.ValidationError(`MPTokenIssuanceCreate: MPTokenMetadata (hex format) must be non-empty and no more than ${TM.MAX_MPT_META_BYTE_LENGTH} bytes.`);if(typeof n.MaximumAmount=="string")if(hO.INTEGER_SANITY_CHECK.exec(n.MaximumAmount)){if(BigInt(n.MaximumAmount)>BigInt(i8e)||BigInt(n.MaximumAmount)<BigInt("0"))throw new Dw.ValidationError("MPTokenIssuanceCreate: MaximumAmount out of range")}else throw new Dw.ValidationError("MPTokenIssuanceCreate: Invalid MaximumAmount");if(typeof n.TransferFee=="number"){let i=(t=n.Flags)!==null&&t!==void 0?t:0,r=typeof i=="number"?(0,hO.isFlagEnabled)(i,fO.tfMPTCanTransfer):(e=i.tfMPTCanTransfer)!==null&&e!==void 0?e:!1;if(n.TransferFee<0||n.TransferFee>lne)throw new Dw.ValidationError(`MPTokenIssuanceCreate: TransferFee must be between 0 and ${lne}`);if(n.TransferFee&&!r)throw new Dw.ValidationError("MPTokenIssuanceCreate: TransferFee cannot be provided without enabling tfMPTCanTransfer flag")}if(n.MPTokenMetadata!=null){let i=(0,TM.validateMPTokenMetadata)(n.MPTokenMetadata);if(i.length>0){let r=[TM.MPT_META_WARNING_HEADER,...i.map(o=>`- ${o}`)].join(`
`);console.warn(r)}}}Y2.validateMPTokenIssuanceCreate=r8e});var DM=me(Z2=>{"use strict";Object.defineProperty(Z2,"__esModule",{value:!0});Z2.validateMPTokenIssuanceSet=Z2.MPTokenIssuanceSetFlags=void 0;var o8e=Nt(),cne=Ms(),Iw=At(),AM=(function(n){return n[n.tfMPTLock=1]="tfMPTLock",n[n.tfMPTUnlock=2]="tfMPTUnlock",n})(AM||(Z2.MPTokenIssuanceSetFlags=AM={}));function s8e(n){var t,e,i;(0,Iw.validateBaseTransaction)(n),(0,Iw.validateRequiredField)(n,"MPTokenIssuanceID",Iw.isString),(0,Iw.validateOptionalField)(n,"Holder",Iw.isAccount);let r=(t=n.Flags)!==null&&t!==void 0?t:0,o=typeof r=="number"?(0,cne.isFlagEnabled)(r,AM.tfMPTLock):(e=r.tfMPTLock)!==null&&e!==void 0?e:!1,s=typeof r=="number"?(0,cne.isFlagEnabled)(r,AM.tfMPTUnlock):(i=r.tfMPTUnlock)!==null&&i!==void 0?i:!1;if(o&&s)throw new o8e.ValidationError("MPTokenIssuanceSet: flag conflict")}Z2.validateMPTokenIssuanceSet=s8e});var IM=me(Q2=>{"use strict";Object.defineProperty(Q2,"__esModule",{value:!0});Q2.validateNFTokenCreateOffer=Q2.NFTokenCreateOfferFlags=void 0;var Um=Nt(),a8e=Ms(),Vm=At(),pO=(function(n){return n[n.tfSellNFToken=1]="tfSellNFToken",n})(pO||(Q2.NFTokenCreateOfferFlags=pO={}));function l8e(n){if(n.Owner!=null)throw new Um.ValidationError("NFTokenCreateOffer: Owner must not be present for sell offers")}function c8e(n){if(n.Owner==null)throw new Um.ValidationError("NFTokenCreateOffer: Owner must be present for buy offers");if((0,Vm.parseAmountValue)(n.Amount)<=0)throw new Um.ValidationError("NFTokenCreateOffer: Amount must be greater than 0 for buy offers")}function d8e(n){var t,e;if((0,Vm.validateBaseTransaction)(n),n.Account===n.Owner)throw new Um.ValidationError("NFTokenCreateOffer: Owner and Account must not be equal");if(n.Account===n.Destination)throw new Um.ValidationError("NFTokenCreateOffer: Destination and Account must not be equal");if((0,Vm.validateOptionalField)(n,"Destination",Vm.isAccount),(0,Vm.validateOptionalField)(n,"Owner",Vm.isAccount),n.NFTokenID==null)throw new Um.ValidationError("NFTokenCreateOffer: missing field NFTokenID");if(!(0,Vm.isAmount)(n.Amount))throw new Um.ValidationError("NFTokenCreateOffer: invalid Amount");let i=(t=n.Flags)!==null&&t!==void 0?t:0;(typeof i=="number"?(0,a8e.isFlagEnabled)(i,pO.tfSellNFToken):(e=i.tfSellNFToken)!==null&&e!==void 0?e:!1)?l8e(n):c8e(n)}Q2.validateNFTokenCreateOffer=d8e});var FM=me(J2=>{"use strict";Object.defineProperty(J2,"__esModule",{value:!0});J2.validateNFTokenMint=J2.NFTokenMintFlags=void 0;var Fw=Nt(),u8e=Ms(),zh=At(),dne=(function(n){return n[n.tfBurnable=1]="tfBurnable",n[n.tfOnlyXRP=2]="tfOnlyXRP",n[n.tfTrustLine=4]="tfTrustLine",n[n.tfTransferable=8]="tfTransferable",n[n.tfMutable=16]="tfMutable",n})(dne||(J2.NFTokenMintFlags=dne={}));function h8e(n){if((0,zh.validateBaseTransaction)(n),n.Account===n.Issuer)throw new Fw.ValidationError("NFTokenMint: Issuer must not be equal to Account");if((0,zh.validateOptionalField)(n,"Issuer",zh.isAccount),typeof n.URI=="string"&&n.URI==="")throw new Fw.ValidationError("NFTokenMint: URI must not be empty string");if(typeof n.URI=="string"&&!(0,u8e.isHex)(n.URI))throw new Fw.ValidationError("NFTokenMint: URI must be in hex format");if(n.NFTokenTaxon==null)throw new Fw.ValidationError("NFTokenMint: missing field NFTokenTaxon");if(n.Amount==null&&(n.Expiration!=null||n.Destination!=null))throw new Fw.ValidationError("NFTokenMint: Amount is required when Expiration or Destination is present");(0,zh.validateOptionalField)(n,"Amount",zh.isAmount),(0,zh.validateOptionalField)(n,"Expiration",zh.isNumber),(0,zh.validateOptionalField)(n,"Destination",zh.isAccount)}J2.validateNFTokenMint=h8e});var PM=me(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.validateOfferCreate=ey.OfferCreateFlags=void 0;var jm=Nt(),f8e=Ms(),Pw=At(),mO=(function(n){return n[n.tfPassive=65536]="tfPassive",n[n.tfImmediateOrCancel=131072]="tfImmediateOrCancel",n[n.tfFillOrKill=262144]="tfFillOrKill",n[n.tfSell=524288]="tfSell",n[n.tfHybrid=1048576]="tfHybrid",n})(mO||(ey.OfferCreateFlags=mO={}));function p8e(n){if((0,Pw.validateBaseTransaction)(n),n.TakerGets===void 0)throw new jm.ValidationError("OfferCreate: missing field TakerGets");if(n.TakerPays===void 0)throw new jm.ValidationError("OfferCreate: missing field TakerPays");if(typeof n.TakerGets!="string"&&!(0,Pw.isAmount)(n.TakerGets))throw new jm.ValidationError("OfferCreate: invalid TakerGets");if(typeof n.TakerPays!="string"&&!(0,Pw.isAmount)(n.TakerPays))throw new jm.ValidationError("OfferCreate: invalid TakerPays");if(n.Expiration!==void 0&&typeof n.Expiration!="number")throw new jm.ValidationError("OfferCreate: invalid Expiration");if(n.OfferSequence!==void 0&&typeof n.OfferSequence!="number")throw new jm.ValidationError("OfferCreate: invalid OfferSequence");if((0,Pw.validateOptionalField)(n,"DomainID",Pw.isDomainID,{txType:"OfferCreate",paramName:"DomainID"}),n.DomainID==null&&(0,f8e.hasFlag)(n,mO.tfHybrid,"tfHybrid"))throw new jm.ValidationError("OfferCreate: tfHybrid flag cannot be set if DomainID is not present")}ey.validateOfferCreate=p8e});var LM=me(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.validatePayment=ty.PaymentFlags=void 0;var Sp=Nt(),m8e=Ms(),yl=At(),gO=(function(n){return n[n.tfNoRippleDirect=65536]="tfNoRippleDirect",n[n.tfPartialPayment=131072]="tfPartialPayment",n[n.tfLimitQuality=262144]="tfLimitQuality",n})(gO||(ty.PaymentFlags=gO={}));function g8e(n){if((0,yl.validateBaseTransaction)(n),n.Amount===void 0)throw new Sp.ValidationError("PaymentTransaction: missing field Amount");if(!(0,yl.isAmount)(n.Amount))throw new Sp.ValidationError("PaymentTransaction: invalid Amount");if((0,yl.validateRequiredField)(n,"Destination",yl.isAccount),(0,yl.validateOptionalField)(n,"DestinationTag",yl.isNumber),(0,yl.validateCredentialsList)(n.CredentialIDs,n.TransactionType,!0,yl.MAX_AUTHORIZED_CREDENTIALS),n.InvoiceID!==void 0&&typeof n.InvoiceID!="string")throw new Sp.ValidationError("PaymentTransaction: InvoiceID must be a string");if((0,yl.validateOptionalField)(n,"DomainID",yl.isDomainID,{txType:"PaymentTransaction",paramName:"DomainID"}),n.Paths!==void 0&&!b8e(n.Paths))throw new Sp.ValidationError("PaymentTransaction: invalid Paths");if(n.SendMax!==void 0&&!(0,yl.isAmount)(n.SendMax))throw new Sp.ValidationError("PaymentTransaction: invalid SendMax");y8e(n)}ty.validatePayment=g8e;function y8e(n){var t;if(n.DeliverMin!=null){if(n.Flags==null)throw new Sp.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");let e=n.Flags;if(!(typeof e=="number"?(0,m8e.isFlagEnabled)(e,gO.tfPartialPayment):(t=e.tfPartialPayment)!==null&&t!==void 0?t:!1))throw new Sp.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");if(!(0,yl.isAmount)(n.DeliverMin))throw new Sp.ValidationError("PaymentTransaction: invalid DeliverMin")}}function v8e(n){return n.account!==void 0&&typeof n.account!="string"||n.currency!==void 0&&typeof n.currency!="string"||n.issuer!==void 0&&typeof n.issuer!="string"?!1:n.account!==void 0&&n.currency===void 0&&n.issuer===void 0||n.currency!==void 0||n.issuer!==void 0}function _8e(n){if(!Array.isArray(n)||n.length===0)return!1;for(let t of n)if(!v8e(t))return!1;return!0}function b8e(n){if(!(0,yl.isArray)(n)||n.length===0)return!1;for(let t of n)if(!(0,yl.isArray)(t)||t.length===0||!_8e(t))return!1;return!0}});var RM=me(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});iy.validatePaymentChannelClaim=iy.PaymentChannelClaimFlags=void 0;var ny=Nt(),yO=At(),une=(function(n){return n[n.tfRenew=65536]="tfRenew",n[n.tfClose=131072]="tfClose",n})(une||(iy.PaymentChannelClaimFlags=une={}));function w8e(n){if((0,yO.validateBaseTransaction)(n),(0,yO.validateCredentialsList)(n.CredentialIDs,n.TransactionType,!0,yO.MAX_AUTHORIZED_CREDENTIALS),n.Channel===void 0)throw new ny.ValidationError("PaymentChannelClaim: missing Channel");if(typeof n.Channel!="string")throw new ny.ValidationError("PaymentChannelClaim: Channel must be a string");if(n.Balance!==void 0&&typeof n.Balance!="string")throw new ny.ValidationError("PaymentChannelClaim: Balance must be a string");if(n.Amount!==void 0&&typeof n.Amount!="string")throw new ny.ValidationError("PaymentChannelClaim: Amount must be a string");if(n.Signature!==void 0&&typeof n.Signature!="string")throw new ny.ValidationError("PaymentChannelClaim: Signature must be a string");if(n.PublicKey!==void 0&&typeof n.PublicKey!="string")throw new ny.ValidationError("PaymentChannelClaim: PublicKey must be a string")}iy.validatePaymentChannelClaim=w8e});var NM=me(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.validateTrustSet=ry.TrustSetFlags=void 0;var OM=Nt(),hne=At(),fne=(function(n){return n[n.tfSetfAuth=65536]="tfSetfAuth",n[n.tfSetNoRipple=131072]="tfSetNoRipple",n[n.tfClearNoRipple=262144]="tfClearNoRipple",n[n.tfSetFreeze=1048576]="tfSetFreeze",n[n.tfClearFreeze=2097152]="tfClearFreeze",n[n.tfSetDeepFreeze=4194304]="tfSetDeepFreeze",n[n.tfClearDeepFreeze=8388608]="tfClearDeepFreeze",n})(fne||(ry.TrustSetFlags=fne={}));function S8e(n){(0,hne.validateBaseTransaction)(n);let{LimitAmount:t,QualityIn:e,QualityOut:i}=n;if(t===void 0)throw new OM.ValidationError("TrustSet: missing field LimitAmount");if(!(0,hne.isAmount)(t))throw new OM.ValidationError("TrustSet: invalid LimitAmount");if(e!==void 0&&typeof e!="number")throw new OM.ValidationError("TrustSet: QualityIn must be a number");if(i!==void 0&&typeof i!="number")throw new OM.ValidationError("TrustSet: QualityOut must be a number")}ry.validateTrustSet=S8e});var VM=me(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.validateVaultCreate=Cp.VaultCreateFlags=Cp.VaultWithdrawalPolicy=void 0;var Lw=Nt(),vO=Ms(),BM=MM(),za=At(),pne=(function(n){return n[n.vaultStrategyFirstComeFirstServe=1]="vaultStrategyFirstComeFirstServe",n})(pne||(Cp.VaultWithdrawalPolicy=pne={})),_O=(function(n){return n[n.tfVaultPrivate=65536]="tfVaultPrivate",n[n.tfVaultShareNonTransferable=131072]="tfVaultShareNonTransferable",n})(_O||(Cp.VaultCreateFlags=_O={}));function C8e(n){if((0,za.validateBaseTransaction)(n),(0,za.validateRequiredField)(n,"Asset",za.isCurrency),(0,za.validateOptionalField)(n,"Data",za.isString),(0,za.validateOptionalField)(n,"AssetsMaximum",za.isXRPLNumber),(0,za.validateOptionalField)(n,"MPTokenMetadata",za.isString),(0,za.validateOptionalField)(n,"WithdrawalPolicy",za.isNumber),(0,za.validateOptionalField)(n,"DomainID",za.isString),n.Data!==void 0){let t=n.Data;if(!(0,vO.isHex)(t))throw new Lw.ValidationError("VaultCreate: Data must be a valid hex string");let e=t.length/2;if(e>za.VAULT_DATA_MAX_BYTE_LENGTH)throw new Lw.ValidationError(`VaultCreate: Data exceeds ${za.VAULT_DATA_MAX_BYTE_LENGTH} bytes (actual: ${e})`)}if(n.MPTokenMetadata!==void 0){let t=n.MPTokenMetadata;if(!(0,vO.isHex)(t))throw new Lw.ValidationError("VaultCreate: MPTokenMetadata must be a valid non-empty hex string");let e=t.length/2;if(e>BM.MAX_MPT_META_BYTE_LENGTH)throw new Lw.ValidationError(`VaultCreate: MPTokenMetadata exceeds ${BM.MAX_MPT_META_BYTE_LENGTH} bytes (actual: ${e})`)}if(n.DomainID!==void 0&&!(0,vO.hasFlag)(n,_O.tfVaultPrivate,"tfVaultPrivate"))throw new Lw.ValidationError("VaultCreate: Cannot set DomainID unless tfVaultPrivate flag is set.");if(n.MPTokenMetadata!=null){let t=(0,BM.validateMPTokenMetadata)(n.MPTokenMetadata);if(t.length>0){let e=[BM.MPT_META_WARNING_HEADER,...t.map(i=>`- ${i}`)].join(`
`);console.warn(e)}}}Cp.validateVaultCreate=C8e});var UM=me(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.validateXChainModifyBridge=oy.XChainModifyBridgeFlags=void 0;var Hm=At(),mne=(function(n){return n[n.tfClearAccountCreateAmount=65536]="tfClearAccountCreateAmount",n})(mne||(oy.XChainModifyBridgeFlags=mne={}));function x8e(n){(0,Hm.validateBaseTransaction)(n),(0,Hm.validateRequiredField)(n,"XChainBridge",Hm.isXChainBridge),(0,Hm.validateOptionalField)(n,"SignatureReward",Hm.isAmount),(0,Hm.validateOptionalField)(n,"MinAccountCreateAmount",Hm.isAmount)}oy.validateXChainModifyBridge=x8e});var jM=me(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.parseTransactionFlags=Mu.convertTxFlagsToNumber=Mu.setTransactionFlagsToNumber=Mu.parseAccountRootFlags=void 0;var gne=Nt(),yne=qL(),k8e=yM(),M8e=_M(),T8e=bM(),E8e=wM(),A8e=Tw(),Wm=At(),D8e=xM(),I8e=kM(),F8e=EM(),P8e=DM(),L8e=IM(),R8e=FM(),O8e=PM(),N8e=LM(),B8e=RM(),V8e=NM(),U8e=VM(),j8e=UM(),bO=Ms();function H8e(n){let t={};return Object.values(yne.AccountRootFlags).forEach(e=>{typeof e=="string"&&(0,bO.isFlagEnabled)(n,yne.AccountRootFlags[e])&&(t[e]=!0)}),t}Mu.parseAccountRootFlags=H8e;var wO={AccountSet:k8e.AccountSetTfFlags,AMMClawback:M8e.AMMClawbackFlags,AMMDeposit:T8e.AMMDepositFlags,AMMWithdraw:E8e.AMMWithdrawFlags,Batch:A8e.BatchFlags,LoanManage:D8e.LoanManageFlags,MPTokenAuthorize:I8e.MPTokenAuthorizeFlags,MPTokenIssuanceCreate:F8e.MPTokenIssuanceCreateFlags,MPTokenIssuanceSet:P8e.MPTokenIssuanceSetFlags,NFTokenCreateOffer:L8e.NFTokenCreateOfferFlags,NFTokenMint:R8e.NFTokenMintFlags,OfferCreate:O8e.OfferCreateFlags,PaymentChannelClaim:B8e.PaymentChannelClaimFlags,Payment:N8e.PaymentFlags,TrustSet:V8e.TrustSetFlags,VaultCreate:U8e.VaultCreateFlags,XChainModifyBridge:j8e.XChainModifyBridgeFlags};function vne(n){return n in wO}function W8e(n){console.warn("This function is deprecated. Use convertTxFlagsToNumber() instead and use the returned value to modify the Transaction.Flags from the caller."),n.Flags&&(n.Flags=SO(n))}Mu.setTransactionFlagsToNumber=W8e;function SO(n){let t=n.Flags;if(t==null)return 0;if(typeof t=="number")return t;if(vne(n.TransactionType)){let e=wO[n.TransactionType];return Object.keys(t).reduce((i,r)=>{var o;if(e[r]==null&&Wm.GlobalFlags[r]==null)throw new gne.ValidationError(`Invalid flag ${r}.`);return t[r]?i|((o=e[r])!==null&&o!==void 0?o:Wm.GlobalFlags[r]):i},0)}return Object.keys(t).reduce((e,i)=>{if(Wm.GlobalFlags[i]==null)throw new gne.ValidationError(`Invalid flag ${i}. Valid flags are ${JSON.stringify(Wm.GlobalFlags)}`);return t[i]?e|Wm.GlobalFlags[i]:e},0)}Mu.convertTxFlagsToNumber=SO;function z8e(n){let t=SO(n);if(t===0)return{};let e={};if(vne(n.TransactionType)){let i=wO[n.TransactionType];Object.values(i).forEach(r=>{typeof r=="string"&&(0,bO.isFlagEnabled)(t,i[r])&&(e[r]=!0)})}return Object.values(Wm.GlobalFlags).forEach(i=>{typeof i=="string"&&(0,bO.isFlagEnabled)(t,Wm.GlobalFlags[i])&&(e[i]=!0)}),e}Mu.parseTransactionFlags=z8e});var xO=me(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.ripemd160=vl.RIPEMD160=vl.md5=vl.MD5=vl.sha1=vl.SHA1=void 0;var zm=rR(),js=ja(),sy=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),xp=new Uint32Array(80),zM=class extends zm.HashMD{constructor(){super(64,20,8,!1),this.A=sy[0]|0,this.B=sy[1]|0,this.C=sy[2]|0,this.D=sy[3]|0,this.E=sy[4]|0}get(){let{A:t,B:e,C:i,D:r,E:o}=this;return[t,e,i,r,o]}set(t,e,i,r,o){this.A=t|0,this.B=e|0,this.C=i|0,this.D=r|0,this.E=o|0}process(t,e){for(let l=0;l<16;l++,e+=4)xp[l]=t.getUint32(e,!1);for(let l=16;l<80;l++)xp[l]=(0,js.rotl)(xp[l-3]^xp[l-8]^xp[l-14]^xp[l-16],1);let{A:i,B:r,C:o,D:s,E:a}=this;for(let l=0;l<80;l++){let c,d;l<20?(c=(0,zm.Chi)(r,o,s),d=1518500249):l<40?(c=r^o^s,d=1859775393):l<60?(c=(0,zm.Maj)(r,o,s),d=2400959708):(c=r^o^s,d=3395469782);let u=(0,js.rotl)(i,5)+c+a+d+xp[l]|0;a=s,s=o,o=(0,js.rotl)(r,30),r=i,i=u}i=i+this.A|0,r=r+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,this.set(i,r,o,s,a)}roundClean(){(0,js.clean)(xp)}destroy(){this.set(0,0,0,0,0),(0,js.clean)(this.buffer)}};vl.SHA1=zM;vl.sha1=(0,js.createHasher)(()=>new zM);var q8e=Math.pow(2,32),$8e=Array.from({length:64},(n,t)=>Math.floor(q8e*Math.abs(Math.sin(t+1)))),HM=sy.slice(0,4),CO=new Uint32Array(16),qM=class extends zm.HashMD{constructor(){super(64,16,8,!0),this.A=HM[0]|0,this.B=HM[1]|0,this.C=HM[2]|0,this.D=HM[3]|0}get(){let{A:t,B:e,C:i,D:r}=this;return[t,e,i,r]}set(t,e,i,r){this.A=t|0,this.B=e|0,this.C=i|0,this.D=r|0}process(t,e){for(let a=0;a<16;a++,e+=4)CO[a]=t.getUint32(e,!0);let{A:i,B:r,C:o,D:s}=this;for(let a=0;a<64;a++){let l,c,d;a<16?(l=(0,zm.Chi)(r,o,s),c=a,d=[7,12,17,22]):a<32?(l=(0,zm.Chi)(s,r,o),c=(5*a+1)%16,d=[5,9,14,20]):a<48?(l=r^o^s,c=(3*a+5)%16,d=[4,11,16,23]):(l=o^(r|~s),c=7*a%16,d=[6,10,15,21]),l=l+i+$8e[a]+CO[c],i=s,s=o,o=r,r=r+(0,js.rotl)(l,d[a%4])}i=i+this.A|0,r=r+this.B|0,o=o+this.C|0,s=s+this.D|0,this.set(i,r,o,s)}roundClean(){(0,js.clean)(CO)}destroy(){this.set(0,0,0,0),(0,js.clean)(this.buffer)}};vl.MD5=qM;vl.md5=(0,js.createHasher)(()=>new qM);var K8e=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),bne=Uint8Array.from(new Array(16).fill(0).map((n,t)=>t)),G8e=bne.map(n=>(9*n+5)%16),wne=(()=>{let e=[[bne],[G8e]];for(let i=0;i<4;i++)for(let r of e)r.push(r[i].map(o=>K8e[o]));return e})(),Sne=wne[0],Cne=wne[1],xne=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>Uint8Array.from(n)),X8e=Sne.map((n,t)=>n.map(e=>xne[t][e])),Y8e=Cne.map((n,t)=>n.map(e=>xne[t][e])),Z8e=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),Q8e=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function _ne(n,t,e,i){return n===0?t^e^i:n===1?t&e|~t&i:n===2?(t|~e)^i:n===3?t&i|e&~i:t^(e|~i)}var WM=new Uint32Array(16),$M=class extends zm.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:e,h2:i,h3:r,h4:o}=this;return[t,e,i,r,o]}set(t,e,i,r,o){this.h0=t|0,this.h1=e|0,this.h2=i|0,this.h3=r|0,this.h4=o|0}process(t,e){for(let f=0;f<16;f++,e+=4)WM[f]=t.getUint32(e,!0);let i=this.h0|0,r=i,o=this.h1|0,s=o,a=this.h2|0,l=a,c=this.h3|0,d=c,u=this.h4|0,h=u;for(let f=0;f<5;f++){let p=4-f,y=Z8e[f],v=Q8e[f],b=Sne[f],S=Cne[f],x=X8e[f],k=Y8e[f];for(let L=0;L<16;L++){let D=(0,js.rotl)(i+_ne(f,o,a,c)+WM[b[L]]+y,x[L])+u|0;i=u,u=c,c=(0,js.rotl)(a,10)|0,a=o,o=D}for(let L=0;L<16;L++){let D=(0,js.rotl)(r+_ne(p,s,l,d)+WM[S[L]]+v,k[L])+h|0;r=h,h=d,d=(0,js.rotl)(l,10)|0,l=s,s=D}}this.set(this.h1+a+d|0,this.h2+c+h|0,this.h3+u+r|0,this.h4+i+s|0,this.h0+o+l|0)}roundClean(){(0,js.clean)(WM)}destroy(){this.destroyed=!0,(0,js.clean)(this.buffer),this.set(0,0,0,0,0)}};vl.RIPEMD160=$M;vl.ripemd160=(0,js.createHasher)(()=>new $M)});var Mne=me(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.ripemd160=ay.RIPEMD160=void 0;var kne=xO();ay.RIPEMD160=kne.RIPEMD160;ay.ripemd160=kne.ripemd160});var Tne=me(ly=>{"use strict";var J8e=ly&&ly.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ly,"__esModule",{value:!0});ly.ripemd160=void 0;var eAe=Mne(),tAe=J8e(w4());ly.ripemd160=(0,tAe.default)(eAe.ripemd160)});var KM=me($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});$m.hmac=$m.HMAC=void 0;var qm=ja(),Rw=class extends qm.Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,qm.ahash)(t);let i=(0,qm.toBytes)(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let r=this.blockLen,o=new Uint8Array(r);o.set(i.length>r?t.create().update(i).digest():i);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),(0,qm.clean)(o)}update(t){return(0,qm.aexists)(this),this.iHash.update(t),this}digestInto(t){(0,qm.aexists)(this),(0,qm.abytes)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:i,finished:r,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};$m.HMAC=Rw;var nAe=(n,t,e)=>new Rw(n,t).update(e).digest();$m.hmac=nAe;$m.hmac.create=(n,t)=>new Rw(n,t)});var Eu=me(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.notImplemented=ti.bitMask=ti.utf8ToBytes=ti.randomBytes=ti.isBytes=ti.hexToBytes=ti.concatBytes=ti.bytesToUtf8=ti.bytesToHex=ti.anumber=ti.abytes=void 0;ti.abool=iAe;ti._abool2=rAe;ti._abytes2=oAe;ti.numberToHexUnpadded=Ene;ti.hexToNumber=MO;ti.bytesToNumberBE=sAe;ti.bytesToNumberLE=aAe;ti.numberToBytesBE=Ane;ti.numberToBytesLE=lAe;ti.numberToVarBytesBE=cAe;ti.ensureBytes=dAe;ti.equalBytes=uAe;ti.copyBytes=hAe;ti.asciiToBytes=fAe;ti.inRange=Dne;ti.aInRange=pAe;ti.bitLen=mAe;ti.bitGet=gAe;ti.bitSet=yAe;ti.createHmacDrbg=_Ae;ti.validateObject=wAe;ti.isHash=SAe;ti._validateObject=CAe;ti.memoized=kAe;var Tu=ja(),qh=ja();Object.defineProperty(ti,"abytes",{enumerable:!0,get:function(){return qh.abytes}});Object.defineProperty(ti,"anumber",{enumerable:!0,get:function(){return qh.anumber}});Object.defineProperty(ti,"bytesToHex",{enumerable:!0,get:function(){return qh.bytesToHex}});Object.defineProperty(ti,"bytesToUtf8",{enumerable:!0,get:function(){return qh.bytesToUtf8}});Object.defineProperty(ti,"concatBytes",{enumerable:!0,get:function(){return qh.concatBytes}});Object.defineProperty(ti,"hexToBytes",{enumerable:!0,get:function(){return qh.hexToBytes}});Object.defineProperty(ti,"isBytes",{enumerable:!0,get:function(){return qh.isBytes}});Object.defineProperty(ti,"randomBytes",{enumerable:!0,get:function(){return qh.randomBytes}});Object.defineProperty(ti,"utf8ToBytes",{enumerable:!0,get:function(){return qh.utf8ToBytes}});var GM=BigInt(0),Ow=BigInt(1);function iAe(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function rAe(n,t=""){if(typeof n!="boolean"){let e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function oAe(n,t,e=""){let i=(0,Tu.isBytes)(n),r=n?.length,o=t!==void 0;if(!i||o&&r!==t){let s=e&&`"${e}" `,a=o?` of length ${t}`:"",l=i?`length=${r}`:`type=${typeof n}`;throw new Error(s+"expected Uint8Array"+a+", got "+l)}return n}function Ene(n){let t=n.toString(16);return t.length&1?"0"+t:t}function MO(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?GM:BigInt("0x"+n)}function sAe(n){return MO((0,Tu.bytesToHex)(n))}function aAe(n){return(0,Tu.abytes)(n),MO((0,Tu.bytesToHex)(Uint8Array.from(n).reverse()))}function Ane(n,t){return(0,Tu.hexToBytes)(n.toString(16).padStart(t*2,"0"))}function lAe(n,t){return Ane(n,t).reverse()}function cAe(n){return(0,Tu.hexToBytes)(Ene(n))}function dAe(n,t,e){let i;if(typeof t=="string")try{i=(0,Tu.hexToBytes)(t)}catch(o){throw new Error(n+" must be hex string or Uint8Array, cause: "+o)}else if((0,Tu.isBytes)(t))i=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");let r=i.length;if(typeof e=="number"&&r!==e)throw new Error(n+" of length "+e+" expected, got "+r);return i}function uAe(n,t){if(n.length!==t.length)return!1;let e=0;for(let i=0;i<n.length;i++)e|=n[i]^t[i];return e===0}function hAe(n){return Uint8Array.from(n)}function fAe(n){return Uint8Array.from(n,(t,e)=>{let i=t.charCodeAt(0);if(t.length!==1||i>127)throw new Error(`string contains non-ASCII character "${n[e]}" with code ${i} at position ${e}`);return i})}var kO=n=>typeof n=="bigint"&&GM<=n;function Dne(n,t,e){return kO(n)&&kO(t)&&kO(e)&&t<=n&&n<e}function pAe(n,t,e,i){if(!Dne(t,e,i))throw new Error("expected valid "+n+": "+e+" <= n < "+i+", got "+t)}function mAe(n){let t;for(t=0;n>GM;n>>=Ow,t+=1);return t}function gAe(n,t){return n>>BigInt(t)&Ow}function yAe(n,t,e){return n|(e?Ow:GM)<<BigInt(t)}var vAe=n=>(Ow<<BigInt(n))-Ow;ti.bitMask=vAe;function _Ae(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let i=f=>new Uint8Array(f),r=f=>Uint8Array.of(f),o=i(n),s=i(n),a=0,l=()=>{o.fill(1),s.fill(0),a=0},c=(...f)=>e(s,o,...f),d=(f=i(0))=>{s=c(r(0),f),o=c(),f.length!==0&&(s=c(r(1),f),o=c())},u=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,p=[];for(;f<t;){o=c();let y=o.slice();p.push(y),f+=o.length}return(0,Tu.concatBytes)(...p)};return(f,p)=>{l(),d(f);let y;for(;!(y=p(u()));)d();return l(),y}}var bAe={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||(0,Tu.isBytes)(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function wAe(n,t,e={}){let i=(r,o,s)=>{let a=bAe[o];if(typeof a!="function")throw new Error("invalid validator function");let l=n[r];if(!(s&&l===void 0)&&!a(l,n))throw new Error("param "+String(r)+" is invalid. Expected "+o+", got "+l)};for(let[r,o]of Object.entries(t))i(r,o,!1);for(let[r,o]of Object.entries(e))i(r,o,!0);return n}function SAe(n){return typeof n=="function"&&Number.isSafeInteger(n.outputLen)}function CAe(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function i(r,o,s){let a=n[r];if(s&&a===void 0)return;let l=typeof a;if(l!==o||a===null)throw new Error(`param "${r}" is invalid: expected ${o}, got ${l}`)}Object.entries(t).forEach(([r,o])=>i(r,o,!1)),Object.entries(e).forEach(([r,o])=>i(r,o,!0))}var xAe=()=>{throw new Error("not implemented")};ti.notImplemented=xAe;function kAe(n){let t=new WeakMap;return(e,...i)=>{let r=t.get(e);if(r!==void 0)return r;let o=n(e,...i);return t.set(e,o),o}}});var $h=me(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.isNegativeLE=void 0;_o.mod=_l;_o.pow=EAe;_o.pow2=AAe;_o.invert=XM;_o.tonelliShanks=EO;_o.FpSqrt=Nne;_o.validateField=LAe;_o.FpPow=AO;_o.FpInvertBatch=Bne;_o.FpDiv=RAe;_o.FpLegendre=YM;_o.FpIsSquare=OAe;_o.nLength=DO;_o.Field=ZM;_o.FpSqrtOdd=NAe;_o.FpSqrtEven=BAe;_o.hashToPrivateScalar=VAe;_o.getFieldBytesLength=IO;_o.getMinHashLength=Vne;_o.mapHashToField=UAe;var bl=Eu(),qa=BigInt(0),ns=BigInt(1),Km=BigInt(2),Ine=BigInt(3),Fne=BigInt(4),Pne=BigInt(5),MAe=BigInt(7),Lne=BigInt(8),TAe=BigInt(9),Rne=BigInt(16);function _l(n,t){let e=n%t;return e>=qa?e:t+e}function EAe(n,t,e){return AO(ZM(e),n,t)}function AAe(n,t,e){let i=n;for(;t-- >qa;)i*=i,i%=e;return i}function XM(n,t){if(n===qa)throw new Error("invert: expected non-zero number");if(t<=qa)throw new Error("invert: expected positive modulus, got "+t);let e=_l(n,t),i=t,r=qa,o=ns,s=ns,a=qa;for(;e!==qa;){let c=i/e,d=i%e,u=r-s*c,h=o-a*c;i=e,e=d,r=s,o=a,s=u,a=h}if(i!==ns)throw new Error("invert: does not exist");return _l(r,t)}function TO(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function One(n,t){let e=(n.ORDER+ns)/Fne,i=n.pow(t,e);return TO(n,i,t),i}function DAe(n,t){let e=(n.ORDER-Pne)/Lne,i=n.mul(t,Km),r=n.pow(i,e),o=n.mul(t,r),s=n.mul(n.mul(o,Km),r),a=n.mul(o,n.sub(s,n.ONE));return TO(n,a,t),a}function IAe(n){let t=ZM(n),e=EO(n),i=e(t,t.neg(t.ONE)),r=e(t,i),o=e(t,t.neg(i)),s=(n+MAe)/Rne;return(a,l)=>{let c=a.pow(l,s),d=a.mul(c,i),u=a.mul(c,r),h=a.mul(c,o),f=a.eql(a.sqr(d),l),p=a.eql(a.sqr(u),l);c=a.cmov(c,d,f),d=a.cmov(h,u,p);let y=a.eql(a.sqr(d),l),v=a.cmov(c,d,y);return TO(a,v,l),v}}function EO(n){if(n<Ine)throw new Error("sqrt is not defined for small field");let t=n-ns,e=0;for(;t%Km===qa;)t/=Km,e++;let i=Km,r=ZM(n);for(;YM(r,i)===1;)if(i++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return One;let o=r.pow(i,t),s=(t+ns)/Km;return function(l,c){if(l.is0(c))return c;if(YM(l,c)!==1)throw new Error("Cannot find square root");let d=e,u=l.mul(l.ONE,o),h=l.pow(c,t),f=l.pow(c,s);for(;!l.eql(h,l.ONE);){if(l.is0(h))return l.ZERO;let p=1,y=l.sqr(h);for(;!l.eql(y,l.ONE);)if(p++,y=l.sqr(y),p===d)throw new Error("Cannot find square root");let v=ns<<BigInt(d-p-1),b=l.pow(u,v);d=p,u=l.sqr(b),h=l.mul(h,u),f=l.mul(f,b)}return f}}function Nne(n){return n%Fne===Ine?One:n%Lne===Pne?DAe:n%Rne===TAe?IAe(n):EO(n)}var FAe=(n,t)=>(_l(n,t)&ns)===ns;_o.isNegativeLE=FAe;var PAe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function LAe(n){let t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=PAe.reduce((i,r)=>(i[r]="function",i),t);return(0,bl._validateObject)(n,e),n}function AO(n,t,e){if(e<qa)throw new Error("invalid exponent, negatives unsupported");if(e===qa)return n.ONE;if(e===ns)return t;let i=n.ONE,r=t;for(;e>qa;)e&ns&&(i=n.mul(i,r)),r=n.sqr(r),e>>=ns;return i}function Bne(n,t,e=!1){let i=new Array(t.length).fill(e?n.ZERO:void 0),r=t.reduce((s,a,l)=>n.is0(a)?s:(i[l]=s,n.mul(s,a)),n.ONE),o=n.inv(r);return t.reduceRight((s,a,l)=>n.is0(a)?s:(i[l]=n.mul(s,i[l]),n.mul(s,a)),o),i}function RAe(n,t,e){return n.mul(t,typeof e=="bigint"?XM(e,n.ORDER):n.inv(e))}function YM(n,t){let e=(n.ORDER-ns)/Km,i=n.pow(t,e),r=n.eql(i,n.ONE),o=n.eql(i,n.ZERO),s=n.eql(i,n.neg(n.ONE));if(!r&&!o&&!s)throw new Error("invalid Legendre symbol result");return r?1:o?0:-1}function OAe(n,t){return YM(n,t)===1}function DO(n,t){t!==void 0&&(0,bl.anumber)(t);let e=t!==void 0?t:n.toString(2).length,i=Math.ceil(e/8);return{nBitLength:e,nByteLength:i}}function ZM(n,t,e=!1,i={}){if(n<=qa)throw new Error("invalid field: expected ORDER > 0, got "+n);let r,o,s=!1,a;if(typeof t=="object"&&t!=null){if(i.sqrt||e)throw new Error("cannot specify opts in two arguments");let h=t;h.BITS&&(r=h.BITS),h.sqrt&&(o=h.sqrt),typeof h.isLE=="boolean"&&(e=h.isLE),typeof h.modFromBytes=="boolean"&&(s=h.modFromBytes),a=h.allowedLengths}else typeof t=="number"&&(r=t),i.sqrt&&(o=i.sqrt);let{nBitLength:l,nByteLength:c}=DO(n,r);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d,u=Object.freeze({ORDER:n,isLE:e,BITS:l,BYTES:c,MASK:(0,bl.bitMask)(l),ZERO:qa,ONE:ns,allowedLengths:a,create:h=>_l(h,n),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return qa<=h&&h<n},is0:h=>h===qa,isValidNot0:h=>!u.is0(h)&&u.isValid(h),isOdd:h=>(h&ns)===ns,neg:h=>_l(-h,n),eql:(h,f)=>h===f,sqr:h=>_l(h*h,n),add:(h,f)=>_l(h+f,n),sub:(h,f)=>_l(h-f,n),mul:(h,f)=>_l(h*f,n),pow:(h,f)=>AO(u,h,f),div:(h,f)=>_l(h*XM(f,n),n),sqrN:h=>h*h,addN:(h,f)=>h+f,subN:(h,f)=>h-f,mulN:(h,f)=>h*f,inv:h=>XM(h,n),sqrt:o||(h=>(d||(d=Nne(n)),d(u,h))),toBytes:h=>e?(0,bl.numberToBytesLE)(h,c):(0,bl.numberToBytesBE)(h,c),fromBytes:(h,f=!0)=>{if(a){if(!a.includes(h.length)||h.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);let y=new Uint8Array(c);y.set(h,e?0:y.length-h.length),h=y}if(h.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+h.length);let p=e?(0,bl.bytesToNumberLE)(h):(0,bl.bytesToNumberBE)(h);if(s&&(p=_l(p,n)),!f&&!u.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:h=>Bne(u,h),cmov:(h,f,p)=>p?f:h});return Object.freeze(u)}function NAe(n,t){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let e=n.sqrt(t);return n.isOdd(e)?e:n.neg(e)}function BAe(n,t){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let e=n.sqrt(t);return n.isOdd(e)?n.neg(e):e}function VAe(n,t,e=!1){n=(0,bl.ensureBytes)("privateHash",n);let i=n.length,r=DO(t).nByteLength+8;if(r<24||i<r||i>1024)throw new Error("hashToPrivateScalar: expected "+r+"-1024 bytes of input, got "+i);let o=e?(0,bl.bytesToNumberLE)(n):(0,bl.bytesToNumberBE)(n);return _l(o,t-ns)+ns}function IO(n){if(typeof n!="bigint")throw new Error("field order must be bigint");let t=n.toString(2).length;return Math.ceil(t/8)}function Vne(n){let t=IO(n);return t+Math.ceil(t/2)}function UAe(n,t,e=!1){let i=n.length,r=IO(t),o=Vne(t);if(i<16||i<o||i>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+i);let s=e?(0,bl.bytesToNumberLE)(n):(0,bl.bytesToNumberBE)(n),a=_l(s,t-ns)+ns;return e?(0,bl.numberToBytesLE)(a,r):(0,bl.numberToBytesBE)(a,r)}});var QM=me(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.wNAF=void 0;md.negateCt=RO;md.normalizeZ=jAe;md.mulEndoUnsafe=HAe;md.pippenger=WAe;md.precomputeMSMUnsafe=zAe;md.validateBasic=qAe;md._createCurveFields=$Ae;var Nw=Eu(),Bw=$h(),cy=BigInt(0),Gm=BigInt(1);function RO(n,t){let e=t.negate();return n?e:t}function jAe(n,t){let e=(0,Bw.FpInvertBatch)(n.Fp,t.map(i=>i.Z));return t.map((i,r)=>n.fromAffine(i.toAffine(e[r])))}function NO(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function FO(n,t){NO(n,t);let e=Math.ceil(t/n)+1,i=2**(n-1),r=2**n,o=(0,Nw.bitMask)(n),s=BigInt(n);return{windows:e,windowSize:i,mask:o,maxNumber:r,shiftBy:s}}function Une(n,t,e){let{windowSize:i,mask:r,maxNumber:o,shiftBy:s}=e,a=Number(n&r),l=n>>s;a>i&&(a-=o,l+=Gm);let c=t*i,d=c+Math.abs(a)-1,u=a===0,h=a<0,f=t%2!==0;return{nextN:l,offset:d,isZero:u,isNeg:h,isNegF:f,offsetF:c}}function Wne(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,i)=>{if(!(e instanceof t))throw new Error("invalid point at index "+i)})}function zne(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,i)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+i)})}var PO=new WeakMap,qne=new WeakMap;function LO(n){return qne.get(n)||1}function jne(n){if(n!==cy)throw new Error("invalid wNAF")}var OO=class{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,i=this.ZERO){let r=t;for(;e>cy;)e&Gm&&(i=i.add(r)),r=r.double(),e>>=Gm;return i}precomputeWindow(t,e){let{windows:i,windowSize:r}=FO(e,this.bits),o=[],s=t,a=s;for(let l=0;l<i;l++){a=s,o.push(a);for(let c=1;c<r;c++)a=a.add(s),o.push(a);s=a.double()}return o}wNAF(t,e,i){if(!this.Fn.isValid(i))throw new Error("invalid scalar");let r=this.ZERO,o=this.BASE,s=FO(t,this.bits);for(let a=0;a<s.windows;a++){let{nextN:l,offset:c,isZero:d,isNeg:u,isNegF:h,offsetF:f}=Une(i,a,s);i=l,d?o=o.add(RO(h,e[f])):r=r.add(RO(u,e[c]))}return jne(i),{p:r,f:o}}wNAFUnsafe(t,e,i,r=this.ZERO){let o=FO(t,this.bits);for(let s=0;s<o.windows&&i!==cy;s++){let{nextN:a,offset:l,isZero:c,isNeg:d}=Une(i,s,o);if(i=a,!c){let u=e[l];r=r.add(d?u.negate():u)}}return jne(i),r}getPrecomputes(t,e,i){let r=PO.get(e);return r||(r=this.precomputeWindow(e,t),t!==1&&(typeof i=="function"&&(r=i(r)),PO.set(e,r))),r}cached(t,e,i){let r=LO(t);return this.wNAF(r,this.getPrecomputes(r,t,i),e)}unsafe(t,e,i,r){let o=LO(t);return o===1?this._unsafeLadder(t,e,r):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),e,r)}createCache(t,e){NO(e,this.bits),qne.set(t,e),PO.delete(t)}hasCache(t){return LO(t)!==1}};md.wNAF=OO;function HAe(n,t,e,i){let r=t,o=n.ZERO,s=n.ZERO;for(;e>cy||i>cy;)e&Gm&&(o=o.add(r)),i&Gm&&(s=s.add(r)),r=r.double(),e>>=Gm,i>>=Gm;return{p1:o,p2:s}}function WAe(n,t,e,i){Wne(e,n),zne(i,t);let r=e.length,o=i.length;if(r!==o)throw new Error("arrays of points and scalars must have equal length");let s=n.ZERO,a=(0,Nw.bitLen)(BigInt(r)),l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);let c=(0,Nw.bitMask)(l),d=new Array(Number(c)+1).fill(s),u=Math.floor((t.BITS-1)/l)*l,h=s;for(let f=u;f>=0;f-=l){d.fill(s);for(let y=0;y<o;y++){let v=i[y],b=Number(v>>BigInt(f)&c);d[b]=d[b].add(e[y])}let p=s;for(let y=d.length-1,v=s;y>0;y--)v=v.add(d[y]),p=p.add(v);if(h=h.add(p),f!==0)for(let y=0;y<l;y++)h=h.double()}return h}function zAe(n,t,e,i){NO(i,t.BITS),Wne(e,n);let r=n.ZERO,o=2**i-1,s=Math.ceil(t.BITS/i),a=(0,Nw.bitMask)(i),l=e.map(c=>{let d=[];for(let u=0,h=c;u<o;u++)d.push(h),h=h.add(c);return d});return c=>{if(zne(c,t),c.length>e.length)throw new Error("array of scalars must be smaller than array of points");let d=r;for(let u=0;u<s;u++){if(d!==r)for(let f=0;f<i;f++)d=d.double();let h=BigInt(s*i-(u+1)*i);for(let f=0;f<c.length;f++){let p=c[f],y=Number(p>>h&a);y&&(d=d.add(l[f][y-1]))}}return d}}function qAe(n){return(0,Bw.validateField)(n.Fp),(0,Nw.validateObject)(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(Ge(le(le({},(0,Bw.nLength)(n.n,n.nBitLength)),n),{p:n.Fp.ORDER}))}function Hne(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,Bw.validateField)(t),t}else return(0,Bw.Field)(n,{isLE:e})}function $Ae(n,t,e={},i){if(i===void 0&&(i=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(let l of["p","n","h"]){let c=t[l];if(!(typeof c=="bigint"&&c>cy))throw new Error(`CURVE.${l} must be positive bigint`)}let r=Hne(t.p,e.Fp,i),o=Hne(t.n,e.Fn,i),a=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(let l of a)if(!r.isValid(t[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:r,Fn:o}}});var HO=me(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.DER=ho.DERErr=void 0;ho._splitEndoScalar=Kne;ho._normFnElement=kp;ho.weierstrassN=jO;ho.SWUFpSqrtRatio=Xne;ho.mapToCurveSimpleSWU=XAe;ho.ecdh=Zne;ho.ecdsa=Qne;ho.weierstrassPoints=YAe;ho._legacyHelperEquat=eie;ho.weierstrass=eDe;var KAe=KM(),GAe=ja(),wn=Eu(),Kh=QM(),uy=$h(),$ne=(n,t)=>(n+(n>=0?t:-t)/Au)/t;function Kne(n,t,e){let[[i,r],[o,s]]=t,a=$ne(s*n,e),l=$ne(-r*n,e),c=n-a*i-l*o,d=-a*r-l*s,u=c<gd,h=d<gd;u&&(c=-c),h&&(d=-d);let f=(0,wn.bitMask)(Math.ceil((0,wn.bitLen)(e)/2))+Hs;if(c<gd||c>=f||d<gd||d>=f)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:u,k1:c,k2neg:h,k2:d}}function VO(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function BO(n,t){let e={};for(let i of Object.keys(t))e[i]=n[i]===void 0?t[i]:n[i];return(0,wn._abool2)(e.lowS,"lowS"),(0,wn._abool2)(e.prehash,"prehash"),e.format!==void 0&&VO(e.format),e}var JM=class extends Error{constructor(t=""){super(t)}};ho.DERErr=JM;ho.DER={Err:JM,_tlv:{encode:(n,t)=>{let{Err:e}=ho.DER;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");let i=t.length/2,r=(0,wn.numberToHexUnpadded)(i);if(r.length/2&128)throw new e("tlv.encode: long form length too big");let o=i>127?(0,wn.numberToHexUnpadded)(r.length/2|128):"";return(0,wn.numberToHexUnpadded)(n)+o+r+t},decode(n,t){let{Err:e}=ho.DER,i=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[i++]!==n)throw new e("tlv.decode: wrong tlv");let r=t[i++],o=!!(r&128),s=0;if(!o)s=r;else{let l=r&127;if(!l)throw new e("tlv.decode(long): indefinite length not supported");if(l>4)throw new e("tlv.decode(long): byte length is too big");let c=t.subarray(i,i+l);if(c.length!==l)throw new e("tlv.decode: length bytes not complete");if(c[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(let d of c)s=s<<8|d;if(i+=l,s<128)throw new e("tlv.decode(long): not minimal encoding")}let a=t.subarray(i,i+s);if(a.length!==s)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(i+s)}}},_int:{encode(n){let{Err:t}=ho.DER;if(n<gd)throw new t("integer: negative integers are not allowed");let e=(0,wn.numberToHexUnpadded)(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){let{Err:t}=ho.DER;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return(0,wn.bytesToNumberBE)(n)}},toSig(n){let{Err:t,_int:e,_tlv:i}=ho.DER,r=(0,wn.ensureBytes)("signature",n),{v:o,l:s}=i.decode(48,r);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l}=i.decode(2,o),{v:c,l:d}=i.decode(2,l);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(c)}},hexFromSig(n){let{_tlv:t,_int:e}=ho.DER,i=t.encode(2,e.encode(n.r)),r=t.encode(2,e.encode(n.s)),o=i+r;return t.encode(48,o)}};var gd=BigInt(0),Hs=BigInt(1),Au=BigInt(2),dy=BigInt(3),UO=BigInt(4);function kp(n,t){let{BYTES:e}=n,i;if(typeof t=="bigint")i=t;else{let r=(0,wn.ensureBytes)("private key",t);try{i=n.fromBytes(r)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}function jO(n,t={}){let e=(0,Kh._createCurveFields)("weierstrass",n,t),{Fp:i,Fn:r}=e,o=e.CURVE,{h:s,n:a}=o;(0,wn._validateObject)(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:l}=t;if(l&&(!i.is0(o.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let c=Yne(i,r);function d(){if(!i.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function u(K,C,A){let{x:I,y:T}=C.toAffine(),M=i.toBytes(I);if((0,wn._abool2)(A,"isCompressed"),A){d();let F=!i.isOdd(T);return(0,wn.concatBytes)(Gne(F),M)}else return(0,wn.concatBytes)(Uint8Array.of(4),M,i.toBytes(T))}function h(K){(0,wn._abytes2)(K,void 0,"Point");let{publicKey:C,publicKeyUncompressed:A}=c,I=K.length,T=K[0],M=K.subarray(1);if(I===C&&(T===2||T===3)){let F=i.fromBytes(M);if(!i.isValid(F))throw new Error("bad point: is not on curve, wrong x");let q=y(F),$;try{$=i.sqrt(q)}catch(ue){let Se=ue instanceof Error?": "+ue.message:"";throw new Error("bad point: is not on curve, sqrt error"+Se)}d();let te=i.isOdd($);return(T&1)===1!==te&&($=i.neg($)),{x:F,y:$}}else if(I===A&&T===4){let F=i.BYTES,q=i.fromBytes(M.subarray(0,F)),$=i.fromBytes(M.subarray(F,F*2));if(!v(q,$))throw new Error("bad point: is not on curve");return{x:q,y:$}}else throw new Error(`bad point: got length ${I}, expected compressed=${C} or uncompressed=${A}`)}let f=t.toBytes||u,p=t.fromBytes||h;function y(K){let C=i.sqr(K),A=i.mul(C,K);return i.add(i.add(A,i.mul(K,o.a)),o.b)}function v(K,C){let A=i.sqr(C),I=y(K);return i.eql(A,I)}if(!v(o.Gx,o.Gy))throw new Error("bad curve params: generator point");let b=i.mul(i.pow(o.a,dy),UO),S=i.mul(i.sqr(o.b),BigInt(27));if(i.is0(i.add(b,S)))throw new Error("bad curve params: a or b");function x(K,C,A=!1){if(!i.isValid(C)||A&&i.is0(C))throw new Error(`bad point coordinate ${K}`);return C}function k(K){if(!(K instanceof R))throw new Error("ProjectivePoint expected")}function L(K){if(!l||!l.basises)throw new Error("no endo");return Kne(K,l.basises,r.ORDER)}let D=(0,wn.memoized)((K,C)=>{let{X:A,Y:I,Z:T}=K;if(i.eql(T,i.ONE))return{x:A,y:I};let M=K.is0();C==null&&(C=M?i.ONE:i.inv(T));let F=i.mul(A,C),q=i.mul(I,C),$=i.mul(T,C);if(M)return{x:i.ZERO,y:i.ZERO};if(!i.eql($,i.ONE))throw new Error("invZ was invalid");return{x:F,y:q}}),V=(0,wn.memoized)(K=>{if(K.is0()){if(t.allowInfinityPoint&&!i.is0(K.Y))return;throw new Error("bad point: ZERO")}let{x:C,y:A}=K.toAffine();if(!i.isValid(C)||!i.isValid(A))throw new Error("bad point: x or y not field elements");if(!v(C,A))throw new Error("bad point: equation left != right");if(!K.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function O(K,C,A,I,T){return A=new R(i.mul(A.X,K),A.Y,A.Z),C=(0,Kh.negateCt)(I,C),A=(0,Kh.negateCt)(T,A),C.add(A)}class R{constructor(C,A,I){this.X=x("x",C),this.Y=x("y",A,!0),this.Z=x("z",I),Object.freeze(this)}static CURVE(){return o}static fromAffine(C){let{x:A,y:I}=C||{};if(!C||!i.isValid(A)||!i.isValid(I))throw new Error("invalid affine point");if(C instanceof R)throw new Error("projective point not allowed");return i.is0(A)&&i.is0(I)?R.ZERO:new R(A,I,i.ONE)}static fromBytes(C){let A=R.fromAffine(p((0,wn._abytes2)(C,void 0,"point")));return A.assertValidity(),A}static fromHex(C){return R.fromBytes((0,wn.ensureBytes)("pointHex",C))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,A=!0){return Z.createCache(this,C),A||this.multiply(dy),this}assertValidity(){V(this)}hasEvenY(){let{y:C}=this.toAffine();if(!i.isOdd)throw new Error("Field doesn't support isOdd");return!i.isOdd(C)}equals(C){k(C);let{X:A,Y:I,Z:T}=this,{X:M,Y:F,Z:q}=C,$=i.eql(i.mul(A,q),i.mul(M,T)),te=i.eql(i.mul(I,q),i.mul(F,T));return $&&te}negate(){return new R(this.X,i.neg(this.Y),this.Z)}double(){let{a:C,b:A}=o,I=i.mul(A,dy),{X:T,Y:M,Z:F}=this,q=i.ZERO,$=i.ZERO,te=i.ZERO,se=i.mul(T,T),ue=i.mul(M,M),Se=i.mul(F,F),Ie=i.mul(T,M);return Ie=i.add(Ie,Ie),te=i.mul(T,F),te=i.add(te,te),q=i.mul(C,te),$=i.mul(I,Se),$=i.add(q,$),q=i.sub(ue,$),$=i.add(ue,$),$=i.mul(q,$),q=i.mul(Ie,q),te=i.mul(I,te),Se=i.mul(C,Se),Ie=i.sub(se,Se),Ie=i.mul(C,Ie),Ie=i.add(Ie,te),te=i.add(se,se),se=i.add(te,se),se=i.add(se,Se),se=i.mul(se,Ie),$=i.add($,se),Se=i.mul(M,F),Se=i.add(Se,Se),se=i.mul(Se,Ie),q=i.sub(q,se),te=i.mul(Se,ue),te=i.add(te,te),te=i.add(te,te),new R(q,$,te)}add(C){k(C);let{X:A,Y:I,Z:T}=this,{X:M,Y:F,Z:q}=C,$=i.ZERO,te=i.ZERO,se=i.ZERO,ue=o.a,Se=i.mul(o.b,dy),Ie=i.mul(A,M),Be=i.mul(I,F),ce=i.mul(T,q),pe=i.add(A,I),re=i.add(M,F);pe=i.mul(pe,re),re=i.add(Ie,Be),pe=i.sub(pe,re),re=i.add(A,T);let ae=i.add(M,q);return re=i.mul(re,ae),ae=i.add(Ie,ce),re=i.sub(re,ae),ae=i.add(I,T),$=i.add(F,q),ae=i.mul(ae,$),$=i.add(Be,ce),ae=i.sub(ae,$),se=i.mul(ue,re),$=i.mul(Se,ce),se=i.add($,se),$=i.sub(Be,se),se=i.add(Be,se),te=i.mul($,se),Be=i.add(Ie,Ie),Be=i.add(Be,Ie),ce=i.mul(ue,ce),re=i.mul(Se,re),Be=i.add(Be,ce),ce=i.sub(Ie,ce),ce=i.mul(ue,ce),re=i.add(re,ce),Ie=i.mul(Be,re),te=i.add(te,Ie),Ie=i.mul(ae,re),$=i.mul(pe,$),$=i.sub($,Ie),Ie=i.mul(pe,Be),se=i.mul(ae,se),se=i.add(se,Ie),new R($,te,se)}subtract(C){return this.add(C.negate())}is0(){return this.equals(R.ZERO)}multiply(C){let{endo:A}=t;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let I,T,M=F=>Z.cached(this,F,q=>(0,Kh.normalizeZ)(R,q));if(A){let{k1neg:F,k1:q,k2neg:$,k2:te}=L(C),{p:se,f:ue}=M(q),{p:Se,f:Ie}=M(te);T=ue.add(Ie),I=O(A.beta,se,Se,F,$)}else{let{p:F,f:q}=M(C);I=F,T=q}return(0,Kh.normalizeZ)(R,[I,T])[0]}multiplyUnsafe(C){let{endo:A}=t,I=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===gd||I.is0())return R.ZERO;if(C===Hs)return I;if(Z.hasCache(this))return this.multiply(C);if(A){let{k1neg:T,k1:M,k2neg:F,k2:q}=L(C),{p1:$,p2:te}=(0,Kh.mulEndoUnsafe)(R,I,M,q);return O(A.beta,$,te,T,F)}else return Z.unsafe(I,C)}multiplyAndAddUnsafe(C,A,I){let T=this.multiplyUnsafe(A).add(C.multiplyUnsafe(I));return T.is0()?void 0:T}toAffine(C){return D(this,C)}isTorsionFree(){let{isTorsionFree:C}=t;return s===Hs?!0:C?C(R,this):Z.unsafe(this,a).is0()}clearCofactor(){let{clearCofactor:C}=t;return s===Hs?this:C?C(R,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(C=!0){return(0,wn._abool2)(C,"isCompressed"),this.assertValidity(),f(R,this,C)}toHex(C=!0){return(0,wn.bytesToHex)(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(C=!0){return this.toBytes(C)}_setWindowSize(C){this.precompute(C)}static normalizeZ(C){return(0,Kh.normalizeZ)(R,C)}static msm(C,A){return(0,Kh.pippenger)(R,r,C,A)}static fromPrivateKey(C){return R.BASE.multiply(kp(r,C))}}R.BASE=new R(o.Gx,o.Gy,i.ONE),R.ZERO=new R(i.ZERO,i.ONE,i.ZERO),R.Fp=i,R.Fn=r;let G=r.BITS,Z=new Kh.wNAF(R,t.endo?Math.ceil(G/2):G);return R.BASE.precompute(8),R}function Gne(n){return Uint8Array.of(n?2:3)}function Xne(n,t){let e=n.ORDER,i=gd;for(let p=e-Hs;p%Au===gd;p/=Au)i+=Hs;let r=i,o=Au<<r-Hs-Hs,s=o*Au,a=(e-Hs)/s,l=(a-Hs)/Au,c=s-Hs,d=o,u=n.pow(t,a),h=n.pow(t,(a+Hs)/Au),f=(p,y)=>{let v=u,b=n.pow(y,c),S=n.sqr(b);S=n.mul(S,y);let x=n.mul(p,S);x=n.pow(x,l),x=n.mul(x,b),b=n.mul(x,y),S=n.mul(x,p);let k=n.mul(S,b);x=n.pow(k,d);let L=n.eql(x,n.ONE);b=n.mul(S,h),x=n.mul(k,v),S=n.cmov(b,S,L),k=n.cmov(x,k,L);for(let D=r;D>Hs;D--){let V=D-Au;V=Au<<V-Hs;let O=n.pow(k,V),R=n.eql(O,n.ONE);b=n.mul(S,v),v=n.mul(v,v),O=n.mul(k,v),S=n.cmov(b,S,R),k=n.cmov(O,k,R)}return{isValid:L,value:S}};if(n.ORDER%UO===dy){let p=(n.ORDER-dy)/UO,y=n.sqrt(n.neg(t));f=(v,b)=>{let S=n.sqr(b),x=n.mul(v,b);S=n.mul(S,x);let k=n.pow(S,p);k=n.mul(k,x);let L=n.mul(k,y),D=n.mul(n.sqr(k),b),V=n.eql(D,v),O=n.cmov(L,k,V);return{isValid:V,value:O}}}return f}function XAe(n,t){(0,uy.validateField)(n);let{A:e,B:i,Z:r}=t;if(!n.isValid(e)||!n.isValid(i)||!n.isValid(r))throw new Error("mapToCurveSimpleSWU: invalid opts");let o=Xne(n,r);if(!n.isOdd)throw new Error("Field does not have .isOdd()");return s=>{let a,l,c,d,u,h,f,p;a=n.sqr(s),a=n.mul(a,r),l=n.sqr(a),l=n.add(l,a),c=n.add(l,n.ONE),c=n.mul(c,i),d=n.cmov(r,n.neg(l),!n.eql(l,n.ZERO)),d=n.mul(d,e),l=n.sqr(c),h=n.sqr(d),u=n.mul(h,e),l=n.add(l,u),l=n.mul(l,c),h=n.mul(h,d),u=n.mul(h,i),l=n.add(l,u),f=n.mul(a,c);let{isValid:y,value:v}=o(l,h);p=n.mul(a,s),p=n.mul(p,v),f=n.cmov(f,c,y),p=n.cmov(p,v,y);let b=n.isOdd(s)===n.isOdd(p);p=n.cmov(n.neg(p),p,b);let S=(0,uy.FpInvertBatch)(n,[d],!0)[0];return f=n.mul(f,S),{x:f,y:p}}}function Yne(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Zne(n,t={}){let{Fn:e}=n,i=t.randomBytes||wn.randomBytes,r=Object.assign(Yne(n.Fp,e),{seed:(0,uy.getMinHashLength)(e.ORDER)});function o(f){try{return!!kp(e,f)}catch{return!1}}function s(f,p){let{publicKey:y,publicKeyUncompressed:v}=r;try{let b=f.length;return p===!0&&b!==y||p===!1&&b!==v?!1:!!n.fromBytes(f)}catch{return!1}}function a(f=i(r.seed)){return(0,uy.mapHashToField)((0,wn._abytes2)(f,r.seed,"seed"),e.ORDER)}function l(f,p=!0){return n.BASE.multiply(kp(e,f)).toBytes(p)}function c(f){let p=a(f);return{secretKey:p,publicKey:l(p)}}function d(f){if(typeof f=="bigint")return!1;if(f instanceof n)return!0;let{secretKey:p,publicKey:y,publicKeyUncompressed:v}=r;if(e.allowedLengths||p===y)return;let b=(0,wn.ensureBytes)("key",f).length;return b===y||b===v}function u(f,p,y=!0){if(d(f)===!0)throw new Error("first arg must be private key");if(d(p)===!1)throw new Error("second arg must be public key");let v=kp(e,f);return n.fromHex(p).multiply(v).toBytes(y)}return Object.freeze({getPublicKey:l,getSharedSecret:u,keygen:c,Point:n,utils:{isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:a,isValidPrivateKey:o,randomPrivateKey:a,normPrivateKeyToScalar:f=>kp(e,f),precompute(f=8,p=n.BASE){return p.precompute(f,!1)}},lengths:r})}function Qne(n,t,e={}){(0,GAe.ahash)(t),(0,wn._validateObject)(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let i=e.randomBytes||wn.randomBytes,r=e.hmac||((A,...I)=>(0,KAe.hmac)(t,A,(0,wn.concatBytes)(...I))),{Fp:o,Fn:s}=n,{ORDER:a,BITS:l}=s,{keygen:c,getPublicKey:d,getSharedSecret:u,utils:h,lengths:f}=Zne(n,e),p={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},y="compact";function v(A){let I=a>>Hs;return A>I}function b(A,I){if(!s.isValidNot0(I))throw new Error(`invalid signature ${A}: out of range 1..Point.Fn.ORDER`);return I}function S(A,I){VO(I);let T=f.signature,M=I==="compact"?T:I==="recovered"?T+1:void 0;return(0,wn._abytes2)(A,M,`${I} signature`)}class x{constructor(I,T,M){this.r=b("r",I),this.s=b("s",T),M!=null&&(this.recovery=M),Object.freeze(this)}static fromBytes(I,T=y){S(I,T);let M;if(T==="der"){let{r:te,s:se}=ho.DER.toSig((0,wn._abytes2)(I));return new x(te,se)}T==="recovered"&&(M=I[0],T="compact",I=I.subarray(1));let F=s.BYTES,q=I.subarray(0,F),$=I.subarray(F,F*2);return new x(s.fromBytes(q),s.fromBytes($),M)}static fromHex(I,T){return this.fromBytes((0,wn.hexToBytes)(I),T)}addRecoveryBit(I){return new x(this.r,this.s,I)}recoverPublicKey(I){let T=o.ORDER,{r:M,s:F,recovery:q}=this;if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");if(a*Au<T&&q>1)throw new Error("recovery id is ambiguous for h>1 curve");let te=q===2||q===3?M+a:M;if(!o.isValid(te))throw new Error("recovery id 2 or 3 invalid");let se=o.toBytes(te),ue=n.fromBytes((0,wn.concatBytes)(Gne((q&1)===0),se)),Se=s.inv(te),Ie=L((0,wn.ensureBytes)("msgHash",I)),Be=s.create(-Ie*Se),ce=s.create(F*Se),pe=n.BASE.multiplyUnsafe(Be).add(ue.multiplyUnsafe(ce));if(pe.is0())throw new Error("point at infinify");return pe.assertValidity(),pe}hasHighS(){return v(this.s)}toBytes(I=y){if(VO(I),I==="der")return(0,wn.hexToBytes)(ho.DER.hexFromSig(this));let T=s.toBytes(this.r),M=s.toBytes(this.s);if(I==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return(0,wn.concatBytes)(Uint8Array.of(this.recovery),T,M)}return(0,wn.concatBytes)(T,M)}toHex(I){return(0,wn.bytesToHex)(this.toBytes(I))}assertValidity(){}static fromCompact(I){return x.fromBytes((0,wn.ensureBytes)("sig",I),"compact")}static fromDER(I){return x.fromBytes((0,wn.ensureBytes)("sig",I),"der")}normalizeS(){return this.hasHighS()?new x(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,wn.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,wn.bytesToHex)(this.toBytes("compact"))}}let k=e.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");let T=(0,wn.bytesToNumberBE)(I),M=I.length*8-l;return M>0?T>>BigInt(M):T},L=e.bits2int_modN||function(I){return s.create(k(I))},D=(0,wn.bitMask)(l);function V(A){return(0,wn.aInRange)("num < 2^"+l,A,gd,D),s.toBytes(A)}function O(A,I){return(0,wn._abytes2)(A,void 0,"message"),I?(0,wn._abytes2)(t(A),void 0,"prehashed message"):A}function R(A,I,T){if(["recovered","canonical"].some(Be=>Be in T))throw new Error("sign() legacy options not supported");let{lowS:M,prehash:F,extraEntropy:q}=BO(T,p);A=O(A,F);let $=L(A),te=kp(s,I),se=[V(te),V($)];if(q!=null&&q!==!1){let Be=q===!0?i(f.secretKey):q;se.push((0,wn.ensureBytes)("extraEntropy",Be))}let ue=(0,wn.concatBytes)(...se),Se=$;function Ie(Be){let ce=k(Be);if(!s.isValidNot0(ce))return;let pe=s.inv(ce),re=n.BASE.multiply(ce).toAffine(),ae=s.create(re.x);if(ae===gd)return;let fe=s.create(pe*s.create(Se+ae*te));if(fe===gd)return;let De=(re.x===ae?0:2)|Number(re.y&Hs),be=fe;return M&&v(fe)&&(be=s.neg(fe),De^=1),new x(ae,be,De)}return{seed:ue,k2sig:Ie}}function G(A,I,T={}){A=(0,wn.ensureBytes)("message",A);let{seed:M,k2sig:F}=R(A,I,T);return(0,wn.createHmacDrbg)(t.outputLen,s.BYTES,r)(M,F)}function Z(A){let I,T=typeof A=="string"||(0,wn.isBytes)(A),M=!T&&A!==null&&typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!T&&!M)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(M)I=new x(A.r,A.s);else if(T){try{I=x.fromBytes((0,wn.ensureBytes)("sig",A),"der")}catch(F){if(!(F instanceof ho.DER.Err))throw F}if(!I)try{I=x.fromBytes((0,wn.ensureBytes)("sig",A),"compact")}catch{return!1}}return I||!1}function K(A,I,T,M={}){let{lowS:F,prehash:q,format:$}=BO(M,p);if(T=(0,wn.ensureBytes)("publicKey",T),I=O((0,wn.ensureBytes)("message",I),q),"strict"in M)throw new Error("options.strict was renamed to lowS");let te=$===void 0?Z(A):x.fromBytes((0,wn.ensureBytes)("sig",A),$);if(te===!1)return!1;try{let se=n.fromBytes(T);if(F&&te.hasHighS())return!1;let{r:ue,s:Se}=te,Ie=L(I),Be=s.inv(Se),ce=s.create(Ie*Be),pe=s.create(ue*Be),re=n.BASE.multiplyUnsafe(ce).add(se.multiplyUnsafe(pe));return re.is0()?!1:s.create(re.x)===ue}catch{return!1}}function C(A,I,T={}){let{prehash:M}=BO(T,p);return I=O(I,M),x.fromBytes(A,"recovered").recoverPublicKey(I).toBytes()}return Object.freeze({keygen:c,getPublicKey:d,getSharedSecret:u,utils:h,lengths:f,Point:n,sign:G,verify:K,recoverPublicKey:C,Signature:x,hash:t})}function YAe(n){let{CURVE:t,curveOpts:e}=Jne(n),i=jO(t,e);return QAe(n,i)}function Jne(n){let t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,i=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0,r=(0,uy.Field)(t.n,{BITS:n.nBitLength,allowedLengths:i,modFromBytes:n.wrapPrivateKey}),o={Fp:e,Fn:r,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:o}}function ZAe(n){let{CURVE:t,curveOpts:e}=Jne(n),i={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:i}}function eie(n,t,e){function i(r){let o=n.sqr(r),s=n.mul(o,r);return n.add(n.add(s,n.mul(r,t)),e)}return i}function QAe(n,t){let{Fp:e,Fn:i}=t;function r(s){return(0,wn.inRange)(s,Hs,i.ORDER)}let o=eie(e,n.a,n.b);return Object.assign({},{CURVE:n,Point:t,ProjectivePoint:t,normPrivateKeyToScalar:s=>kp(i,s),weierstrassEquation:o,isWithinCurveOrder:r})}function JAe(n,t){let e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,(0,uy.nLength)(e.Fn.ORDER,e.Fn.BITS))})}function eDe(n){let{CURVE:t,curveOpts:e,hash:i,ecdsaOpts:r}=ZAe(n),o=jO(t,e),s=Qne(o,i,r);return JAe(n,s)}});var tie=me(e6=>{"use strict";Object.defineProperty(e6,"__esModule",{value:!0});e6.getHash=nDe;e6.createCurve=iDe;var tDe=HO();function nDe(n){return{hash:n}}function iDe(n,t){let e=i=>(0,tDe.weierstrass)(Ge(le({},n),{hash:i}));return Ge(le({},e(t)),{create:e})}});var WO=me(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du._DST_scalar=void 0;Du.expand_message_xmd=rie;Du.expand_message_xof=oie;Du.hash_to_field=t6;Du.isogenyMap=sDe;Du.createHasher=aDe;var Ws=Eu(),nie=$h(),rDe=Ws.bytesToNumberBE;function Mp(n,t){if(Vw(n),Vw(t),n<0||n>=1<<8*t)throw new Error("invalid I2OSP input: "+n);let e=Array.from({length:t}).fill(0);for(let i=t-1;i>=0;i--)e[i]=n&255,n>>>=8;return new Uint8Array(e)}function oDe(n,t){let e=new Uint8Array(n.length);for(let i=0;i<n.length;i++)e[i]=n[i]^t[i];return e}function Vw(n){if(!Number.isSafeInteger(n))throw new Error("number expected")}function iie(n){if(!(0,Ws.isBytes)(n)&&typeof n!="string")throw new Error("DST must be Uint8Array or string");return typeof n=="string"?(0,Ws.utf8ToBytes)(n):n}function rie(n,t,e,i){(0,Ws.abytes)(n),Vw(e),t=iie(t),t.length>255&&(t=i((0,Ws.concatBytes)((0,Ws.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:r,blockLen:o}=i,s=Math.ceil(e/r);if(e>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");let a=(0,Ws.concatBytes)(t,Mp(t.length,1)),l=Mp(0,o),c=Mp(e,2),d=new Array(s),u=i((0,Ws.concatBytes)(l,n,c,Mp(0,1),a));d[0]=i((0,Ws.concatBytes)(u,Mp(1,1),a));for(let f=1;f<=s;f++){let p=[oDe(u,d[f-1]),Mp(f+1,1),a];d[f]=i((0,Ws.concatBytes)(...p))}return(0,Ws.concatBytes)(...d).slice(0,e)}function oie(n,t,e,i,r){if((0,Ws.abytes)(n),Vw(e),t=iie(t),t.length>255){let o=Math.ceil(2*i/8);t=r.create({dkLen:o}).update((0,Ws.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(e>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return r.create({dkLen:e}).update(n).update(Mp(e,2)).update(t).update(Mp(t.length,1)).digest()}function t6(n,t,e){(0,Ws._validateObject)(e,{p:"bigint",m:"number",k:"number",hash:"function"});let{p:i,k:r,m:o,hash:s,expand:a,DST:l}=e;if(!(0,Ws.isHash)(e.hash))throw new Error("expected valid hash");(0,Ws.abytes)(n),Vw(t);let c=i.toString(2).length,d=Math.ceil((c+r)/8),u=t*o*d,h;if(a==="xmd")h=rie(n,l,u,s);else if(a==="xof")h=oie(n,l,u,r,s);else if(a==="_internal_pass")h=n;else throw new Error('expand must be "xmd" or "xof"');let f=new Array(t);for(let p=0;p<t;p++){let y=new Array(o);for(let v=0;v<o;v++){let b=d*(v+p*o),S=h.subarray(b,b+d);y[v]=(0,nie.mod)(rDe(S),i)}f[p]=y}return f}function sDe(n,t){let e=t.map(i=>Array.from(i).reverse());return(i,r)=>{let[o,s,a,l]=e.map(u=>u.reduce((h,f)=>n.add(n.mul(h,i),f))),[c,d]=(0,nie.FpInvertBatch)(n,[s,l],!0);return i=n.mul(o,c),r=n.mul(r,n.mul(a,d)),{x:i,y:r}}}Du._DST_scalar=(0,Ws.utf8ToBytes)("HashToScalar-");function aDe(n,t,e){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function i(o){return n.fromAffine(t(o))}function r(o){let s=o.clearCofactor();return s.equals(n.ZERO)?n.ZERO:(s.assertValidity(),s)}return{defaults:e,hashToCurve(o,s){let a=Object.assign({},e,s),l=t6(o,2,a),c=i(l[0]),d=i(l[1]);return r(c.add(d))},encodeToCurve(o,s){let a=e.encodeDST?{DST:e.encodeDST}:{},l=Object.assign({},e,a,s),c=t6(o,1,l),d=i(c[0]);return r(d)},mapToCurve(o){if(!Array.isArray(o))throw new Error("expected array of bigints");for(let s of o)if(typeof s!="bigint")throw new Error("expected array of bigints");return r(i(o))},hashToScalar(o,s){let a=n.Fn.ORDER,l=Object.assign({},e,{p:a,m:1,DST:Du._DST_scalar},s);return t6(o,1,l)[0][0]}}}});var r6=me(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.encodeToCurve=zs.hashToCurve=zs.secp256k1_hasher=zs.schnorr=zs.secp256k1=void 0;var n6=Cm(),cie=ja(),lDe=tie(),die=WO(),$a=$h(),uie=HO(),ql=Eu(),hy={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},cDe={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},dDe=BigInt(0),sie=BigInt(1),zO=BigInt(2);function uDe(n){let t=hy.p,e=BigInt(3),i=BigInt(6),r=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),c=n*n*n%t,d=c*c*n%t,u=(0,$a.pow2)(d,e,t)*d%t,h=(0,$a.pow2)(u,e,t)*d%t,f=(0,$a.pow2)(h,zO,t)*c%t,p=(0,$a.pow2)(f,r,t)*f%t,y=(0,$a.pow2)(p,o,t)*p%t,v=(0,$a.pow2)(y,a,t)*y%t,b=(0,$a.pow2)(v,l,t)*v%t,S=(0,$a.pow2)(b,a,t)*y%t,x=(0,$a.pow2)(S,e,t)*d%t,k=(0,$a.pow2)(x,s,t)*p%t,L=(0,$a.pow2)(k,i,t)*c%t,D=(0,$a.pow2)(L,zO,t);if(!Gh.eql(Gh.sqr(D),n))throw new Error("Cannot find square root");return D}var Gh=(0,$a.Field)(hy.p,{sqrt:uDe});zs.secp256k1=(0,lDe.createCurve)(Ge(le({},hy),{Fp:Gh,lowS:!0,endo:cDe}),n6.sha256);var aie={};function i6(n,...t){let e=aie[n];if(e===void 0){let i=(0,n6.sha256)((0,ql.utf8ToBytes)(n));e=(0,ql.concatBytes)(i,i),aie[n]=e}return(0,n6.sha256)((0,ql.concatBytes)(e,...t))}var $O=n=>n.toBytes(!0).slice(1),fy=zs.secp256k1.Point,KO=n=>n%zO===dDe;function qO(n){let{Fn:t,BASE:e}=fy,i=(0,uie._normFnElement)(t,n),r=e.multiply(i);return{scalar:KO(r.y)?i:t.neg(i),bytes:$O(r)}}function hie(n){let t=Gh;if(!t.isValidNot0(n))throw new Error("invalid x: Fail if x \u2265 p");let e=t.create(n*n),i=t.create(e*n+BigInt(7)),r=t.sqrt(i);KO(r)||(r=t.neg(r));let o=fy.fromAffine({x:n,y:r});return o.assertValidity(),o}var Uw=ql.bytesToNumberBE;function fie(...n){return fy.Fn.create(Uw(i6("BIP0340/challenge",...n)))}function lie(n){return qO(n).bytes}function hDe(n,t,e=(0,cie.randomBytes)(32)){let{Fn:i}=fy,r=(0,ql.ensureBytes)("message",n),{bytes:o,scalar:s}=qO(t),a=(0,ql.ensureBytes)("auxRand",e,32),l=i.toBytes(s^Uw(i6("BIP0340/aux",a))),c=i6("BIP0340/nonce",l,o,r),{bytes:d,scalar:u}=qO(c),h=fie(d,o,r),f=new Uint8Array(64);if(f.set(d,0),f.set(i.toBytes(i.create(u+h*s)),32),!pie(f,r,o))throw new Error("sign: Invalid signature produced");return f}function pie(n,t,e){let{Fn:i,BASE:r}=fy,o=(0,ql.ensureBytes)("signature",n,64),s=(0,ql.ensureBytes)("message",t),a=(0,ql.ensureBytes)("publicKey",e,32);try{let l=hie(Uw(a)),c=Uw(o.subarray(0,32));if(!(0,ql.inRange)(c,sie,hy.p))return!1;let d=Uw(o.subarray(32,64));if(!(0,ql.inRange)(d,sie,hy.n))return!1;let u=fie(i.toBytes(c),$O(l),s),h=r.multiplyUnsafe(d).add(l.multiplyUnsafe(i.neg(u))),{x:f,y:p}=h.toAffine();return!(h.is0()||!KO(p)||f!==c)}catch{return!1}}zs.schnorr=(()=>{let e=(r=(0,cie.randomBytes)(48))=>(0,$a.mapHashToField)(r,hy.n);zs.secp256k1.utils.randomSecretKey;function i(r){let o=e(r);return{secretKey:o,publicKey:lie(o)}}return{keygen:i,getPublicKey:lie,sign:hDe,verify:pie,Point:fy,utils:{randomSecretKey:e,randomPrivateKey:e,taggedHash:i6,lift_x:hie,pointToBytes:$O,numberToBytesBE:ql.numberToBytesBE,bytesToNumberBE:ql.bytesToNumberBE,mod:$a.mod},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})();var fDe=(0,die.isogenyMap)(Gh,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(n=>n.map(t=>BigInt(t)))),pDe=(0,uie.mapToCurveSimpleSWU)(Gh,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Gh.create(BigInt("-11"))});zs.secp256k1_hasher=(0,die.createHasher)(zs.secp256k1.Point,n=>{let{x:t,y:e}=pDe(Gh.create(n[0]));return fDe(t,e)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Gh.ORDER,m:1,k:128,expand:"xmd",hash:n6.sha256});zs.hashToCurve=zs.secp256k1_hasher.hashToCurve;zs.encodeToCurve=zs.secp256k1_hasher.encodeToCurve});var GO=me(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.isHash=Jt.validateObject=Jt.memoized=Jt.notImplemented=Jt.createHmacDrbg=Jt.bitMask=Jt.bitSet=Jt.bitGet=Jt.bitLen=Jt.aInRange=Jt.inRange=Jt.asciiToBytes=Jt.copyBytes=Jt.equalBytes=Jt.ensureBytes=Jt.numberToVarBytesBE=Jt.numberToBytesLE=Jt.numberToBytesBE=Jt.bytesToNumberLE=Jt.bytesToNumberBE=Jt.hexToNumber=Jt.numberToHexUnpadded=Jt.abool=Jt.utf8ToBytes=Jt.randomBytes=Jt.isBytes=Jt.hexToBytes=Jt.concatBytes=Jt.bytesToUtf8=Jt.bytesToHex=Jt.anumber=Jt.abytes=void 0;var br=Eu();Jt.abytes=br.abytes;Jt.anumber=br.anumber;Jt.bytesToHex=br.bytesToHex;Jt.bytesToUtf8=br.bytesToUtf8;Jt.concatBytes=br.concatBytes;Jt.hexToBytes=br.hexToBytes;Jt.isBytes=br.isBytes;Jt.randomBytes=br.randomBytes;Jt.utf8ToBytes=br.utf8ToBytes;Jt.abool=br.abool;Jt.numberToHexUnpadded=br.numberToHexUnpadded;Jt.hexToNumber=br.hexToNumber;Jt.bytesToNumberBE=br.bytesToNumberBE;Jt.bytesToNumberLE=br.bytesToNumberLE;Jt.numberToBytesBE=br.numberToBytesBE;Jt.numberToBytesLE=br.numberToBytesLE;Jt.numberToVarBytesBE=br.numberToVarBytesBE;Jt.ensureBytes=br.ensureBytes;Jt.equalBytes=br.equalBytes;Jt.copyBytes=br.copyBytes;Jt.asciiToBytes=br.asciiToBytes;Jt.inRange=br.inRange;Jt.aInRange=br.aInRange;Jt.bitLen=br.bitLen;Jt.bitGet=br.bitGet;Jt.bitSet=br.bitSet;Jt.bitMask=br.bitMask;Jt.createHmacDrbg=br.createHmacDrbg;Jt.notImplemented=br.notImplemented;Jt.memoized=br.memoized;Jt.validateObject=br.validateObject;Jt.isHash=br.isHash});var jw=me(YO=>{"use strict";Object.defineProperty(YO,"__esModule",{value:!0});var mDe=aM(),gDe=GO(),XO=class n{constructor(){this.hash=mDe.sha512.create()}static half(t){return new n().add(t).first256()}add(t){return this.hash.update(t),this}addU32(t){let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t),this.add(e)}finish(){return this.hash.digest()}first256(){return this.finish().slice(0,32)}first256BigInt(){return(0,gDe.bytesToNumberBE)(this.first256())}};YO.default=XO});var QO=me(Tp=>{"use strict";var yDe=Tp&&Tp.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.accountPublicFromPublicGenerator=Tp.derivePrivateKey=void 0;var Hw=r6(),vDe=yDe(jw()),_De=BigInt(0);function ZO(n,t){let e=Hw.secp256k1.CURVE.n;for(let i=0;i<=4294967295;i++){let r=new vDe.default().add(n);t!==void 0&&r.addU32(t),r.addU32(i);let o=r.first256BigInt();if(o>_De&&o<e)return o}throw new Error("impossible unicorn ;)")}function bDe(n,t={}){let e=t.validator,i=Hw.secp256k1.CURVE.n,r=ZO(n);if(e)return r;let o=Hw.secp256k1.ProjectivePoint.BASE.multiply(r).toRawBytes(!0),s=t.accountIndex||0;return(ZO(o,s)+r)%i}Tp.derivePrivateKey=bDe;function wDe(n){let t=Hw.secp256k1.ProjectivePoint.fromHex(n),e=ZO(n,0),i=Hw.secp256k1.ProjectivePoint.BASE.multiply(e);return t.add(i).toRawBytes(!0)}Tp.accountPublicFromPublicGenerator=wDe});var o6=me(JO=>{"use strict";Object.defineProperty(JO,"__esModule",{value:!0});var SDe={ok(n,t){if(!n)throw new Error(t)}};JO.default=SDe});var yie=me(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.getAlgorithmFromPrivateKey=Ep.getAlgorithmFromPublicKey=Ep.getAlgorithmFromKey=void 0;var yd=(function(n){return n[n.NONE=-1]="NONE",n[n.ED25519=237]="ED25519",n[n.SECP256K1_PUB_X=2]="SECP256K1_PUB_X",n[n.SECP256K1_PUB_X_ODD_Y=3]="SECP256K1_PUB_X_ODD_Y",n[n.SECP256K1_PUB_XY=4]="SECP256K1_PUB_XY",n[n.SECP256K1_PRIVATE=0]="SECP256K1_PRIVATE",n})(yd||{}),mie={[`private_${yd.NONE}_32`]:"ecdsa-secp256k1",[`private_${yd.SECP256K1_PRIVATE}_33`]:"ecdsa-secp256k1",[`private_${yd.ED25519}_33`]:"ed25519",[`public_${yd.ED25519}_33`]:"ed25519",[`public_${yd.SECP256K1_PUB_X}_33`]:"ecdsa-secp256k1",[`public_${yd.SECP256K1_PUB_X_ODD_Y}_33`]:"ecdsa-secp256k1",[`public_${yd.SECP256K1_PUB_XY}_65`]:"ecdsa-secp256k1"};function CDe(n){return{prefix:n.length<2?yd.NONE:parseInt(n.slice(0,2),16),len:n.length/2}}function gie(n){return n===yd.NONE?"None":`0x${n.toString(16).padStart(2,"0")}`}function xDe(n){let e={algorithm:17,prefix:6};return Object.entries(mie).filter(([i])=>i.startsWith(n)).map(([i,r])=>{let[,o,s]=i.split("_"),a=r.padEnd(e.algorithm),l=gie(Number(o)).padEnd(e.prefix);return`${a} - Prefix: ${l} Length: ${s} bytes`}).join(`
`)}function kDe({key:n,type:t,prefix:e,len:i}){let r=xDe(t);return`invalid_key:

Type: ${t}
Key: ${n}
Prefix: ${gie(e)} 
Length: ${i} bytes

Acceptable ${t} formats are:
${r}
`}function eN(n,t){let{prefix:e,len:i}=CDe(n),r=t==="private"&&i===32?yd.NONE:e,o=mie[`${t}_${r}_${i}`];if(!o)throw new Error(kDe({key:n,type:t,len:i,prefix:r}));return o}Ep.getAlgorithmFromKey=eN;function MDe(n){return eN(n,"public")}Ep.getAlgorithmFromPublicKey=MDe;function TDe(n){return eN(n,"private")}Ep.getAlgorithmFromPrivateKey=TDe});var Sie=me(Ww=>{"use strict";var wie=Ww&&Ww.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ww,"__esModule",{value:!0});var EDe=GO(),s6=r6(),vie=qi(),ADe=QO(),DDe=wie(o6()),_ie=wie(jw()),bie="00",IDe={deriveKeypair(n,t){let e=(0,ADe.derivePrivateKey)(n,t),i=bie+(0,vie.bytesToHex)((0,EDe.numberToBytesBE)(e,32)),r=(0,vie.bytesToHex)(s6.secp256k1.getPublicKey(e,!0));return{privateKey:i,publicKey:r}},sign(n,t){DDe.default.ok(t.length===66&&t.startsWith(bie)||t.length===64);let e=t.length===66?t.slice(2):t;return s6.secp256k1.sign(_ie.default.half(n),e,{lowS:!0,extraEntropy:void 0}).toDERHex(!0).toUpperCase()},verify(n,t,e){let i=s6.secp256k1.Signature.fromDER(t);return s6.secp256k1.verify(i,_ie.default.half(n),e)}};Ww.default=IDe});var kie=me(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.PrimeEdwardsPoint=void 0;Ym.edwards=Cie;Ym.eddsa=xie;Ym.twistedEdwards=NDe;var ar=Eu(),Xm=QM(),FDe=$h(),Ap=BigInt(0),Ts=BigInt(1),tN=BigInt(2),PDe=BigInt(8);function LDe(n,t,e,i){let r=n.sqr(e),o=n.sqr(i),s=n.add(n.mul(t.a,r),o),a=n.add(n.ONE,n.mul(t.d,n.mul(r,o)));return n.eql(s,a)}function Cie(n,t={}){let e=(0,Xm._createCurveFields)("edwards",n,t,t.FpFnLE),{Fp:i,Fn:r}=e,o=e.CURVE,{h:s}=o;(0,ar._validateObject)(t,{},{uvRatio:"function"});let a=tN<<BigInt(r.BYTES*8)-Ts,l=v=>i.create(v),c=t.uvRatio||((v,b)=>{try{return{isValid:!0,value:i.sqrt(i.div(v,b))}}catch{return{isValid:!1,value:Ap}}});if(!LDe(i,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function d(v,b,S=!1){let x=S?Ts:Ap;return(0,ar.aInRange)("coordinate "+v,b,x,a),b}function u(v){if(!(v instanceof p))throw new Error("ExtendedPoint expected")}let h=(0,ar.memoized)((v,b)=>{let{X:S,Y:x,Z:k}=v,L=v.is0();b==null&&(b=L?PDe:i.inv(k));let D=l(S*b),V=l(x*b),O=i.mul(k,b);if(L)return{x:Ap,y:Ts};if(O!==Ts)throw new Error("invZ was invalid");return{x:D,y:V}}),f=(0,ar.memoized)(v=>{let{a:b,d:S}=o;if(v.is0())throw new Error("bad point: ZERO");let{X:x,Y:k,Z:L,T:D}=v,V=l(x*x),O=l(k*k),R=l(L*L),G=l(R*R),Z=l(V*b),K=l(R*l(Z+O)),C=l(G+l(S*l(V*O)));if(K!==C)throw new Error("bad point: equation left != right (1)");let A=l(x*k),I=l(L*D);if(A!==I)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(b,S,x,k){this.X=d("x",b),this.Y=d("y",S),this.Z=d("z",x,!0),this.T=d("t",k),Object.freeze(this)}static CURVE(){return o}static fromAffine(b){if(b instanceof p)throw new Error("extended point not allowed");let{x:S,y:x}=b||{};return d("x",S),d("y",x),new p(S,x,Ts,l(S*x))}static fromBytes(b,S=!1){let x=i.BYTES,{a:k,d:L}=o;b=(0,ar.copyBytes)((0,ar._abytes2)(b,x,"point")),(0,ar._abool2)(S,"zip215");let D=(0,ar.copyBytes)(b),V=b[x-1];D[x-1]=V&-129;let O=(0,ar.bytesToNumberLE)(D),R=S?a:i.ORDER;(0,ar.aInRange)("point.y",O,Ap,R);let G=l(O*O),Z=l(G-Ts),K=l(L*G-k),{isValid:C,value:A}=c(Z,K);if(!C)throw new Error("bad point: invalid y coordinate");let I=(A&Ts)===Ts,T=(V&128)!==0;if(!S&&A===Ap&&T)throw new Error("bad point: x=0 and x_0=1");return T!==I&&(A=l(-A)),p.fromAffine({x:A,y:O})}static fromHex(b,S=!1){return p.fromBytes((0,ar.ensureBytes)("point",b),S)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,S=!0){return y.createCache(this,b),S||this.multiply(tN),this}assertValidity(){f(this)}equals(b){u(b);let{X:S,Y:x,Z:k}=this,{X:L,Y:D,Z:V}=b,O=l(S*V),R=l(L*k),G=l(x*V),Z=l(D*k);return O===R&&G===Z}is0(){return this.equals(p.ZERO)}negate(){return new p(l(-this.X),this.Y,this.Z,l(-this.T))}double(){let{a:b}=o,{X:S,Y:x,Z:k}=this,L=l(S*S),D=l(x*x),V=l(tN*l(k*k)),O=l(b*L),R=S+x,G=l(l(R*R)-L-D),Z=O+D,K=Z-V,C=O-D,A=l(G*K),I=l(Z*C),T=l(G*C),M=l(K*Z);return new p(A,I,M,T)}add(b){u(b);let{a:S,d:x}=o,{X:k,Y:L,Z:D,T:V}=this,{X:O,Y:R,Z:G,T:Z}=b,K=l(k*O),C=l(L*R),A=l(V*x*Z),I=l(D*G),T=l((k+L)*(O+R)-K-C),M=I-A,F=I+A,q=l(C-S*K),$=l(T*M),te=l(F*q),se=l(T*q),ue=l(M*F);return new p($,te,ue,se)}subtract(b){return this.add(b.negate())}multiply(b){if(!r.isValidNot0(b))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:S,f:x}=y.cached(this,b,k=>(0,Xm.normalizeZ)(p,k));return(0,Xm.normalizeZ)(p,[S,x])[0]}multiplyUnsafe(b,S=p.ZERO){if(!r.isValid(b))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return b===Ap?p.ZERO:this.is0()||b===Ts?this:y.unsafe(this,b,x=>(0,Xm.normalizeZ)(p,x),S)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return y.unsafe(this,o.n).is0()}toAffine(b){return h(this,b)}clearCofactor(){return s===Ts?this:this.multiplyUnsafe(s)}toBytes(){let{x:b,y:S}=this.toAffine(),x=i.toBytes(S);return x[x.length-1]|=b&Ts?128:0,x}toHex(){return(0,ar.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(b){return(0,Xm.normalizeZ)(p,b)}static msm(b,S){return(0,Xm.pippenger)(p,r,b,S)}_setWindowSize(b){this.precompute(b)}toRawBytes(){return this.toBytes()}}p.BASE=new p(o.Gx,o.Gy,Ts,l(o.Gx*o.Gy)),p.ZERO=new p(Ap,Ts,Ts,Ap),p.Fp=i,p.Fn=r;let y=new Xm.wNAF(p,r.BITS);return p.BASE.precompute(8),p}var nN=class{constructor(t){this.ep=t}static fromBytes(t){(0,ar.notImplemented)()}static fromHex(t){(0,ar.notImplemented)()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(t){return this.ep.toAffine(t)}toHex(){return(0,ar.bytesToHex)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(t){return this.assertSame(t),this.init(this.ep.add(t.ep))}subtract(t){return this.assertSame(t),this.init(this.ep.subtract(t.ep))}multiply(t){return this.init(this.ep.multiply(t))}multiplyUnsafe(t){return this.init(this.ep.multiplyUnsafe(t))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(t,e){return this.init(this.ep.precompute(t,e))}toRawBytes(){return this.toBytes()}};Ym.PrimeEdwardsPoint=nN;function xie(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');(0,ar._validateObject)(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:i}=e,{BASE:r,Fp:o,Fn:s}=n,a=e.randomBytes||ar.randomBytes,l=e.adjustScalarBytes||(R=>R),c=e.domain||((R,G,Z)=>{if((0,ar._abool2)(Z,"phflag"),G.length||Z)throw new Error("Contexts/pre-hash are not supported");return R});function d(R){return s.create((0,ar.bytesToNumberLE)(R))}function u(R){let G=x.secretKey;R=(0,ar.ensureBytes)("private key",R,G);let Z=(0,ar.ensureBytes)("hashed private key",t(R),2*G),K=l(Z.slice(0,G)),C=Z.slice(G,2*G),A=d(K);return{head:K,prefix:C,scalar:A}}function h(R){let{head:G,prefix:Z,scalar:K}=u(R),C=r.multiply(K),A=C.toBytes();return{head:G,prefix:Z,scalar:K,point:C,pointBytes:A}}function f(R){return h(R).pointBytes}function p(R=Uint8Array.of(),...G){let Z=(0,ar.concatBytes)(...G);return d(t(c(Z,(0,ar.ensureBytes)("context",R),!!i)))}function y(R,G,Z={}){R=(0,ar.ensureBytes)("message",R),i&&(R=i(R));let{prefix:K,scalar:C,pointBytes:A}=h(G),I=p(Z.context,K,R),T=r.multiply(I).toBytes(),M=p(Z.context,T,A,R),F=s.create(I+M*C);if(!s.isValid(F))throw new Error("sign failed: invalid s");let q=(0,ar.concatBytes)(T,s.toBytes(F));return(0,ar._abytes2)(q,x.signature,"result")}let v={zip215:!0};function b(R,G,Z,K=v){let{context:C,zip215:A}=K,I=x.signature;R=(0,ar.ensureBytes)("signature",R,I),G=(0,ar.ensureBytes)("message",G),Z=(0,ar.ensureBytes)("publicKey",Z,x.publicKey),A!==void 0&&(0,ar._abool2)(A,"zip215"),i&&(G=i(G));let T=I/2,M=R.subarray(0,T),F=(0,ar.bytesToNumberLE)(R.subarray(T,I)),q,$,te;try{q=n.fromBytes(Z,A),$=n.fromBytes(M,A),te=r.multiplyUnsafe(F)}catch{return!1}if(!A&&q.isSmallOrder())return!1;let se=p(C,$.toBytes(),q.toBytes(),G);return $.add(q.multiplyUnsafe(se)).subtract(te).clearCofactor().is0()}let S=o.BYTES,x={secretKey:S,publicKey:S,signature:2*S,seed:S};function k(R=a(x.seed)){return(0,ar._abytes2)(R,x.seed,"seed")}function L(R){let G=O.randomSecretKey(R);return{secretKey:G,publicKey:f(G)}}function D(R){return(0,ar.isBytes)(R)&&R.length===s.BYTES}function V(R,G){try{return!!n.fromBytes(R,G)}catch{return!1}}let O={getExtendedPublicKey:h,randomSecretKey:k,isValidSecretKey:D,isValidPublicKey:V,toMontgomery(R){let{y:G}=n.fromBytes(R),Z=x.publicKey,K=Z===32;if(!K&&Z!==57)throw new Error("only defined for 25519 and 448");let C=K?o.div(Ts+G,Ts-G):o.div(G-Ts,G+Ts);return o.toBytes(C)},toMontgomerySecret(R){let G=x.secretKey;(0,ar._abytes2)(R,G);let Z=t(R.subarray(0,G));return l(Z).subarray(0,G)},randomPrivateKey:k,precompute(R=8,G=n.BASE){return G.precompute(R,!1)}};return Object.freeze({keygen:L,getPublicKey:f,sign:y,verify:b,utils:O,Point:n,lengths:x})}function RDe(n){let t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,i=(0,FDe.Field)(t.n,n.nBitLength,!0),r={Fp:e,Fn:i,uvRatio:n.uvRatio},o={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:r,hash:n.hash,eddsaOpts:o}}function ODe(n,t){let e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function NDe(n){let{CURVE:t,curveOpts:e,hash:i,eddsaOpts:r}=RDe(n),o=Cie(t,e),s=xie(o,i,r);return ODe(n,s)}});var Mie=me(iN=>{"use strict";Object.defineProperty(iN,"__esModule",{value:!0});iN.montgomery=UDe;var Iu=Eu(),BDe=$h(),zw=BigInt(0),py=BigInt(1),a6=BigInt(2);function VDe(n){return(0,Iu._validateObject)(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze(le({},n))}function UDe(n){let t=VDe(n),{P:e,type:i,adjustScalarBytes:r,powPminus2:o,randomBytes:s}=t,a=i==="x25519";if(!a&&i!=="x448")throw new Error("invalid type");let l=s||Iu.randomBytes,c=a?255:448,d=a?32:56,u=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?a6**BigInt(254):a6**BigInt(447),p=a?BigInt(8)*a6**BigInt(251)-py:BigInt(4)*a6**BigInt(445)-py,y=f+p+py,v=C=>(0,BDe.mod)(C,e),b=S(u);function S(C){return(0,Iu.numberToBytesLE)(v(C),d)}function x(C){let A=(0,Iu.ensureBytes)("u coordinate",C,d);return a&&(A[31]&=127),v((0,Iu.bytesToNumberLE)(A))}function k(C){return(0,Iu.bytesToNumberLE)(r((0,Iu.ensureBytes)("scalar",C,d)))}function L(C,A){let I=O(x(A),k(C));if(I===zw)throw new Error("invalid private or public key received");return S(I)}function D(C){return L(C,b)}function V(C,A,I){let T=v(C*(A-I));return A=v(A-T),I=v(I+T),{x_2:A,x_3:I}}function O(C,A){(0,Iu.aInRange)("u",C,zw,e),(0,Iu.aInRange)("scalar",A,f,y);let I=A,T=C,M=py,F=zw,q=C,$=py,te=zw;for(let ue=BigInt(c-1);ue>=zw;ue--){let Se=I>>ue&py;te^=Se,{x_2:M,x_3:q}=V(te,M,q),{x_2:F,x_3:$}=V(te,F,$),te=Se;let Ie=M+F,Be=v(Ie*Ie),ce=M-F,pe=v(ce*ce),re=Be-pe,ae=q+$,fe=q-$,De=v(fe*Ie),be=v(ae*ce),Ae=De+be,Ce=De-be;q=v(Ae*Ae),$=v(T*v(Ce*Ce)),M=v(Be*pe),F=v(re*(Be+v(h*re)))}({x_2:M,x_3:q}=V(te,M,q)),{x_2:F,x_3:$}=V(te,F,$);let se=o(F);return v(M*se)}let R={secretKey:d,publicKey:d,seed:d},G=(C=l(d))=>((0,Iu.abytes)(C,R.seed),C);function Z(C){let A=G(C);return{secretKey:A,publicKey:D(A)}}return{keygen:Z,getSharedSecret:(C,A)=>L(C,A),getPublicKey:C=>D(C),scalarMult:L,scalarMultBase:D,utils:{randomSecretKey:G,randomPrivateKey:G},GuBytes:b.slice(),lengths:R}}});var Bie=me(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.hash_to_ristretto255=fi.hashToRistretto255=fi.encodeToCurve=fi.hashToCurve=fi.RistrettoPoint=fi.edwardsToMontgomery=fi.ED25519_TORSION_SUBGROUP=fi.ristretto255_hasher=fi.ristretto255=fi.ed25519_hasher=fi.x25519=fi.ed25519ph=fi.ed25519ctx=fi.ed25519=void 0;fi.edwardsToMontgomeryPub=Nie;fi.edwardsToMontgomeryPriv=eIe;var qw=Cm(),c6=ja(),jDe=QM(),u6=kie(),l6=WO(),wr=$h(),HDe=Mie(),Zm=Eu(),WDe=BigInt(0),Fu=BigInt(1),d6=BigInt(2),Die=BigInt(3),Iie=BigInt(5),aN=BigInt(8),Xh=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),$w={p:Xh,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:aN,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Fie(n){let t=BigInt(10),e=BigInt(20),i=BigInt(40),r=BigInt(80),o=Xh,a=n*n%o*n%o,l=(0,wr.pow2)(a,d6,o)*a%o,c=(0,wr.pow2)(l,Fu,o)*n%o,d=(0,wr.pow2)(c,Iie,o)*c%o,u=(0,wr.pow2)(d,t,o)*d%o,h=(0,wr.pow2)(u,e,o)*u%o,f=(0,wr.pow2)(h,i,o)*h%o,p=(0,wr.pow2)(f,r,o)*f%o,y=(0,wr.pow2)(p,r,o)*f%o,v=(0,wr.pow2)(y,t,o)*d%o;return{pow_p_5_8:(0,wr.pow2)(v,d6,o)*n%o,b2:a}}function Pie(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}var rN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function lN(n,t){let e=Xh,i=(0,wr.mod)(t*t*t,e),r=(0,wr.mod)(i*i*t,e),o=Fie(n*r).pow_p_5_8,s=(0,wr.mod)(n*i*o,e),a=(0,wr.mod)(t*s*s,e),l=s,c=(0,wr.mod)(s*rN,e),d=a===n,u=a===(0,wr.mod)(-n,e),h=a===(0,wr.mod)(-n*rN,e);return d&&(s=l),(u||h)&&(s=c),(0,wr.isNegativeLE)(s,e)&&(s=(0,wr.mod)(-s,e)),{isValid:d||u,value:s}}var Rt=(0,wr.Field)($w.p,{isLE:!0}),Lie=(0,wr.Field)($w.n,{isLE:!0}),cN=Ge(le({},$w),{Fp:Rt,hash:qw.sha512,adjustScalarBytes:Pie,uvRatio:lN});fi.ed25519=(0,u6.twistedEdwards)(cN);function Rie(n,t,e){if(t.length>255)throw new Error("Context is too big");return(0,c6.concatBytes)((0,c6.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,n)}fi.ed25519ctx=(0,u6.twistedEdwards)(Ge(le({},cN),{domain:Rie}));fi.ed25519ph=(0,u6.twistedEdwards)(Object.assign({},cN,{domain:Rie,prehash:qw.sha512}));fi.x25519=(()=>{let n=Rt.ORDER;return(0,HDe.montgomery)({P:n,type:"x25519",powPminus2:t=>{let{pow_p_5_8:e,b2:i}=Fie(t);return(0,wr.mod)((0,wr.pow2)(e,Die,n)*i,n)},adjustScalarBytes:Pie})})();var zDe=(Xh+Die)/aN,qDe=Rt.pow(d6,zDe),Tie=Rt.sqrt(Rt.neg(Rt.ONE));function $De(n){let t=(Xh-Iie)/aN,e=BigInt(486662),i=Rt.sqr(n);i=Rt.mul(i,d6);let r=Rt.add(i,Rt.ONE),o=Rt.neg(e),s=Rt.sqr(r),a=Rt.mul(s,r),l=Rt.mul(i,e);l=Rt.mul(l,o),l=Rt.add(l,s),l=Rt.mul(l,o);let c=Rt.sqr(a);s=Rt.sqr(c),c=Rt.mul(c,a),c=Rt.mul(c,l),s=Rt.mul(s,c);let d=Rt.pow(s,t);d=Rt.mul(d,c);let u=Rt.mul(d,Tie);s=Rt.sqr(d),s=Rt.mul(s,a);let h=Rt.eql(s,l),f=Rt.cmov(u,d,h),p=Rt.mul(o,i),y=Rt.mul(d,n);y=Rt.mul(y,qDe);let v=Rt.mul(y,Tie),b=Rt.mul(l,i);s=Rt.sqr(y),s=Rt.mul(s,a);let S=Rt.eql(s,b),x=Rt.cmov(v,y,S);s=Rt.sqr(f),s=Rt.mul(s,a);let k=Rt.eql(s,l),L=Rt.cmov(p,o,k),D=Rt.cmov(x,f,k),V=Rt.isOdd(D);return D=Rt.cmov(D,Rt.neg(D),k!==V),{xMn:L,xMd:r,yMn:D,yMd:Fu}}var KDe=(0,wr.FpSqrtEven)(Rt,Rt.neg(BigInt(486664)));function GDe(n){let{xMn:t,xMd:e,yMn:i,yMd:r}=$De(n),o=Rt.mul(t,r);o=Rt.mul(o,KDe);let s=Rt.mul(e,i),a=Rt.sub(t,e),l=Rt.add(t,e),c=Rt.mul(s,l),d=Rt.eql(c,Rt.ZERO);o=Rt.cmov(o,Rt.ZERO,d),s=Rt.cmov(s,Rt.ONE,d),a=Rt.cmov(a,Rt.ONE,d),l=Rt.cmov(l,Rt.ONE,d);let[u,h]=(0,wr.FpInvertBatch)(Rt,[s,l],!0);return{x:Rt.mul(o,u),y:Rt.mul(a,h)}}fi.ed25519_hasher=(0,l6.createHasher)(fi.ed25519.Point,n=>GDe(n[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:Xh,m:1,k:128,expand:"xmd",hash:qw.sha512});var oN=rN,XDe=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),YDe=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ZDe=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),QDe=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Eie=n=>lN(Fu,n),JDe=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),sN=n=>fi.ed25519.Point.Fp.create((0,Zm.bytesToNumberLE)(n)&JDe);function Aie(n){let{d:t}=$w,e=Xh,i=b=>Rt.create(b),r=i(oN*n*n),o=i((r+Fu)*ZDe),s=BigInt(-1),a=i((s-t*r)*i(r+t)),{isValid:l,value:c}=lN(o,a),d=i(c*n);(0,wr.isNegativeLE)(d,e)||(d=i(-d)),l||(c=d),l||(s=r);let u=i(s*(r-Fu)*QDe-a),h=c*c,f=i((c+c)*a),p=i(u*XDe),y=i(Fu-h),v=i(Fu+h);return new fi.ed25519.Point(i(f*v),i(y*p),i(p*v),i(f*y))}function Oie(n){(0,c6.abytes)(n,64);let t=sN(n.subarray(0,32)),e=Aie(t),i=sN(n.subarray(32,64)),r=Aie(i);return new dN(e.add(r))}var dN=(()=>{class n extends u6.PrimeEdwardsPoint{constructor(e){super(e)}static fromAffine(e){return new n(fi.ed25519.Point.fromAffine(e))}assertSame(e){if(!(e instanceof n))throw new Error("RistrettoPoint expected")}init(e){return new n(e)}static hashToCurve(e){return Oie((0,Zm.ensureBytes)("ristrettoHash",e,64))}static fromBytes(e){(0,c6.abytes)(e,32);let{a:i,d:r}=$w,o=Xh,s=L=>Rt.create(L),a=sN(e);if(!(0,Zm.equalBytes)(Rt.toBytes(a),e)||(0,wr.isNegativeLE)(a,o))throw new Error("invalid ristretto255 encoding 1");let l=s(a*a),c=s(Fu+i*l),d=s(Fu-i*l),u=s(c*c),h=s(d*d),f=s(i*r*u-h),{isValid:p,value:y}=Eie(s(f*h)),v=s(y*d),b=s(y*v*f),S=s((a+a)*v);(0,wr.isNegativeLE)(S,o)&&(S=s(-S));let x=s(c*b),k=s(S*x);if(!p||(0,wr.isNegativeLE)(k,o)||x===WDe)throw new Error("invalid ristretto255 encoding 2");return new n(new fi.ed25519.Point(S,x,Fu,k))}static fromHex(e){return n.fromBytes((0,Zm.ensureBytes)("ristrettoHex",e,32))}static msm(e,i){return(0,jDe.pippenger)(n,fi.ed25519.Point.Fn,e,i)}toBytes(){let{X:e,Y:i,Z:r,T:o}=this.ep,s=Xh,a=b=>Rt.create(b),l=a(a(r+i)*a(r-i)),c=a(e*i),d=a(c*c),{value:u}=Eie(a(l*d)),h=a(u*l),f=a(u*c),p=a(h*f*o),y;if((0,wr.isNegativeLE)(o*p,s)){let b=a(i*oN),S=a(e*oN);e=b,i=S,y=a(h*YDe)}else y=f;(0,wr.isNegativeLE)(e*p,s)&&(i=a(-i));let v=a((r-i)*y);return(0,wr.isNegativeLE)(v,s)&&(v=a(-v)),Rt.toBytes(v)}equals(e){this.assertSame(e);let{X:i,Y:r}=this.ep,{X:o,Y:s}=e.ep,a=d=>Rt.create(d),l=a(i*s)===a(r*o),c=a(r*s)===a(i*o);return l||c}is0(){return this.equals(n.ZERO)}}return n.BASE=new n(fi.ed25519.Point.BASE),n.ZERO=new n(fi.ed25519.Point.ZERO),n.Fp=Rt,n.Fn=Lie,n})();fi.ristretto255={Point:dN};fi.ristretto255_hasher={hashToCurve(n,t){let e=t?.DST||"ristretto255_XMD:SHA-512_R255MAP_RO_",i=(0,l6.expand_message_xmd)(n,e,64,qw.sha512);return Oie(i)},hashToScalar(n,t={DST:l6._DST_scalar}){let e=(0,l6.expand_message_xmd)(n,t.DST,64,qw.sha512);return Lie.create((0,Zm.bytesToNumberLE)(e))}};fi.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];function Nie(n){return fi.ed25519.utils.toMontgomery((0,Zm.ensureBytes)("pub",n))}fi.edwardsToMontgomery=Nie;function eIe(n){return fi.ed25519.utils.toMontgomerySecret((0,Zm.ensureBytes)("pub",n))}fi.RistrettoPoint=dN;fi.hashToCurve=fi.ed25519_hasher.hashToCurve;fi.encodeToCurve=fi.ed25519_hasher.encodeToCurve;fi.hashToRistretto255=fi.ristretto255_hasher.hashToCurve;fi.hash_to_ristretto255=fi.ristretto255_hasher.hashToCurve});var jie=me(Kw=>{"use strict";var Uie=Kw&&Kw.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kw,"__esModule",{value:!0});var uN=Bie(),hN=qi(),fN=Uie(o6()),tIe=Uie(jw()),Vie="ED",nIe={deriveKeypair(n){let t=tIe.default.half(n),e=Vie+(0,hN.bytesToHex)(t),i=Vie+(0,hN.bytesToHex)(uN.ed25519.getPublicKey(t));return{privateKey:e,publicKey:i}},sign(n,t){return fN.default.ok(n instanceof Uint8Array,"message must be array of octets"),fN.default.ok(t.length===66,"private key must be 33 bytes including prefix"),(0,hN.bytesToHex)(uN.ed25519.sign(n,t.slice(2)))},verify(n,t,e){return fN.default.ok(e.length===66,"public key must be 33 bytes including prefix"),uN.ed25519.verify(t,n,e.slice(2),{zip215:!1})}};Kw.default=nIe});var vd=me(Es=>{"use strict";var h6=Es&&Es.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Es,"__esModule",{value:!0});Es.decodeSeed=Es.deriveNodeAddress=Es.deriveAddress=Es.verify=Es.sign=Es.deriveKeypair=Es.generateSeed=void 0;var Gw=ml();Object.defineProperty(Es,"decodeSeed",{enumerable:!0,get:function(){return Gw.decodeSeed}});var iIe=Tne(),rIe=lR(),f6=qi(),oIe=QO(),sIe=h6(jw()),aIe=h6(o6()),Hie=yie(),lIe=h6(Sie()),cIe=h6(jie());function pN(n){return{"ecdsa-secp256k1":lIe.default,ed25519:cIe.default}[n]}function dIe(n={}){aIe.default.ok(!n.entropy||n.entropy.length>=16,"entropy too short");let t=n.entropy?n.entropy.slice(0,16):(0,f6.randomBytes)(16),e=n.algorithm==="ed25519"?"ed25519":"secp256k1";return(0,Gw.encodeSeed)(t,e)}Es.generateSeed=dIe;function uIe(n,t){var e;let i=(0,Gw.decodeSeed)(n),o=((e=t?.algorithm)!==null&&e!==void 0?e:i.type)==="ed25519"?"ed25519":"ecdsa-secp256k1",s=pN(o),a=s.deriveKeypair(i.bytes,t),l=sIe.default.half("This test message should verify."),c=s.sign(l,a.privateKey);if(!s.verify(l,c,a.publicKey))throw new Error("derived keypair did not generate verifiable signature");return a}Es.deriveKeypair=uIe;function hIe(n,t){let e=(0,Hie.getAlgorithmFromPrivateKey)(t);return pN(e).sign((0,f6.hexToBytes)(n),t)}Es.sign=hIe;function fIe(n,t,e){let i=(0,Hie.getAlgorithmFromPublicKey)(e);return pN(i).verify((0,f6.hexToBytes)(n),t,e)}Es.verify=fIe;function pIe(n){return(0,iIe.ripemd160)((0,rIe.sha256)(n))}function Wie(n){return(0,Gw.encodeAccountID)(pIe(n))}function mIe(n){return Wie((0,f6.hexToBytes)(n))}Es.deriveAddress=mIe;function gIe(n){let t=(0,Gw.decodeNodePublic)(n),e=(0,oIe.accountPublicFromPublicGenerator)(t);return Wie(e)}Es.deriveNodeAddress=gIe});var zie=me(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.deriveXAddress=Dp.deriveAddress=Dp.deriveKeypair=void 0;var yIe=ml(),mN=vd();Object.defineProperty(Dp,"deriveKeypair",{enumerable:!0,get:function(){return mN.deriveKeypair}});Object.defineProperty(Dp,"deriveAddress",{enumerable:!0,get:function(){return mN.deriveAddress}});function vIe(n){let t=(0,mN.deriveAddress)(n.publicKey);return(0,yIe.classicAddressToXAddress)(t,n.tag,n.test)}Dp.deriveXAddress=vIe});var gN=me(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});my.omitBy=my.groupBy=void 0;function _Ie(n,t){function e(i,r,o,s){let a=t(r,o,s)||0,l=i[a]||[];return l.push(r),i[a]=l,i}return n.reduce(e,{})}my.groupBy=_Ie;function bIe(n,t){return Object.keys(n).filter(r=>!t(n[r],r)).reduce((r,o)=>(r[o]=n[o],r),{})}my.omitBy=bIe});var Yw=me(Ip=>{"use strict";var wIe=Ip&&Ip.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.xrpToDrops=Ip.dropsToXrp=void 0;var Xw=wIe(Us()),Qm=Nt(),qie=1e6,SIe=6,yN=10,$ie=/^-?[0-9.]+$/u;function CIe(n){let t=new Xw.default(n).toString(yN);if(typeof n=="string"&&t==="NaN")throw new Qm.ValidationError(`dropsToXrp: invalid value '${n}', should be a BigNumber or string-encoded number.`);if(t.includes("."))throw new Qm.ValidationError(`dropsToXrp: value '${t}' has too many decimal places.`);if(!$ie.exec(t))throw new Qm.ValidationError(`dropsToXrp: failed sanity check - value '${t}', does not match (^-?[0-9]+$).`);return new Xw.default(t).dividedBy(qie).toNumber()}Ip.dropsToXrp=CIe;function xIe(n){let t=new Xw.default(n).toString(yN);if(typeof n=="string"&&t==="NaN")throw new Qm.ValidationError(`xrpToDrops: invalid value '${n}', should be a BigNumber or string-encoded number.`);if(!$ie.exec(t))throw new Qm.ValidationError(`xrpToDrops: failed sanity check - value '${t}', does not match (^-?[0-9.]+$).`);let e=t.split(".");if(e.length>2)throw new Qm.ValidationError(`xrpToDrops: failed sanity check - value '${t}' has too many decimal points.`);if((e[1]||"0").length>SIe)throw new Qm.ValidationError(`xrpToDrops: value '${t}' has too many decimal places.`);return new Xw.default(t).times(qie).integerValue(Xw.default.ROUND_FLOOR).toString(yN)}Ip.xrpToDrops=xIe});var Gie=me(Zw=>{"use strict";var kIe=Zw&&Zw.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Zw,"__esModule",{value:!0});var _N=kIe(Us()),MIe=gN(),TIe=Yw();function EIe(n){let t=Object.keys(n)[0],e=n[t];return Object.assign(Object.assign({},e),{NodeType:t,LedgerEntryType:e.LedgerEntryType,LedgerIndex:e.LedgerIndex,NewFields:e.NewFields,FinalFields:e.FinalFields,PreviousFields:e.PreviousFields})}function AIe(n){return n.AffectedNodes.length===0?[]:n.AffectedNodes.map(EIe)}function DIe(n){let t=(0,MIe.groupBy)(n,e=>e.account);return Object.entries(t).map(([e,i])=>({account:e,balances:i.map(r=>r.balance)}))}function vN(n){return typeof n=="string"?new _N.default(n):new _N.default(n.value)}function Kie(n){var t,e,i;let r=null;return!((t=n.NewFields)===null||t===void 0)&&t.Balance?r=vN(n.NewFields.Balance):!((e=n.PreviousFields)===null||e===void 0)&&e.Balance&&(!((i=n.FinalFields)===null||i===void 0)&&i.Balance)&&(r=vN(n.FinalFields.Balance).minus(vN(n.PreviousFields.Balance))),r===null||r.isZero()?null:r}function IIe(n){var t,e,i;let r=Kie(n);return r===null?null:{account:(e=(t=n.FinalFields)===null||t===void 0?void 0:t.Account)!==null&&e!==void 0?e:(i=n.NewFields)===null||i===void 0?void 0:i.Account,balance:{currency:"XRP",value:(0,TIe.dropsToXrp)(r).toString()}}}function FIe(n){let t=new _N.default(n.balance.value).negated();return{account:n.balance.issuer,balance:{issuer:n.account,currency:n.balance.currency,value:t.toString()}}}function PIe(n){var t,e,i;let r=Kie(n);if(r===null)return null;let o=(t=n.NewFields)!==null&&t!==void 0?t:n.FinalFields,s={account:(e=o?.LowLimit)===null||e===void 0?void 0:e.issuer,balance:{issuer:(i=o?.HighLimit)===null||i===void 0?void 0:i.issuer,currency:(o?.Balance).currency,value:r.toString()}};return[s,FIe(s)]}function LIe(n){let t=AIe(n).map(e=>{if(e.LedgerEntryType==="AccountRoot"){let i=IIe(e);return i==null?[]:[i]}if(e.LedgerEntryType==="RippleState"){let i=PIe(e);return i??[]}return[]});return DIe(t.flat())}Zw.default=LIe});var p6=me(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.isDeletedNode=Fp.isModifiedNode=Fp.isCreatedNode=void 0;function RIe(n){return Object.prototype.hasOwnProperty.call(n,"CreatedNode")}Fp.isCreatedNode=RIe;function OIe(n){return Object.prototype.hasOwnProperty.call(n,"ModifiedNode")}Fp.isModifiedNode=OIe;function NIe(n){return Object.prototype.hasOwnProperty.call(n,"DeletedNode")}Fp.isDeletedNode=NIe});var Xie=me(wN=>{"use strict";Object.defineProperty(wN,"__esModule",{value:!0});var BIe=gl(),bN=p6();function VIe(n){return typeof n=="string"?(0,BIe.decode)(n):n}function UIe(n){if(typeof n!="string"&&n?.AffectedNodes===void 0)throw new TypeError(`Unable to parse the parameter given to getNFTokenID.
      'meta' must be the metadata from an NFTokenMint transaction. Received ${JSON.stringify(n)} instead.`);let e=VIe(n).AffectedNodes.filter(s=>{var a;return(0,bN.isCreatedNode)(s)?s.CreatedNode.LedgerEntryType==="NFTokenPage":(0,bN.isModifiedNode)(s)?s.ModifiedNode.LedgerEntryType==="NFTokenPage"&&!!(!((a=s.ModifiedNode.PreviousFields)===null||a===void 0)&&a.NFTokens):!1}),i=new Set(e.flatMap(s=>{var a;return((0,bN.isModifiedNode)(s)?(a=s.ModifiedNode.PreviousFields)===null||a===void 0?void 0:a.NFTokens:[]).map(c=>c.NFToken.NFTokenID)}).filter(s=>!!s));return e.flatMap(s=>{var a,l,c,d,u,h;return((h=(c=(l=(a=s.ModifiedNode)===null||a===void 0?void 0:a.FinalFields)===null||l===void 0?void 0:l.NFTokens)!==null&&c!==void 0?c:(u=(d=s.CreatedNode)===null||d===void 0?void 0:d.NewFields)===null||u===void 0?void 0:u.NFTokens)!==null&&h!==void 0?h:[]).map(f=>f.NFToken.NFTokenID)}).filter(s=>!!s).find(s=>!i.has(s))}wN.default=UIe});var Yie=me(SN=>{"use strict";Object.defineProperty(SN,"__esModule",{value:!0});var jIe=gl(),HIe=p6();function WIe(n){return typeof n=="string"?(0,jIe.decode)(n):n}function zIe(n){if(typeof n!="string"&&n?.AffectedNodes===void 0)throw new TypeError(`Unable to parse the parameter given to getXChainClaimID.
      'meta' must be the metadata from an XChainCreateClaimID transaction. Received ${JSON.stringify(n)} instead.`);let t=WIe(n);if(!t.TransactionResult)throw new TypeError("Cannot get XChainClaimID from un-validated transaction");return t.TransactionResult!=="tesSUCCESS"?void 0:t.AffectedNodes.find(i=>(0,HIe.isCreatedNode)(i)&&i.CreatedNode.LedgerEntryType==="XChainOwnedClaimID").CreatedNode.NewFields.XChainClaimID}SN.default=zIe});var Qw=me(CN=>{"use strict";Object.defineProperty(CN,"__esModule",{value:!0});var Zie=(function(n){return n[n.TRANSACTION_ID=1415073280]="TRANSACTION_ID",n[n.TRANSACTION_NODE=1397638144]="TRANSACTION_NODE",n[n.INNER_NODE=1296649728]="INNER_NODE",n[n.LEAF_NODE=1296846336]="LEAF_NODE",n[n.TRANSACTION_SIGN=1398036480]="TRANSACTION_SIGN",n[n.TRANSACTION_SIGN_TESTNET=1937012736]="TRANSACTION_SIGN_TESTNET",n[n.TRANSACTION_MULTISIGN=1397576704]="TRANSACTION_MULTISIGN",n[n.LEDGER=1280791040]="LEDGER",n})(Zie||{});CN.default=Zie});var Jw=me(xN=>{"use strict";Object.defineProperty(xN,"__esModule",{value:!0});var qIe=aM(),Qie=qi(),$Ie=32;function KIe(n){return(0,Qie.bytesToHex)((0,qIe.sha512)((0,Qie.hexToBytes)(n)).slice(0,$Ie))}xN.default=KIe});var m6=me(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.Node=gy.NodeType=void 0;var Jie=(function(n){return n[n.INNER=1]="INNER",n[n.TRANSACTION_NO_METADATA=2]="TRANSACTION_NO_METADATA",n[n.TRANSACTION_METADATA=3]="TRANSACTION_METADATA",n[n.ACCOUNT_STATE=4]="ACCOUNT_STATE",n})(Jie||(gy.NodeType=Jie={})),kN=class{};gy.Node=kN});var DN=me(e5=>{"use strict";var tre=e5&&e5.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e5,"__esModule",{value:!0});var ere=Nt(),MN=tre(Qw()),TN=tre(Jw()),g6=m6(),EN=16,AN=class extends g6.Node{constructor(t,e,i){super(),this.tag=t,this.type=i,this.data=e}get hash(){switch(this.type){case g6.NodeType.ACCOUNT_STATE:{let t=MN.default.LEAF_NODE.toString(EN);return(0,TN.default)(t+this.data+this.tag)}case g6.NodeType.TRANSACTION_NO_METADATA:{let t=MN.default.TRANSACTION_ID.toString(EN);return(0,TN.default)(t+this.data)}case g6.NodeType.TRANSACTION_METADATA:{let t=MN.default.TRANSACTION_NODE.toString(EN);return(0,TN.default)(t+this.data+this.tag)}default:throw new ere.XrplError("Tried to hash a SHAMap node of unknown type.")}}addItem(t,e){throw new ere.XrplError("Cannot call addItem on a LeafNode")}};e5.default=AN});var rre=me(t5=>{"use strict";var LN=t5&&t5.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t5,"__esModule",{value:!0});var IN=Nt(),GIe=LN(Qw()),XIe=LN(Jw()),YIe=LN(DN()),nre=m6(),ire="0000000000000000000000000000000000000000000000000000000000000000",FN=15,y6=16,PN=class n extends nre.Node{constructor(t=0){super(),this.leaves={},this.type=nre.NodeType.INNER,this.depth=t,this.empty=!0}get hash(){if(this.empty)return ire;let t="";for(let i=0;i<=FN;i++){let r=this.leaves[i],o=r==null?ire:r.hash;t+=o}let e=GIe.default.INNER_NODE.toString(y6);return(0,XIe.default)(e+t)}addItem(t,e){let i=this.getNode(parseInt(t[this.depth],y6));if(i===void 0){this.setNode(parseInt(t[this.depth],y6),e);return}if(i instanceof n)i.addItem(t,e);else if(i instanceof YIe.default){if(i.tag===t)throw new IN.XrplError("Tried to add a node to a SHAMap that was already in there.");{let r=new n(this.depth+1);r.addItem(i.tag,i),r.addItem(t,e),this.setNode(parseInt(t[this.depth],y6),r)}}}setNode(t,e){if(t<0||t>FN)throw new IN.XrplError("Invalid slot: slot must be between 0-15.");this.leaves[t]=e,this.empty=!1}getNode(t){if(t<0||t>FN)throw new IN.XrplError("Invalid slot: slot must be between 0-15.");return this.leaves[t]}};t5.default=PN});var sre=me(Pu=>{"use strict";var ZIe=Pu&&Pu.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),QIe=Pu&&Pu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&ZIe(t,n,e)},ore=Pu&&Pu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pu,"__esModule",{value:!0});var JIe=ore(rre()),e7e=ore(DN()),RN=class{constructor(){this.root=new JIe.default(0)}get hash(){return this.root.hash}addItem(t,e,i){this.root.addItem(t,new e7e.default(t,e,i))}};QIe(m6(),Pu);Pu.default=RN});var VN=me(ms=>{"use strict";var t7e=ms&&ms.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),n7e=ms&&ms.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),i7e=ms&&ms.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&t7e(t,n,e);return n7e(t,n),t},NN=ms&&ms.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ms,"__esModule",{value:!0});ms.hashStateTree=ms.hashTxTree=ms.hashLedgerHeader=ms.hashSignedTx=void 0;var ON=qi(),r7e=NN(Us()),i5=gl(),yy=Nt(),o7e=At(),s7e=Ms(),lre=NN(Qw()),cre=NN(Jw()),v6=i7e(sre()),BN=16;function n5(n,t){return Number(n).toString(BN).padStart(t*2,"0")}function a7e(n,t){return new r7e.default(n).toString(BN).padStart(t*2,"0")}function are(n){let t=n.length/2;if(t<=192)return(0,ON.bytesToHex)([t])+n;if(t<=12480){let e=t-193;return(0,ON.bytesToHex)([193+(e>>>8),e&255])+n}if(t<=918744){let e=t-12481;return(0,ON.bytesToHex)([241+(e>>>16),e>>>8&255,e&255])+n}throw new yy.XrplError("Variable integer overflow.")}function dre(n){let t,e;if(typeof n=="string"?(t=n,e=(0,i5.decode)(n)):(t=(0,i5.encode)(n),e=n),e.TxnSignature===void 0&&e.Signers===void 0&&e.SigningPubKey===void 0&&!(0,s7e.hasFlag)(e,o7e.GlobalFlags.tfInnerBatchTxn,"tfInnerBatchTxn"))throw new yy.ValidationError("The transaction must be signed to hash it.");let i=lre.default.TRANSACTION_ID.toString(16).toUpperCase();return(0,cre.default)(i.concat(t))}ms.hashSignedTx=dre;function ure(n){let e=lre.default.LEDGER.toString(BN).toUpperCase()+n5(Number(n.ledger_index),4)+a7e(n.total_coins,8)+n.parent_hash+n.transaction_hash+n.account_hash+n5(n.parent_close_time,4)+n5(n.close_time,4)+n5(n.close_time_resolution,1)+n5(n.close_flags,1);return(0,cre.default)(e)}ms.hashLedgerHeader=ure;function hre(n){var t;let e=new v6.default;for(let i of n){let r=(0,i5.encode)(i),o=(0,i5.encode)((t=i.metaData)!==null&&t!==void 0?t:{}),s=dre(r),a=are(r)+are(o);e.addItem(s,a,v6.NodeType.TRANSACTION_METADATA)}return e.hash}ms.hashTxTree=hre;function fre(n){let t=new v6.default;return n.forEach(e=>{let i=(0,i5.encode)(e);t.addItem(e.index,i,v6.NodeType.ACCOUNT_STATE)}),t.hash}ms.hashStateTree=fre;function l7e(n,t){let{transaction_hash:e}=n;if(!t.computeTreeHashes)return e;if(n.transactions==null)throw new yy.ValidationError("transactions is missing from the ledger");let i=hre(n.transactions);if(e!==i)throw new yy.ValidationError("transactionHash in header does not match computed hash of transactions",{transactionHashInHeader:e,computedHashOfTransactions:i});return i}function c7e(n,t){let{account_hash:e}=n;if(!t.computeTreeHashes)return e;if(n.accountState==null)throw new yy.ValidationError("accountState is missing from the ledger");let i=fre(n.accountState);if(e!==i)throw new yy.ValidationError("stateHash in header does not match computed hash of state");return i}function d7e(n,t={}){let e={transaction_hash:l7e(n,t),account_hash:c7e(n,t)};return ure(Object.assign(Object.assign({},n),e))}ms.default=d7e});var pre=me(UN=>{"use strict";Object.defineProperty(UN,"__esModule",{value:!0});var u7e={account:"a",dirNode:"d",generatorMap:"g",rippleState:"r",offer:"o",ownerDir:"O",bookDir:"B",contract:"c",skipList:"s",escrow:"u",amendment:"f",feeSettings:"e",ticket:"T",signerList:"S",paychan:"x",check:"C",depositPreauth:"p",vault:"V",loanBroker:"l",loan:"L"};UN.default=u7e});var HN=me(Ri=>{"use strict";var h7e=Ri&&Ri.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),f7e=Ri&&Ri.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),p7e=Ri&&Ri.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&h7e(t,n,e);return f7e(t,n),t},_6=Ri&&Ri.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.hashTxTree=Ri.hashStateTree=Ri.hashLedger=Ri.hashSignedTx=Ri.hashLedgerHeader=Ri.hashLoan=Ri.hashLoanBroker=Ri.hashVault=Ri.hashPaymentChannel=Ri.hashEscrow=Ri.hashTrustline=Ri.hashOfferId=Ri.hashSignerListId=Ri.hashAccountRoot=Ri.hashTx=void 0;var gre=qi(),mre=_6(Us()),m7e=ml(),r5=p7e(VN());Ri.hashLedger=r5.default;Object.defineProperty(Ri,"hashLedgerHeader",{enumerable:!0,get:function(){return r5.hashLedgerHeader}});Object.defineProperty(Ri,"hashSignedTx",{enumerable:!0,get:function(){return r5.hashSignedTx}});Object.defineProperty(Ri,"hashTxTree",{enumerable:!0,get:function(){return r5.hashTxTree}});Object.defineProperty(Ri,"hashStateTree",{enumerable:!0,get:function(){return r5.hashStateTree}});var g7e=_6(Qw()),yre=_6(pre()),Ru=_6(Jw()),Yh=16,o5=4;function Lu(n){return(0,gre.bytesToHex)((0,m7e.decodeAccountID)(n))}function Pp(n){return yre.default[n].charCodeAt(0).toString(Yh).padStart(4,"0")}var jN=255;function y7e(n){if(n.length!==3)return n;let t=Array(20).fill(0);return t[12]=n.charCodeAt(0)&jN,t[13]=n.charCodeAt(1)&jN,t[14]=n.charCodeAt(2)&jN,(0,gre.bytesToHex)(Uint8Array.from(t))}function v7e(n){let t=g7e.default.TRANSACTION_SIGN.toString(Yh).toUpperCase();return(0,Ru.default)(t+n)}Ri.hashTx=v7e;function _7e(n){return(0,Ru.default)(Pp("account")+Lu(n))}Ri.hashAccountRoot=_7e;function b7e(n){return(0,Ru.default)(`${Pp("signerList")+Lu(n)}00000000`)}Ri.hashSignerListId=b7e;function w7e(n,t){let e=yre.default.offer.charCodeAt(0).toString(Yh).padStart(2,"0"),i=t.toString(Yh).padStart(8,"0"),r=`00${e}`;return(0,Ru.default)(r+Lu(n)+i)}Ri.hashOfferId=w7e;function S7e(n,t,e){let i=Lu(n),r=Lu(t),o=new mre.default(i,16).isGreaterThan(new mre.default(r,16)),s=o?r:i,a=o?i:r,l=Pp("rippleState");return(0,Ru.default)(l+s+a+y7e(e))}Ri.hashTrustline=S7e;function C7e(n,t){return(0,Ru.default)(Pp("escrow")+Lu(n)+t.toString(Yh).padStart(o5*2,"0"))}Ri.hashEscrow=C7e;function x7e(n,t,e){return(0,Ru.default)(Pp("paychan")+Lu(n)+Lu(t)+e.toString(Yh).padStart(o5*2,"0"))}Ri.hashPaymentChannel=x7e;function k7e(n,t){return(0,Ru.default)(Pp("vault")+Lu(n)+t.toString(Yh).padStart(o5*2,"0"))}Ri.hashVault=k7e;function M7e(n,t){return(0,Ru.default)(Pp("loanBroker")+Lu(n)+t.toString(Yh).padStart(o5*2,"0"))}Ri.hashLoanBroker=M7e;function T7e(n,t){return(0,Ru.default)(Pp("loan")+n+t.toString(Yh).padStart(o5*2,"0"))}Ri.hashLoan=T7e});var vre=me(a5=>{"use strict";var E7e=a5&&a5.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a5,"__esModule",{value:!0});var A7e=qi(),s5=E7e(Us()),D7e=ml(),I7e=Nt();function F7e(n,t){let o=new s5.default(384160001).multipliedBy(t).modulo(4294967296).plus(2459).modulo(4294967296).toNumber();return(n^o)>>>0}function P7e(n){if(n.length!==64)throw new I7e.XrplError(`Attempting to parse a nftokenID with length ${n.length}
    , but expected a token with length 64`);let e=new s5.default(n.substring(48,56),16).toNumber(),i=new s5.default(n.substring(56,64),16).toNumber();return{NFTokenID:n,Flags:new s5.default(n.substring(0,4),16).toNumber(),TransferFee:new s5.default(n.substring(4,8),16).toNumber(),Issuer:(0,D7e.encodeAccountID)((0,A7e.hexToBytes)(n.substring(8,48))),Taxon:F7e(e,i),Sequence:i}}a5.default=P7e});var Sre=me(ha=>{"use strict";var L7e=ha&&ha.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ha,"__esModule",{value:!0});ha.percentToQuality=ha.transferRateToDecimal=ha.qualityToDecimal=ha.decimalToQuality=ha.percentToTransferRate=ha.decimalToTransferRate=void 0;var l5=L7e(Us()),Cc=Nt(),c5=10,Zh="1000000000",R7e="2000000000";function _re(n){if(!n.endsWith("%"))throw new Cc.ValidationError(`Value ${n} must end with %`);let t=n.split("%").filter(e=>e!=="");if(t.length!==1)throw new Cc.ValidationError(`Value ${n} contains too many % signs`);return new l5.default(t[0]).dividedBy("100").toString(c5)}function bre(n){let t=new l5.default(n).times(Zh).plus(Zh);if(t.isLessThan(Zh)||t.isGreaterThan(R7e))throw new Cc.ValidationError("Decimal value must be between 0 and 1.00.");let e=t.toString(c5);if(e===Zh)return 0;if(e==="NaN")throw new Cc.ValidationError("Value is not a number");if(e.includes("."))throw new Cc.ValidationError("Decimal exceeds maximum precision.");return Number(e)}ha.decimalToTransferRate=bre;function O7e(n){return bre(_re(n))}ha.percentToTransferRate=O7e;function wre(n){let e=new l5.default(n).times(Zh).toString(c5);if(e==="NaN")throw new Cc.ValidationError("Value is not a number");if(e.includes("-"))throw new Cc.ValidationError("Cannot have negative Quality");if(e===Zh)return 0;if(e.includes("."))throw new Cc.ValidationError("Decimal exceeds maximum precision.");return Number(e)}ha.decimalToQuality=wre;function N7e(n){if(!Number.isInteger(n))throw new Cc.ValidationError("Quality must be an integer");if(n<0)throw new Cc.ValidationError("Negative quality not allowed");return n===0?"1":new l5.default(n).dividedBy(Zh).toString(c5)}ha.qualityToDecimal=N7e;function B7e(n){if(!Number.isInteger(n))throw new Cc.ValidationError("Error decoding, transfer Rate must be an integer");if(n===0)return"0";let t=new l5.default(n).minus(Zh).dividedBy(Zh);if(t.isLessThan(0))throw new Cc.ValidationError("Error decoding, negative transfer rate");return t.toString(c5)}ha.transferRateToDecimal=B7e;function V7e(n){return wre(_re(n))}ha.percentToQuality=V7e});var Cre=me(WN=>{"use strict";Object.defineProperty(WN,"__esModule",{value:!0});var U7e=gl(),j7e=vd(),H7e=Yw();function W7e(n,t,e){let i=(0,U7e.encodeForSigningClaim)({channel:n,amount:(0,H7e.xrpToDrops)(t)});return(0,j7e.sign)(i,e)}WN.default=W7e});var kre=me(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});vy.convertStringToHex=vy.convertHexToString=void 0;var xre=qi();function z7e(n){return(0,xre.stringToHex)(n)}vy.convertStringToHex=z7e;function q7e(n,t="utf8"){return(0,xre.hexToString)(n,t)}vy.convertHexToString=q7e});var Are=me(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.isoTimeToRippleTime=Ou.rippleTimeToISOTime=Ou.unixTimeToRippleTime=Ou.rippleTimeToUnixTime=void 0;var Mre=946684800;function Tre(n){return(n+Mre)*1e3}Ou.rippleTimeToUnixTime=Tre;function Ere(n){return Math.round(n/1e3)-Mre}Ou.unixTimeToRippleTime=Ere;function $7e(n){return new Date(Tre(n)).toISOString()}Ou.rippleTimeToISOTime=$7e;function K7e(n){let t=typeof n=="string"?new Date(n):n;return Ere(t.getTime())}Ou.isoTimeToRippleTime=K7e});var Dre=me(zN=>{"use strict";Object.defineProperty(zN,"__esModule",{value:!0});var G7e=gl(),X7e=vd(),Y7e=Yw();function Z7e(n,t,e,i){let r=(0,G7e.encodeForSigningClaim)({channel:n,amount:(0,Y7e.xrpToDrops)(t)});return(0,X7e.verify)(r,e,i)}zN.default=Z7e});var d5=me(ht=>{"use strict";var _y=ht&&ht.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ht,"__esModule",{value:!0});ht.getXChainClaimID=ht.parseNFTokenID=ht.getNFTokenID=ht.encodeForSigningClaim=ht.encodeForSigningBatch=ht.encodeForSigning=ht.encodeForMultiSigning=ht.decode=ht.encode=ht.decodeXAddress=ht.encodeXAddress=ht.decodeAccountPublic=ht.encodeAccountPublic=ht.decodeNodePublic=ht.encodeNodePublic=ht.decodeAccountID=ht.encodeAccountID=ht.decodeSeed=ht.encodeSeed=ht.isValidClassicAddress=ht.isValidXAddress=ht.xAddressToClassicAddress=ht.classicAddressToXAddress=ht.convertHexToString=ht.convertStringToHex=ht.verifyPaymentChannelClaim=ht.verifyKeypairSignature=ht.signPaymentChannelClaim=ht.deriveXAddress=ht.deriveAddress=ht.deriveKeypair=ht.hashes=ht.isValidAddress=ht.isValidSecret=ht.qualityToDecimal=ht.transferRateToDecimal=ht.decimalToTransferRate=ht.percentToTransferRate=ht.decimalToQuality=ht.percentToQuality=ht.unixTimeToRippleTime=ht.rippleTimeToUnixTime=ht.isoTimeToRippleTime=ht.rippleTimeToISOTime=ht.hasNextPage=ht.xrpToDrops=ht.dropsToXrp=ht.getBalanceChanges=void 0;var fa=ml();Object.defineProperty(ht,"classicAddressToXAddress",{enumerable:!0,get:function(){return fa.classicAddressToXAddress}});Object.defineProperty(ht,"decodeAccountID",{enumerable:!0,get:function(){return fa.decodeAccountID}});Object.defineProperty(ht,"decodeAccountPublic",{enumerable:!0,get:function(){return fa.decodeAccountPublic}});Object.defineProperty(ht,"decodeNodePublic",{enumerable:!0,get:function(){return fa.decodeNodePublic}});Object.defineProperty(ht,"decodeSeed",{enumerable:!0,get:function(){return fa.decodeSeed}});Object.defineProperty(ht,"decodeXAddress",{enumerable:!0,get:function(){return fa.decodeXAddress}});Object.defineProperty(ht,"encodeAccountID",{enumerable:!0,get:function(){return fa.encodeAccountID}});Object.defineProperty(ht,"encodeAccountPublic",{enumerable:!0,get:function(){return fa.encodeAccountPublic}});Object.defineProperty(ht,"encodeNodePublic",{enumerable:!0,get:function(){return fa.encodeNodePublic}});Object.defineProperty(ht,"encodeSeed",{enumerable:!0,get:function(){return fa.encodeSeed}});Object.defineProperty(ht,"encodeXAddress",{enumerable:!0,get:function(){return fa.encodeXAddress}});Object.defineProperty(ht,"isValidClassicAddress",{enumerable:!0,get:function(){return fa.isValidClassicAddress}});Object.defineProperty(ht,"isValidXAddress",{enumerable:!0,get:function(){return fa.isValidXAddress}});Object.defineProperty(ht,"xAddressToClassicAddress",{enumerable:!0,get:function(){return fa.xAddressToClassicAddress}});var by=gl(),Q7e=vd();Object.defineProperty(ht,"verifyKeypairSignature",{enumerable:!0,get:function(){return Q7e.verify}});var b6=zie();Object.defineProperty(ht,"deriveKeypair",{enumerable:!0,get:function(){return b6.deriveKeypair}});Object.defineProperty(ht,"deriveAddress",{enumerable:!0,get:function(){return b6.deriveAddress}});Object.defineProperty(ht,"deriveXAddress",{enumerable:!0,get:function(){return b6.deriveXAddress}});var J7e=_y(Gie());ht.getBalanceChanges=J7e.default;var e9e=_y(Xie());ht.getNFTokenID=e9e.default;var t9e=_y(Yie());ht.getXChainClaimID=t9e.default;var Ka=HN(),n9e=_y(vre());ht.parseNFTokenID=n9e.default;var wy=Sre();Object.defineProperty(ht,"percentToTransferRate",{enumerable:!0,get:function(){return wy.percentToTransferRate}});Object.defineProperty(ht,"decimalToTransferRate",{enumerable:!0,get:function(){return wy.decimalToTransferRate}});Object.defineProperty(ht,"transferRateToDecimal",{enumerable:!0,get:function(){return wy.transferRateToDecimal}});Object.defineProperty(ht,"percentToQuality",{enumerable:!0,get:function(){return wy.percentToQuality}});Object.defineProperty(ht,"decimalToQuality",{enumerable:!0,get:function(){return wy.decimalToQuality}});Object.defineProperty(ht,"qualityToDecimal",{enumerable:!0,get:function(){return wy.qualityToDecimal}});var i9e=_y(Cre());ht.signPaymentChannelClaim=i9e.default;var Ire=kre();Object.defineProperty(ht,"convertHexToString",{enumerable:!0,get:function(){return Ire.convertHexToString}});Object.defineProperty(ht,"convertStringToHex",{enumerable:!0,get:function(){return Ire.convertStringToHex}});var w6=Are();Object.defineProperty(ht,"rippleTimeToISOTime",{enumerable:!0,get:function(){return w6.rippleTimeToISOTime}});Object.defineProperty(ht,"isoTimeToRippleTime",{enumerable:!0,get:function(){return w6.isoTimeToRippleTime}});Object.defineProperty(ht,"rippleTimeToUnixTime",{enumerable:!0,get:function(){return w6.rippleTimeToUnixTime}});Object.defineProperty(ht,"unixTimeToRippleTime",{enumerable:!0,get:function(){return w6.unixTimeToRippleTime}});var r9e=_y(Dre());ht.verifyPaymentChannelClaim=r9e.default;var Fre=Yw();Object.defineProperty(ht,"xrpToDrops",{enumerable:!0,get:function(){return Fre.xrpToDrops}});Object.defineProperty(ht,"dropsToXrp",{enumerable:!0,get:function(){return Fre.dropsToXrp}});function o9e(n){try{return(0,b6.deriveKeypair)(n),!0}catch{return!1}}ht.isValidSecret=o9e;function s9e(n){return(0,by.encode)(n)}ht.encode=s9e;function a9e(n){return(0,by.encodeForSigning)(n)}ht.encodeForSigning=a9e;function l9e(n){return(0,by.encodeForSigningClaim)(n)}ht.encodeForSigningClaim=l9e;function c9e(n,t){return(0,by.encodeForMultisigning)(n,t)}ht.encodeForMultiSigning=c9e;function d9e(n){return(0,by.encodeForSigningBatch)(n)}ht.encodeForSigningBatch=d9e;function u9e(n){return(0,by.decode)(n)}ht.decode=u9e;function h9e(n){return(0,fa.isValidXAddress)(n)||(0,fa.isValidClassicAddress)(n)}ht.isValidAddress=h9e;function f9e(n){return!!n.result.marker}ht.hasNextPage=f9e;var p9e={hashSignedTx:Ka.hashSignedTx,hashTx:Ka.hashTx,hashAccountRoot:Ka.hashAccountRoot,hashSignerListId:Ka.hashSignerListId,hashOfferId:Ka.hashOfferId,hashTrustline:Ka.hashTrustline,hashTxTree:Ka.hashTxTree,hashStateTree:Ka.hashStateTree,hashLedger:Ka.hashLedger,hashLedgerHeader:Ka.hashLedgerHeader,hashEscrow:Ka.hashEscrow,hashPaymentChannel:Ka.hashPaymentChannel,hashVault:Ka.hashVault,hashLoanBroker:Ka.hashLoanBroker,hashLoan:Ka.hashLoan};ht.hashes=p9e});var Lre=me(xc=>{"use strict";var u5=xc&&xc.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})};Object.defineProperty(xc,"__esModule",{value:!0});xc.getLastLedgerSequence=xc.getSignedTx=xc.waitForFinalTransactionOutcome=xc.submitRequest=void 0;var $N=Nt(),h5=d5(),m9e=1e3;function g9e(n){return u5(this,void 0,void 0,function*(){return new Promise(t=>{setTimeout(t,n)})})}function y9e(n,t,e=!1){return u5(this,void 0,void 0,function*(){if(!Pre(t))throw new $N.ValidationError("Transaction must be signed.");let r={command:"submit",tx_blob:typeof t=="string"?t:(0,h5.encode)(t),fail_hard:b9e(t)||e};return n.request(r)})}xc.submitRequest=y9e;function qN(n,t,e,i){return u5(this,void 0,void 0,function*(){yield g9e(m9e);let r=yield n.getLedgerIndex();if(e<r)throw new $N.XrplError(`The latest ledger sequence ${r} is greater than the transaction's LastLedgerSequence (${e}).
Preliminary result: ${i}`);let o=yield n.request({command:"tx",transaction:t}).catch(s=>u5(this,void 0,void 0,function*(){var a;let l=(a=s?.data)===null||a===void 0?void 0:a.error;if(l==="txnNotFound")return qN(n,t,e,i);throw new Error(`${l} 
 Preliminary result: ${i}.
Full error details: ${String(s)}`)}));return o.result.validated?o:qN(n,t,e,i)})}xc.waitForFinalTransactionOutcome=qN;function Pre(n){let t=typeof n=="string"?(0,h5.decode)(n):n;if(typeof t=="string")return!1;if(t.Signers!=null){let e=t.Signers;for(let i of e)if(i.Signer.SigningPubKey==null||i.Signer.TxnSignature==null)return!1;return!0}return t.SigningPubKey!=null&&t.TxnSignature!=null}function v9e(n,t,{autofill:e=!0,wallet:i}={}){return u5(this,void 0,void 0,function*(){if(Pre(t))return t;if(!i)throw new $N.ValidationError("Wallet must be provided when submitting an unsigned transaction");let r=typeof t=="string"?(0,h5.decode)(t):t;return e&&(r=yield n.autofill(r)),i.sign(r).tx_blob})}xc.getSignedTx=v9e;function _9e(n){return(typeof n=="string"?(0,h5.decode)(n):n).LastLedgerSequence}xc.getLastLedgerSequence=_9e;function b9e(n){return(typeof n=="string"?(0,h5.decode)(n):n).TransactionType==="AccountDelete"}});var KN=me(S6=>{"use strict";Object.defineProperty(S6,"__esModule",{value:!0});S6.ensureClassicAddress=void 0;var Rre=ml();function w9e(n){if((0,Rre.isValidXAddress)(n)){let{classicAddress:t,tag:e}=(0,Rre.xAddressToClassicAddress)(n);if(e!==!1)throw new Error("This command does not support the use of a tag. Use an address without a tag.");return t}return n}S6.ensureClassicAddress=w9e});var Nre=me(Lp=>{"use strict";var S9e=Lp&&Lp.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),Ore=Lp&&Lp.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&S9e(t,n,e)};Object.defineProperty(Lp,"__esModule",{value:!0});Ore(Lre(),Lp);Ore(KN(),Lp)});var Bre=me(Jm=>{"use strict";var C9e=Jm&&Jm.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},x9e=Jm&&Jm.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Jm,"__esModule",{value:!0});var GN=x9e(Us()),k9e=Nt(),M9e=6,T9e=10;function E9e(n,t){var e,i;return C9e(this,void 0,void 0,function*(){let r=t??n.feeCushion,o=(yield n.request({command:"server_info"})).result.info,s=(e=o.validated_ledger)===null||e===void 0?void 0:e.base_fee_xrp;if(s==null)throw new k9e.XrplError("getFeeXrp: Could not get base_fee_xrp from server_info");let a=new GN.default(s);(i=o.load_factor)!==null&&i!==void 0||(o.load_factor=1);let l=a.times(o.load_factor).times(r);return l=GN.default.min(l,n.maxFeeXRP),new GN.default(l.toFixed(M9e)).toString(T9e)})}Jm.default=E9e});var Kre=me(Bo=>{"use strict";var Nu=Bo&&Bo.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},Hre=Bo&&Bo.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.autofillBatchTxn=Bo.handleDeliverMax=Bo.checkAccountDeleteBlockers=Bo.setLatestValidatedLedgerSequence=Bo.getTransactionFee=Bo.setNextValidSequenceNumber=Bo.setValidAddresses=Bo.txNeedsNetworkID=void 0;var _d=Hre(Us()),Vre=ml(),Qh=Nt(),Ure=d5(),A9e=Hre(Bre()),D9e=20,I9e=1024,F9e="1.11.0";function P9e(n,t){if(n===t)return!0;let e=n.split("."),i=t.split("."),r=parseInt(e[0],10),o=parseInt(e[1],10),s=parseInt(i[0],10),a=parseInt(i[1],10);if(r!==s)return r<s;if(o!==a)return o<a;let l=e[2].split("-"),c=i[2].split("-"),d=parseInt(l[0],10),u=parseInt(c[0],10);return d!==u?d<u:l.length!==c.length?l.length>c.length:l.length===2?l[1][0].startsWith(c[1][0])?l[1].startsWith("b")?parseInt(l[1].slice(1),10)<parseInt(c[1].slice(1),10):parseInt(l[1].slice(2),10)<parseInt(c[1].slice(2),10):l[1]<c[1]:!1}function Wre(n){return!!(n.networkID!==void 0&&n.networkID>I9e&&n.buildVersion&&P9e(F9e,n.buildVersion))}Bo.txNeedsNetworkID=Wre;function L9e(n){jre(n,"Account","SourceTag"),n.Destination!=null&&jre(n,"Destination","DestinationTag"),C6(n,"Authorize"),C6(n,"Unauthorize"),C6(n,"Owner"),C6(n,"RegularKey")}Bo.setValidAddresses=L9e;function jre(n,t,e){let{classicAccount:i,tag:r}=zre(n[t]);if(n[t]=i,r!=null&&r!==!1){if(n[e]&&n[e]!==r)throw new Qh.ValidationError(`The ${e}, if present, must match the tag of the ${t} X-address`);n[e]=r}}function zre(n,t){if((0,Vre.isValidXAddress)(n)){let e=(0,Vre.xAddressToClassicAddress)(n);if(t!=null&&e.tag!==t)throw new Qh.ValidationError("address includes a tag that does not match the tag specified in the transaction");return{classicAccount:e.classicAddress,tag:e.tag}}return{classicAccount:n,tag:t}}function C6(n,t){let e=n[t];if(typeof e=="string"){let{classicAccount:i}=zre(e);n[t]=i}}function qre(n,t){return Nu(this,void 0,void 0,function*(){let e={command:"account_info",account:t,ledger_index:"current"};return(yield n.request(e)).result.account_data.Sequence})}function R9e(n,t){return Nu(this,void 0,void 0,function*(){t.Sequence=yield qre(n,t.Account)})}Bo.setNextValidSequenceNumber=R9e;function O9e(n){var t;return Nu(this,void 0,void 0,function*(){let i=(t=(yield n.request({command:"server_state"})).result.state.validated_ledger)===null||t===void 0?void 0:t.reserve_inc;return i==null?Promise.reject(new Error("Could not fetch Owner Reserve.")):new _d.default(i)})}function N9e(n,t){var e,i;return Nu(this,void 0,void 0,function*(){let r=t.Counterparty;if(r==null){if(t.LoanBrokerID==null)throw new Qh.ValidationError("LoanBrokerID is required for LoanSet transaction");r=(yield n.request({command:"ledger_entry",index:t.LoanBrokerID,ledger_index:"validated"})).result.node.Owner}let o={command:"account_info",account:r,ledger_index:"validated",signer_lists:!0},a=(e=(yield n.request(o)).result.signer_lists)===null||e===void 0?void 0:e[0];return(i=a?.SignerEntries.length)!==null&&i!==void 0?i:1})}function $re(n,t,e=0){return Nu(this,void 0,void 0,function*(){let i=yield(0,A9e.default)(n),r=(0,Ure.xrpToDrops)(i),o=new _d.default(r),s=["AccountDelete","AMMCreate","VaultCreate"].includes(t.TransactionType);if(t.TransactionType==="EscrowFinish"&&t.Fulfillment!=null){let c=Math.ceil(t.Fulfillment.length/2);o=new _d.default(XN(r,33+c/16))}else if(s)o=yield O9e(n);else if(t.TransactionType==="Batch"){let c=yield t.RawTransactions.reduce((d,u)=>Nu(this,void 0,void 0,function*(){let h=yield d,f=yield $re(n,u.RawTransaction);return _d.default.sum(h,f)}),Promise.resolve(new _d.default(0)));o=_d.default.sum(o.times(2),c)}if(e>0&&(o=_d.default.sum(o,XN(r,e))),t.TransactionType==="LoanSet"){let c=yield N9e(n,t);o=_d.default.sum(o,XN(r,c)),console.warn("For LoanSet transaction the auto calculated Fee accounts for total number of signers the counterparty has to avoid transaction failure.")}let a=(0,Ure.xrpToDrops)(n.maxFeeXRP);return(s?o:_d.default.min(o,a)).dp(0,_d.default.ROUND_CEIL)})}function B9e(n,t,e=0){return Nu(this,void 0,void 0,function*(){let i=yield $re(n,t,e);t.Fee=i.toString(10)})}Bo.getTransactionFee=B9e;function XN(n,t){return new _d.default(n).times(t).toString()}function V9e(n,t){return Nu(this,void 0,void 0,function*(){let e=yield n.getLedgerIndex();t.LastLedgerSequence=e+D9e})}Bo.setLatestValidatedLedgerSequence=V9e;function U9e(n,t){return Nu(this,void 0,void 0,function*(){let e={command:"account_objects",account:t.Account,ledger_index:"validated",deletion_blockers_only:!0},i=yield n.request(e);return new Promise((r,o)=>{i.result.account_objects.length>0&&o(new Qh.XrplError(`Account ${t.Account} cannot be deleted; there are Escrows, PayChannels, RippleStates, or Checks associated with the account.`,i.result.account_objects)),r()})})}Bo.checkAccountDeleteBlockers=U9e;function j9e(n){var t;if(n.DeliverMax!=null){if((t=n.Amount)!==null&&t!==void 0||(n.Amount=n.DeliverMax),n.Amount!=null&&n.Amount!==n.DeliverMax)throw new Qh.ValidationError("PaymentTransaction: Amount and DeliverMax fields must be identical when both are provided");delete n.DeliverMax}}Bo.handleDeliverMax=j9e;function H9e(n,t){return Nu(this,void 0,void 0,function*(){let e={};for(let i of t.RawTransactions){let r=i.RawTransaction;if(r.Sequence==null&&r.TicketSequence==null)if(r.Account in e)r.Sequence=e[r.Account],e[r.Account]+=1;else{let o=yield qre(n,r.Account),s=r.Account===t.Account?o+1:o;e[r.Account]=s+1,r.Sequence=s}if(r.Fee==null)r.Fee="0";else if(r.Fee!=="0")throw new Qh.XrplError('Must have `Fee of "0" in inner Batch transaction.');if(r.SigningPubKey==null)r.SigningPubKey="";else if(r.SigningPubKey!=="")throw new Qh.XrplError('Must have `SigningPubKey` of "" in inner Batch transaction.');if(r.TxnSignature!=null)throw new Qh.XrplError("Must not have `TxnSignature` in inner Batch transaction.");if(r.Signers!=null)throw new Qh.XrplError("Must not have `Signers` in inner Batch transaction.");r.NetworkID==null&&Wre(n)&&(r.NetworkID=n.networkID)}})}Bo.autofillBatchTxn=H9e});var Gre=me(x6=>{"use strict";Object.defineProperty(x6,"__esModule",{value:!0});x6.formatBalances=void 0;function W9e(n){return n.map(t=>({value:t.balance,currency:t.currency,issuer:t.account}))}x6.formatBalances=W9e});var YN=me(k6=>{"use strict";Object.defineProperty(k6,"__esModule",{value:!0});k6.OfferFlags=void 0;var Xre=(function(n){return n[n.lsfPassive=65536]="lsfPassive",n[n.lsfSell=131072]="lsfSell",n[n.lsfHybrid=262144]="lsfHybrid",n})(Xre||(k6.OfferFlags=Xre={}))});var Yre=me(Vo=>{"use strict";var z9e=Vo&&Vo.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},q9e=Vo&&Vo.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.sortAndLimitOffers=Vo.separateBuySellOrders=Vo.combineOrders=Vo.extractOffers=Vo.reverseRequest=Vo.requestAllOffers=Vo.createBookOffersRequest=Vo.validateOrderbookOptions=void 0;var $9e=q9e(Us()),f5=Nt(),K9e=YN(),G9e=20;function X9e(n){return n.sort((t,e)=>{var i,r;let o=(i=t.quality)!==null&&i!==void 0?i:0,s=(r=e.quality)!==null&&r!==void 0?r:0;return new $9e.default(o).comparedTo(s)})}var Y9e=new Set(["limit","ledger_index","ledger_hash","taker"]);function Z9e(n){for(let t of Object.keys(n))if(!Y9e.has(t))throw new f5.ValidationError(`Unexpected option: ${t}`,n);if(n.limit&&typeof n.limit!="number")throw new f5.ValidationError("limit must be a number",n.limit);if(n.ledger_index&&!(typeof n.ledger_index=="number"||typeof n.ledger_index=="string"&&["validated","closed","current"].includes(n.ledger_index)))throw new f5.ValidationError('ledger_index must be a number or a string of "validated", "closed", or "current"',n.ledger_index);if(n.ledger_hash!==void 0&&n.ledger_hash!==null&&typeof n.ledger_hash!="string")throw new f5.ValidationError("ledger_hash must be a string",n.ledger_hash);if(n.taker!==void 0&&typeof n.taker!="string")throw new f5.ValidationError("taker must be a string",n.taker)}Vo.validateOrderbookOptions=Z9e;function Q9e(n,t,e){var i,r,o;return{command:"book_offers",taker_pays:n,taker_gets:t,ledger_index:(i=e.ledger_index)!==null&&i!==void 0?i:"validated",ledger_hash:e.ledger_hash===null?void 0:e.ledger_hash,limit:(r=e.limit)!==null&&r!==void 0?r:G9e,taker:(o=e.taker)!==null&&o!==void 0?o:void 0}}Vo.createBookOffersRequest=Q9e;function J9e(n,t){return z9e(this,void 0,void 0,function*(){return(yield n.requestAll(t)).map(i=>i.result.offers)})}Vo.requestAllOffers=J9e;function eFe(n){return Object.assign(Object.assign({},n),{taker_pays:n.taker_gets,taker_gets:n.taker_pays})}Vo.reverseRequest=eFe;function tFe(n){return n.flatMap(t=>t)}Vo.extractOffers=tFe;function nFe(n,t){return[...n,...t]}Vo.combineOrders=nFe;function iFe(n){let t=[],e=[];return n.forEach(i=>{(i.Flags&K9e.OfferFlags.lsfSell)===0?t.push(i):e.push(i)}),{buy:t,sell:e}}Vo.separateBuySellOrders=iFe;function rFe(n,t){return X9e(n).slice(0,t)}Vo.sortAndLimitOffers=rFe});var Jre=me(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.HDKey=ef.HARDENED_OFFSET=void 0;var oFe=$h(),Jh=r6(),Zre=KM(),sFe=xO(),E6=Cm(),pa=ja(),aFe=p4(),M6=Jh.secp256k1.ProjectivePoint,ZN=(0,aFe.createBase58check)(E6.sha256);function Qre(n){(0,pa.abytes)(n);let t=n.length===0?"0":(0,pa.bytesToHex)(n);return BigInt("0x"+t)}function lFe(n){if(typeof n!="bigint")throw new Error("bigint expected");return(0,pa.hexToBytes)(n.toString(16).padStart(64,"0"))}var cFe=(0,pa.utf8ToBytes)("Bitcoin seed"),QN={private:76066276,public:76067358};ef.HARDENED_OFFSET=2147483648;var dFe=n=>(0,sFe.ripemd160)((0,E6.sha256)(n)),uFe=n=>(0,pa.createView)(n).getUint32(0,!1),T6=n=>{if(!Number.isSafeInteger(n)||n<0||n>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+n);let t=new Uint8Array(4);return(0,pa.createView)(t).setUint32(0,n,!1),t},JN=class n{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return uFe(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){let t=this.privateKey;if(!t)throw new Error("No private key");return ZN.encode(this.serialize(this.versions.private,(0,pa.concatBytes)(new Uint8Array([0]),t)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return ZN.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(t,e=QN){if((0,pa.abytes)(t),8*t.length<128||8*t.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+t.length);let i=(0,Zre.hmac)(E6.sha512,cFe,t);return new n({versions:e,chainCode:i.slice(32),privateKey:i.slice(0,32)})}static fromExtendedKey(t,e=QN){let i=ZN.decode(t),r=(0,pa.createView)(i),o=r.getUint32(0,!1),s={versions:e,depth:i[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:i.slice(13,45)},a=i.slice(45),l=a[0]===0;if(o!==e[l?"private":"public"])throw new Error("Version mismatch");return l?new n(Ge(le({},s),{privateKey:a.slice(1)})):new n(Ge(le({},s),{publicKey:a}))}static fromJSON(t){return n.fromExtendedKey(t.xpriv)}constructor(t){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!t||typeof t!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=t.versions||QN,this.depth=t.depth||0,this.chainCode=t.chainCode||null,this.index=t.index||0,this.parentFingerprint=t.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(t.publicKey&&t.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(t.privateKey){if(!Jh.secp256k1.utils.isValidPrivateKey(t.privateKey))throw new Error("Invalid private key");this.privKey=typeof t.privateKey=="bigint"?t.privateKey:Qre(t.privateKey),this.privKeyBytes=lFe(this.privKey),this.pubKey=Jh.secp256k1.getPublicKey(t.privateKey,!0)}else if(t.publicKey)this.pubKey=M6.fromHex(t.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=dFe(this.pubKey)}derive(t){if(!/^[mM]'?/.test(t))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(t))return this;let e=t.replace(/^[mM]'?\//,"").split("/"),i=this;for(let r of e){let o=/^(\d+)('?)$/.exec(r),s=o&&o[1];if(!o||o.length!==3||typeof s!="string")throw new Error("invalid child index: "+r);let a=+s;if(!Number.isSafeInteger(a)||a>=ef.HARDENED_OFFSET)throw new Error("Invalid index");o[2]==="'"&&(a+=ef.HARDENED_OFFSET),i=i.deriveChild(a)}return i}deriveChild(t){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let e=T6(t);if(t>=ef.HARDENED_OFFSET){let a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");e=(0,pa.concatBytes)(new Uint8Array([0]),a,e)}else e=(0,pa.concatBytes)(this.pubKey,e);let i=(0,Zre.hmac)(E6.sha512,this.chainCode,e),r=Qre(i.slice(0,32)),o=i.slice(32);if(!Jh.secp256k1.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");let s={versions:this.versions,chainCode:o,depth:this.depth+1,parentFingerprint:this.fingerprint,index:t};try{if(this.privateKey){let a=(0,oFe.mod)(this.privKey+r,Jh.secp256k1.CURVE.n);if(!Jh.secp256k1.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");s.privateKey=a}else{let a=M6.fromHex(this.pubKey).add(M6.fromPrivateKey(r));if(a.equals(M6.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");s.publicKey=a.toRawBytes(!0)}return new n(s)}catch{return this.deriveChild(t+1)}}sign(t){if(!this.privateKey)throw new Error("No privateKey set!");return(0,pa.abytes)(t,32),Jh.secp256k1.sign(t,this.privKey).toCompactRawBytes()}verify(t,e){if((0,pa.abytes)(t,32),(0,pa.abytes)(e,64),!this.publicKey)throw new Error("No publicKey set!");let i;try{i=Jh.secp256k1.Signature.fromCompact(e)}catch{return!1}return Jh.secp256k1.verify(i,t,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(t,e){if(!this.chainCode)throw new Error("No chainCode set");return(0,pa.abytes)(e,33),(0,pa.concatBytes)(T6(t),new Uint8Array([this.depth]),T6(this.parentFingerprint),T6(this.index),this.chainCode,e)}};ef.HDKey=JN});var noe=me(A6=>{"use strict";Object.defineProperty(A6,"__esModule",{value:!0});A6.pbkdf2=fFe;A6.pbkdf2Async=pFe;var hFe=KM(),bd=ja();function eoe(n,t,e,i){(0,bd.ahash)(n);let r=(0,bd.checkOpts)({dkLen:32,asyncTick:10},i),{c:o,dkLen:s,asyncTick:a}=r;if((0,bd.anumber)(o),(0,bd.anumber)(s),(0,bd.anumber)(a),o<1)throw new Error("iterations (c) should be >= 1");let l=(0,bd.kdfInputToBytes)(t),c=(0,bd.kdfInputToBytes)(e),d=new Uint8Array(s),u=hFe.hmac.create(n,l),h=u._cloneInto().update(c);return{c:o,dkLen:s,asyncTick:a,DK:d,PRF:u,PRFSalt:h}}function toe(n,t,e,i,r){return n.destroy(),t.destroy(),i&&i.destroy(),(0,bd.clean)(r),e}function fFe(n,t,e,i){let{c:r,dkLen:o,DK:s,PRF:a,PRFSalt:l}=eoe(n,t,e,i),c,d=new Uint8Array(4),u=(0,bd.createView)(d),h=new Uint8Array(a.outputLen);for(let f=1,p=0;p<o;f++,p+=a.outputLen){let y=s.subarray(p,p+a.outputLen);u.setInt32(0,f,!1),(c=l._cloneInto(c)).update(d).digestInto(h),y.set(h.subarray(0,y.length));for(let v=1;v<r;v++){a._cloneInto(c).update(h).digestInto(h);for(let b=0;b<y.length;b++)y[b]^=h[b]}}return toe(a,l,s,c,h)}function pFe(n,t,e,i){return z(this,null,function*(){let{c:r,dkLen:o,asyncTick:s,DK:a,PRF:l,PRFSalt:c}=eoe(n,t,e,i),d,u=new Uint8Array(4),h=(0,bd.createView)(u),f=new Uint8Array(l.outputLen);for(let p=1,y=0;y<o;p++,y+=l.outputLen){let v=a.subarray(y,y+l.outputLen);h.setInt32(0,p,!1),(d=c._cloneInto(d)).update(u).digestInto(f),v.set(f.subarray(0,v.length)),yield(0,bd.asyncLoop)(r-1,s,()=>{l._cloneInto(d).update(f).digestInto(f);for(let b=0;b<v.length;b++)v[b]^=f[b]})}return toe(l,c,a,d,f)})}});var doe=me(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.generateMnemonic=gFe;Rp.mnemonicToEntropy=aoe;Rp.entropyToMnemonic=loe;Rp.validateMnemonic=vFe;Rp.mnemonicToSeed=_Fe;Rp.mnemonicToSeedSync=bFe;var ioe=noe(),tB=Cm(),eB=ja(),D6=p4(),mFe=n=>n[0]==="\u3042\u3044\u3053\u304F\u3057\u3093";function roe(n){if(typeof n!="string")throw new TypeError("invalid mnemonic type: "+typeof n);return n.normalize("NFKD")}function nB(n){let t=roe(n),e=t.split(" ");if(![12,15,18,21,24].includes(e.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:e}}function ooe(n){(0,eB.abytes)(n,16,20,24,28,32)}function gFe(n,t=128){if((0,eB.anumber)(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return loe((0,eB.randomBytes)(t/8),n)}var yFe=n=>{let t=8-n.length/4;return new Uint8Array([(0,tB.sha256)(n)[0]>>t<<t])};function soe(n){if(!Array.isArray(n)||n.length!==2048||typeof n[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return n.forEach(t=>{if(typeof t!="string")throw new Error("wordlist: non-string element: "+t)}),D6.utils.chain(D6.utils.checksum(1,yFe),D6.utils.radix2(11,!0),D6.utils.alphabet(n))}function aoe(n,t){let{words:e}=nB(n),i=soe(t).decode(e);return ooe(i),i}function loe(n,t){return ooe(n),soe(t).encode(n).join(mFe(t)?"\u3000":" ")}function vFe(n,t){try{aoe(n,t)}catch{return!1}return!0}var coe=n=>roe("mnemonic"+n);function _Fe(n,t=""){return(0,ioe.pbkdf2Async)(tB.sha512,nB(n).nfkd,coe(t),{c:2048,dkLen:64})}function bFe(n,t=""){return(0,ioe.pbkdf2)(tB.sha512,nB(n).nfkd,coe(t),{c:2048,dkLen:64})}});var uoe=me(I6=>{"use strict";Object.defineProperty(I6,"__esModule",{value:!0});I6.wordlist=void 0;I6.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`)});var F6=me(iB=>{"use strict";Object.defineProperty(iB,"__esModule",{value:!0});var hoe=(function(n){return n.ed25519="ed25519",n.secp256k1="ecdsa-secp256k1",n})(hoe||{});iB.default=hoe});var foe=me(P6=>{"use strict";Object.defineProperty(P6,"__esModule",{value:!0});P6.validateAccountDelete=void 0;var e1=At();function wFe(n){(0,e1.validateBaseTransaction)(n),(0,e1.validateRequiredField)(n,"Destination",e1.isAccount),(0,e1.validateOptionalField)(n,"DestinationTag",e1.isNumber),(0,e1.validateCredentialsList)(n.CredentialIDs,n.TransactionType,!0,e1.MAX_AUTHORIZED_CREDENTIALS)}P6.validateAccountDelete=wFe});var moe=me(L6=>{"use strict";Object.defineProperty(L6,"__esModule",{value:!0});L6.validateAMMBid=void 0;var $l=Nt(),Op=At(),poe=4;function SFe(n){if((0,Op.validateBaseTransaction)(n),n.Asset==null)throw new $l.ValidationError("AMMBid: missing field Asset");if(!(0,Op.isIssuedCurrency)(n.Asset))throw new $l.ValidationError("AMMBid: Asset must be a Currency");if(n.Asset2==null)throw new $l.ValidationError("AMMBid: missing field Asset2");if(!(0,Op.isIssuedCurrency)(n.Asset2))throw new $l.ValidationError("AMMBid: Asset2 must be a Currency");if(n.BidMin!=null&&!(0,Op.isAmount)(n.BidMin))throw new $l.ValidationError("AMMBid: BidMin must be an Amount");if(n.BidMax!=null&&!(0,Op.isAmount)(n.BidMax))throw new $l.ValidationError("AMMBid: BidMax must be an Amount");if(n.AuthAccounts!=null){if(!(0,Op.isArray)(n.AuthAccounts))throw new $l.ValidationError("AMMBid: AuthAccounts must be an AuthAccount array");if(n.AuthAccounts.length>poe)throw new $l.ValidationError(`AMMBid: AuthAccounts length must not be greater than ${poe}`);CFe(n.Account,n.AuthAccounts)}}L6.validateAMMBid=SFe;function CFe(n,t){for(let e of t){if(!(0,Op.isRecord)(e))throw new $l.ValidationError("AMMBid: invalid AuthAccounts");if(!(0,Op.isRecord)(e.AuthAccount))throw new $l.ValidationError("AMMBid: invalid AuthAccounts");if(e.AuthAccount.Account==null)throw new $l.ValidationError("AMMBid: invalid AuthAccounts");if(typeof e.AuthAccount.Account!="string")throw new $l.ValidationError("AMMBid: invalid AuthAccounts");if(e.AuthAccount.Account===n)throw new $l.ValidationError("AMMBid: AuthAccounts must not include sender's address")}return!0}});var oB=me(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.validateAMMCreate=Np.AMM_MAX_TRADING_FEE=void 0;var t1=Nt(),rB=At();Np.AMM_MAX_TRADING_FEE=1e3;function xFe(n){if((0,rB.validateBaseTransaction)(n),n.Amount==null)throw new t1.ValidationError("AMMCreate: missing field Amount");if(!(0,rB.isAmount)(n.Amount))throw new t1.ValidationError("AMMCreate: Amount must be an Amount");if(n.Amount2==null)throw new t1.ValidationError("AMMCreate: missing field Amount2");if(!(0,rB.isAmount)(n.Amount2))throw new t1.ValidationError("AMMCreate: Amount2 must be an Amount");if(n.TradingFee==null)throw new t1.ValidationError("AMMCreate: missing field TradingFee");if(typeof n.TradingFee!="number")throw new t1.ValidationError("AMMCreate: TradingFee must be a number");if(n.TradingFee<0||n.TradingFee>Np.AMM_MAX_TRADING_FEE)throw new t1.ValidationError(`AMMCreate: TradingFee must be between 0 and ${Np.AMM_MAX_TRADING_FEE}`)}Np.validateAMMCreate=xFe});var goe=me(O6=>{"use strict";Object.defineProperty(O6,"__esModule",{value:!0});O6.validateAMMDelete=void 0;var R6=Nt(),sB=At();function kFe(n){if((0,sB.validateBaseTransaction)(n),n.Asset==null)throw new R6.ValidationError("AMMDelete: missing field Asset");if(!(0,sB.isIssuedCurrency)(n.Asset))throw new R6.ValidationError("AMMDelete: Asset must be a Currency");if(n.Asset2==null)throw new R6.ValidationError("AMMDelete: missing field Asset2");if(!(0,sB.isIssuedCurrency)(n.Asset2))throw new R6.ValidationError("AMMDelete: Asset2 must be a Currency")}O6.validateAMMDelete=kFe});var voe=me(N6=>{"use strict";Object.defineProperty(N6,"__esModule",{value:!0});N6.validateAMMVote=void 0;var n1=Nt(),yoe=oB(),aB=At();function MFe(n){if((0,aB.validateBaseTransaction)(n),n.Asset==null)throw new n1.ValidationError("AMMVote: missing field Asset");if(!(0,aB.isIssuedCurrency)(n.Asset))throw new n1.ValidationError("AMMVote: Asset must be a Currency");if(n.Asset2==null)throw new n1.ValidationError("AMMVote: missing field Asset2");if(!(0,aB.isIssuedCurrency)(n.Asset2))throw new n1.ValidationError("AMMVote: Asset2 must be a Currency");if(n.TradingFee==null)throw new n1.ValidationError("AMMVote: missing field TradingFee");if(typeof n.TradingFee!="number")throw new n1.ValidationError("AMMVote: TradingFee must be a number");if(n.TradingFee<0||n.TradingFee>yoe.AMM_MAX_TRADING_FEE)throw new n1.ValidationError(`AMMVote: TradingFee must be between 0 and ${yoe.AMM_MAX_TRADING_FEE}`)}N6.validateAMMVote=MFe});var _oe=me(B6=>{"use strict";Object.defineProperty(B6,"__esModule",{value:!0});B6.validateCheckCancel=void 0;var TFe=Nt(),EFe=At();function AFe(n){if((0,EFe.validateBaseTransaction)(n),n.CheckID!==void 0&&typeof n.CheckID!="string")throw new TFe.ValidationError("CheckCancel: invalid CheckID")}B6.validateCheckCancel=AFe});var boe=me(V6=>{"use strict";Object.defineProperty(V6,"__esModule",{value:!0});V6.validateCheckCash=void 0;var p5=Nt(),lB=At();function DFe(n){if((0,lB.validateBaseTransaction)(n),n.Amount==null&&n.DeliverMin==null)throw new p5.ValidationError("CheckCash: must have either Amount or DeliverMin");if(n.Amount!=null&&n.DeliverMin!=null)throw new p5.ValidationError("CheckCash: cannot have both Amount and DeliverMin");if(n.Amount!=null&&n.Amount!==void 0&&!(0,lB.isAmount)(n.Amount))throw new p5.ValidationError("CheckCash: invalid Amount");if(n.DeliverMin!=null&&n.DeliverMin!==void 0&&!(0,lB.isAmount)(n.DeliverMin))throw new p5.ValidationError("CheckCash: invalid DeliverMin");if(n.CheckID!==void 0&&typeof n.CheckID!="string")throw new p5.ValidationError("CheckCash: invalid CheckID")}V6.validateCheckCash=DFe});var woe=me(j6=>{"use strict";Object.defineProperty(j6,"__esModule",{value:!0});j6.validateCheckCreate=void 0;var U6=Nt(),Sy=At();function IFe(n){if((0,Sy.validateBaseTransaction)(n),n.SendMax===void 0)throw new U6.ValidationError("CheckCreate: missing field SendMax");if((0,Sy.validateRequiredField)(n,"Destination",Sy.isAccount),(0,Sy.validateOptionalField)(n,"DestinationTag",Sy.isNumber),typeof n.SendMax!="string"&&!(0,Sy.isIssuedCurrencyAmount)(n.SendMax))throw new U6.ValidationError("CheckCreate: invalid SendMax");if(n.Expiration!==void 0&&typeof n.Expiration!="number")throw new U6.ValidationError("CheckCreate: invalid Expiration");if(n.InvoiceID!==void 0&&typeof n.InvoiceID!="string")throw new U6.ValidationError("CheckCreate: invalid InvoiceID")}j6.validateCheckCreate=IFe});var Soe=me(H6=>{"use strict";Object.defineProperty(H6,"__esModule",{value:!0});H6.validateClawback=void 0;var m5=Nt(),wd=At();function FFe(n){if((0,wd.validateBaseTransaction)(n),(0,wd.validateRequiredField)(n,"Amount",wd.isClawbackAmount),(0,wd.validateOptionalField)(n,"Holder",wd.isAccount),!(0,wd.isIssuedCurrencyAmount)(n.Amount)&&!(0,wd.isMPTAmount)(n.Amount))throw new m5.ValidationError("Clawback: invalid Amount");if((0,wd.isIssuedCurrencyAmount)(n.Amount)&&n.Account===n.Amount.issuer)throw new m5.ValidationError("Clawback: invalid holder Account");if((0,wd.isMPTAmount)(n.Amount)&&n.Account===n.Holder)throw new m5.ValidationError("Clawback: invalid holder Account");if((0,wd.isIssuedCurrencyAmount)(n.Amount)&&n.Holder)throw new m5.ValidationError("Clawback: cannot have Holder for currency");if((0,wd.isMPTAmount)(n.Amount)&&!n.Holder)throw new m5.ValidationError("Clawback: missing Holder")}H6.validateClawback=FFe});var Coe=me(W6=>{"use strict";Object.defineProperty(W6,"__esModule",{value:!0});W6.validateCredentialAccept=void 0;var Cy=At();function PFe(n){(0,Cy.validateBaseTransaction)(n),(0,Cy.validateRequiredField)(n,"Account",Cy.isString),(0,Cy.validateRequiredField)(n,"Issuer",Cy.isString),(0,Cy.validateCredentialType)(n)}W6.validateCredentialAccept=PFe});var koe=me(q6=>{"use strict";Object.defineProperty(q6,"__esModule",{value:!0});q6.validateCredentialCreate=void 0;var LFe=qi(),z6=Nt(),Bp=At(),xoe=256;function RFe(n){(0,Bp.validateBaseTransaction)(n),(0,Bp.validateRequiredField)(n,"Account",Bp.isString),(0,Bp.validateRequiredField)(n,"Subject",Bp.isString),(0,Bp.validateCredentialType)(n),(0,Bp.validateOptionalField)(n,"Expiration",Bp.isNumber),OFe(n.URI)}q6.validateCredentialCreate=RFe;function OFe(n){if(n!==void 0){if(typeof n!="string")throw new z6.ValidationError("CredentialCreate: invalid field URI");if(n.length===0)throw new z6.ValidationError("CredentialCreate: URI cannot be an empty string");if(n.length>xoe)throw new z6.ValidationError(`CredentialCreate: URI length must be <= ${xoe}`);if(!LFe.HEX_REGEX.test(n))throw new z6.ValidationError("CredentialCreate: URI must be encoded in hex")}}});var Moe=me($6=>{"use strict";Object.defineProperty($6,"__esModule",{value:!0});$6.validateCredentialDelete=void 0;var NFe=Nt(),Vp=At();function BFe(n){if((0,Vp.validateBaseTransaction)(n),!n.Subject&&!n.Issuer)throw new NFe.ValidationError("CredentialDelete: either `Issuer` or `Subject` must be provided");(0,Vp.validateRequiredField)(n,"Account",Vp.isString),(0,Vp.validateCredentialType)(n),(0,Vp.validateOptionalField)(n,"Subject",Vp.isString),(0,Vp.validateOptionalField)(n,"Issuer",Vp.isString)}$6.validateCredentialDelete=BFe});var Eoe=me(G6=>{"use strict";Object.defineProperty(G6,"__esModule",{value:!0});G6.validateDelegateSet=void 0;var i1=Nt(),K6=At(),Toe=10,VFe=new Set(["AccountSet","SetRegularKey","SignerListSet","DelegateSet","AccountDelete","Batch","EnableAmendment","SetFee","UNLModify"]);function UFe(n){if((0,K6.validateBaseTransaction)(n),(0,K6.validateRequiredField)(n,"Authorize",K6.isAccount),n.Authorize===n.Account)throw new i1.ValidationError("DelegateSet: Authorize and Account must be different.");(0,K6.validateRequiredField)(n,"Permissions",Array.isArray);let t=n.Permissions;if(t.length>Toe)throw new i1.ValidationError(`DelegateSet: Permissions array length cannot be greater than ${Toe}.`);let e=new Set;if(t.forEach(i=>{if(i==null||Object.keys(i).length!==1||i.Permission==null||Object.keys(i.Permission).length!==1)throw new i1.ValidationError("DelegateSet: Permissions array element is malformed");let r=i.Permission.PermissionValue;if(r==null)throw new i1.ValidationError("DelegateSet: PermissionValue must be defined");if(typeof r!="string")throw new i1.ValidationError("DelegateSet: PermissionValue must be a string");if(VFe.has(r))throw new i1.ValidationError(`DelegateSet: PermissionValue contains a non-delegatable transaction ${r}`);e.add(r)}),t.length!==e.size)throw new i1.ValidationError("DelegateSet: Permissions array cannot contain duplicate values")}G6.validateDelegateSet=UFe});var Aoe=me(X6=>{"use strict";Object.defineProperty(X6,"__esModule",{value:!0});X6.validateDepositPreauth=void 0;var y5=Nt(),g5=At();function jFe(n){if((0,g5.validateBaseTransaction)(n),HFe(n),n.Authorize!==void 0){if(typeof n.Authorize!="string")throw new y5.ValidationError("DepositPreauth: Authorize must be a string");if(n.Account===n.Authorize)throw new y5.ValidationError("DepositPreauth: Account can't preauthorize its own address")}else if(n.Unauthorize!==void 0){if(typeof n.Unauthorize!="string")throw new y5.ValidationError("DepositPreauth: Unauthorize must be a string");if(n.Account===n.Unauthorize)throw new y5.ValidationError("DepositPreauth: Account can't unauthorize its own address")}else n.AuthorizeCredentials!==void 0?(0,g5.validateCredentialsList)(n.AuthorizeCredentials,n.TransactionType,!1,g5.MAX_AUTHORIZED_CREDENTIALS):n.UnauthorizeCredentials!==void 0&&(0,g5.validateCredentialsList)(n.UnauthorizeCredentials,n.TransactionType,!1,g5.MAX_AUTHORIZED_CREDENTIALS)}X6.validateDepositPreauth=jFe;function HFe(n){if(["Authorize","Unauthorize","AuthorizeCredentials","UnauthorizeCredentials"].filter(i=>n[i]!==void 0).length!==1)throw new y5.ValidationError("DepositPreauth: Requires exactly one field of the following: Authorize, Unauthorize, AuthorizeCredentials, UnauthorizeCredentials.")}});var Doe=me(Y6=>{"use strict";Object.defineProperty(Y6,"__esModule",{value:!0});Y6.validateDIDDelete=void 0;var WFe=At();function zFe(n){(0,WFe.validateBaseTransaction)(n)}Y6.validateDIDDelete=zFe});var Ioe=me(Z6=>{"use strict";Object.defineProperty(Z6,"__esModule",{value:!0});Z6.validateDIDSet=void 0;var qFe=Nt(),r1=At();function $Fe(n){if((0,r1.validateBaseTransaction)(n),(0,r1.validateOptionalField)(n,"Data",r1.isString),(0,r1.validateOptionalField)(n,"DIDDocument",r1.isString),(0,r1.validateOptionalField)(n,"URI",r1.isString),n.Data===void 0&&n.DIDDocument===void 0&&n.URI===void 0)throw new qFe.ValidationError("DIDSet: Must have at least one of `Data`, `DIDDocument`, and `URI`")}Z6.validateDIDSet=$Fe});var Poe=me(Q6=>{"use strict";Object.defineProperty(Q6,"__esModule",{value:!0});Q6.validateEscrowCancel=void 0;var Foe=Nt(),cB=At();function KFe(n){if((0,cB.validateBaseTransaction)(n),(0,cB.validateRequiredField)(n,"Owner",cB.isAccount),n.OfferSequence==null)throw new Foe.ValidationError("EscrowCancel: missing OfferSequence");if(typeof n.OfferSequence!="number"&&typeof n.OfferSequence!="string"||Number.isNaN(Number(n.OfferSequence)))throw new Foe.ValidationError("EscrowCancel: OfferSequence must be a number")}Q6.validateEscrowCancel=KFe});var Loe=me(J6=>{"use strict";Object.defineProperty(J6,"__esModule",{value:!0});J6.validateEscrowCreate=void 0;var v5=Nt(),o1=At();function GFe(n){if((0,o1.validateBaseTransaction)(n),(0,o1.validateRequiredField)(n,"Amount",o1.isAmount),(0,o1.validateRequiredField)(n,"Destination",o1.isAccount),(0,o1.validateOptionalField)(n,"DestinationTag",o1.isNumber),n.CancelAfter===void 0&&n.FinishAfter===void 0)throw new v5.ValidationError("EscrowCreate: Either CancelAfter or FinishAfter must be specified");if(n.FinishAfter===void 0&&n.Condition===void 0)throw new v5.ValidationError("EscrowCreate: Either Condition or FinishAfter must be specified");if(n.CancelAfter!==void 0&&typeof n.CancelAfter!="number")throw new v5.ValidationError("EscrowCreate: CancelAfter must be a number");if(n.FinishAfter!==void 0&&typeof n.FinishAfter!="number")throw new v5.ValidationError("EscrowCreate: FinishAfter must be a number");if(n.Condition!==void 0&&typeof n.Condition!="string")throw new v5.ValidationError("EscrowCreate: Condition must be a string")}J6.validateEscrowCreate=GFe});var Roe=me(tT=>{"use strict";Object.defineProperty(tT,"__esModule",{value:!0});tT.validateEscrowFinish=void 0;var eT=Nt(),_5=At();function XFe(n){if((0,_5.validateBaseTransaction)(n),(0,_5.validateRequiredField)(n,"Owner",_5.isAccount),(0,_5.validateCredentialsList)(n.CredentialIDs,n.TransactionType,!0,_5.MAX_AUTHORIZED_CREDENTIALS),n.OfferSequence==null)throw new eT.ValidationError("EscrowFinish: missing field OfferSequence");if(typeof n.OfferSequence!="number"&&typeof n.OfferSequence!="string"||Number.isNaN(Number(n.OfferSequence)))throw new eT.ValidationError("EscrowFinish: OfferSequence must be a number");if(n.Condition!==void 0&&typeof n.Condition!="string")throw new eT.ValidationError("EscrowFinish: Condition must be a string");if(n.Fulfillment!==void 0&&typeof n.Fulfillment!="string")throw new eT.ValidationError("EscrowFinish: Fulfillment must be a string")}tT.validateEscrowFinish=XFe});var Ooe=me(ky=>{"use strict";var YFe=ky&&ky.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ky,"__esModule",{value:!0});ky.validateLoanBrokerCoverClawback=void 0;var ZFe=YFe(Us()),dB=Nt(),xy=At();function QFe(n){if((0,xy.validateBaseTransaction)(n),(0,xy.validateOptionalField)(n,"LoanBrokerID",xy.isString),(0,xy.validateOptionalField)(n,"Amount",xy.isTokenAmount),n.LoanBrokerID!=null&&!(0,xy.isLedgerEntryId)(n.LoanBrokerID))throw new dB.ValidationError("LoanBrokerCoverClawback: LoanBrokerID must be 64 characters hexadecimal string");if(n.Amount!=null&&new ZFe.default(n.Amount.value).isLessThan(0))throw new dB.ValidationError("LoanBrokerCoverClawback: Amount must be >= 0");if(n.LoanBrokerID==null&&n.Amount==null)throw new dB.ValidationError("LoanBrokerCoverClawback: Either LoanBrokerID or Amount is required")}ky.validateLoanBrokerCoverClawback=QFe});var Noe=me(nT=>{"use strict";Object.defineProperty(nT,"__esModule",{value:!0});nT.validateLoanBrokerCoverDeposit=void 0;var JFe=Nt(),My=At();function ePe(n){if((0,My.validateBaseTransaction)(n),(0,My.validateRequiredField)(n,"LoanBrokerID",My.isString),(0,My.validateRequiredField)(n,"Amount",My.isAmount),!(0,My.isLedgerEntryId)(n.LoanBrokerID))throw new JFe.ValidationError("LoanBrokerCoverDeposit: LoanBrokerID must be 64 characters hexadecimal string")}nT.validateLoanBrokerCoverDeposit=ePe});var Boe=me(iT=>{"use strict";Object.defineProperty(iT,"__esModule",{value:!0});iT.validateLoanBrokerCoverWithdraw=void 0;var tPe=Nt(),Up=At();function nPe(n){if((0,Up.validateBaseTransaction)(n),(0,Up.validateRequiredField)(n,"LoanBrokerID",Up.isString),(0,Up.validateRequiredField)(n,"Amount",Up.isAmount),(0,Up.validateOptionalField)(n,"Destination",Up.isAccount),!(0,Up.isLedgerEntryId)(n.LoanBrokerID))throw new tPe.ValidationError("LoanBrokerCoverWithdraw: LoanBrokerID must be 64 characters hexadecimal string")}iT.validateLoanBrokerCoverWithdraw=nPe});var Voe=me(oT=>{"use strict";Object.defineProperty(oT,"__esModule",{value:!0});oT.validateLoanBrokerDelete=void 0;var iPe=Nt(),rT=At();function rPe(n){if((0,rT.validateBaseTransaction)(n),(0,rT.validateRequiredField)(n,"LoanBrokerID",rT.isString),!(0,rT.isLedgerEntryId)(n.LoanBrokerID))throw new iPe.ValidationError("LoanBrokerDelete: LoanBrokerID must be 64 characters hexadecimal string")}oT.validateLoanBrokerDelete=rPe});var zoe=me(Ty=>{"use strict";var oPe=Ty&&Ty.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ty,"__esModule",{value:!0});Ty.validateLoanBrokerSet=void 0;var sPe=oPe(Us()),jp=Nt(),As=At(),Uoe=512,joe=1e4,Hoe=1e5,Woe=1e5;function aPe(n){var t,e;if((0,As.validateBaseTransaction)(n),(0,As.validateRequiredField)(n,"VaultID",As.isString),(0,As.validateOptionalField)(n,"LoanBrokerID",As.isString),(0,As.validateOptionalField)(n,"Data",As.isString),(0,As.validateOptionalField)(n,"ManagementFeeRate",As.isNumber),(0,As.validateOptionalField)(n,"DebtMaximum",As.isXRPLNumber),(0,As.validateOptionalField)(n,"CoverRateMinimum",As.isNumber),(0,As.validateOptionalField)(n,"CoverRateLiquidation",As.isNumber),!(0,As.isLedgerEntryId)(n.VaultID))throw new jp.ValidationError("LoanBrokerSet: VaultID must be 64 characters hexadecimal string");if(n.LoanBrokerID!=null&&!(0,As.isLedgerEntryId)(n.LoanBrokerID))throw new jp.ValidationError("LoanBrokerSet: LoanBrokerID must be 64 characters hexadecimal string");if(n.Data!=null&&!(0,As.validateHexMetadata)(n.Data,Uoe))throw new jp.ValidationError(`LoanBrokerSet: Data must be a valid non-empty hex string up to ${Uoe} characters`);if(n.ManagementFeeRate!=null&&(n.ManagementFeeRate<0||n.ManagementFeeRate>joe))throw new jp.ValidationError(`LoanBrokerSet: ManagementFeeRate must be between 0 and ${joe} inclusive`);if(n.DebtMaximum!=null&&new sPe.default(n.DebtMaximum).isLessThan(0))throw new jp.ValidationError("LoanBrokerSet: DebtMaximum must be a non-negative value");if(n.CoverRateMinimum!=null&&(n.CoverRateMinimum<0||n.CoverRateMinimum>Hoe))throw new jp.ValidationError(`LoanBrokerSet: CoverRateMinimum must be between 0 and ${Hoe} inclusive`);if(n.CoverRateLiquidation!=null&&(n.CoverRateLiquidation<0||n.CoverRateLiquidation>Woe))throw new jp.ValidationError(`LoanBrokerSet: CoverRateLiquidation must be between 0 and ${Woe} inclusive`);let i=(t=n.CoverRateMinimum)!==null&&t!==void 0?t:0,r=(e=n.CoverRateLiquidation)!==null&&e!==void 0?e:0;if(i===0&&r!==0||i!==0&&r===0)throw new jp.ValidationError("LoanBrokerSet: CoverRateMinimum and CoverRateLiquidation must both be zero or both be non-zero")}Ty.validateLoanBrokerSet=aPe});var qoe=me(aT=>{"use strict";Object.defineProperty(aT,"__esModule",{value:!0});aT.validateLoanDelete=void 0;var lPe=Nt(),sT=At();function cPe(n){if((0,sT.validateBaseTransaction)(n),(0,sT.validateRequiredField)(n,"LoanID",sT.isString),!(0,sT.isLedgerEntryId)(n.LoanID))throw new lPe.ValidationError("LoanDelete: LoanID must be 64 characters hexadecimal string")}aT.validateLoanDelete=cPe});var $oe=me(lT=>{"use strict";Object.defineProperty(lT,"__esModule",{value:!0});lT.validateLoanPay=void 0;var dPe=Nt(),Ey=At();function uPe(n){if((0,Ey.validateBaseTransaction)(n),(0,Ey.validateRequiredField)(n,"LoanID",Ey.isString),(0,Ey.validateRequiredField)(n,"Amount",Ey.isAmount),!(0,Ey.isLedgerEntryId)(n.LoanID))throw new dPe.ValidationError("LoanPay: LoanID must be 64 characters hexadecimal string")}lT.validateLoanPay=uPe});var uB=me(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0});Ay.validateLoanSet=Ay.LoanSetFlags=void 0;var tf=Nt(),$i=At(),Koe=512,Goe=1e5,Xoe=1e5,Yoe=1e5,Zoe=1e5,Qoe=1e5,Joe=60,ese=(function(n){return n[n.tfLoanOverpayment=65536]="tfLoanOverpayment",n})(ese||(Ay.LoanSetFlags=ese={}));function hPe(n){if((0,$i.validateBaseTransaction)(n),(0,$i.validateRequiredField)(n,"LoanBrokerID",$i.isString),(0,$i.validateRequiredField)(n,"PrincipalRequested",$i.isXRPLNumber),(0,$i.validateOptionalField)(n,"CounterpartySignature",$i.isRecord),(0,$i.validateOptionalField)(n,"Data",$i.isString),(0,$i.validateOptionalField)(n,"Counterparty",$i.isAccount),(0,$i.validateOptionalField)(n,"LoanOriginationFee",$i.isXRPLNumber),(0,$i.validateOptionalField)(n,"LoanServiceFee",$i.isXRPLNumber),(0,$i.validateOptionalField)(n,"LatePaymentFee",$i.isXRPLNumber),(0,$i.validateOptionalField)(n,"ClosePaymentFee",$i.isXRPLNumber),(0,$i.validateOptionalField)(n,"OverpaymentFee",$i.isNumber),(0,$i.validateOptionalField)(n,"InterestRate",$i.isNumber),(0,$i.validateOptionalField)(n,"LateInterestRate",$i.isNumber),(0,$i.validateOptionalField)(n,"CloseInterestRate",$i.isNumber),(0,$i.validateOptionalField)(n,"OverpaymentInterestRate",$i.isNumber),(0,$i.validateOptionalField)(n,"PaymentTotal",$i.isNumber),(0,$i.validateOptionalField)(n,"PaymentInterval",$i.isNumber),(0,$i.validateOptionalField)(n,"GracePeriod",$i.isNumber),!(0,$i.isLedgerEntryId)(n.LoanBrokerID))throw new tf.ValidationError("LoanSet: LoanBrokerID must be 64 characters hexadecimal string");if(n.Data!=null&&!(0,$i.validateHexMetadata)(n.Data,Koe))throw new tf.ValidationError(`LoanSet: Data must be a valid non-empty hex string up to ${Koe} characters`);if(n.OverpaymentFee!=null&&(n.OverpaymentFee<0||n.OverpaymentFee>Goe))throw new tf.ValidationError(`LoanSet: OverpaymentFee must be between 0 and ${Goe} inclusive`);if(n.InterestRate!=null&&(n.InterestRate<0||n.InterestRate>Xoe))throw new tf.ValidationError(`LoanSet: InterestRate must be between 0 and ${Xoe} inclusive`);if(n.LateInterestRate!=null&&(n.LateInterestRate<0||n.LateInterestRate>Yoe))throw new tf.ValidationError(`LoanSet: LateInterestRate must be between 0 and ${Yoe} inclusive`);if(n.CloseInterestRate!=null&&(n.CloseInterestRate<0||n.CloseInterestRate>Zoe))throw new tf.ValidationError(`LoanSet: CloseInterestRate must be between 0 and ${Zoe} inclusive`);if(n.OverpaymentInterestRate!=null&&(n.OverpaymentInterestRate<0||n.OverpaymentInterestRate>Qoe))throw new tf.ValidationError(`LoanSet: OverpaymentInterestRate must be between 0 and ${Qoe} inclusive`);if(n.PaymentInterval!=null&&n.PaymentInterval<Joe)throw new tf.ValidationError(`LoanSet: PaymentInterval must be greater than or equal to ${Joe}`);if(n.PaymentInterval!=null&&n.GracePeriod!=null&&n.GracePeriod>n.PaymentInterval)throw new tf.ValidationError("LoanSet: GracePeriod must not be greater than PaymentInterval")}Ay.validateLoanSet=hPe});var tse=me(cT=>{"use strict";Object.defineProperty(cT,"__esModule",{value:!0});cT.validateMPTokenIssuanceDestroy=void 0;var hB=At();function fPe(n){(0,hB.validateBaseTransaction)(n),(0,hB.validateRequiredField)(n,"MPTokenIssuanceID",hB.isString)}cT.validateMPTokenIssuanceDestroy=fPe});var ise=me(uT=>{"use strict";Object.defineProperty(uT,"__esModule",{value:!0});uT.validateNFTokenAcceptOffer=void 0;var dT=Nt(),nse=At();function pPe(n){let t=(0,nse.parseAmountValue)(n.NFTokenBrokerFee);if(Number.isNaN(t))throw new dT.ValidationError("NFTokenAcceptOffer: invalid NFTokenBrokerFee");if(t<=0)throw new dT.ValidationError("NFTokenAcceptOffer: NFTokenBrokerFee must be greater than 0; omit if there is no fee");if(n.NFTokenSellOffer==null||n.NFTokenBuyOffer==null)throw new dT.ValidationError("NFTokenAcceptOffer: both NFTokenSellOffer and NFTokenBuyOffer must be set if using brokered mode")}function mPe(n){if((0,nse.validateBaseTransaction)(n),n.NFTokenBrokerFee!=null&&pPe(n),n.NFTokenSellOffer==null&&n.NFTokenBuyOffer==null)throw new dT.ValidationError("NFTokenAcceptOffer: must set either NFTokenSellOffer or NFTokenBuyOffer")}uT.validateNFTokenAcceptOffer=mPe});var rse=me(hT=>{"use strict";Object.defineProperty(hT,"__esModule",{value:!0});hT.validateNFTokenBurn=void 0;var b5=At();function gPe(n){(0,b5.validateBaseTransaction)(n),(0,b5.validateRequiredField)(n,"NFTokenID",b5.isString),(0,b5.validateOptionalField)(n,"Owner",b5.isAccount)}hT.validateNFTokenBurn=gPe});var ase=me(fT=>{"use strict";Object.defineProperty(fT,"__esModule",{value:!0});fT.validateNFTokenCancelOffer=void 0;var ose=Nt(),sse=At();function yPe(n){if((0,sse.validateBaseTransaction)(n),!(0,sse.isArray)(n.NFTokenOffers))throw new ose.ValidationError("NFTokenCancelOffer: missing field NFTokenOffers");if(n.NFTokenOffers.length<1)throw new ose.ValidationError("NFTokenCancelOffer: empty field NFTokenOffers")}fT.validateNFTokenCancelOffer=yPe});var fB=me(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0});pT.validateNFTokenModify=void 0;var lse=Nt(),vPe=Ms(),s1=At();function _Pe(n){if((0,s1.validateBaseTransaction)(n),(0,s1.validateRequiredField)(n,"NFTokenID",s1.isString),(0,s1.validateOptionalField)(n,"Owner",s1.isAccount),(0,s1.validateOptionalField)(n,"URI",s1.isString),n.URI!==void 0&&typeof n.URI=="string"){if(n.URI==="")throw new lse.ValidationError("NFTokenModify: URI must not be empty string");if(!(0,vPe.isHex)(n.URI))throw new lse.ValidationError("NFTokenModify: URI must be in hex format")}}pT.validateNFTokenModify=_Pe});var dse=me(mT=>{"use strict";Object.defineProperty(mT,"__esModule",{value:!0});mT.validateOfferCancel=void 0;var cse=Nt(),bPe=At();function wPe(n){if((0,bPe.validateBaseTransaction)(n),n.OfferSequence===void 0)throw new cse.ValidationError("OfferCancel: missing field OfferSequence");if(typeof n.OfferSequence!="number")throw new cse.ValidationError("OfferCancel: OfferSequence must be a number")}mT.validateOfferCancel=wPe});var use=me(gT=>{"use strict";Object.defineProperty(gT,"__esModule",{value:!0});gT.validateOracleDelete=void 0;var pB=At();function SPe(n){(0,pB.validateBaseTransaction)(n),(0,pB.validateRequiredField)(n,"OracleDocumentID",pB.isNumber)}gT.validateOracleDelete=SPe});var gse=me(yT=>{"use strict";Object.defineProperty(yT,"__esModule",{value:!0});yT.validateOracleSet=void 0;var Kl=Nt(),CPe=Ms(),qs=At(),hse=10,fse=10,pse=1,mse=16;function xPe(n){(0,qs.validateBaseTransaction)(n),(0,qs.validateRequiredField)(n,"OracleDocumentID",qs.isNumber),(0,qs.validateRequiredField)(n,"LastUpdateTime",qs.isNumber),(0,qs.validateOptionalField)(n,"Provider",qs.isString),(0,qs.validateOptionalField)(n,"URI",qs.isString),(0,qs.validateOptionalField)(n,"AssetClass",qs.isString),(0,qs.validateRequiredField)(n,"PriceDataSeries",t=>{if(!(0,qs.isArray)(t))throw new Kl.ValidationError("OracleSet: PriceDataSeries must be an array");if(t.length>hse)throw new Kl.ValidationError(`OracleSet: PriceDataSeries must have at most ${hse} PriceData objects`);for(let e of t){if(!(0,qs.isRecord)(e))throw new Kl.ValidationError("OracleSet: PriceDataSeries must be an array of objects");let i=e.PriceData;if(!(0,qs.isRecord)(i))throw new Kl.ValidationError("OracleSet: PriceDataSeries must have a `PriceData` object");if(Object.keys(e).length!==1)throw new Kl.ValidationError("OracleSet: PriceDataSeries must only have a single PriceData object");if(i.BaseAsset==null||typeof i.BaseAsset!="string")throw new Kl.ValidationError("OracleSet: PriceDataSeries must have a `BaseAsset` string");if(typeof i.QuoteAsset!="string")throw new Kl.ValidationError("OracleSet: PriceDataSeries must have a `QuoteAsset` string");if(i.AssetPrice==null!=(i.Scale==null))throw new Kl.ValidationError("OracleSet: PriceDataSeries must have both `AssetPrice` and `Scale` if any are present");if("AssetPrice"in i&&!(0,qs.isNumber)(i.AssetPrice)){if(typeof i.AssetPrice!="string")throw new Kl.ValidationError("OracleSet: Field AssetPrice must be a string or a number");if(!(0,CPe.isHex)(i.AssetPrice))throw new Kl.ValidationError("OracleSet: Field AssetPrice must be a valid hex string");if(i.AssetPrice.length<pse||i.AssetPrice.length>mse)throw new Kl.ValidationError(`OracleSet: Length of AssetPrice field must be between ${pse} and ${mse} characters long`)}if("Scale"in i){if(!(0,qs.isNumber)(i.Scale))throw new Kl.ValidationError("OracleSet: invalid field Scale");if(i.Scale<0||i.Scale>fse)throw new Kl.ValidationError(`OracleSet: Scale must be in range 0-${fse}`)}}return!0})}yT.validateOracleSet=xPe});var yse=me(vT=>{"use strict";Object.defineProperty(vT,"__esModule",{value:!0});vT.validatePaymentChannelCreate=void 0;var a1=Nt(),w5=At();function kPe(n){if((0,w5.validateBaseTransaction)(n),n.Amount===void 0)throw new a1.ValidationError("PaymentChannelCreate: missing Amount");if(typeof n.Amount!="string")throw new a1.ValidationError("PaymentChannelCreate: Amount must be a string");if((0,w5.validateRequiredField)(n,"Destination",w5.isAccount),(0,w5.validateOptionalField)(n,"DestinationTag",w5.isNumber),n.SettleDelay===void 0)throw new a1.ValidationError("PaymentChannelCreate: missing SettleDelay");if(typeof n.SettleDelay!="number")throw new a1.ValidationError("PaymentChannelCreate: SettleDelay must be a number");if(n.PublicKey===void 0)throw new a1.ValidationError("PaymentChannelCreate: missing PublicKey");if(typeof n.PublicKey!="string")throw new a1.ValidationError("PaymentChannelCreate: PublicKey must be a string");if(n.CancelAfter!==void 0&&typeof n.CancelAfter!="number")throw new a1.ValidationError("PaymentChannelCreate: CancelAfter must be a number")}vT.validatePaymentChannelCreate=kPe});var vse=me(_T=>{"use strict";Object.defineProperty(_T,"__esModule",{value:!0});_T.validatePaymentChannelFund=void 0;var S5=Nt(),MPe=At();function TPe(n){if((0,MPe.validateBaseTransaction)(n),n.Channel===void 0)throw new S5.ValidationError("PaymentChannelFund: missing Channel");if(typeof n.Channel!="string")throw new S5.ValidationError("PaymentChannelFund: Channel must be a string");if(n.Amount===void 0)throw new S5.ValidationError("PaymentChannelFund: missing Amount");if(typeof n.Amount!="string")throw new S5.ValidationError("PaymentChannelFund: Amount must be a string");if(n.Expiration!==void 0&&typeof n.Expiration!="number")throw new S5.ValidationError("PaymentChannelFund: Expiration must be a number")}_T.validatePaymentChannelFund=TPe});var _se=me(bT=>{"use strict";Object.defineProperty(bT,"__esModule",{value:!0});bT.validatePermissionedDomainDelete=void 0;var mB=At();function EPe(n){(0,mB.validateBaseTransaction)(n),(0,mB.validateRequiredField)(n,"DomainID",mB.isString)}bT.validatePermissionedDomainDelete=EPe});var bse=me(wT=>{"use strict";Object.defineProperty(wT,"__esModule",{value:!0});wT.validatePermissionedDomainSet=void 0;var Dy=At(),APe=10;function DPe(n){(0,Dy.validateBaseTransaction)(n),(0,Dy.validateOptionalField)(n,"DomainID",Dy.isString),(0,Dy.validateRequiredField)(n,"AcceptedCredentials",Dy.isArray),(0,Dy.validateCredentialsList)(n.AcceptedCredentials,n.TransactionType,!1,APe)}wT.validatePermissionedDomainSet=DPe});var wse=me(ST=>{"use strict";Object.defineProperty(ST,"__esModule",{value:!0});ST.validateSetRegularKey=void 0;var IPe=Nt(),FPe=At();function PPe(n){if((0,FPe.validateBaseTransaction)(n),n.RegularKey!==void 0&&typeof n.RegularKey!="string")throw new IPe.ValidationError("SetRegularKey: RegularKey must be a string")}ST.validateSetRegularKey=PPe});var Cse=me(xT=>{"use strict";Object.defineProperty(xT,"__esModule",{value:!0});xT.validateSignerListSet=void 0;var CT=Nt(),Hp=At(),Sse=32,LPe=/^[0-9A-Fa-f]{64}$/u;function RPe(n){if((0,Hp.validateBaseTransaction)(n),(0,Hp.validateRequiredField)(n,"SignerQuorum",Hp.isNumber),n.SignerQuorum!==0){if((0,Hp.validateRequiredField)(n,"SignerEntries",Hp.isArray),n.SignerEntries.length===0)throw new CT.ValidationError("SignerListSet: need at least 1 member in SignerEntries");if(n.SignerEntries.length>Sse)throw new CT.ValidationError(`SignerListSet: maximum of ${Sse} members allowed in SignerEntries`);for(let t of n.SignerEntries){if(!(0,Hp.isRecord)(t)||!(0,Hp.isRecord)(t.SignerEntry))throw new CT.ValidationError("SignerListSet: SignerEntries must be an array of SignerEntry objects");let e=t.SignerEntry,{WalletLocator:i}=e;if(i!=null&&(!(0,Hp.isString)(i)||!LPe.test(i)))throw new CT.ValidationError("SignerListSet: WalletLocator in SignerEntry must be a 256-bit (32-byte) hexadecimal value")}}}xT.validateSignerListSet=RPe});var xse=me(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});kT.validateTicketCreate=void 0;var gB=Nt(),OPe=At(),NPe=250;function BPe(n){(0,OPe.validateBaseTransaction)(n);let{TicketCount:t}=n;if(t===void 0)throw new gB.ValidationError("TicketCreate: missing field TicketCount");if(typeof t!="number")throw new gB.ValidationError("TicketCreate: TicketCount must be a number");if(!Number.isInteger(t)||t<1||t>NPe)throw new gB.ValidationError("TicketCreate: TicketCount must be an integer from 1 to 250")}kT.validateTicketCreate=BPe});var kse=me(MT=>{"use strict";Object.defineProperty(MT,"__esModule",{value:!0});MT.validateVaultClawback=void 0;var l1=At();function VPe(n){(0,l1.validateBaseTransaction)(n),(0,l1.validateRequiredField)(n,"VaultID",l1.isString),(0,l1.validateRequiredField)(n,"Holder",l1.isAccount),(0,l1.validateOptionalField)(n,"Amount",l1.isClawbackAmount)}MT.validateVaultClawback=VPe});var Mse=me(TT=>{"use strict";Object.defineProperty(TT,"__esModule",{value:!0});TT.validateVaultDelete=void 0;var yB=At();function UPe(n){(0,yB.validateBaseTransaction)(n),(0,yB.validateRequiredField)(n,"VaultID",yB.isString)}TT.validateVaultDelete=UPe});var Tse=me(ET=>{"use strict";Object.defineProperty(ET,"__esModule",{value:!0});ET.validateVaultDeposit=void 0;var C5=At();function jPe(n){(0,C5.validateBaseTransaction)(n),(0,C5.validateRequiredField)(n,"VaultID",C5.isString),(0,C5.validateRequiredField)(n,"Amount",C5.isAmount)}ET.validateVaultDeposit=jPe});var Ase=me(AT=>{"use strict";Object.defineProperty(AT,"__esModule",{value:!0});AT.validateVaultSet=void 0;var Ese=Nt(),HPe=Ms(),Sd=At();function WPe(n){if((0,Sd.validateBaseTransaction)(n),(0,Sd.validateRequiredField)(n,"VaultID",Sd.isString),(0,Sd.validateOptionalField)(n,"Data",Sd.isString),(0,Sd.validateOptionalField)(n,"AssetsMaximum",Sd.isXRPLNumber),(0,Sd.validateOptionalField)(n,"DomainID",Sd.isString),n.Data!==void 0){let t=n.Data;if(!(0,HPe.isHex)(t))throw new Ese.ValidationError("VaultSet: Data must be a valid hex string");let e=t.length/2;if(e>Sd.VAULT_DATA_MAX_BYTE_LENGTH)throw new Ese.ValidationError(`VaultSet: Data exceeds ${Sd.VAULT_DATA_MAX_BYTE_LENGTH} bytes (actual: ${e})`)}}AT.validateVaultSet=WPe});var Dse=me(DT=>{"use strict";Object.defineProperty(DT,"__esModule",{value:!0});DT.validateVaultWithdraw=void 0;var c1=At();function zPe(n){(0,c1.validateBaseTransaction)(n),(0,c1.validateRequiredField)(n,"VaultID",c1.isString),(0,c1.validateRequiredField)(n,"Amount",c1.isAmount),(0,c1.validateOptionalField)(n,"Destination",c1.isAccount)}DT.validateVaultWithdraw=zPe});var Ise=me(IT=>{"use strict";Object.defineProperty(IT,"__esModule",{value:!0});IT.validateXChainAccountCreateCommit=void 0;var nf=At();function qPe(n){(0,nf.validateBaseTransaction)(n),(0,nf.validateRequiredField)(n,"XChainBridge",nf.isXChainBridge),(0,nf.validateRequiredField)(n,"SignatureReward",nf.isAmount),(0,nf.validateRequiredField)(n,"Destination",nf.isAccount),(0,nf.validateRequiredField)(n,"Amount",nf.isAmount)}IT.validateXChainAccountCreateCommit=qPe});var Fse=me(FT=>{"use strict";Object.defineProperty(FT,"__esModule",{value:!0});FT.validateXChainAddAccountCreateAttestation=void 0;var Mo=At();function $Pe(n){(0,Mo.validateBaseTransaction)(n),(0,Mo.validateRequiredField)(n,"Amount",Mo.isAmount),(0,Mo.validateRequiredField)(n,"AttestationRewardAccount",Mo.isAccount),(0,Mo.validateRequiredField)(n,"AttestationSignerAccount",Mo.isAccount),(0,Mo.validateRequiredField)(n,"Destination",Mo.isAccount),(0,Mo.validateRequiredField)(n,"OtherChainSource",Mo.isAccount),(0,Mo.validateRequiredField)(n,"PublicKey",Mo.isString),(0,Mo.validateRequiredField)(n,"Signature",Mo.isString),(0,Mo.validateRequiredField)(n,"SignatureReward",Mo.isAmount),(0,Mo.validateRequiredField)(n,"WasLockingChainSend",t=>t===0||t===1),(0,Mo.validateRequiredField)(n,"XChainAccountCreateCount",t=>(0,Mo.isNumber)(t)||(0,Mo.isString)(t)),(0,Mo.validateRequiredField)(n,"XChainBridge",Mo.isXChainBridge)}FT.validateXChainAddAccountCreateAttestation=$Pe});var Pse=me(PT=>{"use strict";Object.defineProperty(PT,"__esModule",{value:!0});PT.validateXChainAddClaimAttestation=void 0;var Wo=At();function KPe(n){(0,Wo.validateBaseTransaction)(n),(0,Wo.validateRequiredField)(n,"Amount",Wo.isAmount),(0,Wo.validateRequiredField)(n,"AttestationRewardAccount",Wo.isAccount),(0,Wo.validateRequiredField)(n,"AttestationSignerAccount",Wo.isAccount),(0,Wo.validateOptionalField)(n,"Destination",Wo.isAccount),(0,Wo.validateRequiredField)(n,"OtherChainSource",Wo.isAccount),(0,Wo.validateRequiredField)(n,"PublicKey",Wo.isString),(0,Wo.validateRequiredField)(n,"Signature",Wo.isString),(0,Wo.validateRequiredField)(n,"WasLockingChainSend",t=>t===0||t===1),(0,Wo.validateRequiredField)(n,"XChainBridge",Wo.isXChainBridge),(0,Wo.validateRequiredField)(n,"XChainClaimID",t=>(0,Wo.isNumber)(t)||(0,Wo.isString)(t))}PT.validateXChainAddClaimAttestation=KPe});var Lse=me(LT=>{"use strict";Object.defineProperty(LT,"__esModule",{value:!0});LT.validateXChainClaim=void 0;var kc=At();function GPe(n){(0,kc.validateBaseTransaction)(n),(0,kc.validateRequiredField)(n,"XChainBridge",kc.isXChainBridge),(0,kc.validateRequiredField)(n,"XChainClaimID",t=>(0,kc.isNumber)(t)||(0,kc.isString)(t)),(0,kc.validateRequiredField)(n,"Destination",kc.isAccount),(0,kc.validateOptionalField)(n,"DestinationTag",kc.isNumber),(0,kc.validateRequiredField)(n,"Amount",kc.isAmount)}LT.validateXChainClaim=GPe});var Rse=me(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0});RT.validateXChainCommit=void 0;var Bu=At();function XPe(n){(0,Bu.validateBaseTransaction)(n),(0,Bu.validateRequiredField)(n,"XChainBridge",Bu.isXChainBridge),(0,Bu.validateRequiredField)(n,"XChainClaimID",t=>(0,Bu.isNumber)(t)||(0,Bu.isString)(t)),(0,Bu.validateOptionalField)(n,"OtherChainDestination",Bu.isAccount),(0,Bu.validateRequiredField)(n,"Amount",Bu.isAmount)}RT.validateXChainCommit=XPe});var Ose=me(OT=>{"use strict";Object.defineProperty(OT,"__esModule",{value:!0});OT.validateXChainCreateBridge=void 0;var d1=At();function YPe(n){(0,d1.validateBaseTransaction)(n),(0,d1.validateRequiredField)(n,"XChainBridge",d1.isXChainBridge),(0,d1.validateRequiredField)(n,"SignatureReward",d1.isAmount),(0,d1.validateOptionalField)(n,"MinAccountCreateAmount",d1.isAmount)}OT.validateXChainCreateBridge=YPe});var Nse=me(NT=>{"use strict";Object.defineProperty(NT,"__esModule",{value:!0});NT.validateXChainCreateClaimID=void 0;var u1=At();function ZPe(n){(0,u1.validateBaseTransaction)(n),(0,u1.validateRequiredField)(n,"XChainBridge",u1.isXChainBridge),(0,u1.validateRequiredField)(n,"SignatureReward",u1.isAmount),(0,u1.validateRequiredField)(n,"OtherChainSource",u1.isAccount)}NT.validateXChainCreateClaimID=ZPe});var jse=me(BT=>{"use strict";Object.defineProperty(BT,"__esModule",{value:!0});BT.validate=void 0;var Bse=Nt(),QPe=jM(),JPe=foe(),eLe=yM(),tLe=moe(),nLe=_M(),iLe=oB(),rLe=goe(),oLe=bM(),sLe=voe(),aLe=wM(),lLe=Tw(),cLe=_oe(),dLe=boe(),uLe=woe(),hLe=Soe(),Vse=At(),fLe=Coe(),pLe=koe(),mLe=Moe(),gLe=Eoe(),yLe=Aoe(),vLe=Doe(),_Le=Ioe(),bLe=Poe(),wLe=Loe(),SLe=Roe(),CLe=Ooe(),xLe=Noe(),kLe=Boe(),MLe=Voe(),TLe=zoe(),ELe=qoe(),ALe=xM(),DLe=$oe(),ILe=uB(),FLe=kM(),PLe=EM(),LLe=tse(),RLe=DM(),OLe=ise(),NLe=rse(),BLe=ase(),VLe=IM(),ULe=FM(),jLe=fB(),HLe=dse(),WLe=PM(),zLe=use(),qLe=gse(),$Le=LM(),KLe=RM(),GLe=yse(),XLe=vse(),YLe=_se(),ZLe=bse(),QLe=wse(),JLe=Cse(),eRe=xse(),tRe=NM(),nRe=kse(),iRe=VM(),rRe=Mse(),oRe=Tse(),sRe=Ase(),aRe=Dse(),lRe=Ise(),cRe=Fse(),dRe=Pse(),uRe=Lse(),hRe=Rse(),fRe=Ose(),pRe=Nse(),mRe=UM();function Use(n){let t=Object.assign({},n);switch((0,Vse.validateBaseTransaction)(t),Object.keys(t).forEach(e=>{let r=t[e];if(r&&(0,Vse.isIssuedCurrencyAmount)(r)){let o=r.currency;if(o.length===3&&o.toUpperCase()==="XRP")throw new Bse.ValidationError(`Cannot have an issued currency with a similar standard code to XRP (received '${o}'). XRP is not an issued currency.`)}}),t.Flags=(0,QPe.convertTxFlagsToNumber)(t),t.TransactionType){case"AMMBid":(0,tLe.validateAMMBid)(t);break;case"AMMClawback":(0,nLe.validateAMMClawback)(t);break;case"AMMCreate":(0,iLe.validateAMMCreate)(t);break;case"AMMDelete":(0,rLe.validateAMMDelete)(t);break;case"AMMDeposit":(0,oLe.validateAMMDeposit)(t);break;case"AMMVote":(0,sLe.validateAMMVote)(t);break;case"AMMWithdraw":(0,aLe.validateAMMWithdraw)(t);break;case"AccountDelete":(0,JPe.validateAccountDelete)(t);break;case"AccountSet":(0,eLe.validateAccountSet)(t);break;case"Batch":(0,lLe.validateBatch)(t),t.RawTransactions.forEach(e=>{Use(e.RawTransaction)});break;case"CheckCancel":(0,cLe.validateCheckCancel)(t);break;case"CheckCash":(0,dLe.validateCheckCash)(t);break;case"CheckCreate":(0,uLe.validateCheckCreate)(t);break;case"Clawback":(0,hLe.validateClawback)(t);break;case"CredentialAccept":(0,fLe.validateCredentialAccept)(t);break;case"CredentialCreate":(0,pLe.validateCredentialCreate)(t);break;case"CredentialDelete":(0,mLe.validateCredentialDelete)(t);break;case"DIDDelete":(0,vLe.validateDIDDelete)(t);break;case"DIDSet":(0,_Le.validateDIDSet)(t);break;case"DelegateSet":(0,gLe.validateDelegateSet)(t);break;case"DepositPreauth":(0,yLe.validateDepositPreauth)(t);break;case"EscrowCancel":(0,bLe.validateEscrowCancel)(t);break;case"EscrowCreate":(0,wLe.validateEscrowCreate)(t);break;case"EscrowFinish":(0,SLe.validateEscrowFinish)(t);break;case"LoanBrokerCoverClawback":(0,CLe.validateLoanBrokerCoverClawback)(t);break;case"LoanBrokerCoverDeposit":(0,xLe.validateLoanBrokerCoverDeposit)(t);break;case"LoanBrokerCoverWithdraw":(0,kLe.validateLoanBrokerCoverWithdraw)(t);break;case"LoanBrokerDelete":(0,MLe.validateLoanBrokerDelete)(t);break;case"LoanBrokerSet":(0,TLe.validateLoanBrokerSet)(t);break;case"LoanSet":(0,ILe.validateLoanSet)(t);break;case"LoanManage":(0,ALe.validateLoanManage)(t);break;case"LoanDelete":(0,ELe.validateLoanDelete)(t);break;case"LoanPay":(0,DLe.validateLoanPay)(t);break;case"MPTokenAuthorize":(0,FLe.validateMPTokenAuthorize)(t);break;case"MPTokenIssuanceCreate":(0,PLe.validateMPTokenIssuanceCreate)(t);break;case"MPTokenIssuanceDestroy":(0,LLe.validateMPTokenIssuanceDestroy)(t);break;case"MPTokenIssuanceSet":(0,RLe.validateMPTokenIssuanceSet)(t);break;case"NFTokenAcceptOffer":(0,OLe.validateNFTokenAcceptOffer)(t);break;case"NFTokenBurn":(0,NLe.validateNFTokenBurn)(t);break;case"NFTokenCancelOffer":(0,BLe.validateNFTokenCancelOffer)(t);break;case"NFTokenCreateOffer":(0,VLe.validateNFTokenCreateOffer)(t);break;case"NFTokenMint":(0,ULe.validateNFTokenMint)(t);break;case"NFTokenModify":(0,jLe.validateNFTokenModify)(t);break;case"OfferCancel":(0,HLe.validateOfferCancel)(t);break;case"OfferCreate":(0,WLe.validateOfferCreate)(t);break;case"OracleDelete":(0,zLe.validateOracleDelete)(t);break;case"OracleSet":(0,qLe.validateOracleSet)(t);break;case"Payment":(0,$Le.validatePayment)(t);break;case"PaymentChannelClaim":(0,KLe.validatePaymentChannelClaim)(t);break;case"PaymentChannelCreate":(0,GLe.validatePaymentChannelCreate)(t);break;case"PaymentChannelFund":(0,XLe.validatePaymentChannelFund)(t);break;case"PermissionedDomainSet":(0,ZLe.validatePermissionedDomainSet)(t);break;case"PermissionedDomainDelete":(0,YLe.validatePermissionedDomainDelete)(t);break;case"SetRegularKey":(0,QLe.validateSetRegularKey)(t);break;case"SignerListSet":(0,JLe.validateSignerListSet)(t);break;case"TicketCreate":(0,eRe.validateTicketCreate)(t);break;case"TrustSet":(0,tRe.validateTrustSet)(t);break;case"VaultClawback":(0,nRe.validateVaultClawback)(t);break;case"VaultCreate":(0,iRe.validateVaultCreate)(t);break;case"VaultDelete":(0,rRe.validateVaultDelete)(t);break;case"VaultDeposit":(0,oRe.validateVaultDeposit)(t);break;case"VaultSet":(0,sRe.validateVaultSet)(t);break;case"VaultWithdraw":(0,aRe.validateVaultWithdraw)(t);break;case"XChainAccountCreateCommit":(0,lRe.validateXChainAccountCreateCommit)(t);break;case"XChainAddAccountCreateAttestation":(0,cRe.validateXChainAddAccountCreateAttestation)(t);break;case"XChainAddClaimAttestation":(0,dRe.validateXChainAddClaimAttestation)(t);break;case"XChainClaim":(0,uRe.validateXChainClaim)(t);break;case"XChainCommit":(0,hRe.validateXChainCommit)(t);break;case"XChainCreateBridge":(0,fRe.validateXChainCreateBridge)(t);break;case"XChainCreateClaimID":(0,pRe.validateXChainCreateClaimID)(t);break;case"XChainModifyBridge":(0,mRe.validateXChainModifyBridge)(t);break;default:throw new Bse.ValidationError(`Invalid field TransactionType: ${t.TransactionType}`)}}BT.validate=Use});var Wse=me(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});VT.EnableAmendmentFlags=void 0;var Hse=(function(n){return n[n.tfGotMajority=65536]="tfGotMajority",n[n.tfLostMajority=131072]="tfLostMajority",n})(Hse||(VT.EnableAmendmentFlags=Hse={}))});var x5=me(Sn=>{"use strict";var gRe=Sn&&Sn.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),yRe=Sn&&Sn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&gRe(t,n,e)};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.XChainModifyBridgeFlags=Sn.VaultWithdrawalPolicy=Sn.VaultCreateFlags=Sn.TrustSetFlags=Sn.PaymentChannelClaimFlags=Sn.PaymentFlags=Sn.OfferCreateFlags=Sn.validateNFTokenModify=Sn.NFTokenMintFlags=Sn.NFTokenCreateOfferFlags=Sn.MPTokenIssuanceSetFlags=Sn.MPTokenIssuanceCreateFlags=Sn.MPTokenAuthorizeFlags=Sn.LoanManageFlags=Sn.LoanSetFlags=Sn.EnableAmendmentFlags=Sn.BatchFlags=Sn.AMMWithdrawFlags=Sn.AMMDepositFlags=Sn.AMMClawbackFlags=Sn.AccountSetTfFlags=Sn.AccountSetAsfFlags=Sn.validate=Sn.isMPTAmount=Sn.GlobalFlags=void 0;var zse=At();Object.defineProperty(Sn,"GlobalFlags",{enumerable:!0,get:function(){return zse.GlobalFlags}});Object.defineProperty(Sn,"isMPTAmount",{enumerable:!0,get:function(){return zse.isMPTAmount}});var vRe=jse();Object.defineProperty(Sn,"validate",{enumerable:!0,get:function(){return vRe.validate}});yRe(p6(),Sn);var qse=yM();Object.defineProperty(Sn,"AccountSetAsfFlags",{enumerable:!0,get:function(){return qse.AccountSetAsfFlags}});Object.defineProperty(Sn,"AccountSetTfFlags",{enumerable:!0,get:function(){return qse.AccountSetTfFlags}});var _Re=_M();Object.defineProperty(Sn,"AMMClawbackFlags",{enumerable:!0,get:function(){return _Re.AMMClawbackFlags}});var bRe=bM();Object.defineProperty(Sn,"AMMDepositFlags",{enumerable:!0,get:function(){return bRe.AMMDepositFlags}});var wRe=wM();Object.defineProperty(Sn,"AMMWithdrawFlags",{enumerable:!0,get:function(){return wRe.AMMWithdrawFlags}});var SRe=Tw();Object.defineProperty(Sn,"BatchFlags",{enumerable:!0,get:function(){return SRe.BatchFlags}});var CRe=Wse();Object.defineProperty(Sn,"EnableAmendmentFlags",{enumerable:!0,get:function(){return CRe.EnableAmendmentFlags}});var xRe=uB();Object.defineProperty(Sn,"LoanSetFlags",{enumerable:!0,get:function(){return xRe.LoanSetFlags}});var kRe=xM();Object.defineProperty(Sn,"LoanManageFlags",{enumerable:!0,get:function(){return kRe.LoanManageFlags}});var MRe=kM();Object.defineProperty(Sn,"MPTokenAuthorizeFlags",{enumerable:!0,get:function(){return MRe.MPTokenAuthorizeFlags}});var TRe=EM();Object.defineProperty(Sn,"MPTokenIssuanceCreateFlags",{enumerable:!0,get:function(){return TRe.MPTokenIssuanceCreateFlags}});var ERe=DM();Object.defineProperty(Sn,"MPTokenIssuanceSetFlags",{enumerable:!0,get:function(){return ERe.MPTokenIssuanceSetFlags}});var ARe=IM();Object.defineProperty(Sn,"NFTokenCreateOfferFlags",{enumerable:!0,get:function(){return ARe.NFTokenCreateOfferFlags}});var DRe=FM();Object.defineProperty(Sn,"NFTokenMintFlags",{enumerable:!0,get:function(){return DRe.NFTokenMintFlags}});var IRe=fB();Object.defineProperty(Sn,"validateNFTokenModify",{enumerable:!0,get:function(){return IRe.validateNFTokenModify}});var FRe=PM();Object.defineProperty(Sn,"OfferCreateFlags",{enumerable:!0,get:function(){return FRe.OfferCreateFlags}});var PRe=LM();Object.defineProperty(Sn,"PaymentFlags",{enumerable:!0,get:function(){return PRe.PaymentFlags}});var LRe=RM();Object.defineProperty(Sn,"PaymentChannelClaimFlags",{enumerable:!0,get:function(){return LRe.PaymentChannelClaimFlags}});var RRe=NM();Object.defineProperty(Sn,"TrustSetFlags",{enumerable:!0,get:function(){return RRe.TrustSetFlags}});var $se=VM();Object.defineProperty(Sn,"VaultCreateFlags",{enumerable:!0,get:function(){return $se.VaultCreateFlags}});Object.defineProperty(Sn,"VaultWithdrawalPolicy",{enumerable:!0,get:function(){return $se.VaultWithdrawalPolicy}});var ORe=UM();Object.defineProperty(Sn,"XChainModifyBridgeFlags",{enumerable:!0,get:function(){return ORe.XChainModifyBridgeFlags}})});var Kse=me((nIt,NRe)=>{NRe.exports=["A","ABE","ACE","ACT","AD","ADA","ADD","AGO","AID","AIM","AIR","ALL","ALP","AM","AMY","AN","ANA","AND","ANN","ANT","ANY","APE","APS","APT","ARC","ARE","ARK","ARM","ART","AS","ASH","ASK","AT","ATE","AUG","AUK","AVE","AWE","AWK","AWL","AWN","AX","AYE","BAD","BAG","BAH","BAM","BAN","BAR","BAT","BAY","BE","BED","BEE","BEG","BEN","BET","BEY","BIB","BID","BIG","BIN","BIT","BOB","BOG","BON","BOO","BOP","BOW","BOY","BUB","BUD","BUG","BUM","BUN","BUS","BUT","BUY","BY","BYE","CAB","CAL","CAM","CAN","CAP","CAR","CAT","CAW","COD","COG","COL","CON","COO","COP","COT","COW","COY","CRY","CUB","CUE","CUP","CUR","CUT","DAB","DAD","DAM","DAN","DAR","DAY","DEE","DEL","DEN","DES","DEW","DID","DIE","DIG","DIN","DIP","DO","DOE","DOG","DON","DOT","DOW","DRY","DUB","DUD","DUE","DUG","DUN","EAR","EAT","ED","EEL","EGG","EGO","ELI","ELK","ELM","ELY","EM","END","EST","ETC","EVA","EVE","EWE","EYE","FAD","FAN","FAR","FAT","FAY","FED","FEE","FEW","FIB","FIG","FIN","FIR","FIT","FLO","FLY","FOE","FOG","FOR","FRY","FUM","FUN","FUR","GAB","GAD","GAG","GAL","GAM","GAP","GAS","GAY","GEE","GEL","GEM","GET","GIG","GIL","GIN","GO","GOT","GUM","GUN","GUS","GUT","GUY","GYM","GYP","HA","HAD","HAL","HAM","HAN","HAP","HAS","HAT","HAW","HAY","HE","HEM","HEN","HER","HEW","HEY","HI","HID","HIM","HIP","HIS","HIT","HO","HOB","HOC","HOE","HOG","HOP","HOT","HOW","HUB","HUE","HUG","HUH","HUM","HUT","I","ICY","IDA","IF","IKE","ILL","INK","INN","IO","ION","IQ","IRA","IRE","IRK","IS","IT","ITS","IVY","JAB","JAG","JAM","JAN","JAR","JAW","JAY","JET","JIG","JIM","JO","JOB","JOE","JOG","JOT","JOY","JUG","JUT","KAY","KEG","KEN","KEY","KID","KIM","KIN","KIT","LA","LAB","LAC","LAD","LAG","LAM","LAP","LAW","LAY","LEA","LED","LEE","LEG","LEN","LEO","LET","LEW","LID","LIE","LIN","LIP","LIT","LO","LOB","LOG","LOP","LOS","LOT","LOU","LOW","LOY","LUG","LYE","MA","MAC","MAD","MAE","MAN","MAO","MAP","MAT","MAW","MAY","ME","MEG","MEL","MEN","MET","MEW","MID","MIN","MIT","MOB","MOD","MOE","MOO","MOP","MOS","MOT","MOW","MUD","MUG","MUM","MY","NAB","NAG","NAN","NAP","NAT","NAY","NE","NED","NEE","NET","NEW","NIB","NIL","NIP","NIT","NO","NOB","NOD","NON","NOR","NOT","NOV","NOW","NU","NUN","NUT","O","OAF","OAK","OAR","OAT","ODD","ODE","OF","OFF","OFT","OH","OIL","OK","OLD","ON","ONE","OR","ORB","ORE","ORR","OS","OTT","OUR","OUT","OVA","OW","OWE","OWL","OWN","OX","PA","PAD","PAL","PAM","PAN","PAP","PAR","PAT","PAW","PAY","PEA","PEG","PEN","PEP","PER","PET","PEW","PHI","PI","PIE","PIN","PIT","PLY","PO","POD","POE","POP","POT","POW","PRO","PRY","PUB","PUG","PUN","PUP","PUT","QUO","RAG","RAM","RAN","RAP","RAT","RAW","RAY","REB","RED","REP","RET","RIB","RID","RIG","RIM","RIO","RIP","ROB","ROD","ROE","RON","ROT","ROW","ROY","RUB","RUE","RUG","RUM","RUN","RYE","SAC","SAD","SAG","SAL","SAM","SAN","SAP","SAT","SAW","SAY","SEA","SEC","SEE","SEN","SET","SEW","SHE","SHY","SIN","SIP","SIR","SIS","SIT","SKI","SKY","SLY","SO","SOB","SOD","SON","SOP","SOW","SOY","SPA","SPY","SUB","SUD","SUE","SUM","SUN","SUP","TAB","TAD","TAG","TAN","TAP","TAR","TEA","TED","TEE","TEN","THE","THY","TIC","TIE","TIM","TIN","TIP","TO","TOE","TOG","TOM","TON","TOO","TOP","TOW","TOY","TRY","TUB","TUG","TUM","TUN","TWO","UN","UP","US","USE","VAN","VAT","VET","VIE","WAD","WAG","WAR","WAS","WAY","WE","WEB","WED","WEE","WET","WHO","WHY","WIN","WIT","WOK","WON","WOO","WOW","WRY","WU","YAM","YAP","YAW","YE","YEA","YES","YET","YOU","ABED","ABEL","ABET","ABLE","ABUT","ACHE","ACID","ACME","ACRE","ACTA","ACTS","ADAM","ADDS","ADEN","AFAR","AFRO","AGEE","AHEM","AHOY","AIDA","AIDE","AIDS","AIRY","AJAR","AKIN","ALAN","ALEC","ALGA","ALIA","ALLY","ALMA","ALOE","ALSO","ALTO","ALUM","ALVA","AMEN","AMES","AMID","AMMO","AMOK","AMOS","AMRA","ANDY","ANEW","ANNA","ANNE","ANTE","ANTI","AQUA","ARAB","ARCH","AREA","ARGO","ARID","ARMY","ARTS","ARTY","ASIA","ASKS","ATOM","AUNT","AURA","AUTO","AVER","AVID","AVIS","AVON","AVOW","AWAY","AWRY","BABE","BABY","BACH","BACK","BADE","BAIL","BAIT","BAKE","BALD","BALE","BALI","BALK","BALL","BALM","BAND","BANE","BANG","BANK","BARB","BARD","BARE","BARK","BARN","BARR","BASE","BASH","BASK","BASS","BATE","BATH","BAWD","BAWL","BEAD","BEAK","BEAM","BEAN","BEAR","BEAT","BEAU","BECK","BEEF","BEEN","BEER","BEET","BELA","BELL","BELT","BEND","BENT","BERG","BERN","BERT","BESS","BEST","BETA","BETH","BHOY","BIAS","BIDE","BIEN","BILE","BILK","BILL","BIND","BING","BIRD","BITE","BITS","BLAB","BLAT","BLED","BLEW","BLOB","BLOC","BLOT","BLOW","BLUE","BLUM","BLUR","BOAR","BOAT","BOCA","BOCK","BODE","BODY","BOGY","BOHR","BOIL","BOLD","BOLO","BOLT","BOMB","BONA","BOND","BONE","BONG","BONN","BONY","BOOK","BOOM","BOON","BOOT","BORE","BORG","BORN","BOSE","BOSS","BOTH","BOUT","BOWL","BOYD","BRAD","BRAE","BRAG","BRAN","BRAY","BRED","BREW","BRIG","BRIM","BROW","BUCK","BUDD","BUFF","BULB","BULK","BULL","BUNK","BUNT","BUOY","BURG","BURL","BURN","BURR","BURT","BURY","BUSH","BUSS","BUST","BUSY","BYTE","CADY","CAFE","CAGE","CAIN","CAKE","CALF","CALL","CALM","CAME","CANE","CANT","CARD","CARE","CARL","CARR","CART","CASE","CASH","CASK","CAST","CAVE","CEIL","CELL","CENT","CERN","CHAD","CHAR","CHAT","CHAW","CHEF","CHEN","CHEW","CHIC","CHIN","CHOU","CHOW","CHUB","CHUG","CHUM","CITE","CITY","CLAD","CLAM","CLAN","CLAW","CLAY","CLOD","CLOG","CLOT","CLUB","CLUE","COAL","COAT","COCA","COCK","COCO","CODA","CODE","CODY","COED","COIL","COIN","COKE","COLA","COLD","COLT","COMA","COMB","COME","COOK","COOL","COON","COOT","CORD","CORE","CORK","CORN","COST","COVE","COWL","CRAB","CRAG","CRAM","CRAY","CREW","CRIB","CROW","CRUD","CUBA","CUBE","CUFF","CULL","CULT","CUNY","CURB","CURD","CURE","CURL","CURT","CUTS","DADE","DALE","DAME","DANA","DANE","DANG","DANK","DARE","DARK","DARN","DART","DASH","DATA","DATE","DAVE","DAVY","DAWN","DAYS","DEAD","DEAF","DEAL","DEAN","DEAR","DEBT","DECK","DEED","DEEM","DEER","DEFT","DEFY","DELL","DENT","DENY","DESK","DIAL","DICE","DIED","DIET","DIME","DINE","DING","DINT","DIRE","DIRT","DISC","DISH","DISK","DIVE","DOCK","DOES","DOLE","DOLL","DOLT","DOME","DONE","DOOM","DOOR","DORA","DOSE","DOTE","DOUG","DOUR","DOVE","DOWN","DRAB","DRAG","DRAM","DRAW","DREW","DRUB","DRUG","DRUM","DUAL","DUCK","DUCT","DUEL","DUET","DUKE","DULL","DUMB","DUNE","DUNK","DUSK","DUST","DUTY","EACH","EARL","EARN","EASE","EAST","EASY","EBEN","ECHO","EDDY","EDEN","EDGE","EDGY","EDIT","EDNA","EGAN","ELAN","ELBA","ELLA","ELSE","EMIL","EMIT","EMMA","ENDS","ERIC","EROS","EVEN","EVER","EVIL","EYED","FACE","FACT","FADE","FAIL","FAIN","FAIR","FAKE","FALL","FAME","FANG","FARM","FAST","FATE","FAWN","FEAR","FEAT","FEED","FEEL","FEET","FELL","FELT","FEND","FERN","FEST","FEUD","FIEF","FIGS","FILE","FILL","FILM","FIND","FINE","FINK","FIRE","FIRM","FISH","FISK","FIST","FITS","FIVE","FLAG","FLAK","FLAM","FLAT","FLAW","FLEA","FLED","FLEW","FLIT","FLOC","FLOG","FLOW","FLUB","FLUE","FOAL","FOAM","FOGY","FOIL","FOLD","FOLK","FOND","FONT","FOOD","FOOL","FOOT","FORD","FORE","FORK","FORM","FORT","FOSS","FOUL","FOUR","FOWL","FRAU","FRAY","FRED","FREE","FRET","FREY","FROG","FROM","FUEL","FULL","FUME","FUND","FUNK","FURY","FUSE","FUSS","GAFF","GAGE","GAIL","GAIN","GAIT","GALA","GALE","GALL","GALT","GAME","GANG","GARB","GARY","GASH","GATE","GAUL","GAUR","GAVE","GAWK","GEAR","GELD","GENE","GENT","GERM","GETS","GIBE","GIFT","GILD","GILL","GILT","GINA","GIRD","GIRL","GIST","GIVE","GLAD","GLEE","GLEN","GLIB","GLOB","GLOM","GLOW","GLUE","GLUM","GLUT","GOAD","GOAL","GOAT","GOER","GOES","GOLD","GOLF","GONE","GONG","GOOD","GOOF","GORE","GORY","GOSH","GOUT","GOWN","GRAB","GRAD","GRAY","GREG","GREW","GREY","GRID","GRIM","GRIN","GRIT","GROW","GRUB","GULF","GULL","GUNK","GURU","GUSH","GUST","GWEN","GWYN","HAAG","HAAS","HACK","HAIL","HAIR","HALE","HALF","HALL","HALO","HALT","HAND","HANG","HANK","HANS","HARD","HARK","HARM","HART","HASH","HAST","HATE","HATH","HAUL","HAVE","HAWK","HAYS","HEAD","HEAL","HEAR","HEAT","HEBE","HECK","HEED","HEEL","HEFT","HELD","HELL","HELM","HERB","HERD","HERE","HERO","HERS","HESS","HEWN","HICK","HIDE","HIGH","HIKE","HILL","HILT","HIND","HINT","HIRE","HISS","HIVE","HOBO","HOCK","HOFF","HOLD","HOLE","HOLM","HOLT","HOME","HONE","HONK","HOOD","HOOF","HOOK","HOOT","HORN","HOSE","HOST","HOUR","HOVE","HOWE","HOWL","HOYT","HUCK","HUED","HUFF","HUGE","HUGH","HUGO","HULK","HULL","HUNK","HUNT","HURD","HURL","HURT","HUSH","HYDE","HYMN","IBIS","ICON","IDEA","IDLE","IFFY","INCA","INCH","INTO","IONS","IOTA","IOWA","IRIS","IRMA","IRON","ISLE","ITCH","ITEM","IVAN","JACK","JADE","JAIL","JAKE","JANE","JAVA","JEAN","JEFF","JERK","JESS","JEST","JIBE","JILL","JILT","JIVE","JOAN","JOBS","JOCK","JOEL","JOEY","JOHN","JOIN","JOKE","JOLT","JOVE","JUDD","JUDE","JUDO","JUDY","JUJU","JUKE","JULY","JUNE","JUNK","JUNO","JURY","JUST","JUTE","KAHN","KALE","KANE","KANT","KARL","KATE","KEEL","KEEN","KENO","KENT","KERN","KERR","KEYS","KICK","KILL","KIND","KING","KIRK","KISS","KITE","KLAN","KNEE","KNEW","KNIT","KNOB","KNOT","KNOW","KOCH","KONG","KUDO","KURD","KURT","KYLE","LACE","LACK","LACY","LADY","LAID","LAIN","LAIR","LAKE","LAMB","LAME","LAND","LANE","LANG","LARD","LARK","LASS","LAST","LATE","LAUD","LAVA","LAWN","LAWS","LAYS","LEAD","LEAF","LEAK","LEAN","LEAR","LEEK","LEER","LEFT","LEND","LENS","LENT","LEON","LESK","LESS","LEST","LETS","LIAR","LICE","LICK","LIED","LIEN","LIES","LIEU","LIFE","LIFT","LIKE","LILA","LILT","LILY","LIMA","LIMB","LIME","LIND","LINE","LINK","LINT","LION","LISA","LIST","LIVE","LOAD","LOAF","LOAM","LOAN","LOCK","LOFT","LOGE","LOIS","LOLA","LONE","LONG","LOOK","LOON","LOOT","LORD","LORE","LOSE","LOSS","LOST","LOUD","LOVE","LOWE","LUCK","LUCY","LUGE","LUKE","LULU","LUND","LUNG","LURA","LURE","LURK","LUSH","LUST","LYLE","LYNN","LYON","LYRA","MACE","MADE","MAGI","MAID","MAIL","MAIN","MAKE","MALE","MALI","MALL","MALT","MANA","MANN","MANY","MARC","MARE","MARK","MARS","MART","MARY","MASH","MASK","MASS","MAST","MATE","MATH","MAUL","MAYO","MEAD","MEAL","MEAN","MEAT","MEEK","MEET","MELD","MELT","MEMO","MEND","MENU","MERT","MESH","MESS","MICE","MIKE","MILD","MILE","MILK","MILL","MILT","MIMI","MIND","MINE","MINI","MINK","MINT","MIRE","MISS","MIST","MITE","MITT","MOAN","MOAT","MOCK","MODE","MOLD","MOLE","MOLL","MOLT","MONA","MONK","MONT","MOOD","MOON","MOOR","MOOT","MORE","MORN","MORT","MOSS","MOST","MOTH","MOVE","MUCH","MUCK","MUDD","MUFF","MULE","MULL","MURK","MUSH","MUST","MUTE","MUTT","MYRA","MYTH","NAGY","NAIL","NAIR","NAME","NARY","NASH","NAVE","NAVY","NEAL","NEAR","NEAT","NECK","NEED","NEIL","NELL","NEON","NERO","NESS","NEST","NEWS","NEWT","NIBS","NICE","NICK","NILE","NINA","NINE","NOAH","NODE","NOEL","NOLL","NONE","NOOK","NOON","NORM","NOSE","NOTE","NOUN","NOVA","NUDE","NULL","NUMB","OATH","OBEY","OBOE","ODIN","OHIO","OILY","OINT","OKAY","OLAF","OLDY","OLGA","OLIN","OMAN","OMEN","OMIT","ONCE","ONES","ONLY","ONTO","ONUS","ORAL","ORGY","OSLO","OTIS","OTTO","OUCH","OUST","OUTS","OVAL","OVEN","OVER","OWLY","OWNS","QUAD","QUIT","QUOD","RACE","RACK","RACY","RAFT","RAGE","RAID","RAIL","RAIN","RAKE","RANK","RANT","RARE","RASH","RATE","RAVE","RAYS","READ","REAL","REAM","REAR","RECK","REED","REEF","REEK","REEL","REID","REIN","RENA","REND","RENT","REST","RICE","RICH","RICK","RIDE","RIFT","RILL","RIME","RING","RINK","RISE","RISK","RITE","ROAD","ROAM","ROAR","ROBE","ROCK","RODE","ROIL","ROLL","ROME","ROOD","ROOF","ROOK","ROOM","ROOT","ROSA","ROSE","ROSS","ROSY","ROTH","ROUT","ROVE","ROWE","ROWS","RUBE","RUBY","RUDE","RUDY","RUIN","RULE","RUNG","RUNS","RUNT","RUSE","RUSH","RUSK","RUSS","RUST","RUTH","SACK","SAFE","SAGE","SAID","SAIL","SALE","SALK","SALT","SAME","SAND","SANE","SANG","SANK","SARA","SAUL","SAVE","SAYS","SCAN","SCAR","SCAT","SCOT","SEAL","SEAM","SEAR","SEAT","SEED","SEEK","SEEM","SEEN","SEES","SELF","SELL","SEND","SENT","SETS","SEWN","SHAG","SHAM","SHAW","SHAY","SHED","SHIM","SHIN","SHOD","SHOE","SHOT","SHOW","SHUN","SHUT","SICK","SIDE","SIFT","SIGH","SIGN","SILK","SILL","SILO","SILT","SINE","SING","SINK","SIRE","SITE","SITS","SITU","SKAT","SKEW","SKID","SKIM","SKIN","SKIT","SLAB","SLAM","SLAT","SLAY","SLED","SLEW","SLID","SLIM","SLIT","SLOB","SLOG","SLOT","SLOW","SLUG","SLUM","SLUR","SMOG","SMUG","SNAG","SNOB","SNOW","SNUB","SNUG","SOAK","SOAR","SOCK","SODA","SOFA","SOFT","SOIL","SOLD","SOME","SONG","SOON","SOOT","SORE","SORT","SOUL","SOUR","SOWN","STAB","STAG","STAN","STAR","STAY","STEM","STEW","STIR","STOW","STUB","STUN","SUCH","SUDS","SUIT","SULK","SUMS","SUNG","SUNK","SURE","SURF","SWAB","SWAG","SWAM","SWAN","SWAT","SWAY","SWIM","SWUM","TACK","TACT","TAIL","TAKE","TALE","TALK","TALL","TANK","TASK","TATE","TAUT","TEAL","TEAM","TEAR","TECH","TEEM","TEEN","TEET","TELL","TEND","TENT","TERM","TERN","TESS","TEST","THAN","THAT","THEE","THEM","THEN","THEY","THIN","THIS","THUD","THUG","TICK","TIDE","TIDY","TIED","TIER","TILE","TILL","TILT","TIME","TINA","TINE","TINT","TINY","TIRE","TOAD","TOGO","TOIL","TOLD","TOLL","TONE","TONG","TONY","TOOK","TOOL","TOOT","TORE","TORN","TOTE","TOUR","TOUT","TOWN","TRAG","TRAM","TRAY","TREE","TREK","TRIG","TRIM","TRIO","TROD","TROT","TROY","TRUE","TUBA","TUBE","TUCK","TUFT","TUNA","TUNE","TUNG","TURF","TURN","TUSK","TWIG","TWIN","TWIT","ULAN","UNIT","URGE","USED","USER","USES","UTAH","VAIL","VAIN","VALE","VARY","VASE","VAST","VEAL","VEDA","VEIL","VEIN","VEND","VENT","VERB","VERY","VETO","VICE","VIEW","VINE","VISE","VOID","VOLT","VOTE","WACK","WADE","WAGE","WAIL","WAIT","WAKE","WALE","WALK","WALL","WALT","WAND","WANE","WANG","WANT","WARD","WARM","WARN","WART","WASH","WAST","WATS","WATT","WAVE","WAVY","WAYS","WEAK","WEAL","WEAN","WEAR","WEED","WEEK","WEIR","WELD","WELL","WELT","WENT","WERE","WERT","WEST","WHAM","WHAT","WHEE","WHEN","WHET","WHOA","WHOM","WICK","WIFE","WILD","WILL","WIND","WINE","WING","WINK","WINO","WIRE","WISE","WISH","WITH","WOLF","WONT","WOOD","WOOL","WORD","WORE","WORK","WORM","WORN","WOVE","WRIT","WYNN","YALE","YANG","YANK","YARD","YARN","YAWL","YAWN","YEAH","YEAR","YELL","YOGA","YOKE"]});var _B=me(Wp=>{"use strict";var BRe=Wp&&Wp.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.keyToRFC1751Mnemonic=Wp.rfc1751MnemonicToKey=void 0;var Xse=qi(),VRe=BRe(Kse()),Yse=VRe.default,Gse=["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101","1110","1111"];function vB(n){let t="";for(let e of n)t+=Gse[e>>4]+Gse[e&15];return t}function jT(n,t,e){let i=n.substring(t,t+e),r=0;for(let o=0;o<i.length;o++)r=r*2+i.charCodeAt(o)-48;return r}function URe(n){let t=(0,Xse.hexToBytes)(n.replace(/\s+/gu,"")),e=WRe(Zse(t)),i=[];for(let o=0;o<(8-e.length%8)%8;o++)i.push(0);e=i.concat(e);let r=[];for(let o=0;o<e.length;o+=8){let s=e.slice(o,o+8),a=vB(s),l=0;for(let c=0;c<64;c+=2)l+=jT(a,c,2);s.push(l<<6&255),a=vB(s);for(let c=0;c<64;c+=11)r.push(Yse[jT(a,c,11)])}return r.join(" ")}Wp.keyToRFC1751Mnemonic=URe;function jRe(n){let t=n.split(" "),e=[];for(let r=0;r<t.length;r+=6){let{subKey:o,word:s}=HRe(t,r),a=vB(o),l=0;for(let u=0;u<64;u+=2)l+=jT(a,u,2);let c=jT(a,64,2),d=l&3;if(c!==d)throw new Error(`Parity error at ${s}`);e=e.concat(o.slice(0,8))}return Zse(Uint8Array.from(e))}Wp.rfc1751MnemonicToKey=jRe;function HRe(n,t){let e=n.slice(t,t+6),i=0,r=[0,0,0,0,0,0,0,0,0],o="";for(o of e){let a=Yse.indexOf(o.toUpperCase());if(a===-1)throw new TypeError(`Expected an RFC1751 word, but received '${o}'. For the full list of words in the RFC1751 encoding see https://datatracker.ietf.org/doc/html/rfc1751`);let l=(8-(i+11)%8)%8,c=a<<l,d=c>>16,u=c>>8&255,h=c&255,f=Math.floor(i/8);l>5?(r[f]|=d,r[f+1]|=u,r[f+2]|=h):l>-3?(r[f]|=u,r[f+1]|=h):r[f]|=h,i+=11}return{subKey:r.slice(),word:o}}function WRe(n){return Array.prototype.slice.call(n)}function UT(n,t,e){let i=n[t];n[t]=n[e],n[e]=i}function zRe(n){let t=n.length;for(let e=0;e<t;e+=8)UT(n,e,e+7),UT(n,e+1,e+6),UT(n,e+2,e+5),UT(n,e+3,e+4);return n}function Zse(n){let t=zRe(n);return(0,Xse.concat)([t.slice(8,16),t.slice(0,8)])}});var SB=me(Gl=>{"use strict";var qRe=Gl&&Gl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.getDecodedTransaction=Gl.addressToBigNumber=Gl.NUM_BITS_IN_HEX=Gl.compareSigners=void 0;var $Re=qi(),KRe=qRe(Us()),GRe=ml(),bB=gl();function XRe(n,t){return wB(n.Account).comparedTo(wB(t.Account))}Gl.compareSigners=XRe;Gl.NUM_BITS_IN_HEX=16;function wB(n){let t=(0,$Re.bytesToHex)((0,GRe.decodeAccountID)(n));return new KRe.default(t,Gl.NUM_BITS_IN_HEX)}Gl.addressToBigNumber=wB;function YRe(n){return typeof n=="object"?(0,bB.decode)((0,bB.encode)(n)):(0,bB.decode)(n)}Gl.getDecodedTransaction=YRe});var xB=me(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0});Iy.multisign=Iy.verifySignature=void 0;var Qse=gl(),ZRe=vd(),HT=Nt(),QRe=x5(),CB=SB();function JRe(n){if(n.length===0)throw new HT.ValidationError("There were 0 transactions to multisign");let t=n.map(e=>(0,CB.getDecodedTransaction)(e));return t.forEach(e=>{if((0,QRe.validate)(e),e.Signers==null||e.Signers.length===0)throw new HT.ValidationError("For multisigning all transactions must include a Signers field containing an array of signatures. You may have forgotten to pass the 'forMultisign' parameter when signing.");if(e.SigningPubKey!=="")throw new HT.ValidationError("SigningPubKey must be an empty string for all transactions when multisigning.")}),tOe(t),(0,Qse.encode)(nOe(t))}Iy.multisign=JRe;function eOe(n,t){let e=(0,CB.getDecodedTransaction)(n),i=t;if(typeof e.TxnSignature!="string"||!e.TxnSignature)throw new Error("Transaction is missing a signature, TxnSignature");if(!i){if(typeof e.SigningPubKey!="string"||!e.SigningPubKey)throw new Error("Transaction is missing a public key, SigningPubKey");i=e.SigningPubKey}return(0,ZRe.verify)((0,Qse.encodeForSigning)(e),e.TxnSignature,i)}Iy.verifySignature=eOe;function tOe(n){let t=JSON.stringify(Object.assign(Object.assign({},n[0]),{Signers:null}));if(n.slice(1).some(e=>JSON.stringify(Object.assign(Object.assign({},e),{Signers:null}))!==t))throw new HT.ValidationError("txJSON is not the same for all signedTransactions")}function nOe(n){let t=n.flatMap(e=>{var i;return(i=e.Signers)!==null&&i!==void 0?i:[]}).sort((e,i)=>(0,CB.compareSigners)(e.Signer,i.Signer));return Object.assign(Object.assign({},n[0]),{Signers:t})}});var Jse=me(WT=>{"use strict";Object.defineProperty(WT,"__esModule",{value:!0});WT.AMENDMENTS_ID=void 0;WT.AMENDMENTS_ID="7DB0788C020F02780A673DC74757F23823FA3014C1866E72CC4CD8B226CD6EF4"});var eae=me(zT=>{"use strict";Object.defineProperty(zT,"__esModule",{value:!0});zT.FEE_SETTINGS_ID=void 0;zT.FEE_SETTINGS_ID="4BC50C9B0D8515D3EAAE1E74B29A95804346C491EE1A95BF25E4AAB854A6A651"});var nae=me(qT=>{"use strict";Object.defineProperty(qT,"__esModule",{value:!0});qT.LoanFlags=void 0;var tae=(function(n){return n[n.lsfLoanDefault=65536]="lsfLoanDefault",n[n.lsfLoanImpaired=131072]="lsfLoanImpaired",n[n.lsfLoanOverpayment=262144]="lsfLoanOverpayment",n})(tae||(qT.LoanFlags=tae={}))});var iae=me($T=>{"use strict";Object.defineProperty($T,"__esModule",{value:!0});$T.NEGATIVE_UNL_ID=void 0;$T.NEGATIVE_UNL_ID="2E8A59AA9D3B5B186B0B9E0F62E6C02587CA74A4D778938E957B6357D364B244"});var oae=me(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0});KT.RippleStateFlags=void 0;var rae=(function(n){return n[n.lsfLowReserve=65536]="lsfLowReserve",n[n.lsfHighReserve=131072]="lsfHighReserve",n[n.lsfLowAuth=262144]="lsfLowAuth",n[n.lsfHighAuth=524288]="lsfHighAuth",n[n.lsfLowNoRipple=1048576]="lsfLowNoRipple",n[n.lsfHighNoRipple=2097152]="lsfHighNoRipple",n[n.lsfLowFreeze=4194304]="lsfLowFreeze",n[n.lsfHighFreeze=8388608]="lsfHighFreeze",n[n.lsfAMMNode=16777216]="lsfAMMNode",n[n.lsfLowDeepFreeze=33554432]="lsfLowDeepFreeze",n[n.lsfHighDeepFreeze=67108864]="lsfHighDeepFreeze",n})(rae||(KT.RippleStateFlags=rae={}))});var aae=me(GT=>{"use strict";Object.defineProperty(GT,"__esModule",{value:!0});GT.SignerListFlags=void 0;var sae=(function(n){return n[n.lsfOneOwnerCount=65536]="lsfOneOwnerCount",n})(sae||(GT.SignerListFlags=sae={}))});var cae=me(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});XT.VaultFlags=void 0;var lae=(function(n){return n[n.lsfVaultPrivate=65536]="lsfVaultPrivate",n})(lae||(XT.VaultFlags=lae={}))});var dae=me(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.VaultFlags=is.SignerListFlags=is.RippleStateFlags=is.OfferFlags=is.NEGATIVE_UNL_ID=is.LoanFlags=is.FEE_SETTINGS_ID=is.AMENDMENTS_ID=is.AccountRootFlags=void 0;var iOe=qL();Object.defineProperty(is,"AccountRootFlags",{enumerable:!0,get:function(){return iOe.AccountRootFlags}});var rOe=Jse();Object.defineProperty(is,"AMENDMENTS_ID",{enumerable:!0,get:function(){return rOe.AMENDMENTS_ID}});var oOe=eae();Object.defineProperty(is,"FEE_SETTINGS_ID",{enumerable:!0,get:function(){return oOe.FEE_SETTINGS_ID}});var sOe=nae();Object.defineProperty(is,"LoanFlags",{enumerable:!0,get:function(){return sOe.LoanFlags}});var aOe=iae();Object.defineProperty(is,"NEGATIVE_UNL_ID",{enumerable:!0,get:function(){return aOe.NEGATIVE_UNL_ID}});var lOe=YN();Object.defineProperty(is,"OfferFlags",{enumerable:!0,get:function(){return lOe.OfferFlags}});var cOe=oae();Object.defineProperty(is,"RippleStateFlags",{enumerable:!0,get:function(){return cOe.RippleStateFlags}});var dOe=aae();Object.defineProperty(is,"SignerListFlags",{enumerable:!0,get:function(){return dOe.SignerListFlags}});var uOe=cae();Object.defineProperty(is,"VaultFlags",{enumerable:!0,get:function(){return uOe.VaultFlags}})});var hae=me(uae=>{"use strict";Object.defineProperty(uae,"__esModule",{value:!0})});var TB=me(Br=>{"use strict";var fae=Br&&Br.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),hOe=Br&&Br.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),fOe=Br&&Br.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&fae(t,n,e);return hOe(t,n),t},kB=Br&&Br.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&fae(t,n,e)};Object.defineProperty(Br,"__esModule",{value:!0});Br.encodeMPTokenMetadata=Br.decodeMPTokenMetadata=Br.validateMPTokenMetadata=Br.parseTransactionFlags=Br.convertTxFlagsToNumber=Br.setTransactionFlagsToNumber=Br.parseAccountRootFlags=Br.LedgerEntry=void 0;Br.LedgerEntry=fOe(dae());var YT=jM();Object.defineProperty(Br,"parseAccountRootFlags",{enumerable:!0,get:function(){return YT.parseAccountRootFlags}});Object.defineProperty(Br,"setTransactionFlagsToNumber",{enumerable:!0,get:function(){return YT.setTransactionFlagsToNumber}});Object.defineProperty(Br,"convertTxFlagsToNumber",{enumerable:!0,get:function(){return YT.convertTxFlagsToNumber}});Object.defineProperty(Br,"parseTransactionFlags",{enumerable:!0,get:function(){return YT.parseTransactionFlags}});var MB=MM();Object.defineProperty(Br,"validateMPTokenMetadata",{enumerable:!0,get:function(){return MB.validateMPTokenMetadata}});Object.defineProperty(Br,"decodeMPTokenMetadata",{enumerable:!0,get:function(){return MB.decodeMPTokenMetadata}});Object.defineProperty(Br,"encodeMPTokenMetadata",{enumerable:!0,get:function(){return MB.encodeMPTokenMetadata}});kB(hae(),Br);kB(x5(),Br);kB(zL(),Br)});var gae=me(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0});Fy.combineBatchSigners=Fy.signMultiBatch=void 0;var pae=gl(),pOe=vd(),h1=Nt(),mOe=TB(),gOe=Tw(),EB=HN(),mae=SB();function yOe(n,t,e,i=!1){let r;return i?r={BatchSigner:{Account:n,Signers:[{Signer:{Account:i,SigningPubKey:t.publicKey,TxnSignature:e}}]}}:r={BatchSigner:{Account:n,SigningPubKey:t.publicKey,TxnSignature:e}},r}function vOe(n,t,e={}){var i;let r=(i=e.batchAccount)!==null&&i!==void 0?i:n.classicAddress,o=!1;if(typeof e.multisign=="string"?o=e.multisign:e.multisign&&(o=n.classicAddress),t.TransactionType!=="Batch")throw new h1.ValidationError("Must be a Batch transaction.");if((0,mOe.validate)(t),!new Set(t.RawTransactions.map(c=>c.RawTransaction.Account)).has(r))throw new h1.ValidationError("Must be signing for an address submitting a transaction in the Batch.");let a={flags:t.Flags,txIDs:t.RawTransactions.map(c=>(0,EB.hashSignedTx)(c.RawTransaction))},l=(0,pOe.sign)((0,pae.encodeForSigningBatch)(a),n.privateKey);t.BatchSigners=[yOe(r,n,l,o)]}Fy.signMultiBatch=vOe;function _Oe(n){if(n.length===0)throw new h1.ValidationError("There are 0 transactions to combine.");let t=n.map(i=>(0,mae.getDecodedTransaction)(i));t.forEach(i=>{if(i.TransactionType!=="Batch")throw new h1.ValidationError("TransactionType must be `Batch`.");if((0,gOe.validateBatch)(i),i.BatchSigners==null||i.BatchSigners.length===0)throw new h1.ValidationError("For combining Batch transaction signatures, all transactions must include a BatchSigners field containing an array of signatures.");if(i.TxnSignature!=null||i.Signers!=null)throw new h1.ValidationError("Batch transaction must be unsigned.")});let e=t;return bOe(e),(0,pae.encode)(wOe(e))}Fy.combineBatchSigners=_Oe;function bOe(n){let t=JSON.stringify({flags:n[0].Flags,transactionIDs:n[0].RawTransactions.map(e=>(0,EB.hashSignedTx)(e.RawTransaction))});if(n.slice(1).some(e=>JSON.stringify({flags:e.Flags,transactionIDs:e.RawTransactions.map(i=>(0,EB.hashSignedTx)(i.RawTransaction))})!==t))throw new h1.ValidationError("Flags and transaction hashes are not the same for all provided transactions.")}function wOe(n){let t=n.flatMap(e=>{var i;return(i=e.BatchSigners)!==null&&i!==void 0?i:[]}).filter(e=>e.BatchSigner.Account!==n[0].Account).sort((e,i)=>(0,mae.compareSigners)(e.BatchSigner,i.BatchSigner));return Object.assign(Object.assign({},n[0]),{BatchSigners:t})}});var yae=me(ZT=>{"use strict";Object.defineProperty(ZT,"__esModule",{value:!0});ZT.authorizeChannel=void 0;var SOe=gl(),COe=vd();function xOe(n,t,e){let i=(0,SOe.encodeForSigningClaim)({channel:t,amount:e});return(0,COe.sign)(i,n.privateKey)}ZT.authorizeChannel=xOe});var M5=me(ma=>{"use strict";var wae=ma&&ma.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ma,"__esModule",{value:!0});ma.authorizeChannel=ma.verifySignature=ma.multisign=ma.combineBatchSigners=ma.signMultiBatch=ma.Wallet=void 0;var kOe=Jre(),vae=doe(),MOe=uoe(),_ae=qi(),TOe=wae(Us()),QT=ml(),DB=gl(),Py=vd(),IB=wae(F6()),Ly=Nt(),EOe=x5(),AOe=At(),DOe=Ms(),IOe=KN(),FOe=gN(),POe=VN(),LOe=_B(),ROe=xB(),AB=IB.default.ed25519,OOe="m/44'/144'/0'/0/0";function NOe(n){if(!(n.privateKey instanceof Uint8Array))throw new Ly.ValidationError("Unable to derive privateKey from mnemonic input");if(!(n.publicKey instanceof Uint8Array))throw new Ly.ValidationError("Unable to derive publicKey from mnemonic input")}var k5=class n{constructor(t,e,i={}){this.publicKey=t,this.privateKey=e,this.classicAddress=i.masterAddress?(0,IOe.ensureClassicAddress)(i.masterAddress):(0,Py.deriveAddress)(t),this.seed=i.seed}get address(){return this.classicAddress}static generate(t=AB){if(!Object.values(IB.default).includes(t))throw new Ly.ValidationError("Invalid cryptographic signing algorithm");let e=(0,Py.generateSeed)({algorithm:t});return n.fromSeed(e,{algorithm:t})}static fromSeed(t,e={}){return n.deriveWallet(t,{algorithm:e.algorithm,masterAddress:e.masterAddress})}static fromEntropy(t,e={}){var i;let r=(i=e.algorithm)!==null&&i!==void 0?i:AB,o={entropy:Uint8Array.from(t),algorithm:r},s=(0,Py.generateSeed)(o);return n.deriveWallet(s,{algorithm:r,masterAddress:e.masterAddress})}static fromMnemonic(t,e={}){var i;if(e.mnemonicEncoding==="rfc1751")return n.fromRFC1751Mnemonic(t,{masterAddress:e.masterAddress,algorithm:e.algorithm});if(!(0,vae.validateMnemonic)(t,MOe.wordlist))throw new Ly.ValidationError("Unable to parse the given mnemonic using bip39 encoding");let r=(0,vae.mnemonicToSeedSync)(t),s=kOe.HDKey.fromMasterSeed(r).derive((i=e.derivationPath)!==null&&i!==void 0?i:OOe);NOe(s);let a=(0,_ae.bytesToHex)(s.publicKey),l=(0,_ae.bytesToHex)(s.privateKey);return new n(a,`00${l}`,{masterAddress:e.masterAddress})}static fromRFC1751Mnemonic(t,e){let i=(0,LOe.rfc1751MnemonicToKey)(t),r;e.algorithm===IB.default.ed25519?r="ed25519":r="secp256k1";let o=(0,QT.encodeSeed)(i,r);return n.fromSeed(o,{masterAddress:e.masterAddress,algorithm:e.algorithm})}static deriveWallet(t,e={}){var i;let{publicKey:r,privateKey:o}=(0,Py.deriveKeypair)(t,{algorithm:(i=e.algorithm)!==null&&i!==void 0?i:AB});return new n(r,o,{seed:t,masterAddress:e.masterAddress})}sign(t,e){let i=!1;typeof e=="string"?i=e:e&&(i=this.classicAddress);let r=(0,FOe.omitBy)(Object.assign({},t),a=>a==null);if(r.TxnSignature||r.Signers)throw new Ly.ValidationError('txJSON must not contain "TxnSignature" or "Signers" properties');if(BOe(r),(0,EOe.validate)(r),(0,DOe.hasFlag)(r,AOe.GlobalFlags.tfInnerBatchTxn,"tfInnerBatchTxn"))throw new Ly.ValidationError("Cannot sign a Batch inner transaction.");let o=Object.assign({},r);if(i){o.SigningPubKey="";let a={Account:i,SigningPubKey:this.publicKey,TxnSignature:bae(o,this.privateKey,i)};o.Signers=[{Signer:a}]}else o.SigningPubKey=this.publicKey,o.TxnSignature=bae(o,this.privateKey);let s=(0,DB.encode)(o);return{tx_blob:s,hash:(0,POe.hashSignedTx)(s)}}verifyTransaction(t){return(0,ROe.verifySignature)(t,this.publicKey)}getXAddress(t=!1,e=!1){return(0,QT.classicAddressToXAddress)(this.classicAddress,t,e)}};ma.Wallet=k5;k5.fromSecret=k5.fromSeed;function bae(n,t,e){if(e){let i=(0,QT.isValidXAddress)(e)?(0,QT.xAddressToClassicAddress)(e).classicAddress:e;return(0,Py.sign)((0,DB.encodeForMultisigning)(n,i),t)}return(0,Py.sign)((0,DB.encodeForSigning)(n),t)}function BOe(n){n.TransactionType==="Payment"&&typeof n.Amount!="string"&&n.Amount.value.includes(".")&&n.Amount.value.endsWith("0")&&(n.Amount=Object.assign({},n.Amount),n.Amount.value=new TOe.default(n.Amount.value).toString())}var Sae=gae();Object.defineProperty(ma,"signMultiBatch",{enumerable:!0,get:function(){return Sae.signMultiBatch}});Object.defineProperty(ma,"combineBatchSigners",{enumerable:!0,get:function(){return Sae.combineBatchSigners}});var Cae=xB();Object.defineProperty(ma,"multisign",{enumerable:!0,get:function(){return Cae.multisign}});Object.defineProperty(ma,"verifySignature",{enumerable:!0,get:function(){return Cae.verifySignature}});var VOe=yae();Object.defineProperty(ma,"authorizeChannel",{enumerable:!0,get:function(){return VOe.authorizeChannel}})});var xae=me(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.getFaucetPath=Ga.getFaucetHost=Ga.faucetNetworkIDs=Ga.faucetNetworkPaths=Ga.FaucetNetwork=void 0;var FB=Nt(),Ry=(function(n){return n.Testnet="faucet.altnet.rippletest.net",n.Devnet="faucet.devnet.rippletest.net",n})(Ry||(Ga.FaucetNetwork=Ry={}));Ga.faucetNetworkPaths={[Ry.Testnet]:"/accounts",[Ry.Devnet]:"/accounts"};Ga.faucetNetworkIDs=new Map([[1,Ry.Testnet],[2,Ry.Devnet]]);function UOe(n){if(n.networkID==null)throw new FB.XRPLFaucetError("Cannot create faucet URL without networkID or the faucetHost information");if(Ga.faucetNetworkIDs.has(n.networkID))return Ga.faucetNetworkIDs.get(n.networkID);throw n.networkID===0?new FB.XRPLFaucetError("Faucet is not available for mainnet."):new FB.XRPLFaucetError("Faucet URL is not defined or inferrable.")}Ga.getFaucetHost=UOe;function jOe(n){return n===void 0?"/accounts":Ga.faucetNetworkPaths[n]||"/accounts"}Ga.getFaucetPath=jOe});var Eae=me(Vu=>{"use strict";var Oy=Vu&&Vu.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.requestFunding=Vu.getStartingBalance=Vu.generateWalletToFund=void 0;var HOe=ml(),T5=Nt(),kae=xae(),WOe=M5(),Mae=1,Tae=20;function zOe(n){return n&&(0,HOe.isValidClassicAddress)(n.classicAddress)?n:WOe.Wallet.generate()}Vu.generateWalletToFund=zOe;function qOe(n,t){return Oy(this,void 0,void 0,function*(){let e=0;try{e=Number(yield n.getXrpBalance(t))}catch{}return e})}Vu.getStartingBalance=qOe;function $Oe(n,t,e,i,r){var o,s,a;return Oy(this,void 0,void 0,function*(){let l=(o=n.faucetHost)!==null&&o!==void 0?o:(0,kae.getFaucetHost)(t);if(!l)throw new T5.XRPLFaucetError("No faucet hostname could be derived");let c=(s=n.faucetPath)!==null&&s!==void 0?s:(0,kae.getFaucetPath)(l),d=yield fetch(`https://${l}${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(d.ok&&(!((a=d.headers.get("Content-Type"))===null||a===void 0)&&a.startsWith("application/json"))){let h=(yield d.json()).account.classicAddress;return KOe(t,h,i,e)}return GOe(d)})}Vu.requestFunding=$Oe;function KOe(n,t,e,i){return Oy(this,void 0,void 0,function*(){if(!t)return Promise.reject(new T5.XRPLFaucetError("The faucet account is undefined"));let r=yield XOe(n,t,i);if(r>i)return{wallet:e,balance:r};throw new T5.XRPLFaucetError(`Unable to fund address with faucet after waiting ${Mae*Tae} seconds`)})}function GOe(n){var t;return Oy(this,void 0,void 0,function*(){let e={contentType:(t=n.headers.get("Content-Type"))!==null&&t!==void 0?t:void 0,statusCode:n.status},i=n.clone();try{let r=yield n.json();e.body=r}catch{e.body=yield i.text()}return Promise.reject(new T5.XRPLFaucetError(`Request failed: ${JSON.stringify(e)}`))})}function XOe(n,t,e){return Oy(this,void 0,void 0,function*(){return new Promise((i,r)=>{let o=Tae,s=setInterval(()=>Oy(this,void 0,void 0,function*(){o<0?(clearInterval(s),i(e)):o-=1;try{let a;try{a=Number(yield n.getXrpBalance(t))}catch{}a>e&&(clearInterval(s),i(a))}catch(a){clearInterval(s),a instanceof Error&&r(new T5.XRPLFaucetError(`Unable to check if the address ${t} balance has increased. Error: ${a.message}`)),r(a)}}),Mae*1e3)})})}});var Aae=me(PB=>{"use strict";Object.defineProperty(PB,"__esModule",{value:!0});var YOe=r4(),ZOe=(()=>{class n extends YOe.EventEmitter{constructor(e,i,r){super(),this.ws=new WebSocket(e),this.ws.onclose=o=>{let s;o.reason&&(s=new TextEncoder().encode(o.reason)),this.emit("close",o.code,s)},this.ws.onopen=()=>{this.emit("open")},this.ws.onerror=o=>{this.emit("error",o)},this.ws.onmessage=o=>{this.emit("message",o.data)}}get readyState(){return this.ws.readyState}close(e,i){this.readyState===1&&this.ws.close(e,i)}send(e){this.ws.send(e)}}return n.CONNECTING=0,n.OPEN=1,n.CLOSING=2,n.CLOSED=3,n})();PB.default=ZOe});var Dae=me(E5=>{"use strict";var QOe=E5&&E5.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})};Object.defineProperty(E5,"__esModule",{value:!0});var LB=class{constructor(){this.promisesAwaitingConnection=[]}resolveAllAwaiting(){this.promisesAwaitingConnection.map(({resolve:t})=>t()),this.promisesAwaitingConnection=[]}rejectAllAwaiting(t){this.promisesAwaitingConnection.map(({reject:e})=>e(t)),this.promisesAwaitingConnection=[]}awaitConnection(){return QOe(this,void 0,void 0,function*(){return new Promise((t,e)=>{this.promisesAwaitingConnection.push({resolve:t,reject:e})})})}};E5.default=LB});var Iae=me(OB=>{"use strict";Object.defineProperty(OB,"__esModule",{value:!0});var JOe=100,eNe=1e3,RB=class{constructor(t={}){var e,i;this.factor=2,this.numAttempts=0,this.ms=(e=t.min)!==null&&e!==void 0?e:JOe,this.max=(i=t.max)!==null&&i!==void 0?i:eNe}get attempts(){return this.numAttempts}duration(){let t=this.ms*Math.pow(this.factor,this.numAttempts);return this.numAttempts+=1,Math.floor(Math.min(t,this.max))}reset(){this.numAttempts=0}};OB.default=RB});var Fae=me(A5=>{"use strict";var tNe=A5&&A5.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})};Object.defineProperty(A5,"__esModule",{value:!0});var zp=Nt(),NB=class{constructor(){this.nextId=0,this.promisesAwaitingResponse=new Map}addPromise(t,e){return tNe(this,void 0,void 0,function*(){return new Promise((i,r)=>{this.promisesAwaitingResponse.set(t,{resolve:i,reject:r,timer:e})})})}resolve(t,e){let i=this.promisesAwaitingResponse.get(t);if(i==null)throw new zp.XrplError(`No existing promise with id ${t}`,{type:"resolve",response:e});clearTimeout(i.timer),i.resolve(e),this.deletePromise(t)}reject(t,e){let i=this.promisesAwaitingResponse.get(t);if(i==null)throw new zp.XrplError(`No existing promise with id ${t}`,{type:"reject",error:e});clearTimeout(i.timer),i.reject(e),this.deletePromise(t)}rejectAll(t){this.promisesAwaitingResponse.forEach((e,i,r)=>{this.reject(i,t),this.deletePromise(i)})}createRequest(t,e){let i;t.id==null?(i=this.nextId,this.nextId+=1):i=t.id;let r=JSON.stringify(Object.assign(Object.assign({},t),{id:i})),o=setTimeout(()=>{this.reject(i,new zp.TimeoutError(`Timeout for request: ${JSON.stringify(t)} with id ${i}`,t))},e);if(o.unref&&o.unref(),this.promisesAwaitingResponse.has(i))throw clearTimeout(o),new zp.XrplError(`Response with id '${i}' is already pending`,t);let s=new Promise((a,l)=>{this.promisesAwaitingResponse.set(i,{resolve:a,reject:l,timer:o})});return[i,r,s]}handleResponse(t){var e,i,r;if(t.id==null||!(typeof t.id=="string"||typeof t.id=="number"))throw new zp.ResponseFormatError("valid id not found in response",t);if(this.promisesAwaitingResponse.has(t.id)){if(t.status==null){let o=new zp.ResponseFormatError("Response has no status");this.reject(t.id,o)}if(t.status==="error"){let o=t,s=new zp.RippledError((i=(e=o.error_message)!==null&&e!==void 0?e:o.error_exception)!==null&&i!==void 0?i:o.error,o);this.reject(t.id,s);return}if(t.status!=="success"){let o=new zp.ResponseFormatError(`unrecognized response.status: ${(r=t.status)!==null&&r!==void 0?r:""}`,t);this.reject(t.id,o);return}delete t.status,this.resolve(t.id,t)}}deletePromise(t){this.promisesAwaitingResponse.delete(t)}};A5.default=NB});var Lae=me(Mc=>{"use strict";var qp=Mc&&Mc.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},JT=Mc&&Mc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.Connection=Mc.INTENTIONAL_DISCONNECT_CODE=void 0;var Pae=qi(),Ny=JT(Aae()),nNe=r4(),Xl=Nt(),iNe=JT(Dae()),rNe=JT(Iae()),oNe=JT(Fae()),sNe=60,aNe=20,lNe=5;Mc.INTENTIONAL_DISCONNECT_CODE=4e3;function cNe(n,t){let e={agent:t.agent};t.headers&&(e.headers=t.headers),t.authorization!=null&&(e.headers=Object.assign(Object.assign({},e.headers),{Authorization:`Basic ${btoa(t.authorization)}`}));let i=Object.assign({},e);return new Ny.default(n,i)}function dNe(n,t){return qp(this,void 0,void 0,function*(){return new Promise((e,i)=>{n.send(t,r=>{r?i(new Xl.DisconnectedError(r.message,r)):e()})})})}var BB=class extends nNe.EventEmitter{constructor(t,e={}){super(),this.ws=null,this.reconnectTimeoutID=null,this.heartbeatIntervalID=null,this.retryConnectionBackoff=new rNe.default({min:100,max:sNe*1e3}),this.requestManager=new oNe.default,this.connectionManager=new iNe.default,this.trace=()=>{},this.url=t,this.config=Object.assign({timeout:aNe*1e3,connectionTimeout:lNe*1e3},e),typeof e.trace=="function"?this.trace=e.trace:e.trace&&(this.trace=console.log)}get state(){return this.ws?this.ws.readyState:Ny.default.CLOSED}get shouldBeConnected(){return this.ws!==null}isConnected(){return this.state===Ny.default.OPEN}connect(){return qp(this,void 0,void 0,function*(){if(this.isConnected())return Promise.resolve();if(this.state===Ny.default.CONNECTING)return this.connectionManager.awaitConnection();if(!this.url)return Promise.reject(new Xl.ConnectionError("Cannot connect because no server was specified"));if(this.ws!=null)return Promise.reject(new Xl.XrplError("Websocket connection never cleaned up.",{state:this.state}));let t=setTimeout(()=>{this.onConnectionFailed(new Xl.ConnectionError(`Error: connect() timed out after ${this.config.connectionTimeout} ms. If your internet connection is working, the rippled server may be blocked or inaccessible. You can also try setting the 'connectionTimeout' option in the Client constructor.`))},this.config.connectionTimeout);if(this.ws=cNe(this.url,this.config),this.ws==null)throw new Xl.XrplError("Connect: created null websocket");return this.ws.on("error",e=>this.onConnectionFailed(e)),this.ws.on("error",()=>clearTimeout(t)),this.ws.on("close",e=>this.onConnectionFailed(e)),this.ws.on("close",()=>clearTimeout(t)),this.ws.once("open",()=>{this.onceOpen(t)}),this.connectionManager.awaitConnection()})}disconnect(){return qp(this,void 0,void 0,function*(){return this.clearHeartbeatInterval(),this.reconnectTimeoutID!==null&&(clearTimeout(this.reconnectTimeoutID),this.reconnectTimeoutID=null),this.state===Ny.default.CLOSED||this.ws==null?Promise.resolve(void 0):new Promise(t=>{this.ws==null&&t(void 0),this.ws!=null&&this.ws.once("close",e=>t(e)),this.ws!=null&&this.state!==Ny.default.CLOSING&&this.ws.close(Mc.INTENTIONAL_DISCONNECT_CODE)})})}reconnect(){return qp(this,void 0,void 0,function*(){this.emit("reconnect"),yield this.disconnect(),yield this.connect()})}request(t,e){return qp(this,void 0,void 0,function*(){if(!this.shouldBeConnected||this.ws==null)throw new Xl.NotConnectedError(JSON.stringify(t),t);let[i,r,o]=this.requestManager.createRequest(t,e??this.config.timeout);return this.trace("send",r),dNe(this.ws,r).catch(s=>{try{this.requestManager.reject(i,s)}catch(a){a instanceof Xl.XrplError?this.trace("send",`send errored after connection was closed: ${a.toString()}`):this.trace("send",String(a))}}),o})}getUrl(){var t;return(t=this.url)!==null&&t!==void 0?t:""}onMessage(t){this.trace("receive",t);let e;try{e=JSON.parse(t)}catch(i){i instanceof Error&&this.emit("error","badMessage",i.message,t);return}if(e.type==null&&e.error){this.emit("error",e.error,e.error_message,e);return}if(e.type&&this.emit(e.type,e),e.type==="response")try{this.requestManager.handleResponse(e)}catch(i){i instanceof Error?this.emit("error","badMessage",i.message,t):this.emit("error","badMessage",i,i)}}onceOpen(t){return qp(this,void 0,void 0,function*(){if(this.ws==null)throw new Xl.XrplError("onceOpen: ws is null");this.ws.removeAllListeners(),clearTimeout(t),this.ws.on("message",e=>this.onMessage(e)),this.ws.on("error",e=>this.emit("error","websocket",e.message,e)),this.ws.once("close",(e,i)=>{if(this.ws==null)throw new Xl.XrplError("onceClose: ws is null");this.clearHeartbeatInterval(),this.requestManager.rejectAll(new Xl.DisconnectedError(`websocket was closed, ${i?(0,Pae.hexToString)((0,Pae.bytesToHex)(i)):""}`)),this.ws.removeAllListeners(),this.ws=null,e===void 0?this.emit("disconnected",1011):this.emit("disconnected",e),e!==Mc.INTENTIONAL_DISCONNECT_CODE&&e!==void 0&&this.intentionalDisconnect()});try{this.retryConnectionBackoff.reset(),this.startHeartbeatInterval(),this.connectionManager.resolveAllAwaiting(),this.emit("connected")}catch(e){e instanceof Error&&(this.connectionManager.rejectAllAwaiting(e),yield this.disconnect().catch(()=>{}))}})}intentionalDisconnect(){let t=this.retryConnectionBackoff.duration();this.trace("reconnect",`Retrying connection in ${t}ms.`),this.emit("reconnecting",this.retryConnectionBackoff.attempts),this.reconnectTimeoutID=setTimeout(()=>{this.reconnect().catch(e=>{this.emit("error","reconnect",e.message,e)})},t)}clearHeartbeatInterval(){this.heartbeatIntervalID&&clearInterval(this.heartbeatIntervalID)}startHeartbeatInterval(){this.clearHeartbeatInterval(),this.heartbeatIntervalID=setInterval(()=>{this.heartbeat()},this.config.timeout)}heartbeat(){return qp(this,void 0,void 0,function*(){this.request({command:"ping"}).catch(()=>qp(this,void 0,void 0,function*(){return this.reconnect().catch(t=>{this.emit("error","reconnect",t.message,t)})}))})}onConnectionFailed(t){this.ws&&(this.ws.removeAllListeners(),this.ws.on("error",()=>{}),this.ws.close(),this.ws=null),typeof t=="number"?this.connectionManager.rejectAllAwaiting(new Xl.NotConnectedError(`Connection failed with code ${t}.`,{code:t})):t?.message?this.connectionManager.rejectAllAwaiting(new Xl.NotConnectedError(t.message,t)):this.connectionManager.rejectAllAwaiting(new Xl.NotConnectedError("Connection failed."))}};Mc.Connection=BB});var Oae=me($p=>{"use strict";var uNe=$p&&$p.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($p,"__esModule",{value:!0});$p.handleStreamPartialPayment=$p.handlePartialPayment=void 0;var eE=uNe(Us()),hNe=gl(),D5=x5(),fNe=Ms(),Rae=2001;function pNe(n,t){if(typeof n=="string"&&typeof t=="string")return n===t;if(typeof n=="string"||typeof t=="string")return!1;if((0,D5.isMPTAmount)(n)&&(0,D5.isMPTAmount)(t)){let r=new eE.default(n.value),o=new eE.default(t.value);return n.mpt_issuance_id===t.mpt_issuance_id&&r.isEqualTo(o)}if((0,D5.isMPTAmount)(n)||(0,D5.isMPTAmount)(t))return!1;let e=new eE.default(n.value),i=new eE.default(t.value);return n.currency===t.currency&&n.issuer===t.issuer&&e.isEqualTo(i)}function I5(n,t){var e,i;if(n==null||t==null||n.TransactionType!=="Payment")return!1;let r=t;if(typeof r=="string"){if(r==="unavailable")return!1;r=(0,hNe.decode)(r)}if(!(typeof n.Flags=="number"?(0,fNe.isFlagEnabled)(n.Flags,D5.PaymentFlags.tfPartialPayment):(e=n.Flags)===null||e===void 0?void 0:e.tfPartialPayment))return!1;let s=r.delivered_amount,a=(i=n.DeliverMax)!==null&&i!==void 0?i:n.Amount;return s===void 0?!1:!pNe(s,a)}function mNe(n){return I5(n.result.tx_json,n.result.meta)}function gNe(n){return I5(n.result.tx_json,n.result.metadata)}function yNe(n){let{transactions:t}=n.result;return t.some(i=>{if(i.tx_json!=null){let o=i;return I5(o.tx_json,o.meta)}let r=i;return I5(r.tx,r.meta)})}function vNe(n,t){switch(n){case"tx":return mNe(t);case"transaction_entry":return gNe(t);case"account_tx":return yNe(t);default:return!1}}function _Ne(n,t){var e;if(vNe(n,t)){let i=(e=t.warnings)!==null&&e!==void 0?e:[],r={id:Rae,message:"This response contains a Partial Payment"};i.push(r),t.warnings=i}}$p.handlePartialPayment=_Ne;function bNe(n,t){var e,i;if(I5((e=n.tx_json)!==null&&e!==void 0?e:n.transaction,n.meta)){let r=(i=n.warnings)!==null&&i!==void 0?i:[],o={id:Rae,message:"This response contains a Partial Payment"};r.push(o),n.warnings=r,t("Partial payment received",JSON.stringify(n))}}$p.handleStreamPartialPayment=bNe});var Vae=me(By=>{"use strict";var $s=By&&By.__awaiter||function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})};Object.defineProperty(By,"__esModule",{value:!0});By.Client=void 0;var wNe=r4(),f1=Nt(),SNe=zL(),CNe=jM(),p1=Nre(),Kp=Kre(),xNe=Gre(),Cd=Yre(),VB=d5(),kNe=M5(),MNe=Eae(),Nae=Lae(),Bae=Oae();function TNe(n){switch(n){case"account_channels":return"channels";case"account_lines":return"lines";case"account_objects":return"account_objects";case"account_tx":return"transactions";case"account_offers":case"book_offers":return"offers";case"ledger_data":return"state";default:return null}}function ENe(n,t,e){if(t>e)throw new Error("Illegal clamp bounds");return Math.min(Math.max(n,t),e)}var ANe=1.2,DNe="2",INe=10,FNe=400,PNe=1e3,UB=class extends wNe.EventEmitter{constructor(t,e={}){var i,r;if(super(),this.apiVersion=SNe.DEFAULT_API_VERSION,typeof t!="string"||!/wss?(?:\+unix)?:\/\//u.exec(t))throw new f1.ValidationError("server URI must start with `wss://`, `ws://`, `wss+unix://`, or `ws+unix://`.");this.feeCushion=(i=e.feeCushion)!==null&&i!==void 0?i:ANe,this.maxFeeXRP=(r=e.maxFeeXRP)!==null&&r!==void 0?r:DNe,this.connection=new Nae.Connection(t,e),this.connection.on("error",(o,s,a)=>{this.emit("error",o,s,a)}),this.connection.on("reconnect",()=>{this.connection.on("connected",()=>this.emit("connected"))}),this.connection.on("disconnected",o=>{let s=o;s===Nae.INTENTIONAL_DISCONNECT_CODE&&(s=PNe),this.emit("disconnected",s)}),this.connection.on("ledgerClosed",o=>{this.emit("ledgerClosed",o)}),this.connection.on("transaction",o=>{(0,Bae.handleStreamPartialPayment)(o,this.connection.trace),this.emit("transaction",o)}),this.connection.on("validationReceived",o=>{this.emit("validationReceived",o)}),this.connection.on("manifestReceived",o=>{this.emit("manifestReceived",o)}),this.connection.on("peerStatusChange",o=>{this.emit("peerStatusChange",o)}),this.connection.on("consensusPhase",o=>{this.emit("consensusPhase",o)}),this.connection.on("path_find",o=>{this.emit("path_find",o)})}get url(){return this.connection.getUrl()}request(t){var e;return $s(this,void 0,void 0,function*(){let i=Object.assign(Object.assign({},t),{account:typeof t.account=="string"?(0,p1.ensureClassicAddress)(t.account):void 0,api_version:(e=t.api_version)!==null&&e!==void 0?e:this.apiVersion}),r=yield this.connection.request(i);return(0,Bae.handlePartialPayment)(t.command,r),r})}requestNextPage(t,e){return $s(this,void 0,void 0,function*(){if(!e.result.marker)return Promise.reject(new f1.NotFoundError("response does not have a next page"));let i=Object.assign(Object.assign({},t),{marker:e.result.marker});return this.request(i)})}on(t,e){return super.on(t,e)}requestAll(t,e){var i;return $s(this,void 0,void 0,function*(){let r=e??TNe(t.command);if(!r)throw new f1.ValidationError(`no collect key for command ${t.command}`);let o=(i=t.limit)!==null&&i!==void 0?i:1/0,s=0,a=t.marker,l=[];do{let c=ENe(o-s,INe,FNe),d=Object.assign(Object.assign({},t),{limit:c,marker:a}),u=yield this.connection.request(d),h=u.result;if(!(r in h))throw new f1.XrplError(`${r} not in result`);let f=h[r];a=h.marker,l.push(u),Array.isArray(f)&&(s+=f.length)}while(a&&s<o);return l})}getServerInfo(){var t;return $s(this,void 0,void 0,function*(){try{let e=yield this.request({command:"server_info"});this.networkID=(t=e.result.info.network_id)!==null&&t!==void 0?t:void 0,this.buildVersion=e.result.info.build_version}catch(e){console.error(e)}})}connect(){return $s(this,void 0,void 0,function*(){return this.connection.connect().then(()=>$s(this,void 0,void 0,function*(){yield this.getServerInfo(),this.emit("connected")}))})}disconnect(){return $s(this,void 0,void 0,function*(){yield this.connection.disconnect()})}isConnected(){return this.connection.isConnected()}autofill(t,e){var i;return $s(this,void 0,void 0,function*(){let r=Object.assign({},t);(0,Kp.setValidAddresses)(r),r.Flags=(0,CNe.convertTxFlagsToNumber)(r);let o=[];return(i=r.NetworkID)!==null&&i!==void 0||(r.NetworkID=(0,Kp.txNeedsNetworkID)(this)?this.networkID:void 0),r.Sequence==null&&o.push((0,Kp.setNextValidSequenceNumber)(this,r)),r.Fee==null&&o.push((0,Kp.getTransactionFee)(this,r,e)),r.LastLedgerSequence==null&&o.push((0,Kp.setLatestValidatedLedgerSequence)(this,r)),r.TransactionType==="AccountDelete"&&o.push((0,Kp.checkAccountDeleteBlockers)(this,r)),r.TransactionType==="Batch"&&o.push((0,Kp.autofillBatchTxn)(this,r)),r.TransactionType==="Payment"&&r.DeliverMax!=null&&(0,Kp.handleDeliverMax)(r),Promise.all(o).then(()=>r)})}simulate(t,e){var i;return $s(this,void 0,void 0,function*(){let r=(i=e?.binary)!==null&&i!==void 0?i:!1,o=typeof t=="string"?{command:"simulate",tx_blob:t,binary:r}:{command:"simulate",tx_json:t,binary:r};return this.request(o)})}submit(t,e){return $s(this,void 0,void 0,function*(){let i=yield(0,p1.getSignedTx)(this,t,e);return(0,p1.submitRequest)(this,i,e?.failHard)})}submitAndWait(t,e){return $s(this,void 0,void 0,function*(){let i=yield(0,p1.getSignedTx)(this,t,e),r=(0,p1.getLastLedgerSequence)(i);if(r==null)throw new f1.ValidationError("Transaction must contain a LastLedgerSequence value for reliable submission.");let o=yield(0,p1.submitRequest)(this,i,e?.failHard);if(o.result.engine_result.startsWith("tem"))throw new f1.XrplError(`Transaction failed, ${o.result.engine_result}: ${o.result.engine_result_message}`);let s=VB.hashes.hashSignedTx(i);return(0,p1.waitForFinalTransactionOutcome)(this,s,r,o.result.engine_result)})}prepareTransaction(t,e){return $s(this,void 0,void 0,function*(){return this.autofill(t,e)})}getXrpBalance(t,e={}){var i;return $s(this,void 0,void 0,function*(){let r={command:"account_info",account:t,ledger_index:(i=e.ledger_index)!==null&&i!==void 0?i:"validated",ledger_hash:e.ledger_hash},o=yield this.request(r);return(0,VB.dropsToXrp)(o.result.account_data.Balance)})}getBalances(t,e={}){var i;return $s(this,void 0,void 0,function*(){let r=[],o=Promise.resolve(0);e.peer||(o=this.getXrpBalance(t,{ledger_hash:e.ledger_hash,ledger_index:e.ledger_index}));let s={command:"account_lines",account:t,ledger_index:(i=e.ledger_index)!==null&&i!==void 0?i:"validated",ledger_hash:e.ledger_hash,peer:e.peer,limit:e.limit},a=this.requestAll(s);return yield Promise.all([o,a]).then(([l,c])=>{let d=c.flatMap(u=>(0,xNe.formatBalances)(u.result.lines));l!==0&&r.push({currency:"XRP",value:l.toString()}),r.push(...d)}),r.slice(0,e.limit)})}getOrderbook(t,e,i={}){return $s(this,void 0,void 0,function*(){(0,Cd.validateOrderbookOptions)(i);let r=(0,Cd.createBookOffersRequest)(t,e,i),o=yield(0,Cd.requestAllOffers)(this,r),s=yield(0,Cd.requestAllOffers)(this,(0,Cd.reverseRequest)(r)),a=(0,Cd.extractOffers)(o),l=(0,Cd.extractOffers)(s),c=(0,Cd.combineOrders)(a,l),{buy:d,sell:u}=(0,Cd.separateBuySellOrders)(c);return{buy:(0,Cd.sortAndLimitOffers)(d,i.limit),sell:(0,Cd.sortAndLimitOffers)(u,i.limit)}})}getLedgerIndex(){return $s(this,void 0,void 0,function*(){return(yield this.request({command:"ledger",ledger_index:"validated"})).result.ledger_index})}fundWallet(t,e={}){return $s(this,void 0,void 0,function*(){if(!this.isConnected())throw new f1.RippledError("Client not connected, cannot call faucet");let i=!!t,r=t&&(0,VB.isValidClassicAddress)(t.classicAddress)?t:kNe.Wallet.generate(),o={destination:r.classicAddress,xrpAmount:e.amount,usageContext:e.usageContext,userAgent:"xrpl.js"},s=0;if(i)try{s=Number(yield this.getXrpBalance(r.classicAddress))}catch{}return(0,MNe.requestFunding)(e,this,s,r,o)})}};By.Client=UB});var jB=me(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.parseSecretString=ga.checkChecksum=ga.calculateChecksum=ga.secretToEntropy=ga.entropyToSecret=ga.randomSecret=ga.randomEntropy=void 0;var tE=qi();function Uae(){return(0,tE.randomBytes)(16)}ga.randomEntropy=Uae;function jae(n,t){return t*(n*2+1)%9}ga.calculateChecksum=jae;function Hae(n,t,e){let i,r;if(typeof t=="string"){if(t.length!==6)throw new Error("value must have a length of 6");i=parseInt(t.slice(5),10),r=parseInt(t.slice(0,5),10)}else{if(typeof e!="number")throw new Error("checksum must be a number when value is a number");i=e,r=t}return r*(n*2+1)%9===i}ga.checkChecksum=Hae;function Wae(n){let t=new Array(Math.ceil(n.length/2)),e=Array.from(t,(i,r)=>{let o=n.slice(r*2,(r+1)*2),s=parseInt((0,tE.bytesToHex)(o),16);return"0".repeat(5-String(s).length)+String(s)+String(jae(r,s))});if(e.length!==8)throw new Error("Chucks must have 8 digits");return e}ga.entropyToSecret=Wae;function LNe(){return Wae(Uae())}ga.randomSecret=LNe;function RNe(n){return(0,tE.concat)(n.map((t,e)=>{let i=Number(t.slice(0,5)),r=Number(t.slice(5));if(t.length!==6)throw new Error("Invalid secret: number invalid");if(!Hae(e,i,r))throw new Error("Invalid secret part: checksum invalid");let o=`0000${i.toString(16)}`.slice(-4);return(0,tE.hexToBytes)(o)}))}ga.secretToEntropy=RNe;function ONe(n){let t=n.replace(/[^0-9]/gu,"");if(t.length!==48)throw new Error("Invalid secret string (should contain 8 blocks of 6 digits");return Array.from(new Array(8),(e,i)=>t.slice(i*6,(i+1)*6))}ga.parseSecretString=ONe});var zae=me(iE=>{"use strict";Object.defineProperty(iE,"__esModule",{value:!0});iE.Account=void 0;var HB=vd(),nE=jB(),WB=class{constructor(t){this._account={familySeed:"",address:"",keypair:{publicKey:"",privateKey:""}},typeof t=="string"?this._secret=(0,nE.parseSecretString)(t):Array.isArray(t)?this._secret=t:t instanceof Uint8Array?this._secret=(0,nE.entropyToSecret)(t):this._secret=(0,nE.randomSecret)(),NNe(this._secret),this.derive()}getSecret(){return this._secret}getSecretString(){return this._secret.join(" ")}getAddress(){return this._account.address}getFamilySeed(){return this._account.familySeed}getKeypair(){return this._account.keypair}toString(){return this.getSecretString()}derive(){try{let t=(0,nE.secretToEntropy)(this._secret);this._account.familySeed=(0,HB.generateSeed)({entropy:t}),this._account.keypair=(0,HB.deriveKeypair)(this._account.familySeed),this._account.address=(0,HB.deriveAddress)(this._account.keypair.publicKey)}catch(t){let e="Unknown Error";throw t instanceof Error&&(e=t.message),new Error(e)}}};iE.Account=WB;function NNe(n){if(n.length!==8)throw new Error("Secret must have 8 numbers");n.forEach(t=>{if(t.length!==6)throw new Error("Each secret number must be 6 digits")})}});var $ae=me(Gp=>{"use strict";var BNe=Gp&&Gp.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),qae=Gp&&Gp.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&BNe(t,n,e)};Object.defineProperty(Gp,"__esModule",{value:!0});qae(zae(),Gp);qae(jB(),Gp)});var Gae=me(Vy=>{"use strict";var VNe=Vy&&Vy.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.walletFromSecretNumbers=void 0;var UNe=$ae(),Kae=VNe(F6()),jNe=M5();function HNe(n,t){var e;let i=new UNe.Account(n).getFamilySeed(),r={masterAddress:void 0,algorithm:void 0};return t===void 0?r.algorithm=Kae.default.secp256k1:(r.masterAddress=t.masterAddress,r.algorithm=(e=t.algorithm)!==null&&e!==void 0?e:Kae.default.secp256k1),jNe.Wallet.fromSecret(i,r)}Vy.walletFromSecretNumbers=HNe});var Ki=me(Uo=>{"use strict";var WNe=Uo&&Uo.__createBinding||(Object.create?function(n,t,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,i,r)}:function(n,t,e,i){i===void 0&&(i=e),n[i]=t[e]}),rE=Uo&&Uo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&WNe(t,n,e)},zNe=Uo&&Uo.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.rfc1751MnemonicToKey=Uo.keyToRFC1751Mnemonic=Uo.walletFromSecretNumbers=Uo.ECDSA=Uo.Client=void 0;var qNe=Vae();Object.defineProperty(Uo,"Client",{enumerable:!0,get:function(){return qNe.Client}});rE(TB(),Uo);rE(d5(),Uo);var $Ne=F6();Object.defineProperty(Uo,"ECDSA",{enumerable:!0,get:function(){return zNe($Ne).default}});rE(Nt(),Uo);rE(M5(),Uo);var KNe=Gae();Object.defineProperty(Uo,"walletFromSecretNumbers",{enumerable:!0,get:function(){return KNe.walletFromSecretNumbers}});var Xae=_B();Object.defineProperty(Uo,"keyToRFC1751Mnemonic",{enumerable:!0,get:function(){return Xae.keyToRFC1751Mnemonic}});Object.defineProperty(Uo,"rfc1751MnemonicToKey",{enumerable:!0,get:function(){return Xae.rfc1751MnemonicToKey}})});var Yae=me(()=>{"use strict"});var qB=me(oE=>{"use strict";oE.byteLength=XNe;oE.toByteArray=ZNe;oE.fromByteArray=eBe;var Uu=[],Tc=[],GNe=typeof Uint8Array<"u"?Uint8Array:Array,zB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(m1=0,Zae=zB.length;m1<Zae;++m1)Uu[m1]=zB[m1],Tc[zB.charCodeAt(m1)]=m1;var m1,Zae;Tc[45]=62;Tc[95]=63;function Qae(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var i=e===t?0:4-e%4;return[e,i]}function XNe(n){var t=Qae(n),e=t[0],i=t[1];return(e+i)*3/4-i}function YNe(n,t,e){return(t+e)*3/4-e}function ZNe(n){var t,e=Qae(n),i=e[0],r=e[1],o=new GNe(YNe(n,i,r)),s=0,a=r>0?i-4:i,l;for(l=0;l<a;l+=4)t=Tc[n.charCodeAt(l)]<<18|Tc[n.charCodeAt(l+1)]<<12|Tc[n.charCodeAt(l+2)]<<6|Tc[n.charCodeAt(l+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=t&255;return r===2&&(t=Tc[n.charCodeAt(l)]<<2|Tc[n.charCodeAt(l+1)]>>4,o[s++]=t&255),r===1&&(t=Tc[n.charCodeAt(l)]<<10|Tc[n.charCodeAt(l+1)]<<4|Tc[n.charCodeAt(l+2)]>>2,o[s++]=t>>8&255,o[s++]=t&255),o}function QNe(n){return Uu[n>>18&63]+Uu[n>>12&63]+Uu[n>>6&63]+Uu[n&63]}function JNe(n,t,e){for(var i,r=[],o=t;o<e;o+=3)i=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),r.push(QNe(i));return r.join("")}function eBe(n){for(var t,e=n.length,i=e%3,r=[],o=16383,s=0,a=e-i;s<a;s+=o)r.push(JNe(n,s,s+o>a?a:s+o));return i===1?(t=n[e-1],r.push(Uu[t>>2]+Uu[t<<4&63]+"==")):i===2&&(t=(n[e-2]<<8)+n[e-1],r.push(Uu[t>>10]+Uu[t>>4&63]+Uu[t<<2&63]+"=")),r.join("")}});var KB=me($B=>{"use strict";$B.read=function(n,t,e,i,r){var o,s,a=r*8-i-1,l=(1<<a)-1,c=l>>1,d=-7,u=e?r-1:0,h=e?-1:1,f=n[t+u];for(u+=h,o=f&(1<<-d)-1,f>>=-d,d+=a;d>0;o=o*256+n[t+u],u+=h,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=i;d>0;s=s*256+n[t+u],u+=h,d-=8);if(o===0)o=1-c;else{if(o===l)return s?NaN:(f?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-c}return(f?-1:1)*s*Math.pow(2,o-i)};$B.write=function(n,t,e,i,r,o){var s,a,l,c=o*8-r-1,d=(1<<c)-1,u=d>>1,h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+u>=1?t+=h/l:t+=h*Math.pow(2,1-u),t*l>=2&&(s++,l/=2),s+u>=d?(a=0,s=d):s+u>=1?(a=(t*l-1)*Math.pow(2,r),s=s+u):(a=t*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;n[e+f]=a&255,f+=p,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;n[e+f]=s&255,f+=p,s/=256,c-=8);n[e+f-p]|=y*128}});var mle=me(zy=>{"use strict";var GB=qB(),Hy=KB(),Jae=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;zy.Buffer=Ze;zy.SlowBuffer=sBe;zy.INSPECT_MAX_BYTES=50;var sE=2147483647;zy.kMaxLength=sE;Ze.TYPED_ARRAY_SUPPORT=tBe();!Ze.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function tBe(){try{let n=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(n,t),n.foo()===42}catch{return!1}}Object.defineProperty(Ze.prototype,"parent",{enumerable:!0,get:function(){if(Ze.isBuffer(this))return this.buffer}});Object.defineProperty(Ze.prototype,"offset",{enumerable:!0,get:function(){if(Ze.isBuffer(this))return this.byteOffset}});function rf(n){if(n>sE)throw new RangeError('The value "'+n+'" is invalid for option "size"');let t=new Uint8Array(n);return Object.setPrototypeOf(t,Ze.prototype),t}function Ze(n,t,e){if(typeof n=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return QB(n)}return ile(n,t,e)}Ze.poolSize=8192;function ile(n,t,e){if(typeof n=="string")return iBe(n,t);if(ArrayBuffer.isView(n))return rBe(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(ju(n,ArrayBuffer)||n&&ju(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ju(n,SharedArrayBuffer)||n&&ju(n.buffer,SharedArrayBuffer)))return YB(n,t,e);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=n.valueOf&&n.valueOf();if(i!=null&&i!==n)return Ze.from(i,t,e);let r=oBe(n);if(r)return r;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return Ze.from(n[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}Ze.from=function(n,t,e){return ile(n,t,e)};Object.setPrototypeOf(Ze.prototype,Uint8Array.prototype);Object.setPrototypeOf(Ze,Uint8Array);function rle(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function nBe(n,t,e){return rle(n),n<=0?rf(n):t!==void 0?typeof e=="string"?rf(n).fill(t,e):rf(n).fill(t):rf(n)}Ze.alloc=function(n,t,e){return nBe(n,t,e)};function QB(n){return rle(n),rf(n<0?0:JB(n)|0)}Ze.allocUnsafe=function(n){return QB(n)};Ze.allocUnsafeSlow=function(n){return QB(n)};function iBe(n,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Ze.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let e=ole(n,t)|0,i=rf(e),r=i.write(n,t);return r!==e&&(i=i.slice(0,r)),i}function XB(n){let t=n.length<0?0:JB(n.length)|0,e=rf(t);for(let i=0;i<t;i+=1)e[i]=n[i]&255;return e}function rBe(n){if(ju(n,Uint8Array)){let t=new Uint8Array(n);return YB(t.buffer,t.byteOffset,t.byteLength)}return XB(n)}function YB(n,t,e){if(t<0||n.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let i;return t===void 0&&e===void 0?i=new Uint8Array(n):e===void 0?i=new Uint8Array(n,t):i=new Uint8Array(n,t,e),Object.setPrototypeOf(i,Ze.prototype),i}function oBe(n){if(Ze.isBuffer(n)){let t=JB(n.length)|0,e=rf(t);return e.length===0||n.copy(e,0,0,t),e}if(n.length!==void 0)return typeof n.length!="number"||tV(n.length)?rf(0):XB(n);if(n.type==="Buffer"&&Array.isArray(n.data))return XB(n.data)}function JB(n){if(n>=sE)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+sE.toString(16)+" bytes");return n|0}function sBe(n){return+n!=n&&(n=0),Ze.alloc(+n)}Ze.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==Ze.prototype};Ze.compare=function(t,e){if(ju(t,Uint8Array)&&(t=Ze.from(t,t.offset,t.byteLength)),ju(e,Uint8Array)&&(e=Ze.from(e,e.offset,e.byteLength)),!Ze.isBuffer(t)||!Ze.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let o=0,s=Math.min(i,r);o<s;++o)if(t[o]!==e[o]){i=t[o],r=e[o];break}return i<r?-1:r<i?1:0};Ze.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Ze.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Ze.alloc(0);let i;if(e===void 0)for(e=0,i=0;i<t.length;++i)e+=t[i].length;let r=Ze.allocUnsafe(e),o=0;for(i=0;i<t.length;++i){let s=t[i];if(ju(s,Uint8Array))o+s.length>r.length?(Ze.isBuffer(s)||(s=Ze.from(s)),s.copy(r,o)):Uint8Array.prototype.set.call(r,s,o);else if(Ze.isBuffer(s))s.copy(r,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return r};function ole(n,t){if(Ze.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||ju(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let e=n.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&e===0)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return ZB(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return ple(n).length;default:if(r)return i?-1:ZB(n).length;t=(""+t).toLowerCase(),r=!0}}Ze.byteLength=ole;function aBe(n,t,e){let i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(n||(n="utf8");;)switch(n){case"hex":return yBe(this,t,e);case"utf8":case"utf-8":return ale(this,t,e);case"ascii":return mBe(this,t,e);case"latin1":case"binary":return gBe(this,t,e);case"base64":return fBe(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vBe(this,t,e);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),i=!0}}Ze.prototype._isBuffer=!0;function g1(n,t,e){let i=n[t];n[t]=n[e],n[e]=i}Ze.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g1(this,e,e+1);return this};Ze.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g1(this,e,e+3),g1(this,e+1,e+2);return this};Ze.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g1(this,e,e+7),g1(this,e+1,e+6),g1(this,e+2,e+5),g1(this,e+3,e+4);return this};Ze.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?ale(this,0,t):aBe.apply(this,arguments)};Ze.prototype.toLocaleString=Ze.prototype.toString;Ze.prototype.equals=function(t){if(!Ze.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Ze.compare(this,t)===0};Ze.prototype.inspect=function(){let t="",e=zy.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"};Jae&&(Ze.prototype[Jae]=Ze.prototype.inspect);Ze.prototype.compare=function(t,e,i,r,o){if(ju(t,Uint8Array)&&(t=Ze.from(t,t.offset,t.byteLength)),!Ze.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),i===void 0&&(i=t?t.length:0),r===void 0&&(r=0),o===void 0&&(o=this.length),e<0||i>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=i)return 0;if(r>=o)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,r>>>=0,o>>>=0,this===t)return 0;let s=o-r,a=i-e,l=Math.min(s,a),c=this.slice(r,o),d=t.slice(e,i);for(let u=0;u<l;++u)if(c[u]!==d[u]){s=c[u],a=d[u];break}return s<a?-1:a<s?1:0};function sle(n,t,e,i,r){if(n.length===0)return-1;if(typeof e=="string"?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,tV(e)&&(e=r?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(r)return-1;e=n.length-1}else if(e<0)if(r)e=0;else return-1;if(typeof t=="string"&&(t=Ze.from(t,i)),Ze.isBuffer(t))return t.length===0?-1:ele(n,t,e,i,r);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(n,t,e):Uint8Array.prototype.lastIndexOf.call(n,t,e):ele(n,[t],e,i,r);throw new TypeError("val must be string, number or Buffer")}function ele(n,t,e,i,r){let o=1,s=n.length,a=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(n.length<2||t.length<2)return-1;o=2,s/=2,a/=2,e/=2}function l(d,u){return o===1?d[u]:d.readUInt16BE(u*o)}let c;if(r){let d=-1;for(c=e;c<s;c++)if(l(n,c)===l(t,d===-1?0:c-d)){if(d===-1&&(d=c),c-d+1===a)return d*o}else d!==-1&&(c-=c-d),d=-1}else for(e+a>s&&(e=s-a),c=e;c>=0;c--){let d=!0;for(let u=0;u<a;u++)if(l(n,c+u)!==l(t,u)){d=!1;break}if(d)return c}return-1}Ze.prototype.includes=function(t,e,i){return this.indexOf(t,e,i)!==-1};Ze.prototype.indexOf=function(t,e,i){return sle(this,t,e,i,!0)};Ze.prototype.lastIndexOf=function(t,e,i){return sle(this,t,e,i,!1)};function lBe(n,t,e,i){e=Number(e)||0;let r=n.length-e;i?(i=Number(i),i>r&&(i=r)):i=r;let o=t.length;i>o/2&&(i=o/2);let s;for(s=0;s<i;++s){let a=parseInt(t.substr(s*2,2),16);if(tV(a))return s;n[e+s]=a}return s}function cBe(n,t,e,i){return aE(ZB(t,n.length-e),n,e,i)}function dBe(n,t,e,i){return aE(SBe(t),n,e,i)}function uBe(n,t,e,i){return aE(ple(t),n,e,i)}function hBe(n,t,e,i){return aE(CBe(t,n.length-e),n,e,i)}Ze.prototype.write=function(t,e,i,r){if(e===void 0)r="utf8",i=this.length,e=0;else if(i===void 0&&typeof e=="string")r=e,i=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(i)?(i=i>>>0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-e;if((i===void 0||i>o)&&(i=o),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return lBe(this,t,e,i);case"utf8":case"utf-8":return cBe(this,t,e,i);case"ascii":case"latin1":case"binary":return dBe(this,t,e,i);case"base64":return uBe(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return hBe(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}};Ze.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fBe(n,t,e){return t===0&&e===n.length?GB.fromByteArray(n):GB.fromByteArray(n.slice(t,e))}function ale(n,t,e){e=Math.min(n.length,e);let i=[],r=t;for(;r<e;){let o=n[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=e){let l,c,d,u;switch(a){case 1:o<128&&(s=o);break;case 2:l=n[r+1],(l&192)===128&&(u=(o&31)<<6|l&63,u>127&&(s=u));break;case 3:l=n[r+1],c=n[r+2],(l&192)===128&&(c&192)===128&&(u=(o&15)<<12|(l&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:l=n[r+1],c=n[r+2],d=n[r+3],(l&192)===128&&(c&192)===128&&(d&192)===128&&(u=(o&15)<<18|(l&63)<<12|(c&63)<<6|d&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),r+=a}return pBe(i)}var tle=4096;function pBe(n){let t=n.length;if(t<=tle)return String.fromCharCode.apply(String,n);let e="",i=0;for(;i<t;)e+=String.fromCharCode.apply(String,n.slice(i,i+=tle));return e}function mBe(n,t,e){let i="";e=Math.min(n.length,e);for(let r=t;r<e;++r)i+=String.fromCharCode(n[r]&127);return i}function gBe(n,t,e){let i="";e=Math.min(n.length,e);for(let r=t;r<e;++r)i+=String.fromCharCode(n[r]);return i}function yBe(n,t,e){let i=n.length;(!t||t<0)&&(t=0),(!e||e<0||e>i)&&(e=i);let r="";for(let o=t;o<e;++o)r+=xBe[n[o]];return r}function vBe(n,t,e){let i=n.slice(t,e),r="";for(let o=0;o<i.length-1;o+=2)r+=String.fromCharCode(i[o]+i[o+1]*256);return r}Ze.prototype.slice=function(t,e){let i=this.length;t=~~t,e=e===void 0?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,Ze.prototype),r};function Ds(n,t,e){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}Ze.prototype.readUintLE=Ze.prototype.readUIntLE=function(t,e,i){t=t>>>0,e=e>>>0,i||Ds(t,e,this.length);let r=this[t],o=1,s=0;for(;++s<e&&(o*=256);)r+=this[t+s]*o;return r};Ze.prototype.readUintBE=Ze.prototype.readUIntBE=function(t,e,i){t=t>>>0,e=e>>>0,i||Ds(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r};Ze.prototype.readUint8=Ze.prototype.readUInt8=function(t,e){return t=t>>>0,e||Ds(t,1,this.length),this[t]};Ze.prototype.readUint16LE=Ze.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||Ds(t,2,this.length),this[t]|this[t+1]<<8};Ze.prototype.readUint16BE=Ze.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||Ds(t,2,this.length),this[t]<<8|this[t+1]};Ze.prototype.readUint32LE=Ze.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||Ds(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Ze.prototype.readUint32BE=Ze.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||Ds(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Ze.prototype.readBigUInt64LE=Yp(function(t){t=t>>>0,Wy(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&F5(t,this.length-8);let r=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+i*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))});Ze.prototype.readBigUInt64BE=Yp(function(t){t=t>>>0,Wy(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&F5(t,this.length-8);let r=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i;return(BigInt(r)<<BigInt(32))+BigInt(o)});Ze.prototype.readIntLE=function(t,e,i){t=t>>>0,e=e>>>0,i||Ds(t,e,this.length);let r=this[t],o=1,s=0;for(;++s<e&&(o*=256);)r+=this[t+s]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r};Ze.prototype.readIntBE=function(t,e,i){t=t>>>0,e=e>>>0,i||Ds(t,e,this.length);let r=e,o=1,s=this[t+--r];for(;r>0&&(o*=256);)s+=this[t+--r]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*e)),s};Ze.prototype.readInt8=function(t,e){return t=t>>>0,e||Ds(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Ze.prototype.readInt16LE=function(t,e){t=t>>>0,e||Ds(t,2,this.length);let i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Ze.prototype.readInt16BE=function(t,e){t=t>>>0,e||Ds(t,2,this.length);let i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Ze.prototype.readInt32LE=function(t,e){return t=t>>>0,e||Ds(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Ze.prototype.readInt32BE=function(t,e){return t=t>>>0,e||Ds(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Ze.prototype.readBigInt64LE=Yp(function(t){t=t>>>0,Wy(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&F5(t,this.length-8);let r=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});Ze.prototype.readBigInt64BE=Yp(function(t){t=t>>>0,Wy(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&F5(t,this.length-8);let r=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i)});Ze.prototype.readFloatLE=function(t,e){return t=t>>>0,e||Ds(t,4,this.length),Hy.read(this,t,!0,23,4)};Ze.prototype.readFloatBE=function(t,e){return t=t>>>0,e||Ds(t,4,this.length),Hy.read(this,t,!1,23,4)};Ze.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||Ds(t,8,this.length),Hy.read(this,t,!0,52,8)};Ze.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||Ds(t,8,this.length),Hy.read(this,t,!1,52,8)};function wl(n,t,e,i,r,o){if(!Ze.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(e+i>n.length)throw new RangeError("Index out of range")}Ze.prototype.writeUintLE=Ze.prototype.writeUIntLE=function(t,e,i,r){if(t=+t,e=e>>>0,i=i>>>0,!r){let a=Math.pow(2,8*i)-1;wl(this,t,e,i,a,0)}let o=1,s=0;for(this[e]=t&255;++s<i&&(o*=256);)this[e+s]=t/o&255;return e+i};Ze.prototype.writeUintBE=Ze.prototype.writeUIntBE=function(t,e,i,r){if(t=+t,e=e>>>0,i=i>>>0,!r){let a=Math.pow(2,8*i)-1;wl(this,t,e,i,a,0)}let o=i-1,s=1;for(this[e+o]=t&255;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+i};Ze.prototype.writeUint8=Ze.prototype.writeUInt8=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,1,255,0),this[e]=t&255,e+1};Ze.prototype.writeUint16LE=Ze.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2};Ze.prototype.writeUint16BE=Ze.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2};Ze.prototype.writeUint32LE=Ze.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4};Ze.prototype.writeUint32BE=Ze.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function lle(n,t,e,i,r){fle(t,i,r,n,e,7);let o=Number(t&BigInt(4294967295));n[e++]=o,o=o>>8,n[e++]=o,o=o>>8,n[e++]=o,o=o>>8,n[e++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return n[e++]=s,s=s>>8,n[e++]=s,s=s>>8,n[e++]=s,s=s>>8,n[e++]=s,e}function cle(n,t,e,i,r){fle(t,i,r,n,e,7);let o=Number(t&BigInt(4294967295));n[e+7]=o,o=o>>8,n[e+6]=o,o=o>>8,n[e+5]=o,o=o>>8,n[e+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return n[e+3]=s,s=s>>8,n[e+2]=s,s=s>>8,n[e+1]=s,s=s>>8,n[e]=s,e+8}Ze.prototype.writeBigUInt64LE=Yp(function(t,e=0){return lle(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});Ze.prototype.writeBigUInt64BE=Yp(function(t,e=0){return cle(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});Ze.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e=e>>>0,!r){let l=Math.pow(2,8*i-1);wl(this,t,e,i,l-1,-l)}let o=0,s=1,a=0;for(this[e]=t&255;++o<i&&(s*=256);)t<0&&a===0&&this[e+o-1]!==0&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i};Ze.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e=e>>>0,!r){let l=Math.pow(2,8*i-1);wl(this,t,e,i,l-1,-l)}let o=i-1,s=1,a=0;for(this[e+o]=t&255;--o>=0&&(s*=256);)t<0&&a===0&&this[e+o+1]!==0&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i};Ze.prototype.writeInt8=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1};Ze.prototype.writeInt16LE=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2};Ze.prototype.writeInt16BE=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2};Ze.prototype.writeInt32LE=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4};Ze.prototype.writeInt32BE=function(t,e,i){return t=+t,e=e>>>0,i||wl(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};Ze.prototype.writeBigInt64LE=Yp(function(t,e=0){return lle(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Ze.prototype.writeBigInt64BE=Yp(function(t,e=0){return cle(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function dle(n,t,e,i,r,o){if(e+i>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function ule(n,t,e,i,r){return t=+t,e=e>>>0,r||dle(n,t,e,4,34028234663852886e22,-34028234663852886e22),Hy.write(n,t,e,i,23,4),e+4}Ze.prototype.writeFloatLE=function(t,e,i){return ule(this,t,e,!0,i)};Ze.prototype.writeFloatBE=function(t,e,i){return ule(this,t,e,!1,i)};function hle(n,t,e,i,r){return t=+t,e=e>>>0,r||dle(n,t,e,8,17976931348623157e292,-17976931348623157e292),Hy.write(n,t,e,i,52,8),e+8}Ze.prototype.writeDoubleLE=function(t,e,i){return hle(this,t,e,!0,i)};Ze.prototype.writeDoubleBE=function(t,e,i){return hle(this,t,e,!1,i)};Ze.prototype.copy=function(t,e,i,r){if(!Ze.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!r&&r!==0&&(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);let o=r-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),o};Ze.prototype.fill=function(t,e,i,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!Ze.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(t.length===1){let s=t.charCodeAt(0);(r==="utf8"&&s<128||r==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;e=e>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);let o;if(typeof t=="number")for(o=e;o<i;++o)this[o]=t;else{let s=Ze.isBuffer(t)?t:Ze.from(t,r),a=s.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<i-e;++o)this[o+e]=s[o%a]}return this};var jy={};function eV(n,t,e){jy[n]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}eV("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);eV("ERR_INVALID_ARG_TYPE",function(n,t){return`The "${n}" argument must be of type number. Received type ${typeof t}`},TypeError);eV("ERR_OUT_OF_RANGE",function(n,t,e){let i=`The value of "${n}" is out of range.`,r=e;return Number.isInteger(e)&&Math.abs(e)>2**32?r=nle(String(e)):typeof e=="bigint"&&(r=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(r=nle(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i},RangeError);function nle(n){let t="",e=n.length,i=n[0]==="-"?1:0;for(;e>=i+4;e-=3)t=`_${n.slice(e-3,e)}${t}`;return`${n.slice(0,e)}${t}`}function _Be(n,t,e){Wy(t,"offset"),(n[t]===void 0||n[t+e]===void 0)&&F5(t,n.length-(e+1))}function fle(n,t,e,i,r,o){if(n>e||n<t){let s=typeof t=="bigint"?"n":"",a;throw o>3?t===0||t===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${t}${s} and <= ${e}${s}`,new jy.ERR_OUT_OF_RANGE("value",a,n)}_Be(i,r,o)}function Wy(n,t){if(typeof n!="number")throw new jy.ERR_INVALID_ARG_TYPE(t,"number",n)}function F5(n,t,e){throw Math.floor(n)!==n?(Wy(n,e),new jy.ERR_OUT_OF_RANGE(e||"offset","an integer",n)):t<0?new jy.ERR_BUFFER_OUT_OF_BOUNDS:new jy.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,n)}var bBe=/[^+/0-9A-Za-z-_]/g;function wBe(n){if(n=n.split("=")[0],n=n.trim().replace(bBe,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function ZB(n,t){t=t||1/0;let e,i=n.length,r=null,o=[];for(let s=0;s<i;++s){if(e=n.charCodeAt(s),e>55295&&e<57344){if(!r){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),r=e;continue}e=(r-55296<<10|e-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function SBe(n){let t=[];for(let e=0;e<n.length;++e)t.push(n.charCodeAt(e)&255);return t}function CBe(n,t){let e,i,r,o=[];for(let s=0;s<n.length&&!((t-=2)<0);++s)e=n.charCodeAt(s),i=e>>8,r=e%256,o.push(r),o.push(i);return o}function ple(n){return GB.toByteArray(wBe(n))}function aE(n,t,e,i){let r;for(r=0;r<i&&!(r+e>=t.length||r>=n.length);++r)t[r+e]=n[r];return r}function ju(n,t){return n instanceof t||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===t.name}function tV(n){return n!==n}var xBe=(function(){let n="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){let i=e*16;for(let r=0;r<16;++r)t[i+r]=n[e]+n[r]}return t})();function Yp(n){return typeof BigInt>"u"?kBe:n}function kBe(){throw new Error("BigInt not supported")}});var gle=me((WIt,lE)=>{"use strict";(function(){"use strict";var n="input is invalid type",t=typeof window=="object",e=t?window:{};e.JS_SHA256_NO_WINDOW&&(t=!1);var i=!t&&typeof self=="object",r=!e.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";r?e=global:i&&(e=self);var o=!e.JS_SHA256_NO_COMMON_JS&&typeof lE=="object"&&lE.exports,s=typeof define=="function"&&define.amd,a=!e.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],d=[24,16,8,0],u=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=["hex","array","digest","arrayBuffer"],f=[];(e.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(D){return Object.prototype.toString.call(D)==="[object Array]"}),a&&(e.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(D){return typeof D=="object"&&D.buffer&&D.buffer.constructor===ArrayBuffer});var p=function(D,V){return function(O){return new x(V,!0).update(O)[D]()}},y=function(D){var V=p("hex",D);r&&(V=v(V,D)),V.create=function(){return new x(D)},V.update=function(G){return V.create().update(G)};for(var O=0;O<h.length;++O){var R=h[O];V[R]=p(R,D)}return V},v=function(D,V){var O=Yae(),R=mle().Buffer,G=V?"sha224":"sha256",Z;R.from&&!e.JS_SHA256_NO_BUFFER_FROM?Z=R.from:Z=function(C){return new R(C)};var K=function(C){if(typeof C=="string")return O.createHash(G).update(C,"utf8").digest("hex");if(C==null)throw new Error(n);return C.constructor===ArrayBuffer&&(C=new Uint8Array(C)),Array.isArray(C)||ArrayBuffer.isView(C)||C.constructor===R?O.createHash(G).update(Z(C)).digest("hex"):D(C)};return K},b=function(D,V){return function(O,R){return new k(O,V,!0).update(R)[D]()}},S=function(D){var V=b("hex",D);V.create=function(G){return new k(G,D)},V.update=function(G,Z){return V.create(G).update(Z)};for(var O=0;O<h.length;++O){var R=h[O];V[R]=b(R,D)}return V};function x(D,V){V?(f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=D}x.prototype.update=function(D){if(!this.finalized){var V,O=typeof D;if(O!=="string"){if(O==="object"){if(D===null)throw new Error(n);if(a&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!a||!ArrayBuffer.isView(D)))throw new Error(n)}else throw new Error(n);V=!0}for(var R,G=0,Z,K=D.length,C=this.blocks;G<K;){if(this.hashed&&(this.hashed=!1,C[0]=this.block,this.block=C[16]=C[1]=C[2]=C[3]=C[4]=C[5]=C[6]=C[7]=C[8]=C[9]=C[10]=C[11]=C[12]=C[13]=C[14]=C[15]=0),V)for(Z=this.start;G<K&&Z<64;++G)C[Z>>>2]|=D[G]<<d[Z++&3];else for(Z=this.start;G<K&&Z<64;++G)R=D.charCodeAt(G),R<128?C[Z>>>2]|=R<<d[Z++&3]:R<2048?(C[Z>>>2]|=(192|R>>>6)<<d[Z++&3],C[Z>>>2]|=(128|R&63)<<d[Z++&3]):R<55296||R>=57344?(C[Z>>>2]|=(224|R>>>12)<<d[Z++&3],C[Z>>>2]|=(128|R>>>6&63)<<d[Z++&3],C[Z>>>2]|=(128|R&63)<<d[Z++&3]):(R=65536+((R&1023)<<10|D.charCodeAt(++G)&1023),C[Z>>>2]|=(240|R>>>18)<<d[Z++&3],C[Z>>>2]|=(128|R>>>12&63)<<d[Z++&3],C[Z>>>2]|=(128|R>>>6&63)<<d[Z++&3],C[Z>>>2]|=(128|R&63)<<d[Z++&3]);this.lastByteIndex=Z,this.bytes+=Z-this.start,Z>=64?(this.block=C[16],this.start=Z-64,this.hash(),this.hashed=!0):this.start=Z}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},x.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var D=this.blocks,V=this.lastByteIndex;D[16]=this.block,D[V>>>2]|=c[V&3],this.block=D[16],V>=56&&(this.hashed||this.hash(),D[0]=this.block,D[16]=D[1]=D[2]=D[3]=D[4]=D[5]=D[6]=D[7]=D[8]=D[9]=D[10]=D[11]=D[12]=D[13]=D[14]=D[15]=0),D[14]=this.hBytes<<3|this.bytes>>>29,D[15]=this.bytes<<3,this.hash()}},x.prototype.hash=function(){var D=this.h0,V=this.h1,O=this.h2,R=this.h3,G=this.h4,Z=this.h5,K=this.h6,C=this.h7,A=this.blocks,I,T,M,F,q,$,te,se,ue,Se,Ie;for(I=16;I<64;++I)q=A[I-15],T=(q>>>7|q<<25)^(q>>>18|q<<14)^q>>>3,q=A[I-2],M=(q>>>17|q<<15)^(q>>>19|q<<13)^q>>>10,A[I]=A[I-16]+T+A[I-7]+M<<0;for(Ie=V&O,I=0;I<64;I+=4)this.first?(this.is224?(se=300032,q=A[0]-1413257819,C=q-150054599<<0,R=q+24177077<<0):(se=704751109,q=A[0]-210244248,C=q-1521486534<<0,R=q+143694565<<0),this.first=!1):(T=(D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10),M=(G>>>6|G<<26)^(G>>>11|G<<21)^(G>>>25|G<<7),se=D&V,F=se^D&O^Ie,te=G&Z^~G&K,q=C+M+te+u[I]+A[I],$=T+F,C=R+q<<0,R=q+$<<0),T=(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10),M=(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7),ue=R&D,F=ue^R&V^se,te=C&G^~C&Z,q=K+M+te+u[I+1]+A[I+1],$=T+F,K=O+q<<0,O=q+$<<0,T=(O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10),M=(K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7),Se=O&R,F=Se^O&D^ue,te=K&C^~K&G,q=Z+M+te+u[I+2]+A[I+2],$=T+F,Z=V+q<<0,V=q+$<<0,T=(V>>>2|V<<30)^(V>>>13|V<<19)^(V>>>22|V<<10),M=(Z>>>6|Z<<26)^(Z>>>11|Z<<21)^(Z>>>25|Z<<7),Ie=V&O,F=Ie^V&R^Se,te=Z&K^~Z&C,q=G+M+te+u[I+3]+A[I+3],$=T+F,G=D+q<<0,D=q+$<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+D<<0,this.h1=this.h1+V<<0,this.h2=this.h2+O<<0,this.h3=this.h3+R<<0,this.h4=this.h4+G<<0,this.h5=this.h5+Z<<0,this.h6=this.h6+K<<0,this.h7=this.h7+C<<0},x.prototype.hex=function(){this.finalize();var D=this.h0,V=this.h1,O=this.h2,R=this.h3,G=this.h4,Z=this.h5,K=this.h6,C=this.h7,A=l[D>>>28&15]+l[D>>>24&15]+l[D>>>20&15]+l[D>>>16&15]+l[D>>>12&15]+l[D>>>8&15]+l[D>>>4&15]+l[D&15]+l[V>>>28&15]+l[V>>>24&15]+l[V>>>20&15]+l[V>>>16&15]+l[V>>>12&15]+l[V>>>8&15]+l[V>>>4&15]+l[V&15]+l[O>>>28&15]+l[O>>>24&15]+l[O>>>20&15]+l[O>>>16&15]+l[O>>>12&15]+l[O>>>8&15]+l[O>>>4&15]+l[O&15]+l[R>>>28&15]+l[R>>>24&15]+l[R>>>20&15]+l[R>>>16&15]+l[R>>>12&15]+l[R>>>8&15]+l[R>>>4&15]+l[R&15]+l[G>>>28&15]+l[G>>>24&15]+l[G>>>20&15]+l[G>>>16&15]+l[G>>>12&15]+l[G>>>8&15]+l[G>>>4&15]+l[G&15]+l[Z>>>28&15]+l[Z>>>24&15]+l[Z>>>20&15]+l[Z>>>16&15]+l[Z>>>12&15]+l[Z>>>8&15]+l[Z>>>4&15]+l[Z&15]+l[K>>>28&15]+l[K>>>24&15]+l[K>>>20&15]+l[K>>>16&15]+l[K>>>12&15]+l[K>>>8&15]+l[K>>>4&15]+l[K&15];return this.is224||(A+=l[C>>>28&15]+l[C>>>24&15]+l[C>>>20&15]+l[C>>>16&15]+l[C>>>12&15]+l[C>>>8&15]+l[C>>>4&15]+l[C&15]),A},x.prototype.toString=x.prototype.hex,x.prototype.digest=function(){this.finalize();var D=this.h0,V=this.h1,O=this.h2,R=this.h3,G=this.h4,Z=this.h5,K=this.h6,C=this.h7,A=[D>>>24&255,D>>>16&255,D>>>8&255,D&255,V>>>24&255,V>>>16&255,V>>>8&255,V&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255,G>>>24&255,G>>>16&255,G>>>8&255,G&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z&255,K>>>24&255,K>>>16&255,K>>>8&255,K&255];return this.is224||A.push(C>>>24&255,C>>>16&255,C>>>8&255,C&255),A},x.prototype.array=x.prototype.digest,x.prototype.arrayBuffer=function(){this.finalize();var D=new ArrayBuffer(this.is224?28:32),V=new DataView(D);return V.setUint32(0,this.h0),V.setUint32(4,this.h1),V.setUint32(8,this.h2),V.setUint32(12,this.h3),V.setUint32(16,this.h4),V.setUint32(20,this.h5),V.setUint32(24,this.h6),this.is224||V.setUint32(28,this.h7),D};function k(D,V,O){var R,G=typeof D;if(G==="string"){var Z=[],K=D.length,C=0,A;for(R=0;R<K;++R)A=D.charCodeAt(R),A<128?Z[C++]=A:A<2048?(Z[C++]=192|A>>>6,Z[C++]=128|A&63):A<55296||A>=57344?(Z[C++]=224|A>>>12,Z[C++]=128|A>>>6&63,Z[C++]=128|A&63):(A=65536+((A&1023)<<10|D.charCodeAt(++R)&1023),Z[C++]=240|A>>>18,Z[C++]=128|A>>>12&63,Z[C++]=128|A>>>6&63,Z[C++]=128|A&63);D=Z}else if(G==="object"){if(D===null)throw new Error(n);if(a&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!a||!ArrayBuffer.isView(D)))throw new Error(n)}else throw new Error(n);D.length>64&&(D=new x(V,!0).update(D).array());var I=[],T=[];for(R=0;R<64;++R){var M=D[R]||0;I[R]=92^M,T[R]=54^M}x.call(this,V,O),this.update(T),this.oKeyPad=I,this.inner=!0,this.sharedMemory=O}k.prototype=new x,k.prototype.finalize=function(){if(x.prototype.finalize.call(this),this.inner){this.inner=!1;var D=this.array();x.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(D),x.prototype.finalize.call(this)}};var L=y();L.sha256=L,L.sha224=y(!0),L.sha256.hmac=S(),L.sha224.hmac=S(!0),o?lE.exports=L:(e.sha256=L.sha256,e.sha224=L.sha224,s&&define(function(){return L}))})()});var R5=me(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.regexpCode=hr.getEsmExportName=hr.getProperty=hr.safeStringify=hr.stringify=hr.strConcat=hr.addCodeArg=hr.str=hr._=hr.nil=hr._Code=hr.Name=hr.IDENTIFIER=hr._CodeOrName=void 0;var P5=class{};hr._CodeOrName=P5;hr.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var y1=class extends P5{constructor(t){if(super(),!hr.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};hr.Name=y1;var Ec=class extends P5{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((e,i)=>`${e}${i}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((e,i)=>(i instanceof y1&&(e[i.str]=(e[i.str]||0)+1),e),{})}};hr._Code=Ec;hr.nil=new Ec("");function yle(n,...t){let e=[n[0]],i=0;for(;i<t.length;)iV(e,t[i]),e.push(n[++i]);return new Ec(e)}hr._=yle;var nV=new Ec("+");function vle(n,...t){let e=[L5(n[0])],i=0;for(;i<t.length;)e.push(nV),iV(e,t[i]),e.push(nV,L5(n[++i]));return MBe(e),new Ec(e)}hr.str=vle;function iV(n,t){t instanceof Ec?n.push(...t._items):t instanceof y1?n.push(t):n.push(ABe(t))}hr.addCodeArg=iV;function MBe(n){let t=1;for(;t<n.length-1;){if(n[t]===nV){let e=TBe(n[t-1],n[t+1]);if(e!==void 0){n.splice(t-1,3,e);continue}n[t++]="+"}t++}}function TBe(n,t){if(t==='""')return n;if(n==='""')return t;if(typeof n=="string")return t instanceof y1||n[n.length-1]!=='"'?void 0:typeof t!="string"?`${n.slice(0,-1)}${t}"`:t[0]==='"'?n.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(n instanceof y1))return`"${n}${t.slice(1)}`}function EBe(n,t){return t.emptyStr()?n:n.emptyStr()?t:vle`${n}${t}`}hr.strConcat=EBe;function ABe(n){return typeof n=="number"||typeof n=="boolean"||n===null?n:L5(Array.isArray(n)?n.join(","):n)}function DBe(n){return new Ec(L5(n))}hr.stringify=DBe;function L5(n){return JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}hr.safeStringify=L5;function IBe(n){return typeof n=="string"&&hr.IDENTIFIER.test(n)?new Ec(`.${n}`):yle`[${n}]`}hr.getProperty=IBe;function FBe(n){if(typeof n=="string"&&hr.IDENTIFIER.test(n))return new Ec(`${n}`);throw new Error(`CodeGen: invalid export name: ${n}, use explicit $id name mapping`)}hr.getEsmExportName=FBe;function PBe(n){return new Ec(n.toString())}hr.regexpCode=PBe});var sV=me(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.ValueScope=Cl.ValueScopeName=Cl.Scope=Cl.varKinds=Cl.UsedValueState=void 0;var Sl=R5(),rV=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},cE=(function(n){return n[n.Started=0]="Started",n[n.Completed=1]="Completed",n})(cE||(Cl.UsedValueState=cE={}));Cl.varKinds={const:new Sl.Name("const"),let:new Sl.Name("let"),var:new Sl.Name("var")};var dE=class{constructor({prefixes:t,parent:e}={}){this._names={},this._prefixes=t,this._parent=e}toName(t){return t instanceof Sl.Name?t:this.name(t)}name(t){return new Sl.Name(this._newName(t))}_newName(t){let e=this._names[t]||this._nameGroup(t);return`${t}${e.index++}`}_nameGroup(t){var e,i;if(!((i=(e=this._parent)===null||e===void 0?void 0:e._prefixes)===null||i===void 0)&&i.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};Cl.Scope=dE;var uE=class extends Sl.Name{constructor(t,e){super(e),this.prefix=t}setValue(t,{property:e,itemIndex:i}){this.value=t,this.scopePath=(0,Sl._)`.${new Sl.Name(e)}[${i}]`}};Cl.ValueScopeName=uE;var LBe=(0,Sl._)`\n`,oV=class extends dE{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts=Ge(le({},t),{_n:t.lines?LBe:Sl.nil})}get(){return this._scope}name(t){return new uE(t,this._newName(t))}value(t,e){var i;if(e.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let r=this.toName(t),{prefix:o}=r,s=(i=e.key)!==null&&i!==void 0?i:e.ref,a=this._values[o];if(a){let d=a.get(s);if(d)return d}else a=this._values[o]=new Map;a.set(s,r);let l=this._scope[o]||(this._scope[o]=[]),c=l.length;return l[c]=e.ref,r.setValue(e,{property:o,itemIndex:c}),r}getValue(t,e){let i=this._values[t];if(i)return i.get(e)}scopeRefs(t,e=this._values){return this._reduceValues(e,i=>{if(i.scopePath===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return(0,Sl._)`${t}${i.scopePath}`})}scopeCode(t=this._values,e,i){return this._reduceValues(t,r=>{if(r.value===void 0)throw new Error(`CodeGen: name "${r}" has no value`);return r.value.code},e,i)}_reduceValues(t,e,i={},r){let o=Sl.nil;for(let s in t){let a=t[s];if(!a)continue;let l=i[s]=i[s]||new Map;a.forEach(c=>{if(l.has(c))return;l.set(c,cE.Started);let d=e(c);if(d){let u=this.opts.es5?Cl.varKinds.var:Cl.varKinds.const;o=(0,Sl._)`${o}${u} ${c} = ${d};${this.opts._n}`}else if(d=r?.(c))o=(0,Sl._)`${o}${d}${this.opts._n}`;else throw new rV(c);l.set(c,cE.Completed)})}return o}};Cl.ValueScope=oV});var Oi=me(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.or=Ui.and=Ui.not=Ui.CodeGen=Ui.operators=Ui.varKinds=Ui.ValueScopeName=Ui.ValueScope=Ui.Scope=Ui.Name=Ui.regexpCode=Ui.stringify=Ui.getProperty=Ui.nil=Ui.strConcat=Ui.str=Ui._=void 0;var tr=R5(),xd=sV(),Zp=R5();Object.defineProperty(Ui,"_",{enumerable:!0,get:function(){return Zp._}});Object.defineProperty(Ui,"str",{enumerable:!0,get:function(){return Zp.str}});Object.defineProperty(Ui,"strConcat",{enumerable:!0,get:function(){return Zp.strConcat}});Object.defineProperty(Ui,"nil",{enumerable:!0,get:function(){return Zp.nil}});Object.defineProperty(Ui,"getProperty",{enumerable:!0,get:function(){return Zp.getProperty}});Object.defineProperty(Ui,"stringify",{enumerable:!0,get:function(){return Zp.stringify}});Object.defineProperty(Ui,"regexpCode",{enumerable:!0,get:function(){return Zp.regexpCode}});Object.defineProperty(Ui,"Name",{enumerable:!0,get:function(){return Zp.Name}});var gE=sV();Object.defineProperty(Ui,"Scope",{enumerable:!0,get:function(){return gE.Scope}});Object.defineProperty(Ui,"ValueScope",{enumerable:!0,get:function(){return gE.ValueScope}});Object.defineProperty(Ui,"ValueScopeName",{enumerable:!0,get:function(){return gE.ValueScopeName}});Object.defineProperty(Ui,"varKinds",{enumerable:!0,get:function(){return gE.varKinds}});Ui.operators={GT:new tr._Code(">"),GTE:new tr._Code(">="),LT:new tr._Code("<"),LTE:new tr._Code("<="),EQ:new tr._Code("==="),NEQ:new tr._Code("!=="),NOT:new tr._Code("!"),OR:new tr._Code("||"),AND:new tr._Code("&&"),ADD:new tr._Code("+")};var of=class{optimizeNodes(){return this}optimizeNames(t,e){return this}},aV=class extends of{constructor(t,e,i){super(),this.varKind=t,this.name=e,this.rhs=i}render({es5:t,_n:e}){let i=t?xd.varKinds.var:this.varKind,r=this.rhs===void 0?"":` = ${this.rhs}`;return`${i} ${this.name}${r};`+e}optimizeNames(t,e){if(t[this.name.str])return this.rhs&&(this.rhs=qy(this.rhs,t,e)),this}get names(){return this.rhs instanceof tr._CodeOrName?this.rhs.names:{}}},fE=class extends of{constructor(t,e,i){super(),this.lhs=t,this.rhs=e,this.sideEffects=i}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,e){if(!(this.lhs instanceof tr.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=qy(this.rhs,t,e),this}get names(){let t=this.lhs instanceof tr.Name?{}:le({},this.lhs.names);return mE(t,this.rhs)}},lV=class extends fE{constructor(t,e,i,r){super(t,i,r),this.op=e}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},cV=class extends of{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},dV=class extends of{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},uV=class extends of{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},hV=class extends of{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,e){return this.code=qy(this.code,t,e),this}get names(){return this.code instanceof tr._CodeOrName?this.code.names:{}}},O5=class extends of{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((e,i)=>e+i.render(t),"")}optimizeNodes(){let{nodes:t}=this,e=t.length;for(;e--;){let i=t[e].optimizeNodes();Array.isArray(i)?t.splice(e,1,...i):i?t[e]=i:t.splice(e,1)}return t.length>0?this:void 0}optimizeNames(t,e){let{nodes:i}=this,r=i.length;for(;r--;){let o=i[r];o.optimizeNames(t,e)||(RBe(t,o.names),i.splice(r,1))}return i.length>0?this:void 0}get names(){return this.nodes.reduce((t,e)=>v1(t,e.names),{})}},sf=class extends O5{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},fV=class extends O5{},pV=(()=>{class n extends sf{}return n.kind="else",n})(),hE=(()=>{class n extends sf{constructor(e,i){super(i),this.condition=e}render(e){let i=`if(${this.condition})`+super.render(e);return this.else&&(i+="else "+this.else.render(e)),i}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let i=this.else;if(i){let r=i.optimizeNodes();i=this.else=Array.isArray(r)?new pV(r):r}if(i)return e===!1?i instanceof n?i:i.nodes:this.nodes.length?this:new n(Cle(e),i instanceof n?[i]:i.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,i){var r;if(this.else=(r=this.else)===null||r===void 0?void 0:r.optimizeNames(e,i),!!(super.optimizeNames(e,i)||this.else))return this.condition=qy(this.condition,e,i),this}get names(){let e=super.names;return mE(e,this.condition),this.else&&v1(e,this.else.names),e}}return n.kind="if",n})(),yE=(()=>{class n extends sf{}return n.kind="for",n})(),mV=class extends yE{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iteration=qy(this.iteration,t,e),this}get names(){return v1(super.names,this.iteration.names)}},gV=class extends yE{constructor(t,e,i,r){super(),this.varKind=t,this.name=e,this.from=i,this.to=r}render(t){let e=t.es5?xd.varKinds.var:this.varKind,{name:i,from:r,to:o}=this;return`for(${e} ${i}=${r}; ${i}<${o}; ${i}++)`+super.render(t)}get names(){let t=mE(super.names,this.from);return mE(t,this.to)}},pE=class extends yE{constructor(t,e,i,r){super(),this.loop=t,this.varKind=e,this.name=i,this.iterable=r}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iterable=qy(this.iterable,t,e),this}get names(){return v1(super.names,this.iterable.names)}},_le=(()=>{class n extends sf{constructor(e,i,r){super(),this.name=e,this.args=i,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}return n.kind="func",n})(),ble=(()=>{class n extends O5{render(e){return"return "+super.render(e)}}return n.kind="return",n})(),yV=class extends sf{render(t){let e="try"+super.render(t);return this.catch&&(e+=this.catch.render(t)),this.finally&&(e+=this.finally.render(t)),e}optimizeNodes(){var t,e;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(e=this.finally)===null||e===void 0||e.optimizeNodes(),this}optimizeNames(t,e){var i,r;return super.optimizeNames(t,e),(i=this.catch)===null||i===void 0||i.optimizeNames(t,e),(r=this.finally)===null||r===void 0||r.optimizeNames(t,e),this}get names(){let t=super.names;return this.catch&&v1(t,this.catch.names),this.finally&&v1(t,this.finally.names),t}},wle=(()=>{class n extends sf{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}return n.kind="catch",n})(),Sle=(()=>{class n extends sf{render(e){return"finally"+super.render(e)}}return n.kind="finally",n})(),vV=class{constructor(t,e={}){this._values={},this._blockStarts=[],this._constants={},this.opts=Ge(le({},e),{_n:e.lines?`
`:""}),this._extScope=t,this._scope=new xd.Scope({parent:t}),this._nodes=[new fV]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,e){let i=this._extScope.value(t,e);return(this._values[i.prefix]||(this._values[i.prefix]=new Set)).add(i),i}getScopeValue(t,e){return this._extScope.getValue(t,e)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,e,i,r){let o=this._scope.toName(e);return i!==void 0&&r&&(this._constants[o.str]=i),this._leafNode(new aV(t,o,i)),o}const(t,e,i){return this._def(xd.varKinds.const,t,e,i)}let(t,e,i){return this._def(xd.varKinds.let,t,e,i)}var(t,e,i){return this._def(xd.varKinds.var,t,e,i)}assign(t,e,i){return this._leafNode(new fE(t,e,i))}add(t,e){return this._leafNode(new lV(t,Ui.operators.ADD,e))}code(t){return typeof t=="function"?t():t!==tr.nil&&this._leafNode(new hV(t)),this}object(...t){let e=["{"];for(let[i,r]of t)e.length>1&&e.push(","),e.push(i),(i!==r||this.opts.es5)&&(e.push(":"),(0,tr.addCodeArg)(e,r));return e.push("}"),new tr._Code(e)}if(t,e,i){if(this._blockNode(new hE(t)),e&&i)this.code(e).else().code(i).endIf();else if(e)this.code(e).endIf();else if(i)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new hE(t))}else(){return this._elseNode(new pV)}endIf(){return this._endBlockNode(hE,pV)}_for(t,e){return this._blockNode(t),e&&this.code(e).endFor(),this}for(t,e){return this._for(new mV(t),e)}forRange(t,e,i,r,o=this.opts.es5?xd.varKinds.var:xd.varKinds.let){let s=this._scope.toName(t);return this._for(new gV(o,s,e,i),()=>r(s))}forOf(t,e,i,r=xd.varKinds.const){let o=this._scope.toName(t);if(this.opts.es5){let s=e instanceof tr.Name?e:this.var("_arr",e);return this.forRange("_i",0,(0,tr._)`${s}.length`,a=>{this.var(o,(0,tr._)`${s}[${a}]`),i(o)})}return this._for(new pE("of",r,o,e),()=>i(o))}forIn(t,e,i,r=this.opts.es5?xd.varKinds.var:xd.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,tr._)`Object.keys(${e})`,i);let o=this._scope.toName(t);return this._for(new pE("in",r,o,e),()=>i(o))}endFor(){return this._endBlockNode(yE)}label(t){return this._leafNode(new cV(t))}break(t){return this._leafNode(new dV(t))}return(t){let e=new ble;if(this._blockNode(e),this.code(t),e.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ble)}try(t,e,i){if(!e&&!i)throw new Error('CodeGen: "try" without "catch" and "finally"');let r=new yV;if(this._blockNode(r),this.code(t),e){let o=this.name("e");this._currNode=r.catch=new wle(o),e(o)}return i&&(this._currNode=r.finally=new Sle,this.code(i)),this._endBlockNode(wle,Sle)}throw(t){return this._leafNode(new uV(t))}block(t,e){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(e),this}endBlock(t){let e=this._blockStarts.pop();if(e===void 0)throw new Error("CodeGen: not in self-balancing block");let i=this._nodes.length-e;if(i<0||t!==void 0&&i!==t)throw new Error(`CodeGen: wrong number of nodes: ${i} vs ${t} expected`);return this._nodes.length=e,this}func(t,e=tr.nil,i,r){return this._blockNode(new _le(t,e,i)),r&&this.code(r).endFunc(),this}endFunc(){return this._endBlockNode(_le)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,e){let i=this._currNode;if(i instanceof t||e&&i instanceof e)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${e?`${t.kind}/${e.kind}`:t.kind}"`)}_elseNode(t){let e=this._currNode;if(!(e instanceof hE))throw new Error('CodeGen: "else" without "if"');return this._currNode=e.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let e=this._nodes;e[e.length-1]=t}};Ui.CodeGen=vV;function v1(n,t){for(let e in t)n[e]=(n[e]||0)+(t[e]||0);return n}function mE(n,t){return t instanceof tr._CodeOrName?v1(n,t.names):n}function qy(n,t,e){if(n instanceof tr.Name)return i(n);if(!r(n))return n;return new tr._Code(n._items.reduce((o,s)=>(s instanceof tr.Name&&(s=i(s)),s instanceof tr._Code?o.push(...s._items):o.push(s),o),[]));function i(o){let s=e[o.str];return s===void 0||t[o.str]!==1?o:(delete t[o.str],s)}function r(o){return o instanceof tr._Code&&o._items.some(s=>s instanceof tr.Name&&t[s.str]===1&&e[s.str]!==void 0)}}function RBe(n,t){for(let e in t)n[e]=(n[e]||0)-(t[e]||0)}function Cle(n){return typeof n=="boolean"||typeof n=="number"||n===null?!n:(0,tr._)`!${_V(n)}`}Ui.not=Cle;var OBe=xle(Ui.operators.AND);function NBe(...n){return n.reduce(OBe)}Ui.and=NBe;var BBe=xle(Ui.operators.OR);function VBe(...n){return n.reduce(BBe)}Ui.or=VBe;function xle(n){return(t,e)=>t===tr.nil?e:e===tr.nil?t:(0,tr._)`${_V(t)} ${n} ${_V(e)}`}function _V(n){return n instanceof tr.Name?n:(0,tr._)`(${n})`}});var fr=me(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.checkStrictMode=Wi.getErrorPath=Wi.Type=Wi.useFunc=Wi.setEvaluated=Wi.evaluatedPropsToName=Wi.mergeEvaluated=Wi.eachItem=Wi.unescapeJsonPointer=Wi.escapeJsonPointer=Wi.escapeFragment=Wi.unescapeFragment=Wi.schemaRefOrVal=Wi.schemaHasRulesButRef=Wi.schemaHasRules=Wi.checkUnknownRules=Wi.alwaysValidSchema=Wi.toHash=void 0;var Yr=Oi(),UBe=R5();function jBe(n){let t={};for(let e of n)t[e]=!0;return t}Wi.toHash=jBe;function HBe(n,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Tle(n,t),!Ele(t,n.self.RULES.all))}Wi.alwaysValidSchema=HBe;function Tle(n,t=n.schema){let{opts:e,self:i}=n;if(!e.strictSchema||typeof t=="boolean")return;let r=i.RULES.keywords;for(let o in t)r[o]||Ile(n,`unknown keyword: "${o}"`)}Wi.checkUnknownRules=Tle;function Ele(n,t){if(typeof n=="boolean")return!n;for(let e in n)if(t[e])return!0;return!1}Wi.schemaHasRules=Ele;function WBe(n,t){if(typeof n=="boolean")return!n;for(let e in n)if(e!=="$ref"&&t.all[e])return!0;return!1}Wi.schemaHasRulesButRef=WBe;function zBe({topSchemaRef:n,schemaPath:t},e,i,r){if(!r){if(typeof e=="number"||typeof e=="boolean")return e;if(typeof e=="string")return(0,Yr._)`${e}`}return(0,Yr._)`${n}${t}${(0,Yr.getProperty)(i)}`}Wi.schemaRefOrVal=zBe;function qBe(n){return Ale(decodeURIComponent(n))}Wi.unescapeFragment=qBe;function $Be(n){return encodeURIComponent(wV(n))}Wi.escapeFragment=$Be;function wV(n){return typeof n=="number"?`${n}`:n.replace(/~/g,"~0").replace(/\//g,"~1")}Wi.escapeJsonPointer=wV;function Ale(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}Wi.unescapeJsonPointer=Ale;function KBe(n,t){if(Array.isArray(n))for(let e of n)t(e);else t(n)}Wi.eachItem=KBe;function kle({mergeNames:n,mergeToName:t,mergeValues:e,resultToName:i}){return(r,o,s,a)=>{let l=s===void 0?o:s instanceof Yr.Name?(o instanceof Yr.Name?n(r,o,s):t(r,o,s),s):o instanceof Yr.Name?(t(r,s,o),o):e(o,s);return a===Yr.Name&&!(l instanceof Yr.Name)?i(r,l):l}}Wi.mergeEvaluated={props:kle({mergeNames:(n,t,e)=>n.if((0,Yr._)`${e} !== true && ${t} !== undefined`,()=>{n.if((0,Yr._)`${t} === true`,()=>n.assign(e,!0),()=>n.assign(e,(0,Yr._)`${e} || {}`).code((0,Yr._)`Object.assign(${e}, ${t})`))}),mergeToName:(n,t,e)=>n.if((0,Yr._)`${e} !== true`,()=>{t===!0?n.assign(e,!0):(n.assign(e,(0,Yr._)`${e} || {}`),SV(n,e,t))}),mergeValues:(n,t)=>n===!0?!0:le(le({},n),t),resultToName:Dle}),items:kle({mergeNames:(n,t,e)=>n.if((0,Yr._)`${e} !== true && ${t} !== undefined`,()=>n.assign(e,(0,Yr._)`${t} === true ? true : ${e} > ${t} ? ${e} : ${t}`)),mergeToName:(n,t,e)=>n.if((0,Yr._)`${e} !== true`,()=>n.assign(e,t===!0?!0:(0,Yr._)`${e} > ${t} ? ${e} : ${t}`)),mergeValues:(n,t)=>n===!0?!0:Math.max(n,t),resultToName:(n,t)=>n.var("items",t)})};function Dle(n,t){if(t===!0)return n.var("props",!0);let e=n.var("props",(0,Yr._)`{}`);return t!==void 0&&SV(n,e,t),e}Wi.evaluatedPropsToName=Dle;function SV(n,t,e){Object.keys(e).forEach(i=>n.assign((0,Yr._)`${t}${(0,Yr.getProperty)(i)}`,!0))}Wi.setEvaluated=SV;var Mle={};function GBe(n,t){return n.scopeValue("func",{ref:t,code:Mle[t.code]||(Mle[t.code]=new UBe._Code(t.code))})}Wi.useFunc=GBe;var bV=(function(n){return n[n.Num=0]="Num",n[n.Str=1]="Str",n})(bV||(Wi.Type=bV={}));function XBe(n,t,e){if(n instanceof Yr.Name){let i=t===bV.Num;return e?i?(0,Yr._)`"[" + ${n} + "]"`:(0,Yr._)`"['" + ${n} + "']"`:i?(0,Yr._)`"/" + ${n}`:(0,Yr._)`"/" + ${n}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return e?(0,Yr.getProperty)(n).toString():"/"+wV(n)}Wi.getErrorPath=XBe;function Ile(n,t,e=n.opts.strictSchema){if(e){if(t=`strict mode: ${t}`,e===!0)throw new Error(t);n.self.logger.warn(t)}}Wi.checkStrictMode=Ile});var af=me(CV=>{"use strict";Object.defineProperty(CV,"__esModule",{value:!0});var ya=Oi(),YBe={data:new ya.Name("data"),valCxt:new ya.Name("valCxt"),instancePath:new ya.Name("instancePath"),parentData:new ya.Name("parentData"),parentDataProperty:new ya.Name("parentDataProperty"),rootData:new ya.Name("rootData"),dynamicAnchors:new ya.Name("dynamicAnchors"),vErrors:new ya.Name("vErrors"),errors:new ya.Name("errors"),this:new ya.Name("this"),self:new ya.Name("self"),scope:new ya.Name("scope"),json:new ya.Name("json"),jsonPos:new ya.Name("jsonPos"),jsonLen:new ya.Name("jsonLen"),jsonPart:new ya.Name("jsonPart")};CV.default=YBe});var N5=me(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.extendErrors=va.resetErrorsCount=va.reportExtraError=va.reportError=va.keyword$DataError=va.keywordError=void 0;var lr=Oi(),vE=fr(),Ya=af();va.keywordError={message:({keyword:n})=>(0,lr.str)`must pass "${n}" keyword validation`};va.keyword$DataError={message:({keyword:n,schemaType:t})=>t?(0,lr.str)`"${n}" keyword must be ${t} ($data)`:(0,lr.str)`"${n}" keyword is invalid ($data)`};function ZBe(n,t=va.keywordError,e,i){let{it:r}=n,{gen:o,compositeRule:s,allErrors:a}=r,l=Lle(n,t,e);i??(s||a)?Fle(o,l):Ple(r,(0,lr._)`[${l}]`)}va.reportError=ZBe;function QBe(n,t=va.keywordError,e){let{it:i}=n,{gen:r,compositeRule:o,allErrors:s}=i,a=Lle(n,t,e);Fle(r,a),o||s||Ple(i,Ya.default.vErrors)}va.reportExtraError=QBe;function JBe(n,t){n.assign(Ya.default.errors,t),n.if((0,lr._)`${Ya.default.vErrors} !== null`,()=>n.if(t,()=>n.assign((0,lr._)`${Ya.default.vErrors}.length`,t),()=>n.assign(Ya.default.vErrors,null)))}va.resetErrorsCount=JBe;function eVe({gen:n,keyword:t,schemaValue:e,data:i,errsCount:r,it:o}){if(r===void 0)throw new Error("ajv implementation error");let s=n.name("err");n.forRange("i",r,Ya.default.errors,a=>{n.const(s,(0,lr._)`${Ya.default.vErrors}[${a}]`),n.if((0,lr._)`${s}.instancePath === undefined`,()=>n.assign((0,lr._)`${s}.instancePath`,(0,lr.strConcat)(Ya.default.instancePath,o.errorPath))),n.assign((0,lr._)`${s}.schemaPath`,(0,lr.str)`${o.errSchemaPath}/${t}`),o.opts.verbose&&(n.assign((0,lr._)`${s}.schema`,e),n.assign((0,lr._)`${s}.data`,i))})}va.extendErrors=eVe;function Fle(n,t){let e=n.const("err",t);n.if((0,lr._)`${Ya.default.vErrors} === null`,()=>n.assign(Ya.default.vErrors,(0,lr._)`[${e}]`),(0,lr._)`${Ya.default.vErrors}.push(${e})`),n.code((0,lr._)`${Ya.default.errors}++`)}function Ple(n,t){let{gen:e,validateName:i,schemaEnv:r}=n;r.$async?e.throw((0,lr._)`new ${n.ValidationError}(${t})`):(e.assign((0,lr._)`${i}.errors`,t),e.return(!1))}var _1={keyword:new lr.Name("keyword"),schemaPath:new lr.Name("schemaPath"),params:new lr.Name("params"),propertyName:new lr.Name("propertyName"),message:new lr.Name("message"),schema:new lr.Name("schema"),parentSchema:new lr.Name("parentSchema")};function Lle(n,t,e){let{createErrors:i}=n.it;return i===!1?(0,lr._)`{}`:tVe(n,t,e)}function tVe(n,t,e={}){let{gen:i,it:r}=n,o=[nVe(r,e),iVe(n,e)];return rVe(n,t,o),i.object(...o)}function nVe({errorPath:n},{instancePath:t}){let e=t?(0,lr.str)`${n}${(0,vE.getErrorPath)(t,vE.Type.Str)}`:n;return[Ya.default.instancePath,(0,lr.strConcat)(Ya.default.instancePath,e)]}function iVe({keyword:n,it:{errSchemaPath:t}},{schemaPath:e,parentSchema:i}){let r=i?t:(0,lr.str)`${t}/${n}`;return e&&(r=(0,lr.str)`${r}${(0,vE.getErrorPath)(e,vE.Type.Str)}`),[_1.schemaPath,r]}function rVe(n,{params:t,message:e},i){let{keyword:r,data:o,schemaValue:s,it:a}=n,{opts:l,propertyName:c,topSchemaRef:d,schemaPath:u}=a;i.push([_1.keyword,r],[_1.params,typeof t=="function"?t(n):t||(0,lr._)`{}`]),l.messages&&i.push([_1.message,typeof e=="function"?e(n):e]),l.verbose&&i.push([_1.schema,s],[_1.parentSchema,(0,lr._)`${d}${u}`],[Ya.default.data,o]),c&&i.push([_1.propertyName,c])}});var Ole=me($y=>{"use strict";Object.defineProperty($y,"__esModule",{value:!0});$y.boolOrEmptySchema=$y.topBoolOrEmptySchema=void 0;var oVe=N5(),sVe=Oi(),aVe=af(),lVe={message:"boolean schema is false"};function cVe(n){let{gen:t,schema:e,validateName:i}=n;e===!1?Rle(n,!1):typeof e=="object"&&e.$async===!0?t.return(aVe.default.data):(t.assign((0,sVe._)`${i}.errors`,null),t.return(!0))}$y.topBoolOrEmptySchema=cVe;function dVe(n,t){let{gen:e,schema:i}=n;i===!1?(e.var(t,!1),Rle(n)):e.var(t,!0)}$y.boolOrEmptySchema=dVe;function Rle(n,t){let{gen:e,data:i}=n,r={gen:e,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:n};(0,oVe.reportError)(r,lVe,void 0,t)}});var xV=me(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0});Ky.getRules=Ky.isJSONType=void 0;var uVe=["string","number","integer","boolean","null","object","array"],hVe=new Set(uVe);function fVe(n){return typeof n=="string"&&hVe.has(n)}Ky.isJSONType=fVe;function pVe(){let n={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:Ge(le({},n),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},n.number,n.string,n.array,n.object],post:{rules:[]},all:{},keywords:{}}}Ky.getRules=pVe});var kV=me(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.shouldUseRule=Qp.shouldUseGroup=Qp.schemaHasRulesForType=void 0;function mVe({schema:n,self:t},e){let i=t.RULES.types[e];return i&&i!==!0&&Nle(n,i)}Qp.schemaHasRulesForType=mVe;function Nle(n,t){return t.rules.some(e=>Ble(n,e))}Qp.shouldUseGroup=Nle;function Ble(n,t){var e;return n[t.keyword]!==void 0||((e=t.definition.implements)===null||e===void 0?void 0:e.some(i=>n[i]!==void 0))}Qp.shouldUseRule=Ble});var B5=me(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.reportTypeError=_a.checkDataTypes=_a.checkDataType=_a.coerceAndCheckDataType=_a.getJSONTypes=_a.getSchemaTypes=_a.DataType=void 0;var gVe=xV(),yVe=kV(),vVe=N5(),Fi=Oi(),Vle=fr(),Gy=(function(n){return n[n.Correct=0]="Correct",n[n.Wrong=1]="Wrong",n})(Gy||(_a.DataType=Gy={}));function _Ve(n){let t=Ule(n.type);if(t.includes("null")){if(n.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&n.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');n.nullable===!0&&t.push("null")}return t}_a.getSchemaTypes=_Ve;function Ule(n){let t=Array.isArray(n)?n:n?[n]:[];if(t.every(gVe.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}_a.getJSONTypes=Ule;function bVe(n,t){let{gen:e,data:i,opts:r}=n,o=wVe(t,r.coerceTypes),s=t.length>0&&!(o.length===0&&t.length===1&&(0,yVe.schemaHasRulesForType)(n,t[0]));if(s){let a=TV(t,i,r.strictNumbers,Gy.Wrong);e.if(a,()=>{o.length?SVe(n,t,o):EV(n)})}return s}_a.coerceAndCheckDataType=bVe;var jle=new Set(["string","number","integer","boolean","null"]);function wVe(n,t){return t?n.filter(e=>jle.has(e)||t==="array"&&e==="array"):[]}function SVe(n,t,e){let{gen:i,data:r,opts:o}=n,s=i.let("dataType",(0,Fi._)`typeof ${r}`),a=i.let("coerced",(0,Fi._)`undefined`);o.coerceTypes==="array"&&i.if((0,Fi._)`${s} == 'object' && Array.isArray(${r}) && ${r}.length == 1`,()=>i.assign(r,(0,Fi._)`${r}[0]`).assign(s,(0,Fi._)`typeof ${r}`).if(TV(t,r,o.strictNumbers),()=>i.assign(a,r))),i.if((0,Fi._)`${a} !== undefined`);for(let c of e)(jle.has(c)||c==="array"&&o.coerceTypes==="array")&&l(c);i.else(),EV(n),i.endIf(),i.if((0,Fi._)`${a} !== undefined`,()=>{i.assign(r,a),CVe(n,a)});function l(c){switch(c){case"string":i.elseIf((0,Fi._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,Fi._)`"" + ${r}`).elseIf((0,Fi._)`${r} === null`).assign(a,(0,Fi._)`""`);return;case"number":i.elseIf((0,Fi._)`${s} == "boolean" || ${r} === null
              || (${s} == "string" && ${r} && ${r} == +${r})`).assign(a,(0,Fi._)`+${r}`);return;case"integer":i.elseIf((0,Fi._)`${s} === "boolean" || ${r} === null
              || (${s} === "string" && ${r} && ${r} == +${r} && !(${r} % 1))`).assign(a,(0,Fi._)`+${r}`);return;case"boolean":i.elseIf((0,Fi._)`${r} === "false" || ${r} === 0 || ${r} === null`).assign(a,!1).elseIf((0,Fi._)`${r} === "true" || ${r} === 1`).assign(a,!0);return;case"null":i.elseIf((0,Fi._)`${r} === "" || ${r} === 0 || ${r} === false`),i.assign(a,null);return;case"array":i.elseIf((0,Fi._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${r} === null`).assign(a,(0,Fi._)`[${r}]`)}}}function CVe({gen:n,parentData:t,parentDataProperty:e},i){n.if((0,Fi._)`${t} !== undefined`,()=>n.assign((0,Fi._)`${t}[${e}]`,i))}function MV(n,t,e,i=Gy.Correct){let r=i===Gy.Correct?Fi.operators.EQ:Fi.operators.NEQ,o;switch(n){case"null":return(0,Fi._)`${t} ${r} null`;case"array":o=(0,Fi._)`Array.isArray(${t})`;break;case"object":o=(0,Fi._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=s((0,Fi._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=s();break;default:return(0,Fi._)`typeof ${t} ${r} ${n}`}return i===Gy.Correct?o:(0,Fi.not)(o);function s(a=Fi.nil){return(0,Fi.and)((0,Fi._)`typeof ${t} == "number"`,a,e?(0,Fi._)`isFinite(${t})`:Fi.nil)}}_a.checkDataType=MV;function TV(n,t,e,i){if(n.length===1)return MV(n[0],t,e,i);let r,o=(0,Vle.toHash)(n);if(o.array&&o.object){let s=(0,Fi._)`typeof ${t} != "object"`;r=o.null?s:(0,Fi._)`!${t} || ${s}`,delete o.null,delete o.array,delete o.object}else r=Fi.nil;o.number&&delete o.integer;for(let s in o)r=(0,Fi.and)(r,MV(s,t,e,i));return r}_a.checkDataTypes=TV;var xVe={message:({schema:n})=>`must be ${n}`,params:({schema:n,schemaValue:t})=>typeof n=="string"?(0,Fi._)`{type: ${n}}`:(0,Fi._)`{type: ${t}}`};function EV(n){let t=kVe(n);(0,vVe.reportError)(t,xVe)}_a.reportTypeError=EV;function kVe(n){let{gen:t,data:e,schema:i}=n,r=(0,Vle.schemaRefOrVal)(n,i,"type");return{gen:t,keyword:"type",data:e,schema:i.type,schemaCode:r,schemaValue:r,parentSchema:i,params:{},it:n}}});var Wle=me(_E=>{"use strict";Object.defineProperty(_E,"__esModule",{value:!0});_E.assignDefaults=void 0;var Xy=Oi(),MVe=fr();function TVe(n,t){let{properties:e,items:i}=n.schema;if(t==="object"&&e)for(let r in e)Hle(n,r,e[r].default);else t==="array"&&Array.isArray(i)&&i.forEach((r,o)=>Hle(n,o,r.default))}_E.assignDefaults=TVe;function Hle(n,t,e){let{gen:i,compositeRule:r,data:o,opts:s}=n;if(e===void 0)return;let a=(0,Xy._)`${o}${(0,Xy.getProperty)(t)}`;if(r){(0,MVe.checkStrictMode)(n,`default is ignored for: ${a}`);return}let l=(0,Xy._)`${a} === undefined`;s.useDefaults==="empty"&&(l=(0,Xy._)`${l} || ${a} === null || ${a} === ""`),i.if(l,(0,Xy._)`${a} = ${(0,Xy.stringify)(e)}`)}});var Ac=me(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.validateUnion=qr.validateArray=qr.usePattern=qr.callValidateCode=qr.schemaProperties=qr.allSchemaProperties=qr.noPropertyInData=qr.propertyInData=qr.isOwnProperty=qr.hasPropFunc=qr.reportMissingProp=qr.checkMissingProp=qr.checkReportMissingProp=void 0;var fo=Oi(),AV=fr(),Jp=af(),EVe=fr();function AVe(n,t){let{gen:e,data:i,it:r}=n;e.if(IV(e,i,t,r.opts.ownProperties),()=>{n.setParams({missingProperty:(0,fo._)`${t}`},!0),n.error()})}qr.checkReportMissingProp=AVe;function DVe({gen:n,data:t,it:{opts:e}},i,r){return(0,fo.or)(...i.map(o=>(0,fo.and)(IV(n,t,o,e.ownProperties),(0,fo._)`${r} = ${o}`)))}qr.checkMissingProp=DVe;function IVe(n,t){n.setParams({missingProperty:t},!0),n.error()}qr.reportMissingProp=IVe;function zle(n){return n.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,fo._)`Object.prototype.hasOwnProperty`})}qr.hasPropFunc=zle;function DV(n,t,e){return(0,fo._)`${zle(n)}.call(${t}, ${e})`}qr.isOwnProperty=DV;function FVe(n,t,e,i){let r=(0,fo._)`${t}${(0,fo.getProperty)(e)} !== undefined`;return i?(0,fo._)`${r} && ${DV(n,t,e)}`:r}qr.propertyInData=FVe;function IV(n,t,e,i){let r=(0,fo._)`${t}${(0,fo.getProperty)(e)} === undefined`;return i?(0,fo.or)(r,(0,fo.not)(DV(n,t,e))):r}qr.noPropertyInData=IV;function qle(n){return n?Object.keys(n).filter(t=>t!=="__proto__"):[]}qr.allSchemaProperties=qle;function PVe(n,t){return qle(t).filter(e=>!(0,AV.alwaysValidSchema)(n,t[e]))}qr.schemaProperties=PVe;function LVe({schemaCode:n,data:t,it:{gen:e,topSchemaRef:i,schemaPath:r,errorPath:o},it:s},a,l,c){let d=c?(0,fo._)`${n}, ${t}, ${i}${r}`:t,u=[[Jp.default.instancePath,(0,fo.strConcat)(Jp.default.instancePath,o)],[Jp.default.parentData,s.parentData],[Jp.default.parentDataProperty,s.parentDataProperty],[Jp.default.rootData,Jp.default.rootData]];s.opts.dynamicRef&&u.push([Jp.default.dynamicAnchors,Jp.default.dynamicAnchors]);let h=(0,fo._)`${d}, ${e.object(...u)}`;return l!==fo.nil?(0,fo._)`${a}.call(${l}, ${h})`:(0,fo._)`${a}(${h})`}qr.callValidateCode=LVe;var RVe=(0,fo._)`new RegExp`;function OVe({gen:n,it:{opts:t}},e){let i=t.unicodeRegExp?"u":"",{regExp:r}=t.code,o=r(e,i);return n.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,fo._)`${r.code==="new RegExp"?RVe:(0,EVe.useFunc)(n,r)}(${e}, ${i})`})}qr.usePattern=OVe;function NVe(n){let{gen:t,data:e,keyword:i,it:r}=n,o=t.name("valid");if(r.allErrors){let a=t.let("valid",!0);return s(()=>t.assign(a,!1)),a}return t.var(o,!0),s(()=>t.break()),o;function s(a){let l=t.const("len",(0,fo._)`${e}.length`);t.forRange("i",0,l,c=>{n.subschema({keyword:i,dataProp:c,dataPropType:AV.Type.Num},o),t.if((0,fo.not)(o),a)})}}qr.validateArray=NVe;function BVe(n){let{gen:t,schema:e,keyword:i,it:r}=n;if(!Array.isArray(e))throw new Error("ajv implementation error");if(e.some(l=>(0,AV.alwaysValidSchema)(r,l))&&!r.opts.unevaluated)return;let s=t.let("valid",!1),a=t.name("_valid");t.block(()=>e.forEach((l,c)=>{let d=n.subschema({keyword:i,schemaProp:c,compositeRule:!0},a);t.assign(s,(0,fo._)`${s} || ${a}`),n.mergeValidEvaluated(d,a)||t.if((0,fo.not)(s))})),n.result(s,()=>n.reset(),()=>n.error(!0))}qr.validateUnion=BVe});var Gle=me(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.validateKeywordUsage=Hu.validSchemaType=Hu.funcKeywordCode=Hu.macroKeywordCode=void 0;var Za=Oi(),b1=af(),VVe=Ac(),UVe=N5();function jVe(n,t){let{gen:e,keyword:i,schema:r,parentSchema:o,it:s}=n,a=t.macro.call(s.self,r,o,s),l=Kle(e,i,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);let c=e.name("valid");n.subschema({schema:a,schemaPath:Za.nil,errSchemaPath:`${s.errSchemaPath}/${i}`,topSchemaRef:l,compositeRule:!0},c),n.pass(c,()=>n.error(!0))}Hu.macroKeywordCode=jVe;function HVe(n,t){var e;let{gen:i,keyword:r,schema:o,parentSchema:s,$data:a,it:l}=n;zVe(l,t);let c=!a&&t.compile?t.compile.call(l.self,o,s,l):t.validate,d=Kle(i,r,c),u=i.let("valid");n.block$data(u,h),n.ok((e=t.valid)!==null&&e!==void 0?e:u);function h(){if(t.errors===!1)y(),t.modifying&&$le(n),v(()=>n.error());else{let b=t.async?f():p();t.modifying&&$le(n),v(()=>WVe(n,b))}}function f(){let b=i.let("ruleErrs",null);return i.try(()=>y((0,Za._)`await `),S=>i.assign(u,!1).if((0,Za._)`${S} instanceof ${l.ValidationError}`,()=>i.assign(b,(0,Za._)`${S}.errors`),()=>i.throw(S))),b}function p(){let b=(0,Za._)`${d}.errors`;return i.assign(b,null),y(Za.nil),b}function y(b=t.async?(0,Za._)`await `:Za.nil){let S=l.opts.passContext?b1.default.this:b1.default.self,x=!("compile"in t&&!a||t.schema===!1);i.assign(u,(0,Za._)`${b}${(0,VVe.callValidateCode)(n,d,S,x)}`,t.modifying)}function v(b){var S;i.if((0,Za.not)((S=t.valid)!==null&&S!==void 0?S:u),b)}}Hu.funcKeywordCode=HVe;function $le(n){let{gen:t,data:e,it:i}=n;t.if(i.parentData,()=>t.assign(e,(0,Za._)`${i.parentData}[${i.parentDataProperty}]`))}function WVe(n,t){let{gen:e}=n;e.if((0,Za._)`Array.isArray(${t})`,()=>{e.assign(b1.default.vErrors,(0,Za._)`${b1.default.vErrors} === null ? ${t} : ${b1.default.vErrors}.concat(${t})`).assign(b1.default.errors,(0,Za._)`${b1.default.vErrors}.length`),(0,UVe.extendErrors)(n)},()=>n.error())}function zVe({schemaEnv:n},t){if(t.async&&!n.$async)throw new Error("async keyword in sync schema")}function Kle(n,t,e){if(e===void 0)throw new Error(`keyword "${t}" failed to compile`);return n.scopeValue("keyword",typeof e=="function"?{ref:e}:{ref:e,code:(0,Za.stringify)(e)})}function qVe(n,t,e=!1){return!t.length||t.some(i=>i==="array"?Array.isArray(n):i==="object"?n&&typeof n=="object"&&!Array.isArray(n):typeof n==i||e&&typeof n>"u")}Hu.validSchemaType=qVe;function $Ve({schema:n,opts:t,self:e,errSchemaPath:i},r,o){if(Array.isArray(r.keyword)?!r.keyword.includes(o):r.keyword!==o)throw new Error("ajv implementation error");let s=r.dependencies;if(s?.some(a=>!Object.prototype.hasOwnProperty.call(n,a)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(r.validateSchema&&!r.validateSchema(n[o])){let l=`keyword "${o}" value is invalid at path "${i}": `+e.errorsText(r.validateSchema.errors);if(t.validateSchema==="log")e.logger.error(l);else throw new Error(l)}}Hu.validateKeywordUsage=$Ve});var Yle=me(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});e0.extendSubschemaMode=e0.extendSubschemaData=e0.getSubschema=void 0;var Wu=Oi(),Xle=fr();function KVe(n,{keyword:t,schemaProp:e,schema:i,schemaPath:r,errSchemaPath:o,topSchemaRef:s}){if(t!==void 0&&i!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=n.schema[t];return e===void 0?{schema:a,schemaPath:(0,Wu._)`${n.schemaPath}${(0,Wu.getProperty)(t)}`,errSchemaPath:`${n.errSchemaPath}/${t}`}:{schema:a[e],schemaPath:(0,Wu._)`${n.schemaPath}${(0,Wu.getProperty)(t)}${(0,Wu.getProperty)(e)}`,errSchemaPath:`${n.errSchemaPath}/${t}/${(0,Xle.escapeFragment)(e)}`}}if(i!==void 0){if(r===void 0||o===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:r,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}e0.getSubschema=KVe;function GVe(n,t,{dataProp:e,dataPropType:i,data:r,dataTypes:o,propertyName:s}){if(r!==void 0&&e!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(e!==void 0){let{errorPath:c,dataPathArr:d,opts:u}=t,h=a.let("data",(0,Wu._)`${t.data}${(0,Wu.getProperty)(e)}`,!0);l(h),n.errorPath=(0,Wu.str)`${c}${(0,Xle.getErrorPath)(e,i,u.jsPropertySyntax)}`,n.parentDataProperty=(0,Wu._)`${e}`,n.dataPathArr=[...d,n.parentDataProperty]}if(r!==void 0){let c=r instanceof Wu.Name?r:a.let("data",r,!0);l(c),s!==void 0&&(n.propertyName=s)}o&&(n.dataTypes=o);function l(c){n.data=c,n.dataLevel=t.dataLevel+1,n.dataTypes=[],t.definedProperties=new Set,n.parentData=t.data,n.dataNames=[...t.dataNames,c]}}e0.extendSubschemaData=GVe;function XVe(n,{jtdDiscriminator:t,jtdMetadata:e,compositeRule:i,createErrors:r,allErrors:o}){i!==void 0&&(n.compositeRule=i),r!==void 0&&(n.createErrors=r),o!==void 0&&(n.allErrors=o),n.jtdDiscriminator=t,n.jtdMetadata=e}e0.extendSubschemaMode=XVe});var FV=me((l7t,Zle)=>{"use strict";Zle.exports=function n(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var i,r,o;if(Array.isArray(t)){if(i=t.length,i!=e.length)return!1;for(r=i;r--!==0;)if(!n(t[r],e[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(o=Object.keys(t),i=o.length,i!==Object.keys(e).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;for(r=i;r--!==0;){var s=o[r];if(!n(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}});var Jle=me((c7t,Qle)=>{"use strict";var t0=Qle.exports=function(n,t,e){typeof t=="function"&&(e=t,t={}),e=t.cb||e;var i=typeof e=="function"?e:e.pre||function(){},r=e.post||function(){};bE(t,i,r,n,"",n)};t0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};t0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};t0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};t0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function bE(n,t,e,i,r,o,s,a,l,c){if(i&&typeof i=="object"&&!Array.isArray(i)){t(i,r,o,s,a,l,c);for(var d in i){var u=i[d];if(Array.isArray(u)){if(d in t0.arrayKeywords)for(var h=0;h<u.length;h++)bE(n,t,e,u[h],r+"/"+d+"/"+h,o,r,d,i,h)}else if(d in t0.propsKeywords){if(u&&typeof u=="object")for(var f in u)bE(n,t,e,u[f],r+"/"+d+"/"+YVe(f),o,r,d,i,f)}else(d in t0.keywords||n.allKeys&&!(d in t0.skipKeywords))&&bE(n,t,e,u,r+"/"+d,o,r,d,i)}e(i,r,o,s,a,l,c)}}function YVe(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}});var V5=me(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.getSchemaRefs=xl.resolveUrl=xl.normalizeId=xl._getFullPath=xl.getFullPath=xl.inlineRef=void 0;var ZVe=fr(),QVe=FV(),JVe=Jle(),eUe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function tUe(n,t=!0){return typeof n=="boolean"?!0:t===!0?!PV(n):t?ece(n)<=t:!1}xl.inlineRef=tUe;var nUe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function PV(n){for(let t in n){if(nUe.has(t))return!0;let e=n[t];if(Array.isArray(e)&&e.some(PV)||typeof e=="object"&&PV(e))return!0}return!1}function ece(n){let t=0;for(let e in n){if(e==="$ref")return 1/0;if(t++,!eUe.has(e)&&(typeof n[e]=="object"&&(0,ZVe.eachItem)(n[e],i=>t+=ece(i)),t===1/0))return 1/0}return t}function tce(n,t="",e){e!==!1&&(t=Yy(t));let i=n.parse(t);return nce(n,i)}xl.getFullPath=tce;function nce(n,t){return n.serialize(t).split("#")[0]+"#"}xl._getFullPath=nce;var iUe=/#\/?$/;function Yy(n){return n?n.replace(iUe,""):""}xl.normalizeId=Yy;function rUe(n,t,e){return e=Yy(e),n.resolve(t,e)}xl.resolveUrl=rUe;var oUe=/^[a-z_][-a-z0-9._]*$/i;function sUe(n,t){if(typeof n=="boolean")return{};let{schemaId:e,uriResolver:i}=this.opts,r=Yy(n[e]||t),o={"":r},s=tce(i,r,!1),a={},l=new Set;return JVe(n,{allKeys:!0},(u,h,f,p)=>{if(p===void 0)return;let y=s+h,v=o[p];typeof u[e]=="string"&&(v=b.call(this,u[e])),S.call(this,u.$anchor),S.call(this,u.$dynamicAnchor),o[h]=v;function b(x){let k=this.opts.uriResolver.resolve;if(x=Yy(v?k(v,x):x),l.has(x))throw d(x);l.add(x);let L=this.refs[x];return typeof L=="string"&&(L=this.refs[L]),typeof L=="object"?c(u,L.schema,x):x!==Yy(y)&&(x[0]==="#"?(c(u,a[x],x),a[x]=u):this.refs[x]=y),x}function S(x){if(typeof x=="string"){if(!oUe.test(x))throw new Error(`invalid anchor "${x}"`);b.call(this,`#${x}`)}}}),a;function c(u,h,f){if(h!==void 0&&!QVe(u,h))throw d(f)}function d(u){return new Error(`reference "${u}" resolves to more than one schema`)}}xl.getSchemaRefs=sUe});var H5=me(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});n0.getData=n0.KeywordCxt=n0.validateFunctionCode=void 0;var ace=Ole(),ice=B5(),RV=kV(),wE=B5(),aUe=Wle(),j5=Gle(),LV=Yle(),_n=Oi(),pi=af(),lUe=V5(),lf=fr(),U5=N5();function cUe(n){if(dce(n)&&(uce(n),cce(n))){hUe(n);return}lce(n,()=>(0,ace.topBoolOrEmptySchema)(n))}n0.validateFunctionCode=cUe;function lce({gen:n,validateName:t,schema:e,schemaEnv:i,opts:r},o){r.code.es5?n.func(t,(0,_n._)`${pi.default.data}, ${pi.default.valCxt}`,i.$async,()=>{n.code((0,_n._)`"use strict"; ${rce(e,r)}`),uUe(n,r),n.code(o)}):n.func(t,(0,_n._)`${pi.default.data}, ${dUe(r)}`,i.$async,()=>n.code(rce(e,r)).code(o))}function dUe(n){return(0,_n._)`{${pi.default.instancePath}="", ${pi.default.parentData}, ${pi.default.parentDataProperty}, ${pi.default.rootData}=${pi.default.data}${n.dynamicRef?(0,_n._)`, ${pi.default.dynamicAnchors}={}`:_n.nil}}={}`}function uUe(n,t){n.if(pi.default.valCxt,()=>{n.var(pi.default.instancePath,(0,_n._)`${pi.default.valCxt}.${pi.default.instancePath}`),n.var(pi.default.parentData,(0,_n._)`${pi.default.valCxt}.${pi.default.parentData}`),n.var(pi.default.parentDataProperty,(0,_n._)`${pi.default.valCxt}.${pi.default.parentDataProperty}`),n.var(pi.default.rootData,(0,_n._)`${pi.default.valCxt}.${pi.default.rootData}`),t.dynamicRef&&n.var(pi.default.dynamicAnchors,(0,_n._)`${pi.default.valCxt}.${pi.default.dynamicAnchors}`)},()=>{n.var(pi.default.instancePath,(0,_n._)`""`),n.var(pi.default.parentData,(0,_n._)`undefined`),n.var(pi.default.parentDataProperty,(0,_n._)`undefined`),n.var(pi.default.rootData,pi.default.data),t.dynamicRef&&n.var(pi.default.dynamicAnchors,(0,_n._)`{}`)})}function hUe(n){let{schema:t,opts:e,gen:i}=n;lce(n,()=>{e.$comment&&t.$comment&&fce(n),yUe(n),i.let(pi.default.vErrors,null),i.let(pi.default.errors,0),e.unevaluated&&fUe(n),hce(n),bUe(n)})}function fUe(n){let{gen:t,validateName:e}=n;n.evaluated=t.const("evaluated",(0,_n._)`${e}.evaluated`),t.if((0,_n._)`${n.evaluated}.dynamicProps`,()=>t.assign((0,_n._)`${n.evaluated}.props`,(0,_n._)`undefined`)),t.if((0,_n._)`${n.evaluated}.dynamicItems`,()=>t.assign((0,_n._)`${n.evaluated}.items`,(0,_n._)`undefined`))}function rce(n,t){let e=typeof n=="object"&&n[t.schemaId];return e&&(t.code.source||t.code.process)?(0,_n._)`/*# sourceURL=${e} */`:_n.nil}function pUe(n,t){if(dce(n)&&(uce(n),cce(n))){mUe(n,t);return}(0,ace.boolOrEmptySchema)(n,t)}function cce({schema:n,self:t}){if(typeof n=="boolean")return!n;for(let e in n)if(t.RULES.all[e])return!0;return!1}function dce(n){return typeof n.schema!="boolean"}function mUe(n,t){let{schema:e,gen:i,opts:r}=n;r.$comment&&e.$comment&&fce(n),vUe(n),_Ue(n);let o=i.const("_errs",pi.default.errors);hce(n,o),i.var(t,(0,_n._)`${o} === ${pi.default.errors}`)}function uce(n){(0,lf.checkUnknownRules)(n),gUe(n)}function hce(n,t){if(n.opts.jtd)return oce(n,[],!1,t);let e=(0,ice.getSchemaTypes)(n.schema),i=(0,ice.coerceAndCheckDataType)(n,e);oce(n,e,!i,t)}function gUe(n){let{schema:t,errSchemaPath:e,opts:i,self:r}=n;t.$ref&&i.ignoreKeywordsWithRef&&(0,lf.schemaHasRulesButRef)(t,r.RULES)&&r.logger.warn(`$ref: keywords ignored in schema at path "${e}"`)}function yUe(n){let{schema:t,opts:e}=n;t.default!==void 0&&e.useDefaults&&e.strictSchema&&(0,lf.checkStrictMode)(n,"default is ignored in the schema root")}function vUe(n){let t=n.schema[n.opts.schemaId];t&&(n.baseId=(0,lUe.resolveUrl)(n.opts.uriResolver,n.baseId,t))}function _Ue(n){if(n.schema.$async&&!n.schemaEnv.$async)throw new Error("async schema in sync schema")}function fce({gen:n,schemaEnv:t,schema:e,errSchemaPath:i,opts:r}){let o=e.$comment;if(r.$comment===!0)n.code((0,_n._)`${pi.default.self}.logger.log(${o})`);else if(typeof r.$comment=="function"){let s=(0,_n.str)`${i}/$comment`,a=n.scopeValue("root",{ref:t.root});n.code((0,_n._)`${pi.default.self}.opts.$comment(${o}, ${s}, ${a}.schema)`)}}function bUe(n){let{gen:t,schemaEnv:e,validateName:i,ValidationError:r,opts:o}=n;e.$async?t.if((0,_n._)`${pi.default.errors} === 0`,()=>t.return(pi.default.data),()=>t.throw((0,_n._)`new ${r}(${pi.default.vErrors})`)):(t.assign((0,_n._)`${i}.errors`,pi.default.vErrors),o.unevaluated&&wUe(n),t.return((0,_n._)`${pi.default.errors} === 0`))}function wUe({gen:n,evaluated:t,props:e,items:i}){e instanceof _n.Name&&n.assign((0,_n._)`${t}.props`,e),i instanceof _n.Name&&n.assign((0,_n._)`${t}.items`,i)}function oce(n,t,e,i){let{gen:r,schema:o,data:s,allErrors:a,opts:l,self:c}=n,{RULES:d}=c;if(o.$ref&&(l.ignoreKeywordsWithRef||!(0,lf.schemaHasRulesButRef)(o,d))){r.block(()=>mce(n,"$ref",d.all.$ref.definition));return}l.jtd||SUe(n,t),r.block(()=>{for(let h of d.rules)u(h);u(d.post)});function u(h){(0,RV.shouldUseGroup)(o,h)&&(h.type?(r.if((0,wE.checkDataType)(h.type,s,l.strictNumbers)),sce(n,h),t.length===1&&t[0]===h.type&&e&&(r.else(),(0,wE.reportTypeError)(n)),r.endIf()):sce(n,h),a||r.if((0,_n._)`${pi.default.errors} === ${i||0}`))}}function sce(n,t){let{gen:e,schema:i,opts:{useDefaults:r}}=n;r&&(0,aUe.assignDefaults)(n,t.type),e.block(()=>{for(let o of t.rules)(0,RV.shouldUseRule)(i,o)&&mce(n,o.keyword,o.definition,t.type)})}function SUe(n,t){n.schemaEnv.meta||!n.opts.strictTypes||(CUe(n,t),n.opts.allowUnionTypes||xUe(n,t),kUe(n,n.dataTypes))}function CUe(n,t){if(t.length){if(!n.dataTypes.length){n.dataTypes=t;return}t.forEach(e=>{pce(n.dataTypes,e)||OV(n,`type "${e}" not allowed by context "${n.dataTypes.join(",")}"`)}),TUe(n,t)}}function xUe(n,t){t.length>1&&!(t.length===2&&t.includes("null"))&&OV(n,"use allowUnionTypes to allow union type keyword")}function kUe(n,t){let e=n.self.RULES.all;for(let i in e){let r=e[i];if(typeof r=="object"&&(0,RV.shouldUseRule)(n.schema,r)){let{type:o}=r.definition;o.length&&!o.some(s=>MUe(t,s))&&OV(n,`missing type "${o.join(",")}" for keyword "${i}"`)}}}function MUe(n,t){return n.includes(t)||t==="number"&&n.includes("integer")}function pce(n,t){return n.includes(t)||t==="integer"&&n.includes("number")}function TUe(n,t){let e=[];for(let i of n.dataTypes)pce(t,i)?e.push(i):t.includes("integer")&&i==="number"&&e.push("integer");n.dataTypes=e}function OV(n,t){let e=n.schemaEnv.baseId+n.errSchemaPath;t+=` at "${e}" (strictTypes)`,(0,lf.checkStrictMode)(n,t,n.opts.strictTypes)}var SE=class{constructor(t,e,i){if((0,j5.validateKeywordUsage)(t,e,i),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=i,this.data=t.data,this.schema=t.schema[i],this.$data=e.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,lf.schemaRefOrVal)(t,this.schema,i,this.$data),this.schemaType=e.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=e,this.$data)this.schemaCode=t.gen.const("vSchema",gce(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,j5.validSchemaType)(this.schema,e.schemaType,e.allowUndefined))throw new Error(`${i} value must be ${JSON.stringify(e.schemaType)}`);("code"in e?e.trackErrors:e.errors!==!1)&&(this.errsCount=t.gen.const("_errs",pi.default.errors))}result(t,e,i){this.failResult((0,_n.not)(t),e,i)}failResult(t,e,i){this.gen.if(t),i?i():this.error(),e?(this.gen.else(),e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,e){this.failResult((0,_n.not)(t),void 0,e)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:e}=this;this.fail((0,_n._)`${e} !== undefined && (${(0,_n.or)(this.invalid$data(),t)})`)}error(t,e,i){if(e){this.setParams(e),this._error(t,i),this.setParams({});return}this._error(t,i)}_error(t,e){(t?U5.reportExtraError:U5.reportError)(this,this.def.error,e)}$dataError(){(0,U5.reportError)(this,this.def.$dataError||U5.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,U5.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,e){e?Object.assign(this.params,t):this.params=t}block$data(t,e,i=_n.nil){this.gen.block(()=>{this.check$data(t,i),e()})}check$data(t=_n.nil,e=_n.nil){if(!this.$data)return;let{gen:i,schemaCode:r,schemaType:o,def:s}=this;i.if((0,_n.or)((0,_n._)`${r} === undefined`,e)),t!==_n.nil&&i.assign(t,!0),(o.length||s.validateSchema)&&(i.elseIf(this.invalid$data()),this.$dataError(),t!==_n.nil&&i.assign(t,!1)),i.else()}invalid$data(){let{gen:t,schemaCode:e,schemaType:i,def:r,it:o}=this;return(0,_n.or)(s(),a());function s(){if(i.length){if(!(e instanceof _n.Name))throw new Error("ajv implementation error");let l=Array.isArray(i)?i:[i];return(0,_n._)`${(0,wE.checkDataTypes)(l,e,o.opts.strictNumbers,wE.DataType.Wrong)}`}return _n.nil}function a(){if(r.validateSchema){let l=t.scopeValue("validate$data",{ref:r.validateSchema});return(0,_n._)`!${l}(${e})`}return _n.nil}}subschema(t,e){let i=(0,LV.getSubschema)(this.it,t);(0,LV.extendSubschemaData)(i,this.it,t),(0,LV.extendSubschemaMode)(i,t);let r=Ge(le(le({},this.it),i),{items:void 0,props:void 0});return pUe(r,e),r}mergeEvaluated(t,e){let{it:i,gen:r}=this;i.opts.unevaluated&&(i.props!==!0&&t.props!==void 0&&(i.props=lf.mergeEvaluated.props(r,t.props,i.props,e)),i.items!==!0&&t.items!==void 0&&(i.items=lf.mergeEvaluated.items(r,t.items,i.items,e)))}mergeValidEvaluated(t,e){let{it:i,gen:r}=this;if(i.opts.unevaluated&&(i.props!==!0||i.items!==!0))return r.if(e,()=>this.mergeEvaluated(t,_n.Name)),!0}};n0.KeywordCxt=SE;function mce(n,t,e,i){let r=new SE(n,e,t);"code"in e?e.code(r,i):r.$data&&e.validate?(0,j5.funcKeywordCode)(r,e):"macro"in e?(0,j5.macroKeywordCode)(r,e):(e.compile||e.validate)&&(0,j5.funcKeywordCode)(r,e)}var EUe=/^\/(?:[^~]|~0|~1)*$/,AUe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function gce(n,{dataLevel:t,dataNames:e,dataPathArr:i}){let r,o;if(n==="")return pi.default.rootData;if(n[0]==="/"){if(!EUe.test(n))throw new Error(`Invalid JSON-pointer: ${n}`);r=n,o=pi.default.rootData}else{let c=AUe.exec(n);if(!c)throw new Error(`Invalid JSON-pointer: ${n}`);let d=+c[1];if(r=c[2],r==="#"){if(d>=t)throw new Error(l("property/index",d));return i[t-d]}if(d>t)throw new Error(l("data",d));if(o=e[t-d],!r)return o}let s=o,a=r.split("/");for(let c of a)c&&(o=(0,_n._)`${o}${(0,_n.getProperty)((0,lf.unescapeJsonPointer)(c))}`,s=(0,_n._)`${s} && ${o}`);return s;function l(c,d){return`Cannot access ${c} ${d} levels up, current level is ${t}`}}n0.getData=gce});var CE=me(BV=>{"use strict";Object.defineProperty(BV,"__esModule",{value:!0});var NV=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};BV.default=NV});var W5=me(jV=>{"use strict";Object.defineProperty(jV,"__esModule",{value:!0});var VV=V5(),UV=class extends Error{constructor(t,e,i,r){super(r||`can't resolve reference ${i} from id ${e}`),this.missingRef=(0,VV.resolveUrl)(t,e,i),this.missingSchema=(0,VV.normalizeId)((0,VV.getFullPath)(t,this.missingRef))}};jV.default=UV});var kE=me(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.resolveSchema=Dc.getCompilingSchema=Dc.resolveRef=Dc.compileSchema=Dc.SchemaEnv=void 0;var kd=Oi(),DUe=CE(),w1=af(),Md=V5(),yce=fr(),IUe=H5(),Zy=class{constructor(t){var e;this.refs={},this.dynamicAnchors={};let i;typeof t.schema=="object"&&(i=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(e=t.baseId)!==null&&e!==void 0?e:(0,Md.normalizeId)(i?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=i?.$async,this.refs={}}};Dc.SchemaEnv=Zy;function WV(n){let t=vce.call(this,n);if(t)return t;let e=(0,Md.getFullPath)(this.opts.uriResolver,n.root.baseId),{es5:i,lines:r}=this.opts.code,{ownProperties:o}=this.opts,s=new kd.CodeGen(this.scope,{es5:i,lines:r,ownProperties:o}),a;n.$async&&(a=s.scopeValue("Error",{ref:DUe.default,code:(0,kd._)`require("ajv/dist/runtime/validation_error").default`}));let l=s.scopeName("validate");n.validateName=l;let c={gen:s,allErrors:this.opts.allErrors,data:w1.default.data,parentData:w1.default.parentData,parentDataProperty:w1.default.parentDataProperty,dataNames:[w1.default.data],dataPathArr:[kd.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:n.schema,code:(0,kd.stringify)(n.schema)}:{ref:n.schema}),validateName:l,ValidationError:a,schema:n.schema,schemaEnv:n,rootId:e,baseId:n.baseId||e,schemaPath:kd.nil,errSchemaPath:n.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,kd._)`""`,opts:this.opts,self:this},d;try{this._compilations.add(n),(0,IUe.validateFunctionCode)(c),s.optimize(this.opts.code.optimize);let u=s.toString();d=`${s.scopeRefs(w1.default.scope)}return ${u}`,this.opts.code.process&&(d=this.opts.code.process(d,n));let f=new Function(`${w1.default.self}`,`${w1.default.scope}`,d)(this,this.scope.get());if(this.scope.value(l,{ref:f}),f.errors=null,f.schema=n.schema,f.schemaEnv=n,n.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:l,validateCode:u,scopeValues:s._values}),this.opts.unevaluated){let{props:p,items:y}=c;f.evaluated={props:p instanceof kd.Name?void 0:p,items:y instanceof kd.Name?void 0:y,dynamicProps:p instanceof kd.Name,dynamicItems:y instanceof kd.Name},f.source&&(f.source.evaluated=(0,kd.stringify)(f.evaluated))}return n.validate=f,n}catch(u){throw delete n.validate,delete n.validateName,d&&this.logger.error("Error compiling schema, function code:",d),u}finally{this._compilations.delete(n)}}Dc.compileSchema=WV;function FUe(n,t,e){var i;e=(0,Md.resolveUrl)(this.opts.uriResolver,t,e);let r=n.refs[e];if(r)return r;let o=RUe.call(this,n,e);if(o===void 0){let s=(i=n.localRefs)===null||i===void 0?void 0:i[e],{schemaId:a}=this.opts;s&&(o=new Zy({schema:s,schemaId:a,root:n,baseId:t}))}if(o!==void 0)return n.refs[e]=PUe.call(this,o)}Dc.resolveRef=FUe;function PUe(n){return(0,Md.inlineRef)(n.schema,this.opts.inlineRefs)?n.schema:n.validate?n:WV.call(this,n)}function vce(n){for(let t of this._compilations)if(LUe(t,n))return t}Dc.getCompilingSchema=vce;function LUe(n,t){return n.schema===t.schema&&n.root===t.root&&n.baseId===t.baseId}function RUe(n,t){let e;for(;typeof(e=this.refs[t])=="string";)t=e;return e||this.schemas[t]||xE.call(this,n,t)}function xE(n,t){let e=this.opts.uriResolver.parse(t),i=(0,Md._getFullPath)(this.opts.uriResolver,e),r=(0,Md.getFullPath)(this.opts.uriResolver,n.baseId,void 0);if(Object.keys(n.schema).length>0&&i===r)return HV.call(this,e,n);let o=(0,Md.normalizeId)(i),s=this.refs[o]||this.schemas[o];if(typeof s=="string"){let a=xE.call(this,n,s);return typeof a?.schema!="object"?void 0:HV.call(this,e,a)}if(typeof s?.schema=="object"){if(s.validate||WV.call(this,s),o===(0,Md.normalizeId)(t)){let{schema:a}=s,{schemaId:l}=this.opts,c=a[l];return c&&(r=(0,Md.resolveUrl)(this.opts.uriResolver,r,c)),new Zy({schema:a,schemaId:l,root:n,baseId:r})}return HV.call(this,e,s)}}Dc.resolveSchema=xE;var OUe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function HV(n,{baseId:t,schema:e,root:i}){var r;if(((r=n.fragment)===null||r===void 0?void 0:r[0])!=="/")return;for(let a of n.fragment.slice(1).split("/")){if(typeof e=="boolean")return;let l=e[(0,yce.unescapeFragment)(a)];if(l===void 0)return;e=l;let c=typeof e=="object"&&e[this.opts.schemaId];!OUe.has(a)&&c&&(t=(0,Md.resolveUrl)(this.opts.uriResolver,t,c))}let o;if(typeof e!="boolean"&&e.$ref&&!(0,yce.schemaHasRulesButRef)(e,this.RULES)){let a=(0,Md.resolveUrl)(this.opts.uriResolver,t,e.$ref);o=xE.call(this,i,a)}let{schemaId:s}=this.opts;if(o=o||new Zy({schema:e,schemaId:s,root:i,baseId:t}),o.schema!==o.root.schema)return o}});var _ce=me((g7t,NUe)=>{NUe.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var qV=me((y7t,Cce)=>{"use strict";var BUe=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),wce=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function zV(n){let t="",e=0,i=0;for(i=0;i<n.length;i++)if(e=n[i].charCodeAt(0),e!==48){if(!(e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102))return"";t+=n[i];break}for(i+=1;i<n.length;i++){if(e=n[i].charCodeAt(0),!(e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102))return"";t+=n[i]}return t}var VUe=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function bce(n){return n.length=0,!0}function UUe(n,t,e){if(n.length){let i=zV(n);if(i!=="")t.push(i);else return e.error=!0,!1;n.length=0}return!0}function jUe(n){let t=0,e={error:!1,address:"",zone:""},i=[],r=[],o=!1,s=!1,a=UUe;for(let l=0;l<n.length;l++){let c=n[l];if(!(c==="["||c==="]"))if(c===":"){if(o===!0&&(s=!0),!a(r,i,e))break;if(++t>7){e.error=!0;break}l>0&&n[l-1]===":"&&(o=!0),i.push(":");continue}else if(c==="%"){if(!a(r,i,e))break;a=bce}else{r.push(c);continue}}return r.length&&(a===bce?e.zone=r.join(""):s?i.push(r.join("")):i.push(zV(r))),e.address=i.join(""),e}function Sce(n){if(HUe(n,":")<2)return{host:n,isIPV6:!1};let t=jUe(n);if(t.error)return{host:n,isIPV6:!1};{let e=t.address,i=t.address;return t.zone&&(e+="%"+t.zone,i+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:i}}}function HUe(n,t){let e=0;for(let i=0;i<n.length;i++)n[i]===t&&e++;return e}function WUe(n){let t=n,e=[],i=-1,r=0;for(;r=t.length;){if(r===1){if(t===".")break;if(t==="/"){e.push("/");break}else{e.push(t);break}}else if(r===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){e.push("/");break}}else if(r===3&&t==="/.."){e.length!==0&&e.pop(),e.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),e.length!==0&&e.pop();continue}}if((i=t.indexOf("/",1))===-1){e.push(t);break}else e.push(t.slice(0,i)),t=t.slice(i)}return e.join("")}function zUe(n,t){let e=t!==!0?escape:unescape;return n.scheme!==void 0&&(n.scheme=e(n.scheme)),n.userinfo!==void 0&&(n.userinfo=e(n.userinfo)),n.host!==void 0&&(n.host=e(n.host)),n.path!==void 0&&(n.path=e(n.path)),n.query!==void 0&&(n.query=e(n.query)),n.fragment!==void 0&&(n.fragment=e(n.fragment)),n}function qUe(n){let t=[];if(n.userinfo!==void 0&&(t.push(n.userinfo),t.push("@")),n.host!==void 0){let e=unescape(n.host);if(!wce(e)){let i=Sce(e);i.isIPV6===!0?e=`[${i.escapedHost}]`:e=n.host}t.push(e)}return(typeof n.port=="number"||typeof n.port=="string")&&(t.push(":"),t.push(String(n.port))),t.length?t.join(""):void 0}Cce.exports={nonSimpleDomain:VUe,recomposeAuthority:qUe,normalizeComponentEncoding:zUe,removeDotSegments:WUe,isIPv4:wce,isUUID:BUe,normalizeIPv6:Sce,stringArrayToHexStripped:zV}});var Ece=me((v7t,Tce)=>{"use strict";var{isUUID:$Ue}=qV(),KUe=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,GUe=["http","https","ws","wss","urn","urn:uuid"];function XUe(n){return GUe.indexOf(n)!==-1}function $V(n){return n.secure===!0?!0:n.secure===!1?!1:n.scheme?n.scheme.length===3&&(n.scheme[0]==="w"||n.scheme[0]==="W")&&(n.scheme[1]==="s"||n.scheme[1]==="S")&&(n.scheme[2]==="s"||n.scheme[2]==="S"):!1}function xce(n){return n.host||(n.error=n.error||"HTTP URIs must have a host."),n}function kce(n){let t=String(n.scheme).toLowerCase()==="https";return(n.port===(t?443:80)||n.port==="")&&(n.port=void 0),n.path||(n.path="/"),n}function YUe(n){return n.secure=$V(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n}function ZUe(n){if((n.port===($V(n)?443:80)||n.port==="")&&(n.port=void 0),typeof n.secure=="boolean"&&(n.scheme=n.secure?"wss":"ws",n.secure=void 0),n.resourceName){let[t,e]=n.resourceName.split("?");n.path=t&&t!=="/"?t:void 0,n.query=e,n.resourceName=void 0}return n.fragment=void 0,n}function QUe(n,t){if(!n.path)return n.error="URN can not be parsed",n;let e=n.path.match(KUe);if(e){let i=t.scheme||n.scheme||"urn";n.nid=e[1].toLowerCase(),n.nss=e[2];let r=`${i}:${t.nid||n.nid}`,o=KV(r);n.path=void 0,o&&(n=o.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n}function JUe(n,t){if(n.nid===void 0)throw new Error("URN without nid cannot be serialized");let e=t.scheme||n.scheme||"urn",i=n.nid.toLowerCase(),r=`${e}:${t.nid||i}`,o=KV(r);o&&(n=o.serialize(n,t));let s=n,a=n.nss;return s.path=`${i||t.nid}:${a}`,t.skipEscape=!0,s}function eje(n,t){let e=n;return e.uuid=e.nss,e.nss=void 0,!t.tolerant&&(!e.uuid||!$Ue(e.uuid))&&(e.error=e.error||"UUID is not valid."),e}function tje(n){let t=n;return t.nss=(n.uuid||"").toLowerCase(),t}var Mce={scheme:"http",domainHost:!0,parse:xce,serialize:kce},nje={scheme:"https",domainHost:Mce.domainHost,parse:xce,serialize:kce},ME={scheme:"ws",domainHost:!0,parse:YUe,serialize:ZUe},ije={scheme:"wss",domainHost:ME.domainHost,parse:ME.parse,serialize:ME.serialize},rje={scheme:"urn",parse:QUe,serialize:JUe,skipNormalize:!0},oje={scheme:"urn:uuid",parse:eje,serialize:tje,skipNormalize:!0},TE={http:Mce,https:nje,ws:ME,wss:ije,urn:rje,"urn:uuid":oje};Object.setPrototypeOf(TE,null);function KV(n){return n&&(TE[n]||TE[n.toLowerCase()])||void 0}Tce.exports={wsIsSecure:$V,SCHEMES:TE,isValidSchemeName:XUe,getSchemeHandler:KV}});var Ice=me((_7t,AE)=>{"use strict";var{normalizeIPv6:sje,removeDotSegments:z5,recomposeAuthority:aje,normalizeComponentEncoding:EE,isIPv4:lje,nonSimpleDomain:cje}=qV(),{SCHEMES:dje,getSchemeHandler:Ace}=Ece();function uje(n,t){return typeof n=="string"?n=zu(cf(n,t),t):typeof n=="object"&&(n=cf(zu(n,t),t)),n}function hje(n,t,e){let i=e?Object.assign({scheme:"null"},e):{scheme:"null"},r=Dce(cf(n,i),cf(t,i),i,!0);return i.skipEscape=!0,zu(r,i)}function Dce(n,t,e,i){let r={};return i||(n=cf(zu(n,e),e),t=cf(zu(t,e),e)),e=e||{},!e.tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=z5(t.path||""),r.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=z5(t.path||""),r.query=t.query):(t.path?(t.path[0]==="/"?r.path=z5(t.path):((n.userinfo!==void 0||n.host!==void 0||n.port!==void 0)&&!n.path?r.path="/"+t.path:n.path?r.path=n.path.slice(0,n.path.lastIndexOf("/")+1)+t.path:r.path=t.path,r.path=z5(r.path)),r.query=t.query):(r.path=n.path,t.query!==void 0?r.query=t.query:r.query=n.query),r.userinfo=n.userinfo,r.host=n.host,r.port=n.port),r.scheme=n.scheme),r.fragment=t.fragment,r}function fje(n,t,e){return typeof n=="string"?(n=unescape(n),n=zu(EE(cf(n,e),!0),Ge(le({},e),{skipEscape:!0}))):typeof n=="object"&&(n=zu(EE(n,!0),Ge(le({},e),{skipEscape:!0}))),typeof t=="string"?(t=unescape(t),t=zu(EE(cf(t,e),!0),Ge(le({},e),{skipEscape:!0}))):typeof t=="object"&&(t=zu(EE(t,!0),Ge(le({},e),{skipEscape:!0}))),n.toLowerCase()===t.toLowerCase()}function zu(n,t){let e={host:n.host,scheme:n.scheme,userinfo:n.userinfo,port:n.port,path:n.path,query:n.query,nid:n.nid,nss:n.nss,uuid:n.uuid,fragment:n.fragment,reference:n.reference,resourceName:n.resourceName,secure:n.secure,error:""},i=Object.assign({},t),r=[],o=Ace(i.scheme||e.scheme);o&&o.serialize&&o.serialize(e,i),e.path!==void 0&&(i.skipEscape?e.path=unescape(e.path):(e.path=escape(e.path),e.scheme!==void 0&&(e.path=e.path.split("%3A").join(":")))),i.reference!=="suffix"&&e.scheme&&r.push(e.scheme,":");let s=aje(e);if(s!==void 0&&(i.reference!=="suffix"&&r.push("//"),r.push(s),e.path&&e.path[0]!=="/"&&r.push("/")),e.path!==void 0){let a=e.path;!i.absolutePath&&(!o||!o.absolutePath)&&(a=z5(a)),s===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),r.push(a)}return e.query!==void 0&&r.push("?",e.query),e.fragment!==void 0&&r.push("#",e.fragment),r.join("")}var pje=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function cf(n,t){let e=Object.assign({},t),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},r=!1;e.reference==="suffix"&&(e.scheme?n=e.scheme+":"+n:n="//"+n);let o=n.match(pje);if(o){if(i.scheme=o[1],i.userinfo=o[3],i.host=o[4],i.port=parseInt(o[5],10),i.path=o[6]||"",i.query=o[7],i.fragment=o[8],isNaN(i.port)&&(i.port=o[5]),i.host)if(lje(i.host)===!1){let l=sje(i.host);i.host=l.host.toLowerCase(),r=l.isIPV6}else r=!0;i.scheme===void 0&&i.userinfo===void 0&&i.host===void 0&&i.port===void 0&&i.query===void 0&&!i.path?i.reference="same-document":i.scheme===void 0?i.reference="relative":i.fragment===void 0?i.reference="absolute":i.reference="uri",e.reference&&e.reference!=="suffix"&&e.reference!==i.reference&&(i.error=i.error||"URI is not a "+e.reference+" reference.");let s=Ace(e.scheme||i.scheme);if(!e.unicodeSupport&&(!s||!s.unicodeSupport)&&i.host&&(e.domainHost||s&&s.domainHost)&&r===!1&&cje(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(a){i.error=i.error||"Host's domain name can not be converted to ASCII: "+a}(!s||s&&!s.skipNormalize)&&(n.indexOf("%")!==-1&&(i.scheme!==void 0&&(i.scheme=unescape(i.scheme)),i.host!==void 0&&(i.host=unescape(i.host))),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),s&&s.parse&&s.parse(i,e)}else i.error=i.error||"URI can not be parsed.";return i}var GV={SCHEMES:dje,normalize:uje,resolve:hje,resolveComponent:Dce,equal:fje,serialize:zu,parse:cf};AE.exports=GV;AE.exports.default=GV;AE.exports.fastUri=GV});var Pce=me(XV=>{"use strict";Object.defineProperty(XV,"__esModule",{value:!0});var Fce=Ice();Fce.code='require("ajv/dist/runtime/uri").default';XV.default=Fce});var jce=me(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.CodeGen=Ks.Name=Ks.nil=Ks.stringify=Ks.str=Ks._=Ks.KeywordCxt=void 0;var mje=H5();Object.defineProperty(Ks,"KeywordCxt",{enumerable:!0,get:function(){return mje.KeywordCxt}});var Qy=Oi();Object.defineProperty(Ks,"_",{enumerable:!0,get:function(){return Qy._}});Object.defineProperty(Ks,"str",{enumerable:!0,get:function(){return Qy.str}});Object.defineProperty(Ks,"stringify",{enumerable:!0,get:function(){return Qy.stringify}});Object.defineProperty(Ks,"nil",{enumerable:!0,get:function(){return Qy.nil}});Object.defineProperty(Ks,"Name",{enumerable:!0,get:function(){return Qy.Name}});Object.defineProperty(Ks,"CodeGen",{enumerable:!0,get:function(){return Qy.CodeGen}});var gje=CE(),Bce=W5(),yje=xV(),q5=kE(),vje=Oi(),$5=V5(),DE=B5(),ZV=fr(),Lce=_ce(),_je=Pce(),Vce=(n,t)=>new RegExp(n,t);Vce.code="new RegExp";var bje=["removeAdditional","useDefaults","coerceTypes"],wje=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Sje={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Cje={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Rce=200;function xje(n){var t,e,i,r,o,s,a,l,c,d,u,h,f,p,y,v,b,S,x,k,L,D,V,O,R;let G=n.strict,Z=(t=n.code)===null||t===void 0?void 0:t.optimize,K=Z===!0||Z===void 0?1:Z||0,C=(i=(e=n.code)===null||e===void 0?void 0:e.regExp)!==null&&i!==void 0?i:Vce,A=(r=n.uriResolver)!==null&&r!==void 0?r:_je.default;return{strictSchema:(s=(o=n.strictSchema)!==null&&o!==void 0?o:G)!==null&&s!==void 0?s:!0,strictNumbers:(l=(a=n.strictNumbers)!==null&&a!==void 0?a:G)!==null&&l!==void 0?l:!0,strictTypes:(d=(c=n.strictTypes)!==null&&c!==void 0?c:G)!==null&&d!==void 0?d:"log",strictTuples:(h=(u=n.strictTuples)!==null&&u!==void 0?u:G)!==null&&h!==void 0?h:"log",strictRequired:(p=(f=n.strictRequired)!==null&&f!==void 0?f:G)!==null&&p!==void 0?p:!1,code:n.code?Ge(le({},n.code),{optimize:K,regExp:C}):{optimize:K,regExp:C},loopRequired:(y=n.loopRequired)!==null&&y!==void 0?y:Rce,loopEnum:(v=n.loopEnum)!==null&&v!==void 0?v:Rce,meta:(b=n.meta)!==null&&b!==void 0?b:!0,messages:(S=n.messages)!==null&&S!==void 0?S:!0,inlineRefs:(x=n.inlineRefs)!==null&&x!==void 0?x:!0,schemaId:(k=n.schemaId)!==null&&k!==void 0?k:"$id",addUsedSchema:(L=n.addUsedSchema)!==null&&L!==void 0?L:!0,validateSchema:(D=n.validateSchema)!==null&&D!==void 0?D:!0,validateFormats:(V=n.validateFormats)!==null&&V!==void 0?V:!0,unicodeRegExp:(O=n.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(R=n.int32range)!==null&&R!==void 0?R:!0,uriResolver:A}}var K5=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=le(le({},t),xje(t));let{es5:e,lines:i}=this.opts.code;this.scope=new vje.ValueScope({scope:{},prefixes:wje,es5:e,lines:i}),this.logger=Dje(t.logger);let r=t.validateFormats;t.validateFormats=!1,this.RULES=(0,yje.getRules)(),Oce.call(this,Sje,t,"NOT SUPPORTED"),Oce.call(this,Cje,t,"DEPRECATED","warn"),this._metaOpts=Eje.call(this),t.formats&&Mje.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&Tje.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),kje.call(this),t.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:e,schemaId:i}=this.opts,r=Lce;i==="id"&&(r=le({},Lce),r.id=r.$id,delete r.$id),e&&t&&this.addMetaSchema(r,r[i],!1)}defaultMeta(){let{meta:t,schemaId:e}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[e]||t:void 0}validate(t,e){let i;if(typeof t=="string"){if(i=this.getSchema(t),!i)throw new Error(`no schema with key or ref "${t}"`)}else i=this.compile(t);let r=i(e);return"$async"in i||(this.errors=i.errors),r}compile(t,e){let i=this._addSchema(t,e);return i.validate||this._compileSchemaEnv(i)}compileAsync(t,e){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:i}=this.opts;return r.call(this,t,e);function r(d,u){return z(this,null,function*(){yield o.call(this,d.$schema);let h=this._addSchema(d,u);return h.validate||s.call(this,h)})}function o(d){return z(this,null,function*(){d&&!this.getSchema(d)&&(yield r.call(this,{$ref:d},!0))})}function s(d){return z(this,null,function*(){try{return this._compileSchemaEnv(d)}catch(u){if(!(u instanceof Bce.default))throw u;return a.call(this,u),yield l.call(this,u.missingSchema),s.call(this,d)}})}function a({missingSchema:d,missingRef:u}){if(this.refs[d])throw new Error(`AnySchema ${d} is loaded but ${u} cannot be resolved`)}function l(d){return z(this,null,function*(){let u=yield c.call(this,d);this.refs[d]||(yield o.call(this,u.$schema)),this.refs[d]||this.addSchema(u,d,e)})}function c(d){return z(this,null,function*(){let u=this._loading[d];if(u)return u;try{return yield this._loading[d]=i(d)}finally{delete this._loading[d]}})}}addSchema(t,e,i,r=this.opts.validateSchema){if(Array.isArray(t)){for(let s of t)this.addSchema(s,void 0,i,r);return this}let o;if(typeof t=="object"){let{schemaId:s}=this.opts;if(o=t[s],o!==void 0&&typeof o!="string")throw new Error(`schema ${s} must be string`)}return e=(0,$5.normalizeId)(e||o),this._checkUnique(e),this.schemas[e]=this._addSchema(t,i,e,r,!0),this}addMetaSchema(t,e,i=this.opts.validateSchema){return this.addSchema(t,e,!0,i),this}validateSchema(t,e){if(typeof t=="boolean")return!0;let i;if(i=t.$schema,i!==void 0&&typeof i!="string")throw new Error("$schema must be a string");if(i=i||this.opts.defaultMeta||this.defaultMeta(),!i)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let r=this.validate(i,t);if(!r&&e){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return r}getSchema(t){let e;for(;typeof(e=Nce.call(this,t))=="string";)t=e;if(e===void 0){let{schemaId:i}=this.opts,r=new q5.SchemaEnv({schema:{},schemaId:i});if(e=q5.resolveSchema.call(this,r,t),!e)return;this.refs[t]=e}return e.validate||this._compileSchemaEnv(e)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let e=Nce.call(this,t);return typeof e=="object"&&this._cache.delete(e.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let e=t;this._cache.delete(e);let i=t[this.opts.schemaId];return i&&(i=(0,$5.normalizeId)(i),delete this.schemas[i],delete this.refs[i]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let e of t)this.addKeyword(e);return this}addKeyword(t,e){let i;if(typeof t=="string")i=t,typeof e=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),e.keyword=i);else if(typeof t=="object"&&e===void 0){if(e=t,i=e.keyword,Array.isArray(i)&&!i.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Fje.call(this,i,e),!e)return(0,ZV.eachItem)(i,o=>YV.call(this,o)),this;Lje.call(this,e);let r=Ge(le({},e),{type:(0,DE.getJSONTypes)(e.type),schemaType:(0,DE.getJSONTypes)(e.schemaType)});return(0,ZV.eachItem)(i,r.type.length===0?o=>YV.call(this,o,r):o=>r.type.forEach(s=>YV.call(this,o,r,s))),this}getKeyword(t){let e=this.RULES.all[t];return typeof e=="object"?e.definition:!!e}removeKeyword(t){let{RULES:e}=this;delete e.keywords[t],delete e.all[t];for(let i of e.rules){let r=i.rules.findIndex(o=>o.keyword===t);r>=0&&i.rules.splice(r,1)}return this}addFormat(t,e){return typeof e=="string"&&(e=new RegExp(e)),this.formats[t]=e,this}errorsText(t=this.errors,{separator:e=", ",dataVar:i="data"}={}){return!t||t.length===0?"No errors":t.map(r=>`${i}${r.instancePath} ${r.message}`).reduce((r,o)=>r+e+o)}$dataMetaSchema(t,e){let i=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let r of e){let o=r.split("/").slice(1),s=t;for(let a of o)s=s[a];for(let a in i){let l=i[a];if(typeof l!="object")continue;let{$data:c}=l.definition,d=s[a];c&&d&&(s[a]=Uce(d))}}return t}_removeAllSchemas(t,e){for(let i in t){let r=t[i];(!e||e.test(i))&&(typeof r=="string"?delete t[i]:r&&!r.meta&&(this._cache.delete(r.schema),delete t[i]))}}_addSchema(t,e,i,r=this.opts.validateSchema,o=this.opts.addUsedSchema){let s,{schemaId:a}=this.opts;if(typeof t=="object")s=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(t);if(l!==void 0)return l;i=(0,$5.normalizeId)(s||i);let c=$5.getSchemaRefs.call(this,t,i);return l=new q5.SchemaEnv({schema:t,schemaId:a,meta:e,baseId:i,localRefs:c}),this._cache.set(l.schema,l),o&&!i.startsWith("#")&&(i&&this._checkUnique(i),this.refs[i]=l),r&&this.validateSchema(t,!0),l}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):q5.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let e=this.opts;this.opts=this._metaOpts;try{q5.compileSchema.call(this,t)}finally{this.opts=e}}};K5.ValidationError=gje.default;K5.MissingRefError=Bce.default;Ks.default=K5;function Oce(n,t,e,i="error"){for(let r in n){let o=r;o in t&&this.logger[i](`${e}: option ${r}. ${n[o]}`)}}function Nce(n){return n=(0,$5.normalizeId)(n),this.schemas[n]||this.refs[n]}function kje(){let n=this.opts.schemas;if(n)if(Array.isArray(n))this.addSchema(n);else for(let t in n)this.addSchema(n[t],t)}function Mje(){for(let n in this.opts.formats){let t=this.opts.formats[n];t&&this.addFormat(n,t)}}function Tje(n){if(Array.isArray(n)){this.addVocabulary(n);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in n){let e=n[t];e.keyword||(e.keyword=t),this.addKeyword(e)}}function Eje(){let n=le({},this.opts);for(let t of bje)delete n[t];return n}var Aje={log(){},warn(){},error(){}};function Dje(n){if(n===!1)return Aje;if(n===void 0)return console;if(n.log&&n.warn&&n.error)return n;throw new Error("logger must implement log, warn and error methods")}var Ije=/^[a-z_$][a-z0-9_$:-]*$/i;function Fje(n,t){let{RULES:e}=this;if((0,ZV.eachItem)(n,i=>{if(e.keywords[i])throw new Error(`Keyword ${i} is already defined`);if(!Ije.test(i))throw new Error(`Keyword ${i} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function YV(n,t,e){var i;let r=t?.post;if(e&&r)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,s=r?o.post:o.rules.find(({type:l})=>l===e);if(s||(s={type:e,rules:[]},o.rules.push(s)),o.keywords[n]=!0,!t)return;let a={keyword:n,definition:Ge(le({},t),{type:(0,DE.getJSONTypes)(t.type),schemaType:(0,DE.getJSONTypes)(t.schemaType)})};t.before?Pje.call(this,s,a,t.before):s.rules.push(a),o.all[n]=a,(i=t.implements)===null||i===void 0||i.forEach(l=>this.addKeyword(l))}function Pje(n,t,e){let i=n.rules.findIndex(r=>r.keyword===e);i>=0?n.rules.splice(i,0,t):(n.rules.push(t),this.logger.warn(`rule ${e} is not defined`))}function Lje(n){let{metaSchema:t}=n;t!==void 0&&(n.$data&&this.opts.$data&&(t=Uce(t)),n.validateSchema=this.compile(t,!0))}var Rje={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Uce(n){return{anyOf:[n,Rje]}}});var Hce=me(QV=>{"use strict";Object.defineProperty(QV,"__esModule",{value:!0});var Oje={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};QV.default=Oje});var $ce=me(S1=>{"use strict";Object.defineProperty(S1,"__esModule",{value:!0});S1.callRef=S1.getValidate=void 0;var Nje=W5(),Wce=Ac(),kl=Oi(),Jy=af(),zce=kE(),IE=fr(),Bje={keyword:"$ref",schemaType:"string",code(n){let{gen:t,schema:e,it:i}=n,{baseId:r,schemaEnv:o,validateName:s,opts:a,self:l}=i,{root:c}=o;if((e==="#"||e==="#/")&&r===c.baseId)return u();let d=zce.resolveRef.call(l,c,r,e);if(d===void 0)throw new Nje.default(i.opts.uriResolver,r,e);if(d instanceof zce.SchemaEnv)return h(d);return f(d);function u(){if(o===c)return FE(n,s,o,o.$async);let p=t.scopeValue("root",{ref:c});return FE(n,(0,kl._)`${p}.validate`,c,c.$async)}function h(p){let y=qce(n,p);FE(n,y,p,p.$async)}function f(p){let y=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,kl.stringify)(p)}:{ref:p}),v=t.name("valid"),b=n.subschema({schema:p,dataTypes:[],schemaPath:kl.nil,topSchemaRef:y,errSchemaPath:e},v);n.mergeEvaluated(b),n.ok(v)}}};function qce(n,t){let{gen:e}=n;return t.validate?e.scopeValue("validate",{ref:t.validate}):(0,kl._)`${e.scopeValue("wrapper",{ref:t})}.validate`}S1.getValidate=qce;function FE(n,t,e,i){let{gen:r,it:o}=n,{allErrors:s,schemaEnv:a,opts:l}=o,c=l.passContext?Jy.default.this:kl.nil;i?d():u();function d(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=r.let("valid");r.try(()=>{r.code((0,kl._)`await ${(0,Wce.callValidateCode)(n,t,c)}`),f(t),s||r.assign(p,!0)},y=>{r.if((0,kl._)`!(${y} instanceof ${o.ValidationError})`,()=>r.throw(y)),h(y),s||r.assign(p,!1)}),n.ok(p)}function u(){n.result((0,Wce.callValidateCode)(n,t,c),()=>f(t),()=>h(t))}function h(p){let y=(0,kl._)`${p}.errors`;r.assign(Jy.default.vErrors,(0,kl._)`${Jy.default.vErrors} === null ? ${y} : ${Jy.default.vErrors}.concat(${y})`),r.assign(Jy.default.errors,(0,kl._)`${Jy.default.vErrors}.length`)}function f(p){var y;if(!o.opts.unevaluated)return;let v=(y=e?.validate)===null||y===void 0?void 0:y.evaluated;if(o.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(o.props=IE.mergeEvaluated.props(r,v.props,o.props));else{let b=r.var("props",(0,kl._)`${p}.evaluated.props`);o.props=IE.mergeEvaluated.props(r,b,o.props,kl.Name)}if(o.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(o.items=IE.mergeEvaluated.items(r,v.items,o.items));else{let b=r.var("items",(0,kl._)`${p}.evaluated.items`);o.items=IE.mergeEvaluated.items(r,b,o.items,kl.Name)}}}S1.callRef=FE;S1.default=Bje});var Kce=me(JV=>{"use strict";Object.defineProperty(JV,"__esModule",{value:!0});var Vje=Hce(),Uje=$ce(),jje=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Vje.default,Uje.default];JV.default=jje});var Gce=me(eU=>{"use strict";Object.defineProperty(eU,"__esModule",{value:!0});var PE=Oi(),i0=PE.operators,LE={maximum:{okStr:"<=",ok:i0.LTE,fail:i0.GT},minimum:{okStr:">=",ok:i0.GTE,fail:i0.LT},exclusiveMaximum:{okStr:"<",ok:i0.LT,fail:i0.GTE},exclusiveMinimum:{okStr:">",ok:i0.GT,fail:i0.LTE}},Hje={message:({keyword:n,schemaCode:t})=>(0,PE.str)`must be ${LE[n].okStr} ${t}`,params:({keyword:n,schemaCode:t})=>(0,PE._)`{comparison: ${LE[n].okStr}, limit: ${t}}`},Wje={keyword:Object.keys(LE),type:"number",schemaType:"number",$data:!0,error:Hje,code(n){let{keyword:t,data:e,schemaCode:i}=n;n.fail$data((0,PE._)`${e} ${LE[t].fail} ${i} || isNaN(${e})`)}};eU.default=Wje});var Xce=me(tU=>{"use strict";Object.defineProperty(tU,"__esModule",{value:!0});var G5=Oi(),zje={message:({schemaCode:n})=>(0,G5.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,G5._)`{multipleOf: ${n}}`},qje={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:zje,code(n){let{gen:t,data:e,schemaCode:i,it:r}=n,o=r.opts.multipleOfPrecision,s=t.let("res"),a=o?(0,G5._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:(0,G5._)`${s} !== parseInt(${s})`;n.fail$data((0,G5._)`(${i} === 0 || (${s} = ${e}/${i}, ${a}))`)}};tU.default=qje});var Zce=me(nU=>{"use strict";Object.defineProperty(nU,"__esModule",{value:!0});function Yce(n){let t=n.length,e=0,i=0,r;for(;i<t;)e++,r=n.charCodeAt(i++),r>=55296&&r<=56319&&i<t&&(r=n.charCodeAt(i),(r&64512)===56320&&i++);return e}nU.default=Yce;Yce.code='require("ajv/dist/runtime/ucs2length").default'});var Qce=me(iU=>{"use strict";Object.defineProperty(iU,"__esModule",{value:!0});var C1=Oi(),$je=fr(),Kje=Zce(),Gje={message({keyword:n,schemaCode:t}){let e=n==="maxLength"?"more":"fewer";return(0,C1.str)`must NOT have ${e} than ${t} characters`},params:({schemaCode:n})=>(0,C1._)`{limit: ${n}}`},Xje={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Gje,code(n){let{keyword:t,data:e,schemaCode:i,it:r}=n,o=t==="maxLength"?C1.operators.GT:C1.operators.LT,s=r.opts.unicode===!1?(0,C1._)`${e}.length`:(0,C1._)`${(0,$je.useFunc)(n.gen,Kje.default)}(${e})`;n.fail$data((0,C1._)`${s} ${o} ${i}`)}};iU.default=Xje});var Jce=me(rU=>{"use strict";Object.defineProperty(rU,"__esModule",{value:!0});var Yje=Ac(),RE=Oi(),Zje={message:({schemaCode:n})=>(0,RE.str)`must match pattern "${n}"`,params:({schemaCode:n})=>(0,RE._)`{pattern: ${n}}`},Qje={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Zje,code(n){let{data:t,$data:e,schema:i,schemaCode:r,it:o}=n,s=o.opts.unicodeRegExp?"u":"",a=e?(0,RE._)`(new RegExp(${r}, ${s}))`:(0,Yje.usePattern)(n,i);n.fail$data((0,RE._)`!${a}.test(${t})`)}};rU.default=Qje});var ede=me(oU=>{"use strict";Object.defineProperty(oU,"__esModule",{value:!0});var X5=Oi(),Jje={message({keyword:n,schemaCode:t}){let e=n==="maxProperties"?"more":"fewer";return(0,X5.str)`must NOT have ${e} than ${t} properties`},params:({schemaCode:n})=>(0,X5._)`{limit: ${n}}`},eHe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Jje,code(n){let{keyword:t,data:e,schemaCode:i}=n,r=t==="maxProperties"?X5.operators.GT:X5.operators.LT;n.fail$data((0,X5._)`Object.keys(${e}).length ${r} ${i}`)}};oU.default=eHe});var tde=me(sU=>{"use strict";Object.defineProperty(sU,"__esModule",{value:!0});var Y5=Ac(),Z5=Oi(),tHe=fr(),nHe={message:({params:{missingProperty:n}})=>(0,Z5.str)`must have required property '${n}'`,params:({params:{missingProperty:n}})=>(0,Z5._)`{missingProperty: ${n}}`},iHe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:nHe,code(n){let{gen:t,schema:e,schemaCode:i,data:r,$data:o,it:s}=n,{opts:a}=s;if(!o&&e.length===0)return;let l=e.length>=a.loopRequired;if(s.allErrors?c():d(),a.strictRequired){let f=n.parentSchema.properties,{definedProperties:p}=n.it;for(let y of e)if(f?.[y]===void 0&&!p.has(y)){let v=s.schemaEnv.baseId+s.errSchemaPath,b=`required property "${y}" is not defined at "${v}" (strictRequired)`;(0,tHe.checkStrictMode)(s,b,s.opts.strictRequired)}}function c(){if(l||o)n.block$data(Z5.nil,u);else for(let f of e)(0,Y5.checkReportMissingProp)(n,f)}function d(){let f=t.let("missing");if(l||o){let p=t.let("valid",!0);n.block$data(p,()=>h(f,p)),n.ok(p)}else t.if((0,Y5.checkMissingProp)(n,e,f)),(0,Y5.reportMissingProp)(n,f),t.else()}function u(){t.forOf("prop",i,f=>{n.setParams({missingProperty:f}),t.if((0,Y5.noPropertyInData)(t,r,f,a.ownProperties),()=>n.error())})}function h(f,p){n.setParams({missingProperty:f}),t.forOf(f,i,()=>{t.assign(p,(0,Y5.propertyInData)(t,r,f,a.ownProperties)),t.if((0,Z5.not)(p),()=>{n.error(),t.break()})},Z5.nil)}}};sU.default=iHe});var nde=me(aU=>{"use strict";Object.defineProperty(aU,"__esModule",{value:!0});var Q5=Oi(),rHe={message({keyword:n,schemaCode:t}){let e=n==="maxItems"?"more":"fewer";return(0,Q5.str)`must NOT have ${e} than ${t} items`},params:({schemaCode:n})=>(0,Q5._)`{limit: ${n}}`},oHe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:rHe,code(n){let{keyword:t,data:e,schemaCode:i}=n,r=t==="maxItems"?Q5.operators.GT:Q5.operators.LT;n.fail$data((0,Q5._)`${e}.length ${r} ${i}`)}};aU.default=oHe});var OE=me(lU=>{"use strict";Object.defineProperty(lU,"__esModule",{value:!0});var ide=FV();ide.code='require("ajv/dist/runtime/equal").default';lU.default=ide});var rde=me(dU=>{"use strict";Object.defineProperty(dU,"__esModule",{value:!0});var cU=B5(),Gs=Oi(),sHe=fr(),aHe=OE(),lHe={message:({params:{i:n,j:t}})=>(0,Gs.str)`must NOT have duplicate items (items ## ${t} and ${n} are identical)`,params:({params:{i:n,j:t}})=>(0,Gs._)`{i: ${n}, j: ${t}}`},cHe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:lHe,code(n){let{gen:t,data:e,$data:i,schema:r,parentSchema:o,schemaCode:s,it:a}=n;if(!i&&!r)return;let l=t.let("valid"),c=o.items?(0,cU.getSchemaTypes)(o.items):[];n.block$data(l,d,(0,Gs._)`${s} === false`),n.ok(l);function d(){let p=t.let("i",(0,Gs._)`${e}.length`),y=t.let("j");n.setParams({i:p,j:y}),t.assign(l,!0),t.if((0,Gs._)`${p} > 1`,()=>(u()?h:f)(p,y))}function u(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function h(p,y){let v=t.name("item"),b=(0,cU.checkDataTypes)(c,v,a.opts.strictNumbers,cU.DataType.Wrong),S=t.const("indices",(0,Gs._)`{}`);t.for((0,Gs._)`;${p}--;`,()=>{t.let(v,(0,Gs._)`${e}[${p}]`),t.if(b,(0,Gs._)`continue`),c.length>1&&t.if((0,Gs._)`typeof ${v} == "string"`,(0,Gs._)`${v} += "_"`),t.if((0,Gs._)`typeof ${S}[${v}] == "number"`,()=>{t.assign(y,(0,Gs._)`${S}[${v}]`),n.error(),t.assign(l,!1).break()}).code((0,Gs._)`${S}[${v}] = ${p}`)})}function f(p,y){let v=(0,sHe.useFunc)(t,aHe.default),b=t.name("outer");t.label(b).for((0,Gs._)`;${p}--;`,()=>t.for((0,Gs._)`${y} = ${p}; ${y}--;`,()=>t.if((0,Gs._)`${v}(${e}[${p}], ${e}[${y}])`,()=>{n.error(),t.assign(l,!1).break(b)})))}}};dU.default=cHe});var ode=me(hU=>{"use strict";Object.defineProperty(hU,"__esModule",{value:!0});var uU=Oi(),dHe=fr(),uHe=OE(),hHe={message:"must be equal to constant",params:({schemaCode:n})=>(0,uU._)`{allowedValue: ${n}}`},fHe={keyword:"const",$data:!0,error:hHe,code(n){let{gen:t,data:e,$data:i,schemaCode:r,schema:o}=n;i||o&&typeof o=="object"?n.fail$data((0,uU._)`!${(0,dHe.useFunc)(t,uHe.default)}(${e}, ${r})`):n.fail((0,uU._)`${o} !== ${e}`)}};hU.default=fHe});var sde=me(fU=>{"use strict";Object.defineProperty(fU,"__esModule",{value:!0});var J5=Oi(),pHe=fr(),mHe=OE(),gHe={message:"must be equal to one of the allowed values",params:({schemaCode:n})=>(0,J5._)`{allowedValues: ${n}}`},yHe={keyword:"enum",schemaType:"array",$data:!0,error:gHe,code(n){let{gen:t,data:e,$data:i,schema:r,schemaCode:o,it:s}=n;if(!i&&r.length===0)throw new Error("enum must have non-empty array");let a=r.length>=s.opts.loopEnum,l,c=()=>l??(l=(0,pHe.useFunc)(t,mHe.default)),d;if(a||i)d=t.let("valid"),n.block$data(d,u);else{if(!Array.isArray(r))throw new Error("ajv implementation error");let f=t.const("vSchema",o);d=(0,J5.or)(...r.map((p,y)=>h(f,y)))}n.pass(d);function u(){t.assign(d,!1),t.forOf("v",o,f=>t.if((0,J5._)`${c()}(${e}, ${f})`,()=>t.assign(d,!0).break()))}function h(f,p){let y=r[p];return typeof y=="object"&&y!==null?(0,J5._)`${c()}(${e}, ${f}[${p}])`:(0,J5._)`${e} === ${y}`}}};fU.default=yHe});var ade=me(pU=>{"use strict";Object.defineProperty(pU,"__esModule",{value:!0});var vHe=Gce(),_He=Xce(),bHe=Qce(),wHe=Jce(),SHe=ede(),CHe=tde(),xHe=nde(),kHe=rde(),MHe=ode(),THe=sde(),EHe=[vHe.default,_He.default,bHe.default,wHe.default,SHe.default,CHe.default,xHe.default,kHe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},MHe.default,THe.default];pU.default=EHe});var gU=me(eS=>{"use strict";Object.defineProperty(eS,"__esModule",{value:!0});eS.validateAdditionalItems=void 0;var x1=Oi(),mU=fr(),AHe={message:({params:{len:n}})=>(0,x1.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,x1._)`{limit: ${n}}`},DHe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:AHe,code(n){let{parentSchema:t,it:e}=n,{items:i}=t;if(!Array.isArray(i)){(0,mU.checkStrictMode)(e,'"additionalItems" is ignored when "items" is not an array of schemas');return}lde(n,i)}};function lde(n,t){let{gen:e,schema:i,data:r,keyword:o,it:s}=n;s.items=!0;let a=e.const("len",(0,x1._)`${r}.length`);if(i===!1)n.setParams({len:t.length}),n.pass((0,x1._)`${a} <= ${t.length}`);else if(typeof i=="object"&&!(0,mU.alwaysValidSchema)(s,i)){let c=e.var("valid",(0,x1._)`${a} <= ${t.length}`);e.if((0,x1.not)(c),()=>l(c)),n.ok(c)}function l(c){e.forRange("i",t.length,a,d=>{n.subschema({keyword:o,dataProp:d,dataPropType:mU.Type.Num},c),s.allErrors||e.if((0,x1.not)(c),()=>e.break())})}}eS.validateAdditionalItems=lde;eS.default=DHe});var yU=me(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});tS.validateTuple=void 0;var cde=Oi(),NE=fr(),IHe=Ac(),FHe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(n){let{schema:t,it:e}=n;if(Array.isArray(t))return dde(n,"additionalItems",t);e.items=!0,!(0,NE.alwaysValidSchema)(e,t)&&n.ok((0,IHe.validateArray)(n))}};function dde(n,t,e=n.schema){let{gen:i,parentSchema:r,data:o,keyword:s,it:a}=n;d(r),a.opts.unevaluated&&e.length&&a.items!==!0&&(a.items=NE.mergeEvaluated.items(i,e.length,a.items));let l=i.name("valid"),c=i.const("len",(0,cde._)`${o}.length`);e.forEach((u,h)=>{(0,NE.alwaysValidSchema)(a,u)||(i.if((0,cde._)`${c} > ${h}`,()=>n.subschema({keyword:s,schemaProp:h,dataProp:h},l)),n.ok(l))});function d(u){let{opts:h,errSchemaPath:f}=a,p=e.length,y=p===u.minItems&&(p===u.maxItems||u[t]===!1);if(h.strictTuples&&!y){let v=`"${s}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${f}"`;(0,NE.checkStrictMode)(a,v,h.strictTuples)}}}tS.validateTuple=dde;tS.default=FHe});var ude=me(vU=>{"use strict";Object.defineProperty(vU,"__esModule",{value:!0});var PHe=yU(),LHe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,PHe.validateTuple)(n,"items")};vU.default=LHe});var fde=me(_U=>{"use strict";Object.defineProperty(_U,"__esModule",{value:!0});var hde=Oi(),RHe=fr(),OHe=Ac(),NHe=gU(),BHe={message:({params:{len:n}})=>(0,hde.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,hde._)`{limit: ${n}}`},VHe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:BHe,code(n){let{schema:t,parentSchema:e,it:i}=n,{prefixItems:r}=e;i.items=!0,!(0,RHe.alwaysValidSchema)(i,t)&&(r?(0,NHe.validateAdditionalItems)(n,r):n.ok((0,OHe.validateArray)(n)))}};_U.default=VHe});var pde=me(bU=>{"use strict";Object.defineProperty(bU,"__esModule",{value:!0});var Ic=Oi(),BE=fr(),UHe={message:({params:{min:n,max:t}})=>t===void 0?(0,Ic.str)`must contain at least ${n} valid item(s)`:(0,Ic.str)`must contain at least ${n} and no more than ${t} valid item(s)`,params:({params:{min:n,max:t}})=>t===void 0?(0,Ic._)`{minContains: ${n}}`:(0,Ic._)`{minContains: ${n}, maxContains: ${t}}`},jHe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:UHe,code(n){let{gen:t,schema:e,parentSchema:i,data:r,it:o}=n,s,a,{minContains:l,maxContains:c}=i;o.opts.next?(s=l===void 0?1:l,a=c):s=1;let d=t.const("len",(0,Ic._)`${r}.length`);if(n.setParams({min:s,max:a}),a===void 0&&s===0){(0,BE.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,BE.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),n.fail();return}if((0,BE.alwaysValidSchema)(o,e)){let y=(0,Ic._)`${d} >= ${s}`;a!==void 0&&(y=(0,Ic._)`${y} && ${d} <= ${a}`),n.pass(y);return}o.items=!0;let u=t.name("valid");a===void 0&&s===1?f(u,()=>t.if(u,()=>t.break())):s===0?(t.let(u,!0),a!==void 0&&t.if((0,Ic._)`${r}.length > 0`,h)):(t.let(u,!1),h()),n.result(u,()=>n.reset());function h(){let y=t.name("_valid"),v=t.let("count",0);f(y,()=>t.if(y,()=>p(v)))}function f(y,v){t.forRange("i",0,d,b=>{n.subschema({keyword:"contains",dataProp:b,dataPropType:BE.Type.Num,compositeRule:!0},y),v()})}function p(y){t.code((0,Ic._)`${y}++`),a===void 0?t.if((0,Ic._)`${y} >= ${s}`,()=>t.assign(u,!0).break()):(t.if((0,Ic._)`${y} > ${a}`,()=>t.assign(u,!1).break()),s===1?t.assign(u,!0):t.if((0,Ic._)`${y} >= ${s}`,()=>t.assign(u,!0)))}}};bU.default=jHe});var yde=me(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.validateSchemaDeps=qu.validatePropertyDeps=qu.error=void 0;var wU=Oi(),HHe=fr(),nS=Ac();qu.error={message:({params:{property:n,depsCount:t,deps:e}})=>{let i=t===1?"property":"properties";return(0,wU.str)`must have ${i} ${e} when property ${n} is present`},params:({params:{property:n,depsCount:t,deps:e,missingProperty:i}})=>(0,wU._)`{property: ${n},
    missingProperty: ${i},
    depsCount: ${t},
    deps: ${e}}`};var WHe={keyword:"dependencies",type:"object",schemaType:"object",error:qu.error,code(n){let[t,e]=zHe(n);mde(n,t),gde(n,e)}};function zHe({schema:n}){let t={},e={};for(let i in n){if(i==="__proto__")continue;let r=Array.isArray(n[i])?t:e;r[i]=n[i]}return[t,e]}function mde(n,t=n.schema){let{gen:e,data:i,it:r}=n;if(Object.keys(t).length===0)return;let o=e.let("missing");for(let s in t){let a=t[s];if(a.length===0)continue;let l=(0,nS.propertyInData)(e,i,s,r.opts.ownProperties);n.setParams({property:s,depsCount:a.length,deps:a.join(", ")}),r.allErrors?e.if(l,()=>{for(let c of a)(0,nS.checkReportMissingProp)(n,c)}):(e.if((0,wU._)`${l} && (${(0,nS.checkMissingProp)(n,a,o)})`),(0,nS.reportMissingProp)(n,o),e.else())}}qu.validatePropertyDeps=mde;function gde(n,t=n.schema){let{gen:e,data:i,keyword:r,it:o}=n,s=e.name("valid");for(let a in t)(0,HHe.alwaysValidSchema)(o,t[a])||(e.if((0,nS.propertyInData)(e,i,a,o.opts.ownProperties),()=>{let l=n.subschema({keyword:r,schemaProp:a},s);n.mergeValidEvaluated(l,s)},()=>e.var(s,!0)),n.ok(s))}qu.validateSchemaDeps=gde;qu.default=WHe});var _de=me(SU=>{"use strict";Object.defineProperty(SU,"__esModule",{value:!0});var vde=Oi(),qHe=fr(),$He={message:"property name must be valid",params:({params:n})=>(0,vde._)`{propertyName: ${n.propertyName}}`},KHe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:$He,code(n){let{gen:t,schema:e,data:i,it:r}=n;if((0,qHe.alwaysValidSchema)(r,e))return;let o=t.name("valid");t.forIn("key",i,s=>{n.setParams({propertyName:s}),n.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},o),t.if((0,vde.not)(o),()=>{n.error(!0),r.allErrors||t.break()})}),n.ok(o)}};SU.default=KHe});var xU=me(CU=>{"use strict";Object.defineProperty(CU,"__esModule",{value:!0});var VE=Ac(),Td=Oi(),GHe=af(),UE=fr(),XHe={message:"must NOT have additional properties",params:({params:n})=>(0,Td._)`{additionalProperty: ${n.additionalProperty}}`},YHe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:XHe,code(n){let{gen:t,schema:e,parentSchema:i,data:r,errsCount:o,it:s}=n;if(!o)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=s;if(s.props=!0,l.removeAdditional!=="all"&&(0,UE.alwaysValidSchema)(s,e))return;let c=(0,VE.allSchemaProperties)(i.properties),d=(0,VE.allSchemaProperties)(i.patternProperties);u(),n.ok((0,Td._)`${o} === ${GHe.default.errors}`);function u(){t.forIn("key",r,v=>{!c.length&&!d.length?p(v):t.if(h(v),()=>p(v))})}function h(v){let b;if(c.length>8){let S=(0,UE.schemaRefOrVal)(s,i.properties,"properties");b=(0,VE.isOwnProperty)(t,S,v)}else c.length?b=(0,Td.or)(...c.map(S=>(0,Td._)`${v} === ${S}`)):b=Td.nil;return d.length&&(b=(0,Td.or)(b,...d.map(S=>(0,Td._)`${(0,VE.usePattern)(n,S)}.test(${v})`))),(0,Td.not)(b)}function f(v){t.code((0,Td._)`delete ${r}[${v}]`)}function p(v){if(l.removeAdditional==="all"||l.removeAdditional&&e===!1){f(v);return}if(e===!1){n.setParams({additionalProperty:v}),n.error(),a||t.break();return}if(typeof e=="object"&&!(0,UE.alwaysValidSchema)(s,e)){let b=t.name("valid");l.removeAdditional==="failing"?(y(v,b,!1),t.if((0,Td.not)(b),()=>{n.reset(),f(v)})):(y(v,b),a||t.if((0,Td.not)(b),()=>t.break()))}}function y(v,b,S){let x={keyword:"additionalProperties",dataProp:v,dataPropType:UE.Type.Str};S===!1&&Object.assign(x,{compositeRule:!0,createErrors:!1,allErrors:!1}),n.subschema(x,b)}}};CU.default=YHe});var Sde=me(MU=>{"use strict";Object.defineProperty(MU,"__esModule",{value:!0});var ZHe=H5(),bde=Ac(),kU=fr(),wde=xU(),QHe={keyword:"properties",type:"object",schemaType:"object",code(n){let{gen:t,schema:e,parentSchema:i,data:r,it:o}=n;o.opts.removeAdditional==="all"&&i.additionalProperties===void 0&&wde.default.code(new ZHe.KeywordCxt(o,wde.default,"additionalProperties"));let s=(0,bde.allSchemaProperties)(e);for(let u of s)o.definedProperties.add(u);o.opts.unevaluated&&s.length&&o.props!==!0&&(o.props=kU.mergeEvaluated.props(t,(0,kU.toHash)(s),o.props));let a=s.filter(u=>!(0,kU.alwaysValidSchema)(o,e[u]));if(a.length===0)return;let l=t.name("valid");for(let u of a)c(u)?d(u):(t.if((0,bde.propertyInData)(t,r,u,o.opts.ownProperties)),d(u),o.allErrors||t.else().var(l,!0),t.endIf()),n.it.definedProperties.add(u),n.ok(l);function c(u){return o.opts.useDefaults&&!o.compositeRule&&e[u].default!==void 0}function d(u){n.subschema({keyword:"properties",schemaProp:u,dataProp:u},l)}}};MU.default=QHe});var Mde=me(TU=>{"use strict";Object.defineProperty(TU,"__esModule",{value:!0});var Cde=Ac(),jE=Oi(),xde=fr(),kde=fr(),JHe={keyword:"patternProperties",type:"object",schemaType:"object",code(n){let{gen:t,schema:e,data:i,parentSchema:r,it:o}=n,{opts:s}=o,a=(0,Cde.allSchemaProperties)(e),l=a.filter(y=>(0,xde.alwaysValidSchema)(o,e[y]));if(a.length===0||l.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;let c=s.strictSchema&&!s.allowMatchingProperties&&r.properties,d=t.name("valid");o.props!==!0&&!(o.props instanceof jE.Name)&&(o.props=(0,kde.evaluatedPropsToName)(t,o.props));let{props:u}=o;h();function h(){for(let y of a)c&&f(y),o.allErrors?p(y):(t.var(d,!0),p(y),t.if(d))}function f(y){for(let v in c)new RegExp(y).test(v)&&(0,xde.checkStrictMode)(o,`property ${v} matches pattern ${y} (use allowMatchingProperties)`)}function p(y){t.forIn("key",i,v=>{t.if((0,jE._)`${(0,Cde.usePattern)(n,y)}.test(${v})`,()=>{let b=l.includes(y);b||n.subschema({keyword:"patternProperties",schemaProp:y,dataProp:v,dataPropType:kde.Type.Str},d),o.opts.unevaluated&&u!==!0?t.assign((0,jE._)`${u}[${v}]`,!0):!b&&!o.allErrors&&t.if((0,jE.not)(d),()=>t.break())})})}}};TU.default=JHe});var Tde=me(EU=>{"use strict";Object.defineProperty(EU,"__esModule",{value:!0});var eWe=fr(),tWe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){let{gen:t,schema:e,it:i}=n;if((0,eWe.alwaysValidSchema)(i,e)){n.fail();return}let r=t.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},r),n.failResult(r,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};EU.default=tWe});var Ede=me(AU=>{"use strict";Object.defineProperty(AU,"__esModule",{value:!0});var nWe=Ac(),iWe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:nWe.validateUnion,error:{message:"must match a schema in anyOf"}};AU.default=iWe});var Ade=me(DU=>{"use strict";Object.defineProperty(DU,"__esModule",{value:!0});var HE=Oi(),rWe=fr(),oWe={message:"must match exactly one schema in oneOf",params:({params:n})=>(0,HE._)`{passingSchemas: ${n.passing}}`},sWe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:oWe,code(n){let{gen:t,schema:e,parentSchema:i,it:r}=n;if(!Array.isArray(e))throw new Error("ajv implementation error");if(r.opts.discriminator&&i.discriminator)return;let o=e,s=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");n.setParams({passing:a}),t.block(c),n.result(s,()=>n.reset(),()=>n.error(!0));function c(){o.forEach((d,u)=>{let h;(0,rWe.alwaysValidSchema)(r,d)?t.var(l,!0):h=n.subschema({keyword:"oneOf",schemaProp:u,compositeRule:!0},l),u>0&&t.if((0,HE._)`${l} && ${s}`).assign(s,!1).assign(a,(0,HE._)`[${a}, ${u}]`).else(),t.if(l,()=>{t.assign(s,!0),t.assign(a,u),h&&n.mergeEvaluated(h,HE.Name)})})}}};DU.default=sWe});var Dde=me(IU=>{"use strict";Object.defineProperty(IU,"__esModule",{value:!0});var aWe=fr(),lWe={keyword:"allOf",schemaType:"array",code(n){let{gen:t,schema:e,it:i}=n;if(!Array.isArray(e))throw new Error("ajv implementation error");let r=t.name("valid");e.forEach((o,s)=>{if((0,aWe.alwaysValidSchema)(i,o))return;let a=n.subschema({keyword:"allOf",schemaProp:s},r);n.ok(r),n.mergeEvaluated(a)})}};IU.default=lWe});var Pde=me(FU=>{"use strict";Object.defineProperty(FU,"__esModule",{value:!0});var WE=Oi(),Fde=fr(),cWe={message:({params:n})=>(0,WE.str)`must match "${n.ifClause}" schema`,params:({params:n})=>(0,WE._)`{failingKeyword: ${n.ifClause}}`},dWe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:cWe,code(n){let{gen:t,parentSchema:e,it:i}=n;e.then===void 0&&e.else===void 0&&(0,Fde.checkStrictMode)(i,'"if" without "then" and "else" is ignored');let r=Ide(i,"then"),o=Ide(i,"else");if(!r&&!o)return;let s=t.let("valid",!0),a=t.name("_valid");if(l(),n.reset(),r&&o){let d=t.let("ifClause");n.setParams({ifClause:d}),t.if(a,c("then",d),c("else",d))}else r?t.if(a,c("then")):t.if((0,WE.not)(a),c("else"));n.pass(s,()=>n.error(!0));function l(){let d=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);n.mergeEvaluated(d)}function c(d,u){return()=>{let h=n.subschema({keyword:d},a);t.assign(s,a),n.mergeValidEvaluated(h,s),u?t.assign(u,(0,WE._)`${d}`):n.setParams({ifClause:d})}}}};function Ide(n,t){let e=n.schema[t];return e!==void 0&&!(0,Fde.alwaysValidSchema)(n,e)}FU.default=dWe});var Lde=me(PU=>{"use strict";Object.defineProperty(PU,"__esModule",{value:!0});var uWe=fr(),hWe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:t,it:e}){t.if===void 0&&(0,uWe.checkStrictMode)(e,`"${n}" without "if" is ignored`)}};PU.default=hWe});var Rde=me(LU=>{"use strict";Object.defineProperty(LU,"__esModule",{value:!0});var fWe=gU(),pWe=ude(),mWe=yU(),gWe=fde(),yWe=pde(),vWe=yde(),_We=_de(),bWe=xU(),wWe=Sde(),SWe=Mde(),CWe=Tde(),xWe=Ede(),kWe=Ade(),MWe=Dde(),TWe=Pde(),EWe=Lde();function AWe(n=!1){let t=[CWe.default,xWe.default,kWe.default,MWe.default,TWe.default,EWe.default,_We.default,bWe.default,vWe.default,wWe.default,SWe.default];return n?t.push(pWe.default,gWe.default):t.push(fWe.default,mWe.default),t.push(yWe.default),t}LU.default=AWe});var Ode=me(RU=>{"use strict";Object.defineProperty(RU,"__esModule",{value:!0});var zo=Oi(),DWe={message:({schemaCode:n})=>(0,zo.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,zo._)`{format: ${n}}`},IWe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:DWe,code(n,t){let{gen:e,data:i,$data:r,schema:o,schemaCode:s,it:a}=n,{opts:l,errSchemaPath:c,schemaEnv:d,self:u}=a;if(!l.validateFormats)return;r?h():f();function h(){let p=e.scopeValue("formats",{ref:u.formats,code:l.code.formats}),y=e.const("fDef",(0,zo._)`${p}[${s}]`),v=e.let("fType"),b=e.let("format");e.if((0,zo._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>e.assign(v,(0,zo._)`${y}.type || "string"`).assign(b,(0,zo._)`${y}.validate`),()=>e.assign(v,(0,zo._)`"string"`).assign(b,y)),n.fail$data((0,zo.or)(S(),x()));function S(){return l.strictSchema===!1?zo.nil:(0,zo._)`${s} && !${b}`}function x(){let k=d.$async?(0,zo._)`(${y}.async ? await ${b}(${i}) : ${b}(${i}))`:(0,zo._)`${b}(${i})`,L=(0,zo._)`(typeof ${b} == "function" ? ${k} : ${b}.test(${i}))`;return(0,zo._)`${b} && ${b} !== true && ${v} === ${t} && !${L}`}}function f(){let p=u.formats[o];if(!p){S();return}if(p===!0)return;let[y,v,b]=x(p);y===t&&n.pass(k());function S(){if(l.strictSchema===!1){u.logger.warn(L());return}throw new Error(L());function L(){return`unknown format "${o}" ignored in schema at path "${c}"`}}function x(L){let D=L instanceof RegExp?(0,zo.regexpCode)(L):l.code.formats?(0,zo._)`${l.code.formats}${(0,zo.getProperty)(o)}`:void 0,V=e.scopeValue("formats",{key:o,ref:L,code:D});return typeof L=="object"&&!(L instanceof RegExp)?[L.type||"string",L.validate,(0,zo._)`${V}.validate`]:["string",L,V]}function k(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!d.$async)throw new Error("async format in sync schema");return(0,zo._)`await ${b}(${i})`}return typeof v=="function"?(0,zo._)`${b}(${i})`:(0,zo._)`${b}.test(${i})`}}}};RU.default=IWe});var Nde=me(OU=>{"use strict";Object.defineProperty(OU,"__esModule",{value:!0});var FWe=Ode(),PWe=[FWe.default];OU.default=PWe});var Bde=me(ev=>{"use strict";Object.defineProperty(ev,"__esModule",{value:!0});ev.contentVocabulary=ev.metadataVocabulary=void 0;ev.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ev.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Ude=me(NU=>{"use strict";Object.defineProperty(NU,"__esModule",{value:!0});var LWe=Kce(),RWe=ade(),OWe=Rde(),NWe=Nde(),Vde=Bde(),BWe=[LWe.default,RWe.default,(0,OWe.default)(),NWe.default,Vde.metadataVocabulary,Vde.contentVocabulary];NU.default=BWe});var Hde=me(zE=>{"use strict";Object.defineProperty(zE,"__esModule",{value:!0});zE.DiscrError=void 0;var jde=(function(n){return n.Tag="tag",n.Mapping="mapping",n})(jde||(zE.DiscrError=jde={}))});var zde=me(VU=>{"use strict";Object.defineProperty(VU,"__esModule",{value:!0});var tv=Oi(),BU=Hde(),Wde=kE(),VWe=W5(),UWe=fr(),jWe={message:({params:{discrError:n,tagName:t}})=>n===BU.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:n,tag:t,tagName:e}})=>(0,tv._)`{error: ${n}, tag: ${e}, tagValue: ${t}}`},HWe={keyword:"discriminator",type:"object",schemaType:"object",error:jWe,code(n){let{gen:t,data:e,schema:i,parentSchema:r,it:o}=n,{oneOf:s}=r;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=i.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");let l=t.let("valid",!1),c=t.const("tag",(0,tv._)`${e}${(0,tv.getProperty)(a)}`);t.if((0,tv._)`typeof ${c} == "string"`,()=>d(),()=>n.error(!1,{discrError:BU.DiscrError.Tag,tag:c,tagName:a})),n.ok(l);function d(){let f=h();t.if(!1);for(let p in f)t.elseIf((0,tv._)`${c} === ${p}`),t.assign(l,u(f[p]));t.else(),n.error(!1,{discrError:BU.DiscrError.Mapping,tag:c,tagName:a}),t.endIf()}function u(f){let p=t.name("valid"),y=n.subschema({keyword:"oneOf",schemaProp:f},p);return n.mergeEvaluated(y,tv.Name),p}function h(){var f;let p={},y=b(r),v=!0;for(let k=0;k<s.length;k++){let L=s[k];if(L?.$ref&&!(0,UWe.schemaHasRulesButRef)(L,o.self.RULES)){let V=L.$ref;if(L=Wde.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,V),L instanceof Wde.SchemaEnv&&(L=L.schema),L===void 0)throw new VWe.default(o.opts.uriResolver,o.baseId,V)}let D=(f=L?.properties)===null||f===void 0?void 0:f[a];if(typeof D!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);v=v&&(y||b(L)),S(D,k)}if(!v)throw new Error(`discriminator: "${a}" must be required`);return p;function b({required:k}){return Array.isArray(k)&&k.includes(a)}function S(k,L){if(k.const)x(k.const,L);else if(k.enum)for(let D of k.enum)x(D,L);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function x(k,L){if(typeof k!="string"||k in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[k]=L}}}};VU.default=HWe});var qde=me((c9t,WWe)=>{WWe.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var jU=me((po,UU)=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.MissingRefError=po.ValidationError=po.CodeGen=po.Name=po.nil=po.stringify=po.str=po._=po.KeywordCxt=po.Ajv=void 0;var zWe=jce(),qWe=Ude(),$We=zde(),$de=qde(),KWe=["/properties"],qE="http://json-schema.org/draft-07/schema",nv=class extends zWe.default{_addVocabularies(){super._addVocabularies(),qWe.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword($We.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema($de,KWe):$de;this.addMetaSchema(t,qE,!1),this.refs["http://json-schema.org/schema"]=qE}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(qE)?qE:void 0)}};po.Ajv=nv;UU.exports=po=nv;UU.exports.Ajv=nv;Object.defineProperty(po,"__esModule",{value:!0});po.default=nv;var GWe=H5();Object.defineProperty(po,"KeywordCxt",{enumerable:!0,get:function(){return GWe.KeywordCxt}});var iv=Oi();Object.defineProperty(po,"_",{enumerable:!0,get:function(){return iv._}});Object.defineProperty(po,"str",{enumerable:!0,get:function(){return iv.str}});Object.defineProperty(po,"stringify",{enumerable:!0,get:function(){return iv.stringify}});Object.defineProperty(po,"nil",{enumerable:!0,get:function(){return iv.nil}});Object.defineProperty(po,"Name",{enumerable:!0,get:function(){return iv.Name}});Object.defineProperty(po,"CodeGen",{enumerable:!0,get:function(){return iv.CodeGen}});var XWe=CE();Object.defineProperty(po,"ValidationError",{enumerable:!0,get:function(){return XWe.default}});var YWe=W5();Object.defineProperty(po,"MissingRefError",{enumerable:!0,get:function(){return YWe.default}})});var eue=me(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.formatNames=Ku.fastFormats=Ku.fullFormats=void 0;function $u(n,t){return{validate:n,compare:t}}Ku.fullFormats={date:$u(Yde,qU),time:$u(WU(!0),$U),"date-time":$u(Kde(!0),Qde),"iso-time":$u(WU(),Zde),"iso-date-time":$u(Kde(),Jde),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:nze,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:cze,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:ize,int32:{type:"number",validate:sze},int64:{type:"number",validate:aze},float:{type:"number",validate:Xde},double:{type:"number",validate:Xde},password:!0,binary:!0};Ku.fastFormats=Ge(le({},Ku.fullFormats),{date:$u(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,qU),time:$u(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,$U),"date-time":$u(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Qde),"iso-time":$u(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Zde),"iso-date-time":$u(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Jde),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i});Ku.formatNames=Object.keys(Ku.fullFormats);function ZWe(n){return n%4===0&&(n%100!==0||n%400===0)}var QWe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,JWe=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Yde(n){let t=QWe.exec(n);if(!t)return!1;let e=+t[1],i=+t[2],r=+t[3];return i>=1&&i<=12&&r>=1&&r<=(i===2&&ZWe(e)?29:JWe[i])}function qU(n,t){if(n&&t)return n>t?1:n<t?-1:0}var HU=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function WU(n){return function(e){let i=HU.exec(e);if(!i)return!1;let r=+i[1],o=+i[2],s=+i[3],a=i[4],l=i[5]==="-"?-1:1,c=+(i[6]||0),d=+(i[7]||0);if(c>23||d>59||n&&!a)return!1;if(r<=23&&o<=59&&s<60)return!0;let u=o-d*l,h=r-c*l-(u<0?1:0);return(h===23||h===-1)&&(u===59||u===-1)&&s<61}}function $U(n,t){if(!(n&&t))return;let e=new Date("2020-01-01T"+n).valueOf(),i=new Date("2020-01-01T"+t).valueOf();if(e&&i)return e-i}function Zde(n,t){if(!(n&&t))return;let e=HU.exec(n),i=HU.exec(t);if(e&&i)return n=e[1]+e[2]+e[3],t=i[1]+i[2]+i[3],n>t?1:n<t?-1:0}var zU=/t|\s/i;function Kde(n){let t=WU(n);return function(i){let r=i.split(zU);return r.length===2&&Yde(r[0])&&t(r[1])}}function Qde(n,t){if(!(n&&t))return;let e=new Date(n).valueOf(),i=new Date(t).valueOf();if(e&&i)return e-i}function Jde(n,t){if(!(n&&t))return;let[e,i]=n.split(zU),[r,o]=t.split(zU),s=qU(e,r);if(s!==void 0)return s||$U(i,o)}var eze=/\/|:/,tze=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function nze(n){return eze.test(n)&&tze.test(n)}var Gde=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function ize(n){return Gde.lastIndex=0,Gde.test(n)}var rze=-(2**31),oze=2**31-1;function sze(n){return Number.isInteger(n)&&n<=oze&&n>=rze}function aze(n){return Number.isInteger(n)}function Xde(){return!0}var lze=/[^\\]\\Z/;function cze(n){if(lze.test(n))return!1;try{return new RegExp(n),!0}catch{return!1}}});var tue=me(rv=>{"use strict";Object.defineProperty(rv,"__esModule",{value:!0});rv.formatLimitDefinition=void 0;var dze=jU(),Ed=Oi(),r0=Ed.operators,$E={formatMaximum:{okStr:"<=",ok:r0.LTE,fail:r0.GT},formatMinimum:{okStr:">=",ok:r0.GTE,fail:r0.LT},formatExclusiveMaximum:{okStr:"<",ok:r0.LT,fail:r0.GTE},formatExclusiveMinimum:{okStr:">",ok:r0.GT,fail:r0.LTE}},uze={message:({keyword:n,schemaCode:t})=>(0,Ed.str)`should be ${$E[n].okStr} ${t}`,params:({keyword:n,schemaCode:t})=>(0,Ed._)`{comparison: ${$E[n].okStr}, limit: ${t}}`};rv.formatLimitDefinition={keyword:Object.keys($E),type:"string",schemaType:"string",$data:!0,error:uze,code(n){let{gen:t,data:e,schemaCode:i,keyword:r,it:o}=n,{opts:s,self:a}=o;if(!s.validateFormats)return;let l=new dze.KeywordCxt(o,a.RULES.all.format.definition,"format");l.$data?c():d();function c(){let h=t.scopeValue("formats",{ref:a.formats,code:s.code.formats}),f=t.const("fmt",(0,Ed._)`${h}[${l.schemaCode}]`);n.fail$data((0,Ed.or)((0,Ed._)`typeof ${f} != "object"`,(0,Ed._)`${f} instanceof RegExp`,(0,Ed._)`typeof ${f}.compare != "function"`,u(f)))}function d(){let h=l.schema,f=a.formats[h];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${r}": format "${h}" does not define "compare" function`);let p=t.scopeValue("formats",{key:h,ref:f,code:s.code.formats?(0,Ed._)`${s.code.formats}${(0,Ed.getProperty)(h)}`:void 0});n.fail$data(u(p))}function u(h){return(0,Ed._)`${h}.compare(${e}, ${i}) ${$E[r].fail} 0`}},dependencies:["format"]};var hze=n=>(n.addKeyword(rv.formatLimitDefinition),n);rv.default=hze});var oue=me((iS,rue)=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});var ov=eue(),fze=tue(),KU=Oi(),nue=new KU.Name("fullFormats"),pze=new KU.Name("fastFormats"),GU=(n,t={keywords:!0})=>{if(Array.isArray(t))return iue(n,t,ov.fullFormats,nue),n;let[e,i]=t.mode==="fast"?[ov.fastFormats,pze]:[ov.fullFormats,nue],r=t.formats||ov.formatNames;return iue(n,r,e,i),t.keywords&&(0,fze.default)(n),n};GU.get=(n,t="full")=>{let i=(t==="fast"?ov.fastFormats:ov.fullFormats)[n];if(!i)throw new Error(`Unknown format "${n}"`);return i};function iue(n,t,e,i){var r,o;(r=(o=n.opts.code).formats)!==null&&r!==void 0||(o.formats=(0,KU._)`require("ajv-formats/dist/formats").${i}`);for(let s of t)n.addFormat(s,e[s])}rue.exports=iS=GU;Object.defineProperty(iS,"__esModule",{value:!0});iS.default=GU});var aue=me((sue,KE)=>{"use strict";(function(n){"use strict";function t(k,L){var D=(k&65535)+(L&65535),V=(k>>16)+(L>>16)+(D>>16);return V<<16|D&65535}function e(k,L){return k<<L|k>>>32-L}function i(k,L,D,V,O,R){return t(e(t(t(L,k),t(V,R)),O),D)}function r(k,L,D,V,O,R,G){return i(L&D|~L&V,k,L,O,R,G)}function o(k,L,D,V,O,R,G){return i(L&V|D&~V,k,L,O,R,G)}function s(k,L,D,V,O,R,G){return i(L^D^V,k,L,O,R,G)}function a(k,L,D,V,O,R,G){return i(D^(L|~V),k,L,O,R,G)}function l(k,L){k[L>>5]|=128<<L%32,k[(L+64>>>9<<4)+14]=L;var D,V,O,R,G,Z=1732584193,K=-271733879,C=-1732584194,A=271733878;for(D=0;D<k.length;D+=16)V=Z,O=K,R=C,G=A,Z=r(Z,K,C,A,k[D],7,-680876936),A=r(A,Z,K,C,k[D+1],12,-389564586),C=r(C,A,Z,K,k[D+2],17,606105819),K=r(K,C,A,Z,k[D+3],22,-1044525330),Z=r(Z,K,C,A,k[D+4],7,-176418897),A=r(A,Z,K,C,k[D+5],12,1200080426),C=r(C,A,Z,K,k[D+6],17,-1473231341),K=r(K,C,A,Z,k[D+7],22,-45705983),Z=r(Z,K,C,A,k[D+8],7,1770035416),A=r(A,Z,K,C,k[D+9],12,-1958414417),C=r(C,A,Z,K,k[D+10],17,-42063),K=r(K,C,A,Z,k[D+11],22,-1990404162),Z=r(Z,K,C,A,k[D+12],7,1804603682),A=r(A,Z,K,C,k[D+13],12,-40341101),C=r(C,A,Z,K,k[D+14],17,-1502002290),K=r(K,C,A,Z,k[D+15],22,1236535329),Z=o(Z,K,C,A,k[D+1],5,-165796510),A=o(A,Z,K,C,k[D+6],9,-1069501632),C=o(C,A,Z,K,k[D+11],14,643717713),K=o(K,C,A,Z,k[D],20,-373897302),Z=o(Z,K,C,A,k[D+5],5,-701558691),A=o(A,Z,K,C,k[D+10],9,38016083),C=o(C,A,Z,K,k[D+15],14,-660478335),K=o(K,C,A,Z,k[D+4],20,-405537848),Z=o(Z,K,C,A,k[D+9],5,568446438),A=o(A,Z,K,C,k[D+14],9,-1019803690),C=o(C,A,Z,K,k[D+3],14,-187363961),K=o(K,C,A,Z,k[D+8],20,1163531501),Z=o(Z,K,C,A,k[D+13],5,-1444681467),A=o(A,Z,K,C,k[D+2],9,-51403784),C=o(C,A,Z,K,k[D+7],14,1735328473),K=o(K,C,A,Z,k[D+12],20,-1926607734),Z=s(Z,K,C,A,k[D+5],4,-378558),A=s(A,Z,K,C,k[D+8],11,-2022574463),C=s(C,A,Z,K,k[D+11],16,1839030562),K=s(K,C,A,Z,k[D+14],23,-35309556),Z=s(Z,K,C,A,k[D+1],4,-1530992060),A=s(A,Z,K,C,k[D+4],11,1272893353),C=s(C,A,Z,K,k[D+7],16,-155497632),K=s(K,C,A,Z,k[D+10],23,-1094730640),Z=s(Z,K,C,A,k[D+13],4,681279174),A=s(A,Z,K,C,k[D],11,-358537222),C=s(C,A,Z,K,k[D+3],16,-722521979),K=s(K,C,A,Z,k[D+6],23,76029189),Z=s(Z,K,C,A,k[D+9],4,-640364487),A=s(A,Z,K,C,k[D+12],11,-421815835),C=s(C,A,Z,K,k[D+15],16,530742520),K=s(K,C,A,Z,k[D+2],23,-995338651),Z=a(Z,K,C,A,k[D],6,-198630844),A=a(A,Z,K,C,k[D+7],10,1126891415),C=a(C,A,Z,K,k[D+14],15,-1416354905),K=a(K,C,A,Z,k[D+5],21,-57434055),Z=a(Z,K,C,A,k[D+12],6,1700485571),A=a(A,Z,K,C,k[D+3],10,-1894986606),C=a(C,A,Z,K,k[D+10],15,-1051523),K=a(K,C,A,Z,k[D+1],21,-2054922799),Z=a(Z,K,C,A,k[D+8],6,1873313359),A=a(A,Z,K,C,k[D+15],10,-30611744),C=a(C,A,Z,K,k[D+6],15,-1560198380),K=a(K,C,A,Z,k[D+13],21,1309151649),Z=a(Z,K,C,A,k[D+4],6,-145523070),A=a(A,Z,K,C,k[D+11],10,-1120210379),C=a(C,A,Z,K,k[D+2],15,718787259),K=a(K,C,A,Z,k[D+9],21,-343485551),Z=t(Z,V),K=t(K,O),C=t(C,R),A=t(A,G);return[Z,K,C,A]}function c(k){var L,D="",V=k.length*32;for(L=0;L<V;L+=8)D+=String.fromCharCode(k[L>>5]>>>L%32&255);return D}function d(k){var L,D=[];for(D[(k.length>>2)-1]=void 0,L=0;L<D.length;L+=1)D[L]=0;var V=k.length*8;for(L=0;L<V;L+=8)D[L>>5]|=(k.charCodeAt(L/8)&255)<<L%32;return D}function u(k){return c(l(d(k),k.length*8))}function h(k,L){var D,V=d(k),O=[],R=[],G;for(O[15]=R[15]=void 0,V.length>16&&(V=l(V,k.length*8)),D=0;D<16;D+=1)O[D]=V[D]^909522486,R[D]=V[D]^1549556828;return G=l(O.concat(d(L)),512+L.length*8),c(l(R.concat(G),640))}function f(k){var L="0123456789abcdef",D="",V,O;for(O=0;O<k.length;O+=1)V=k.charCodeAt(O),D+=L.charAt(V>>>4&15)+L.charAt(V&15);return D}function p(k){return unescape(encodeURIComponent(k))}function y(k){return u(p(k))}function v(k){return f(y(k))}function b(k,L){return h(p(k),p(L))}function S(k,L){return f(b(k,L))}function x(k,L,D){return L?D?b(L,k):S(L,k):D?y(k):v(k)}typeof define=="function"&&define.amd?define(function(){return x}):typeof KE=="object"&&KE.exports?KE.exports=x:n.md5=x})(sue)});var gfe=me((exports,module)=>{"use strict";(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define("FiveBellsCondition",[],t):typeof exports=="object"?exports.FiveBellsCondition=t():n.FiveBellsCondition=t()})(exports,function(){return(function(n){function t(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return n[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e={};return t.m=n,t.c=e,t.i=function(i){return i},t.d=function(i,r,o){t.o(i,r)||Object.defineProperty(i,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(i){var r=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(r,"a",r),r},t.o=function(i,r){return Object.prototype.hasOwnProperty.call(i,r)},t.p="",t(t.s=471)})([function(n,t,e){var i=e(4),r=e(29),o=e(16),s=e(17),a=e(30),l="prototype",c=function(d,u,h){var f,p,y,v,b=d&c.F,S=d&c.G,x=d&c.S,k=d&c.P,L=d&c.B,D=S?i:x?i[u]||(i[u]={}):(i[u]||{})[l],V=S?r:r[u]||(r[u]={}),O=V[l]||(V[l]={});S&&(h=u);for(f in h)p=!b&&D&&D[f]!==void 0,y=(p?D:h)[f],v=L&&p?a(y,i):k&&typeof y=="function"?a(Function.call,y):y,D&&s(D,f,y,d&c.U),V[f]!=y&&o(V,f,v),k&&O[f]!=y&&(O[f]=y)};i.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,n.exports=c},function(n,t,e){"use strict";(function(i){function r(){try{var B=new Uint8Array(1);return B.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},B.foo()===42&&typeof B.subarray=="function"&&B.subarray(1,1).byteLength===0}catch{return!1}}function o(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(B,W){if(o()<W)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(B=new Uint8Array(W),B.__proto__=a.prototype):(B===null&&(B=new a(W)),B.length=W),B}function a(B,W,ie){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(B,W,ie);if(typeof B=="number"){if(typeof W=="string")throw new Error("If encoding is specified then the first argument must be a string");return u(this,B)}return l(this,B,W,ie)}function l(B,W,ie,ye){if(typeof W=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&W instanceof ArrayBuffer?p(B,W,ie,ye):typeof W=="string"?h(B,W,ie):y(B,W)}function c(B){if(typeof B!="number")throw new TypeError('"size" argument must be a number');if(B<0)throw new RangeError('"size" argument must not be negative')}function d(B,W,ie,ye){return c(W),W<=0?s(B,W):ie!==void 0?typeof ye=="string"?s(B,W).fill(ie,ye):s(B,W).fill(ie):s(B,W)}function u(B,W){if(c(W),B=s(B,W<0?0:0|v(W)),!a.TYPED_ARRAY_SUPPORT)for(var ie=0;ie<W;++ie)B[ie]=0;return B}function h(B,W,ie){if(typeof ie=="string"&&ie!==""||(ie="utf8"),!a.isEncoding(ie))throw new TypeError('"encoding" must be a valid string encoding');var ye=0|S(W,ie);B=s(B,ye);var Me=B.write(W,ie);return Me!==ye&&(B=B.slice(0,Me)),B}function f(B,W){var ie=W.length<0?0:0|v(W.length);B=s(B,ie);for(var ye=0;ye<ie;ye+=1)B[ye]=255&W[ye];return B}function p(B,W,ie,ye){if(W.byteLength,ie<0||W.byteLength<ie)throw new RangeError("'offset' is out of bounds");if(W.byteLength<ie+(ye||0))throw new RangeError("'length' is out of bounds");return W=ie===void 0&&ye===void 0?new Uint8Array(W):ye===void 0?new Uint8Array(W,ie):new Uint8Array(W,ie,ye),a.TYPED_ARRAY_SUPPORT?(B=W,B.__proto__=a.prototype):B=f(B,W),B}function y(B,W){if(a.isBuffer(W)){var ie=0|v(W.length);return B=s(B,ie),B.length===0||W.copy(B,0,0,ie),B}if(W){if(typeof ArrayBuffer<"u"&&W.buffer instanceof ArrayBuffer||"length"in W)return typeof W.length!="number"||Ce(W.length)?s(B,0):f(B,W);if(W.type==="Buffer"&&xe(W.data))return f(B,W.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(B){if(B>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|B}function b(B){return+B!=B&&(B=0),a.alloc(+B)}function S(B,W){if(a.isBuffer(B))return B.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(B)||B instanceof ArrayBuffer))return B.byteLength;typeof B!="string"&&(B=""+B);var ie=B.length;if(ie===0)return 0;for(var ye=!1;;)switch(W){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":case void 0:return ae(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ie;case"hex":return ie>>>1;case"base64":return be(B).length;default:if(ye)return ae(B).length;W=(""+W).toLowerCase(),ye=!0}}function x(B,W,ie){var ye=!1;if((W===void 0||W<0)&&(W=0),W>this.length||((ie===void 0||ie>this.length)&&(ie=this.length),ie<=0)||(ie>>>=0,W>>>=0,ie<=W))return"";for(B||(B="utf8");;)switch(B){case"hex":return F(this,W,ie);case"utf8":case"utf-8":return A(this,W,ie);case"ascii":return T(this,W,ie);case"latin1":case"binary":return M(this,W,ie);case"base64":return C(this,W,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,W,ie);default:if(ye)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),ye=!0}}function k(B,W,ie){var ye=B[W];B[W]=B[ie],B[ie]=ye}function L(B,W,ie,ye,Me){if(B.length===0)return-1;if(typeof ie=="string"?(ye=ie,ie=0):ie>2147483647?ie=2147483647:ie<-2147483648&&(ie=-2147483648),ie=+ie,isNaN(ie)&&(ie=Me?0:B.length-1),ie<0&&(ie=B.length+ie),ie>=B.length){if(Me)return-1;ie=B.length-1}else if(ie<0){if(!Me)return-1;ie=0}if(typeof W=="string"&&(W=a.from(W,ye)),a.isBuffer(W))return W.length===0?-1:D(B,W,ie,ye,Me);if(typeof W=="number")return W&=255,a.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?Me?Uint8Array.prototype.indexOf.call(B,W,ie):Uint8Array.prototype.lastIndexOf.call(B,W,ie):D(B,[W],ie,ye,Me);throw new TypeError("val must be string, number or Buffer")}function D(B,W,ie,ye,Me){function Fe(Rn,Zn){return tt===1?Rn[Zn]:Rn.readUInt16BE(Zn*tt)}var tt=1,gt=B.length,Ut=W.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(B.length<2||W.length<2)return-1;tt=2,gt/=2,Ut/=2,ie/=2}var Cn;if(Me){var jt=-1;for(Cn=ie;Cn<gt;Cn++)if(Fe(B,Cn)===Fe(W,jt===-1?0:Cn-jt)){if(jt===-1&&(jt=Cn),Cn-jt+1===Ut)return jt*tt}else jt!==-1&&(Cn-=Cn-jt),jt=-1}else for(ie+Ut>gt&&(ie=gt-Ut),Cn=ie;Cn>=0;Cn--){for(var Ht=!0,Kr=0;Kr<Ut;Kr++)if(Fe(B,Cn+Kr)!==Fe(W,Kr)){Ht=!1;break}if(Ht)return Cn}return-1}function V(B,W,ie,ye){ie=Number(ie)||0;var Me=B.length-ie;ye?(ye=Number(ye),ye>Me&&(ye=Me)):ye=Me;var Fe=W.length;if(Fe%2!==0)throw new TypeError("Invalid hex string");ye>Fe/2&&(ye=Fe/2);for(var tt=0;tt<ye;++tt){var gt=parseInt(W.substr(2*tt,2),16);if(isNaN(gt))return tt;B[ie+tt]=gt}return tt}function O(B,W,ie,ye){return Ae(ae(W,B.length-ie),B,ie,ye)}function R(B,W,ie,ye){return Ae(fe(W),B,ie,ye)}function G(B,W,ie,ye){return R(B,W,ie,ye)}function Z(B,W,ie,ye){return Ae(be(W),B,ie,ye)}function K(B,W,ie,ye){return Ae(De(W,B.length-ie),B,ie,ye)}function C(B,W,ie){return W===0&&ie===B.length?we.fromByteArray(B):we.fromByteArray(B.slice(W,ie))}function A(B,W,ie){ie=Math.min(B.length,ie);for(var ye=[],Me=W;Me<ie;){var Fe=B[Me],tt=null,gt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(Me+gt<=ie){var Ut,Cn,jt,Ht;switch(gt){case 1:Fe<128&&(tt=Fe);break;case 2:Ut=B[Me+1],(192&Ut)===128&&(Ht=(31&Fe)<<6|63&Ut,Ht>127&&(tt=Ht));break;case 3:Ut=B[Me+1],Cn=B[Me+2],(192&Ut)===128&&(192&Cn)===128&&(Ht=(15&Fe)<<12|(63&Ut)<<6|63&Cn,Ht>2047&&(Ht<55296||Ht>57343)&&(tt=Ht));break;case 4:Ut=B[Me+1],Cn=B[Me+2],jt=B[Me+3],(192&Ut)===128&&(192&Cn)===128&&(192&jt)===128&&(Ht=(15&Fe)<<18|(63&Ut)<<12|(63&Cn)<<6|63&jt,Ht>65535&&Ht<1114112&&(tt=Ht))}}tt===null?(tt=65533,gt=1):tt>65535&&(tt-=65536,ye.push(tt>>>10&1023|55296),tt=56320|1023&tt),ye.push(tt),Me+=gt}return I(ye)}function I(B){var W=B.length;if(W<=Te)return String.fromCharCode.apply(String,B);for(var ie="",ye=0;ye<W;)ie+=String.fromCharCode.apply(String,B.slice(ye,ye+=Te));return ie}function T(B,W,ie){var ye="";ie=Math.min(B.length,ie);for(var Me=W;Me<ie;++Me)ye+=String.fromCharCode(127&B[Me]);return ye}function M(B,W,ie){var ye="";ie=Math.min(B.length,ie);for(var Me=W;Me<ie;++Me)ye+=String.fromCharCode(B[Me]);return ye}function F(B,W,ie){var ye=B.length;(!W||W<0)&&(W=0),(!ie||ie<0||ie>ye)&&(ie=ye);for(var Me="",Fe=W;Fe<ie;++Fe)Me+=re(B[Fe]);return Me}function q(B,W,ie){for(var ye=B.slice(W,ie),Me="",Fe=0;Fe<ye.length;Fe+=2)Me+=String.fromCharCode(ye[Fe]+256*ye[Fe+1]);return Me}function $(B,W,ie){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+W>ie)throw new RangeError("Trying to access beyond buffer length")}function te(B,W,ie,ye,Me,Fe){if(!a.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(W>Me||W<Fe)throw new RangeError('"value" argument is out of bounds');if(ie+ye>B.length)throw new RangeError("Index out of range")}function se(B,W,ie,ye){W<0&&(W=65535+W+1);for(var Me=0,Fe=Math.min(B.length-ie,2);Me<Fe;++Me)B[ie+Me]=(W&255<<8*(ye?Me:1-Me))>>>8*(ye?Me:1-Me)}function ue(B,W,ie,ye){W<0&&(W=4294967295+W+1);for(var Me=0,Fe=Math.min(B.length-ie,4);Me<Fe;++Me)B[ie+Me]=W>>>8*(ye?Me:3-Me)&255}function Se(B,W,ie,ye,Me,Fe){if(ie+ye>B.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function Ie(B,W,ie,ye,Me){return Me||Se(B,W,ie,4,34028234663852886e22,-34028234663852886e22),ve.write(B,W,ie,ye,23,4),ie+4}function Be(B,W,ie,ye,Me){return Me||Se(B,W,ie,8,17976931348623157e292,-17976931348623157e292),ve.write(B,W,ie,ye,52,8),ie+8}function ce(B){if(B=pe(B).replace(ke,""),B.length<2)return"";for(;B.length%4!==0;)B+="=";return B}function pe(B){return B.trim?B.trim():B.replace(/^\s+|\s+$/g,"")}function re(B){return B<16?"0"+B.toString(16):B.toString(16)}function ae(B,W){W=W||1/0;for(var ie,ye=B.length,Me=null,Fe=[],tt=0;tt<ye;++tt){if(ie=B.charCodeAt(tt),ie>55295&&ie<57344){if(!Me){if(ie>56319){(W-=3)>-1&&Fe.push(239,191,189);continue}if(tt+1===ye){(W-=3)>-1&&Fe.push(239,191,189);continue}Me=ie;continue}if(ie<56320){(W-=3)>-1&&Fe.push(239,191,189),Me=ie;continue}ie=(Me-55296<<10|ie-56320)+65536}else Me&&(W-=3)>-1&&Fe.push(239,191,189);if(Me=null,ie<128){if((W-=1)<0)break;Fe.push(ie)}else if(ie<2048){if((W-=2)<0)break;Fe.push(ie>>6|192,63&ie|128)}else if(ie<65536){if((W-=3)<0)break;Fe.push(ie>>12|224,ie>>6&63|128,63&ie|128)}else{if(!(ie<1114112))throw new Error("Invalid code point");if((W-=4)<0)break;Fe.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}}return Fe}function fe(B){for(var W=[],ie=0;ie<B.length;++ie)W.push(255&B.charCodeAt(ie));return W}function De(B,W){for(var ie,ye,Me,Fe=[],tt=0;tt<B.length&&!((W-=2)<0);++tt)ie=B.charCodeAt(tt),ye=ie>>8,Me=ie%256,Fe.push(Me),Fe.push(ye);return Fe}function be(B){return we.toByteArray(ce(B))}function Ae(B,W,ie,ye){for(var Me=0;Me<ye&&!(Me+ie>=W.length||Me>=B.length);++Me)W[Me+ie]=B[Me];return Me}function Ce(B){return B!==B}var we=e(211),ve=e(432),xe=e(178);t.Buffer=a,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=o(),a.poolSize=8192,a._augment=function(B){return B.__proto__=a.prototype,B},a.from=function(B,W,ie){return l(null,B,W,ie)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(B,W,ie){return d(null,B,W,ie)},a.allocUnsafe=function(B){return u(null,B)},a.allocUnsafeSlow=function(B){return u(null,B)},a.isBuffer=function(B){return!(B==null||!B._isBuffer)},a.compare=function(B,W){if(!a.isBuffer(B)||!a.isBuffer(W))throw new TypeError("Arguments must be Buffers");if(B===W)return 0;for(var ie=B.length,ye=W.length,Me=0,Fe=Math.min(ie,ye);Me<Fe;++Me)if(B[Me]!==W[Me]){ie=B[Me],ye=W[Me];break}return ie<ye?-1:ye<ie?1:0},a.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(B,W){if(!xe(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return a.alloc(0);var ie;if(W===void 0)for(W=0,ie=0;ie<B.length;++ie)W+=B[ie].length;var ye=a.allocUnsafe(W),Me=0;for(ie=0;ie<B.length;++ie){var Fe=B[ie];if(!a.isBuffer(Fe))throw new TypeError('"list" argument must be an Array of Buffers');Fe.copy(ye,Me),Me+=Fe.length}return ye},a.byteLength=S,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var W=0;W<B;W+=2)k(this,W,W+1);return this},a.prototype.swap32=function(){var B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var W=0;W<B;W+=4)k(this,W,W+3),k(this,W+1,W+2);return this},a.prototype.swap64=function(){var B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var W=0;W<B;W+=8)k(this,W,W+7),k(this,W+1,W+6),k(this,W+2,W+5),k(this,W+3,W+4);return this},a.prototype.toString=function(){var B=0|this.length;return B===0?"":arguments.length===0?A(this,0,B):x.apply(this,arguments)},a.prototype.equals=function(B){if(!a.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B||a.compare(this,B)===0},a.prototype.inspect=function(){var B="",W=t.INSPECT_MAX_BYTES;return this.length>0&&(B=this.toString("hex",0,W).match(/.{2}/g).join(" "),this.length>W&&(B+=" ... ")),"<Buffer "+B+">"},a.prototype.compare=function(B,W,ie,ye,Me){if(!a.isBuffer(B))throw new TypeError("Argument must be a Buffer");if(W===void 0&&(W=0),ie===void 0&&(ie=B?B.length:0),ye===void 0&&(ye=0),Me===void 0&&(Me=this.length),W<0||ie>B.length||ye<0||Me>this.length)throw new RangeError("out of range index");if(ye>=Me&&W>=ie)return 0;if(ye>=Me)return-1;if(W>=ie)return 1;if(W>>>=0,ie>>>=0,ye>>>=0,Me>>>=0,this===B)return 0;for(var Fe=Me-ye,tt=ie-W,gt=Math.min(Fe,tt),Ut=this.slice(ye,Me),Cn=B.slice(W,ie),jt=0;jt<gt;++jt)if(Ut[jt]!==Cn[jt]){Fe=Ut[jt],tt=Cn[jt];break}return Fe<tt?-1:tt<Fe?1:0},a.prototype.includes=function(B,W,ie){return this.indexOf(B,W,ie)!==-1},a.prototype.indexOf=function(B,W,ie){return L(this,B,W,ie,!0)},a.prototype.lastIndexOf=function(B,W,ie){return L(this,B,W,ie,!1)},a.prototype.write=function(B,W,ie,ye){if(W===void 0)ye="utf8",ie=this.length,W=0;else if(ie===void 0&&typeof W=="string")ye=W,ie=this.length,W=0;else{if(!isFinite(W))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");W|=0,isFinite(ie)?(ie|=0,ye===void 0&&(ye="utf8")):(ye=ie,ie=void 0)}var Me=this.length-W;if((ie===void 0||ie>Me)&&(ie=Me),B.length>0&&(ie<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");for(var Fe=!1;;)switch(ye){case"hex":return V(this,B,W,ie);case"utf8":case"utf-8":return O(this,B,W,ie);case"ascii":return R(this,B,W,ie);case"latin1":case"binary":return G(this,B,W,ie);case"base64":return Z(this,B,W,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,B,W,ie);default:if(Fe)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Fe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Te=4096;a.prototype.slice=function(B,W){var ie=this.length;B=~~B,W=W===void 0?ie:~~W,B<0?(B+=ie,B<0&&(B=0)):B>ie&&(B=ie),W<0?(W+=ie,W<0&&(W=0)):W>ie&&(W=ie),W<B&&(W=B);var ye;if(a.TYPED_ARRAY_SUPPORT)ye=this.subarray(B,W),ye.__proto__=a.prototype;else{var Me=W-B;ye=new a(Me,void 0);for(var Fe=0;Fe<Me;++Fe)ye[Fe]=this[Fe+B]}return ye},a.prototype.readUIntLE=function(B,W,ie){B|=0,W|=0,ie||$(B,W,this.length);for(var ye=this[B],Me=1,Fe=0;++Fe<W&&(Me*=256);)ye+=this[B+Fe]*Me;return ye},a.prototype.readUIntBE=function(B,W,ie){B|=0,W|=0,ie||$(B,W,this.length);for(var ye=this[B+--W],Me=1;W>0&&(Me*=256);)ye+=this[B+--W]*Me;return ye},a.prototype.readUInt8=function(B,W){return W||$(B,1,this.length),this[B]},a.prototype.readUInt16LE=function(B,W){return W||$(B,2,this.length),this[B]|this[B+1]<<8},a.prototype.readUInt16BE=function(B,W){return W||$(B,2,this.length),this[B]<<8|this[B+1]},a.prototype.readUInt32LE=function(B,W){return W||$(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},a.prototype.readUInt32BE=function(B,W){return W||$(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},a.prototype.readIntLE=function(B,W,ie){B|=0,W|=0,ie||$(B,W,this.length);for(var ye=this[B],Me=1,Fe=0;++Fe<W&&(Me*=256);)ye+=this[B+Fe]*Me;return Me*=128,ye>=Me&&(ye-=Math.pow(2,8*W)),ye},a.prototype.readIntBE=function(B,W,ie){B|=0,W|=0,ie||$(B,W,this.length);for(var ye=W,Me=1,Fe=this[B+--ye];ye>0&&(Me*=256);)Fe+=this[B+--ye]*Me;return Me*=128,Fe>=Me&&(Fe-=Math.pow(2,8*W)),Fe},a.prototype.readInt8=function(B,W){return W||$(B,1,this.length),128&this[B]?(255-this[B]+1)*-1:this[B]},a.prototype.readInt16LE=function(B,W){W||$(B,2,this.length);var ie=this[B]|this[B+1]<<8;return 32768&ie?4294901760|ie:ie},a.prototype.readInt16BE=function(B,W){W||$(B,2,this.length);var ie=this[B+1]|this[B]<<8;return 32768&ie?4294901760|ie:ie},a.prototype.readInt32LE=function(B,W){return W||$(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},a.prototype.readInt32BE=function(B,W){return W||$(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},a.prototype.readFloatLE=function(B,W){return W||$(B,4,this.length),ve.read(this,B,!0,23,4)},a.prototype.readFloatBE=function(B,W){return W||$(B,4,this.length),ve.read(this,B,!1,23,4)},a.prototype.readDoubleLE=function(B,W){return W||$(B,8,this.length),ve.read(this,B,!0,52,8)},a.prototype.readDoubleBE=function(B,W){return W||$(B,8,this.length),ve.read(this,B,!1,52,8)},a.prototype.writeUIntLE=function(B,W,ie,ye){if(B=+B,W|=0,ie|=0,!ye){var Me=Math.pow(2,8*ie)-1;te(this,B,W,ie,Me,0)}var Fe=1,tt=0;for(this[W]=255&B;++tt<ie&&(Fe*=256);)this[W+tt]=B/Fe&255;return W+ie},a.prototype.writeUIntBE=function(B,W,ie,ye){if(B=+B,W|=0,ie|=0,!ye){var Me=Math.pow(2,8*ie)-1;te(this,B,W,ie,Me,0)}var Fe=ie-1,tt=1;for(this[W+Fe]=255&B;--Fe>=0&&(tt*=256);)this[W+Fe]=B/tt&255;return W+ie},a.prototype.writeUInt8=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,1,255,0),a.TYPED_ARRAY_SUPPORT||(B=Math.floor(B)),this[W]=255&B,W+1},a.prototype.writeUInt16LE=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[W]=255&B,this[W+1]=B>>>8):se(this,B,W,!0),W+2},a.prototype.writeUInt16BE=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[W]=B>>>8,this[W+1]=255&B):se(this,B,W,!1),W+2},a.prototype.writeUInt32LE=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[W+3]=B>>>24,this[W+2]=B>>>16,this[W+1]=B>>>8,this[W]=255&B):ue(this,B,W,!0),W+4},a.prototype.writeUInt32BE=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[W]=B>>>24,this[W+1]=B>>>16,this[W+2]=B>>>8,this[W+3]=255&B):ue(this,B,W,!1),W+4},a.prototype.writeIntLE=function(B,W,ie,ye){if(B=+B,W|=0,!ye){var Me=Math.pow(2,8*ie-1);te(this,B,W,ie,Me-1,-Me)}var Fe=0,tt=1,gt=0;for(this[W]=255&B;++Fe<ie&&(tt*=256);)B<0&&gt===0&&this[W+Fe-1]!==0&&(gt=1),this[W+Fe]=(B/tt>>0)-gt&255;return W+ie},a.prototype.writeIntBE=function(B,W,ie,ye){if(B=+B,W|=0,!ye){var Me=Math.pow(2,8*ie-1);te(this,B,W,ie,Me-1,-Me)}var Fe=ie-1,tt=1,gt=0;for(this[W+Fe]=255&B;--Fe>=0&&(tt*=256);)B<0&&gt===0&&this[W+Fe+1]!==0&&(gt=1),this[W+Fe]=(B/tt>>0)-gt&255;return W+ie},a.prototype.writeInt8=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,1,127,-128),a.TYPED_ARRAY_SUPPORT||(B=Math.floor(B)),B<0&&(B=255+B+1),this[W]=255&B,W+1},a.prototype.writeInt16LE=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[W]=255&B,this[W+1]=B>>>8):se(this,B,W,!0),W+2},a.prototype.writeInt16BE=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[W]=B>>>8,this[W+1]=255&B):se(this,B,W,!1),W+2},a.prototype.writeInt32LE=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[W]=255&B,this[W+1]=B>>>8,this[W+2]=B>>>16,this[W+3]=B>>>24):ue(this,B,W,!0),W+4},a.prototype.writeInt32BE=function(B,W,ie){return B=+B,W|=0,ie||te(this,B,W,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),a.TYPED_ARRAY_SUPPORT?(this[W]=B>>>24,this[W+1]=B>>>16,this[W+2]=B>>>8,this[W+3]=255&B):ue(this,B,W,!1),W+4},a.prototype.writeFloatLE=function(B,W,ie){return Ie(this,B,W,!0,ie)},a.prototype.writeFloatBE=function(B,W,ie){return Ie(this,B,W,!1,ie)},a.prototype.writeDoubleLE=function(B,W,ie){return Be(this,B,W,!0,ie)},a.prototype.writeDoubleBE=function(B,W,ie){return Be(this,B,W,!1,ie)},a.prototype.copy=function(B,W,ie,ye){if(ie||(ie=0),ye||ye===0||(ye=this.length),W>=B.length&&(W=B.length),W||(W=0),ye>0&&ye<ie&&(ye=ie),ye===ie||B.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(ie<0||ie>=this.length)throw new RangeError("sourceStart out of bounds");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),B.length-W<ye-ie&&(ye=B.length-W+ie);var Me,Fe=ye-ie;if(this===B&&ie<W&&W<ye)for(Me=Fe-1;Me>=0;--Me)B[Me+W]=this[Me+ie];else if(Fe<1e3||!a.TYPED_ARRAY_SUPPORT)for(Me=0;Me<Fe;++Me)B[Me+W]=this[Me+ie];else Uint8Array.prototype.set.call(B,this.subarray(ie,ie+Fe),W);return Fe},a.prototype.fill=function(B,W,ie,ye){if(typeof B=="string"){if(typeof W=="string"?(ye=W,W=0,ie=this.length):typeof ie=="string"&&(ye=ie,ie=this.length),B.length===1){var Me=B.charCodeAt(0);Me<256&&(B=Me)}if(ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!a.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye)}else typeof B=="number"&&(B&=255);if(W<0||this.length<W||this.length<ie)throw new RangeError("Out of range index");if(ie<=W)return this;W>>>=0,ie=ie===void 0?this.length:ie>>>0,B||(B=0);var Fe;if(typeof B=="number")for(Fe=W;Fe<ie;++Fe)this[Fe]=B;else{var tt=a.isBuffer(B)?B:ae(new a(B,ye).toString()),gt=tt.length;for(Fe=0;Fe<ie-W;++Fe)this[Fe+W]=tt[Fe%gt]}return this};var ke=/[^+\/0-9A-Za-z-_]/g}).call(t,e(48))},function(n,t,e){var i=e(6);n.exports=function(r){if(!i(r))throw TypeError(r+" is not an object!");return r}},function(n,t){typeof Object.create=="function"?n.exports=function(e,i){e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(e,i){e.super_=i;var r=function(){};r.prototype=i.prototype,e.prototype=new r,e.prototype.constructor=e}},function(n,t){var e=n.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},function(n,t){n.exports=function(e){try{return!!e()}catch{return!0}}},function(n,t){n.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(n,t,e){var i=e(84)("wks"),r=e(45),o=e(4).Symbol,s=typeof o=="function",a=n.exports=function(l){return i[l]||(i[l]=s&&o[l]||(s?o:r)("Symbol."+l))};a.store=i},function(n,t,e){n.exports=!e(5)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(n,t,e){var i=e(2),r=e(156),o=e(27),s=Object.defineProperty;t.f=e(8)?Object.defineProperty:function(a,l,c){if(i(a),l=o(l,!0),i(c),r)try{return s(a,l,c)}catch{}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[l]=c.value),a}},function(n,t,e){(function(i){(function(r,o){"use strict";function s(C,A){if(!C)throw new Error(A||"Assertion failed")}function a(C,A){C.super_=A;var I=function(){};I.prototype=A.prototype,C.prototype=new I,C.prototype.constructor=C}function l(C,A,I){return l.isBN(C)?C:(this.negative=0,this.words=null,this.length=0,this.red=null,void(C!==null&&(A!=="le"&&A!=="be"||(I=A,A=10),this._init(C||0,A||10,I||"be"))))}function c(C,A,I){for(var T=0,M=Math.min(C.length,I),F=A;F<M;F++){var q=C.charCodeAt(F)-48;T<<=4,T|=q>=49&&q<=54?q-49+10:q>=17&&q<=22?q-17+10:15&q}return T}function d(C,A,I,T){for(var M=0,F=Math.min(C.length,I),q=A;q<F;q++){var $=C.charCodeAt(q)-48;M*=T,M+=$>=49?$-49+10:$>=17?$-17+10:$}return M}function u(C){for(var A=new Array(C.bitLength()),I=0;I<A.length;I++){var T=I/26|0,M=I%26;A[I]=(C.words[T]&1<<M)>>>M}return A}function h(C,A,I){I.negative=A.negative^C.negative;var T=C.length+A.length|0;I.length=T,T=T-1|0;var M=0|C.words[0],F=0|A.words[0],q=M*F,$=67108863&q,te=q/67108864|0;I.words[0]=$;for(var se=1;se<T;se++){for(var ue=te>>>26,Se=67108863&te,Ie=Math.min(se,A.length-1),Be=Math.max(0,se-C.length+1);Be<=Ie;Be++){var ce=se-Be|0;M=0|C.words[ce],F=0|A.words[Be],q=M*F+Se,ue+=q/67108864|0,Se=67108863&q}I.words[se]=0|Se,te=0|ue}return te!==0?I.words[se]=0|te:I.length--,I.strip()}function f(C,A,I){I.negative=A.negative^C.negative,I.length=C.length+A.length;for(var T=0,M=0,F=0;F<I.length-1;F++){var q=M;M=0;for(var $=67108863&T,te=Math.min(F,A.length-1),se=Math.max(0,F-C.length+1);se<=te;se++){var ue=F-se,Se=0|C.words[ue],Ie=0|A.words[se],Be=Se*Ie,ce=67108863&Be;q=q+(Be/67108864|0)|0,ce=ce+$|0,$=67108863&ce,q=q+(ce>>>26)|0,M+=q>>>26,q&=67108863}I.words[F]=$,T=q,q=M}return T!==0?I.words[F]=T:I.length--,I.strip()}function p(C,A,I){var T=new y;return T.mulp(C,A,I)}function y(C,A){this.x=C,this.y=A}function v(C,A){this.name=C,this.p=new l(A,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function L(C){if(typeof C=="string"){var A=l._prime(C);this.m=A.p,this.prime=A}else s(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}function D(C){L.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}typeof r=="object"?r.exports=l:o.BN=l,l.BN=l,l.wordSize=26;var V;try{V=e(1).Buffer}catch{}l.isBN=function(C){return C instanceof l||C!==null&&typeof C=="object"&&C.constructor.wordSize===l.wordSize&&Array.isArray(C.words)},l.max=function(C,A){return C.cmp(A)>0?C:A},l.min=function(C,A){return C.cmp(A)<0?C:A},l.prototype._init=function(C,A,I){if(typeof C=="number")return this._initNumber(C,A,I);if(typeof C=="object")return this._initArray(C,A,I);A==="hex"&&(A=16),s(A===(0|A)&&A>=2&&A<=36),C=C.toString().replace(/\s+/g,"");var T=0;C[0]==="-"&&T++,A===16?this._parseHex(C,T):this._parseBase(C,A,T),C[0]==="-"&&(this.negative=1),this.strip(),I==="le"&&this._initArray(this.toArray(),A,I)},l.prototype._initNumber=function(C,A,I){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[67108863&C],this.length=1):C<4503599627370496?(this.words=[67108863&C,C/67108864&67108863],this.length=2):(s(C<9007199254740992),this.words=[67108863&C,C/67108864&67108863,1],this.length=3),I==="le"&&this._initArray(this.toArray(),A,I)},l.prototype._initArray=function(C,A,I){if(s(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var M,F,q=0;if(I==="be")for(T=C.length-1,M=0;T>=0;T-=3)F=C[T]|C[T-1]<<8|C[T-2]<<16,this.words[M]|=F<<q&67108863,this.words[M+1]=F>>>26-q&67108863,q+=24,q>=26&&(q-=26,M++);else if(I==="le")for(T=0,M=0;T<C.length;T+=3)F=C[T]|C[T+1]<<8|C[T+2]<<16,this.words[M]|=F<<q&67108863,this.words[M+1]=F>>>26-q&67108863,q+=24,q>=26&&(q-=26,M++);return this.strip()},l.prototype._parseHex=function(C,A){this.length=Math.ceil((C.length-A)/6),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var T,M,F=0;for(I=C.length-6,T=0;I>=A;I-=6)M=c(C,I,I+6),this.words[T]|=M<<F&67108863,this.words[T+1]|=M>>>26-F&4194303,F+=24,F>=26&&(F-=26,T++);I+6!==A&&(M=c(C,A,I+6),this.words[T]|=M<<F&67108863,this.words[T+1]|=M>>>26-F&4194303),this.strip()},l.prototype._parseBase=function(C,A,I){this.words=[0],this.length=1;for(var T=0,M=1;M<=67108863;M*=A)T++;T--,M=M/A|0;for(var F=C.length-I,q=F%T,$=Math.min(F,F-q)+I,te=0,se=I;se<$;se+=T)te=d(C,se,se+T,A),this.imuln(M),this.words[0]+te<67108864?this.words[0]+=te:this._iaddn(te);if(q!==0){var ue=1;for(te=d(C,se,C.length,A),se=0;se<q;se++)ue*=A;this.imuln(ue),this.words[0]+te<67108864?this.words[0]+=te:this._iaddn(te)}},l.prototype.copy=function(C){C.words=new Array(this.length);for(var A=0;A<this.length;A++)C.words[A]=this.words[A];C.length=this.length,C.negative=this.negative,C.red=this.red},l.prototype.clone=function(){var C=new l(null);return this.copy(C),C},l.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var O=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],G=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(C,A){C=C||10,A=0|A||1;var I;if(C===16||C==="hex"){I="";for(var T=0,M=0,F=0;F<this.length;F++){var q=this.words[F],$=(16777215&(q<<T|M)).toString(16);M=q>>>24-T&16777215,I=M!==0||F!==this.length-1?O[6-$.length]+$+I:$+I,T+=2,T>=26&&(T-=26,F--)}for(M!==0&&(I=M.toString(16)+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}if(C===(0|C)&&C>=2&&C<=36){var te=R[C],se=G[C];I="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var Se=ue.modn(se).toString(C);ue=ue.idivn(se),I=ue.isZero()?Se+I:O[te-Se.length]+Se+I}for(this.isZero()&&(I="0"+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}s(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=67108864*this.words[1]:this.length===3&&this.words[2]===1?C+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(C,A){return s(typeof V<"u"),this.toArrayLike(V,C,A)},l.prototype.toArray=function(C,A){return this.toArrayLike(Array,C,A)},l.prototype.toArrayLike=function(C,A,I){var T=this.byteLength(),M=I||Math.max(1,T);s(T<=M,"byte array longer than desired length"),s(M>0,"Requested array length <= 0"),this.strip();var F,q,$=A==="le",te=new C(M),se=this.clone();if($){for(q=0;!se.isZero();q++)F=se.andln(255),se.iushrn(8),te[q]=F;for(;q<M;q++)te[q]=0}else{for(q=0;q<M-T;q++)te[q]=0;for(q=0;!se.isZero();q++)F=se.andln(255),se.iushrn(8),te[M-q-1]=F}return te},Math.clz32?l.prototype._countBits=function(C){return 32-Math.clz32(C)}:l.prototype._countBits=function(C){var A=C,I=0;return A>=4096&&(I+=13,A>>>=13),A>=64&&(I+=7,A>>>=7),A>=8&&(I+=4,A>>>=4),A>=2&&(I+=2,A>>>=2),I+A},l.prototype._zeroBits=function(C){if(C===0)return 26;var A=C,I=0;return(8191&A)===0&&(I+=13,A>>>=13),(127&A)===0&&(I+=7,A>>>=7),(15&A)===0&&(I+=4,A>>>=4),(3&A)===0&&(I+=2,A>>>=2),(1&A)===0&&I++,I},l.prototype.bitLength=function(){var C=this.words[this.length-1],A=this._countBits(C);return 26*(this.length-1)+A},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,A=0;A<this.length;A++){var I=this._zeroBits(this.words[A]);if(C+=I,I!==26)break}return C},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},l.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var A=0;A<C.length;A++)this.words[A]=this.words[A]|C.words[A];return this.strip()},l.prototype.ior=function(C){return s((this.negative|C.negative)===0),this.iuor(C)},l.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},l.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},l.prototype.iuand=function(C){var A;A=this.length>C.length?C:this;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]&C.words[I];return this.length=A.length,this.strip()},l.prototype.iand=function(C){return s((this.negative|C.negative)===0),this.iuand(C)},l.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},l.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},l.prototype.iuxor=function(C){var A,I;this.length>C.length?(A=this,I=C):(A=C,I=this);for(var T=0;T<I.length;T++)this.words[T]=A.words[T]^I.words[T];if(this!==A)for(;T<A.length;T++)this.words[T]=A.words[T];return this.length=A.length,this.strip()},l.prototype.ixor=function(C){return s((this.negative|C.negative)===0),this.iuxor(C)},l.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},l.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},l.prototype.inotn=function(C){s(typeof C=="number"&&C>=0);var A=0|Math.ceil(C/26),I=C%26;this._expand(A),I>0&&A--;for(var T=0;T<A;T++)this.words[T]=67108863&~this.words[T];return I>0&&(this.words[T]=~this.words[T]&67108863>>26-I),this.strip()},l.prototype.notn=function(C){return this.clone().inotn(C)},l.prototype.setn=function(C,A){s(typeof C=="number"&&C>=0);var I=C/26|0,T=C%26;return this._expand(I+1),A?this.words[I]=this.words[I]|1<<T:this.words[I]=this.words[I]&~(1<<T),this.strip()},l.prototype.iadd=function(C){var A;if(this.negative!==0&&C.negative===0)return this.negative=0,A=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,A=this.isub(C),C.negative=1,A._normSign();var I,T;this.length>C.length?(I=this,T=C):(I=C,T=this);for(var M=0,F=0;F<T.length;F++)A=(0|I.words[F])+(0|T.words[F])+M,this.words[F]=67108863&A,M=A>>>26;for(;M!==0&&F<I.length;F++)A=(0|I.words[F])+M,this.words[F]=67108863&A,M=A>>>26;if(this.length=I.length,M!==0)this.words[this.length]=M,this.length++;else if(I!==this)for(;F<I.length;F++)this.words[F]=I.words[F];return this},l.prototype.add=function(C){var A;return C.negative!==0&&this.negative===0?(C.negative=0,A=this.sub(C),C.negative^=1,A):C.negative===0&&this.negative!==0?(this.negative=0,A=C.sub(this),this.negative=1,A):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},l.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var A=this.iadd(C);return C.negative=1,A._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var I=this.cmp(C);if(I===0)return this.negative=0,this.length=1,this.words[0]=0,this;var T,M;I>0?(T=this,M=C):(T=C,M=this);for(var F=0,q=0;q<M.length;q++)A=(0|T.words[q])-(0|M.words[q])+F,F=A>>26,this.words[q]=67108863&A;for(;F!==0&&q<T.length;q++)A=(0|T.words[q])+F,F=A>>26,this.words[q]=67108863&A;if(F===0&&q<T.length&&T!==this)for(;q<T.length;q++)this.words[q]=T.words[q];return this.length=Math.max(this.length,q),T!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(C){return this.clone().isub(C)};var Z=function(C,A,I){var T,M,F,q=C.words,$=A.words,te=I.words,se=0,ue=0|q[0],Se=8191&ue,Ie=ue>>>13,Be=0|q[1],ce=8191&Be,pe=Be>>>13,re=0|q[2],ae=8191&re,fe=re>>>13,De=0|q[3],be=8191&De,Ae=De>>>13,Ce=0|q[4],we=8191&Ce,ve=Ce>>>13,xe=0|q[5],Te=8191&xe,ke=xe>>>13,B=0|q[6],W=8191&B,ie=B>>>13,ye=0|q[7],Me=8191&ye,Fe=ye>>>13,tt=0|q[8],gt=8191&tt,Ut=tt>>>13,Cn=0|q[9],jt=8191&Cn,Ht=Cn>>>13,Kr=0|$[0],Rn=8191&Kr,Zn=Kr>>>13,Ji=0|$[1],mr=8191&Ji,Er=Ji>>>13,Ma=0|$[2],gr=8191&Ma,Vi=Ma>>>13,Ta=0|$[3],ji=8191&Ta,nr=Ta>>>13,Ls=0|$[4],yr=8191&Ls,Lr=Ls>>>13,oc=0|$[5],Qn=8191&oc,er=oc>>>13,Rl=0|$[6],kr=8191&Rl,Rr=Rl>>>13,qd=0|$[7],ne=8191&qd,de=qd>>>13,he=0|$[8],H=8191&he,Y=he>>>13,Le=0|$[9],qe=8191&Le,ot=Le>>>13;I.negative=C.negative^A.negative,I.length=19,T=Math.imul(Se,Rn),M=Math.imul(Se,Zn),M=M+Math.imul(Ie,Rn)|0,F=Math.imul(Ie,Zn);var ft=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(ft>>>26)|0,ft&=67108863,T=Math.imul(ce,Rn),M=Math.imul(ce,Zn),M=M+Math.imul(pe,Rn)|0,F=Math.imul(pe,Zn),T=T+Math.imul(Se,mr)|0,M=M+Math.imul(Se,Er)|0,M=M+Math.imul(Ie,mr)|0,F=F+Math.imul(Ie,Er)|0;var Bt=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,T=Math.imul(ae,Rn),M=Math.imul(ae,Zn),M=M+Math.imul(fe,Rn)|0,F=Math.imul(fe,Zn),T=T+Math.imul(ce,mr)|0,M=M+Math.imul(ce,Er)|0,M=M+Math.imul(pe,mr)|0,F=F+Math.imul(pe,Er)|0,T=T+Math.imul(Se,gr)|0,M=M+Math.imul(Se,Vi)|0,M=M+Math.imul(Ie,gr)|0,F=F+Math.imul(Ie,Vi)|0;var en=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(en>>>26)|0,en&=67108863,T=Math.imul(be,Rn),M=Math.imul(be,Zn),M=M+Math.imul(Ae,Rn)|0,F=Math.imul(Ae,Zn),T=T+Math.imul(ae,mr)|0,M=M+Math.imul(ae,Er)|0,M=M+Math.imul(fe,mr)|0,F=F+Math.imul(fe,Er)|0,T=T+Math.imul(ce,gr)|0,M=M+Math.imul(ce,Vi)|0,M=M+Math.imul(pe,gr)|0,F=F+Math.imul(pe,Vi)|0,T=T+Math.imul(Se,ji)|0,M=M+Math.imul(Se,nr)|0,M=M+Math.imul(Ie,ji)|0,F=F+Math.imul(Ie,nr)|0;var We=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(We>>>26)|0,We&=67108863,T=Math.imul(we,Rn),M=Math.imul(we,Zn),M=M+Math.imul(ve,Rn)|0,F=Math.imul(ve,Zn),T=T+Math.imul(be,mr)|0,M=M+Math.imul(be,Er)|0,M=M+Math.imul(Ae,mr)|0,F=F+Math.imul(Ae,Er)|0,T=T+Math.imul(ae,gr)|0,M=M+Math.imul(ae,Vi)|0,M=M+Math.imul(fe,gr)|0,F=F+Math.imul(fe,Vi)|0,T=T+Math.imul(ce,ji)|0,M=M+Math.imul(ce,nr)|0,M=M+Math.imul(pe,ji)|0,F=F+Math.imul(pe,nr)|0,T=T+Math.imul(Se,yr)|0,M=M+Math.imul(Se,Lr)|0,M=M+Math.imul(Ie,yr)|0,F=F+Math.imul(Ie,Lr)|0;var et=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(et>>>26)|0,et&=67108863,T=Math.imul(Te,Rn),M=Math.imul(Te,Zn),M=M+Math.imul(ke,Rn)|0,F=Math.imul(ke,Zn),T=T+Math.imul(we,mr)|0,M=M+Math.imul(we,Er)|0,M=M+Math.imul(ve,mr)|0,F=F+Math.imul(ve,Er)|0,T=T+Math.imul(be,gr)|0,M=M+Math.imul(be,Vi)|0,M=M+Math.imul(Ae,gr)|0,F=F+Math.imul(Ae,Vi)|0,T=T+Math.imul(ae,ji)|0,M=M+Math.imul(ae,nr)|0,M=M+Math.imul(fe,ji)|0,F=F+Math.imul(fe,nr)|0,T=T+Math.imul(ce,yr)|0,M=M+Math.imul(ce,Lr)|0,M=M+Math.imul(pe,yr)|0,F=F+Math.imul(pe,Lr)|0,T=T+Math.imul(Se,Qn)|0,M=M+Math.imul(Se,er)|0,M=M+Math.imul(Ie,Qn)|0,F=F+Math.imul(Ie,er)|0;var pt=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(pt>>>26)|0,pt&=67108863,T=Math.imul(W,Rn),M=Math.imul(W,Zn),M=M+Math.imul(ie,Rn)|0,F=Math.imul(ie,Zn),T=T+Math.imul(Te,mr)|0,M=M+Math.imul(Te,Er)|0,M=M+Math.imul(ke,mr)|0,F=F+Math.imul(ke,Er)|0,T=T+Math.imul(we,gr)|0,M=M+Math.imul(we,Vi)|0,M=M+Math.imul(ve,gr)|0,F=F+Math.imul(ve,Vi)|0,T=T+Math.imul(be,ji)|0,M=M+Math.imul(be,nr)|0,M=M+Math.imul(Ae,ji)|0,F=F+Math.imul(Ae,nr)|0,T=T+Math.imul(ae,yr)|0,M=M+Math.imul(ae,Lr)|0,M=M+Math.imul(fe,yr)|0,F=F+Math.imul(fe,Lr)|0,T=T+Math.imul(ce,Qn)|0,M=M+Math.imul(ce,er)|0,M=M+Math.imul(pe,Qn)|0,F=F+Math.imul(pe,er)|0,T=T+Math.imul(Se,kr)|0,M=M+Math.imul(Se,Rr)|0,M=M+Math.imul(Ie,kr)|0,F=F+Math.imul(Ie,Rr)|0;var Ft=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,T=Math.imul(Me,Rn),M=Math.imul(Me,Zn),M=M+Math.imul(Fe,Rn)|0,F=Math.imul(Fe,Zn),T=T+Math.imul(W,mr)|0,M=M+Math.imul(W,Er)|0,M=M+Math.imul(ie,mr)|0,F=F+Math.imul(ie,Er)|0,T=T+Math.imul(Te,gr)|0,M=M+Math.imul(Te,Vi)|0,M=M+Math.imul(ke,gr)|0,F=F+Math.imul(ke,Vi)|0,T=T+Math.imul(we,ji)|0,M=M+Math.imul(we,nr)|0,M=M+Math.imul(ve,ji)|0,F=F+Math.imul(ve,nr)|0,T=T+Math.imul(be,yr)|0,M=M+Math.imul(be,Lr)|0,M=M+Math.imul(Ae,yr)|0,F=F+Math.imul(Ae,Lr)|0,T=T+Math.imul(ae,Qn)|0,M=M+Math.imul(ae,er)|0,M=M+Math.imul(fe,Qn)|0,F=F+Math.imul(fe,er)|0,T=T+Math.imul(ce,kr)|0,M=M+Math.imul(ce,Rr)|0,M=M+Math.imul(pe,kr)|0,F=F+Math.imul(pe,Rr)|0,T=T+Math.imul(Se,ne)|0,M=M+Math.imul(Se,de)|0,M=M+Math.imul(Ie,ne)|0,F=F+Math.imul(Ie,de)|0;var St=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(St>>>26)|0,St&=67108863,T=Math.imul(gt,Rn),M=Math.imul(gt,Zn),M=M+Math.imul(Ut,Rn)|0,F=Math.imul(Ut,Zn),T=T+Math.imul(Me,mr)|0,M=M+Math.imul(Me,Er)|0,M=M+Math.imul(Fe,mr)|0,F=F+Math.imul(Fe,Er)|0,T=T+Math.imul(W,gr)|0,M=M+Math.imul(W,Vi)|0,M=M+Math.imul(ie,gr)|0,F=F+Math.imul(ie,Vi)|0,T=T+Math.imul(Te,ji)|0,M=M+Math.imul(Te,nr)|0,M=M+Math.imul(ke,ji)|0,F=F+Math.imul(ke,nr)|0,T=T+Math.imul(we,yr)|0,M=M+Math.imul(we,Lr)|0,M=M+Math.imul(ve,yr)|0,F=F+Math.imul(ve,Lr)|0,T=T+Math.imul(be,Qn)|0,M=M+Math.imul(be,er)|0,M=M+Math.imul(Ae,Qn)|0,F=F+Math.imul(Ae,er)|0,T=T+Math.imul(ae,kr)|0,M=M+Math.imul(ae,Rr)|0,M=M+Math.imul(fe,kr)|0,F=F+Math.imul(fe,Rr)|0,T=T+Math.imul(ce,ne)|0,M=M+Math.imul(ce,de)|0,M=M+Math.imul(pe,ne)|0,F=F+Math.imul(pe,de)|0,T=T+Math.imul(Se,H)|0,M=M+Math.imul(Se,Y)|0,M=M+Math.imul(Ie,H)|0,F=F+Math.imul(Ie,Y)|0;var xn=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(xn>>>26)|0,xn&=67108863,T=Math.imul(jt,Rn),M=Math.imul(jt,Zn),M=M+Math.imul(Ht,Rn)|0,F=Math.imul(Ht,Zn),T=T+Math.imul(gt,mr)|0,M=M+Math.imul(gt,Er)|0,M=M+Math.imul(Ut,mr)|0,F=F+Math.imul(Ut,Er)|0,T=T+Math.imul(Me,gr)|0,M=M+Math.imul(Me,Vi)|0,M=M+Math.imul(Fe,gr)|0,F=F+Math.imul(Fe,Vi)|0,T=T+Math.imul(W,ji)|0,M=M+Math.imul(W,nr)|0,M=M+Math.imul(ie,ji)|0,F=F+Math.imul(ie,nr)|0,T=T+Math.imul(Te,yr)|0,M=M+Math.imul(Te,Lr)|0,M=M+Math.imul(ke,yr)|0,F=F+Math.imul(ke,Lr)|0,T=T+Math.imul(we,Qn)|0,M=M+Math.imul(we,er)|0,M=M+Math.imul(ve,Qn)|0,F=F+Math.imul(ve,er)|0,T=T+Math.imul(be,kr)|0,M=M+Math.imul(be,Rr)|0,M=M+Math.imul(Ae,kr)|0,F=F+Math.imul(Ae,Rr)|0,T=T+Math.imul(ae,ne)|0,M=M+Math.imul(ae,de)|0,M=M+Math.imul(fe,ne)|0,F=F+Math.imul(fe,de)|0,T=T+Math.imul(ce,H)|0,M=M+Math.imul(ce,Y)|0,M=M+Math.imul(pe,H)|0,F=F+Math.imul(pe,Y)|0,T=T+Math.imul(Se,qe)|0,M=M+Math.imul(Se,ot)|0,M=M+Math.imul(Ie,qe)|0,F=F+Math.imul(Ie,ot)|0;var An=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(An>>>26)|0,An&=67108863,T=Math.imul(jt,mr),M=Math.imul(jt,Er),M=M+Math.imul(Ht,mr)|0,F=Math.imul(Ht,Er),T=T+Math.imul(gt,gr)|0,M=M+Math.imul(gt,Vi)|0,M=M+Math.imul(Ut,gr)|0,F=F+Math.imul(Ut,Vi)|0,T=T+Math.imul(Me,ji)|0,M=M+Math.imul(Me,nr)|0,M=M+Math.imul(Fe,ji)|0,F=F+Math.imul(Fe,nr)|0,T=T+Math.imul(W,yr)|0,M=M+Math.imul(W,Lr)|0,M=M+Math.imul(ie,yr)|0,F=F+Math.imul(ie,Lr)|0,T=T+Math.imul(Te,Qn)|0,M=M+Math.imul(Te,er)|0,M=M+Math.imul(ke,Qn)|0,F=F+Math.imul(ke,er)|0,T=T+Math.imul(we,kr)|0,M=M+Math.imul(we,Rr)|0,M=M+Math.imul(ve,kr)|0,F=F+Math.imul(ve,Rr)|0,T=T+Math.imul(be,ne)|0,M=M+Math.imul(be,de)|0,M=M+Math.imul(Ae,ne)|0,F=F+Math.imul(Ae,de)|0,T=T+Math.imul(ae,H)|0,M=M+Math.imul(ae,Y)|0,M=M+Math.imul(fe,H)|0,F=F+Math.imul(fe,Y)|0,T=T+Math.imul(ce,qe)|0,M=M+Math.imul(ce,ot)|0,M=M+Math.imul(pe,qe)|0,F=F+Math.imul(pe,ot)|0;var mn=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(mn>>>26)|0,mn&=67108863,T=Math.imul(jt,gr),M=Math.imul(jt,Vi),M=M+Math.imul(Ht,gr)|0,F=Math.imul(Ht,Vi),T=T+Math.imul(gt,ji)|0,M=M+Math.imul(gt,nr)|0,M=M+Math.imul(Ut,ji)|0,F=F+Math.imul(Ut,nr)|0,T=T+Math.imul(Me,yr)|0,M=M+Math.imul(Me,Lr)|0,M=M+Math.imul(Fe,yr)|0,F=F+Math.imul(Fe,Lr)|0,T=T+Math.imul(W,Qn)|0,M=M+Math.imul(W,er)|0,M=M+Math.imul(ie,Qn)|0,F=F+Math.imul(ie,er)|0,T=T+Math.imul(Te,kr)|0,M=M+Math.imul(Te,Rr)|0,M=M+Math.imul(ke,kr)|0,F=F+Math.imul(ke,Rr)|0,T=T+Math.imul(we,ne)|0,M=M+Math.imul(we,de)|0,M=M+Math.imul(ve,ne)|0,F=F+Math.imul(ve,de)|0,T=T+Math.imul(be,H)|0,M=M+Math.imul(be,Y)|0,M=M+Math.imul(Ae,H)|0,F=F+Math.imul(Ae,Y)|0,T=T+Math.imul(ae,qe)|0,M=M+Math.imul(ae,ot)|0,M=M+Math.imul(fe,qe)|0,F=F+Math.imul(fe,ot)|0;var wt=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(wt>>>26)|0,wt&=67108863,T=Math.imul(jt,ji),M=Math.imul(jt,nr),M=M+Math.imul(Ht,ji)|0,F=Math.imul(Ht,nr),T=T+Math.imul(gt,yr)|0,M=M+Math.imul(gt,Lr)|0,M=M+Math.imul(Ut,yr)|0,F=F+Math.imul(Ut,Lr)|0,T=T+Math.imul(Me,Qn)|0,M=M+Math.imul(Me,er)|0,M=M+Math.imul(Fe,Qn)|0,F=F+Math.imul(Fe,er)|0,T=T+Math.imul(W,kr)|0,M=M+Math.imul(W,Rr)|0,M=M+Math.imul(ie,kr)|0,F=F+Math.imul(ie,Rr)|0,T=T+Math.imul(Te,ne)|0,M=M+Math.imul(Te,de)|0,M=M+Math.imul(ke,ne)|0,F=F+Math.imul(ke,de)|0,T=T+Math.imul(we,H)|0,M=M+Math.imul(we,Y)|0,M=M+Math.imul(ve,H)|0,F=F+Math.imul(ve,Y)|0,T=T+Math.imul(be,qe)|0,M=M+Math.imul(be,ot)|0,M=M+Math.imul(Ae,qe)|0,F=F+Math.imul(Ae,ot)|0;var Mt=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,T=Math.imul(jt,yr),M=Math.imul(jt,Lr),M=M+Math.imul(Ht,yr)|0,F=Math.imul(Ht,Lr),T=T+Math.imul(gt,Qn)|0,M=M+Math.imul(gt,er)|0,M=M+Math.imul(Ut,Qn)|0,F=F+Math.imul(Ut,er)|0,T=T+Math.imul(Me,kr)|0,M=M+Math.imul(Me,Rr)|0,M=M+Math.imul(Fe,kr)|0,F=F+Math.imul(Fe,Rr)|0,T=T+Math.imul(W,ne)|0,M=M+Math.imul(W,de)|0,M=M+Math.imul(ie,ne)|0,F=F+Math.imul(ie,de)|0,T=T+Math.imul(Te,H)|0,M=M+Math.imul(Te,Y)|0,M=M+Math.imul(ke,H)|0,F=F+Math.imul(ke,Y)|0,T=T+Math.imul(we,qe)|0,M=M+Math.imul(we,ot)|0,M=M+Math.imul(ve,qe)|0,F=F+Math.imul(ve,ot)|0;var Ct=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,T=Math.imul(jt,Qn),M=Math.imul(jt,er),M=M+Math.imul(Ht,Qn)|0,F=Math.imul(Ht,er),T=T+Math.imul(gt,kr)|0,M=M+Math.imul(gt,Rr)|0,M=M+Math.imul(Ut,kr)|0,F=F+Math.imul(Ut,Rr)|0,T=T+Math.imul(Me,ne)|0,M=M+Math.imul(Me,de)|0,M=M+Math.imul(Fe,ne)|0,F=F+Math.imul(Fe,de)|0,T=T+Math.imul(W,H)|0,M=M+Math.imul(W,Y)|0,M=M+Math.imul(ie,H)|0,F=F+Math.imul(ie,Y)|0,T=T+Math.imul(Te,qe)|0,M=M+Math.imul(Te,ot)|0,M=M+Math.imul(ke,qe)|0,F=F+Math.imul(ke,ot)|0;var sn=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(sn>>>26)|0,sn&=67108863,T=Math.imul(jt,kr),M=Math.imul(jt,Rr),M=M+Math.imul(Ht,kr)|0,F=Math.imul(Ht,Rr),T=T+Math.imul(gt,ne)|0,M=M+Math.imul(gt,de)|0,M=M+Math.imul(Ut,ne)|0,F=F+Math.imul(Ut,de)|0,T=T+Math.imul(Me,H)|0,M=M+Math.imul(Me,Y)|0,M=M+Math.imul(Fe,H)|0,F=F+Math.imul(Fe,Y)|0,T=T+Math.imul(W,qe)|0,M=M+Math.imul(W,ot)|0,M=M+Math.imul(ie,qe)|0,F=F+Math.imul(ie,ot)|0;var Tt=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,T=Math.imul(jt,ne),M=Math.imul(jt,de),M=M+Math.imul(Ht,ne)|0,F=Math.imul(Ht,de),T=T+Math.imul(gt,H)|0,M=M+Math.imul(gt,Y)|0,M=M+Math.imul(Ut,H)|0,F=F+Math.imul(Ut,Y)|0,T=T+Math.imul(Me,qe)|0,M=M+Math.imul(Me,ot)|0,M=M+Math.imul(Fe,qe)|0,F=F+Math.imul(Fe,ot)|0;var ze=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(ze>>>26)|0,ze&=67108863,T=Math.imul(jt,H),M=Math.imul(jt,Y),M=M+Math.imul(Ht,H)|0,F=Math.imul(Ht,Y),T=T+Math.imul(gt,qe)|0,M=M+Math.imul(gt,ot)|0,M=M+Math.imul(Ut,qe)|0,F=F+Math.imul(Ut,ot)|0;var Ke=(se+T|0)+((8191&M)<<13)|0;se=(F+(M>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,T=Math.imul(jt,qe),M=Math.imul(jt,ot),M=M+Math.imul(Ht,qe)|0,F=Math.imul(Ht,ot);var at=(se+T|0)+((8191&M)<<13)|0;return se=(F+(M>>>13)|0)+(at>>>26)|0,at&=67108863,te[0]=ft,te[1]=Bt,te[2]=en,te[3]=We,te[4]=et,te[5]=pt,te[6]=Ft,te[7]=St,te[8]=xn,te[9]=An,te[10]=mn,te[11]=wt,te[12]=Mt,te[13]=Ct,te[14]=sn,te[15]=Tt,te[16]=ze,te[17]=Ke,te[18]=at,se!==0&&(te[19]=se,I.length++),I};Math.imul||(Z=h),l.prototype.mulTo=function(C,A){var I,T=this.length+C.length;return I=this.length===10&&C.length===10?Z(this,C,A):T<63?h(this,C,A):T<1024?f(this,C,A):p(this,C,A)},y.prototype.makeRBT=function(C){for(var A=new Array(C),I=l.prototype._countBits(C)-1,T=0;T<C;T++)A[T]=this.revBin(T,I,C);return A},y.prototype.revBin=function(C,A,I){if(C===0||C===I-1)return C;for(var T=0,M=0;M<A;M++)T|=(1&C)<<A-M-1,C>>=1;return T},y.prototype.permute=function(C,A,I,T,M,F){for(var q=0;q<F;q++)T[q]=A[C[q]],M[q]=I[C[q]]},y.prototype.transform=function(C,A,I,T,M,F){this.permute(F,C,A,I,T,M);for(var q=1;q<M;q<<=1)for(var $=q<<1,te=Math.cos(2*Math.PI/$),se=Math.sin(2*Math.PI/$),ue=0;ue<M;ue+=$)for(var Se=te,Ie=se,Be=0;Be<q;Be++){var ce=I[ue+Be],pe=T[ue+Be],re=I[ue+Be+q],ae=T[ue+Be+q],fe=Se*re-Ie*ae;ae=Se*ae+Ie*re,re=fe,I[ue+Be]=ce+re,T[ue+Be]=pe+ae,I[ue+Be+q]=ce-re,T[ue+Be+q]=pe-ae,Be!==$&&(fe=te*Se-se*Ie,Ie=te*Ie+se*Se,Se=fe)}},y.prototype.guessLen13b=function(C,A){var I=1|Math.max(A,C),T=1&I,M=0;for(I=I/2|0;I;I>>>=1)M++;return 1<<M+1+T},y.prototype.conjugate=function(C,A,I){if(!(I<=1))for(var T=0;T<I/2;T++){var M=C[T];C[T]=C[I-T-1],C[I-T-1]=M,M=A[T],A[T]=-A[I-T-1],A[I-T-1]=-M}},y.prototype.normalize13b=function(C,A){for(var I=0,T=0;T<A/2;T++){var M=8192*Math.round(C[2*T+1]/A)+Math.round(C[2*T]/A)+I;C[T]=67108863&M,I=M<67108864?0:M/67108864|0}return C},y.prototype.convert13b=function(C,A,I,T){for(var M=0,F=0;F<A;F++)M+=0|C[F],I[2*F]=8191&M,M>>>=13,I[2*F+1]=8191&M,M>>>=13;for(F=2*A;F<T;++F)I[F]=0;s(M===0),s((M&-8192)===0)},y.prototype.stub=function(C){for(var A=new Array(C),I=0;I<C;I++)A[I]=0;return A},y.prototype.mulp=function(C,A,I){var T=2*this.guessLen13b(C.length,A.length),M=this.makeRBT(T),F=this.stub(T),q=new Array(T),$=new Array(T),te=new Array(T),se=new Array(T),ue=new Array(T),Se=new Array(T),Ie=I.words;Ie.length=T,this.convert13b(C.words,C.length,q,T),this.convert13b(A.words,A.length,se,T),this.transform(q,F,$,te,T,M),this.transform(se,F,ue,Se,T,M);for(var Be=0;Be<T;Be++){var ce=$[Be]*ue[Be]-te[Be]*Se[Be];te[Be]=$[Be]*Se[Be]+te[Be]*ue[Be],$[Be]=ce}return this.conjugate($,te,T),this.transform($,te,Ie,F,T,M),this.conjugate(Ie,F,T),this.normalize13b(Ie,T),I.negative=C.negative^A.negative,I.length=C.length+A.length,I.strip()},l.prototype.mul=function(C){var A=new l(null);return A.words=new Array(this.length+C.length),this.mulTo(C,A)},l.prototype.mulf=function(C){var A=new l(null);return A.words=new Array(this.length+C.length),p(this,C,A)},l.prototype.imul=function(C){return this.clone().mulTo(C,this)},l.prototype.imuln=function(C){s(typeof C=="number"),s(C<67108864);for(var A=0,I=0;I<this.length;I++){var T=(0|this.words[I])*C,M=(67108863&T)+(67108863&A);A>>=26,A+=T/67108864|0,A+=M>>>26,this.words[I]=67108863&M}return A!==0&&(this.words[I]=A,this.length++),this},l.prototype.muln=function(C){return this.clone().imuln(C)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(C){var A=u(C);if(A.length===0)return new l(1);for(var I=this,T=0;T<A.length&&A[T]===0;T++,I=I.sqr());if(++T<A.length)for(var M=I.sqr();T<A.length;T++,M=M.sqr())A[T]!==0&&(I=I.mul(M));return I},l.prototype.iushln=function(C){s(typeof C=="number"&&C>=0);var A,I=C%26,T=(C-I)/26,M=67108863>>>26-I<<26-I;if(I!==0){var F=0;for(A=0;A<this.length;A++){var q=this.words[A]&M,$=(0|this.words[A])-q<<I;this.words[A]=$|F,F=q>>>26-I}F&&(this.words[A]=F,this.length++)}if(T!==0){for(A=this.length-1;A>=0;A--)this.words[A+T]=this.words[A];for(A=0;A<T;A++)this.words[A]=0;this.length+=T}return this.strip()},l.prototype.ishln=function(C){return s(this.negative===0),this.iushln(C)},l.prototype.iushrn=function(C,A,I){s(typeof C=="number"&&C>=0);var T;T=A?(A-A%26)/26:0;var M=C%26,F=Math.min((C-M)/26,this.length),q=67108863^67108863>>>M<<M,$=I;if(T-=F,T=Math.max(0,T),$){for(var te=0;te<F;te++)$.words[te]=this.words[te];$.length=F}if(F!==0)if(this.length>F)for(this.length-=F,te=0;te<this.length;te++)this.words[te]=this.words[te+F];else this.words[0]=0,this.length=1;var se=0;for(te=this.length-1;te>=0&&(se!==0||te>=T);te--){var ue=0|this.words[te];this.words[te]=se<<26-M|ue>>>M,se=ue&q}return $&&se!==0&&($.words[$.length++]=se),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(C,A,I){return s(this.negative===0),this.iushrn(C,A,I)},l.prototype.shln=function(C){return this.clone().ishln(C)},l.prototype.ushln=function(C){return this.clone().iushln(C)},l.prototype.shrn=function(C){return this.clone().ishrn(C)},l.prototype.ushrn=function(C){return this.clone().iushrn(C)},l.prototype.testn=function(C){s(typeof C=="number"&&C>=0);var A=C%26,I=(C-A)/26,T=1<<A;if(this.length<=I)return!1;var M=this.words[I];return!!(M&T)},l.prototype.imaskn=function(C){s(typeof C=="number"&&C>=0);var A=C%26,I=(C-A)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=I)return this;if(A!==0&&I++,this.length=Math.min(I,this.length),A!==0){var T=67108863^67108863>>>A<<A;this.words[this.length-1]&=T}return this.strip()},l.prototype.maskn=function(C){return this.clone().imaskn(C)},l.prototype.iaddn=function(C){return s(typeof C=="number"),s(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(0|this.words[0])<C?(this.words[0]=C-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},l.prototype._iaddn=function(C){this.words[0]+=C;for(var A=0;A<this.length&&this.words[A]>=67108864;A++)this.words[A]-=67108864,A===this.length-1?this.words[A+1]=1:this.words[A+1]++;return this.length=Math.max(this.length,A+1),this},l.prototype.isubn=function(C){if(s(typeof C=="number"),s(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var A=0;A<this.length&&this.words[A]<0;A++)this.words[A]+=67108864,this.words[A+1]-=1;return this.strip()},l.prototype.addn=function(C){return this.clone().iaddn(C)},l.prototype.subn=function(C){return this.clone().isubn(C)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(C,A,I){var T,M=C.length+I;this._expand(M);var F,q=0;for(T=0;T<C.length;T++){F=(0|this.words[T+I])+q;var $=(0|C.words[T])*A;F-=67108863&$,q=(F>>26)-($/67108864|0),this.words[T+I]=67108863&F}for(;T<this.length-I;T++)F=(0|this.words[T+I])+q,q=F>>26,this.words[T+I]=67108863&F;if(q===0)return this.strip();for(s(q===-1),q=0,T=0;T<this.length;T++)F=-(0|this.words[T])+q,q=F>>26,this.words[T]=67108863&F;return this.negative=1,this.strip()},l.prototype._wordDiv=function(C,A){var I=this.length-C.length,T=this.clone(),M=C,F=0|M.words[M.length-1],q=this._countBits(F);I=26-q,I!==0&&(M=M.ushln(I),T.iushln(I),F=0|M.words[M.length-1]);var $,te=T.length-M.length;if(A!=="mod"){$=new l(null),$.length=te+1,$.words=new Array($.length);for(var se=0;se<$.length;se++)$.words[se]=0}var ue=T.clone()._ishlnsubmul(M,1,te);ue.negative===0&&(T=ue,$&&($.words[te]=1));for(var Se=te-1;Se>=0;Se--){var Ie=67108864*(0|T.words[M.length+Se])+(0|T.words[M.length+Se-1]);for(Ie=Math.min(Ie/F|0,67108863),T._ishlnsubmul(M,Ie,Se);T.negative!==0;)Ie--,T.negative=0,T._ishlnsubmul(M,1,Se),T.isZero()||(T.negative^=1);$&&($.words[Se]=Ie)}return $&&$.strip(),T.strip(),A!=="div"&&I!==0&&T.iushrn(I),{div:$||null,mod:T}},l.prototype.divmod=function(C,A,I){if(s(!C.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var T,M,F;return this.negative!==0&&C.negative===0?(F=this.neg().divmod(C,A),A!=="mod"&&(T=F.div.neg()),A!=="div"&&(M=F.mod.neg(),I&&M.negative!==0&&M.iadd(C)),{div:T,mod:M}):this.negative===0&&C.negative!==0?(F=this.divmod(C.neg(),A),A!=="mod"&&(T=F.div.neg()),{div:T,mod:F.mod}):(this.negative&C.negative)!==0?(F=this.neg().divmod(C.neg(),A),A!=="div"&&(M=F.mod.neg(),I&&M.negative!==0&&M.isub(C)),{div:F.div,mod:M}):C.length>this.length||this.cmp(C)<0?{div:new l(0),mod:this}:C.length===1?A==="div"?{div:this.divn(C.words[0]),mod:null}:A==="mod"?{div:null,mod:new l(this.modn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new l(this.modn(C.words[0]))}:this._wordDiv(C,A)},l.prototype.div=function(C){return this.divmod(C,"div",!1).div},l.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},l.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},l.prototype.divRound=function(C){var A=this.divmod(C);if(A.mod.isZero())return A.div;var I=A.div.negative!==0?A.mod.isub(C):A.mod,T=C.ushrn(1),M=C.andln(1),F=I.cmp(T);return F<0||M===1&&F===0?A.div:A.div.negative!==0?A.div.isubn(1):A.div.iaddn(1)},l.prototype.modn=function(C){s(C<=67108863);for(var A=(1<<26)%C,I=0,T=this.length-1;T>=0;T--)I=(A*I+(0|this.words[T]))%C;return I},l.prototype.idivn=function(C){s(C<=67108863);for(var A=0,I=this.length-1;I>=0;I--){var T=(0|this.words[I])+67108864*A;this.words[I]=T/C|0,A=T%C}return this.strip()},l.prototype.divn=function(C){return this.clone().idivn(C)},l.prototype.egcd=function(C){s(C.negative===0),s(!C.isZero());var A=this,I=C.clone();A=A.negative!==0?A.umod(C):A.clone();for(var T=new l(1),M=new l(0),F=new l(0),q=new l(1),$=0;A.isEven()&&I.isEven();)A.iushrn(1),I.iushrn(1),++$;for(var te=I.clone(),se=A.clone();!A.isZero();){for(var ue=0,Se=1;(A.words[0]&Se)===0&&ue<26;++ue,Se<<=1);if(ue>0)for(A.iushrn(ue);ue-- >0;)(T.isOdd()||M.isOdd())&&(T.iadd(te),M.isub(se)),T.iushrn(1),M.iushrn(1);for(var Ie=0,Be=1;(I.words[0]&Be)===0&&Ie<26;++Ie,Be<<=1);if(Ie>0)for(I.iushrn(Ie);Ie-- >0;)(F.isOdd()||q.isOdd())&&(F.iadd(te),q.isub(se)),F.iushrn(1),q.iushrn(1);A.cmp(I)>=0?(A.isub(I),T.isub(F),M.isub(q)):(I.isub(A),F.isub(T),q.isub(M))}return{a:F,b:q,gcd:I.iushln($)}},l.prototype._invmp=function(C){s(C.negative===0),s(!C.isZero());var A=this,I=C.clone();A=A.negative!==0?A.umod(C):A.clone();for(var T=new l(1),M=new l(0),F=I.clone();A.cmpn(1)>0&&I.cmpn(1)>0;){for(var q=0,$=1;(A.words[0]&$)===0&&q<26;++q,$<<=1);if(q>0)for(A.iushrn(q);q-- >0;)T.isOdd()&&T.iadd(F),T.iushrn(1);for(var te=0,se=1;(I.words[0]&se)===0&&te<26;++te,se<<=1);if(te>0)for(I.iushrn(te);te-- >0;)M.isOdd()&&M.iadd(F),M.iushrn(1);A.cmp(I)>=0?(A.isub(I),T.isub(M)):(I.isub(A),M.isub(T))}var ue;return ue=A.cmpn(1)===0?T:M,ue.cmpn(0)<0&&ue.iadd(C),ue},l.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var A=this.clone(),I=C.clone();A.negative=0,I.negative=0;for(var T=0;A.isEven()&&I.isEven();T++)A.iushrn(1),I.iushrn(1);for(;;){for(;A.isEven();)A.iushrn(1);for(;I.isEven();)I.iushrn(1);var M=A.cmp(I);if(M<0){var F=A;A=I,I=F}else if(M===0||I.cmpn(1)===0)break;A.isub(I)}return I.iushln(T)},l.prototype.invm=function(C){return this.egcd(C).a.umod(C)},l.prototype.isEven=function(){return(1&this.words[0])===0},l.prototype.isOdd=function(){return(1&this.words[0])===1},l.prototype.andln=function(C){return this.words[0]&C},l.prototype.bincn=function(C){s(typeof C=="number");var A=C%26,I=(C-A)/26,T=1<<A;if(this.length<=I)return this._expand(I+1),this.words[I]|=T,this;for(var M=T,F=I;M!==0&&F<this.length;F++){var q=0|this.words[F];q+=M,M=q>>>26,q&=67108863,this.words[F]=q}return M!==0&&(this.words[F]=M,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(C){var A=C<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;this.strip();var I;if(this.length>1)I=1;else{A&&(C=-C),s(C<=67108863,"Number is too big");var T=0|this.words[0];I=T===C?0:T<C?-1:1}return this.negative!==0?0|-I:I},l.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var A=this.ucmp(C);return this.negative!==0?0|-A:A},l.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var A=0,I=this.length-1;I>=0;I--){var T=0|this.words[I],M=0|C.words[I];if(T!==M){T<M?A=-1:T>M&&(A=1);break}}return A},l.prototype.gtn=function(C){return this.cmpn(C)===1},l.prototype.gt=function(C){return this.cmp(C)===1},l.prototype.gten=function(C){return this.cmpn(C)>=0},l.prototype.gte=function(C){return this.cmp(C)>=0},l.prototype.ltn=function(C){return this.cmpn(C)===-1},l.prototype.lt=function(C){return this.cmp(C)===-1},l.prototype.lten=function(C){return this.cmpn(C)<=0},l.prototype.lte=function(C){return this.cmp(C)<=0},l.prototype.eqn=function(C){return this.cmpn(C)===0},l.prototype.eq=function(C){return this.cmp(C)===0},l.red=function(C){return new L(C)},l.prototype.toRed=function(C){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},l.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(C){return this.red=C,this},l.prototype.forceRed=function(C){return s(!this.red,"Already a number in reduction context"),this._forceRed(C)},l.prototype.redAdd=function(C){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},l.prototype.redIAdd=function(C){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},l.prototype.redSub=function(C){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},l.prototype.redISub=function(C){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},l.prototype.redShl=function(C){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},l.prototype.redMul=function(C){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},l.prototype.redIMul=function(C){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},l.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(C){return s(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var K={k256:null,p224:null,p192:null,p25519:null};v.prototype._tmp=function(){var C=new l(null);return C.words=new Array(Math.ceil(this.n/13)),C},v.prototype.ireduce=function(C){var A,I=C;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),A=I.bitLength();while(A>this.n);var T=A<this.n?-1:I.ucmp(this.p);return T===0?(I.words[0]=0,I.length=1):T>0?I.isub(this.p):I.strip(),I},v.prototype.split=function(C,A){C.iushrn(this.n,0,A)},v.prototype.imulK=function(C){return C.imul(this.k)},a(b,v),b.prototype.split=function(C,A){for(var I=4194303,T=Math.min(C.length,9),M=0;M<T;M++)A.words[M]=C.words[M];if(A.length=T,C.length<=9)return C.words[0]=0,void(C.length=1);var F=C.words[9];for(A.words[A.length++]=F&I,M=10;M<C.length;M++){var q=0|C.words[M];C.words[M-10]=(q&I)<<4|F>>>22,F=q}F>>>=22,C.words[M-10]=F,F===0&&C.length>10?C.length-=10:C.length-=9},b.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var A=0,I=0;I<C.length;I++){var T=0|C.words[I];A+=977*T,C.words[I]=67108863&A,A=64*T+(A/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C},a(S,v),a(x,v),a(k,v),k.prototype.imulK=function(C){for(var A=0,I=0;I<C.length;I++){var T=19*(0|C.words[I])+A,M=67108863&T;T>>>=26,C.words[I]=M,A=T}return A!==0&&(C.words[C.length++]=A),C},l._prime=function(A){if(K[A])return K[A];var I;if(A==="k256")I=new b;else if(A==="p224")I=new S;else if(A==="p192")I=new x;else{if(A!=="p25519")throw new Error("Unknown prime "+A);I=new k}return K[A]=I,I},L.prototype._verify1=function(C){s(C.negative===0,"red works only with positives"),s(C.red,"red works only with red numbers")},L.prototype._verify2=function(C,A){s((C.negative|A.negative)===0,"red works only with positives"),s(C.red&&C.red===A.red,"red works only with red numbers")},L.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):C.umod(this.m)._forceRed(this)},L.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},L.prototype.add=function(C,A){this._verify2(C,A);var I=C.add(A);return I.cmp(this.m)>=0&&I.isub(this.m),I._forceRed(this)},L.prototype.iadd=function(C,A){this._verify2(C,A);var I=C.iadd(A);return I.cmp(this.m)>=0&&I.isub(this.m),I},L.prototype.sub=function(C,A){this._verify2(C,A);var I=C.sub(A);return I.cmpn(0)<0&&I.iadd(this.m),I._forceRed(this)},L.prototype.isub=function(C,A){this._verify2(C,A);var I=C.isub(A);return I.cmpn(0)<0&&I.iadd(this.m),I},L.prototype.shl=function(C,A){return this._verify1(C),this.imod(C.ushln(A))},L.prototype.imul=function(C,A){return this._verify2(C,A),this.imod(C.imul(A))},L.prototype.mul=function(C,A){return this._verify2(C,A),this.imod(C.mul(A))},L.prototype.isqr=function(C){return this.imul(C,C.clone())},L.prototype.sqr=function(C){return this.mul(C,C)},L.prototype.sqrt=function(C){if(C.isZero())return C.clone();var A=this.m.andln(3);if(s(A%2===1),A===3){var I=this.m.add(new l(1)).iushrn(2);return this.pow(C,I)}for(var T=this.m.subn(1),M=0;!T.isZero()&&T.andln(1)===0;)M++,T.iushrn(1);s(!T.isZero());var F=new l(1).toRed(this),q=F.redNeg(),$=this.m.subn(1).iushrn(1),te=this.m.bitLength();for(te=new l(2*te*te).toRed(this);this.pow(te,$).cmp(q)!==0;)te.redIAdd(q);for(var se=this.pow(te,T),ue=this.pow(C,T.addn(1).iushrn(1)),Se=this.pow(C,T),Ie=M;Se.cmp(F)!==0;){for(var Be=Se,ce=0;Be.cmp(F)!==0;ce++)Be=Be.redSqr();s(ce<Ie);var pe=this.pow(se,new l(1).iushln(Ie-ce-1));ue=ue.redMul(pe),se=pe.redSqr(),Se=Se.redMul(se),Ie=ce}return ue},L.prototype.invm=function(C){var A=C._invmp(this.m);return A.negative!==0?(A.negative=0,this.imod(A).redNeg()):this.imod(A)},L.prototype.pow=function(C,A){if(A.isZero())return new l(1);if(A.cmpn(1)===0)return C.clone();var I=4,T=new Array(1<<I);T[0]=new l(1).toRed(this),T[1]=C;for(var M=2;M<T.length;M++)T[M]=this.mul(T[M-1],C);var F=T[0],q=0,$=0,te=A.bitLength()%26;for(te===0&&(te=26),M=A.length-1;M>=0;M--){for(var se=A.words[M],ue=te-1;ue>=0;ue--){var Se=se>>ue&1;F!==T[0]&&(F=this.sqr(F)),Se!==0||q!==0?(q<<=1,q|=Se,$++,($===I||M===0&&ue===0)&&(F=this.mul(F,T[q]),$=0,q=0)):$=0}te=26}return F},L.prototype.convertTo=function(C){var A=C.umod(this.m);return A===C?A.clone():A},L.prototype.convertFrom=function(C){var A=C.clone();return A.red=null,A},l.mont=function(C){return new D(C)},a(D,L),D.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},D.prototype.convertFrom=function(C){var A=this.imod(C.mul(this.rinv));return A.red=null,A},D.prototype.imul=function(C,A){if(C.isZero()||A.isZero())return C.words[0]=0,C.length=1,C;var I=C.imul(A),T=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=I.isub(T).iushrn(this.shift),F=M;return M.cmp(this.m)>=0?F=M.isub(this.m):M.cmpn(0)<0&&(F=M.iadd(this.m)),F._forceRed(this)},D.prototype.mul=function(C,A){if(C.isZero()||A.isZero())return new l(0)._forceRed(this);var I=C.mul(A),T=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=I.isub(T).iushrn(this.shift),F=M;return M.cmp(this.m)>=0?F=M.isub(this.m):M.cmpn(0)<0&&(F=M.iadd(this.m)),F._forceRed(this)},D.prototype.invm=function(C){var A=this.imod(C._invmp(this.m).mul(this.r2));return A._forceRed(this)}})(typeof i>"u"||i,this)}).call(t,e(467)(n))},function(n,t,e){var i=e(36),r=Math.min;n.exports=function(o){return o>0?r(i(o),9007199254740991):0}},function(n,t,e){var i=e(23);n.exports=function(r){return Object(i(r))}},function(n,t,e){"use strict";var i=t;i.version=e(436).version,i.utils=e(426),i.rand=e(137),i.hmacDRBG=e(424),i.curve=e(87),i.curves=e(417),i.ec=e(418),i.eddsa=e(421)},function(n,t){var e={}.hasOwnProperty;n.exports=function(i,r){return e.call(i,r)}},function(n,t){n.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(n,t,e){var i=e(9),r=e(35);n.exports=e(8)?function(o,s,a){return i.f(o,s,r(1,a))}:function(o,s,a){return o[s]=a,o}},function(n,t,e){var i=e(4),r=e(16),o=e(14),s=e(45)("src"),a="toString",l=Function[a],c=(""+l).split(a);e(29).inspectSource=function(d){return l.call(d)},(n.exports=function(d,u,h,f){var p=typeof h=="function";p&&(o(h,"name")||r(h,"name",u)),d[u]!==h&&(p&&(o(h,s)||r(h,s,d[u]?""+d[u]:c.join(String(u)))),d===i?d[u]=h:f?d[u]?d[u]=h:r(d,u,h):(delete d[u],r(d,u,h)))})(Function.prototype,a,function(){return typeof this=="function"&&this[s]||l.call(this)})},function(n,t,e){var i=e(0),r=e(5),o=e(23),s=/"/g,a=function(l,c,d,u){var h=String(o(l)),f="<"+c;return d!==""&&(f+=" "+d+'="'+String(u).replace(s,"&quot;")+'"'),f+">"+h+"</"+c+">"};n.exports=function(l,c){var d={};d[l]=c(a),i(i.P+i.F*r(function(){var u=""[l]('"');return u!==u.toLowerCase()||u.split('"').length>3}),"String",d)}},function(n,t,e){var i=e(64),r=e(23);n.exports=function(o){return i(r(o))}},function(n,t,e){var i=e(65),r=e(35),o=e(19),s=e(27),a=e(14),l=e(156),c=Object.getOwnPropertyDescriptor;t.f=e(8)?c:function(d,u){if(d=o(d),u=s(u,!0),l)try{return c(d,u)}catch{}if(a(d,u))return r(!i.f.call(d,u),d[u])}},function(n,t,e){var i=e(14),r=e(12),o=e(113)("IE_PROTO"),s=Object.prototype;n.exports=Object.getPrototypeOf||function(a){return a=r(a),i(a,o)?a[o]:typeof a.constructor=="function"&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?s:null}},function(n,t){var e={}.toString;n.exports=function(i){return e.call(i).slice(8,-1)}},function(n,t){n.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},function(n,t,e){var i=e(5);n.exports=function(r,o){return!!r&&i(function(){o?r.call(null,function(){},1):r.call(null)})}},function(n,t,e){var i=e(30),r=e(64),o=e(12),s=e(11),a=e(224);n.exports=function(l,c){var d=l==1,u=l==2,h=l==3,f=l==4,p=l==6,y=l==5||p,v=c||a;return function(b,S,x){for(var k,L,D=o(b),V=r(D),O=i(S,x,3),R=s(V.length),G=0,Z=d?v(b,R):u?v(b,0):void 0;R>G;G++)if((y||G in V)&&(k=V[G],L=O(k,G,D),l)){if(d)Z[G]=L;else if(L)switch(l){case 3:return!0;case 5:return k;case 6:return G;case 2:Z.push(k)}else if(f)return!1}return p?-1:h||f?f:Z}}},function(n,t,e){var i=e(0),r=e(29),o=e(5);n.exports=function(s,a){var l=(r.Object||{})[s]||Object[s],c={};c[s]=a(l),i(i.S+i.F*o(function(){l(1)}),"Object",c)}},function(n,t,e){var i=e(6);n.exports=function(r,o){if(!i(r))return r;var s,a;if(o&&typeof(s=r.toString)=="function"&&!i(a=s.call(r))||typeof(s=r.valueOf)=="function"&&!i(a=s.call(r))||!o&&typeof(s=r.toString)=="function"&&!i(a=s.call(r)))return a;throw TypeError("Can't convert object to primitive value")}},function(n,t){function e(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(b){if(d===setTimeout)return setTimeout(b,0);if((d===e||!d)&&setTimeout)return d=setTimeout,setTimeout(b,0);try{return d(b,0)}catch{try{return d.call(null,b,0)}catch{return d.call(this,b,0)}}}function o(b){if(u===clearTimeout)return clearTimeout(b);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(b);try{return u(b)}catch{try{return u.call(null,b)}catch{return u.call(this,b)}}}function s(){y&&f&&(y=!1,f.length?p=f.concat(p):v=-1,p.length&&a())}function a(){if(!y){var b=r(s);y=!0;for(var S=p.length;S;){for(f=p,p=[];++v<S;)f&&f[v].run();v=-1,S=p.length}f=null,y=!1,o(b)}}function l(b,S){this.fun=b,this.array=S}function c(){}var d,u,h=n.exports={};(function(){try{d=typeof setTimeout=="function"?setTimeout:e}catch{d=e}try{u=typeof clearTimeout=="function"?clearTimeout:i}catch{u=i}})();var f,p=[],y=!1,v=-1;h.nextTick=function(b){var S=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)S[x-1]=arguments[x];p.push(new l(b,S)),p.length!==1||y||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(b){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(b){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(n,t){var e=n.exports={version:"2.4.0"};typeof __e=="number"&&(__e=e)},function(n,t,e){var i=e(15);n.exports=function(r,o,s){if(i(r),o===void 0)return r;switch(s){case 1:return function(a){return r.call(o,a)};case 2:return function(a,l){return r.call(o,a,l)};case 3:return function(a,l,c){return r.call(o,a,l,c)}}return function(){return r.apply(o,arguments)}}},function(n,t,e){var i=e(172),r=e(0),o=e(84)("metadata"),s=o.store||(o.store=new(e(175))),a=function(p,y,v){var b=s.get(p);if(!b){if(!v)return;s.set(p,b=new i)}var S=b.get(y);if(!S){if(!v)return;b.set(y,S=new i)}return S},l=function(p,y,v){var b=a(y,v,!1);return b!==void 0&&b.has(p)},c=function(p,y,v){var b=a(y,v,!1);return b===void 0?void 0:b.get(p)},d=function(p,y,v,b){a(v,b,!0).set(p,y)},u=function(p,y){var v=a(p,y,!1),b=[];return v&&v.forEach(function(S,x){b.push(x)}),b},h=function(p){return p===void 0||typeof p=="symbol"?p:String(p)},f=function(p){r(r.S,"Reflect",p)};n.exports={store:s,map:a,has:l,get:c,set:d,keys:u,key:h,exp:f}},function(n,t,e){"use strict";if(e(8)){var i=e(38),r=e(4),o=e(5),s=e(0),a=e(85),l=e(120),c=e(30),d=e(37),u=e(35),h=e(16),f=e(42),p=e(36),y=e(11),v=e(44),b=e(27),S=e(14),x=e(169),k=e(63),L=e(6),D=e(12),V=e(105),O=e(39),R=e(21),G=e(40).f,Z=e(122),K=e(45),C=e(7),A=e(25),I=e(75),T=e(114),M=e(123),F=e(53),q=e(81),$=e(43),te=e(98),se=e(149),ue=e(9),Se=e(20),Ie=ue.f,Be=Se.f,ce=r.RangeError,pe=r.TypeError,re=r.Uint8Array,ae="ArrayBuffer",fe="Shared"+ae,De="BYTES_PER_ELEMENT",be="prototype",Ae=Array[be],Ce=l.ArrayBuffer,we=l.DataView,ve=A(0),xe=A(2),Te=A(3),ke=A(4),B=A(5),W=A(6),ie=I(!0),ye=I(!1),Me=M.values,Fe=M.keys,tt=M.entries,gt=Ae.lastIndexOf,Ut=Ae.reduce,Cn=Ae.reduceRight,jt=Ae.join,Ht=Ae.sort,Kr=Ae.slice,Rn=Ae.toString,Zn=Ae.toLocaleString,Ji=C("iterator"),mr=C("toStringTag"),Er=K("typed_constructor"),Ma=K("def_constructor"),gr=a.CONSTR,Vi=a.TYPED,Ta=a.VIEW,ji="Wrong length!",nr=A(1,function(We,et){return er(T(We,We[Ma]),et)}),Ls=o(function(){return new re(new Uint16Array([1]).buffer)[0]===1}),yr=!!re&&!!re[be].set&&o(function(){new re(1).set({})}),Lr=function(We,et){if(We===void 0)throw pe(ji);var pt=+We,Ft=y(We);if(et&&!x(pt,Ft))throw ce(ji);return Ft},oc=function(We,et){var pt=p(We);if(pt<0||pt%et)throw ce("Wrong offset!");return pt},Qn=function(We){if(L(We)&&Vi in We)return We;throw pe(We+" is not a typed array!")},er=function(We,et){if(!(L(We)&&Er in We))throw pe("It is not a typed array constructor!");return new We(et)},Rl=function(We,et){return kr(T(We,We[Ma]),et)},kr=function(We,et){for(var pt=0,Ft=et.length,St=er(We,Ft);Ft>pt;)St[pt]=et[pt++];return St},Rr=function(We,et,pt){Ie(We,et,{get:function(){return this._d[pt]}})},qd=function(We){var et,pt,Ft,St,xn,An,mn=D(We),wt=arguments.length,Mt=wt>1?arguments[1]:void 0,Ct=Mt!==void 0,sn=Z(mn);if(sn!=null&&!V(sn)){for(An=sn.call(mn),Ft=[],et=0;!(xn=An.next()).done;et++)Ft.push(xn.value);mn=Ft}for(Ct&&wt>2&&(Mt=c(Mt,arguments[2],2)),et=0,pt=y(mn.length),St=er(this,pt);pt>et;et++)St[et]=Ct?Mt(mn[et],et):mn[et];return St},ne=function(){for(var We=0,et=arguments.length,pt=er(this,et);et>We;)pt[We]=arguments[We++];return pt},de=!!re&&o(function(){Zn.call(new re(1))}),he=function(){return Zn.apply(de?Kr.call(Qn(this)):Qn(this),arguments)},H={copyWithin:function(We,et){return se.call(Qn(this),We,et,arguments.length>2?arguments[2]:void 0)},every:function(We){return ke(Qn(this),We,arguments.length>1?arguments[1]:void 0)},fill:function(We){return te.apply(Qn(this),arguments)},filter:function(We){return Rl(this,xe(Qn(this),We,arguments.length>1?arguments[1]:void 0))},find:function(We){return B(Qn(this),We,arguments.length>1?arguments[1]:void 0)},findIndex:function(We){return W(Qn(this),We,arguments.length>1?arguments[1]:void 0)},forEach:function(We){ve(Qn(this),We,arguments.length>1?arguments[1]:void 0)},indexOf:function(We){return ye(Qn(this),We,arguments.length>1?arguments[1]:void 0)},includes:function(We){return ie(Qn(this),We,arguments.length>1?arguments[1]:void 0)},join:function(We){return jt.apply(Qn(this),arguments)},lastIndexOf:function(We){return gt.apply(Qn(this),arguments)},map:function(We){return nr(Qn(this),We,arguments.length>1?arguments[1]:void 0)},reduce:function(We){return Ut.apply(Qn(this),arguments)},reduceRight:function(We){return Cn.apply(Qn(this),arguments)},reverse:function(){for(var We,et=this,pt=Qn(et).length,Ft=Math.floor(pt/2),St=0;St<Ft;)We=et[St],et[St++]=et[--pt],et[pt]=We;return et},some:function(We){return Te(Qn(this),We,arguments.length>1?arguments[1]:void 0)},sort:function(We){return Ht.call(Qn(this),We)},subarray:function(We,et){var pt=Qn(this),Ft=pt.length,St=v(We,Ft);return new(T(pt,pt[Ma]))(pt.buffer,pt.byteOffset+St*pt.BYTES_PER_ELEMENT,y((et===void 0?Ft:v(et,Ft))-St))}},Y=function(We,et){return Rl(this,Kr.call(Qn(this),We,et))},Le=function(We){Qn(this);var et=oc(arguments[1],1),pt=this.length,Ft=D(We),St=y(Ft.length),xn=0;if(St+et>pt)throw ce(ji);for(;xn<St;)this[et+xn]=Ft[xn++]},qe={entries:function(){return tt.call(Qn(this))},keys:function(){return Fe.call(Qn(this))},values:function(){return Me.call(Qn(this))}},ot=function(We,et){return L(We)&&We[Vi]&&typeof et!="symbol"&&et in We&&String(+et)==String(et)},ft=function(We,et){return ot(We,et=b(et,!0))?u(2,We[et]):Be(We,et)},Bt=function(We,et,pt){return!(ot(We,et=b(et,!0))&&L(pt)&&S(pt,"value"))||S(pt,"get")||S(pt,"set")||pt.configurable||S(pt,"writable")&&!pt.writable||S(pt,"enumerable")&&!pt.enumerable?Ie(We,et,pt):(We[et]=pt.value,We)};gr||(Se.f=ft,ue.f=Bt),s(s.S+s.F*!gr,"Object",{getOwnPropertyDescriptor:ft,defineProperty:Bt}),o(function(){Rn.call({})})&&(Rn=Zn=function(){return jt.call(this)});var en=f({},H);f(en,qe),h(en,Ji,qe.values),f(en,{slice:Y,set:Le,constructor:function(){},toString:Rn,toLocaleString:he}),Rr(en,"buffer","b"),Rr(en,"byteOffset","o"),Rr(en,"byteLength","l"),Rr(en,"length","e"),Ie(en,mr,{get:function(){return this[Vi]}}),n.exports=function(We,et,pt,Ft){Ft=!!Ft;var St=We+(Ft?"Clamped":"")+"Array",xn=St!="Uint8Array",An="get"+We,mn="set"+We,wt=r[St],Mt=wt||{},Ct=wt&&R(wt),sn=!wt||!a.ABV,Tt={},ze=wt&&wt[be],Ke=function($t,xt){var cn=$t._d;return cn.v[An](xt*et+cn.o,Ls)},at=function($t,xt,cn){var zn=$t._d;Ft&&(cn=(cn=Math.round(cn))<0?0:cn>255?255:255&cn),zn.v[mn](xt*et+zn.o,cn,Ls)},rt=function($t,xt){Ie($t,xt,{get:function(){return Ke(this,xt)},set:function(cn){return at(this,xt,cn)},enumerable:!0})};sn?(wt=pt(function($t,xt,cn,zn){d($t,wt,St,"_d");var ui,Ot,gi,Xi,Yi=0,yi=0;if(L(xt)){if(!(xt instanceof Ce||(Xi=k(xt))==ae||Xi==fe))return Vi in xt?kr(wt,xt):qd.call(wt,xt);ui=xt,yi=oc(cn,et);var Hi=xt.byteLength;if(zn===void 0){if(Hi%et||(Ot=Hi-yi,Ot<0))throw ce(ji)}else if(Ot=y(zn)*et,Ot+yi>Hi)throw ce(ji);gi=Ot/et}else gi=Lr(xt,!0),Ot=gi*et,ui=new Ce(Ot);for(h($t,"_d",{b:ui,o:yi,l:Ot,e:gi,v:new we(ui)});Yi<gi;)rt($t,Yi++)}),ze=wt[be]=O(en),h(ze,"constructor",wt)):q(function($t){new wt(null),new wt($t)},!0)||(wt=pt(function($t,xt,cn,zn){d($t,wt,St);var ui;return L(xt)?xt instanceof Ce||(ui=k(xt))==ae||ui==fe?zn!==void 0?new Mt(xt,oc(cn,et),zn):cn!==void 0?new Mt(xt,oc(cn,et)):new Mt(xt):Vi in xt?kr(wt,xt):qd.call(wt,xt):new Mt(Lr(xt,xn))}),ve(Ct!==Function.prototype?G(Mt).concat(G(Ct)):G(Mt),function($t){$t in wt||h(wt,$t,Mt[$t])}),wt[be]=ze,i||(ze.constructor=wt));var it=ze[Ji],dt=!!it&&(it.name=="values"||it.name==null),kn=qe.values;h(wt,Er,!0),h(ze,Vi,St),h(ze,Ta,!0),h(ze,Ma,wt),(Ft?new wt(1)[mr]==St:mr in ze)||Ie(ze,mr,{get:function(){return St}}),Tt[St]=wt,s(s.G+s.W+s.F*(wt!=Mt),Tt),s(s.S,St,{BYTES_PER_ELEMENT:et,from:qd,of:ne}),De in ze||h(ze,De,et),s(s.P,St,H),$(St),s(s.P+s.F*yr,St,{set:Le}),s(s.P+s.F*!dt,St,qe),s(s.P+s.F*(ze.toString!=Rn),St,{toString:Rn}),s(s.P+s.F*o(function(){new wt(1).slice()}),St,{slice:Y}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new wt([1,2]).toLocaleString()})||!o(function(){ze.toLocaleString.call([1,2])})),St,{toLocaleString:he}),F[St]=dt?it:kn,i||dt||h(ze,Ji,kn)}}else n.exports=function(){}},function(n,t,e){var i=t;i.bignum=e(10),i.define=e(190).define,i.base=e(59),i.constants=e(131),i.decoders=e(194),i.encoders=e(196)},function(n,t,e){var i=e(45)("meta"),r=e(6),o=e(14),s=e(9).f,a=0,l=Object.isExtensible||function(){return!0},c=!e(5)(function(){return l(Object.preventExtensions({}))}),d=function(y){s(y,i,{value:{i:"O"+ ++a,w:{}}})},u=function(y,v){if(!r(y))return typeof y=="symbol"?y:(typeof y=="string"?"S":"P")+y;if(!o(y,i)){if(!l(y))return"F";if(!v)return"E";d(y)}return y[i].i},h=function(y,v){if(!o(y,i)){if(!l(y))return!0;if(!v)return!1;d(y)}return y[i].w},f=function(y){return c&&p.NEED&&l(y)&&!o(y,i)&&d(y),y},p=n.exports={KEY:i,NEED:!1,fastKey:u,getWeak:h,onFreeze:f}},function(n,t){n.exports=function(e,i){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:i}}},function(n,t){var e=Math.ceil,i=Math.floor;n.exports=function(r){return isNaN(r=+r)?0:(r>0?i:e)(r)}},function(n,t){n.exports=function(e,i,r,o){if(!(e instanceof i)||o!==void 0&&o in e)throw TypeError(r+": incorrect invocation!");return e}},function(n,t){n.exports=!1},function(n,t,e){var i=e(2),r=e(162),o=e(101),s=e(113)("IE_PROTO"),a=function(){},l="prototype",c=function(){var d,u=e(100)("iframe"),h=o.length,f="<",p=">";for(u.style.display="none",e(103).appendChild(u),u.src="javascript:",d=u.contentWindow.document,d.open(),d.write(f+"script"+p+"document.F=Object"+f+"/script"+p),d.close(),c=d.F;h--;)delete c[l][o[h]];return c()};n.exports=Object.create||function(d,u){var h;return d!==null?(a[l]=i(d),h=new a,a[l]=null,h[s]=d):h=c(),u===void 0?h:r(h,u)}},function(n,t,e){var i=e(164),r=e(101).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(o){return i(o,r)}},function(n,t,e){var i=e(164),r=e(101);n.exports=Object.keys||function(o){return i(o,r)}},function(n,t,e){var i=e(17);n.exports=function(r,o,s){for(var a in o)i(r,a,o[a],s);return r}},function(n,t,e){"use strict";var i=e(4),r=e(9),o=e(8),s=e(7)("species");n.exports=function(a){var l=i[a];o&&l&&!l[s]&&r.f(l,s,{configurable:!0,get:function(){return this}})}},function(n,t,e){var i=e(36),r=Math.max,o=Math.min;n.exports=function(s,a){return s=i(s),s<0?r(s+a,0):o(s,a)}},function(n,t){var e=0,i=Math.random();n.exports=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++e+i).toString(36))}},function(n,t,e){var i=t;i.utils=e(431),i.common=e(427),i.sha=e(430),i.ripemd=e(429),i.hmac=e(428),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},function(n,t,e){"use strict";function i(p){return this instanceof i?(c.call(this,p),d.call(this,p),p&&p.readable===!1&&(this.readable=!1),p&&p.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,p&&p.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(p)}function r(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(p){p.end()}var s=Object.keys||function(p){var y=[];for(var v in p)y.push(v);return y};n.exports=i;var a=e(126),l=e(66);l.inherits=e(3);var c=e(185),d=e(128);l.inherits(i,c);for(var u=s(d.prototype),h=0;h<u.length;h++){var f=u[h];i.prototype[f]||(i.prototype[f]=d.prototype[f])}},function(n,t){var e;e=(function(){return this})();try{e=e||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(e=window)}n.exports=e},function(n,t,e){"use strict";function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}function r(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?l:c}function o(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}var s=e(60),a=(function(l){function c(){return i(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return o(c,l),c})(s);n.exports=a},function(n,t,e){(function(i){function r(l){o.call(this),this.hashMode=typeof l=="string",this.hashMode?this[l]=this._finalOrDigest:this.final=this._finalOrDigest,this._decoder=null,this._encoding=null}var o=e(58).Transform,s=e(3),a=e(129).StringDecoder;n.exports=r,s(r,o),r.prototype.update=function(l,c,d){typeof l=="string"&&(l=new i(l,c));var u=this._update(l);return this.hashMode?this:(d&&(u=this._toString(u,d)),u)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(l,c,d){var u;try{this.hashMode?this._update(l):this.push(this._update(l))}catch(h){u=h}finally{d(u)}},r.prototype._flush=function(l){var c;try{this.push(this._final())}catch(d){c=d}finally{l(c)}},r.prototype._finalOrDigest=function(l){var c=this._final()||new i("");return l&&(c=this._toString(c,l,!0)),c},r.prototype._toString=function(l,c,d){if(this._decoder||(this._decoder=new a(c),this._encoding=c),this._encoding!==c)throw new Error("can't switch encodings");var u=this._decoder.write(l);return d&&(u+=this._decoder.end()),u}}).call(t,e(1).Buffer)},function(n,t,e){var i=e(7)("unscopables"),r=Array.prototype;r[i]==null&&e(16)(r,i,{}),n.exports=function(o){r[i][o]=!0}},function(n,u,e){var i=e(30),r=e(158),o=e(105),s=e(2),a=e(11),l=e(122),c={},d={},u=n.exports=function(h,f,p,y,v){var b,S,x,k,L=v?function(){return h}:l(h),D=i(p,y,f?2:1),V=0;if(typeof L!="function")throw TypeError(h+" is not iterable!");if(o(L)){for(b=a(h.length);b>V;V++)if(k=f?D(s(S=h[V])[0],S[1]):D(h[V]),k===c||k===d)return k}else for(x=L.call(h);!(S=x.next()).done;)if(k=r(x,D,S.value,f),k===c||k===d)return k};u.BREAK=c,u.RETURN=d},function(n,t){n.exports={}},function(n,t,e){var i=e(9).f,r=e(14),o=e(7)("toStringTag");n.exports=function(s,a,l){s&&!r(s=l?s:s.prototype,o)&&i(s,o,{configurable:!0,value:a})}},function(n,t,e){var i=e(0),r=e(23),o=e(5),s=e(118),a="["+s+"]",l="\u200B\x85",c=RegExp("^"+a+a+"*"),d=RegExp(a+a+"*$"),u=function(f,p,y){var v={},b=o(function(){return!!s[f]()||l[f]()!=l}),S=v[f]=b?p(h):s[f];y&&(v[y]=S),i(i.P+i.F*b,"String",v)},h=u.trim=function(f,p){return f=String(r(f)),1&p&&(f=f.replace(c,"")),2&p&&(f=f.replace(d,"")),f};n.exports=u},function(n,t,e){"use strict";(function(i){function r(u){d.call(this,"digest"),this._hash=u,this.buffers=[]}function o(u){d.call(this,"digest"),this._hash=u}var s=e(3),a=e(176),l=e(457),c=e(459),d=e(50);s(r,d),r.prototype._update=function(u){this.buffers.push(u)},r.prototype._final=function(){var u=i.concat(this.buffers),h=this._hash(u);return this.buffers=null,h},s(o,d),o.prototype._update=function(u){this._hash.update(u)},o.prototype._final=function(){return this._hash.digest()},n.exports=function(u){return u=u.toLowerCase(),u==="md5"?new r(a):u==="rmd160"||u==="ripemd160"?new r(l):new o(c(u))}}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(o,s){this._block=new i(o),this._finalSize=s,this._blockSize=o,this._len=0,this._s=0}r.prototype.update=function(o,s){typeof o=="string"&&(s=s||"utf8",o=new i(o,s));for(var a=this._len+=o.length,l=this._s||0,c=0,d=this._block;l<a;){for(var u=Math.min(o.length,c+this._blockSize-l%this._blockSize),h=u-c,f=0;f<h;f++)d[l%this._blockSize+f]=o[f+c];l+=h,c+=h,l%this._blockSize===0&&this._update(d)}return this._s=l,this},r.prototype.digest=function(o){var s=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),s%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(s,this._blockSize-4);var a=this._update(this._block)||this._hash();return o?a.toString(o):a},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){function i(){r.call(this)}n.exports=i;var r=e(88).EventEmitter,o=e(3);o(i,r),i.Readable=e(453),i.Writable=e(455),i.Duplex=e(450),i.Transform=e(454),i.PassThrough=e(452),i.Stream=i,i.prototype.pipe=function(s,a){function l(v){s.writable&&s.write(v)===!1&&p.pause&&p.pause()}function c(){p.readable&&p.resume&&p.resume()}function d(){y||(y=!0,s.end())}function u(){y||(y=!0,typeof s.destroy=="function"&&s.destroy())}function h(v){if(f(),r.listenerCount(this,"error")===0)throw v}function f(){p.removeListener("data",l),s.removeListener("drain",c),p.removeListener("end",d),p.removeListener("close",u),p.removeListener("error",h),s.removeListener("error",h),p.removeListener("end",f),p.removeListener("close",f),s.removeListener("close",f)}var p=this;p.on("data",l),s.on("drain",c),s._isStdio||a&&a.end===!1||(p.on("end",d),p.on("close",u));var y=!1;return p.on("error",h),s.on("error",h),p.on("end",f),p.on("close",f),s.on("close",f),s.emit("pipe",p),s}},function(n,t,e){var i=t;i.Reporter=e(192).Reporter,i.DecoderBuffer=e(130).DecoderBuffer,i.EncoderBuffer=e(130).EncoderBuffer,i.Node=e(191)},function(n,t,e){"use strict";function i(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}function r(a,l){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||typeof l!="object"&&typeof l!="function"?a:l}function o(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(a,l):a.__proto__=l)}var s=(function(a){function l(c){i(this,l);var d=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return Object.defineProperty(d,"message",{configurable:!0,enumerable:!1,value:c!==void 0?String(c):""}),Object.defineProperty(d,"name",{configurable:!0,enumerable:!1,value:d.constructor.name}),Error.captureStackTrace&&Error.captureStackTrace(d,d.constructor),d}return o(l,a),l})(Error);n.exports=s},function(n,t,e){"use strict";function i(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function r(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?d:u}function o(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var s=(function(){function d(u,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,h,f){return h&&d(u.prototype,h),f&&d(u,f),u}})(),a=e(70),l=e(86),c=(function(d){function u(){return i(this,u),r(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return o(u,d),s(u,[{key:"generateHash",value:function(){var h=l.createHash("sha256");return h.update(this.getFingerprintContents()),h.digest()}}]),u})(a);n.exports=c},function(n,t,e){(function(i){n.exports=function(r,o){for(var s=Math.min(r.length,o.length),a=new i(s),l=0;l<s;++l)a[l]=r[l]^o[l];return a}}).call(t,e(1).Buffer)},function(n,t,e){var i=e(22),r=e(7)("toStringTag"),o=i((function(){return arguments})())=="Arguments",s=function(a,l){try{return a[l]}catch{}};n.exports=function(a){var l,c,d;return a===void 0?"Undefined":a===null?"Null":typeof(c=s(l=Object(a),r))=="string"?c:o?i(l):(d=i(l))=="Object"&&typeof l.callee=="function"?"Arguments":d}},function(n,t,e){var i=e(22);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return i(r)=="String"?r.split(""):Object(r)}},function(n,t){t.f={}.propertyIsEnumerable},function(n,t,e){(function(i){function r(x){return Array.isArray?Array.isArray(x):S(x)==="[object Array]"}function o(x){return typeof x=="boolean"}function s(x){return x===null}function a(x){return x==null}function l(x){return typeof x=="number"}function c(x){return typeof x=="string"}function d(x){return typeof x=="symbol"}function u(x){return x===void 0}function h(x){return S(x)==="[object RegExp]"}function f(x){return typeof x=="object"&&x!==null}function p(x){return S(x)==="[object Date]"}function y(x){return S(x)==="[object Error]"||x instanceof Error}function v(x){return typeof x=="function"}function b(x){return x===null||typeof x=="boolean"||typeof x=="number"||typeof x=="string"||typeof x=="symbol"||typeof x>"u"}function S(x){return Object.prototype.toString.call(x)}t.isArray=r,t.isBoolean=o,t.isNull=s,t.isNullOrUndefined=a,t.isNumber=l,t.isString=c,t.isSymbol=d,t.isUndefined=u,t.isRegExp=h,t.isObject=f,t.isDate=p,t.isError=y,t.isFunction=v,t.isPrimitive=b,t.isBuffer=i.isBuffer}).call(t,e(1).Buffer)},function(n,t){function e(i,r){if(!i)throw new Error(r||"Assertion failed")}n.exports=e,e.equal=function(i,r,o){if(i!=r)throw new Error(o||"Assertion failed: "+i+" != "+r)}},function(n,t,e){"use strict";(function(i,r,o){function s(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}function a(c,d){if(c>65536)throw new Error("requested too many random bytes");var u=new i.Uint8Array(c);c>0&&l.getRandomValues(u);var h=new r(u.buffer);return typeof d=="function"?o.nextTick(function(){d(null,h)}):h}var l=i.crypto||i.msCrypto;l&&l.getRandomValues?n.exports=a:n.exports=s}).call(t,e(48),e(1).Buffer,e(28))},function(n,t,e){"use strict";(function(i){function r(S,x){if(!(S instanceof x))throw new TypeError("Cannot call a class as a function")}var o=(function(){function S(x,k){for(var L=0;L<k.length;L++){var D=k[L];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,D.key,D)}}return function(x,k,L){return k&&S(x.prototype,k),L&&S(x,L),x}})(),s=e(449),a=e(91),l=e(202),c=e(201),d=e(49),u=e(93),h=e(94),f=e(92).Condition,p=/^ni:\/\/\/sha-256;([a-zA-Z0-9_-]{0,86})\?(.+)$/,y=p,v=/^0|[1-9]\d*$/,b=(function(){function S(){r(this,S)}return o(S,[{key:"getTypeId",value:function(){return this.type}},{key:"setTypeId",value:function(x){this.type=x}},{key:"getTypeName",value:function(){return a.findByTypeId(this.type).name}},{key:"getSubtypes",value:function(){return this.subtypes}},{key:"setSubtypes",value:function(x){this.subtypes=x}},{key:"getHash",value:function(){if(!this.hash)throw new d("Hash not set");return this.hash}},{key:"setHash",value:function(x){if(!i.isBuffer(x))throw new TypeError("Hash must be a Buffer");if(x.length!==32)throw new Error("Hash is of invalid length "+x.length+", should be 32");this.hash=x}},{key:"getCost",value:function(){if(typeof this.cost!="number")throw new d("Cost not set");return this.cost}},{key:"setCost",value:function(x){if(!h(x))throw new TypeError("Cost must be an integer");if(x<0)throw new TypeError("Cost must be positive or zero");this.cost=x}},{key:"serializeUri",value:function(){var x=a.findByTypeId(this.type).Class,k=x.TYPE_CATEGORY==="compound";return"ni:///sha-256;"+u.encode(this.getHash())+"?fpt="+this.getTypeName()+"&cost="+this.getCost()+(k?"&subtypes="+Array.from(this.getSubtypes()).sort().join(","):"")}},{key:"serializeBinary",value:function(){var x=this.getAsn1Json();return f.encode(x)}},{key:"getAsn1Json",value:function(){var x=a.findByTypeId(this.type).Class,k={type:x.TYPE_ASN1_CONDITION,value:{fingerprint:this.getHash(),cost:this.getCost()}};if(x.TYPE_CATEGORY==="compound"){var L=Array.from(this.getSubtypes()).map(a.findByName).map(function(I){return I.typeId}),D=L.reduce(function(I,T){return Math.max(I,T)},0),V=i.alloc(1+(D>>>3)),O=!0,R=!1,G=void 0;try{for(var Z,K=L[Symbol.iterator]();!(O=(Z=K.next()).done);O=!0){var C=Z.value;V[C>>>3]|=1<<7-C%8}}catch(I){R=!0,G=I}finally{try{!O&&K.return&&K.return()}finally{if(R)throw G}}var A=7-D%8;k.value.subtypes={unused:A,data:V}}return k}},{key:"parseBinary",value:function(x){this.setTypeId(x.readUInt16()),this.setSubtypes(x.readVarUInt()),this.setHash(x.readVarOctetString()),this.setCost(x.readVarUInt())}},{key:"validate",value:function(){if(a.findByTypeId(this.getTypeId()),this.getSubtypes()>S.MAX_SAFE_SUBTYPES)throw new Error("Bitmask too large to be safely represented");if(this.getSubtypes()&~S.SUPPORTED_SUBTYPES)throw new Error("Condition requested unsupported feature suites");if(this.getCost()>S.MAX_COST)throw new Error("Condition requested too large of a max fulfillment size");return!0}}],[{key:"fromUri",value:function(x){if(x instanceof S)return x;if(typeof x!="string")throw new Error("Serialized condition must be a string");var k=x.split(":");if(k[0]!=="ni")throw new l('Serialized condition must start with "ni:"');var L=S.REGEX_STRICT.exec(x);if(!L)throw new c("Invalid condition format");var D=s.parse(L[2]),V=a.findByName(D.fpt),O=v.exec(D.cost);if(!O)throw new c("No or invalid cost provided");var R=new S;return R.setTypeId(V.typeId),V.Class.TYPE_CATEGORY==="compound"?R.setSubtypes(new Set(D.subtypes.split(","))):R.setSubtypes(new Set),R.setHash(u.decode(L[1])),R.setCost(Number(D.cost)),R}},{key:"fromBinary",value:function(x){var k=f.decode(x);return S.fromAsn1Json(k)}},{key:"fromAsn1Json",value:function(x){var k=a.findByAsn1ConditionType(x.type),L=new S;if(L.setTypeId(k.typeId),L.setHash(x.value.fingerprint),L.setCost(x.value.cost.toNumber()),k.Class.TYPE_CATEGORY==="compound"){for(var D=x.value.subtypes.data,V=new Set,O=0;O<D.length;){for(var R=0;R<8;R++)if(1<<7-R&D[O]){var G=8*O+R,Z=a.findByTypeId(G).name;V.add(Z)}O++}L.setSubtypes(V)}else L.setSubtypes(new Set);return L}}]),S})();b.MAX_SAFE_SUBTYPES=4294967295,b.SUPPORTED_SUBTYPES=63,b.MAX_COST=2097152,b.REGEX=p,b.REGEX_STRICT=y,n.exports=b}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}var o=(function(){function h(f,p){for(var y=0;y<p.length;y++){var v=p[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,p,y){return p&&h(f.prototype,p),y&&h(f,y),f}})(),s=e(91),a=e(69),l=e(93),c=e(204).Fulfillment,d=/^cf:([1-9a-f][0-9a-f]{0,3}|0):[a-zA-Z0-9_-]*$/,u=(function(){function h(){r(this,h)}return o(h,[{key:"getTypeId",value:function(){return this.constructor.TYPE_ID}},{key:"getTypeName",value:function(){return this.constructor.TYPE_NAME}},{key:"getSubtypes",value:function(){return new Set}},{key:"getCondition",value:function(){var f=new a;return f.setHash(this.generateHash()),f.setTypeId(this.getTypeId()),f.setCost(this.calculateCost()),f.setSubtypes(this.getSubtypes()),f}},{key:"getConditionUri",value:function(){return this.getCondition().serializeUri()}},{key:"getConditionBinary",value:function(){return this.getCondition().serializeBinary()}},{key:"generateHash",value:function(){throw new Error("This method should be implemented by a subclass")}},{key:"calculateCost",value:function(){throw new Error("Condition types must implement calculateCost")}},{key:"parseAsn1JsonPayload",value:function(f){this.parseJson(f)}},{key:"serializeUri",value:function(){return l.encode(this.serializeBinary())}},{key:"getAsn1Json",value:function(){return{type:this.constructor.TYPE_ASN1_FULFILLMENT,value:this.getAsn1JsonPayload()}}},{key:"serializeBinary",value:function(){var f=this.getAsn1Json();return c.encode(f)}},{key:"serializeBase64Url",value:function(){return l.encode(this.serializeBinary())}},{key:"validate",value:function(){throw new Error("Not implemented")}}],[{key:"fromUri",value:function(f){if(f instanceof h)return f;if(typeof f!="string")throw new TypeError("Serialized fulfillment must be a string");var p=h.fromBinary(i.from(f,"base64"));return p}},{key:"fromBinary",value:function(f){var p=c.decode(f);return h.fromAsn1Json(p)}},{key:"fromAsn1Json",value:function(f){var p=s.findByAsn1FulfillmentType(f.type).Class,y=new p;return y.parseAsn1JsonPayload(f.value),y}},{key:"fromJson",value:function(f){var p=s.findByName(f.type).Class,y=new p;return y.parseJson(f),y}}]),h})();u.REGEX=d,n.exports=u}).call(t,e(1).Buffer)},function(n,t,e){"use strict";var i=e(33),r=e(92).Condition,o=i.define("PrefixFingerprintContents",function(){this.seq().obj(this.key("prefix").implicit(0).octstr(),this.key("maxMessageLength").implicit(1).int(),this.key("subcondition").explicit(2).use(r))}),s=i.define("ThresholdFingerprintContents",function(){this.seq().obj(this.key("threshold").implicit(0).int(),this.key("subconditions").implicit(1).setof(r))}),a=i.define("RsaFingerprintContents",function(){this.seq().obj(this.key("modulus").implicit(0).octstr())}),l=i.define("Ed25519FingerprintContents",function(){this.seq().obj(this.key("publicKey").implicit(0).octstr())});n.exports={PrefixFingerprintContents:o,ThresholdFingerprintContents:s,RsaFingerprintContents:a,Ed25519FingerprintContents:l}},function(n,t,e){(function(i){function r(u){var h,f;return h=u>c||u<0?(f=Math.abs(u)%c,u<0?c-f:f):u}function o(u){for(var h=0;h<u.length;u++)u[h]=0;return!1}function s(){this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=[[],[],[],[]],this.INV_SUB_MIX=[[],[],[],[]],this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function a(u){for(var h=u.length/4,f=new Array(h),p=-1;++p<h;)f[p]=u.readUInt32BE(4*p);return f}function l(u){this._key=a(u),this._doReset()}var c=Math.pow(2,32);s.prototype.init=function(){var u,h,f,p,y,v,b,S,x,k;for(u=(function(){var L,D;for(D=[],h=L=0;L<256;h=++L)h<128?D.push(h<<1):D.push(h<<1^283);return D})(),y=0,x=0,h=k=0;k<256;h=++k)f=x^x<<1^x<<2^x<<3^x<<4,f=f>>>8^255&f^99,this.SBOX[y]=f,this.INV_SBOX[f]=y,v=u[y],b=u[v],S=u[b],p=257*u[f]^16843008*f,this.SUB_MIX[0][y]=p<<24|p>>>8,this.SUB_MIX[1][y]=p<<16|p>>>16,this.SUB_MIX[2][y]=p<<8|p>>>24,this.SUB_MIX[3][y]=p,p=16843009*S^65537*b^257*v^16843008*y,this.INV_SUB_MIX[0][f]=p<<24|p>>>8,this.INV_SUB_MIX[1][f]=p<<16|p>>>16,this.INV_SUB_MIX[2][f]=p<<8|p>>>24,this.INV_SUB_MIX[3][f]=p,y===0?y=x=1:(y=v^u[u[u[S^v]]],x^=u[u[x]]);return!0};var d=new s;l.blockSize=16,l.prototype.blockSize=l.blockSize,l.keySize=32,l.prototype.keySize=l.keySize,l.prototype._doReset=function(){var u,h,f,p,y,v;for(f=this._key,h=f.length,this._nRounds=h+6,y=4*(this._nRounds+1),this._keySchedule=[],p=0;p<y;p++)this._keySchedule[p]=p<h?f[p]:(v=this._keySchedule[p-1],p%h===0?(v=v<<8|v>>>24,v=d.SBOX[v>>>24]<<24|d.SBOX[v>>>16&255]<<16|d.SBOX[v>>>8&255]<<8|d.SBOX[255&v],v^=d.RCON[p/h|0]<<24):h>6&&p%h===4&&(v=d.SBOX[v>>>24]<<24|d.SBOX[v>>>16&255]<<16|d.SBOX[v>>>8&255]<<8|d.SBOX[255&v]),this._keySchedule[p-h]^v);for(this._invKeySchedule=[],u=0;u<y;u++)p=y-u,v=this._keySchedule[p-(u%4?0:4)],this._invKeySchedule[u]=u<4||p<=4?v:d.INV_SUB_MIX[0][d.SBOX[v>>>24]]^d.INV_SUB_MIX[1][d.SBOX[v>>>16&255]]^d.INV_SUB_MIX[2][d.SBOX[v>>>8&255]]^d.INV_SUB_MIX[3][d.SBOX[255&v]];return!0},l.prototype.encryptBlock=function(u){u=a(new i(u));var h=this._doCryptBlock(u,this._keySchedule,d.SUB_MIX,d.SBOX),f=new i(16);return f.writeUInt32BE(h[0],0),f.writeUInt32BE(h[1],4),f.writeUInt32BE(h[2],8),f.writeUInt32BE(h[3],12),f},l.prototype.decryptBlock=function(u){u=a(new i(u));var h=[u[3],u[1]];u[1]=h[0],u[3]=h[1];var f=this._doCryptBlock(u,this._invKeySchedule,d.INV_SUB_MIX,d.INV_SBOX),p=new i(16);return p.writeUInt32BE(f[0],0),p.writeUInt32BE(f[3],4),p.writeUInt32BE(f[2],8),p.writeUInt32BE(f[1],12),p},l.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},l.prototype._doCryptBlock=function(u,h,f,p){var y,v,b,S,x,k,L,D,V;v=u[0]^h[0],b=u[1]^h[1],S=u[2]^h[2],x=u[3]^h[3],y=4;for(var O=1;O<this._nRounds;O++)k=f[0][v>>>24]^f[1][b>>>16&255]^f[2][S>>>8&255]^f[3][255&x]^h[y++],L=f[0][b>>>24]^f[1][S>>>16&255]^f[2][x>>>8&255]^f[3][255&v]^h[y++],D=f[0][S>>>24]^f[1][x>>>16&255]^f[2][v>>>8&255]^f[3][255&b]^h[y++],V=f[0][x>>>24]^f[1][v>>>16&255]^f[2][b>>>8&255]^f[3][255&S]^h[y++],v=k,b=L,S=D,x=V;return k=(p[v>>>24]<<24|p[b>>>16&255]<<16|p[S>>>8&255]<<8|p[255&x])^h[y++],L=(p[b>>>24]<<24|p[S>>>16&255]<<16|p[x>>>8&255]<<8|p[255&v])^h[y++],D=(p[S>>>24]<<24|p[x>>>16&255]<<16|p[v>>>8&255]<<8|p[255&b])^h[y++],V=(p[x>>>24]<<24|p[v>>>16&255]<<16|p[b>>>8&255]<<8|p[255&S])^h[y++],[r(k),r(L),r(D),r(V)]},t.AES=l}).call(t,e(1).Buffer)},function(n,t){t["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},t["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},t["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},t["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},t["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},t["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},t.aes128=t["aes-128-cbc"],t.aes192=t["aes-192-cbc"],t.aes256=t["aes-256-cbc"],t["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},t["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},t["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},t["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},t["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},t["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},t["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},t["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},t["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},t["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},t["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},t["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},t["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},t["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},t["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},t["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},t["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},t["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},function(n,t,e){(function(i){function r(a){for(var l,c=a.length;c--;){if(l=a.readUInt8(c),l!==255){l++,a.writeUInt8(l,c);break}a.writeUInt8(0,c)}}function o(a){var l=a._cipher.encryptBlock(a._prev);return r(a._prev),l}var s=e(62);t.encrypt=function(a,l){for(;a._cache.length<l.length;)a._cache=i.concat([a._cache,o(a)]);var c=a._cache.slice(0,l.length);return a._cache=a._cache.slice(l.length),s(l,c)}}).call(t,e(1).Buffer)},function(n,t,e){var i=e(19),r=e(11),o=e(44);n.exports=function(s){return function(a,l,c){var d,u=i(a),h=r(u.length),f=o(c,h);if(s&&l!=l){for(;h>f;)if(d=u[f++],d!=d)return!0}else for(;h>f;f++)if((s||f in u)&&u[f]===l)return s||f||0;return!s&&-1}}},function(n,t,e){"use strict";var i=e(4),r=e(0),o=e(17),s=e(42),a=e(34),l=e(52),c=e(37),d=e(6),u=e(5),h=e(81),f=e(54),p=e(104);n.exports=function(y,v,b,S,x,k){var L=i[y],D=L,V=x?"set":"add",O=D&&D.prototype,R={},G=function(T){var M=O[T];o(O,T,T=="delete"?function(F){return!(k&&!d(F))&&M.call(this,F===0?0:F)}:T=="has"?function(F){return!(k&&!d(F))&&M.call(this,F===0?0:F)}:T=="get"?function(F){return k&&!d(F)?void 0:M.call(this,F===0?0:F)}:T=="add"?function(F){return M.call(this,F===0?0:F),this}:function(F,q){return M.call(this,F===0?0:F,q),this})};if(typeof D=="function"&&(k||O.forEach&&!u(function(){new D().entries().next()}))){var Z=new D,K=Z[V](k?{}:-0,1)!=Z,C=u(function(){Z.has(1)}),A=h(function(T){new D(T)}),I=!k&&u(function(){for(var T=new D,M=5;M--;)T[V](M,M);return!T.has(-0)});A||(D=v(function(T,M){c(T,D,y);var F=p(new L,T,D);return M!=null&&l(M,x,F[V],F),F}),D.prototype=O,O.constructor=D),(C||I)&&(G("delete"),G("has"),x&&G("get")),(I||K)&&G(V),k&&O.clear&&delete O.clear}else D=S.getConstructor(v,y,x,V),s(D.prototype,b),a.NEED=!0;return f(D,y),R[y]=D,r(r.G+r.W+r.F*(D!=L),R),k||S.setStrong(D,y,x),D}},function(n,t,e){"use strict";var i=e(16),r=e(17),o=e(5),s=e(23),a=e(7);n.exports=function(l,c,d){var u=a(l),h=d(s,u,""[l]),f=h[0],p=h[1];o(function(){var y={};return y[u]=function(){return 7},""[l](y)!=7})&&(r(String.prototype,l,f),i(RegExp.prototype,u,c==2?function(y,v){return p.call(y,this,v)}:function(y){return p.call(y,this)}))}},function(n,t,e){"use strict";var i=e(2);n.exports=function(){var r=i(this),o="";return r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.unicode&&(o+="u"),r.sticky&&(o+="y"),o}},function(n,t){n.exports=function(e,i,r){var o=r===void 0;switch(i.length){case 0:return o?e():e.call(r);case 1:return o?e(i[0]):e.call(r,i[0]);case 2:return o?e(i[0],i[1]):e.call(r,i[0],i[1]);case 3:return o?e(i[0],i[1],i[2]):e.call(r,i[0],i[1],i[2]);case 4:return o?e(i[0],i[1],i[2],i[3]):e.call(r,i[0],i[1],i[2],i[3])}return e.apply(r,i)}},function(n,t,e){var i=e(6),r=e(22),o=e(7)("match");n.exports=function(s){var a;return i(s)&&((a=s[o])!==void 0?!!a:r(s)=="RegExp")}},function(n,t,e){var i=e(7)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch{}n.exports=function(s,a){if(!a&&!r)return!1;var l=!1;try{var c=[7],d=c[i]();d.next=function(){return{done:l=!0}},c[i]=function(){return d},s(c)}catch{}return l}},function(n,t,e){n.exports=e(38)||!e(5)(function(){var i=Math.random();__defineSetter__.call(null,i,function(){}),delete e(4)[i]})},function(n,t){t.f=Object.getOwnPropertySymbols},function(n,t,e){var i=e(4),r="__core-js_shared__",o=i[r]||(i[r]={});n.exports=function(s){return o[s]||(o[s]={})}},function(n,t,e){for(var i,r=e(4),o=e(16),s=e(45),a=s("typed_array"),l=s("view"),c=!(!r.ArrayBuffer||!r.DataView),d=c,u=0,h=9,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<h;)(i=r[f[u++]])?(o(i.prototype,a,!0),o(i.prototype,l,!0)):d=!1;n.exports={ABV:c,CONSTR:d,TYPED:a,VIEW:l}},function(n,t,e){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=e(68),t.createHash=t.Hash=e(56),t.createHmac=t.Hmac=e(124);var i=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(e(146)));t.getHashes=function(){return i};var r=e(180);t.pbkdf2=r.pbkdf2,t.pbkdf2Sync=r.pbkdf2Sync;var o=e(216);["Cipher","createCipher","Cipheriv","createCipheriv","Decipher","createDecipher","Decipheriv","createDecipheriv","getCiphers","listCiphers"].forEach(function(c){t[c]=o[c]});var s=e(410);["DiffieHellmanGroup","createDiffieHellmanGroup","getDiffieHellman","createDiffieHellman","DiffieHellman"].forEach(function(c){t[c]=s[c]});var a=e(219);["createSign","Sign","createVerify","Verify"].forEach(function(c){t[c]=a[c]}),t.createECDH=e(403);var l=e(444);["publicEncrypt","privateEncrypt","publicDecrypt","privateDecrypt"].forEach(function(c){t[c]=l[c]}),["createCredentials"].forEach(function(c){t[c]=function(){throw new Error(["sorry, "+c+" is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))}})},function(n,t,e){"use strict";var i=t;i.base=e(413),i.short=e(416),i.mont=e(415),i.edwards=e(414)},function(n,t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(a){return typeof a=="function"}function r(a){return typeof a=="number"}function o(a){return typeof a=="object"&&a!==null}function s(a){return a===void 0}n.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(a){if(!r(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},e.prototype.emit=function(a){var l,c,d,u,h,f;if(this._events||(this._events={}),a==="error"&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(l=arguments[1],l instanceof Error)throw l;var p=new Error('Uncaught, unspecified "error" event. ('+l+")");throw p.context=l,p}if(c=this._events[a],s(c))return!1;if(i(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),c.apply(this,u)}else if(o(c))for(u=Array.prototype.slice.call(arguments,1),f=c.slice(),d=f.length,h=0;h<d;h++)f[h].apply(this,u);return!0},e.prototype.addListener=function(a,l){var c;if(!i(l))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,i(l.listener)?l.listener:l),this._events[a]?o(this._events[a])?this._events[a].push(l):this._events[a]=[this._events[a],l]:this._events[a]=l,o(this._events[a])&&!this._events[a].warned&&(c=s(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),typeof console.trace=="function"&&console.trace())),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(a,l){function c(){this.removeListener(a,c),d||(d=!0,l.apply(this,arguments))}if(!i(l))throw TypeError("listener must be a function");var d=!1;return c.listener=l,this.on(a,c),this},e.prototype.removeListener=function(a,l){var c,d,u,h;if(!i(l))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],u=c.length,d=-1,c===l||i(c.listener)&&c.listener===l)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,l);else if(o(c)){for(h=u;h-- >0;)if(c[h]===l||c[h].listener&&c[h].listener===l){d=h;break}if(d<0)return this;c.length===1?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,l)}return this},e.prototype.removeAllListeners=function(a){var l,c;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[a]&&delete this._events[a],this;if(arguments.length===0){for(l in this._events)l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],i(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},e.prototype.listeners=function(a){var l;return l=this._events&&this._events[a]?i(this._events[a])?[this._events[a]]:this._events[a].slice():[]},e.prototype.listenerCount=function(a){if(this._events){var l=this._events[a];if(i(l))return 1;if(l)return l.length}return 0},e.listenerCount=function(a,l){return a.listenerCount(l)}},function(n,t,e){(function(i){function r(s,a,l,c){i.isBuffer(s)||(s=new i(s,"binary")),a&&!i.isBuffer(a)&&(a=new i(a,"binary")),l/=8,c=c||0;for(var d,u,h=0,f=0,p=new i(l),y=new i(c),v=0,b=[];;){if(v++>0&&b.push(d),b.push(s),a&&b.push(a),d=o(i.concat(b)),b=[],u=0,l>0)for(;!(l===0||u===d.length);)p[h++]=d[u],l--,u++;if(c>0&&u!==d.length)for(;!(c===0||u===d.length);)y[f++]=d[u],c--,u++;if(l===0&&c===0)break}for(u=0;u<d.length;u++)d[u]=0;return{key:p,iv:y}}var o=e(176);n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(u){var h;typeof u!="object"||i.isBuffer(u)||(h=u.passphrase,u=u.key),typeof u=="string"&&(u=new i(u));var f,p,y=l(u,h),v=y.tag,b=y.data;switch(v){case"PUBLIC KEY":switch(p=s.PublicKey.decode(b,"der"),f=p.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPublicKey.decode(p.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return p.subjectPrivateKey=p.subjectPublicKey,{type:"ec",data:p};case"1.2.840.10040.4.1":return p.algorithm.params.pub_key=s.DSAparam.decode(p.subjectPublicKey.data,"der"),{type:"dsa",data:p.algorithm.params};default:throw new Error("unknown key id "+f)}throw new Error("unknown key type "+v);case"ENCRYPTED PRIVATE KEY":b=s.EncryptedPrivateKey.decode(b,"der"),b=o(b,h);case"PRIVATE KEY":switch(p=s.PrivateKey.decode(b,"der"),f=p.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPrivateKey.decode(p.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:p.algorithm.curve,privateKey:s.ECPrivateKey.decode(p.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return p.algorithm.params.priv_key=s.DSAparam.decode(p.subjectPrivateKey,"der"),{type:"dsa",params:p.algorithm.params};default:throw new Error("unknown key id "+f)}throw new Error("unknown key type "+v);case"RSA PUBLIC KEY":return s.RSAPublicKey.decode(b,"der");case"RSA PRIVATE KEY":return s.RSAPrivateKey.decode(b,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:s.DSAPrivateKey.decode(b,"der")};case"EC PRIVATE KEY":return b=s.ECPrivateKey.decode(b,"der"),{curve:b.parameters.value,privateKey:b.privateKey};default:throw new Error("unknown key type "+v)}}function o(u,h){var f=u.algorithm.decrypt.kde.kdeparams.salt,p=parseInt(u.algorithm.decrypt.kde.kdeparams.iters.toString(),10),y=a[u.algorithm.decrypt.cipher.algo.join(".")],v=u.algorithm.decrypt.cipher.iv,b=u.subjectPrivateKey,S=parseInt(y.split("-")[1],10)/8,x=d.pbkdf2Sync(h,f,p,S),k=c.createDecipheriv(y,x,v),L=[];return L.push(k.update(b)),L.push(k.final()),i.concat(L)}var s=e(440),a=e(437),l=e(441),c=e(95),d=e(180);n.exports=r,r.signature=s.signature}).call(t,e(1).Buffer)},function(n,t,e){"use strict";function i(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var r=(function(){function a(l,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}return function(l,c,d){return c&&a(l.prototype,c),d&&a(l,d),l}})(),o=e(203),s=(function(){function a(){i(this,a)}return r(a,null,[{key:"findByTypeId",value:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new o("Type "+l+" is not supported");var c=!0,d=!1,u=void 0;try{for(var h,f=a.registeredTypes[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;if(l===p.typeId)return p}}catch(y){d=!0,u=y}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}throw new o("Type "+l+" is not supported")}},{key:"findByName",value:function(l){var c=!0,d=!1,u=void 0;try{for(var h,f=a.registeredTypes[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;if(l===p.name)return p}}catch(y){d=!0,u=y}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}throw new o("Type "+l+" is not supported")}},{key:"findByAsn1ConditionType",value:function(l){var c=!0,d=!1,u=void 0;try{for(var h,f=a.registeredTypes[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;if(l===p.asn1Condition)return p}}catch(y){d=!0,u=y}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}throw new o("Type "+l+" is not supported")}},{key:"findByAsn1FulfillmentType",value:function(l){var c=!0,d=!1,u=void 0;try{for(var h,f=a.registeredTypes[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;if(l===p.asn1Fulfillment)return p}}catch(y){d=!0,u=y}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}throw new o("Type "+l+" is not supported")}},{key:"registerType",value:function(l){a.registeredTypes.push({typeId:l.TYPE_ID,name:l.TYPE_NAME,asn1Condition:l.TYPE_ASN1_CONDITION,asn1Fulfillment:l.TYPE_ASN1_FULFILLMENT,Class:l})}}]),a})();s.registeredTypes=[],n.exports=s},function(n,t,e){"use strict";var i=e(33);t.Simple256Condition=i.define("Simple256Condition",function(){this.seq().obj(this.key("fingerprint").implicit(0).octstr(),this.key("cost").implicit(1).int())}),t.Compound256Condition=i.define("Compound256Condition",function(){this.seq().obj(this.key("fingerprint").implicit(0).octstr(),this.key("cost").implicit(1).int(),this.key("subtypes").implicit(2).bitstr())}),t.Condition=i.define("Condition",function(){this.choice({preimageSha256Condition:this.implicit(0).use(t.Simple256Condition),prefixSha256Condition:this.implicit(1).use(t.Compound256Condition),thresholdSha256Condition:this.implicit(2).use(t.Compound256Condition),rsaSha256Condition:this.implicit(3).use(t.Simple256Condition),ed25519Sha256Condition:this.implicit(4).use(t.Simple256Condition)})})},function(n,t,e){"use strict";(function(i){function r(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=(function(){function a(l,c){for(var d=0;d<c.length;d++){var u=c[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}return function(l,c,d){return c&&a(l.prototype,c),d&&a(l,d),l}})(),s=(function(){function a(){r(this,a)}return o(a,null,[{key:"decode",value:function(l){var c=l.replace(/-/g,"+").replace(/_/g,"/");return new i(c,"base64")}},{key:"encode",value:function(l){return l.toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}}]),a})();n.exports=s}).call(t,e(1).Buffer)},function(n,t,e){"use strict";n.exports=function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i}},function(n,t,e){function i(){return Object.keys(s)}var r=e(214);t.createCipher=t.Cipher=r.createCipher,t.createCipheriv=t.Cipheriv=r.createCipheriv;var o=e(213);t.createDecipher=t.Decipher=o.createDecipher,t.createDecipheriv=t.Decipheriv=o.createDecipheriv;var s=e(73);t.listCiphers=t.getCiphers=i},function(n,t,e){(function(i){function r(c){var d=s(c),u=d.toRed(a.mont(c.modulus)).redPow(new a(c.publicExponent)).fromRed();return{blinder:u,unblinder:d.invm(c.modulus)}}function o(c,d){var u=r(d),h=d.modulus.byteLength(),f=(a.mont(d.modulus),new a(c).mul(u.blinder).umod(d.modulus)),p=f.toRed(a.mont(d.prime1)),y=f.toRed(a.mont(d.prime2)),v=d.coefficient,b=d.prime1,S=d.prime2,x=p.redPow(d.exponent1),k=y.redPow(d.exponent2);x=x.fromRed(),k=k.fromRed();var L=x.isub(k).imul(v).umod(b);return L.imul(S),k.iadd(L),new i(k.imul(u.unblinder).umod(d.modulus).toArray(!1,h))}function s(c){for(var d=c.modulus.byteLength(),u=new a(l(d));u.cmp(c.modulus)>=0||!u.umod(c.prime1)||!u.umod(c.prime2);)u=new a(l(d));return u}var a=e(10),l=e(68);n.exports=o,o.getr=s}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){var r=e(1),o=r.Buffer,s=r.SlowBuffer,a=r.kMaxLength||2147483647;t.alloc=function(l,c,d){if(typeof o.alloc=="function")return o.alloc(l,c,d);if(typeof d=="number")throw new TypeError("encoding must not be number");if(typeof l!="number")throw new TypeError("size must be a number");if(l>a)throw new RangeError("size is too large");var u=d,h=c;h===void 0&&(u=void 0,h=0);var f=new o(l);if(typeof h=="string")for(var p=new o(h,u),y=p.length,v=-1;++v<l;)f[v]=p[v%y];else f.fill(h);return f},t.allocUnsafe=function(l){if(typeof o.allocUnsafe=="function")return o.allocUnsafe(l);if(typeof l!="number")throw new TypeError("size must be a number");if(l>a)throw new RangeError("size is too large");return new o(l)},t.from=function(l,c,d){if(typeof o.from=="function"&&(!i.Uint8Array||Uint8Array.from!==o.from))return o.from(l,c,d);if(typeof l=="number")throw new TypeError('"value" argument must not be a number');if(typeof l=="string")return new o(l,c);if(typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer){var u=c;if(arguments.length===1)return new o(l);typeof u>"u"&&(u=0);var h=d;if(typeof h>"u"&&(h=l.byteLength-u),u>=l.byteLength)throw new RangeError("'offset' is out of bounds");if(h>l.byteLength-u)throw new RangeError("'length' is out of bounds");return new o(l.slice(u,u+h))}if(o.isBuffer(l)){var f=new o(l.length);return l.copy(f,0,0,l.length),f}if(l){if(Array.isArray(l)||typeof ArrayBuffer<"u"&&l.buffer instanceof ArrayBuffer||"length"in l)return new o(l);if(l.type==="Buffer"&&Array.isArray(l.data))return new o(l.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(l){if(typeof o.allocUnsafeSlow=="function")return o.allocUnsafeSlow(l);if(typeof l!="number")throw new TypeError("size must be a number");if(l>=a)throw new RangeError("size is too large");return new s(l)}}).call(t,e(48))},function(n,t,e){"use strict";var i=e(12),r=e(44),o=e(11);n.exports=function(s){for(var a=i(this),l=o(a.length),c=arguments.length,d=r(c>1?arguments[1]:void 0,l),u=c>2?arguments[2]:void 0,h=u===void 0?l:r(u,l);h>d;)a[d++]=s;return a}},function(n,t,e){"use strict";var i=e(9),r=e(35);n.exports=function(o,s,a){s in o?i.f(o,s,r(0,a)):o[s]=a}},function(n,t,e){var i=e(6),r=e(4).document,o=i(r)&&i(r.createElement);n.exports=function(s){return o?r.createElement(s):{}}},function(n,t){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(n,t,e){var i=e(7)("match");n.exports=function(r){var o=/./;try{"/./"[r](o)}catch{try{return o[i]=!1,!"/./"[r](o)}catch{}}return!0}},function(n,t,e){n.exports=e(4).document&&document.documentElement},function(n,t,e){var i=e(6),r=e(112).set;n.exports=function(o,s,a){var l,c=s.constructor;return c!==a&&typeof c=="function"&&(l=c.prototype)!==a.prototype&&i(l)&&r&&r(o,l),o}},function(n,t,e){var i=e(53),r=e(7)("iterator"),o=Array.prototype;n.exports=function(s){return s!==void 0&&(i.Array===s||o[r]===s)}},function(n,t,e){var i=e(22);n.exports=Array.isArray||function(r){return i(r)=="Array"}},function(n,t,e){"use strict";var i=e(39),r=e(35),o=e(54),s={};e(16)(s,e(7)("iterator"),function(){return this}),n.exports=function(a,l,c){a.prototype=i(s,{next:r(1,c)}),o(a,l+" Iterator")}},function(n,t,e){"use strict";var i=e(38),r=e(0),o=e(17),s=e(16),a=e(14),l=e(53),c=e(107),d=e(54),u=e(21),h=e(7)("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",y="keys",v="values",b=function(){return this};n.exports=function(S,x,k,L,D,V,O){c(k,x,L);var R,G,Z,K=function(te){if(!f&&te in T)return T[te];switch(te){case y:return function(){return new k(this,te)};case v:return function(){return new k(this,te)}}return function(){return new k(this,te)}},C=x+" Iterator",A=D==v,I=!1,T=S.prototype,M=T[h]||T[p]||D&&T[D],F=M||K(D),q=D?A?K("entries"):F:void 0,$=x=="Array"&&T.entries||M;if($&&(Z=u($.call(new S)),Z!==Object.prototype&&(d(Z,C,!0),i||a(Z,h)||s(Z,h,b))),A&&M&&M.name!==v&&(I=!0,F=function(){return M.call(this)}),i&&!O||!f&&!I&&T[h]||s(T,h,F),l[x]=F,l[C]=b,D)if(R={values:A?F:K(v),keys:V?F:K(y),entries:q},O)for(G in R)G in T||o(T,G,R[G]);else r(r.P+r.F*(f||I),x,R);return R}},function(n,t){var e=Math.expm1;n.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(i){return(i=+i)==0?i:i>-1e-6&&i<1e-6?i+i*i/2:Math.exp(i)-1}:e},function(n,t){n.exports=Math.sign||function(e){return(e=+e)==0||e!=e?e:e<0?-1:1}},function(n,t,e){var i=e(4),r=e(119).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,l=e(22)(s)=="process";n.exports=function(){var c,d,u,h=function(){var v,b;for(l&&(v=s.domain)&&v.exit();c;){b=c.fn,c=c.next;try{b()}catch(S){throw c?u():d=void 0,S}}d=void 0,v&&v.enter()};if(l)u=function(){s.nextTick(h)};else if(o){var f=!0,p=document.createTextNode("");new o(h).observe(p,{characterData:!0}),u=function(){p.data=f=!f}}else if(a&&a.resolve){var y=a.resolve();u=function(){y.then(h)}}else u=function(){r.call(i,h)};return function(v){var b={fn:v,next:void 0};d&&(d.next=b),c||(c=b,u()),d=b}}},function(n,t,e){var i=e(6),r=e(2),o=function(s,a){if(r(s),!i(a)&&a!==null)throw TypeError(a+": can't set as prototype!")};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?(function(s,a,l){try{l=e(30)(Function.call,e(20).f(Object.prototype,"__proto__").set,2),l(s,[]),a=!(s instanceof Array)}catch{a=!0}return function(c,d){return o(c,d),a?c.__proto__=d:l(c,d),c}})({},!1):void 0),check:o}},function(n,t,e){var i=e(84)("keys"),r=e(45);n.exports=function(o){return i[o]||(i[o]=r(o))}},function(n,t,e){var i=e(2),r=e(15),o=e(7)("species");n.exports=function(s,a){var l,c=i(s).constructor;return c===void 0||(l=i(c)[o])==null?a:r(l)}},function(n,t,e){var i=e(36),r=e(23);n.exports=function(o){return function(s,a){var l,c,d=String(r(s)),u=i(a),h=d.length;return u<0||u>=h?o?"":void 0:(l=d.charCodeAt(u),l<55296||l>56319||u+1===h||(c=d.charCodeAt(u+1))<56320||c>57343?o?d.charAt(u):l:o?d.slice(u,u+2):(l-55296<<10)+(c-56320)+65536)}}},function(n,t,e){var i=e(80),r=e(23);n.exports=function(o,s,a){if(i(s))throw TypeError("String#"+a+" doesn't accept regex!");return String(r(o))}},function(n,t,e){"use strict";var i=e(36),r=e(23);n.exports=function(o){var s=String(r(this)),a="",l=i(o);if(l<0||l==1/0)throw RangeError("Count can't be negative");for(;l>0;(l>>>=1)&&(s+=s))1&l&&(a+=s);return a}},function(n,t){n.exports=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},function(n,t,e){var i,r,o,s=e(30),a=e(79),l=e(103),c=e(100),d=e(4),u=d.process,h=d.setImmediate,f=d.clearImmediate,p=d.MessageChannel,y=0,v={},b="onreadystatechange",S=function(){var k=+this;if(v.hasOwnProperty(k)){var L=v[k];delete v[k],L()}},x=function(k){S.call(k.data)};h&&f||(h=function(k){for(var L=[],D=1;arguments.length>D;)L.push(arguments[D++]);return v[++y]=function(){a(typeof k=="function"?k:Function(k),L)},i(y),y},f=function(k){delete v[k]},e(22)(u)=="process"?i=function(k){u.nextTick(s(S,k,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=x,i=s(o.postMessage,o,1)):d.addEventListener&&typeof postMessage=="function"&&!d.importScripts?(i=function(k){d.postMessage(k+"","*")},d.addEventListener("message",x,!1)):i=b in c("script")?function(k){l.appendChild(c("script"))[b]=function(){l.removeChild(this),S.call(k)}}:function(k){setTimeout(s(S,k,1),0)}),n.exports={set:h,clear:f}},function(n,t,e){"use strict";var i=e(4),r=e(8),o=e(38),s=e(85),a=e(16),l=e(42),c=e(5),d=e(37),u=e(36),h=e(11),f=e(40).f,p=e(9).f,y=e(98),v=e(54),b="ArrayBuffer",S="DataView",x="prototype",k="Wrong length!",L="Wrong index!",D=i[b],V=i[S],O=i.Math,R=i.RangeError,G=i.Infinity,Z=D,K=O.abs,C=O.pow,A=O.floor,I=O.log,T=O.LN2,M="buffer",F="byteLength",q="byteOffset",$=r?"_b":M,te=r?"_l":F,se=r?"_o":q,ue=function(B,W,ie){var ye,Me,Fe,tt=Array(ie),gt=8*ie-W-1,Ut=(1<<gt)-1,Cn=Ut>>1,jt=W===23?C(2,-24)-C(2,-77):0,Ht=0,Kr=B<0||B===0&&1/B<0?1:0;for(B=K(B),B!=B||B===G?(Me=B!=B?1:0,ye=Ut):(ye=A(I(B)/T),B*(Fe=C(2,-ye))<1&&(ye--,Fe*=2),B+=ye+Cn>=1?jt/Fe:jt*C(2,1-Cn),B*Fe>=2&&(ye++,Fe/=2),ye+Cn>=Ut?(Me=0,ye=Ut):ye+Cn>=1?(Me=(B*Fe-1)*C(2,W),ye+=Cn):(Me=B*C(2,Cn-1)*C(2,W),ye=0));W>=8;tt[Ht++]=255&Me,Me/=256,W-=8);for(ye=ye<<W|Me,gt+=W;gt>0;tt[Ht++]=255&ye,ye/=256,gt-=8);return tt[--Ht]|=128*Kr,tt},Se=function(B,W,ie){var ye,Me=8*ie-W-1,Fe=(1<<Me)-1,tt=Fe>>1,gt=Me-7,Ut=ie-1,Cn=B[Ut--],jt=127&Cn;for(Cn>>=7;gt>0;jt=256*jt+B[Ut],Ut--,gt-=8);for(ye=jt&(1<<-gt)-1,jt>>=-gt,gt+=W;gt>0;ye=256*ye+B[Ut],Ut--,gt-=8);if(jt===0)jt=1-tt;else{if(jt===Fe)return ye?NaN:Cn?-G:G;ye+=C(2,W),jt-=tt}return(Cn?-1:1)*ye*C(2,jt-W)},Ie=function(B){return B[3]<<24|B[2]<<16|B[1]<<8|B[0]},Be=function(B){return[255&B]},ce=function(B){return[255&B,B>>8&255]},pe=function(B){return[255&B,B>>8&255,B>>16&255,B>>24&255]},re=function(B){return ue(B,52,8)},ae=function(B){return ue(B,23,4)},fe=function(B,W,ie){p(B[x],W,{get:function(){return this[ie]}})},De=function(B,W,ie,ye){var Me=+ie,Fe=u(Me);if(Me!=Fe||Fe<0||Fe+W>B[te])throw R(L);var tt=B[$]._b,gt=Fe+B[se],Ut=tt.slice(gt,gt+W);return ye?Ut:Ut.reverse()},be=function(B,W,ie,ye,Me,Fe){var tt=+ie,gt=u(tt);if(tt!=gt||gt<0||gt+W>B[te])throw R(L);for(var Ut=B[$]._b,Cn=gt+B[se],jt=ye(+Me),Ht=0;Ht<W;Ht++)Ut[Cn+Ht]=jt[Fe?Ht:W-Ht-1]},Ae=function(B,W){d(B,D,b);var ie=+W,ye=h(ie);if(ie!=ye)throw R(k);return ye};if(s.ABV){if(!c(function(){new D})||!c(function(){new D(.5)})){D=function(B){return new Z(Ae(this,B))};for(var Ce,we=D[x]=Z[x],ve=f(Z),xe=0;ve.length>xe;)(Ce=ve[xe++])in D||a(D,Ce,Z[Ce]);o||(we.constructor=D)}var Te=new V(new D(2)),ke=V[x].setInt8;Te.setInt8(0,2147483648),Te.setInt8(1,2147483649),!Te.getInt8(0)&&Te.getInt8(1)||l(V[x],{setInt8:function(B,W){ke.call(this,B,W<<24>>24)},setUint8:function(B,W){ke.call(this,B,W<<24>>24)}},!0)}else D=function(B){var W=Ae(this,B);this._b=y.call(Array(W),0),this[te]=W},V=function(B,W,ie){d(this,V,S),d(B,D,S);var ye=B[te],Me=u(W);if(Me<0||Me>ye)throw R("Wrong offset!");if(ie=ie===void 0?ye-Me:h(ie),Me+ie>ye)throw R(k);this[$]=B,this[se]=Me,this[te]=ie},r&&(fe(D,F,"_l"),fe(V,M,"_b"),fe(V,F,"_l"),fe(V,q,"_o")),l(V[x],{getInt8:function(B){return De(this,1,B)[0]<<24>>24},getUint8:function(B){return De(this,1,B)[0]},getInt16:function(B){var W=De(this,2,B,arguments[1]);return(W[1]<<8|W[0])<<16>>16},getUint16:function(B){var W=De(this,2,B,arguments[1]);return W[1]<<8|W[0]},getInt32:function(B){return Ie(De(this,4,B,arguments[1]))},getUint32:function(B){return Ie(De(this,4,B,arguments[1]))>>>0},getFloat32:function(B){return Se(De(this,4,B,arguments[1]),23,4)},getFloat64:function(B){return Se(De(this,8,B,arguments[1]),52,8)},setInt8:function(B,W){be(this,1,B,Be,W)},setUint8:function(B,W){be(this,1,B,Be,W)},setInt16:function(B,W){be(this,2,B,ce,W,arguments[2])},setUint16:function(B,W){be(this,2,B,ce,W,arguments[2])},setInt32:function(B,W){be(this,4,B,pe,W,arguments[2])},setUint32:function(B,W){be(this,4,B,pe,W,arguments[2])},setFloat32:function(B,W){be(this,4,B,ae,W,arguments[2])},setFloat64:function(B,W){be(this,8,B,re,W,arguments[2])}});v(D,b),v(V,S),a(V[x],s.VIEW,!0),t[b]=D,t[S]=V},function(n,t,e){var i=e(4),r=e(29),o=e(38),s=e(171),a=e(9).f;n.exports=function(l){var c=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});l.charAt(0)=="_"||l in c||a(c,l,{value:s.f(l)})}},function(n,t,e){var i=e(63),r=e(7)("iterator"),o=e(53);n.exports=e(29).getIteratorMethod=function(s){if(s!=null)return s[r]||s["@@iterator"]||o[i(s)]}},function(n,t,e){"use strict";var i=e(51),r=e(159),o=e(53),s=e(19);n.exports=e(108)(Array,"Array",function(a,l){this._t=s(a),this._i=0,this._k=l},function(){var a=this._t,l=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,r(1)):l=="keys"?r(0,c):l=="values"?r(0,a[c]):r(0,[c,a[c]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(n,t,e){"use strict";(function(i){function r(c,d){a.call(this),c=c.toLowerCase(),typeof d=="string"&&(d=new i(d));var u=c==="sha512"||c==="sha384"?128:64;this._alg=c,this._key=d,d.length>u?d=o(c).update(d).digest():d.length<u&&(d=i.concat([d,l],u));for(var h=this._ipad=new i(u),f=this._opad=new i(u),p=0;p<u;p++)h[p]=54^d[p],f[p]=92^d[p];this._hash=o(c).update(h)}var o=e(56),s=e(3),a=e(58).Transform,l=new i(128);l.fill(0),s(r,a),r.prototype.update=function(c,d){return this._hash.update(c,d),this},r.prototype._transform=function(c,d,u){this._hash.update(c),u()},r.prototype._flush=function(c){this.push(this.digest()),c()},r.prototype.digest=function(c){var d=this._hash.digest();return o(this._alg).update(this._opad).update(d).digest(c)},n.exports=function(c,d){return new r(c,d)}}).call(t,e(1).Buffer)},function(n,t,e){"use strict";t.utils=e(409),t.Cipher=e(406),t.DES=e(407),t.CBC=e(405),t.EDE=e(408)},function(n,t,e){"use strict";(function(i){function r(o,s,a,l){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var c,d,u=arguments.length;switch(u){case 0:case 1:return i.nextTick(o);case 2:return i.nextTick(function(){o.call(null,s)});case 3:return i.nextTick(function(){o.call(null,s,a)});case 4:return i.nextTick(function(){o.call(null,s,a,l)});default:for(c=new Array(u-1),d=0;d<c.length;)c[d++]=arguments[d];return i.nextTick(function(){o.apply(null,c)})}}!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?n.exports=r:n.exports=i.nextTick}).call(t,e(28))},function(n,t,e){"use strict";function i(c){this.afterTransform=function(d,u){return r(c,d,u)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(c,d,u){var h=c._transformState;h.transforming=!1;var f=h.writecb;if(!f)return c.emit("error",new Error("no writecb in Transform class"));h.writechunk=null,h.writecb=null,u!=null&&c.push(u),f(d);var p=c._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&c._read(p.highWaterMark)}function o(c){if(!(this instanceof o))return new o(c);a.call(this,c),this._transformState=new i(this);var d=this;this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(u,h){s(d,u,h)}):s(d)})}function s(c,d,u){if(d)return c.emit("error",d);u!=null&&c.push(u);var h=c._writableState,f=c._transformState;if(h.length)throw new Error("Calling transform done when ws.length != 0");if(f.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}n.exports=o;var a=e(47),l=e(66);l.inherits=e(3),l.inherits(o,a),o.prototype.push=function(c,d){return this._transformState.needTransform=!1,a.prototype.push.call(this,c,d)},o.prototype._transform=function(c,d,u){throw new Error("_transform() is not implemented")},o.prototype._write=function(c,d,u){var h=this._transformState;if(h.writecb=u,h.writechunk=c,h.writeencoding=d,!h.transforming){var f=this._readableState;(h.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},o.prototype._read=function(c){var d=this._transformState;d.writechunk!==null&&d.writecb&&!d.transforming?(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform)):d.needTransform=!0}},function(n,t,e){"use strict";(function(i,r){function o(){}function s(F,q,$){this.chunk=F,this.encoding=q,this.callback=$,this.next=null}function a(F,q){R=R||e(47),F=F||{},this.objectMode=!!F.objectMode,q instanceof R&&(this.objectMode=this.objectMode||!!F.writableObjectMode);var $=F.highWaterMark,te=this.objectMode?16:16384;this.highWaterMark=$||$===0?$:te,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var se=F.decodeStrings===!1;this.decodeStrings=!se,this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ue){v(q,ue)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new O(this)}function l(F){return R=R||e(47),M.call(l,this)||this instanceof R?(this._writableState=new a(F,this),this.writable=!0,F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev)),void C.call(this)):new l(F)}function c(F,q){var $=new Error("write after end");F.emit("error",$),G(q,$)}function d(F,q,$,te){var se=!0,ue=!1;return $===null?ue=new TypeError("May not write null values to stream"):I.isBuffer($)||typeof $=="string"||$===void 0||q.objectMode||(ue=new TypeError("Invalid non-string/buffer chunk")),ue&&(F.emit("error",ue),G(te,ue),se=!1),se}function u(F,q,$){return F.objectMode||F.decodeStrings===!1||typeof q!="string"||(q=T.from(q,$)),q}function h(F,q,$,te,se){$=u(q,$,te),I.isBuffer($)&&(te="buffer");var ue=q.objectMode?1:$.length;q.length+=ue;var Se=q.length<q.highWaterMark;if(Se||(q.needDrain=!0),q.writing||q.corked){var Ie=q.lastBufferedRequest;q.lastBufferedRequest=new s($,te,se),Ie?Ie.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else f(F,q,!1,ue,$,te,se);return Se}function f(F,q,$,te,se,ue,Se){q.writelen=te,q.writecb=Se,q.writing=!0,q.sync=!0,$?F._writev(se,q.onwrite):F._write(se,ue,q.onwrite),q.sync=!1}function p(F,q,$,te,se){--q.pendingcb,$?G(se,te):se(te),F._writableState.errorEmitted=!0,F.emit("error",te)}function y(F){F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0}function v(F,q){var $=F._writableState,te=$.sync,se=$.writecb;if(y($),q)p(F,$,te,q,se);else{var ue=k($);ue||$.corked||$.bufferProcessing||!$.bufferedRequest||x(F,$),te?Z(b,F,$,ue,se):b(F,$,ue,se)}}function b(F,q,$,te){$||S(F,q),q.pendingcb--,te(),D(F,q)}function S(F,q){q.length===0&&q.needDrain&&(q.needDrain=!1,F.emit("drain"))}function x(F,q){q.bufferProcessing=!0;var $=q.bufferedRequest;if(F._writev&&$&&$.next){var te=q.bufferedRequestCount,se=new Array(te),ue=q.corkedRequestsFree;ue.entry=$;for(var Se=0;$;)se[Se]=$,$=$.next,Se+=1;f(F,q,!0,q.length,se,"",ue.finish),q.pendingcb++,q.lastBufferedRequest=null,ue.next?(q.corkedRequestsFree=ue.next,ue.next=null):q.corkedRequestsFree=new O(q)}else{for(;$;){var Ie=$.chunk,Be=$.encoding,ce=$.callback,pe=q.objectMode?1:Ie.length;if(f(F,q,!1,pe,Ie,Be,ce),$=$.next,q.writing)break}$===null&&(q.lastBufferedRequest=null)}q.bufferedRequestCount=0,q.bufferedRequest=$,q.bufferProcessing=!1}function k(F){return F.ending&&F.length===0&&F.bufferedRequest===null&&!F.finished&&!F.writing}function L(F,q){q.prefinished||(q.prefinished=!0,F.emit("prefinish"))}function D(F,q){var $=k(q);return $&&(q.pendingcb===0?(L(F,q),q.finished=!0,F.emit("finish")):L(F,q)),$}function V(F,q,$){q.ending=!0,D(F,q),$&&(q.finished?G($):F.once("finish",$)),q.ended=!0,F.writable=!1}function O(F){var q=this;this.next=null,this.entry=null,this.finish=function($){var te=q.entry;for(q.entry=null;te;){var se=te.callback;F.pendingcb--,se($),te=te.next}F.corkedRequestsFree?F.corkedRequestsFree.next=q:F.corkedRequestsFree=q}}n.exports=l;var R,G=e(126),Z=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?r:G;l.WritableState=a;var K=e(66);K.inherits=e(3);var C,A={deprecate:e(465)};(function(){try{C=e(58)}catch{}finally{C||(C=e(88).EventEmitter)}})();var I=e(1).Buffer,T=e(97);K.inherits(l,C),a.prototype.getBuffer=function(){for(var F=this.bufferedRequest,q=[];F;)q.push(F),F=F.next;return q},(function(){try{Object.defineProperty(a.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}})();var M;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(M=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(F){return!!M.call(this,F)||F&&F._writableState instanceof a}})):M=function(F){return F instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(F,q,$){var te=this._writableState,se=!1;return typeof q=="function"&&($=q,q=null),I.isBuffer(F)?q="buffer":q||(q=te.defaultEncoding),typeof $!="function"&&($=o),te.ended?c(this,$):d(this,te,F,$)&&(te.pendingcb++,se=h(this,te,F,q,$)),se},l.prototype.cork=function(){var F=this._writableState;F.corked++},l.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.finished||F.bufferProcessing||!F.bufferedRequest||x(this,F))},l.prototype.setDefaultEncoding=function(F){if(typeof F=="string"&&(F=F.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((F+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+F);return this._writableState.defaultEncoding=F,this},l.prototype._write=function(F,q,$){$(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(F,q,$){var te=this._writableState;typeof F=="function"?($=F,F=null,q=null):typeof q=="function"&&($=q,q=null),F!=null&&this.write(F,q),te.corked&&(te.corked=1,this.uncork()),te.ending||te.finished||V(this,te,$)}}).call(t,e(28),e(439).setImmediate)},function(n,t,e){function i(d){if(d&&!l(d))throw new Error("Unknown encoding: "+d)}function r(d){return d.toString(this.encoding)}function o(d){this.charReceived=d.length%2,this.charLength=this.charReceived?2:0}function s(d){this.charReceived=d.length%3,this.charLength=this.charReceived?3:0}var a=e(1).Buffer,l=a.isEncoding||function(d){switch(d&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(d){switch(this.encoding=(d||"utf8").toLowerCase().replace(/[-_]/,""),i(d),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(d){for(var u="";this.charLength;){var h=d.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:d.length;if(d.copy(this.charBuffer,this.charReceived,0,h),this.charReceived+=h,this.charReceived<this.charLength)return"";d=d.slice(h,d.length),u=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var p=u.charCodeAt(u.length-1);if(!(p>=55296&&p<=56319)){if(this.charReceived=this.charLength=0,d.length===0)return u;break}this.charLength+=this.surrogateSize,u=""}this.detectIncompleteChar(d);var f=d.length;this.charLength&&(d.copy(this.charBuffer,0,d.length-this.charReceived,f),f-=this.charReceived),u+=d.toString(this.encoding,0,f);var f=u.length-1,p=u.charCodeAt(f);if(p>=55296&&p<=56319){var y=this.surrogateSize;return this.charLength+=y,this.charReceived+=y,this.charBuffer.copy(this.charBuffer,y,0,y),d.copy(this.charBuffer,0,0,y),u.substring(0,f)}return u},c.prototype.detectIncompleteChar=function(d){for(var u=d.length>=3?3:d.length;u>0;u--){var h=d[d.length-u];if(u==1&&h>>5==6){this.charLength=2;break}if(u<=2&&h>>4==14){this.charLength=3;break}if(u<=3&&h>>3==30){this.charLength=4;break}}this.charReceived=u},c.prototype.end=function(d){var u="";if(d&&d.length&&(u=this.write(d)),this.charReceived){var h=this.charReceived,f=this.charBuffer,p=this.encoding;u+=f.slice(0,h).toString(p)}return u}},function(n,t,e){function i(l,c){return s.call(this,c),a.isBuffer(l)?(this.base=l,this.offset=0,void(this.length=l.length)):void this.error("Input not Buffer")}function r(l,c){if(Array.isArray(l))this.length=0,this.value=l.map(function(d){return d instanceof r||(d=new r(d,c)),this.length+=d.length,d},this);else if(typeof l=="number"){if(!(0<=l&&l<=255))return c.error("non-byte EncoderBuffer value");this.value=l,this.length=1}else if(typeof l=="string")this.value=l,this.length=a.byteLength(l);else{if(!a.isBuffer(l))return c.error("Unsupported type: "+typeof l);this.value=l,this.length=l.length}}var o=e(3),s=e(59).Reporter,a=e(1).Buffer;o(i,s),t.DecoderBuffer=i,i.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},i.prototype.restore=function(l){var c=new i(this.base);return c.offset=l.offset,c.length=this.offset,this.offset=l.offset,s.prototype.restore.call(this,l.reporter),c},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(l){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(l||"DecoderBuffer overrun")},i.prototype.skip=function(l,c){if(!(this.offset+l<=this.length))return this.error(c||"DecoderBuffer overrun");var d=new i(this.base);return d._reporterState=this._reporterState,d.offset=this.offset,d.length=this.offset+l,this.offset+=l,d},i.prototype.raw=function(l){return this.base.slice(l?l.offset:this.offset,this.length)},t.EncoderBuffer=r,r.prototype.join=function(l,c){return l||(l=new a(this.length)),c||(c=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(d){d.join(l,c),c+=d.length}):(typeof this.value=="number"?l[c]=this.value:typeof this.value=="string"?l.write(this.value,c):a.isBuffer(this.value)&&this.value.copy(l,c),c+=this.length)),l}},function(n,t,e){var i=t;i._reverse=function(r){var o={};return Object.keys(r).forEach(function(s){(0|s)==s&&(s|=0);var a=r[s];o[a]=s}),o},i.der=e(193)},function(n,t,e){function i(h){this.enc="der",this.name=h.name,this.entity=h,this.tree=new r,this.tree._init(h.body)}function r(h){c.Node.call(this,"der",h)}function o(h,f){var p=h.readUInt8(f);if(h.isError(p))return p;var y=u.tagClass[p>>6],v=(32&p)===0;if((31&p)===31){var b=p;for(p=0;(128&b)===128;){if(b=h.readUInt8(f),h.isError(b))return b;p<<=7,p|=127&b}}else p&=31;var S=u.tag[p];return{cls:y,primitive:v,tag:p,tagStr:S}}function s(h,f,p){var y=h.readUInt8(p);if(h.isError(y))return y;if(!f&&y===128)return null;if((128&y)===0)return y;var v=127&y;if(v>4)return h.error("length octect is too long");y=0;for(var b=0;b<v;b++){y<<=8;var S=h.readUInt8(p);if(h.isError(S))return S;y|=S}return y}var a=e(3),l=e(33),c=l.base,d=l.bignum,u=l.constants.der;n.exports=i,i.prototype.decode=function(h,f){return h instanceof c.DecoderBuffer||(h=new c.DecoderBuffer(h,f)),this.tree._decode(h,f)},a(r,c.Node),r.prototype._peekTag=function(h,f,p){if(h.isEmpty())return!1;var y=h.save(),v=o(h,'Failed to peek tag: "'+f+'"');return h.isError(v)?v:(h.restore(y),v.tag===f||v.tagStr===f||v.tagStr+"of"===f||p)},r.prototype._decodeTag=function(h,f,p){var y=o(h,'Failed to decode tag of "'+f+'"');if(h.isError(y))return y;var v=s(h,y.primitive,'Failed to get length of "'+f+'"');if(h.isError(v))return v;if(!p&&y.tag!==f&&y.tagStr!==f&&y.tagStr+"of"!==f)return h.error('Failed to match tag: "'+f+'"');if(y.primitive||v!==null)return h.skip(v,'Failed to match body of: "'+f+'"');var b=h.save(),S=this._skipUntilEnd(h,'Failed to skip indefinite length body: "'+this.tag+'"');return h.isError(S)?S:(v=h.offset-b.offset,h.restore(b),h.skip(v,'Failed to match body of: "'+f+'"'))},r.prototype._skipUntilEnd=function(h,f){for(;;){var p=o(h,f);if(h.isError(p))return p;var y=s(h,p.primitive,f);if(h.isError(y))return y;var v;if(v=p.primitive||y!==null?h.skip(y):this._skipUntilEnd(h,f),h.isError(v))return v;if(p.tagStr==="end")break}},r.prototype._decodeList=function(h,f,p,y){for(var v=[];!h.isEmpty();){var b=this._peekTag(h,"end");if(h.isError(b))return b;var S=p.decode(h,"der",y);if(h.isError(S)&&b)break;v.push(S)}return v},r.prototype._decodeStr=function(h,f){if(f==="bitstr"){var p=h.readUInt8();return h.isError(p)?p:{unused:p,data:h.raw()}}if(f==="bmpstr"){var y=h.raw();if(y.length%2===1)return h.error("Decoding of string type: bmpstr length mismatch");for(var v="",b=0;b<y.length/2;b++)v+=String.fromCharCode(y.readUInt16BE(2*b));return v}if(f==="numstr"){var S=h.raw().toString("ascii");return this._isNumstr(S)?S:h.error("Decoding of string type: numstr unsupported characters")}if(f==="octstr"||f==="objDesc")return h.raw();if(f==="printstr"){var x=h.raw().toString("ascii");return this._isPrintstr(x)?x:h.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(f)?h.raw().toString():h.error("Decoding of string type: "+f+" unsupported")},r.prototype._decodeObjid=function(h,f,p){for(var y,v=[],b=0;!h.isEmpty();){var S=h.readUInt8();b<<=7,b|=127&S,(128&S)===0&&(v.push(b),b=0)}128&S&&v.push(b);var x=v[0]/40|0,k=v[0]%40;if(y=p?v:[x,k].concat(v.slice(1)),f){var L=f[y.join(" ")];L===void 0&&(L=f[y.join(".")]),L!==void 0&&(y=L)}return y},r.prototype._decodeTime=function(h,f){var p=h.raw().toString();if(f==="gentime")var y=0|p.slice(0,4),v=0|p.slice(4,6),b=0|p.slice(6,8),S=0|p.slice(8,10),x=0|p.slice(10,12),k=0|p.slice(12,14);else{if(f!=="utctime")return h.error("Decoding "+f+" time is not supported yet");var y=0|p.slice(0,2),v=0|p.slice(2,4),b=0|p.slice(4,6),S=0|p.slice(6,8),x=0|p.slice(8,10),k=0|p.slice(10,12);y=y<70?2e3+y:1900+y}return Date.UTC(y,v-1,b,S,x,k,0)},r.prototype._decodeNull=function(h){return null},r.prototype._decodeBool=function(h){var f=h.readUInt8();return h.isError(f)?f:f!==0},r.prototype._decodeInt=function(h,f){var p=h.raw(),y=new d(p);return f&&(y=f[y.toString(10)]||y),y},r.prototype._use=function(h,f){return typeof h=="function"&&(h=h(f)),h._getDecoder("der").tree}},function(n,t,e){function i(h){this.enc="der",this.name=h.name,this.entity=h,this.tree=new r,this.tree._init(h.body)}function r(h){d.Node.call(this,"der",h)}function o(h){return h<10?"0"+h:h}function s(h,f,p,y){var v;if(h==="seqof"?h="seq":h==="setof"&&(h="set"),u.tagByName.hasOwnProperty(h))v=u.tagByName[h];else{if(typeof h!="number"||(0|h)!==h)return y.error("Unknown tag: "+h);v=h}return v>=31?y.error("Multi-octet tag encoding unsupported"):(f||(v|=32),v|=u.tagClassByName[p||"universal"]<<6)}var a=e(3),l=e(1).Buffer,c=e(33),d=c.base,u=c.constants.der;n.exports=i,i.prototype.encode=function(h,f){return this.tree._encode(h,f).join()},a(r,d.Node),r.prototype._encodeComposite=function(h,f,p,y){var v=s(h,f,p,this.reporter);if(y.length<128){var x=new l(2);return x[0]=v,x[1]=y.length,this._createEncoderBuffer([x,y])}for(var b=1,S=y.length;S>=256;S>>=8)b++;var x=new l(2+b);x[0]=v,x[1]=128|b;for(var S=1+b,k=y.length;k>0;S--,k>>=8)x[S]=255&k;return this._createEncoderBuffer([x,y])},r.prototype._encodeStr=function(h,f){if(f==="bitstr")return this._createEncoderBuffer([0|h.unused,h.data]);if(f==="bmpstr"){for(var p=new l(2*h.length),y=0;y<h.length;y++)p.writeUInt16BE(h.charCodeAt(y),2*y);return this._createEncoderBuffer(p)}return f==="numstr"?this._isNumstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: numstr supports only digits and space"):f==="printstr"?this._isPrintstr(h)?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(f)?this._createEncoderBuffer(h):f==="objDesc"?this._createEncoderBuffer(h):this.reporter.error("Encoding of string type: "+f+" unsupported")},r.prototype._encodeObjid=function(h,f,p){if(typeof h=="string"){if(!f)return this.reporter.error("string objid given, but no values map found");if(!f.hasOwnProperty(h))return this.reporter.error("objid not found in values map");h=f[h].split(/[\s\.]+/g);for(var y=0;y<h.length;y++)h[y]|=0}else if(Array.isArray(h)){h=h.slice();for(var y=0;y<h.length;y++)h[y]|=0}if(!Array.isArray(h))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(h));if(!p){if(h[1]>=40)return this.reporter.error("Second objid identifier OOB");h.splice(0,2,40*h[0]+h[1])}for(var v=0,y=0;y<h.length;y++){var b=h[y];for(v++;b>=128;b>>=7)v++}for(var S=new l(v),x=S.length-1,y=h.length-1;y>=0;y--){var b=h[y];for(S[x--]=127&b;(b>>=7)>0;)S[x--]=128|127&b}return this._createEncoderBuffer(S)},r.prototype._encodeTime=function(h,f){var p,y=new Date(h);return f==="gentime"?p=[o(y.getFullYear()),o(y.getUTCMonth()+1),o(y.getUTCDate()),o(y.getUTCHours()),o(y.getUTCMinutes()),o(y.getUTCSeconds()),"Z"].join(""):f==="utctime"?p=[o(y.getFullYear()%100),o(y.getUTCMonth()+1),o(y.getUTCDate()),o(y.getUTCHours()),o(y.getUTCMinutes()),o(y.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+f+" time is not supported yet"),this._encodeStr(p,"octstr")},r.prototype._encodeNull=function(){return this._createEncoderBuffer("")},r.prototype._encodeInt=function(h,f){if(typeof h=="string"){if(!f)return this.reporter.error("String int or enum given, but no values map");if(!f.hasOwnProperty(h))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(h));h=f[h]}if(typeof h!="number"&&!l.isBuffer(h)){var p=h.toArray();!h.sign&&128&p[0]&&p.unshift(0),h=new l(p)}if(l.isBuffer(h)){var y=h.length;h.length===0&&y++;var v=new l(y);return h.copy(v),h.length===0&&(v[0]=0),this._createEncoderBuffer(v)}if(h<128)return this._createEncoderBuffer(h);if(h<256)return this._createEncoderBuffer([0,h]);for(var y=1,b=h;b>=256;b>>=8)y++;for(var v=new Array(y),b=v.length-1;b>=0;b--)v[b]=255&h,h>>=8;return 128&v[0]&&v.unshift(0),this._createEncoderBuffer(new l(v))},r.prototype._encodeBool=function(h){return this._createEncoderBuffer(h?255:0)},r.prototype._use=function(h,f){return typeof h=="function"&&(h=h(f)),h._getEncoder("der").tree},r.prototype._skipDefault=function(h,f,p){var y,v=this._baseState;if(v.default===null)return!1;var b=h.join();if(v.defaultBuffer===void 0&&(v.defaultBuffer=this._encodeValue(v.default,f,p).join()),b.length!==v.defaultBuffer.length)return!1;for(y=0;y<b.length;y++)if(b[y]!==v.defaultBuffer[y])return!1;return!0}},function(n,t,e){"use strict";function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}function r(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?l:c}function o(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}var s=e(60),a=(function(l){function c(){return i(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return o(c,l),c})(s);n.exports=a},function(n,t,e){"use strict";(function(i){function r(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var o=(function(){function u(h,f){for(var p=0;p<f.length;p++){var y=f[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,f,p){return f&&u(h.prototype,f),p&&u(h,p),h}})(),s=e(33),a=65537,l=s.define("RsaPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}),c=s.define("RsaPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int(),this.optional().key("otherPrimeInfos").seqof(this.obj(this.key("prime").int(),this.key("exponent").int(),this.key("coefficient").int())))}),d=(function(){function u(){r(this,u)}return o(u,null,[{key:"modulusToPem",value:function(h){if(h[0]===0)throw new Error("Modulus may not start with zero");128&h[0]&&(h=i.concat([new i([0]),h]));var f=l.encode({modulus:h,publicExponent:a});return`-----BEGIN RSA PUBLIC KEY-----
`+f.toString("base64").match(/.{1,64}/g).join(`
`)+`
-----END RSA PUBLIC KEY-----
`}},{key:"modulusFromPrivateKey",value:function(h){var f=h.replace("-----BEGIN RSA PRIVATE KEY-----","").replace("-----END RSA PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,""),p=new i(f,"base64"),y=c.decode(p),v=y.modulus.toBuffer();return v}}]),u})();n.exports=d}).call(t,e(1).Buffer)},function(n,t){function e(i){throw new Error("Cannot find module '"+i+"'.")}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=136},function(n,t,e){function i(s){this.rand=s}var r;if(n.exports=function(s){return r||(r=new i(null)),r.generate(s)},n.exports.Rand=i,i.prototype.generate=function(s){return this._rand(s)},typeof self=="object")self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(s){var a=new Uint8Array(s);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(s){var a=new Uint8Array(s);return self.msCrypto.getRandomValues(a),a}:i.prototype._rand=function(){throw new Error("Not implemented yet")};else try{var o=e(468);i.prototype._rand=function(s){return o.randomBytes(s)}}catch{i.prototype._rand=function(a){for(var l=new Uint8Array(a),c=0;c<l.length;c++)l[c]=this.rand.getByte();return l}}},function(n,t,e){(function(i){function r(u,h,f,p){if(!(this instanceof r))return new r(u,h,f);a.call(this),this._finID=i.concat([f,new i([0,0,0,1])]),f=i.concat([f,new i([0,0,0,2])]),this._cipher=new s.AES(h),this._prev=new i(f.length),this._cache=new i(""),this._secCache=new i(""),this._decrypt=p,this._alen=0,this._len=0,f.copy(this._prev),this._mode=u;var y=new i(4);y.fill(0),this._ghash=new c(this._cipher.encryptBlock(y)),this._authTag=null,this._called=!1}function o(u,h){var f=0;u.length!==h.length&&f++;for(var p=Math.min(u.length,h.length),y=-1;++y<p;)f+=u[y]^h[y];return f}var s=e(72),a=e(50),l=e(3),c=e(215),d=e(62);l(r,a),n.exports=r,r.prototype._update=function(u){if(!this._called&&this._alen){var h=16-this._alen%16;h<16&&(h=new i(h),h.fill(0),this._ghash.update(h))}this._called=!0;var f=this._mode.encrypt(this,u);return this._decrypt?this._ghash.update(u):this._ghash.update(f),this._len+=u.length,f},r.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var u=d(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(o(u,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=u;this._cipher.scrub()},r.prototype.getAuthTag=function(){if(!this._decrypt&&i.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},r.prototype.setAuthTag=function(u){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=u},r.prototype.setAAD=function(u){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(u),this._alen+=u.length}}).call(t,e(1).Buffer)},function(n,t,e){var i=e(62);t.encrypt=function(r,o){var s=i(o,r._prev);return r._prev=r._cipher.encryptBlock(s),r._prev},t.decrypt=function(r,o){var s=r._prev;r._prev=o;var a=r._cipher.decryptBlock(o);return i(a,s)}},function(n,t,e){(function(i){function r(s,a,l){var c=a.length,d=o(a,s._cache);return s._cache=s._cache.slice(c),s._prev=i.concat([s._prev,l?a:d]),d}var o=e(62);t.encrypt=function(s,a,l){for(var c,d=new i("");a.length;){if(s._cache.length===0&&(s._cache=s._cipher.encryptBlock(s._prev),s._prev=new i("")),!(s._cache.length<=a.length)){d=i.concat([d,r(s,a,l)]);break}c=s._cache.length,d=i.concat([d,r(s,a.slice(0,c),l)]),a=a.slice(c)}return d}}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(s,a,l){for(var c,d,u,h=-1,f=8,p=0;++h<f;)c=s._cipher.encryptBlock(s._prev),d=a&1<<7-h?128:0,u=c[0]^d,p+=(128&u)>>h%8,s._prev=o(s._prev,l?d:u);return p}function o(s,a){var l=s.length,c=-1,d=new i(s.length);for(s=i.concat([s,new i([a])]);++c<l;)d[c]=s[c]<<1|s[c+1]>>7;return d}t.encrypt=function(s,a,l){for(var c=a.length,d=new i(c),u=-1;++u<c;)d[u]=r(s,a[u],l);return d}}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(o,s,a){var l=o._cipher.encryptBlock(o._prev),c=l[0]^s;return o._prev=i.concat([o._prev.slice(1),new i([a?s:c])]),c}t.encrypt=function(o,s,a){for(var l=s.length,c=new i(l),d=-1;++d<l;)c[d]=r(o,s[d],a);return c}}).call(t,e(1).Buffer)},function(n,t){t.encrypt=function(e,i){return e._cipher.encryptBlock(i)},t.decrypt=function(e,i){return e._cipher.decryptBlock(i)}},function(n,t,e){(function(i){function r(s){return s._prev=s._cipher.encryptBlock(s._prev),s._prev}var o=e(62);t.encrypt=function(s,a){for(;s._cache.length<a.length;)s._cache=i.concat([s._cache,r(s)]);var l=s._cache.slice(0,a.length);return s._cache=s._cache.slice(a.length),o(a,l)}}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(l,c,d,u){return this instanceof r?(s.call(this),this._cipher=new o.AES(c),this._prev=new i(d.length),this._cache=new i(""),this._secCache=new i(""),this._decrypt=u,d.copy(this._prev),void(this._mode=l)):new r(l,c,d)}var o=e(72),s=e(50),a=e(3);a(r,s),n.exports=r,r.prototype._update=function(l){return this._mode.encrypt(this,l,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()}}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){t["RSA-SHA224"]=t.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new i("302d300d06096086480165030402040500041c","hex")},t["RSA-SHA256"]=t.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new i("3031300d060960864801650304020105000420","hex")},t["RSA-SHA384"]=t.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new i("3041300d060960864801650304020205000430","hex")},t["RSA-SHA512"]=t.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new i("3051300d060960864801650304020305000440","hex")},t["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new i("3021300906052b0e03021a05000414","hex")},t["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new i("","hex")},t.DSA=t["DSA-SHA1"]=t["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new i("","hex")},t["DSA-SHA224"]=t["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new i("","hex")},t["DSA-SHA256"]=t["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new i("","hex")},t["DSA-SHA384"]=t["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new i("","hex")},t["DSA-SHA512"]=t["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new i("","hex")},t["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new i("","hex")},t["RSA-RIPEMD160"]=t.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new i("3021300906052b2403020105000414","hex")},t["RSA-MD5"]=t.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new i("3020300c06082a864886f70d020505000410","hex")}}).call(t,e(1).Buffer)},function(n,t,e){"use strict";t["1.3.132.0.10"]="secp256k1",t["1.3.132.0.33"]="p224",t["1.2.840.10045.3.1.1"]="p192",t["1.2.840.10045.3.1.7"]="p256",t["1.3.132.0.34"]="p384",t["1.3.132.0.35"]="p521"},function(n,t,e){var i=e(22);n.exports=function(r,o){if(typeof r!="number"&&i(r)!="Number")throw TypeError(o);return+r}},function(n,t,e){"use strict";var i=e(12),r=e(44),o=e(11);n.exports=[].copyWithin||function(s,a){var l=i(this),c=o(l.length),d=r(s,c),u=r(a,c),h=arguments.length>2?arguments[2]:void 0,f=Math.min((h===void 0?c:r(h,c))-u,c-d),p=1;for(u<d&&d<u+f&&(p=-1,u+=f-1,d+=f-1);f-- >0;)u in l?l[d]=l[u]:delete l[d],d+=p,u+=p;return l}},function(n,t,e){var i=e(52);n.exports=function(r,o){var s=[];return i(r,!1,s.push,s,o),s}},function(n,t,e){var i=e(15),r=e(12),o=e(64),s=e(11);n.exports=function(a,l,c,d,u){i(l);var h=r(a),f=o(h),p=s(h.length),y=u?p-1:0,v=u?-1:1;if(c<2)for(;;){if(y in f){d=f[y],y+=v;break}if(y+=v,u?y<0:p<=y)throw TypeError("Reduce of empty array with no initial value")}for(;u?y>=0:p>y;y+=v)y in f&&(d=l(d,f[y],y,h));return d}},function(n,t,e){"use strict";var i=e(15),r=e(6),o=e(79),s=[].slice,a={},l=function(c,d,u){if(!(d in a)){for(var h=[],f=0;f<d;f++)h[f]="a["+f+"]";a[d]=Function("F,a","return new F("+h.join(",")+")")}return a[d](c,u)};n.exports=Function.bind||function(c){var d=i(this),u=s.call(arguments,1),h=function(){var f=u.concat(s.call(arguments));return this instanceof h?l(d,f.length,f):o(d,f,c)};return r(d.prototype)&&(h.prototype=d.prototype),h}},function(n,t,e){"use strict";var i=e(9).f,r=e(39),o=e(42),s=e(30),a=e(37),l=e(23),c=e(52),d=e(108),u=e(159),h=e(43),f=e(8),p=e(34).fastKey,y=f?"_s":"size",v=function(b,S){var x,k=p(S);if(k!=="F")return b._i[k];for(x=b._f;x;x=x.n)if(x.k==S)return x};n.exports={getConstructor:function(b,S,x,k){var L=b(function(D,V){a(D,L,S,"_i"),D._i=r(null),D._f=void 0,D._l=void 0,D[y]=0,V!=null&&c(V,x,D[k],D)});return o(L.prototype,{clear:function(){for(var D=this,V=D._i,O=D._f;O;O=O.n)O.r=!0,O.p&&(O.p=O.p.n=void 0),delete V[O.i];D._f=D._l=void 0,D[y]=0},delete:function(D){var V=this,O=v(V,D);if(O){var R=O.n,G=O.p;delete V._i[O.i],O.r=!0,G&&(G.n=R),R&&(R.p=G),V._f==O&&(V._f=R),V._l==O&&(V._l=G),V[y]--}return!!O},forEach:function(D){a(this,L,"forEach");for(var V,O=s(D,arguments.length>1?arguments[1]:void 0,3);V=V?V.n:this._f;)for(O(V.v,V.k,this);V&&V.r;)V=V.p},has:function(D){return!!v(this,D)}}),f&&i(L.prototype,"size",{get:function(){return l(this[y])}}),L},def:function(b,S,x){var k,L,D=v(b,S);return D?D.v=x:(b._l=D={i:L=p(S,!0),k:S,v:x,p:k=b._l,n:void 0,r:!1},b._f||(b._f=D),k&&(k.n=D),b[y]++,L!=="F"&&(b._i[L]=D)),b},getEntry:v,setStrong:function(b,S,x){d(b,S,function(k,L){this._t=k,this._k=L,this._l=void 0},function(){for(var k=this,L=k._k,D=k._l;D&&D.r;)D=D.p;return k._t&&(k._l=D=D?D.n:k._t._f)?L=="keys"?u(0,D.k):L=="values"?u(0,D.v):u(0,[D.k,D.v]):(k._t=void 0,u(1))},x?"entries":"values",!x,!0),h(S)}}},function(n,t,e){var i=e(63),r=e(150);n.exports=function(o){return function(){if(i(this)!=o)throw TypeError(o+"#toJSON isn't generic");return r(this)}}},function(n,t,e){"use strict";var i=e(42),r=e(34).getWeak,o=e(2),s=e(6),a=e(37),l=e(52),c=e(25),d=e(14),u=c(5),h=c(6),f=0,p=function(b){return b._l||(b._l=new y)},y=function(){this.a=[]},v=function(b,S){return u(b.a,function(x){return x[0]===S})};y.prototype={get:function(b){var S=v(this,b);if(S)return S[1]},has:function(b){return!!v(this,b)},set:function(b,S){var x=v(this,b);x?x[1]=S:this.a.push([b,S])},delete:function(b){var S=h(this.a,function(x){return x[0]===b});return~S&&this.a.splice(S,1),!!~S}},n.exports={getConstructor:function(b,S,x,k){var L=b(function(D,V){a(D,L,S,"_i"),D._i=f++,D._l=void 0,V!=null&&l(V,x,D[k],D)});return i(L.prototype,{delete:function(D){if(!s(D))return!1;var V=r(D);return V===!0?p(this).delete(D):V&&d(V,this._i)&&delete V[this._i]},has:function(D){if(!s(D))return!1;var V=r(D);return V===!0?p(this).has(D):V&&d(V,this._i)}}),L},def:function(b,S,x){var k=r(o(S),!0);return k===!0?p(b).set(S,x):k[b._i]=x,b},ufstore:p}},function(n,t,e){n.exports=!e(8)&&!e(5)(function(){return Object.defineProperty(e(100)("div"),"a",{get:function(){return 7}}).a!=7})},function(n,t,e){var i=e(6),r=Math.floor;n.exports=function(o){return!i(o)&&isFinite(o)&&r(o)===o}},function(n,t,e){var i=e(2);n.exports=function(r,o,s,a){try{return a?o(i(s)[0],s[1]):o(s)}catch(c){var l=r.return;throw l!==void 0&&i(l.call(r)),c}}},function(n,t){n.exports=function(e,i){return{value:i,done:!!e}}},function(n,t){n.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(n,t,e){"use strict";var i=e(41),r=e(83),o=e(65),s=e(12),a=e(64),l=Object.assign;n.exports=!l||e(5)(function(){var c={},d={},u=Symbol(),h="abcdefghijklmnopqrst";return c[u]=7,h.split("").forEach(function(f){d[f]=f}),l({},c)[u]!=7||Object.keys(l({},d)).join("")!=h})?function(c,d){for(var u=s(c),h=arguments.length,f=1,p=r.f,y=o.f;h>f;)for(var v,b=a(arguments[f++]),S=p?i(b).concat(p(b)):i(b),x=S.length,k=0;x>k;)y.call(b,v=S[k++])&&(u[v]=b[v]);return u}:l},function(n,t,e){var i=e(9),r=e(2),o=e(41);n.exports=e(8)?Object.defineProperties:function(s,a){r(s);for(var l,c=o(a),d=c.length,u=0;d>u;)i.f(s,l=c[u++],a[l]);return s}},function(n,t,e){var i=e(19),r=e(40).f,o={}.toString,s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(l){try{return r(l)}catch{return s.slice()}};n.exports.f=function(l){return s&&o.call(l)=="[object Window]"?a(l):r(i(l))}},function(n,t,e){var i=e(14),r=e(19),o=e(75)(!1),s=e(113)("IE_PROTO");n.exports=function(a,l){var c,d=r(a),u=0,h=[];for(c in d)c!=s&&i(d,c)&&h.push(c);for(;l.length>u;)i(d,c=l[u++])&&(~o(h,c)||h.push(c));return h}},function(n,t,e){var i=e(41),r=e(19),o=e(65).f;n.exports=function(s){return function(a){for(var l,c=r(a),d=i(c),u=d.length,h=0,f=[];u>h;)o.call(c,l=d[h++])&&f.push(s?[l,c[l]]:c[l]);return f}}},function(n,t,e){var i=e(40),r=e(83),o=e(2),s=e(4).Reflect;n.exports=s&&s.ownKeys||function(a){var l=i.f(o(a)),c=r.f;return c?l.concat(c(a)):l}},function(n,t,e){var i=e(4).parseFloat,r=e(55).trim;n.exports=1/i(e(118)+"-0")!==-1/0?function(o){var s=r(String(o),3),a=i(s);return a===0&&s.charAt(0)=="-"?-0:a}:i},function(n,t,e){var i=e(4).parseInt,r=e(55).trim,o=e(118),s=/^[\-+]?0[xX]/;n.exports=i(o+"08")!==8||i(o+"0x16")!==22?function(a,l){var c=r(String(a),3);return i(c,l>>>0||(s.test(c)?16:10))}:i},function(n,t){n.exports=Object.is||function(e,i){return e===i?e!==0||1/e===1/i:e!=e&&i!=i}},function(n,t,e){var i=e(11),r=e(117),o=e(23);n.exports=function(s,a,l,c){var d=String(o(s)),u=d.length,h=l===void 0?" ":String(l),f=i(a);if(f<=u||h=="")return d;var p=f-u,y=r.call(h,Math.ceil(p/h.length));return y.length>p&&(y=y.slice(0,p)),c?y+d:d+y}},function(n,t,e){t.f=e(7)},function(n,t,e){"use strict";var i=e(153);n.exports=e(76)("Map",function(r){return function(){return r(this,arguments.length>0?arguments[0]:void 0)}},{get:function(r){var o=i.getEntry(this,r);return o&&o.v},set:function(r,o){return i.def(this,r===0?0:r,o)}},i,!0)},function(n,t,e){e(8)&&/./g.flags!="g"&&e(9).f(RegExp.prototype,"flags",{configurable:!0,get:e(78)})},function(n,t,e){"use strict";var i=e(153);n.exports=e(76)("Set",function(r){return function(){return r(this,arguments.length>0?arguments[0]:void 0)}},{add:function(r){return i.def(this,r=r===0?0:r,r)}},i)},function(n,t,e){"use strict";var i,r=e(25)(0),o=e(17),s=e(34),a=e(161),l=e(155),c=e(6),d=s.getWeak,u=Object.isExtensible,h=l.ufstore,f={},p=function(b){return function(){return b(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(b){if(c(b)){var S=d(b);return S===!0?h(this).get(b):S?S[this._i]:void 0}},set:function(b,S){return l.def(this,b,S)}},v=n.exports=e(76)("WeakMap",p,y,l,!0,!0);new v().set((Object.freeze||Object)(f),7).get(f)!=7&&(i=l.getConstructor(p),a(i.prototype,y),s.NEED=!0,r(["delete","has","get","set"],function(b){var S=v.prototype,x=S[b];o(S,b,function(k,L){if(c(k)&&!u(k)){this._f||(this._f=new i);var D=this._f[b](k,L);return b=="set"?this:D}return x.call(this,k,L)})}))},function(n,t,e){"use strict";function i(h,f){h[f>>5]|=128<<f%32,h[(f+64>>>9<<4)+14]=f;for(var p=1732584193,y=-271733879,v=-1732584194,b=271733878,S=0;S<h.length;S+=16){var x=p,k=y,L=v,D=b;p=o(p,y,v,b,h[S+0],7,-680876936),b=o(b,p,y,v,h[S+1],12,-389564586),v=o(v,b,p,y,h[S+2],17,606105819),y=o(y,v,b,p,h[S+3],22,-1044525330),p=o(p,y,v,b,h[S+4],7,-176418897),b=o(b,p,y,v,h[S+5],12,1200080426),v=o(v,b,p,y,h[S+6],17,-1473231341),y=o(y,v,b,p,h[S+7],22,-45705983),p=o(p,y,v,b,h[S+8],7,1770035416),b=o(b,p,y,v,h[S+9],12,-1958414417),v=o(v,b,p,y,h[S+10],17,-42063),y=o(y,v,b,p,h[S+11],22,-1990404162),p=o(p,y,v,b,h[S+12],7,1804603682),b=o(b,p,y,v,h[S+13],12,-40341101),v=o(v,b,p,y,h[S+14],17,-1502002290),y=o(y,v,b,p,h[S+15],22,1236535329),p=s(p,y,v,b,h[S+1],5,-165796510),b=s(b,p,y,v,h[S+6],9,-1069501632),v=s(v,b,p,y,h[S+11],14,643717713),y=s(y,v,b,p,h[S+0],20,-373897302),p=s(p,y,v,b,h[S+5],5,-701558691),b=s(b,p,y,v,h[S+10],9,38016083),v=s(v,b,p,y,h[S+15],14,-660478335),y=s(y,v,b,p,h[S+4],20,-405537848),p=s(p,y,v,b,h[S+9],5,568446438),b=s(b,p,y,v,h[S+14],9,-1019803690),v=s(v,b,p,y,h[S+3],14,-187363961),y=s(y,v,b,p,h[S+8],20,1163531501),p=s(p,y,v,b,h[S+13],5,-1444681467),b=s(b,p,y,v,h[S+2],9,-51403784),v=s(v,b,p,y,h[S+7],14,1735328473),y=s(y,v,b,p,h[S+12],20,-1926607734),p=a(p,y,v,b,h[S+5],4,-378558),b=a(b,p,y,v,h[S+8],11,-2022574463),v=a(v,b,p,y,h[S+11],16,1839030562),y=a(y,v,b,p,h[S+14],23,-35309556),p=a(p,y,v,b,h[S+1],4,-1530992060),b=a(b,p,y,v,h[S+4],11,1272893353),v=a(v,b,p,y,h[S+7],16,-155497632),y=a(y,v,b,p,h[S+10],23,-1094730640),p=a(p,y,v,b,h[S+13],4,681279174),b=a(b,p,y,v,h[S+0],11,-358537222),v=a(v,b,p,y,h[S+3],16,-722521979),y=a(y,v,b,p,h[S+6],23,76029189),p=a(p,y,v,b,h[S+9],4,-640364487),b=a(b,p,y,v,h[S+12],11,-421815835),v=a(v,b,p,y,h[S+15],16,530742520),y=a(y,v,b,p,h[S+2],23,-995338651),p=l(p,y,v,b,h[S+0],6,-198630844),b=l(b,p,y,v,h[S+7],10,1126891415),v=l(v,b,p,y,h[S+14],15,-1416354905),y=l(y,v,b,p,h[S+5],21,-57434055),p=l(p,y,v,b,h[S+12],6,1700485571),b=l(b,p,y,v,h[S+3],10,-1894986606),v=l(v,b,p,y,h[S+10],15,-1051523),y=l(y,v,b,p,h[S+1],21,-2054922799),p=l(p,y,v,b,h[S+8],6,1873313359),b=l(b,p,y,v,h[S+15],10,-30611744),v=l(v,b,p,y,h[S+6],15,-1560198380),y=l(y,v,b,p,h[S+13],21,1309151649),p=l(p,y,v,b,h[S+4],6,-145523070),b=l(b,p,y,v,h[S+11],10,-1120210379),v=l(v,b,p,y,h[S+2],15,718787259),y=l(y,v,b,p,h[S+9],21,-343485551),p=c(p,x),y=c(y,k),v=c(v,L),b=c(b,D)}return Array(p,y,v,b)}function r(h,f,p,y,v,b){return c(d(c(c(f,h),c(y,b)),v),p)}function o(h,f,p,y,v,b,S){return r(f&p|~f&y,h,f,v,b,S)}function s(h,f,p,y,v,b,S){return r(f&y|p&~y,h,f,v,b,S)}function a(h,f,p,y,v,b,S){return r(f^p^y,h,f,v,b,S)}function l(h,f,p,y,v,b,S){return r(p^(f|~y),h,f,v,b,S)}function c(h,f){var p=(65535&h)+(65535&f),y=(h>>16)+(f>>16)+(p>>16);return y<<16|65535&p}function d(h,f){return h<<f|h>>>32-f}var u=e(404);n.exports=function(h){return u.hash(h,i,16)}},function(n,t,e){function i(){if(x!==null)return x;var k=1048576,L=[];L[0]=2;for(var D=1,V=3;V<k;V+=2){for(var O=Math.ceil(Math.sqrt(V)),R=0;R<D&&L[R]<=O&&V%L[R]!==0;R++);D!==R&&L[R]<=O||(L[D++]=V)}return x=L,L}function r(k){for(var L=i(),D=0;D<L.length;D++)if(k.modn(L[D])===0)return k.cmpn(L[D])===0;return!0}function o(k){var L=l.mont(k);return f.toRed(L).redPow(k.subn(1)).fromRed().cmpn(1)===0}function s(k,L){if(k<16)return new l(L===2||L===5?[140,123]:[140,39]);L=new l(L);for(var D,V;;){for(D=new l(a(Math.ceil(k/8)));D.bitLength()>k;)D.ishrn(1);if(D.isEven()&&D.iadd(h),D.testn(1)||D.iadd(f),L.cmp(f)){if(!L.cmp(p))for(;D.mod(y).cmp(v);)D.iadd(S)}else for(;D.mod(c).cmp(b);)D.iadd(S);if(V=D.shrn(1),r(V)&&r(D)&&o(V)&&o(D)&&u.test(V)&&u.test(D))return D}}var a=e(68);n.exports=s,s.simpleSieve=r,s.fermatTest=o;var l=e(10),c=new l(24),d=e(179),u=new d,h=new l(1),f=new l(2),p=new l(5),y=(new l(16),new l(8),new l(10)),v=new l(3),b=(new l(7),new l(11)),S=new l(4),x=(new l(12),null)},function(n,t){var e={}.toString;n.exports=Array.isArray||function(i){return e.call(i)=="[object Array]"}},function(n,t,e){function i(s){this.rand=s||new o.Rand}var r=e(10),o=e(137);n.exports=i,i.create=function(s){return new i(s)},i.prototype._rand=function(s){var a=s.bitLength(),l=this.rand.generate(Math.ceil(a/8));l[0]|=3;var c=7&a;return c!==0&&(l[l.length-1]>>=7-c),new r(l)},i.prototype.test=function(s,a,l){var c=s.bitLength(),d=r.mont(s),u=new r(1).toRed(d);a||(a=Math.max(1,c/48|0));for(var h=s.subn(1),f=h.subn(1),p=0;!h.testn(p);p++);for(var y=s.shrn(p),v=h.toRed(d),b=!0;a>0;a--){var S=this._rand(f);l&&l(S);var x=S.toRed(d).redPow(y);if(x.cmp(u)!==0&&x.cmp(v)!==0){for(var k=1;k<p;k++){if(x=x.redSqr(),x.cmp(u)===0)return!1;if(x.cmp(v)===0)break}if(k===p)return!1}}return b},i.prototype.getDivisor=function(s,a){var l=s.bitLength(),c=r.mont(s),d=new r(1).toRed(c);a||(a=Math.max(1,l/48|0));for(var u=s.subn(1),h=u.subn(1),f=0;!u.testn(f);f++);for(var p=s.shrn(f),y=u.toRed(c);a>0;a--){var v=this._rand(h),b=s.gcd(v);if(b.cmpn(1)!==0)return b;var S=v.toRed(c).redPow(p);if(S.cmp(d)!==0&&S.cmp(y)!==0){for(var x=1;x<f;x++){if(S=S.redSqr(),S.cmp(d)===0)return S.fromRed().subn(1).gcd(s);if(S.cmp(y)===0)break}if(x===f)return S=S.redSqr(),S.fromRed().subn(1).gcd(s)}}return!1}},function(n,t,e){(function(i,r){var o=e(124),s=e(443);t.pbkdf2=function(c,d,u,h,f,p){if(typeof f=="function"&&(p=f,f=void 0),s(u,h),typeof p!="function")throw new Error("No callback provided to pbkdf2");setTimeout(function(){p(null,t.pbkdf2Sync(c,d,u,h,f))})};var a;if(i.browser)a="utf-8";else{var l=parseInt(i.version.split(".")[0].slice(1),10);a=l>=6?"utf-8":"binary"}t.pbkdf2Sync=function(c,d,u,h,f){r.isBuffer(c)||(c=new r(c,a)),r.isBuffer(d)||(d=new r(d,a)),s(u,h),f=f||"sha1";var p,y=1,v=new r(h),b=new r(d.length+4);d.copy(b,0,0,d.length);for(var S,x,k=1;k<=y;k++){b.writeUInt32BE(k,d.length);var L=o(f,c).update(b).digest();p||(p=L.length,x=new r(p),y=Math.ceil(h/p),S=h-(y-1)*p),L.copy(x,0,0,p);for(var D=1;D<u;D++){L=o(f,c).update(L).digest();for(var V=0;V<p;V++)x[V]^=L[V]}var O=(k-1)*p,R=k===y?S:p;x.copy(v,O,0,R)}return v}}).call(t,e(28),e(1).Buffer)},function(n,t,e){(function(i){function r(s){var a=new i(4);return a.writeUInt32BE(s,0),a}var o=e(56);n.exports=function(s,a){for(var l,c=new i(""),d=0;c.length<a;)l=r(d++),c=i.concat([c,o("sha1").update(s).update(l).digest()]);return c.slice(0,a)}}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(s,a){return new i(s.toRed(o.mont(a.modulus)).redPow(new o(a.publicExponent)).fromRed().toArray())}var o=e(10);n.exports=r}).call(t,e(1).Buffer)},function(n,t){n.exports=function(e,i){for(var r=e.length,o=-1;++o<r;)e[o]^=i[o];return e}},function(n,t,e){"use strict";function i(s){return this instanceof i?void r.call(this,s):new i(s)}n.exports=i;var r=e(127),o=e(66);o.inherits=e(3),o.inherits(i,r),i.prototype._transform=function(s,a,l){l(null,s)}},function(n,t,e){"use strict";(function(i){function r(ce,pe,re){return typeof ce.prependListener=="function"?ce.prependListener(pe,re):void(ce._events&&ce._events[pe]?T(ce._events[pe])?ce._events[pe].unshift(re):ce._events[pe]=[re,ce._events[pe]]:ce.on(pe,re))}function o(ce,pe){A=A||e(47),ce=ce||{},this.objectMode=!!ce.objectMode,pe instanceof A&&(this.objectMode=this.objectMode||!!ce.readableObjectMode);var re=ce.highWaterMark,ae=this.objectMode?16:16384;this.highWaterMark=re||re===0?re:ae,this.highWaterMark=~~this.highWaterMark,this.buffer=new Ie,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=ce.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ce.encoding&&(Se||(Se=e(129).StringDecoder),this.decoder=new Se(ce.encoding),this.encoding=ce.encoding)}function s(ce){return A=A||e(47),this instanceof s?(this._readableState=new o(ce,this),this.readable=!0,ce&&typeof ce.read=="function"&&(this._read=ce.read),void M.call(this)):new s(ce)}function a(ce,pe,re,ae,fe){var De=u(pe,re);if(De)ce.emit("error",De);else if(re===null)pe.reading=!1,h(ce,pe);else if(pe.objectMode||re&&re.length>0)if(pe.ended&&!fe){var be=new Error("stream.push() after EOF");ce.emit("error",be)}else if(pe.endEmitted&&fe){var Ae=new Error("stream.unshift() after end event");ce.emit("error",Ae)}else{var Ce;!pe.decoder||fe||ae||(re=pe.decoder.write(re),Ce=!pe.objectMode&&re.length===0),fe||(pe.reading=!1),Ce||(pe.flowing&&pe.length===0&&!pe.sync?(ce.emit("data",re),ce.read(0)):(pe.length+=pe.objectMode?1:re.length,fe?pe.buffer.unshift(re):pe.buffer.push(re),pe.needReadable&&f(ce))),y(ce,pe)}else fe||(pe.reading=!1);return l(pe)}function l(ce){return!ce.ended&&(ce.needReadable||ce.length<ce.highWaterMark||ce.length===0)}function c(ce){return ce>=Be?ce=Be:(ce--,ce|=ce>>>1,ce|=ce>>>2,ce|=ce>>>4,ce|=ce>>>8,ce|=ce>>>16,ce++),ce}function d(ce,pe){return ce<=0||pe.length===0&&pe.ended?0:pe.objectMode?1:ce!==ce?pe.flowing&&pe.length?pe.buffer.head.data.length:pe.length:(ce>pe.highWaterMark&&(pe.highWaterMark=c(ce)),ce<=pe.length?ce:pe.ended?pe.length:(pe.needReadable=!0,0))}function u(ce,pe){var re=null;return q.isBuffer(pe)||typeof pe=="string"||pe===null||pe===void 0||ce.objectMode||(re=new TypeError("Invalid non-string/buffer chunk")),re}function h(ce,pe){if(!pe.ended){if(pe.decoder){var re=pe.decoder.end();re&&re.length&&(pe.buffer.push(re),pe.length+=pe.objectMode?1:re.length)}pe.ended=!0,f(ce)}}function f(ce){var pe=ce._readableState;pe.needReadable=!1,pe.emittedReadable||(ue("emitReadable",pe.flowing),pe.emittedReadable=!0,pe.sync?I(p,ce):p(ce))}function p(ce){ue("emit readable"),ce.emit("readable"),L(ce)}function y(ce,pe){pe.readingMore||(pe.readingMore=!0,I(v,ce,pe))}function v(ce,pe){for(var re=pe.length;!pe.reading&&!pe.flowing&&!pe.ended&&pe.length<pe.highWaterMark&&(ue("maybeReadMore read 0"),ce.read(0),re!==pe.length);)re=pe.length;pe.readingMore=!1}function b(ce){return function(){var pe=ce._readableState;ue("pipeOnDrain",pe.awaitDrain),pe.awaitDrain&&pe.awaitDrain--,pe.awaitDrain===0&&F(ce,"data")&&(pe.flowing=!0,L(ce))}}function S(ce){ue("readable nexttick read 0"),ce.read(0)}function x(ce,pe){pe.resumeScheduled||(pe.resumeScheduled=!0,I(k,ce,pe))}function k(ce,pe){pe.reading||(ue("resume read 0"),ce.read(0)),pe.resumeScheduled=!1,pe.awaitDrain=0,ce.emit("resume"),L(ce),pe.flowing&&!pe.reading&&ce.read(0)}function L(ce){var pe=ce._readableState;for(ue("flow",pe.flowing);pe.flowing&&ce.read()!==null;);}function D(ce,pe){if(pe.length===0)return null;var re;return pe.objectMode?re=pe.buffer.shift():!ce||ce>=pe.length?(re=pe.decoder?pe.buffer.join(""):pe.buffer.length===1?pe.buffer.head.data:pe.buffer.concat(pe.length),pe.buffer.clear()):re=V(ce,pe.buffer,pe.decoder),re}function V(ce,pe,re){var ae;return ce<pe.head.data.length?(ae=pe.head.data.slice(0,ce),pe.head.data=pe.head.data.slice(ce)):ae=ce===pe.head.data.length?pe.shift():re?O(ce,pe):R(ce,pe),ae}function O(ce,pe){var re=pe.head,ae=1,fe=re.data;for(ce-=fe.length;re=re.next;){var De=re.data,be=ce>De.length?De.length:ce;if(fe+=be===De.length?De:De.slice(0,ce),ce-=be,ce===0){be===De.length?(++ae,re.next?pe.head=re.next:pe.head=pe.tail=null):(pe.head=re,re.data=De.slice(be));break}++ae}return pe.length-=ae,fe}function R(ce,pe){var re=$.allocUnsafe(ce),ae=pe.head,fe=1;for(ae.data.copy(re),ce-=ae.data.length;ae=ae.next;){var De=ae.data,be=ce>De.length?De.length:ce;if(De.copy(re,re.length-ce,0,be),ce-=be,ce===0){be===De.length?(++fe,ae.next?pe.head=ae.next:pe.head=pe.tail=null):(pe.head=ae,ae.data=De.slice(be));break}++fe}return pe.length-=fe,re}function G(ce){var pe=ce._readableState;if(pe.length>0)throw new Error('"endReadable()" called on non-empty stream');pe.endEmitted||(pe.ended=!0,I(Z,pe,ce))}function Z(ce,pe){ce.endEmitted||ce.length!==0||(ce.endEmitted=!0,pe.readable=!1,pe.emit("end"))}function K(ce,pe){for(var re=0,ae=ce.length;re<ae;re++)pe(ce[re],re)}function C(ce,pe){for(var re=0,ae=ce.length;re<ae;re++)if(ce[re]===pe)return re;return-1}n.exports=s;var A,I=e(126),T=e(178);s.ReadableState=o;var M,F=(e(88).EventEmitter,function(ce,pe){return ce.listeners(pe).length});(function(){try{M=e(58)}catch{}finally{M||(M=e(88).EventEmitter)}})();var q=e(1).Buffer,$=e(97),te=e(66);te.inherits=e(3);var se=e(469),ue=void 0;ue=se&&se.debuglog?se.debuglog("stream"):function(){};var Se,Ie=e(451);te.inherits(s,M),s.prototype.push=function(ce,pe){var re=this._readableState;return re.objectMode||typeof ce!="string"||(pe=pe||re.defaultEncoding,pe!==re.encoding&&(ce=$.from(ce,pe),pe="")),a(this,re,ce,pe,!1)},s.prototype.unshift=function(ce){var pe=this._readableState;return a(this,pe,ce,"",!0)},s.prototype.isPaused=function(){return this._readableState.flowing===!1},s.prototype.setEncoding=function(ce){return Se||(Se=e(129).StringDecoder),this._readableState.decoder=new Se(ce),this._readableState.encoding=ce,this};var Be=8388608;s.prototype.read=function(ce){ue("read",ce),ce=parseInt(ce,10);var pe=this._readableState,re=ce;if(ce!==0&&(pe.emittedReadable=!1),ce===0&&pe.needReadable&&(pe.length>=pe.highWaterMark||pe.ended))return ue("read: emitReadable",pe.length,pe.ended),pe.length===0&&pe.ended?G(this):f(this),null;if(ce=d(ce,pe),ce===0&&pe.ended)return pe.length===0&&G(this),null;var ae=pe.needReadable;ue("need readable",ae),(pe.length===0||pe.length-ce<pe.highWaterMark)&&(ae=!0,ue("length less than watermark",ae)),pe.ended||pe.reading?(ae=!1,ue("reading or ended",ae)):ae&&(ue("do read"),pe.reading=!0,pe.sync=!0,pe.length===0&&(pe.needReadable=!0),this._read(pe.highWaterMark),pe.sync=!1,pe.reading||(ce=d(re,pe)));var fe;return fe=ce>0?D(ce,pe):null,fe===null?(pe.needReadable=!0,ce=0):pe.length-=ce,pe.length===0&&(pe.ended||(pe.needReadable=!0),re!==ce&&pe.ended&&G(this)),fe!==null&&this.emit("data",fe),fe},s.prototype._read=function(ce){this.emit("error",new Error("_read() is not implemented"))},s.prototype.pipe=function(ce,pe){function re(ye){ue("onunpipe"),ye===ve&&fe()}function ae(){ue("onend"),ce.end()}function fe(){ue("cleanup"),ce.removeListener("close",Ae),ce.removeListener("finish",Ce),ce.removeListener("drain",B),ce.removeListener("error",be),ce.removeListener("unpipe",re),ve.removeListener("end",ae),ve.removeListener("end",fe),ve.removeListener("data",De),W=!0,!xe.awaitDrain||ce._writableState&&!ce._writableState.needDrain||B()}function De(ye){ue("ondata"),ie=!1;var Me=ce.write(ye);Me!==!1||ie||((xe.pipesCount===1&&xe.pipes===ce||xe.pipesCount>1&&C(xe.pipes,ce)!==-1)&&!W&&(ue("false write response, pause",ve._readableState.awaitDrain),ve._readableState.awaitDrain++,ie=!0),ve.pause())}function be(ye){ue("onerror",ye),we(),ce.removeListener("error",be),F(ce,"error")===0&&ce.emit("error",ye)}function Ae(){ce.removeListener("finish",Ce),we()}function Ce(){ue("onfinish"),ce.removeListener("close",Ae),we()}function we(){ue("unpipe"),ve.unpipe(ce)}var ve=this,xe=this._readableState;switch(xe.pipesCount){case 0:xe.pipes=ce;break;case 1:xe.pipes=[xe.pipes,ce];break;default:xe.pipes.push(ce)}xe.pipesCount+=1,ue("pipe count=%d opts=%j",xe.pipesCount,pe);var Te=(!pe||pe.end!==!1)&&ce!==i.stdout&&ce!==i.stderr,ke=Te?ae:fe;xe.endEmitted?I(ke):ve.once("end",ke),ce.on("unpipe",re);var B=b(ve);ce.on("drain",B);var W=!1,ie=!1;return ve.on("data",De),r(ce,"error",be),ce.once("close",Ae),ce.once("finish",Ce),ce.emit("pipe",ve),xe.flowing||(ue("pipe resume"),ve.resume()),ce},s.prototype.unpipe=function(ce){var pe=this._readableState;if(pe.pipesCount===0)return this;if(pe.pipesCount===1)return ce&&ce!==pe.pipes?this:(ce||(ce=pe.pipes),pe.pipes=null,pe.pipesCount=0,pe.flowing=!1,ce&&ce.emit("unpipe",this),this);if(!ce){var re=pe.pipes,ae=pe.pipesCount;pe.pipes=null,pe.pipesCount=0,pe.flowing=!1;for(var fe=0;fe<ae;fe++)re[fe].emit("unpipe",this);return this}var De=C(pe.pipes,ce);return De===-1?this:(pe.pipes.splice(De,1),pe.pipesCount-=1,pe.pipesCount===1&&(pe.pipes=pe.pipes[0]),ce.emit("unpipe",this),this)},s.prototype.on=function(ce,pe){var re=M.prototype.on.call(this,ce,pe);if(ce==="data")this._readableState.flowing!==!1&&this.resume();else if(ce==="readable"){var ae=this._readableState;ae.endEmitted||ae.readableListening||(ae.readableListening=ae.needReadable=!0,ae.emittedReadable=!1,ae.reading?ae.length&&f(this,ae):I(S,this))}return re},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var ce=this._readableState;return ce.flowing||(ue("resume"),ce.flowing=!0,x(this,ce)),this},s.prototype.pause=function(){return ue("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ue("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(ce){var pe=this._readableState,re=!1,ae=this;ce.on("end",function(){if(ue("wrapped end"),pe.decoder&&!pe.ended){var be=pe.decoder.end();be&&be.length&&ae.push(be)}ae.push(null)}),ce.on("data",function(be){if(ue("wrapped data"),pe.decoder&&(be=pe.decoder.write(be)),(!pe.objectMode||be!=null)&&(pe.objectMode||be&&be.length)){var Ae=ae.push(be);Ae||(re=!0,ce.pause())}});for(var fe in ce)this[fe]===void 0&&typeof ce[fe]=="function"&&(this[fe]=(function(be){return function(){return ce[be].apply(ce,arguments)}})(fe));var De=["error","close","destroy","pause","resume"];return K(De,function(be){ce.on(be,ae.emit.bind(ae,be))}),ae._read=function(be){ue("wrapped _read",be),re&&(re=!1,ce.resume())},ae},s._fromList=D}).call(t,e(28))},function(n,t,e){(function(i){function r(){this.init(),this._w=p,h.call(this,64,56)}function o(y,v,b){return b^y&(v^b)}function s(y,v,b){return y&v|b&(y|v)}function a(y){return(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10)}function l(y){return(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7)}function c(y){return(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3}function d(y){return(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10}var u=e(3),h=e(57),f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);u(r,h),r.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},r.prototype._update=function(y){for(var v=this._w,b=0|this._a,S=0|this._b,x=0|this._c,k=0|this._d,L=0|this._e,D=0|this._f,V=0|this._g,O=0|this._h,R=0;R<16;++R)v[R]=y.readInt32BE(4*R);for(;R<64;++R)v[R]=d(v[R-2])+v[R-7]+c(v[R-15])+v[R-16]|0;for(var G=0;G<64;++G){var Z=O+l(L)+o(L,D,V)+f[G]+v[G]|0,K=a(b)+s(b,S,x)|0;O=V,V=D,D=L,L=k+Z|0,k=x,x=S,S=b,b=Z+K|0}this._a=b+this._a|0,this._b=S+this._b|0,this._c=x+this._c|0,this._d=k+this._d|0,this._e=L+this._e|0,this._f=D+this._f|0,this._g=V+this._g|0,this._h=O+this._h|0},r.prototype._hash=function(){var y=new i(32);return y.writeInt32BE(this._a,0),y.writeInt32BE(this._b,4),y.writeInt32BE(this._c,8),y.writeInt32BE(this._d,12),y.writeInt32BE(this._e,16),y.writeInt32BE(this._f,20),y.writeInt32BE(this._g,24),y.writeInt32BE(this._h,28),y},n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(){this.init(),this._w=b,y.call(this,128,112)}function o(S,x,k){return k^S&(x^k)}function s(S,x,k){return S&x|k&(S|x)}function a(S,x){return(S>>>28|x<<4)^(x>>>2|S<<30)^(x>>>7|S<<25)}function l(S,x){return(S>>>14|x<<18)^(S>>>18|x<<14)^(x>>>9|S<<23)}function c(S,x){return(S>>>1|x<<31)^(S>>>8|x<<24)^S>>>7}function d(S,x){return(S>>>1|x<<31)^(S>>>8|x<<24)^(S>>>7|x<<25)}function u(S,x){return(S>>>19|x<<13)^(x>>>29|S<<3)^S>>>6}function h(S,x){return(S>>>19|x<<13)^(x>>>29|S<<3)^(S>>>6|x<<26)}function f(S,x){return S>>>0<x>>>0?1:0}var p=e(3),y=e(57),v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],b=new Array(160);p(r,y),r.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},r.prototype._update=function(S){for(var x=this._w,k=0|this._ah,L=0|this._bh,D=0|this._ch,V=0|this._dh,O=0|this._eh,R=0|this._fh,G=0|this._gh,Z=0|this._hh,K=0|this._al,C=0|this._bl,A=0|this._cl,I=0|this._dl,T=0|this._el,M=0|this._fl,F=0|this._gl,q=0|this._hl,$=0;$<32;$+=2)x[$]=S.readInt32BE(4*$),x[$+1]=S.readInt32BE(4*$+4);for(;$<160;$+=2){var te=x[$-30],se=x[$-30+1],ue=c(te,se),Se=d(se,te);te=x[$-4],se=x[$-4+1];var Ie=u(te,se),Be=h(se,te),ce=x[$-14],pe=x[$-14+1],re=x[$-32],ae=x[$-32+1],fe=Se+pe|0,De=ue+ce+f(fe,Se)|0;fe=fe+Be|0,De=De+Ie+f(fe,Be)|0,fe=fe+ae|0,De=De+re+f(fe,ae)|0,x[$]=De,x[$+1]=fe}for(var be=0;be<160;be+=2){De=x[be],fe=x[be+1];var Ae=s(k,L,D),Ce=s(K,C,A),we=a(k,K),ve=a(K,k),xe=l(O,T),Te=l(T,O),ke=v[be],B=v[be+1],W=o(O,R,G),ie=o(T,M,F),ye=q+Te|0,Me=Z+xe+f(ye,q)|0;ye=ye+ie|0,Me=Me+W+f(ye,ie)|0,ye=ye+B|0,Me=Me+ke+f(ye,B)|0,ye=ye+fe|0,Me=Me+De+f(ye,fe)|0;var Fe=ve+Ce|0,tt=we+Ae+f(Fe,ve)|0;Z=G,q=F,G=R,F=M,R=O,M=T,T=I+ye|0,O=V+Me+f(T,I)|0,V=D,I=A,D=L,A=C,L=k,C=K,K=ye+Fe|0,k=Me+tt+f(K,ye)|0}this._al=this._al+K|0,this._bl=this._bl+C|0,this._cl=this._cl+A|0,this._dl=this._dl+I|0,this._el=this._el+T|0,this._fl=this._fl+M|0,this._gl=this._gl+F|0,this._hl=this._hl+q|0,this._ah=this._ah+k+f(this._al,K)|0,this._bh=this._bh+L+f(this._bl,C)|0,this._ch=this._ch+D+f(this._cl,A)|0,this._dh=this._dh+V+f(this._dl,I)|0,this._eh=this._eh+O+f(this._el,T)|0,this._fh=this._fh+R+f(this._fl,M)|0,this._gh=this._gh+G+f(this._gl,F)|0,this._hh=this._hh+Z+f(this._hl,q)|0},r.prototype._hash=function(){function S(k,L,D){x.writeInt32BE(k,D),x.writeInt32BE(L,D+4)}var x=new i(64);return S(this._ah,this._al,0),S(this._bh,this._bl,8),S(this._ch,this._cl,16),S(this._dh,this._dl,24),S(this._eh,this._el,32),S(this._fh,this._fl,40),S(this._gh,this._gl,48),S(this._hh,this._hl,56),x},n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){var r=e(69),o=e(70),s=e(91),a=e(207),l=e(206),c=e(209),d=e(208),u=e(205),h=e(93),f=new i(0),p=function(S){var x=r.fromUri(S);return x.validate()},y=function(S,x,k){if(typeof k>"u"&&(k=f),!i.isBuffer(k))throw new Error("Message must be provided as a Buffer");var L=o.fromUri(S),D=L.getConditionUri();if(D!==x)throw new Error("Fulfillment does not match condition (expected: "+x+", actual: "+D+")");return L.validate(k)},v=function(S){var x=o.fromUri(S);return x.getConditionUri()},b=function(S){var x=o.fromJson(S);return x};s.registerType(a),s.registerType(l),s.registerType(c),s.registerType(d),s.registerType(u),n.exports={Condition:r,Fulfillment:o,TypeRegistry:s,PreimageSha256:a,RsaSha256:d,PrefixSha256:l,ThresholdSha256:c,Ed25519Sha256:u,validateCondition:p,validateFulfillment:y,fulfillmentToCondition:v,fromJson:b,base64url:h,fromConditionUri:r.fromUri.bind(r),fromConditionBinary:r.fromBinary.bind(r),fromFulfillmentUri:o.fromUri.bind(o),fromFulfillmentBinary:o.fromBinary.bind(o)}}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(s,a,l){s[a]||Object[o](s,a,{writable:!0,configurable:!0,value:l})}if(e(402),e(456),e(222),i._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");i._babelPolyfill=!0;var o="defineProperty";r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(s){[][s]&&r(Array,s,Function.call.bind([][s]))})}).call(t,e(48))},function(n,t,e){function i(a,l){this.name=a,this.body=l,this.decoders={},this.encoders={}}var r=e(33),o=e(3),s=t;s.define=function(a,l){return new i(a,l)},i.prototype._createNamed=function(a){var l;try{l=e(466).runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{l=function(d){this._initNamed(d)}}return o(l,a),l.prototype._initNamed=function(c){a.call(this,c)},new l(this)},i.prototype._getDecoder=function(a){return a=a||"der",this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(r.decoders[a])),this.decoders[a]},i.prototype.decode=function(a,l,c){return this._getDecoder(l).decode(a,c)},i.prototype._getEncoder=function(a){return a=a||"der",this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(r.encoders[a])),this.encoders[a]},i.prototype.encode=function(a,l,c){return this._getEncoder(l).encode(a,c)}},function(n,t,e){function i(h,f){var p={};this._baseState=p,p.enc=h,p.parent=f||null,p.children=null,p.tag=null,p.args=null,p.reverseArgs=null,p.choice=null,p.optional=!1,p.any=!1,p.obj=!1,p.use=null,p.useDecoder=null,p.key=null,p.default=null,p.explicit=null,p.implicit=null,p.contains=null,p.parent||(p.children=[],this._wrap())}var r=e(59).Reporter,o=e(59).EncoderBuffer,s=e(59).DecoderBuffer,a=e(67),l=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(l),d=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];n.exports=i;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];i.prototype.clone=function(){var h=this._baseState,f={};u.forEach(function(y){f[y]=h[y]});var p=new this.constructor(f.parent);return p._baseState=f,p},i.prototype._wrap=function(){var h=this._baseState;c.forEach(function(f){this[f]=function(){var p=new this.constructor(this);return h.children.push(p),p[f].apply(p,arguments)}},this)},i.prototype._init=function(h){var f=this._baseState;a(f.parent===null),h.call(this),f.children=f.children.filter(function(p){return p._baseState.parent===this},this),a.equal(f.children.length,1,"Root node can have only one child")},i.prototype._useArgs=function(h){var f=this._baseState,p=h.filter(function(y){return y instanceof this.constructor},this);h=h.filter(function(y){return!(y instanceof this.constructor)},this),p.length!==0&&(a(f.children===null),f.children=p,p.forEach(function(y){y._baseState.parent=this},this)),h.length!==0&&(a(f.args===null),f.args=h,f.reverseArgs=h.map(function(y){if(typeof y!="object"||y.constructor!==Object)return y;var v={};return Object.keys(y).forEach(function(b){b==(0|b)&&(b|=0);var S=y[b];v[S]=b}),v}))},d.forEach(function(h){i.prototype[h]=function(){var f=this._baseState;throw new Error(h+" not implemented for encoding: "+f.enc)}}),l.forEach(function(h){i.prototype[h]=function(){var f=this._baseState,p=Array.prototype.slice.call(arguments);return a(f.tag===null),f.tag=h,this._useArgs(p),this}}),i.prototype.use=function(h){a(h);var f=this._baseState;return a(f.use===null),f.use=h,this},i.prototype.optional=function(){var h=this._baseState;return h.optional=!0,this},i.prototype.def=function(h){var f=this._baseState;return a(f.default===null),f.default=h,f.optional=!0,this},i.prototype.explicit=function(h){var f=this._baseState;return a(f.explicit===null&&f.implicit===null),f.explicit=h,this},i.prototype.implicit=function(h){var f=this._baseState;return a(f.explicit===null&&f.implicit===null),f.implicit=h,this},i.prototype.obj=function(){var h=this._baseState,f=Array.prototype.slice.call(arguments);return h.obj=!0,f.length!==0&&this._useArgs(f),this},i.prototype.key=function(h){var f=this._baseState;return a(f.key===null),f.key=h,this},i.prototype.any=function(){var h=this._baseState;return h.any=!0,this},i.prototype.choice=function(h){var f=this._baseState;return a(f.choice===null),f.choice=h,this._useArgs(Object.keys(h).map(function(p){return h[p]})),this},i.prototype.contains=function(h){var f=this._baseState;return a(f.use===null),f.contains=h,this},i.prototype._decode=function(h,f){var p=this._baseState;if(p.parent===null)return h.wrapResult(p.children[0]._decode(h,f));var y=p.default,v=!0,b=null;if(p.key!==null&&(b=h.enterKey(p.key)),p.optional){var S=null;if(p.explicit!==null?S=p.explicit:p.implicit!==null?S=p.implicit:p.tag!==null&&(S=p.tag),S!==null||p.any){if(v=this._peekTag(h,S,p.any),h.isError(v))return v}else{var x=h.save();try{p.choice===null?this._decodeGeneric(p.tag,h,f):this._decodeChoice(h,f),v=!0}catch{v=!1}h.restore(x)}}var k;if(p.obj&&v&&(k=h.enterObject()),v){if(p.explicit!==null){var L=this._decodeTag(h,p.explicit);if(h.isError(L))return L;h=L}var D=h.offset;if(p.use===null&&p.choice===null){if(p.any)var x=h.save();var V=this._decodeTag(h,p.implicit!==null?p.implicit:p.tag,p.any);if(h.isError(V))return V;p.any?y=h.raw(x):h=V}if(f&&f.track&&p.tag!==null&&f.track(h.path(),D,h.length,"tagged"),f&&f.track&&p.tag!==null&&f.track(h.path(),h.offset,h.length,"content"),y=p.any?y:p.choice===null?this._decodeGeneric(p.tag,h,f):this._decodeChoice(h,f),h.isError(y))return y;if(p.any||p.choice!==null||p.children===null||p.children.forEach(function(R){R._decode(h,f)}),p.contains&&(p.tag==="octstr"||p.tag==="bitstr")){var O=new s(y);y=this._getUse(p.contains,h._reporterState.obj)._decode(O,f)}}return p.obj&&v&&(y=h.leaveObject(k)),p.key===null||y===null&&v!==!0?b!==null&&h.exitKey(b):h.leaveKey(b,p.key,y),y},i.prototype._decodeGeneric=function(h,f,p){var y=this._baseState;return h==="seq"||h==="set"?null:h==="seqof"||h==="setof"?this._decodeList(f,h,y.args[0],p):/str$/.test(h)?this._decodeStr(f,h,p):h==="objid"&&y.args?this._decodeObjid(f,y.args[0],y.args[1],p):h==="objid"?this._decodeObjid(f,null,null,p):h==="gentime"||h==="utctime"?this._decodeTime(f,h,p):h==="null_"?this._decodeNull(f,p):h==="bool"?this._decodeBool(f,p):h==="objDesc"?this._decodeStr(f,h,p):h==="int"||h==="enum"?this._decodeInt(f,y.args&&y.args[0],p):y.use!==null?this._getUse(y.use,f._reporterState.obj)._decode(f,p):f.error("unknown tag: "+h)},i.prototype._getUse=function(h,f){var p=this._baseState;return p.useDecoder=this._use(h,f),a(p.useDecoder._baseState.parent===null),p.useDecoder=p.useDecoder._baseState.children[0],p.implicit!==p.useDecoder._baseState.implicit&&(p.useDecoder=p.useDecoder.clone(),p.useDecoder._baseState.implicit=p.implicit),p.useDecoder},i.prototype._decodeChoice=function(h,f){var p=this._baseState,y=null,v=!1;return Object.keys(p.choice).some(function(b){var S=h.save(),x=p.choice[b];try{var k=x._decode(h,f);if(h.isError(k))return!1;y={type:b,value:k},v=!0}catch{return h.restore(S),!1}return!0},this),v?y:h.error("Choice not matched")},i.prototype._createEncoderBuffer=function(h){return new o(h,this.reporter)},i.prototype._encode=function(h,f,p){var y=this._baseState;if(y.default===null||y.default!==h){var v=this._encodeValue(h,f,p);if(v!==void 0&&!this._skipDefault(v,f,p))return v}},i.prototype._encodeValue=function(h,f,p){var y=this._baseState;if(y.parent===null)return y.children[0]._encode(h,f||new r);var x=null;if(this.reporter=f,y.optional&&h===void 0){if(y.default===null)return;h=y.default}var v=null,b=!1;if(y.any)x=this._createEncoderBuffer(h);else if(y.choice)x=this._encodeChoice(h,f);else if(y.contains)v=this._getUse(y.contains,p)._encode(h,f),b=!0;else if(y.children)v=y.children.map(function(D){if(D._baseState.tag==="null_")return D._encode(null,f,h);if(D._baseState.key===null)return f.error("Child should have a key");var V=f.enterKey(D._baseState.key);if(typeof h!="object")return f.error("Child expected, but input is not object");var O=D._encode(h[D._baseState.key],f,h);return f.leaveKey(V),O},this).filter(function(D){return D}),v=this._createEncoderBuffer(v);else if(y.tag==="seqof"||y.tag==="setof"){if(!y.args||y.args.length!==1)return f.error("Too many args for : "+y.tag);if(!Array.isArray(h))return f.error("seqof/setof, but data is not Array");var S=this.clone();S._baseState.implicit=null,v=this._createEncoderBuffer(h.map(function(D){var V=this._baseState;return this._getUse(V.args[0],h)._encode(D,f)},S))}else y.use!==null?x=this._getUse(y.use,p)._encode(h,f):(v=this._encodePrimitive(y.tag,h),b=!0);var x;if(!y.any&&y.choice===null){var k=y.implicit!==null?y.implicit:y.tag,L=y.implicit===null?"universal":"context";k===null?y.use===null&&f.error("Tag could be ommited only for .use()"):y.use===null&&(x=this._encodeComposite(k,b,L,v))}return y.explicit!==null&&(x=this._encodeComposite(y.explicit,!1,"context",x)),x},i.prototype._encodeChoice=function(h,f){var p=this._baseState,y=p.choice[h.type];return y||a(!1,h.type+" not found in "+JSON.stringify(Object.keys(p.choice))),y._encode(h.value,f)},i.prototype._encodePrimitive=function(h,f){var p=this._baseState;if(/str$/.test(h))return this._encodeStr(f,h);if(h==="objid"&&p.args)return this._encodeObjid(f,p.reverseArgs[0],p.args[1]);if(h==="objid")return this._encodeObjid(f,null,null);if(h==="gentime"||h==="utctime")return this._encodeTime(f,h);if(h==="null_")return this._encodeNull();if(h==="int"||h==="enum")return this._encodeInt(f,p.args&&p.reverseArgs[0]);if(h==="bool")return this._encodeBool(f);if(h==="objDesc")return this._encodeStr(f,h);throw new Error("Unsupported tag: "+h)},i.prototype._isNumstr=function(h){return/^[0-9 ]*$/.test(h)},i.prototype._isPrintstr=function(h){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(h)}},function(n,t,e){function i(s){this._reporterState={obj:null,path:[],options:s||{},errors:[]}}function r(s,a){this.path=s,this.rethrow(a)}var o=e(3);t.Reporter=i,i.prototype.isError=function(s){return s instanceof r},i.prototype.save=function(){var s=this._reporterState;return{obj:s.obj,pathLen:s.path.length}},i.prototype.restore=function(s){var a=this._reporterState;a.obj=s.obj,a.path=a.path.slice(0,s.pathLen)},i.prototype.enterKey=function(s){return this._reporterState.path.push(s)},i.prototype.exitKey=function(s){var a=this._reporterState;a.path=a.path.slice(0,s-1)},i.prototype.leaveKey=function(s,a,l){var c=this._reporterState;this.exitKey(s),c.obj!==null&&(c.obj[a]=l)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var s=this._reporterState,a=s.obj;return s.obj={},a},i.prototype.leaveObject=function(s){var a=this._reporterState,l=a.obj;return a.obj=s,l},i.prototype.error=function(s){var a,l=this._reporterState,c=s instanceof r;if(a=c?s:new r(l.path.map(function(d){return"["+JSON.stringify(d)+"]"}).join(""),s.message||s,s.stack),!l.options.partial)throw a;return c||l.errors.push(a),a},i.prototype.wrapResult=function(s){var a=this._reporterState;return a.options.partial?{result:this.isError(s)?null:s,errors:a.errors}:s},o(r,Error),r.prototype.rethrow=function(s){if(this.message=s+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(a){this.stack=a.stack}return this}},function(n,t,e){var i=e(131);t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=i._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=i._reverse(t.tag)},function(n,t,e){var i=t;i.der=e(132),i.pem=e(195)},function(n,t,e){function i(a){s.call(this,a),this.enc="pem"}var r=e(3),o=e(1).Buffer,s=e(132);r(i,s),n.exports=i,i.prototype.decode=function(a,l){for(var c=a.toString().split(/[\r\n]+/g),d=l.label.toUpperCase(),u=/^-----(BEGIN|END) ([^-]+)-----$/,h=-1,f=-1,p=0;p<c.length;p++){var y=c[p].match(u);if(y!==null&&y[2]===d){if(h!==-1){if(y[1]!=="END")break;f=p;break}if(y[1]!=="BEGIN")break;h=p}}if(h===-1||f===-1)throw new Error("PEM section not found for: "+d);var v=c.slice(h+1,f).join("");v.replace(/[^a-z0-9\+\/=]+/gi,"");var b=new o(v,"base64");return s.prototype.decode.call(this,b,l)}},function(n,t,e){var i=t;i.der=e(133),i.pem=e(197)},function(n,t,e){function i(s){o.call(this,s),this.enc="pem"}var r=e(3),o=e(133);r(i,o),n.exports=i,i.prototype.encode=function(s,a){for(var l=o.prototype.encode.call(this,s),c=l.toString("base64"),d=["-----BEGIN "+a.label+"-----"],u=0;u<c.length;u+=64)d.push(c.slice(u,u+64));return d.push("-----END "+a.label+"-----"),d.join(`
`)}},function(n,t,e){"use strict";(function(i){function r(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=(function(){function l(c,d){for(var u=0;u<d.length;u++){var h=d[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,h.key,h)}}return function(c,d,u){return d&&l(c.prototype,d),u&&l(c,u),c}})(),s=e(86),a=(function(){function l(c){r(this,l),c=c||{},this.hashAlgorithm=c.hashAlgorithm||"sha256",this.hashLength=s.createHash(this.hashAlgorithm).digest().length,this.saltLength=this.hashLength}return o(l,[{key:"generate",value:function(c,d){for(var u=new i(d),h=Math.ceil(d/this.hashLength),f=0;f<h;f++){var p=new i(4);p.writeInt32BE(f,0);var y=s.createHash(this.hashAlgorithm).update(c).update(p).digest();y.copy(u,f*this.hashLength)}return u}}]),l})();n.exports=a}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}var o=(function(){function d(u,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,h,f){return h&&d(u.prototype,h),f&&d(u,f),u}})(),s=e(86),a=e(198),l=e(210),c=(function(){function d(u){r(this,d),u=u||{},this.hashAlgorithm=u.hashAlgorithm||"sha256",this.hashLength=s.createHash(this.hashAlgorithm).digest().length,this.saltLength=this.hashLength}return o(d,[{key:"encode",value:function(u,h){var f=Math.ceil(h/8),p=s.createHash(this.hashAlgorithm).update(u).digest();if(f<this.hashLength+this.saltLength+2)throw new Error("Encoding error: RSA modulus is too small for "+this.hashAlgorithm);var y=s.randomBytes(this.saltLength),v=s.createHash(this.hashAlgorithm).update(new i(8).fill(0)).update(p).update(y).digest(),b=i.concat([new i(f-this.saltLength-this.hashLength-2).fill(0),new i([1]),y]),S=new a({hashAlgorithm:this.hashAlgorithm}),x=S.generate(v,f-this.hashLength-1),k=l(b,x);return k[0]&=255>>>8*f-h,i.concat([k,v,new i([188])])}},{key:"verify",value:function(u,h,f){var p=Math.ceil(f/8),y=s.createHash(this.hashAlgorithm).update(u).digest();if(p<this.hashLength+this.saltLength+2||h[h.length-1]!==188)return!1;var v=p-this.hashLength-1,b=h.slice(0,v),S=h.slice(v,v+this.hashLength),x=255>>>8*p-f;if(b[0]&~x)return!1;var k=new a({hashAlgorithm:this.hashAlgorithm}),L=k.generate(S,p-this.hashLength-1),D=l(b,L);D[0]&=x;for(var V=p-this.hashLength-this.saltLength-2,O=0;O<V;O++)if(D[O]!==0)return!1;if(D[V]!==1)return!1;var R=D.slice(D.length-this.saltLength),G=s.createHash(this.hashAlgorithm).update(new i(8).fill(0)).update(y).update(R).digest();return i.compare(S,G)===0}}]),d})();c.EMPTY_BUFFER=new i(0),n.exports=c}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var o=(function(){function u(h,f){for(var p=0;p<f.length;p++){var y=f[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,f,p){return f&&u(h.prototype,f),p&&u(h,p),h}})(),s=e(86),a=e(434),l=e(199),c=e(135),d=(function(){function u(h){r(this,u),h=h||{},this.hashAlgorithm=h.hashAlgorithm||"sha256",this.pss=new l({hashAlgorithm:this.hashAlgorithm})}return o(u,[{key:"getModulusBitLength",value:function(h){var f=h[0].toString(2).length,p=8*(h.length-1)+f;return p}},{key:"sign",value:function(h,f){var p=c.modulusFromPrivateKey(h),y=this.getModulusBitLength(p),v=this.pss.encode(f,y-1),b=v.length<p.length?i.concat([u.ZERO_BYTE,v]):v;return s.privateEncrypt({key:h,padding:a.RSA_NO_PADDING},b)}},{key:"verify",value:function(h,f,p){var y=c.modulusToPem(h),v=s.publicDecrypt({key:y,padding:a.RSA_NO_PADDING},p),b=this.getModulusBitLength(h),S=b%8===1?v.slice(1):v;return this.pss.verify(f,S,b-1)}}]),u})();d.ZERO_BYTE=new i([0]),n.exports=d}).call(t,e(1).Buffer)},function(n,t,e){"use strict";function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}function r(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?l:c}function o(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}var s=e(60),a=(function(l){function c(){return i(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return o(c,l),c})(s);n.exports=a},function(n,t,e){"use strict";function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}function r(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?l:c}function o(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}var s=e(60),a=(function(l){function c(){return i(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return o(c,l),c})(s);n.exports=a},function(n,t,e){"use strict";function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}function r(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?l:c}function o(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}var s=e(60),a=(function(l){function c(){return i(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return o(c,l),c})(s);n.exports=a},function(n,t,e){"use strict";var i=e(33),r=e(92).Condition,o=i.define("PreimageFulfillment",function(){this.seq().obj(this.key("preimage").implicit(0).octstr())}),s=i.define("PrefixFulfillment",function(){this.seq().obj(this.key("prefix").implicit(0).octstr(),this.key("maxMessageLength").implicit(1).int(),this.key("subfulfillment").explicit(2).use(d))}),a=i.define("ThresholdFulfillment",function(){this.seq().obj(this.key("subfulfillments").implicit(0).setof(d),this.key("subconditions").implicit(1).setof(r))}),l=i.define("RsaSha256Fulfillment",function(){this.seq().obj(this.key("modulus").implicit(0).octstr(),this.key("signature").implicit(1).octstr())}),c=i.define("Ed25519Sha256Fulfillment",function(){this.seq().obj(this.key("publicKey").implicit(0).octstr(),this.key("signature").implicit(1).octstr())}),d=i.define("Fulfillment",function(){this.choice({preimageSha256Fulfillment:this.implicit(0).use(o),prefixSha256Fulfillment:this.implicit(1).use(s),thresholdSha256Fulfillment:this.implicit(2).use(a),rsaSha256Fulfillment:this.implicit(3).use(l),ed25519Sha256Fulfillment:this.implicit(4).use(c)})});n.exports={PreimageFulfillment:o,PrefixFulfillment:s,ThresholdFulfillment:a,RsaSha256Fulfillment:l,Ed25519Sha256Fulfillment:c,Fulfillment:d}},function(n,t,e){"use strict";(function(i){function r(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function o(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||typeof v!="object"&&typeof v!="function"?y:v}function s(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var a=(function(){function y(v,b){for(var S=0;S<b.length;S++){var x=b[S];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,b,S){return b&&y(v.prototype,b),S&&y(v,S),v}})(),l=e(464),c=e(61),d=e(49),u=e(134),h=e(71).Ed25519FingerprintContents,f=void 0;try{f=e(412)}catch{}var p=(function(y){function v(){r(this,v);var b=o(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return b.publicKey=null,b.signature=null,b}return s(v,y),a(v,[{key:"setPublicKey",value:function(b){if(!i.isBuffer(b))throw new TypeError("Public key must be a Buffer, was: "+b);if(b.length!==32)throw new Error("Public key must be 32 bytes, was: "+b.length);this.publicKey=b}},{key:"setSignature",value:function(b){if(!i.isBuffer(b))throw new TypeError("Signature must be a Buffer, was: "+b);if(b.length!==64)throw new Error("Signature must be 64 bytes, was: "+b.length);this.signature=b}},{key:"sign",value:function(b,S){if(!i.isBuffer(b))throw new d("Message must be a Buffer");if(!i.isBuffer(S))throw new TypeError("Private key must be a Buffer, was: "+S);if(S.length!==32)throw new Error("Private key must be 32 bytes, was: "+S.length);if(f){var x=f.MakeKeypair(S);this.setPublicKey(x.publicKey),this.signature=f.Sign(b,x)}else{var k=l.sign.keyPair.fromSeed(S);this.setPublicKey(new i(k.publicKey)),this.signature=new i(l.sign.detached(b,k.secretKey))}}},{key:"parseJson",value:function(b){this.setPublicKey(i.from(b.publicKey,"base64")),this.setSignature(i.from(b.signature,"base64"))}},{key:"getFingerprintContents",value:function(){if(!this.publicKey)throw new d("Requires public key");return h.encode({publicKey:this.publicKey})}},{key:"getAsn1JsonPayload",value:function(){return{publicKey:this.publicKey,signature:this.signature}}},{key:"calculateCost",value:function(){return v.CONSTANT_COST}},{key:"validate",value:function(b){if(!i.isBuffer(b))throw new TypeError("Message must be a Buffer");var S=void 0;if(S=f?f.Verify(b,this.signature,this.publicKey):l.sign.detached.verify(b,this.signature,this.publicKey),S!==!0)throw new u("Invalid ed25519 signature");return!0}}]),v})(c);p.TYPE_ID=4,p.TYPE_NAME="ed25519-sha-256",p.TYPE_ASN1_CONDITION="ed25519Sha256Condition",p.TYPE_ASN1_FULFILLMENT="ed25519Sha256Fulfillment",p.TYPE_CATEGORY="simple",p.CONSTANT_COST=131072,n.exports=p}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(v){if(Array.isArray(v)){for(var b=0,S=Array(v.length);b<v.length;b++)S[b]=v[b];return S}return Array.from(v)}function o(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function s(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?v:b}function a(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var l=(function(){function v(b,S){for(var x=0;x<S.length;x++){var k=S[x];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,S,x){return S&&v(b.prototype,S),x&&v(b,x),b}})(),c=e(69),d=e(70),u=e(61),h=e(49),f=e(94),p=e(71).PrefixFingerprintContents,y=(function(v){function b(){o(this,b);var S=s(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return S.prefix=new i(0),S.subcondition=null,S.maxMessageLength=16384,S}return a(b,v),l(b,[{key:"setSubcondition",value:function(S){if(typeof S=="string")S=c.fromUri(S);else if(!(S instanceof c))throw new Error("Subconditions must be URIs or objects of type Condition");this.subcondition=S}},{key:"setSubfulfillment",value:function(S){if(typeof S=="string")S=d.fromUri(S);else if(!(S instanceof d))throw new Error("Subfulfillments must be objects of type Fulfillment");this.subcondition=S}},{key:"setPrefix",value:function(S){if(!i.isBuffer(S))throw new TypeError("Prefix must be a Buffer, was: "+S);this.prefix=S}},{key:"setMaxMessageLength",value:function(S){if(!f(S)||S<0)throw new TypeError("Max message length must be an integer greater than or equal to zero, was: "+S);this.maxMessageLength=S}},{key:"getSubtypes",value:function(){var S=new Set([].concat(r(this.subcondition.getSubtypes()),[this.subcondition.getTypeName()]));return S.delete(this.constructor.TYPE_NAME),S}},{key:"getFingerprintContents",value:function(){if(!this.subcondition)throw new h("Requires subcondition");return p.encode({prefix:this.prefix,maxMessageLength:this.maxMessageLength,subcondition:this.subcondition instanceof c?this.subcondition.getAsn1Json():this.subcondition.getCondition().getAsn1Json()})}},{key:"getAsn1JsonPayload",value:function(){return{prefix:this.prefix,maxMessageLength:this.maxMessageLength,subfulfillment:this.subcondition.getAsn1Json()}}},{key:"parseJson",value:function(S){this.setPrefix(i.from(S.prefix,"base64")),this.setMaxMessageLength(S.maxMessageLength),this.setSubfulfillment(d.fromJson(S.subfulfillment))}},{key:"parseAsn1JsonPayload",value:function(S){this.setPrefix(i.from(S.prefix,"base64")),this.setMaxMessageLength(S.maxMessageLength.toNumber()),this.setSubfulfillment(d.fromAsn1Json(S.subfulfillment))}},{key:"calculateCost",value:function(){if(!this.prefix)throw new h("Prefix must be specified");if(!this.subcondition)throw new h("Subcondition must be specified");var S=this.subcondition instanceof c?this.subcondition.getCost():this.subcondition.getCondition().getCost();return Number(this.prefix.length)+this.maxMessageLength+S+1024}},{key:"validate",value:function(S){if(!(this.subcondition instanceof d))throw new Error("Subcondition is not a fulfillment");if(!i.isBuffer(S))throw new Error("Message must be provided as a Buffer, was: "+S);return this.subcondition.validate(i.concat([this.prefix,S]))}}]),b})(u);y.TYPE_ID=1,y.TYPE_NAME="prefix-sha-256",y.TYPE_ASN1_CONDITION="prefixSha256Condition",y.TYPE_ASN1_FULFILLMENT="prefixSha256Fulfillment",y.TYPE_CATEGORY="compound",y.CONSTANT_BASE_COST=16384,y.CONSTANT_COST_DIVISOR=256,y.prototype.setSubconditionUri=y.prototype.setSubcondition,y.prototype.setSubfulfillmentUri=y.prototype.setSubfulfillment,n.exports=y}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function o(u,h){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||typeof h!="object"&&typeof h!="function"?u:h}function s(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(u,h):u.__proto__=h)}var a=(function(){function u(h,f){for(var p=0;p<f.length;p++){var y=f[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,f,p){return f&&u(h.prototype,f),p&&u(h,p),h}})(),l=e(61),c=e(49),d=(function(u){function h(){return r(this,h),o(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return s(h,u),a(h,[{key:"getFingerprintContents",value:function(){if(!this.preimage)throw new c("Could not calculate hash, no preimage provided");return this.preimage}},{key:"setPreimage",value:function(f){if(!i.isBuffer(f))throw new TypeError("Preimage must be a buffer, was: "+f);this.preimage=f}},{key:"parseJson",value:function(f){this.preimage=i.from(f.preimage,"base64")}},{key:"getAsn1JsonPayload",value:function(){return{preimage:this.preimage}}},{key:"calculateCost",value:function(){if(!this.preimage)throw new c("Preimage must be specified");return this.preimage.length}},{key:"validate",value:function(f){return!0}}]),h})(l);d.TYPE_ID=0,d.TYPE_NAME="preimage-sha-256",d.TYPE_ASN1_CONDITION="preimageSha256Condition",d.TYPE_ASN1_FULFILLMENT="preimageSha256Fulfillment",d.TYPE_CATEGORY="simple",n.exports=d}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?v:b}function s(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var a=(function(){function v(b,S){for(var x=0;x<S.length;x++){var k=S[x];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,S,x){return S&&v(b.prototype,S),x&&v(b,x),b}})(),l=e(200),c=e(135),d=e(61),u=e(49),h=e(134),f=e(71).RsaFingerprintContents,p=new l,y=(function(v){function b(){r(this,b);var S=o(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return S.modulus=null,S.signature=null,S}return s(b,v),a(b,[{key:"parseJson",value:function(S){this.modulus=i.from(S.modulus,"base64"),this.signature=i.from(S.signature,"base64")}},{key:"getFingerprintContents",value:function(){if(!this.modulus)throw new u("Requires modulus");return f.encode({modulus:this.modulus})}},{key:"getAsn1JsonPayload",value:function(){return{modulus:this.modulus,signature:this.signature}}},{key:"setPublicModulus",value:function(S){if(!i.isBuffer(S))throw new TypeError("Modulus must be a buffer, was: "+S);if(S[0]===0)throw new Error("Modulus may not contain leading zeros");if(S.length>512||S.length<128)throw new Error("Modulus must be between 128 bytes (1017 bits) and 512 bytes (4096 bits), was: "+S.length+" bytes");this.modulus=S}},{key:"setSignature",value:function(S){if(!i.isBuffer(S))throw new TypeError("Signature must be a buffer, was: "+S);this.signature=S}},{key:"sign",value:function(S,x){this.modulus||this.setPublicModulus(c.modulusFromPrivateKey(x)),this.signature=p.sign(x,S)}},{key:"calculateCost",value:function(){if(!this.modulus)throw new u("Requires a public modulus");return Math.pow(p.getModulusBitLength(this.modulus),2)>>>b.COST_RIGHT_SHIFT}},{key:"validate",value:function(S){if(!i.isBuffer(S))throw new Error("Message must be provided as a Buffer, was: "+S);var x=p.verify(this.modulus,S,this.signature);if(!x)throw new h("Invalid RSA signature");return!0}}]),b})(d);y.TYPE_ID=3,y.TYPE_NAME="rsa-sha-256",y.TYPE_ASN1_CONDITION="rsaSha256Condition",y.TYPE_ASN1_FULFILLMENT="rsaSha256Fulfillment",y.TYPE_CATEGORY="simple",y.COST_RIGHT_SHIFT=6,n.exports=y}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(b,S){if(!(b instanceof S))throw new TypeError("Cannot call a class as a function")}function o(b,S){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||typeof S!="object"&&typeof S!="function"?b:S}function s(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);b.prototype=Object.create(S&&S.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(b,S):b.__proto__=S)}var a=(function(){function b(S,x){for(var k=0;k<x.length;k++){var L=x[k];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(S,L.key,L)}}return function(S,x,k){return x&&b(S.prototype,x),k&&b(S,k),S}})(),l=e(69),c=e(70),d=e(61),u=e(49),h=e(94),f=e(71).ThresholdFingerprintContents,p="condition",y="fulfillment",v=(function(b){function S(){r(this,S);var x=o(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));return x.threshold=null,x.subconditions=[],x}return s(S,b),a(S,[{key:"addSubcondition",value:function(x){if(typeof x=="string")x=l.fromUri(x);else if(!(x instanceof l))throw new Error("Subconditions must be URIs or objects of type Condition");this.subconditions.push({type:p,body:x})}},{key:"addSubfulfillment",value:function(x){if(typeof x=="string")x=c.fromUri(x);else if(!(x instanceof c))throw new Error("Subfulfillments must be URIs or objects of type Fulfillment");this.subconditions.push({type:y,body:x})}},{key:"setThreshold",value:function(x){if(!h(x)||x<1)throw new TypeError("Threshold must be a integer greater than zero, was: "+x);this.threshold=x}},{key:"getSubtypes",value:function(){var x=this.subconditions.map(function(L){return Array.from(L.body.getSubtypes()).concat(L.body.getTypeName())}),k=new Set(Array.prototype.concat.apply([],x));return k.delete(this.constructor.TYPE_NAME),k}},{key:"getFingerprintContents",value:function(){return f.encode({threshold:this.threshold,subconditions:this.subconditions.map(function(x){return x.body instanceof l?x.body:x.body.getCondition()}).sort(S.compareConditions).map(function(x){return x.getAsn1Json()})})}},{key:"calculateCost",value:function(){var x=this.subconditions.map(this.constructor.getSubconditionCost),k=this.constructor.calculateWorstCaseLength(this.threshold,x);if(k===-1/0)throw new u("Insufficient number of subconditions to meet the threshold");return k+1024*x.length}},{key:"parseJson",value:function(x){if(this.setThreshold(x.threshold),x.subfulfillments){var k=!0,L=!1,D=void 0;try{for(var V,O=x.subfulfillments[Symbol.iterator]();!(k=(V=O.next()).done);k=!0){var R=V.value;this.addSubfulfillment(c.fromJson(R))}}catch(T){L=!0,D=T}finally{try{!k&&O.return&&O.return()}finally{if(L)throw D}}}if(x.subconditions){var G=!0,Z=!1,K=void 0;try{for(var C,A=x.subconditions[Symbol.iterator]();!(G=(C=A.next()).done);G=!0){var I=C.value;this.addSubcondition(l.fromJson(I))}}catch(T){Z=!0,K=T}finally{try{!G&&A.return&&A.return()}finally{if(Z)throw K}}}}},{key:"parseAsn1JsonPayload",value:function(x){if(this.setThreshold(x.subfulfillments.length),x.subfulfillments){var k=!0,L=!1,D=void 0;try{for(var V,O=x.subfulfillments[Symbol.iterator]();!(k=(V=O.next()).done);k=!0){var R=V.value;this.addSubfulfillment(c.fromAsn1Json(R))}}catch(T){L=!0,D=T}finally{try{!k&&O.return&&O.return()}finally{if(L)throw D}}}if(x.subconditions){var G=!0,Z=!1,K=void 0;try{for(var C,A=x.subconditions[Symbol.iterator]();!(G=(C=A.next()).done);G=!0){var I=C.value;this.addSubcondition(l.fromAsn1Json(I))}}catch(T){Z=!0,K=T}finally{try{!G&&A.return&&A.return()}finally{if(Z)throw K}}}}},{key:"getAsn1JsonPayload",value:function(){var x=this.subconditions.filter(function(V){return V.type===y}).sort(function(V,O){return V.body.getCondition().getCost()-O.body.getCondition().getCost()}),k=this.subconditions.filter(function(V){return V.type===p});if(x.length<this.threshold)throw new Error("Not enough fulfillments");var L=x.slice(0,this.threshold),D=k.map(function(V){return V.body}).concat(x.slice(this.threshold).map(function(V){return V.body.getCondition()}));return{subfulfillments:L.map(function(V){return V.body}).sort(S.compareConditions).map(function(V){return V.getAsn1Json()}),subconditions:D.sort(S.compareConditions).map(function(V){return V.getAsn1Json()})}}},{key:"validate",value:function(x){var k=this.subconditions.filter(function(L){return L.type===y});if(k.length<this.threshold)throw new Error("Threshold not met");if(k.length>this.threshold)throw new Error("Fulfillment is not minimal");return k.every(function(L){return L.body.validate(x)})}}],[{key:"compareConditions",value:function(x,k){return i.compare(x.serializeBinary(),k.serializeBinary())}},{key:"getSubconditionCost",value:function(x){return x.type===y?x.body.getCondition().getCost():x.body.getCost()}},{key:"calculateWorstCaseLength",value:function(x,k){return k.length<x?-1/0:k.sort(function(L,D){return L-D}).slice(-x).reduce(function(L,D){return L+D},0)}},{key:"calculateSmallestValidFulfillmentSet",value:function(x,k){return k.sort(function(L,D){return D.size-L.size}),k.slice(0,x)}}]),S})(d);v.TYPE_ID=2,v.TYPE_NAME="threshold-sha-256",v.TYPE_ASN1_CONDITION="thresholdSha256Condition",v.TYPE_ASN1_FULFILLMENT="thresholdSha256Fulfillment",v.TYPE_CATEGORY="compound",v.prototype.addSubconditionUri=v.prototype.addSubcondition,v.prototype.addSubfulfillmentUri=v.prototype.addSubfulfillment,n.exports=v}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(o,s){if(!i.isBuffer(o)||!i.isBuffer(s))throw new Error("Arguments must be buffers");if(o.length!==s.length)throw new Error("Buffers must be the same length");for(var a=new i(o.length),l=0;l<o.length;l++)a[l]=o[l]^s[l];return a}n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){"use strict";function i(y){var v=y.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return y[v-2]==="="?2:y[v-1]==="="?1:0}function r(y){return 3*y.length/4-i(y)}function o(y){var v,b,S,x,k,L,D=y.length;k=i(y),L=new u(3*D/4-k),S=k>0?D-4:D;var V=0;for(v=0,b=0;v<S;v+=4,b+=3)x=d[y.charCodeAt(v)]<<18|d[y.charCodeAt(v+1)]<<12|d[y.charCodeAt(v+2)]<<6|d[y.charCodeAt(v+3)],L[V++]=x>>16&255,L[V++]=x>>8&255,L[V++]=255&x;return k===2?(x=d[y.charCodeAt(v)]<<2|d[y.charCodeAt(v+1)]>>4,L[V++]=255&x):k===1&&(x=d[y.charCodeAt(v)]<<10|d[y.charCodeAt(v+1)]<<4|d[y.charCodeAt(v+2)]>>2,L[V++]=x>>8&255,L[V++]=255&x),L}function s(y){return c[y>>18&63]+c[y>>12&63]+c[y>>6&63]+c[63&y]}function a(y,v,b){for(var S,x=[],k=v;k<b;k+=3)S=(y[k]<<16)+(y[k+1]<<8)+y[k+2],x.push(s(S));return x.join("")}function l(y){for(var v,b=y.length,S=b%3,x="",k=[],L=16383,D=0,V=b-S;D<V;D+=L)k.push(a(y,D,D+L>V?V:D+L));return S===1?(v=y[b-1],x+=c[v>>2],x+=c[v<<4&63],x+="=="):S===2&&(v=(y[b-2]<<8)+y[b-1],x+=c[v>>10],x+=c[v>>4&63],x+=c[v<<2&63],x+="="),k.push(x),k.join("")}t.byteLength=r,t.toByteArray=o,t.fromByteArray=l;for(var c=[],d=[],u=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)c[f]=h[f],d[h.charCodeAt(f)]=f;d[45]=62,d[95]=63},function(n,t,e){(function(i,r){function o(h){typeof h=="string"?h={bindings:h}:h||(h={}),h.__proto__=u,h.module_root||(h.module_root=t.getRoot(t.getFileName())),a.extname(h.bindings)!=".node"&&(h.bindings+=".node");for(var f,p,y,v=[],b=0,S=h.try.length;b<S;b++){f=l.apply(null,h.try[b].map(function(x){return h[x]||x})),v.push(f);try{return p=h.path?!(function(){var x=new Error('Cannot find module "."');throw x.code="MODULE_NOT_FOUND",x})():!(function(){var x=new Error('Cannot find module "."');throw x.code="MODULE_NOT_FOUND",x})(),h.path||(p.path=f),p}catch(x){if(!/not find/i.test(x.message))throw x}}throw y=new Error(`Could not locate the bindings file. Tried:
`+v.map(function(x){return h.arrow+x}).join(`
`)),y.tries=v,y}var s=e(438),a=e(442),l=a.join,c=a.dirname,d=s.existsSync||a.existsSync,u={arrow:i.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:i.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:i.platform,arch:i.arch,version:i.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};n.exports=t=o,t.getFileName=function(h){var f,p=Error.prepareStackTrace,y=Error.stackTraceLimit,v={};return Error.stackTraceLimit=10,Error.prepareStackTrace=function(b,S){for(var x=0,k=S.length;x<k;x++)if(f=S[x].getFileName(),f!==r&&(!h||f!==h))return},Error.captureStackTrace(v),v.stack,Error.prepareStackTrace=p,Error.stackTraceLimit=y,f},t.getRoot=function(h){for(var f,p=c(h);;){if(p==="."&&(p=i.cwd()),d(l(p,"package.json"))||d(l(p,"node_modules")))return p;if(f===p)throw new Error('Could not find module root given file: "'+h+'". Do you have a `package.json` file? ');f=p,p=l(p,"..")}}}).call(t,e(28),"/index.js")},function(n,t,e){(function(i){function r(b,S,x){return this instanceof r?(d.call(this),this._cache=new o,this._last=void 0,this._cipher=new c.AES(S),this._prev=new i(x.length),x.copy(this._prev),this._mode=b,void(this._autopadding=!0)):new r(b,S,x)}function o(){return this instanceof o?void(this.cache=new i("")):new o}function s(b){for(var S=b[15],x=-1;++x<S;)if(b[x+(16-S)]!==S)throw new Error("unable to decrypt data");if(S!==16)return b.slice(0,16-S)}function a(b,S,x){var k=h[b.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if(typeof x=="string"&&(x=new i(x)),typeof S=="string"&&(S=new i(S)),S.length!==k.key/8)throw new TypeError("invalid key length "+S.length);if(x.length!==k.iv)throw new TypeError("invalid iv length "+x.length);return k.type==="stream"?new f(v[k.mode],S,x,!0):k.type==="auth"?new p(v[k.mode],S,x,!0):new r(v[k.mode],S,x)}function l(b,S){var x=h[b.toLowerCase()];if(!x)throw new TypeError("invalid suite type");var k=y(S,!1,x.key,x.iv);return a(b,k.key,k.iv)}var c=e(72),d=e(50),u=e(3),h=e(73),f=e(145),p=e(138),y=e(89);u(r,d),r.prototype._update=function(b){this._cache.add(b);for(var S,x,k=[];S=this._cache.get(this._autopadding);)x=this._mode.decrypt(this,S),k.push(x);return i.concat(k)},r.prototype._final=function(){var b=this._cache.flush();if(this._autopadding)return s(this._mode.decrypt(this,b));if(b)throw new Error("data not multiple of block length")},r.prototype.setAutoPadding=function(b){return this._autopadding=!!b,this},o.prototype.add=function(b){this.cache=i.concat([this.cache,b])},o.prototype.get=function(b){var S;if(b){if(this.cache.length>16)return S=this.cache.slice(0,16),this.cache=this.cache.slice(16),S}else if(this.cache.length>=16)return S=this.cache.slice(0,16),this.cache=this.cache.slice(16),S;return null},o.prototype.flush=function(){if(this.cache.length)return this.cache};var v={ECB:e(143),CBC:e(139),CFB:e(140),CFB8:e(142),CFB1:e(141),OFB:e(144),CTR:e(74),GCM:e(74)};t.createDecipher=l,t.createDecipheriv=a}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(v,b,S){return this instanceof r?(c.call(this),this._cache=new o,this._cipher=new l.AES(b),this._prev=new i(S.length),S.copy(this._prev),this._mode=v,void(this._autopadding=!0)):new r(v,b,S)}function o(){return this instanceof o?void(this.cache=new i("")):new o}function s(v,b,S){var x=u[v.toLowerCase()];if(!x)throw new TypeError("invalid suite type");if(typeof S=="string"&&(S=new i(S)),typeof b=="string"&&(b=new i(b)),b.length!==x.key/8)throw new TypeError("invalid key length "+b.length);if(S.length!==x.iv)throw new TypeError("invalid iv length "+S.length);return x.type==="stream"?new f(y[x.mode],b,S):x.type==="auth"?new p(y[x.mode],b,S):new r(y[x.mode],b,S)}function a(v,b){var S=u[v.toLowerCase()];if(!S)throw new TypeError("invalid suite type");var x=h(b,!1,S.key,S.iv);return s(v,x.key,x.iv)}var l=e(72),c=e(50),d=e(3),u=e(73),h=e(89),f=e(145),p=e(138);d(r,c),r.prototype._update=function(v){this._cache.add(v);for(var b,S,x=[];b=this._cache.get();)S=this._mode.encrypt(this,b),x.push(S);return i.concat(x)},r.prototype._final=function(){var v=this._cache.flush();if(this._autopadding)return v=this._mode.encrypt(this,v),this._cipher.scrub(),v;if(v.toString("hex")!=="10101010101010101010101010101010")throw this._cipher.scrub(),new Error("data not multiple of block length")},r.prototype.setAutoPadding=function(v){return this._autopadding=!!v,this},o.prototype.add=function(v){this.cache=i.concat([this.cache,v])},o.prototype.get=function(){if(this.cache.length>15){var v=this.cache.slice(0,16);return this.cache=this.cache.slice(16),v}return null},o.prototype.flush=function(){for(var v=16-this.cache.length,b=new i(v),S=-1;++S<v;)b.writeUInt8(v,S);var x=i.concat([this.cache,b]);return x};var y={ECB:e(143),CBC:e(139),CFB:e(140),CFB8:e(142),CFB1:e(141),OFB:e(144),CTR:e(74),GCM:e(74)};t.createCipheriv=s,t.createCipher=a}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(u){this.h=u,this.state=new i(16),this.state.fill(0),this.cache=new i("")}function o(u){return[u.readUInt32BE(0),u.readUInt32BE(4),u.readUInt32BE(8),u.readUInt32BE(12)]}function s(u){u=u.map(a);var h=new i(16);return h.writeUInt32BE(u[0],0),h.writeUInt32BE(u[1],4),h.writeUInt32BE(u[2],8),h.writeUInt32BE(u[3],12),h}function a(u){var h,f;return h=u>d||u<0?(f=Math.abs(u)%d,u<0?d-f:f):u}function l(u,h){return[u[0]^h[0],u[1]^h[1],u[2]^h[2],u[3]^h[3]]}var c=new i(16);c.fill(0),n.exports=r,r.prototype.ghash=function(u){for(var h=-1;++h<u.length;)this.state[h]^=u[h];this._multiply()},r.prototype._multiply=function(){for(var u,h,f,p=o(this.h),y=[0,0,0,0],v=-1;++v<128;){for(h=(this.state[~~(v/8)]&1<<7-v%8)!==0,h&&(y=l(y,p)),f=(1&p[3])!==0,u=3;u>0;u--)p[u]=p[u]>>>1|(1&p[u-1])<<31;p[0]=p[0]>>>1,f&&(p[0]=p[0]^225<<24)}this.state=s(y)},r.prototype.update=function(u){this.cache=i.concat([this.cache,u]);for(var h;this.cache.length>=16;)h=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(h)},r.prototype.final=function(u,h){return this.cache.length&&this.ghash(i.concat([this.cache,c],16)),this.ghash(s([0,u,0,h])),this.state};var d=Math.pow(2,32)}).call(t,e(1).Buffer)},function(n,t,e){function i(f,p){var y,v;if(f=f.toLowerCase(),h[f])y=h[f].key,v=h[f].iv;else{if(!u[f])throw new TypeError("invalid suite type");y=8*u[f].key,v=u[f].iv}var b=l(p,!1,y,v);return o(f,b.key,b.iv)}function r(f,p){var y,v;if(f=f.toLowerCase(),h[f])y=h[f].key,v=h[f].iv;else{if(!u[f])throw new TypeError("invalid suite type");y=8*u[f].key,v=u[f].iv}var b=l(p,!1,y,v);return s(f,b.key,b.iv)}function o(f,p,y){if(f=f.toLowerCase(),h[f])return c.createCipheriv(f,p,y);if(u[f])return new d({key:p,iv:y,mode:f});throw new TypeError("invalid suite type")}function s(f,p,y){if(f=f.toLowerCase(),h[f])return c.createDecipheriv(f,p,y);if(u[f])return new d({key:p,iv:y,mode:f,decrypt:!0});throw new TypeError("invalid suite type")}function a(){return Object.keys(u).concat(c.getCiphers())}var l=e(89),c=e(95),d=e(217),u=e(218),h=e(73);t.createCipher=t.Cipher=i,t.createCipheriv=t.Cipheriv=o,t.createDecipher=t.Decipher=r,t.createDecipheriv=t.Decipheriv=s,t.listCiphers=t.getCiphers=a},function(n,t,e){(function(i){function r(c){o.call(this);var d,u=c.mode.toLowerCase(),h=l[u];d=c.decrypt?"decrypt":"encrypt";var f=c.key;u!=="des-ede"&&u!=="des-ede-cbc"||(f=i.concat([f,f.slice(0,8)]));var p=c.iv;this._des=h.create({key:f,iv:p,type:d})}var o=e(50),s=e(125),a=e(3),l={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};l.des=l["des-cbc"],l.des3=l["des-ede3-cbc"],n.exports=r,a(r,o),r.prototype._update=function(c){return new i(this._des.update(c))},r.prototype._final=function(){return new i(this._des.final())}}).call(t,e(1).Buffer)},function(n,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(n,t,e){(function(i){function r(y){h.Writable.call(this);var v=p[y];if(!v)throw new Error("Unknown message digest");this._hashType=v.hash,this._hash=c(v.hash),this._tag=v.id,this._signType=v.sign}function o(y){h.Writable.call(this);var v=p[y];if(!v)throw new Error("Unknown message digest");this._hash=c(v.hash),this._tag=v.id,this._signType=v.sign}function s(y){return new r(y)}function a(y){return new o(y)}var l=e(146),c=e(56),d=e(3),u=e(220),h=e(58),f=e(221),p={};Object.keys(l).forEach(function(y){p[y]=p[y.toLowerCase()]=l[y]}),d(r,h.Writable),r.prototype._write=function(y,v,b){this._hash.update(y),b()},r.prototype.update=function(y,v){return typeof y=="string"&&(y=new i(y,v)),this._hash.update(y),this},r.prototype.sign=function(y,v){this.end();var b=this._hash.digest(),S=u(i.concat([this._tag,b]),y,this._hashType,this._signType);return v?S.toString(v):S},d(o,h.Writable),o.prototype._write=function(y,v,b){this._hash.update(y),b()},o.prototype.update=function(y,v){return typeof y=="string"&&(y=new i(y,v)),this._hash.update(y),this},o.prototype.verify=function(y,v,b){typeof v=="string"&&(v=new i(v,b)),this.end();var S=this._hash.digest();return f(v,i.concat([this._tag,S]),y,this._signType)},n.exports={Sign:s,Verify:a,createSign:s,createVerify:a}}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(k,L,D,V){var O=b(L);if(O.curve){if(V!=="ecdsa")throw new Error("wrong private key type");return o(k,O)}if(O.type==="dsa"){if(V!=="dsa")throw new Error("wrong private key type");return s(k,O,D)}if(V!=="rsa")throw new Error("wrong private key type");for(var R=O.modulus.byteLength(),G=[0,1];k.length+G.length+1<R;)G.push(255);G.push(0);for(var Z=-1;++Z<k.length;)G.push(k[Z]);var K=p(G,O);return K}function o(k,L){var D=y[L.curve.join(".")];if(!D)throw new Error("unknown curve "+L.curve.join("."));var V=new x(D),O=V.genKeyPair();O._importPrivate(L.privateKey);var R=O.sign(k);return new i(R.toDER())}function s(k,L,D){for(var V,O=L.params.priv_key,R=L.params.p,G=L.params.q,Z=L.params.g,K=new S(0),C=c(k,G).mod(G),A=!1,I=l(O,G,k,D);A===!1;)V=u(G,I,D),K=h(Z,V,R,G),A=V.invm(G).imul(C.add(O.mul(K))).mod(G),A.cmpn(0)||(A=!1,K=new S(0));return a(K,A)}function a(k,L){k=k.toArray(),L=L.toArray(),128&k[0]&&(k=[0].concat(k)),128&L[0]&&(L=[0].concat(L));var D=k.length+L.length+4,V=[48,D,2,k.length];return V=V.concat(k,[2,L.length],L),new i(V)}function l(k,L,D,V){if(k=new i(k.toArray()),k.length<L.byteLength()){var O=new i(L.byteLength()-k.length);O.fill(0),k=i.concat([O,k])}var R=D.length,G=d(D,L),Z=new i(R);Z.fill(1);var K=new i(R);return K.fill(0),K=f(V,K).update(Z).update(new i([0])).update(k).update(G).digest(),Z=f(V,K).update(Z).digest(),K=f(V,K).update(Z).update(new i([1])).update(k).update(G).digest(),Z=f(V,K).update(Z).digest(),{k:K,v:Z}}function c(k,L){var D=new S(k),V=(k.length<<3)-L.bitLength();return V>0&&D.ishrn(V),D}function d(k,L){k=c(k,L),k=k.mod(L);var D=new i(k.toArray());if(D.length<L.byteLength()){var V=new i(L.byteLength()-D.length);V.fill(0),D=i.concat([V,D])}return D}function u(k,L,D){var V,O;do{for(V=new i("");8*V.length<k.bitLength();)L.v=f(D,L.k).update(L.v).digest(),V=i.concat([V,L.v]);O=c(V,k),L.k=f(D,L.k).update(L.v).update(new i([0])).digest(),L.v=f(D,L.k).update(L.v).digest()}while(O.cmp(k)!==-1);return O}function h(k,L,D,V){return k.toRed(S.mont(D)).redPow(L).fromRed().mod(V)}var f=e(124),p=e(96),y=e(147),v=e(13),b=e(90),S=e(10),x=v.ec;n.exports=r,n.exports.getKey=l,n.exports.makeKey=u}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(f,p,y,v){var b=d(y);if(b.type==="ec"){if(v!=="ecdsa")throw new Error("wrong public key type");return o(f,p,b)}if(b.type==="dsa"){if(v!=="dsa")throw new Error("wrong public key type");return s(f,p,b)}if(v!=="rsa")throw new Error("wrong public key type");for(var S=b.modulus.byteLength(),x=[1],k=0;p.length+x.length+2<S;)x.push(255),k++;x.push(0);for(var L=-1;++L<p.length;)x.push(p[L]);x=new i(x);var D=u.mont(b.modulus);f=new u(f).toRed(D),f=f.redPow(new u(b.publicExponent)),f=new i(f.fromRed().toArray());var V=0;for(k<8&&(V=1),S=Math.min(f.length,x.length),f.length!==x.length&&(V=1),L=-1;++L<S;)V|=f[L]^x[L];return V===0}function o(f,p,y){var v=l[y.data.algorithm.curve.join(".")];if(!v)throw new Error("unknown curve "+y.data.algorithm.curve.join("."));var b=new h(v),S=y.data.subjectPrivateKey.data;return b.verify(p,f,S)}function s(f,p,y){var v=y.data.p,b=y.data.q,S=y.data.g,x=y.data.pub_key,k=d.signature.decode(f,"der"),L=k.s,D=k.r;a(L,b),a(D,b);var V=u.mont(v),O=L.invm(b),R=S.toRed(V).redPow(new u(p).mul(O).mod(b)).fromRed().mul(x.toRed(V).redPow(D.mul(O).mod(b)).fromRed()).mod(v).mod(b);return!R.cmp(D)}function a(f,p){if(f.cmpn(0)<=0)throw new Error("invalid sig");if(f.cmp(p)>=p)throw new Error("invalid sig")}var l=e(147),c=e(13),d=e(90),u=e(10),h=c.ec;n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){e(231),n.exports=e(29).RegExp.escape},function(n,t,e){var i=e(6),r=e(106),o=e(7)("species");n.exports=function(s){var a;return r(s)&&(a=s.constructor,typeof a!="function"||a!==Array&&!r(a.prototype)||(a=void 0),i(a)&&(a=a[o],a===null&&(a=void 0))),a===void 0?Array:a}},function(n,t,e){var i=e(223);n.exports=function(r,o){return new(i(r))(o)}},function(n,t,e){"use strict";var i=e(2),r=e(27),o="number";n.exports=function(s){if(s!=="string"&&s!==o&&s!=="default")throw TypeError("Incorrect hint");return r(i(this),s!=o)}},function(n,t,e){var i=e(41),r=e(83),o=e(65);n.exports=function(s){var a=i(s),l=r.f;if(l)for(var c,d=l(s),u=o.f,h=0;d.length>h;)u.call(s,c=d[h++])&&a.push(c);return a}},function(n,t,e){var i=e(41),r=e(19);n.exports=function(o,s){for(var a,l=r(o),c=i(l),d=c.length,u=0;d>u;)if(l[a=c[u++]]===s)return a}},function(n,t,e){"use strict";var i=e(229),r=e(79),o=e(15);n.exports=function(){for(var s=o(this),a=arguments.length,l=Array(a),c=0,d=i._,u=!1;a>c;)(l[c]=arguments[c++])===d&&(u=!0);return function(){var h,f=this,p=arguments.length,y=0,v=0;if(!u&&!p)return r(s,l,f);if(h=l.slice(),u)for(;a>y;y++)h[y]===d&&(h[y]=arguments[v++]);for(;p>v;)h.push(arguments[v++]);return r(s,h,f)}}},function(n,t,e){n.exports=e(4)},function(n,t){n.exports=function(e,i){var r=i===Object(i)?function(o){return i[o]}:i;return function(o){return String(o).replace(e,r)}}},function(n,t,e){var i=e(0),r=e(230)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(o){return r(o)}})},function(n,t,e){var i=e(0);i(i.P,"Array",{copyWithin:e(149)}),e(51)("copyWithin")},function(n,t,e){"use strict";var i=e(0),r=e(25)(4);i(i.P+i.F*!e(24)([].every,!0),"Array",{every:function(o){return r(this,o,arguments[1])}})},function(n,t,e){var i=e(0);i(i.P,"Array",{fill:e(98)}),e(51)("fill")},function(n,t,e){"use strict";var i=e(0),r=e(25)(2);i(i.P+i.F*!e(24)([].filter,!0),"Array",{filter:function(o){return r(this,o,arguments[1])}})},function(n,t,e){"use strict";var i=e(0),r=e(25)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(a){return r(this,a,arguments.length>1?arguments[1]:void 0)}}),e(51)(o)},function(n,t,e){"use strict";var i=e(0),r=e(25)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(a){return r(this,a,arguments.length>1?arguments[1]:void 0)}}),e(51)(o)},function(n,t,e){"use strict";var i=e(0),r=e(25)(0),o=e(24)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(s){return r(this,s,arguments[1])}})},function(n,t,e){"use strict";var i=e(30),r=e(0),o=e(12),s=e(158),a=e(105),l=e(11),c=e(99),d=e(122);r(r.S+r.F*!e(81)(function(u){Array.from(u)}),"Array",{from:function(u){var h,f,p,y,v=o(u),b=typeof this=="function"?this:Array,S=arguments.length,x=S>1?arguments[1]:void 0,k=x!==void 0,L=0,D=d(v);if(k&&(x=i(x,S>2?arguments[2]:void 0,2)),D==null||b==Array&&a(D))for(h=l(v.length),f=new b(h);h>L;L++)c(f,L,k?x(v[L],L):v[L]);else for(y=D.call(v),f=new b;!(p=y.next()).done;L++)c(f,L,k?s(y,x,[p.value,L],!0):p.value);return f.length=L,f}})},function(n,t,e){"use strict";var i=e(0),r=e(75)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!e(24)(o)),"Array",{indexOf:function(a){return s?o.apply(this,arguments)||0:r(this,a,arguments[1])}})},function(n,t,e){var i=e(0);i(i.S,"Array",{isArray:e(106)})},function(n,t,e){"use strict";var i=e(0),r=e(19),o=[].join;i(i.P+i.F*(e(64)!=Object||!e(24)(o)),"Array",{join:function(s){return o.call(r(this),s===void 0?",":s)}})},function(n,t,e){"use strict";var i=e(0),r=e(19),o=e(36),s=e(11),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!e(24)(a)),"Array",{lastIndexOf:function(c){if(l)return a.apply(this,arguments)||0;var d=r(this),u=s(d.length),h=u-1;for(arguments.length>1&&(h=Math.min(h,o(arguments[1]))),h<0&&(h=u+h);h>=0;h--)if(h in d&&d[h]===c)return h||0;return-1}})},function(n,t,e){"use strict";var i=e(0),r=e(25)(1);i(i.P+i.F*!e(24)([].map,!0),"Array",{map:function(o){return r(this,o,arguments[1])}})},function(n,t,e){"use strict";var i=e(0),r=e(99);i(i.S+i.F*e(5)(function(){function o(){}return!(Array.of.call(o)instanceof o)}),"Array",{of:function(){for(var o=0,s=arguments.length,a=new(typeof this=="function"?this:Array)(s);s>o;)r(a,o,arguments[o++]);return a.length=s,a}})},function(n,t,e){"use strict";var i=e(0),r=e(151);i(i.P+i.F*!e(24)([].reduceRight,!0),"Array",{reduceRight:function(o){return r(this,o,arguments.length,arguments[1],!0)}})},function(n,t,e){"use strict";var i=e(0),r=e(151);i(i.P+i.F*!e(24)([].reduce,!0),"Array",{reduce:function(o){return r(this,o,arguments.length,arguments[1],!1)}})},function(n,t,e){"use strict";var i=e(0),r=e(103),o=e(22),s=e(44),a=e(11),l=[].slice;i(i.P+i.F*e(5)(function(){r&&l.call(r)}),"Array",{slice:function(c,d){var u=a(this.length),h=o(this);if(d=d===void 0?u:d,h=="Array")return l.call(this,c,d);for(var f=s(c,u),p=s(d,u),y=a(p-f),v=Array(y),b=0;b<y;b++)v[b]=h=="String"?this.charAt(f+b):this[f+b];return v}})},function(n,t,e){"use strict";var i=e(0),r=e(25)(3);i(i.P+i.F*!e(24)([].some,!0),"Array",{some:function(o){return r(this,o,arguments[1])}})},function(n,t,e){"use strict";var i=e(0),r=e(15),o=e(12),s=e(5),a=[].sort,l=[1,2,3];i(i.P+i.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!e(24)(a)),"Array",{sort:function(c){return c===void 0?a.call(o(this)):a.call(o(this),r(c))}})},function(n,t,e){e(43)("Array")},function(n,t,e){var i=e(0);i(i.S,"Date",{now:function(){return new Date().getTime()}})},function(n,t,e){"use strict";var i=e(0),r=e(5),o=Date.prototype.getTime,s=function(a){return a>9?a:"0"+a};i(i.P+i.F*(r(function(){return new Date(-5e13-1).toISOString()!="0385-07-25T07:06:39.999Z"})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var a=this,l=a.getUTCFullYear(),c=a.getUTCMilliseconds(),d=l<0?"-":l>9999?"+":"";return d+("00000"+Math.abs(l)).slice(d?-6:-4)+"-"+s(a.getUTCMonth()+1)+"-"+s(a.getUTCDate())+"T"+s(a.getUTCHours())+":"+s(a.getUTCMinutes())+":"+s(a.getUTCSeconds())+"."+(c>99?c:"0"+s(c))+"Z"}})},function(n,t,e){"use strict";var i=e(0),r=e(12),o=e(27);i(i.P+i.F*e(5)(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(s){var a=r(this),l=o(a);return typeof l!="number"||isFinite(l)?a.toISOString():null}})},function(n,t,e){var i=e(7)("toPrimitive"),r=Date.prototype;i in r||e(16)(r,i,e(225))},function(n,t,e){var i=Date.prototype,r="Invalid Date",o="toString",s=i[o],a=i.getTime;new Date(NaN)+""!=r&&e(17)(i,o,function(){var l=a.call(this);return l===l?s.call(this):r})},function(n,t,e){var i=e(0);i(i.P,"Function",{bind:e(152)})},function(n,t,e){"use strict";var i=e(6),r=e(21),o=e(7)("hasInstance"),s=Function.prototype;o in s||e(9).f(s,o,{value:function(a){if(typeof this!="function"||!i(a))return!1;if(!i(this.prototype))return a instanceof this;for(;a=r(a);)if(this.prototype===a)return!0;return!1}})},function(n,t,e){var i=e(9).f,r=e(35),o=e(14),s=Function.prototype,a=/^\s*function ([^ (]*)/,l="name",c=Object.isExtensible||function(){return!0};l in s||e(8)&&i(s,l,{configurable:!0,get:function(){try{var d=this,u=(""+d).match(a)[1];return o(d,l)||!c(d)||i(d,l,r(5,u)),u}catch{return""}}})},function(n,t,e){var i=e(0),r=e(160),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&Math.floor(s(Number.MAX_VALUE))==710&&s(1/0)==1/0),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>9490626562425156e-8?Math.log(a)+Math.LN2:r(a-1+o(a-1)*o(a+1))}})},function(n,t,e){function i(s){return isFinite(s=+s)&&s!=0?s<0?-i(-s):Math.log(s+Math.sqrt(s*s+1)):s}var r=e(0),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:i})},function(n,t,e){var i=e(0),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(o){return(o=+o)==0?o:Math.log((1+o)/(1-o))/2}})},function(n,t,e){var i=e(0),r=e(110);i(i.S,"Math",{cbrt:function(o){return r(o=+o)*Math.pow(Math.abs(o),1/3)}})},function(n,t,e){var i=e(0);i(i.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}})},function(n,t,e){var i=e(0),r=Math.exp;i(i.S,"Math",{cosh:function(o){return(r(o=+o)+r(-o))/2}})},function(n,t,e){var i=e(0),r=e(109);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(n,t,e){var i=e(0),r=e(110),o=Math.pow,s=o(2,-52),a=o(2,-23),l=o(2,127)*(2-a),c=o(2,-126),d=function(u){return u+1/s-1/s};i(i.S,"Math",{fround:function(u){var h,f,p=Math.abs(u),y=r(u);return p<c?y*d(p/c/a)*c*a:(h=(1+a/s)*p,f=h-(h-p),f>l||f!=f?y*(1/0):y*f)}})},function(n,t,e){var i=e(0),r=Math.abs;i(i.S,"Math",{hypot:function(o,s){for(var a,l,c=0,d=0,u=arguments.length,h=0;d<u;)a=r(arguments[d++]),h<a?(l=h/a,c=c*l*l+1,h=a):a>0?(l=a/h,c+=l*l):c+=a;return h===1/0?1/0:h*Math.sqrt(c)}})},function(n,t,e){var i=e(0),r=Math.imul;i(i.S+i.F*e(5)(function(){return r(4294967295,5)!=-5||r.length!=2}),"Math",{imul:function(o,s){var a=65535,l=+o,c=+s,d=a&l,u=a&c;return 0|d*u+((a&l>>>16)*u+d*(a&c>>>16)<<16>>>0)}})},function(n,t,e){var i=e(0);i(i.S,"Math",{log10:function(r){return Math.log(r)/Math.LN10}})},function(n,t,e){var i=e(0);i(i.S,"Math",{log1p:e(160)})},function(n,t,e){var i=e(0);i(i.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}})},function(n,t,e){var i=e(0);i(i.S,"Math",{sign:e(110)})},function(n,t,e){var i=e(0),r=e(109),o=Math.exp;i(i.S+i.F*e(5)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(s){return Math.abs(s=+s)<1?(r(s)-r(-s))/2:(o(s-1)-o(-s-1))*(Math.E/2)}})},function(n,t,e){var i=e(0),r=e(109),o=Math.exp;i(i.S,"Math",{tanh:function(s){var a=r(s=+s),l=r(-s);return a==1/0?1:l==1/0?-1:(a-l)/(o(s)+o(-s))}})},function(n,t,e){var i=e(0);i(i.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}})},function(n,t,e){"use strict";var i=e(4),r=e(14),o=e(22),s=e(104),a=e(27),l=e(5),c=e(40).f,d=e(20).f,u=e(9).f,h=e(55).trim,f="Number",p=i[f],y=p,v=p.prototype,b=o(e(39)(v))==f,S="trim"in String.prototype,x=function(V){var O=a(V,!1);if(typeof O=="string"&&O.length>2){O=S?O.trim():h(O,3);var R,G,Z,K=O.charCodeAt(0);if(K===43||K===45){if(R=O.charCodeAt(2),R===88||R===120)return NaN}else if(K===48){switch(O.charCodeAt(1)){case 66:case 98:G=2,Z=49;break;case 79:case 111:G=8,Z=55;break;default:return+O}for(var C,A=O.slice(2),I=0,T=A.length;I<T;I++)if(C=A.charCodeAt(I),C<48||C>Z)return NaN;return parseInt(A,G)}}return+O};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(V){var O=arguments.length<1?0:V,R=this;return R instanceof p&&(b?l(function(){v.valueOf.call(R)}):o(R)!=f)?s(new y(x(O)),R,p):x(O)};for(var k,L=e(8)?c(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;L.length>D;D++)r(y,k=L[D])&&!r(p,k)&&u(p,k,d(y,k));p.prototype=v,v.constructor=p,e(17)(i,f,p)}},function(n,t,e){var i=e(0);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(n,t,e){var i=e(0),r=e(4).isFinite;i(i.S,"Number",{isFinite:function(o){return typeof o=="number"&&r(o)}})},function(n,t,e){var i=e(0);i(i.S,"Number",{isInteger:e(157)})},function(n,t,e){var i=e(0);i(i.S,"Number",{isNaN:function(r){return r!=r}})},function(n,t,e){var i=e(0),r=e(157),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(s){return r(s)&&o(s)<=9007199254740991}})},function(n,t,e){var i=e(0);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(n,t,e){var i=e(0);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(n,t,e){var i=e(0),r=e(167);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(n,t,e){var i=e(0),r=e(168);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(n,t,e){"use strict";var i=e(0),r=e(36),o=e(148),s=e(117),a=1 .toFixed,l=Math.floor,c=[0,0,0,0,0,0],d="Number.toFixed: incorrect invocation!",u="0",h=function(b,S){for(var x=-1,k=S;++x<6;)k+=b*c[x],c[x]=k%1e7,k=l(k/1e7)},f=function(b){for(var S=6,x=0;--S>=0;)x+=c[S],c[S]=l(x/b),x=x%b*1e7},p=function(){for(var b=6,S="";--b>=0;)if(S!==""||b===0||c[b]!==0){var x=String(c[b]);S=S===""?x:S+s.call(u,7-x.length)+x}return S},y=function(b,S,x){return S===0?x:S%2===1?y(b,S-1,x*b):y(b*b,S/2,x)},v=function(b){for(var S=0,x=b;x>=4096;)S+=12,x/=4096;for(;x>=2;)S+=1,x/=2;return S};i(i.P+i.F*(!!a&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!e(5)(function(){a.call({})})),"Number",{toFixed:function(b){var S,x,k,L,D=o(this,d),V=r(b),O="",R=u;if(V<0||V>20)throw RangeError(d);if(D!=D)return"NaN";if(D<=-1e21||D>=1e21)return String(D);if(D<0&&(O="-",D=-D),D>1e-21)if(S=v(D*y(2,69,1))-69,x=S<0?D*y(2,-S,1):D/y(2,S,1),x*=4503599627370496,S=52-S,S>0){for(h(0,x),k=V;k>=7;)h(1e7,0),k-=7;for(h(y(10,k,1),0),k=S-1;k>=23;)f(1<<23),k-=23;f(1<<k),h(1,1),f(2),R=p()}else h(0,x),h(1<<-S,0),R=p()+s.call(u,V);return V>0?(L=R.length,R=O+(L<=V?"0."+s.call(u,V-L)+R:R.slice(0,L-V)+"."+R.slice(L-V))):R=O+R,R}})},function(n,t,e){"use strict";var i=e(0),r=e(5),o=e(148),s=1 .toPrecision;i(i.P+i.F*(r(function(){return s.call(1,void 0)!=="1"})||!r(function(){s.call({})})),"Number",{toPrecision:function(a){var l=o(this,"Number#toPrecision: incorrect invocation!");return a===void 0?s.call(l):s.call(l,a)}})},function(n,t,e){var i=e(0);i(i.S+i.F,"Object",{assign:e(161)})},function(n,t,e){var i=e(0);i(i.S,"Object",{create:e(39)})},function(n,t,e){var i=e(0);i(i.S+i.F*!e(8),"Object",{defineProperties:e(162)})},function(n,t,e){var i=e(0);i(i.S+i.F*!e(8),"Object",{defineProperty:e(9).f})},function(n,t,e){var i=e(6),r=e(34).onFreeze;e(26)("freeze",function(o){return function(s){return o&&i(s)?o(r(s)):s}})},function(n,t,e){var i=e(19),r=e(20).f;e(26)("getOwnPropertyDescriptor",function(){return function(o,s){return r(i(o),s)}})},function(n,t,e){e(26)("getOwnPropertyNames",function(){return e(163).f})},function(n,t,e){var i=e(12),r=e(21);e(26)("getPrototypeOf",function(){return function(o){return r(i(o))}})},function(n,t,e){var i=e(6);e(26)("isExtensible",function(r){return function(o){return!!i(o)&&(!r||r(o))}})},function(n,t,e){var i=e(6);e(26)("isFrozen",function(r){return function(o){return!i(o)||!!r&&r(o)}})},function(n,t,e){var i=e(6);e(26)("isSealed",function(r){return function(o){return!i(o)||!!r&&r(o)}})},function(n,t,e){var i=e(0);i(i.S,"Object",{is:e(169)})},function(n,t,e){var i=e(12),r=e(41);e(26)("keys",function(){return function(o){return r(i(o))}})},function(n,t,e){var i=e(6),r=e(34).onFreeze;e(26)("preventExtensions",function(o){return function(s){return o&&i(s)?o(r(s)):s}})},function(n,t,e){var i=e(6),r=e(34).onFreeze;e(26)("seal",function(o){return function(s){return o&&i(s)?o(r(s)):s}})},function(n,t,e){var i=e(0);i(i.S,"Object",{setPrototypeOf:e(112).set})},function(n,t,e){"use strict";var i=e(63),r={};r[e(7)("toStringTag")]="z",r+""!="[object z]"&&e(17)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(n,t,e){var i=e(0),r=e(167);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(n,t,e){var i=e(0),r=e(168);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(n,t,e){"use strict";var i,r,o,s=e(38),a=e(4),l=e(30),c=e(63),d=e(0),u=e(6),h=e(15),f=e(37),p=e(52),y=e(114),v=e(119).set,b=e(111)(),S="Promise",x=a.TypeError,L=a.process,k=a[S],L=a.process,D=c(L)=="process",V=function(){},O=!!(function(){try{var $=k.resolve(1),te=($.constructor={})[e(7)("species")]=function(se){se(V,V)};return(D||typeof PromiseRejectionEvent=="function")&&$.then(V)instanceof te}catch{}})(),R=function($,te){return $===te||$===k&&te===o},G=function($){var te;return!(!u($)||typeof(te=$.then)!="function")&&te},Z=function($){return R(k,$)?new K($):new r($)},K=r=function($){var te,se;this.promise=new $(function(ue,Se){if(te!==void 0||se!==void 0)throw x("Bad Promise constructor");te=ue,se=Se}),this.resolve=h(te),this.reject=h(se)},C=function($){try{$()}catch(te){return{error:te}}},A=function($,te){if(!$._n){$._n=!0;var se=$._c;b(function(){for(var ue=$._v,Se=$._s==1,Ie=0,Be=function(ce){var pe,re,ae=Se?ce.ok:ce.fail,fe=ce.resolve,De=ce.reject,be=ce.domain;try{ae?(Se||($._h==2&&M($),$._h=1),ae===!0?pe=ue:(be&&be.enter(),pe=ae(ue),be&&be.exit()),pe===ce.promise?De(x("Promise-chain cycle")):(re=G(pe))?re.call(pe,fe,De):fe(pe)):De(ue)}catch(Ae){De(Ae)}};se.length>Ie;)Be(se[Ie++]);$._c=[],$._n=!1,te&&!$._h&&I($)})}},I=function($){v.call(a,function(){var te,se,ue,Se=$._v;if(T($)&&(te=C(function(){D?L.emit("unhandledRejection",Se,$):(se=a.onunhandledrejection)?se({promise:$,reason:Se}):(ue=a.console)&&ue.error&&ue.error("Unhandled promise rejection",Se)}),$._h=D||T($)?2:1),$._a=void 0,te)throw te.error})},T=function($){if($._h==1)return!1;for(var te,se=$._a||$._c,ue=0;se.length>ue;)if(te=se[ue++],te.fail||!T(te.promise))return!1;return!0},M=function($){v.call(a,function(){var te;D?L.emit("rejectionHandled",$):(te=a.onrejectionhandled)&&te({promise:$,reason:$._v})})},F=function($){var te=this;te._d||(te._d=!0,te=te._w||te,te._v=$,te._s=2,te._a||(te._a=te._c.slice()),A(te,!0))},q=function($){var te,se=this;if(!se._d){se._d=!0,se=se._w||se;try{if(se===$)throw x("Promise can't be resolved itself");(te=G($))?b(function(){var ue={_w:se,_d:!1};try{te.call($,l(q,ue,1),l(F,ue,1))}catch(Se){F.call(ue,Se)}}):(se._v=$,se._s=1,A(se,!1))}catch(ue){F.call({_w:se,_d:!1},ue)}}};O||(k=function($){f(this,k,S,"_h"),h($),i.call(this);try{$(l(q,this,1),l(F,this,1))}catch(te){F.call(this,te)}},i=function($){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=e(42)(k.prototype,{then:function($,te){var se=Z(y(this,k));return se.ok=typeof $!="function"||$,se.fail=typeof te=="function"&&te,se.domain=D?L.domain:void 0,this._c.push(se),this._a&&this._a.push(se),this._s&&A(this,!1),se.promise},catch:function($){return this.then(void 0,$)}}),K=function(){var $=new i;this.promise=$,this.resolve=l(q,$,1),this.reject=l(F,$,1)}),d(d.G+d.W+d.F*!O,{Promise:k}),e(54)(k,S),e(43)(S),o=e(29)[S],d(d.S+d.F*!O,S,{reject:function($){var te=Z(this),se=te.reject;return se($),te.promise}}),d(d.S+d.F*(s||!O),S,{resolve:function($){if($ instanceof k&&R($.constructor,this))return $;var te=Z(this),se=te.resolve;return se($),te.promise}}),d(d.S+d.F*!(O&&e(81)(function($){k.all($).catch(V)})),S,{all:function($){var te=this,se=Z(te),ue=se.resolve,Se=se.reject,Ie=C(function(){var Be=[],ce=0,pe=1;p($,!1,function(re){var ae=ce++,fe=!1;Be.push(void 0),pe++,te.resolve(re).then(function(De){fe||(fe=!0,Be[ae]=De,--pe||ue(Be))},Se)}),--pe||ue(Be)});return Ie&&Se(Ie.error),se.promise},race:function($){var te=this,se=Z(te),ue=se.reject,Se=C(function(){p($,!1,function(Ie){te.resolve(Ie).then(se.resolve,ue)})});return Se&&ue(Se.error),se.promise}})},function(n,t,e){var i=e(0),r=e(15),o=e(2),s=(e(4).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!e(5)(function(){s(function(){})}),"Reflect",{apply:function(l,c,d){var u=r(l),h=o(d);return s?s(u,c,h):a.call(u,c,h)}})},function(n,t,e){var i=e(0),r=e(39),o=e(15),s=e(2),a=e(6),l=e(5),c=e(152),d=(e(4).Reflect||{}).construct,u=l(function(){function f(){}return!(d(function(){},[],f)instanceof f)}),h=!l(function(){d(function(){})});i(i.S+i.F*(u||h),"Reflect",{construct:function(f,p){o(f),s(p);var y=arguments.length<3?f:o(arguments[2]);if(h&&!u)return d(f,p,y);if(f==y){switch(p.length){case 0:return new f;case 1:return new f(p[0]);case 2:return new f(p[0],p[1]);case 3:return new f(p[0],p[1],p[2]);case 4:return new f(p[0],p[1],p[2],p[3])}var v=[null];return v.push.apply(v,p),new(c.apply(f,v))}var b=y.prototype,S=r(a(b)?b:Object.prototype),x=Function.apply.call(f,S,p);return a(x)?x:S}})},function(n,t,e){var i=e(9),r=e(0),o=e(2),s=e(27);r(r.S+r.F*e(5)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(a,l,c){o(a),l=s(l,!0),o(c);try{return i.f(a,l,c),!0}catch{return!1}}})},function(n,t,e){var i=e(0),r=e(20).f,o=e(2);i(i.S,"Reflect",{deleteProperty:function(s,a){var l=r(o(s),a);return!(l&&!l.configurable)&&delete s[a]}})},function(n,t,e){"use strict";var i=e(0),r=e(2),o=function(s){this._t=r(s),this._i=0;var a,l=this._k=[];for(a in s)l.push(a)};e(107)(o,"Object",function(){var s,a=this,l=a._k;do if(a._i>=l.length)return{value:void 0,done:!0};while(!((s=l[a._i++])in a._t));return{value:s,done:!1}}),i(i.S,"Reflect",{enumerate:function(s){return new o(s)}})},function(n,t,e){var i=e(20),r=e(0),o=e(2);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(s,a){return i.f(o(s),a)}})},function(n,t,e){var i=e(0),r=e(21),o=e(2);i(i.S,"Reflect",{getPrototypeOf:function(s){return r(o(s))}})},function(n,t,e){function i(d,u){var h,f,p=arguments.length<3?d:arguments[2];return c(d)===p?d[u]:(h=r.f(d,u))?s(h,"value")?h.value:h.get!==void 0?h.get.call(p):void 0:l(f=o(d))?i(f,u,p):void 0}var r=e(20),o=e(21),s=e(14),a=e(0),l=e(6),c=e(2);a(a.S,"Reflect",{get:i})},function(n,t,e){var i=e(0);i(i.S,"Reflect",{has:function(r,o){return o in r}})},function(n,t,e){var i=e(0),r=e(2),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(s){return r(s),!o||o(s)}})},function(n,t,e){var i=e(0);i(i.S,"Reflect",{ownKeys:e(166)})},function(n,t,e){var i=e(0),r=e(2),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(s){r(s);try{return o&&o(s),!0}catch{return!1}}})},function(n,t,e){var i=e(0),r=e(112);r&&i(i.S,"Reflect",{setPrototypeOf:function(o,s){r.check(o,s);try{return r.set(o,s),!0}catch{return!1}}})},function(n,t,e){function i(h,f,p){var y,v,b=arguments.length<4?h:arguments[3],S=o.f(d(h),f);if(!S){if(u(v=s(h)))return i(v,f,p,b);S=c(0)}return a(S,"value")?!(S.writable===!1||!u(b))&&(y=o.f(b,f)||c(0),y.value=p,r.f(b,f,y),!0):S.set!==void 0&&(S.set.call(b,p),!0)}var r=e(9),o=e(20),s=e(21),a=e(14),l=e(0),c=e(35),d=e(2),u=e(6);l(l.S,"Reflect",{set:i})},function(n,t,e){var i=e(4),r=e(104),o=e(9).f,s=e(40).f,a=e(80),l=e(78),c=i.RegExp,d=c,u=c.prototype,h=/a/g,f=/a/g,p=new c(h)!==h;if(e(8)&&(!p||e(5)(function(){return f[e(7)("match")]=!1,c(h)!=h||c(f)==f||c(h,"i")!="/a/i"}))){c=function(S,x){var k=this instanceof c,L=a(S),D=x===void 0;return!k&&L&&S.constructor===c&&D?S:r(p?new d(L&&!D?S.source:S,x):d((L=S instanceof c)?S.source:S,L&&D?l.call(S):x),k?this:u,c)};for(var y=function(S){S in c||o(c,S,{configurable:!0,get:function(){return d[S]},set:function(x){d[S]=x}})},v=s(d),b=0;v.length>b;)y(v[b++]);u.constructor=c,c.prototype=u,e(17)(i,"RegExp",c)}e(43)("RegExp")},function(n,t,e){e(77)("match",1,function(i,r,o){return[function(s){"use strict";var a=i(this),l=s?.[r];return l!==void 0?l.call(s,a):new RegExp(s)[r](String(a))},o]})},function(n,t,e){e(77)("replace",2,function(i,r,o){return[function(s,a){"use strict";var l=i(this),c=s?.[r];return c!==void 0?c.call(s,l,a):o.call(String(l),s,a)},o]})},function(n,t,e){e(77)("search",1,function(i,r,o){return[function(s){"use strict";var a=i(this),l=s?.[r];return l!==void 0?l.call(s,a):new RegExp(s)[r](String(a))},o]})},function(n,t,e){e(77)("split",2,function(i,r,o){"use strict";var s=e(80),a=o,l=[].push,c="split",d="length",u="lastIndex";if("abbc"[c](/(b)*/)[1]=="c"||"test"[c](/(?:)/,-1)[d]!=4||"ab"[c](/(?:ab)*/)[d]!=2||"."[c](/(.?)(.?)/)[d]!=4||"."[c](/()()/)[d]>1||""[c](/.?/)[d]){var h=/()??/.exec("")[1]===void 0;o=function(f,p){var y=String(this);if(f===void 0&&p===0)return[];if(!s(f))return a.call(y,f,p);var v,b,S,x,k,L=[],D=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(f.sticky?"y":""),V=0,O=p===void 0?4294967295:p>>>0,R=new RegExp(f.source,D+"g");for(h||(v=new RegExp("^"+R.source+"$(?!\\s)",D));(b=R.exec(y))&&(S=b.index+b[0][d],!(S>V&&(L.push(y.slice(V,b.index)),!h&&b[d]>1&&b[0].replace(v,function(){for(k=1;k<arguments[d]-2;k++)arguments[k]===void 0&&(b[k]=void 0)}),b[d]>1&&b.index<y[d]&&l.apply(L,b.slice(1)),x=b[0][d],V=S,L[d]>=O)));)R[u]===b.index&&R[u]++;return V===y[d]?!x&&R.test("")||L.push(""):L.push(y.slice(V)),L[d]>O?L.slice(0,O):L}}else"0"[c](void 0,0)[d]&&(o=function(f,p){return f===void 0&&p===0?[]:a.call(this,f,p)});return[function(f,p){var y=i(this),v=f?.[r];return v!==void 0?v.call(f,y,p):o.call(String(y),f,p)},o]})},function(n,t,e){"use strict";e(173);var i=e(2),r=e(78),o=e(8),s="toString",a=/./[s],l=function(c){e(17)(RegExp.prototype,s,c,!0)};e(5)(function(){return a.call({source:"a",flags:"b"})!="/a/b"})?l(function(){var c=i(this);return"/".concat(c.source,"/","flags"in c?c.flags:!o&&c instanceof RegExp?r.call(c):void 0)}):a.name!=s&&l(function(){return a.call(this)})},function(n,t,e){"use strict";e(18)("anchor",function(i){return function(r){return i(this,"a","name",r)}})},function(n,t,e){"use strict";e(18)("big",function(i){return function(){return i(this,"big","","")}})},function(n,t,e){"use strict";e(18)("blink",function(i){return function(){return i(this,"blink","","")}})},function(n,t,e){"use strict";e(18)("bold",function(i){return function(){return i(this,"b","","")}})},function(n,t,e){"use strict";var i=e(0),r=e(115)(!1);i(i.P,"String",{codePointAt:function(o){return r(this,o)}})},function(n,t,e){"use strict";var i=e(0),r=e(11),o=e(116),s="endsWith",a=""[s];i(i.P+i.F*e(102)(s),"String",{endsWith:function(l){var c=o(this,l,s),d=arguments.length>1?arguments[1]:void 0,u=r(c.length),h=d===void 0?u:Math.min(r(d),u),f=String(l);return a?a.call(c,f,h):c.slice(h-f.length,h)===f}})},function(n,t,e){"use strict";e(18)("fixed",function(i){return function(){return i(this,"tt","","")}})},function(n,t,e){"use strict";e(18)("fontcolor",function(i){return function(r){return i(this,"font","color",r)}})},function(n,t,e){"use strict";e(18)("fontsize",function(i){return function(r){return i(this,"font","size",r)}})},function(n,t,e){var i=e(0),r=e(44),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&s.length!=1),"String",{fromCodePoint:function(a){for(var l,c=[],d=arguments.length,u=0;d>u;){if(l=+arguments[u++],r(l,1114111)!==l)throw RangeError(l+" is not a valid code point");c.push(l<65536?o(l):o(((l-=65536)>>10)+55296,l%1024+56320))}return c.join("")}})},function(n,t,e){"use strict";var i=e(0),r=e(116),o="includes";i(i.P+i.F*e(102)(o),"String",{includes:function(s){return!!~r(this,s,o).indexOf(s,arguments.length>1?arguments[1]:void 0)}})},function(n,t,e){"use strict";e(18)("italics",function(i){return function(){return i(this,"i","","")}})},function(n,t,e){"use strict";var i=e(115)(!0);e(108)(String,"String",function(r){this._t=String(r),this._i=0},function(){var r,o=this._t,s=this._i;return s>=o.length?{value:void 0,done:!0}:(r=i(o,s),this._i+=r.length,{value:r,done:!1})})},function(n,t,e){"use strict";e(18)("link",function(i){return function(r){return i(this,"a","href",r)}})},function(n,t,e){var i=e(0),r=e(19),o=e(11);i(i.S,"String",{raw:function(s){for(var a=r(s.raw),l=o(a.length),c=arguments.length,d=[],u=0;l>u;)d.push(String(a[u++])),u<c&&d.push(String(arguments[u]));return d.join("")}})},function(n,t,e){var i=e(0);i(i.P,"String",{repeat:e(117)})},function(n,t,e){"use strict";e(18)("small",function(i){return function(){return i(this,"small","","")}})},function(n,t,e){"use strict";var i=e(0),r=e(11),o=e(116),s="startsWith",a=""[s];i(i.P+i.F*e(102)(s),"String",{startsWith:function(l){var c=o(this,l,s),d=r(Math.min(arguments.length>1?arguments[1]:void 0,c.length)),u=String(l);return a?a.call(c,u,d):c.slice(d,d+u.length)===u}})},function(n,t,e){"use strict";e(18)("strike",function(i){return function(){return i(this,"strike","","")}})},function(n,t,e){"use strict";e(18)("sub",function(i){return function(){return i(this,"sub","","")}})},function(n,t,e){"use strict";e(18)("sup",function(i){return function(){return i(this,"sup","","")}})},function(n,t,e){"use strict";e(55)("trim",function(i){return function(){return i(this,3)}})},function(n,t,e){"use strict";var i=e(4),r=e(14),o=e(8),s=e(0),a=e(17),l=e(34).KEY,c=e(5),d=e(84),u=e(54),h=e(45),f=e(7),p=e(171),y=e(121),v=e(227),b=e(226),S=e(106),x=e(2),k=e(19),L=e(27),D=e(35),V=e(39),O=e(163),R=e(20),G=e(9),Z=e(41),K=R.f,C=G.f,A=O.f,I=i.Symbol,T=i.JSON,M=T&&T.stringify,F="prototype",q=f("_hidden"),$=f("toPrimitive"),te={}.propertyIsEnumerable,se=d("symbol-registry"),ue=d("symbols"),Se=d("op-symbols"),Ie=Object[F],Be=typeof I=="function",ce=i.QObject,pe=!ce||!ce[F]||!ce[F].findChild,re=o&&c(function(){return V(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a!=7})?function(B,W,ie){var ye=K(Ie,W);ye&&delete Ie[W],C(B,W,ie),ye&&B!==Ie&&C(Ie,W,ye)}:C,ae=function(B){var W=ue[B]=V(I[F]);return W._k=B,W},fe=Be&&typeof I.iterator=="symbol"?function(B){return typeof B=="symbol"}:function(B){return B instanceof I},De=function(B,W,ie){return B===Ie&&De(Se,W,ie),x(B),W=L(W,!0),x(ie),r(ue,W)?(ie.enumerable?(r(B,q)&&B[q][W]&&(B[q][W]=!1),ie=V(ie,{enumerable:D(0,!1)})):(r(B,q)||C(B,q,D(1,{})),B[q][W]=!0),re(B,W,ie)):C(B,W,ie)},be=function(B,W){x(B);for(var ie,ye=b(W=k(W)),Me=0,Fe=ye.length;Fe>Me;)De(B,ie=ye[Me++],W[ie]);return B},Ae=function(B,W){return W===void 0?V(B):be(V(B),W)},Ce=function(B){var W=te.call(this,B=L(B,!0));return!(this===Ie&&r(ue,B)&&!r(Se,B))&&(!(W||!r(this,B)||!r(ue,B)||r(this,q)&&this[q][B])||W)},we=function(B,W){if(B=k(B),W=L(W,!0),B!==Ie||!r(ue,W)||r(Se,W)){var ie=K(B,W);return!ie||!r(ue,W)||r(B,q)&&B[q][W]||(ie.enumerable=!0),ie}},ve=function(B){for(var W,ie=A(k(B)),ye=[],Me=0;ie.length>Me;)r(ue,W=ie[Me++])||W==q||W==l||ye.push(W);return ye},xe=function(B){for(var W,ie=B===Ie,ye=A(ie?Se:k(B)),Me=[],Fe=0;ye.length>Fe;)!r(ue,W=ye[Fe++])||ie&&!r(Ie,W)||Me.push(ue[W]);return Me};Be||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var B=h(arguments.length>0?arguments[0]:void 0),W=function(ie){this===Ie&&W.call(Se,ie),r(this,q)&&r(this[q],B)&&(this[q][B]=!1),re(this,B,D(1,ie))};return o&&pe&&re(Ie,B,{configurable:!0,set:W}),ae(B)},a(I[F],"toString",function(){return this._k}),R.f=we,G.f=De,e(40).f=O.f=ve,e(65).f=Ce,e(83).f=xe,o&&!e(38)&&a(Ie,"propertyIsEnumerable",Ce,!0),p.f=function(B){return ae(f(B))}),s(s.G+s.W+s.F*!Be,{Symbol:I});for(var Te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ke=0;Te.length>ke;)f(Te[ke++]);for(var Te=Z(f.store),ke=0;Te.length>ke;)y(Te[ke++]);s(s.S+s.F*!Be,"Symbol",{for:function(B){return r(se,B+="")?se[B]:se[B]=I(B)},keyFor:function(B){if(fe(B))return v(se,B);throw TypeError(B+" is not a symbol!")},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),s(s.S+s.F*!Be,"Object",{create:Ae,defineProperty:De,defineProperties:be,getOwnPropertyDescriptor:we,getOwnPropertyNames:ve,getOwnPropertySymbols:xe}),T&&s(s.S+s.F*(!Be||c(function(){var B=I();return M([B])!="[null]"||M({a:B})!="{}"||M(Object(B))!="{}"})),"JSON",{stringify:function(B){if(B!==void 0&&!fe(B)){for(var W,ie,ye=[B],Me=1;arguments.length>Me;)ye.push(arguments[Me++]);return W=ye[1],typeof W=="function"&&(ie=W),!ie&&S(W)||(W=function(Fe,tt){if(ie&&(tt=ie.call(this,Fe,tt)),!fe(tt))return tt}),ye[1]=W,M.apply(T,ye)}}}),I[F][$]||e(16)(I[F],$,I[F].valueOf),u(I,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},function(n,t,e){"use strict";var i=e(0),r=e(85),o=e(120),s=e(2),a=e(44),l=e(11),c=e(6),d=e(4).ArrayBuffer,u=e(114),h=o.ArrayBuffer,f=o.DataView,p=r.ABV&&d.isView,y=h.prototype.slice,v=r.VIEW,b="ArrayBuffer";i(i.G+i.W+i.F*(d!==h),{ArrayBuffer:h}),i(i.S+i.F*!r.CONSTR,b,{isView:function(S){return p&&p(S)||c(S)&&v in S}}),i(i.P+i.U+i.F*e(5)(function(){return!new h(2).slice(1,void 0).byteLength}),b,{slice:function(S,x){if(y!==void 0&&x===void 0)return y.call(s(this),S);for(var k=s(this).byteLength,L=a(S,k),D=a(x===void 0?k:x,k),V=new(u(this,h))(l(D-L)),O=new f(this),R=new f(V),G=0;L<D;)R.setUint8(G++,O.getUint8(L++));return V}}),e(43)(b)},function(n,t,e){var i=e(0);i(i.G+i.W+i.F*!e(85).ABV,{DataView:e(120).DataView})},function(n,t,e){e(32)("Float32",4,function(i){return function(r,o,s){return i(this,r,o,s)}})},function(n,t,e){e(32)("Float64",8,function(i){return function(r,o,s){return i(this,r,o,s)}})},function(n,t,e){e(32)("Int16",2,function(i){return function(r,o,s){return i(this,r,o,s)}})},function(n,t,e){e(32)("Int32",4,function(i){return function(r,o,s){return i(this,r,o,s)}})},function(n,t,e){e(32)("Int8",1,function(i){return function(r,o,s){return i(this,r,o,s)}})},function(n,t,e){e(32)("Uint16",2,function(i){return function(r,o,s){return i(this,r,o,s)}})},function(n,t,e){e(32)("Uint32",4,function(i){return function(r,o,s){return i(this,r,o,s)}})},function(n,t,e){e(32)("Uint8",1,function(i){return function(r,o,s){return i(this,r,o,s)}})},function(n,t,e){e(32)("Uint8",1,function(i){return function(r,o,s){return i(this,r,o,s)}},!0)},function(n,t,e){"use strict";var i=e(155);e(76)("WeakSet",function(r){return function(){return r(this,arguments.length>0?arguments[0]:void 0)}},{add:function(r){return i.def(this,r,!0)}},i,!1,!0)},function(n,t,e){"use strict";var i=e(0),r=e(75)(!0);i(i.P,"Array",{includes:function(o){return r(this,o,arguments.length>1?arguments[1]:void 0)}}),e(51)("includes")},function(n,t,e){var i=e(0),r=e(111)(),o=e(4).process,s=e(22)(o)=="process";i(i.G,{asap:function(a){var l=s&&o.domain;r(l?l.bind(a):a)}})},function(n,t,e){var i=e(0),r=e(22);i(i.S,"Error",{isError:function(o){return r(o)==="Error"}})},function(n,t,e){var i=e(0);i(i.P+i.R,"Map",{toJSON:e(154)("Map")})},function(n,t,e){var i=e(0);i(i.S,"Math",{iaddh:function(r,o,s,a){var l=r>>>0,c=o>>>0,d=s>>>0;return c+(a>>>0)+((l&d|(l|d)&~(l+d>>>0))>>>31)|0}})},function(n,t,e){var i=e(0);i(i.S,"Math",{imulh:function(r,o){var s=65535,a=+r,l=+o,c=a&s,d=l&s,u=a>>16,h=l>>16,f=(u*d>>>0)+(c*d>>>16);return u*h+(f>>16)+((c*h>>>0)+(f&s)>>16)}})},function(n,t,e){var i=e(0);i(i.S,"Math",{isubh:function(r,o,s,a){var l=r>>>0,c=o>>>0,d=s>>>0;return c-(a>>>0)-((~l&d|~(l^d)&l-d>>>0)>>>31)|0}})},function(n,t,e){var i=e(0);i(i.S,"Math",{umulh:function(r,o){var s=65535,a=+r,l=+o,c=a&s,d=l&s,u=a>>>16,h=l>>>16,f=(u*d>>>0)+(c*d>>>16);return u*h+(f>>>16)+((c*h>>>0)+(f&s)>>>16)}})},function(n,t,e){"use strict";var i=e(0),r=e(12),o=e(15),s=e(9);e(8)&&i(i.P+e(82),"Object",{__defineGetter__:function(a,l){s.f(r(this),a,{get:o(l),enumerable:!0,configurable:!0})}})},function(n,t,e){"use strict";var i=e(0),r=e(12),o=e(15),s=e(9);e(8)&&i(i.P+e(82),"Object",{__defineSetter__:function(a,l){s.f(r(this),a,{set:o(l),enumerable:!0,configurable:!0})}})},function(n,t,e){var i=e(0),r=e(165)(!0);i(i.S,"Object",{entries:function(o){return r(o)}})},function(n,t,e){var i=e(0),r=e(166),o=e(19),s=e(20),a=e(99);i(i.S,"Object",{getOwnPropertyDescriptors:function(l){for(var c,d=o(l),u=s.f,h=r(d),f={},p=0;h.length>p;)a(f,c=h[p++],u(d,c));return f}})},function(n,t,e){"use strict";var i=e(0),r=e(12),o=e(27),s=e(21),a=e(20).f;e(8)&&i(i.P+e(82),"Object",{__lookupGetter__:function(l){var c,d=r(this),u=o(l,!0);do if(c=a(d,u))return c.get;while(d=s(d))}})},function(n,t,e){"use strict";var i=e(0),r=e(12),o=e(27),s=e(21),a=e(20).f;e(8)&&i(i.P+e(82),"Object",{__lookupSetter__:function(l){var c,d=r(this),u=o(l,!0);do if(c=a(d,u))return c.set;while(d=s(d))}})},function(n,t,e){var i=e(0),r=e(165)(!1);i(i.S,"Object",{values:function(o){return r(o)}})},function(n,t,e){"use strict";var i=e(0),r=e(4),o=e(29),s=e(111)(),a=e(7)("observable"),l=e(15),c=e(2),d=e(37),u=e(42),h=e(16),f=e(52),p=f.RETURN,y=function(D){return D==null?void 0:l(D)},v=function(D){var V=D._c;V&&(D._c=void 0,V())},b=function(D){return D._o===void 0},S=function(D){b(D)||(D._o=void 0,v(D))},x=function(D,V){c(D),this._c=void 0,this._o=D,D=new k(this);try{var O=V(D),R=O;O!=null&&(typeof O.unsubscribe=="function"?O=function(){R.unsubscribe()}:l(O),this._c=O)}catch(G){return void D.error(G)}b(this)&&v(this)};x.prototype=u({},{unsubscribe:function(){S(this)}});var k=function(D){this._s=D};k.prototype=u({},{next:function(D){var V=this._s;if(!b(V)){var O=V._o;try{var R=y(O.next);if(R)return R.call(O,D)}catch(G){try{S(V)}finally{throw G}}}},error:function(D){var V=this._s;if(b(V))throw D;var O=V._o;V._o=void 0;try{var R=y(O.error);if(!R)throw D;D=R.call(O,D)}catch(G){try{v(V)}finally{throw G}}return v(V),D},complete:function(D){var V=this._s;if(!b(V)){var O=V._o;V._o=void 0;try{var R=y(O.complete);D=R?R.call(O,D):void 0}catch(G){try{v(V)}finally{throw G}}return v(V),D}}});var L=function(D){d(this,L,"Observable","_f")._f=l(D)};u(L.prototype,{subscribe:function(D){return new x(D,this._f)},forEach:function(D){var V=this;return new(o.Promise||r.Promise)(function(O,R){l(D);var G=V.subscribe({next:function(Z){try{return D(Z)}catch(K){R(K),G.unsubscribe()}},error:R,complete:O})})}}),u(L,{from:function(D){var V=typeof this=="function"?this:L,O=y(c(D)[a]);if(O){var R=c(O.call(D));return R.constructor===V?R:new V(function(G){return R.subscribe(G)})}return new V(function(G){var Z=!1;return s(function(){if(!Z){try{if(f(D,!1,function(K){if(G.next(K),Z)return p})===p)return}catch(K){if(Z)throw K;return void G.error(K)}G.complete()}}),function(){Z=!0}})},of:function(){for(var D=0,V=arguments.length,O=Array(V);D<V;)O[D]=arguments[D++];return new(typeof this=="function"?this:L)(function(R){var G=!1;return s(function(){if(!G){for(var Z=0;Z<O.length;++Z)if(R.next(O[Z]),G)return;R.complete()}}),function(){G=!0}})}}),h(L.prototype,a,function(){return this}),i(i.G,{Observable:L}),e(43)("Observable")},function(n,t,e){var i=e(31),r=e(2),o=i.key,s=i.set;i.exp({defineMetadata:function(a,l,c,d){s(a,l,r(c),o(d))}})},function(n,t,e){var i=e(31),r=e(2),o=i.key,s=i.map,a=i.store;i.exp({deleteMetadata:function(l,c){var d=arguments.length<3?void 0:o(arguments[2]),u=s(r(c),d,!1);if(u===void 0||!u.delete(l))return!1;if(u.size)return!0;var h=a.get(c);return h.delete(d),!!h.size||a.delete(c)}})},function(n,t,e){var i=e(174),r=e(150),o=e(31),s=e(2),a=e(21),l=o.keys,c=o.key,d=function(u,h){var f=l(u,h),p=a(u);if(p===null)return f;var y=d(p,h);return y.length?f.length?r(new i(f.concat(y))):y:f};o.exp({getMetadataKeys:function(u){return d(s(u),arguments.length<2?void 0:c(arguments[1]))}})},function(n,t,e){var i=e(31),r=e(2),o=e(21),s=i.has,a=i.get,l=i.key,c=function(d,u,h){var f=s(d,u,h);if(f)return a(d,u,h);var p=o(u);return p!==null?c(d,p,h):void 0};i.exp({getMetadata:function(d,u){return c(d,r(u),arguments.length<3?void 0:l(arguments[2]))}})},function(n,t,e){var i=e(31),r=e(2),o=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(a){return o(r(a),arguments.length<2?void 0:s(arguments[1]))}})},function(n,t,e){var i=e(31),r=e(2),o=i.get,s=i.key;i.exp({getOwnMetadata:function(a,l){return o(a,r(l),arguments.length<3?void 0:s(arguments[2]))}})},function(n,t,e){var i=e(31),r=e(2),o=e(21),s=i.has,a=i.key,l=function(c,d,u){var h=s(c,d,u);if(h)return!0;var f=o(d);return f!==null&&l(c,f,u)};i.exp({hasMetadata:function(c,d){return l(c,r(d),arguments.length<3?void 0:a(arguments[2]))}})},function(n,t,e){var i=e(31),r=e(2),o=i.has,s=i.key;i.exp({hasOwnMetadata:function(a,l){return o(a,r(l),arguments.length<3?void 0:s(arguments[2]))}})},function(n,t,e){var i=e(31),r=e(2),o=e(15),s=i.key,a=i.set;i.exp({metadata:function(l,c){return function(d,u){a(l,c,(u!==void 0?r:o)(d),s(u))}}})},function(n,t,e){var i=e(0);i(i.P+i.R,"Set",{toJSON:e(154)("Set")})},function(n,t,e){"use strict";var i=e(0),r=e(115)(!0);i(i.P,"String",{at:function(o){return r(this,o)}})},function(n,t,e){"use strict";var i=e(0),r=e(23),o=e(11),s=e(80),a=e(78),l=RegExp.prototype,c=function(d,u){this._r=d,this._s=u};e(107)(c,"RegExp String",function(){var d=this._r.exec(this._s);return{value:d,done:d===null}}),i(i.P,"String",{matchAll:function(d){if(r(this),!s(d))throw TypeError(d+" is not a regexp!");var u=String(this),h="flags"in l?String(d.flags):a.call(d),f=new RegExp(d.source,~h.indexOf("g")?h:"g"+h);return f.lastIndex=o(d.lastIndex),new c(f,u)}})},function(n,t,e){"use strict";var i=e(0),r=e(170);i(i.P,"String",{padEnd:function(o){return r(this,o,arguments.length>1?arguments[1]:void 0,!1)}})},function(n,t,e){"use strict";var i=e(0),r=e(170);i(i.P,"String",{padStart:function(o){return r(this,o,arguments.length>1?arguments[1]:void 0,!0)}})},function(n,t,e){"use strict";e(55)("trimLeft",function(i){return function(){return i(this,1)}},"trimStart")},function(n,t,e){"use strict";e(55)("trimRight",function(i){return function(){return i(this,2)}},"trimEnd")},function(n,t,e){e(121)("asyncIterator")},function(n,t,e){e(121)("observable")},function(n,t,e){var i=e(0);i(i.S,"System",{global:e(4)})},function(n,t,e){for(var i=e(123),r=e(17),o=e(4),s=e(16),a=e(53),l=e(7),c=l("iterator"),d=l("toStringTag"),u=a.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var p,y=h[f],v=o[y],b=v&&v.prototype;if(b){b[c]||s(b,c,u),b[d]||s(b,d,y),a[y]=u;for(p in i)b[p]||r(b,p,i[p],!0)}}},function(n,t,e){var i=e(0),r=e(119);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(n,t,e){var i=e(4),r=e(0),o=e(79),s=e(228),a=i.navigator,l=!!a&&/MSIE .\./.test(a.userAgent),c=function(d){return l?function(u,h){return d(o(s,[].slice.call(arguments,2),typeof u=="function"?u:Function(u)),h)}:d};r(r.G+r.B+r.F*l,{setTimeout:c(i.setTimeout),setInterval:c(i.setInterval)})},function(n,t,e){e(351),e(290),e(292),e(291),e(294),e(296),e(301),e(295),e(293),e(303),e(302),e(298),e(299),e(297),e(289),e(300),e(304),e(305),e(257),e(259),e(258),e(307),e(306),e(277),e(287),e(288),e(278),e(279),e(280),e(281),e(282),e(283),e(284),e(285),e(286),e(260),e(261),e(262),e(263),e(264),e(265),e(266),e(267),e(268),e(269),e(270),e(271),e(272),e(273),e(274),e(275),e(276),e(338),e(343),e(350),e(341),e(333),e(334),e(339),e(344),e(346),e(329),e(330),e(331),e(332),e(335),e(336),e(337),e(340),e(342),e(345),e(347),e(348),e(349),e(252),e(254),e(253),e(256),e(255),e(241),e(239),e(245),e(242),e(248),e(250),e(238),e(244),e(235),e(249),e(233),e(247),e(246),e(240),e(243),e(232),e(234),e(237),e(236),e(251),e(123),e(323),e(328),e(173),e(324),e(325),e(326),e(327),e(308),e(172),e(174),e(175),e(363),e(352),e(353),e(358),e(361),e(362),e(356),e(359),e(357),e(360),e(354),e(355),e(309),e(310),e(311),e(312),e(313),e(316),e(314),e(315),e(317),e(318),e(319),e(320),e(322),e(321),e(364),e(390),e(393),e(392),e(394),e(395),e(391),e(396),e(397),e(375),e(378),e(374),e(372),e(373),e(376),e(377),e(367),e(389),e(398),e(366),e(368),e(370),e(369),e(371),e(380),e(381),e(383),e(382),e(385),e(384),e(386),e(387),e(388),e(365),e(379),e(401),e(400),e(399),n.exports=e(29)},function(n,t,e){(function(i){function r(c){this.curveType=l[c],this.curveType||(this.curveType={name:c}),this.curve=new s.ec(this.curveType.name),this.keys=void 0}function o(c,d,u){Array.isArray(c)||(c=c.toArray());var h=new i(c);if(u&&h.length<u){var f=new i(u-h.length);f.fill(0),h=i.concat([f,h])}return d?h.toString(d):h}var s=e(13),a=e(10);n.exports=function(c){return new r(c)};var l={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};l.p224=l.secp224r1,l.p256=l.secp256r1=l.prime256v1,l.p192=l.secp192r1=l.prime192v1,l.p384=l.secp384r1,l.p521=l.secp521r1,r.prototype.generateKeys=function(c,d){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,d)},r.prototype.computeSecret=function(c,d,u){d=d||"utf8",i.isBuffer(c)||(c=new i(c,d));var h=this.curve.keyFromPublic(c).getPublic(),f=h.mul(this.keys.getPrivate()).getX();return o(f,u,this.curveType.byteLength)},r.prototype.getPublicKey=function(c,d){var u=this.keys.getPublic(d==="compressed",!0);return d==="hybrid"&&(u[u.length-1]%2?u[0]=7:u[0]=6),o(u,c)},r.prototype.getPrivateKey=function(c){return o(this.keys.getPrivate(),c)},r.prototype.setPublicKey=function(c,d){return d=d||"utf8",i.isBuffer(c)||(c=new i(c,d)),this.keys._importPublic(c),this},r.prototype.setPrivateKey=function(c,d){d=d||"utf8",i.isBuffer(c)||(c=new i(c,d));var u=new a(c);return u=u.toString(16),this.keys._importPrivate(u),this}}).call(t,e(1).Buffer)},function(n,t,e){"use strict";(function(i){function r(d,u){if(d.length%a!==0){var h=d.length+(a-d.length%a);d=i.concat([d,l],h)}for(var f=[],p=u?d.readInt32BE:d.readInt32LE,y=0;y<d.length;y+=a)f.push(p.call(d,y));return f}function o(d,u,h){for(var f=new i(u),p=h?f.writeInt32BE:f.writeInt32LE,y=0;y<d.length;y++)p.call(f,d[y],4*y,!0);return f}function s(d,u,h,f){i.isBuffer(d)||(d=new i(d));var p=u(r(d,f),d.length*c);return o(p,h,f)}var a=4,l=new i(a);l.fill(0);var c=8;t.hash=s}).call(t,e(1).Buffer)},function(n,t,e){"use strict";function i(l){o.equal(l.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=l[c]}function r(l){function c(f){l.call(this,f),this._cbcInit()}s(c,l);for(var d=Object.keys(a),u=0;u<d.length;u++){var h=d[u];c.prototype[h]=a[h]}return c.create=function(f){return new c(f)},c}var o=e(67),s=e(3),a={};t.instantiate=r,a._cbcInit=function(){var l=new i(this.options.iv);this._cbcState=l},a._update=function(l,c,d,u){var h=this._cbcState,f=this.constructor.super_.prototype,p=h.iv;if(this.type==="encrypt"){for(var y=0;y<this.blockSize;y++)p[y]^=l[c+y];f._update.call(this,p,0,d,u);for(var y=0;y<this.blockSize;y++)p[y]=d[u+y]}else{f._update.call(this,l,c,d,u);for(var y=0;y<this.blockSize;y++)d[u+y]^=p[y];for(var y=0;y<this.blockSize;y++)p[y]=l[c+y]}}},function(n,t,e){"use strict";function i(o){this.options=o,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var r=e(67);n.exports=i,i.prototype._init=function(){},i.prototype.update=function(o){return o.length===0?[]:this.type==="decrypt"?this._updateDecrypt(o):this._updateEncrypt(o)},i.prototype._buffer=function(o,s){for(var a=Math.min(this.buffer.length-this.bufferOff,o.length-s),l=0;l<a;l++)this.buffer[this.bufferOff+l]=o[s+l];return this.bufferOff+=a,a},i.prototype._flushBuffer=function(o,s){return this._update(this.buffer,0,o,s),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(o){var s=0,a=0,l=(this.bufferOff+o.length)/this.blockSize|0,c=new Array(l*this.blockSize);this.bufferOff!==0&&(s+=this._buffer(o,s),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(c,a)));for(var d=o.length-(o.length-s)%this.blockSize;s<d;s+=this.blockSize)this._update(o,s,c,a),a+=this.blockSize;for(;s<o.length;s++,this.bufferOff++)this.buffer[this.bufferOff]=o[s];return c},i.prototype._updateDecrypt=function(o){for(var s=0,a=0,l=Math.ceil((this.bufferOff+o.length)/this.blockSize)-1,c=new Array(l*this.blockSize);l>0;l--)s+=this._buffer(o,s),a+=this._flushBuffer(c,a);return s+=this._buffer(o,s),c},i.prototype.final=function(o){var s;o&&(s=this.update(o));var a;return a=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),s?s.concat(a):a},i.prototype._pad=function(o,s){if(s===0)return!1;for(;s<o.length;)o[s++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var o=new Array(this.blockSize);return this._update(this.buffer,0,o,0),o},i.prototype._unpad=function(o){return o},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var o=new Array(this.blockSize);return this._flushBuffer(o,0),this._unpad(o)}},function(n,t,e){"use strict";function i(){this.tmp=new Array(2),this.keys=null}function r(u){c.call(this,u);var h=new i;this._desState=h,this.deriveKeys(h,u.key)}var o=e(67),s=e(3),a=e(125),l=a.utils,c=a.Cipher;s(r,c),n.exports=r,r.create=function(u){return new r(u)};var d=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];r.prototype.deriveKeys=function(u,h){u.keys=new Array(32),o.equal(h.length,this.blockSize,"Invalid key length");var f=l.readUInt32BE(h,0),p=l.readUInt32BE(h,4);l.pc1(f,p,u.tmp,0),f=u.tmp[0],p=u.tmp[1];for(var y=0;y<u.keys.length;y+=2){var v=d[y>>>1];f=l.r28shl(f,v),p=l.r28shl(p,v),l.pc2(f,p,u.keys,y)}},r.prototype._update=function(u,h,f,p){var y=this._desState,v=l.readUInt32BE(u,h),b=l.readUInt32BE(u,h+4);l.ip(v,b,y.tmp,0),v=y.tmp[0],b=y.tmp[1],this.type==="encrypt"?this._encrypt(y,v,b,y.tmp,0):this._decrypt(y,v,b,y.tmp,0),v=y.tmp[0],b=y.tmp[1],l.writeUInt32BE(f,v,p),l.writeUInt32BE(f,b,p+4)},r.prototype._pad=function(u,h){for(var f=u.length-h,p=h;p<u.length;p++)u[p]=f;return!0},r.prototype._unpad=function(u){for(var h=u[u.length-1],f=u.length-h;f<u.length;f++)o.equal(u[f],h);return u.slice(0,u.length-h)},r.prototype._encrypt=function(u,h,f,p,y){for(var v=h,b=f,S=0;S<u.keys.length;S+=2){var x=u.keys[S],k=u.keys[S+1];l.expand(b,u.tmp,0),x^=u.tmp[0],k^=u.tmp[1];var L=l.substitute(x,k),D=l.permute(L),V=b;b=(v^D)>>>0,v=V}l.rip(b,v,p,y)},r.prototype._decrypt=function(u,h,f,p,y){for(var v=f,b=h,S=u.keys.length-2;S>=0;S-=2){var x=u.keys[S],k=u.keys[S+1];l.expand(v,u.tmp,0),x^=u.tmp[0],k^=u.tmp[1];var L=l.substitute(x,k),D=l.permute(L),V=v;v=(b^D)>>>0,b=V}l.rip(v,b,p,y)}},function(n,t,e){"use strict";function i(d,u){o.equal(u.length,24,"Invalid key length");var h=u.slice(0,8),f=u.slice(8,16),p=u.slice(16,24);d==="encrypt"?this.ciphers=[c.create({type:"encrypt",key:h}),c.create({type:"decrypt",key:f}),c.create({type:"encrypt",key:p})]:this.ciphers=[c.create({type:"decrypt",key:p}),c.create({type:"encrypt",key:f}),c.create({type:"decrypt",key:h})]}function r(d){l.call(this,d);var u=new i(this.type,this.options.key);this._edeState=u}var o=e(67),s=e(3),a=e(125),l=a.Cipher,c=a.DES;s(r,l),n.exports=r,r.create=function(d){return new r(d)},r.prototype._update=function(d,u,h,f){var p=this._edeState;p.ciphers[0]._update(d,u,h,f),p.ciphers[1]._update(h,f,h,f),p.ciphers[2]._update(h,f,h,f)},r.prototype._pad=c.prototype._pad,r.prototype._unpad=c.prototype._unpad},function(n,t,e){"use strict";t.readUInt32BE=function(s,a){var l=s[0+a]<<24|s[1+a]<<16|s[2+a]<<8|s[3+a];return l>>>0},t.writeUInt32BE=function(s,a,l){s[0+l]=a>>>24,s[1+l]=a>>>16&255,s[2+l]=a>>>8&255,s[3+l]=255&a},t.ip=function(s,a,l,c){for(var d=0,u=0,h=6;h>=0;h-=2){for(var f=0;f<=24;f+=8)d<<=1,d|=a>>>f+h&1;for(var f=0;f<=24;f+=8)d<<=1,d|=s>>>f+h&1}for(var h=6;h>=0;h-=2){for(var f=1;f<=25;f+=8)u<<=1,u|=a>>>f+h&1;for(var f=1;f<=25;f+=8)u<<=1,u|=s>>>f+h&1}l[c+0]=d>>>0,l[c+1]=u>>>0},t.rip=function(s,a,l,c){for(var d=0,u=0,h=0;h<4;h++)for(var f=24;f>=0;f-=8)d<<=1,d|=a>>>f+h&1,d<<=1,d|=s>>>f+h&1;for(var h=4;h<8;h++)for(var f=24;f>=0;f-=8)u<<=1,u|=a>>>f+h&1,u<<=1,u|=s>>>f+h&1;l[c+0]=d>>>0,l[c+1]=u>>>0},t.pc1=function(s,a,l,c){for(var d=0,u=0,h=7;h>=5;h--){for(var f=0;f<=24;f+=8)d<<=1,d|=a>>f+h&1;for(var f=0;f<=24;f+=8)d<<=1,d|=s>>f+h&1}for(var f=0;f<=24;f+=8)d<<=1,d|=a>>f+h&1;for(var h=1;h<=3;h++){for(var f=0;f<=24;f+=8)u<<=1,u|=a>>f+h&1;for(var f=0;f<=24;f+=8)u<<=1,u|=s>>f+h&1}for(var f=0;f<=24;f+=8)u<<=1,u|=s>>f+h&1;l[c+0]=d>>>0,l[c+1]=u>>>0},t.r28shl=function(s,a){return s<<a&268435455|s>>>28-a};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(s,a,l,c){for(var d=0,u=0,h=i.length>>>1,f=0;f<h;f++)d<<=1,d|=s>>>i[f]&1;for(var f=h;f<i.length;f++)u<<=1,u|=a>>>i[f]&1;l[c+0]=d>>>0,l[c+1]=u>>>0},t.expand=function(s,a,l){var c=0,d=0;c=(1&s)<<5|s>>>27;for(var u=23;u>=15;u-=4)c<<=6,c|=s>>>u&63;for(var u=11;u>=3;u-=4)d|=s>>>u&63,d<<=6;d|=(31&s)<<1|s>>>31,a[l+0]=c>>>0,a[l+1]=d>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(s,a){for(var l=0,c=0;c<4;c++){var d=s>>>18-6*c&63,u=r[64*c+d];l<<=4,l|=u}for(var c=0;c<4;c++){var d=a>>>18-6*c&63,u=r[256+64*c+d];l<<=4,l|=u}return l>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(s){for(var a=0,l=0;l<o.length;l++)a<<=1,a|=s>>>o[l]&1;return a>>>0},t.padSplit=function(s,a,l){for(var c=s.toString(2);c.length<a;)c="0"+c;for(var d=[],u=0;u<a;u+=l)d.push(c.slice(u,u+l));return d.join(" ")}},function(n,t,e){(function(i){function r(d){var u=new i(a[d].prime,"hex"),h=new i(a[d].gen,"hex");return new l(u,h)}function o(d,u,h,f){return i.isBuffer(u)||c[u]===void 0?o(d,"binary",u,h):(u=u||"binary",f=f||"binary",h=h||new i([2]),i.isBuffer(h)||(h=new i(h,f)),typeof d=="number"?new l(s(d,h),h,!0):(i.isBuffer(d)||(d=new i(d,u)),new l(d,h,!0)))}var s=e(177),a=e(435),l=e(411),c={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=r,t.createDiffieHellman=t.DiffieHellman=o}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(k,L){return L=L||"utf8",i.isBuffer(k)||(k=new i(k,L)),this._pub=new c(k),this}function o(k,L){return L=L||"utf8",i.isBuffer(k)||(k=new i(k,L)),this._priv=new c(k),this}function s(k,L){var D=L.toString("hex"),V=[D,k.toString(16)].join("_");if(V in x)return x[V];var O=0;if(k.isEven()||!b.simpleSieve||!b.fermatTest(k)||!u.test(k))return O+=1,O+=D==="02"||D==="05"?8:4,x[V]=O,O;u.test(k.shrn(1))||(O+=2);var R;switch(D){case"02":k.mod(h).cmp(f)&&(O+=8);break;case"05":R=k.mod(p),R.cmp(y)&&R.cmp(v)&&(O+=8);break;default:O+=4}return x[V]=O,O}function a(k,L,D){this.setGenerator(L),this.__prime=new c(k),this._prime=c.mont(this.__prime),this._primeLen=k.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=r,this.setPrivateKey=o):this._primeCode=8}function l(k,L){var D=new i(k.toArray());return L?D.toString(L):D}var c=e(10),d=e(179),u=new d,h=new c(24),f=new c(11),p=new c(10),y=new c(3),v=new c(7),b=e(177),S=e(68);n.exports=a;var x={};Object.defineProperty(a.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=s(this.__prime,this.__gen)),this._primeCode}}),a.prototype.generateKeys=function(){return this._priv||(this._priv=new c(S(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},a.prototype.computeSecret=function(k){k=new c(k),k=k.toRed(this._prime);var L=k.redPow(this._priv).fromRed(),D=new i(L.toArray()),V=this.getPrime();if(D.length<V.length){var O=new i(V.length-D.length);O.fill(0),D=i.concat([O,D])}return D},a.prototype.getPublicKey=function(k){return l(this._pub,k)},a.prototype.getPrivateKey=function(k){return l(this._priv,k)},a.prototype.getPrime=function(k){return l(this.__prime,k)},a.prototype.getGenerator=function(k){return l(this._gen,k)},a.prototype.setGenerator=function(k,L){return L=L||"utf8",i.isBuffer(k)||(k=new i(k,L)),this.__gen=k,this._gen=new c(k),this}}).call(t,e(1).Buffer)},function(n,t,e){n.exports=e(212)("ed25519")},function(n,t,e){"use strict";function i(u,h){this.type=u,this.p=new o(h.p,16),this.red=h.prime?o.red(h.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=h.n&&new o(h.n,16),this.g=h.g&&this.pointFromJSON(h.g,h.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var f=this.n&&this.p.div(this.n);!f||f.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function r(u,h){this.curve=u,this.type=h,this.precomputed=null}var o=e(10),s=e(13),a=s.utils,l=a.getNAF,c=a.getJSF,d=a.assert;n.exports=i,i.prototype.point=function(){throw new Error("Not implemented")},i.prototype.validate=function(){throw new Error("Not implemented")},i.prototype._fixedNafMul=function(u,h){d(u.precomputed);var f=u._getDoubles(),p=l(h,1),y=(1<<f.step+1)-(f.step%2===0?2:1);y/=3;for(var v=[],b=0;b<p.length;b+=f.step){for(var S=0,h=b+f.step-1;h>=b;h--)S=(S<<1)+p[h];v.push(S)}for(var x=this.jpoint(null,null,null),k=this.jpoint(null,null,null),L=y;L>0;L--){for(var b=0;b<v.length;b++){var S=v[b];S===L?k=k.mixedAdd(f.points[b]):S===-L&&(k=k.mixedAdd(f.points[b].neg()))}x=x.add(k)}return x.toP()},i.prototype._wnafMul=function(u,h){var f=4,p=u._getNAFPoints(f);f=p.wnd;for(var y=p.points,v=l(h,f),b=this.jpoint(null,null,null),S=v.length-1;S>=0;S--){for(var h=0;S>=0&&v[S]===0;S--)h++;if(S>=0&&h++,b=b.dblp(h),S<0)break;var x=v[S];d(x!==0),b=u.type==="affine"?x>0?b.mixedAdd(y[x-1>>1]):b.mixedAdd(y[-x-1>>1].neg()):x>0?b.add(y[x-1>>1]):b.add(y[-x-1>>1].neg())}return u.type==="affine"?b.toP():b},i.prototype._wnafMulAdd=function(u,h,f,p,y){for(var v=this._wnafT1,b=this._wnafT2,S=this._wnafT3,x=0,k=0;k<p;k++){var L=h[k],D=L._getNAFPoints(u);v[k]=D.wnd,b[k]=D.points}for(var k=p-1;k>=1;k-=2){var V=k-1,O=k;if(v[V]===1&&v[O]===1){var R=[h[V],null,null,h[O]];h[V].y.cmp(h[O].y)===0?(R[1]=h[V].add(h[O]),R[2]=h[V].toJ().mixedAdd(h[O].neg())):h[V].y.cmp(h[O].y.redNeg())===0?(R[1]=h[V].toJ().mixedAdd(h[O]),R[2]=h[V].add(h[O].neg())):(R[1]=h[V].toJ().mixedAdd(h[O]),R[2]=h[V].toJ().mixedAdd(h[O].neg()));var G=[-3,-1,-5,-7,0,7,5,1,3],Z=c(f[V],f[O]);x=Math.max(Z[0].length,x),S[V]=new Array(x),S[O]=new Array(x);for(var K=0;K<x;K++){var C=0|Z[0][K],A=0|Z[1][K];S[V][K]=G[3*(C+1)+(A+1)],S[O][K]=0,b[V]=R}}else S[V]=l(f[V],v[V]),S[O]=l(f[O],v[O]),x=Math.max(S[V].length,x),x=Math.max(S[O].length,x)}for(var I=this.jpoint(null,null,null),T=this._wnafT4,k=x;k>=0;k--){for(var M=0;k>=0;){for(var F=!0,K=0;K<p;K++)T[K]=0|S[K][k],T[K]!==0&&(F=!1);if(!F)break;M++,k--}if(k>=0&&M++,I=I.dblp(M),k<0)break;for(var K=0;K<p;K++){var L,q=T[K];q!==0&&(q>0?L=b[K][q-1>>1]:q<0&&(L=b[K][-q-1>>1].neg()),I=L.type==="affine"?I.mixedAdd(L):I.add(L))}}for(var k=0;k<p;k++)b[k]=null;return y?I:I.toP()},i.BasePoint=r,r.prototype.eq=function(){throw new Error("Not implemented")},r.prototype.validate=function(){return this.curve.validate(this)},i.prototype.decodePoint=function(u,h){u=a.toArray(u,h);var f=this.p.byteLength();if((u[0]===4||u[0]===6||u[0]===7)&&u.length-1===2*f){u[0]===6?d(u[u.length-1]%2===0):u[0]===7&&d(u[u.length-1]%2===1);var p=this.point(u.slice(1,1+f),u.slice(1+f,1+2*f));return p}if((u[0]===2||u[0]===3)&&u.length-1===f)return this.pointFromX(u.slice(1,1+f),u[0]===3);throw new Error("Unknown point format")},r.prototype.encodeCompressed=function(u){return this.encode(u,!0)},r.prototype._encode=function(u){var h=this.curve.p.byteLength(),f=this.getX().toArray("be",h);return u?[this.getY().isEven()?2:3].concat(f):[4].concat(f,this.getY().toArray("be",h))},r.prototype.encode=function(u,h){return a.encode(this._encode(h),u)},r.prototype.precompute=function(u){if(this.precomputed)return this;var h={doubles:null,naf:null,beta:null};return h.naf=this._getNAFPoints(8),h.doubles=this._getDoubles(4,u),h.beta=this._getBeta(),this.precomputed=h,this},r.prototype._hasDoubles=function(u){if(!this.precomputed)return!1;var h=this.precomputed.doubles;return!!h&&h.points.length>=Math.ceil((u.bitLength()+1)/h.step)},r.prototype._getDoubles=function(u,h){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var f=[this],p=this,y=0;y<h;y+=u){for(var v=0;v<u;v++)p=p.dbl();f.push(p)}return{step:u,points:f}},r.prototype._getNAFPoints=function(u){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var h=[this],f=(1<<u)-1,p=f===1?null:this.dbl(),y=1;y<f;y++)h[y]=h[y-1].add(p);return{wnd:u,points:h}},r.prototype._getBeta=function(){return null},r.prototype.dblp=function(u){for(var h=this,f=0;f<u;f++)h=h.dbl();return h}},function(n,t,e){"use strict";function i(u){this.twisted=(0|u.a)!==1,this.mOneA=this.twisted&&(0|u.a)===-1,this.extended=this.mOneA,c.call(this,"edwards",u),this.a=new a(u.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(u.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(u.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),d(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|u.c)===1}function r(u,h,f,p,y){c.BasePoint.call(this,u,"projective"),h===null&&f===null&&p===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(h,16),this.y=new a(f,16),this.z=p?new a(p,16):this.curve.one,this.t=y&&new a(y,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var o=e(87),s=e(13),a=e(10),l=e(3),c=o.base,d=s.utils.assert;l(i,c),n.exports=i,i.prototype._mulA=function(u){return this.mOneA?u.redNeg():this.a.redMul(u)},i.prototype._mulC=function(u){return this.oneC?u:this.c.redMul(u)},i.prototype.jpoint=function(u,h,f,p){return this.point(u,h,f,p)},i.prototype.pointFromX=function(u,h){u=new a(u,16),u.red||(u=u.toRed(this.red));var f=u.redSqr(),p=this.c2.redSub(this.a.redMul(f)),y=this.one.redSub(this.c2.redMul(this.d).redMul(f)),v=p.redMul(y.redInvm()),b=v.redSqrt();if(b.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");var S=b.fromRed().isOdd();return(h&&!S||!h&&S)&&(b=b.redNeg()),this.point(u,b)},i.prototype.pointFromY=function(u,h){u=new a(u,16),u.red||(u=u.toRed(this.red));var f=u.redSqr(),p=f.redSub(this.one),y=f.redMul(this.d).redAdd(this.one),v=p.redMul(y.redInvm());if(v.cmp(this.zero)===0){if(h)throw new Error("invalid point");return this.point(this.zero,u)}var b=v.redSqrt();if(b.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");return b.isOdd()!==h&&(b=b.redNeg()),this.point(b,u)},i.prototype.validate=function(u){if(u.isInfinity())return!0;u.normalize();var h=u.x.redSqr(),f=u.y.redSqr(),p=h.redMul(this.a).redAdd(f),y=this.c2.redMul(this.one.redAdd(this.d.redMul(h).redMul(f)));return p.cmp(y)===0},l(r,c.BasePoint),i.prototype.pointFromJSON=function(u){return r.fromJSON(this,u)},i.prototype.point=function(u,h,f,p){return new r(this,u,h,f,p)},r.fromJSON=function(u,h){return new r(u,h[0],h[1],h[2])},r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},r.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&this.y.cmp(this.z)===0},r.prototype._extDbl=function(){var u=this.x.redSqr(),h=this.y.redSqr(),f=this.z.redSqr();f=f.redIAdd(f);var p=this.curve._mulA(u),y=this.x.redAdd(this.y).redSqr().redISub(u).redISub(h),v=p.redAdd(h),b=v.redSub(f),S=p.redSub(h),x=y.redMul(b),k=v.redMul(S),L=y.redMul(S),D=b.redMul(v);return this.curve.point(x,k,D,L)},r.prototype._projDbl=function(){var u,h,f,p=this.x.redAdd(this.y).redSqr(),y=this.x.redSqr(),v=this.y.redSqr();if(this.curve.twisted){var b=this.curve._mulA(y),S=b.redAdd(v);if(this.zOne)u=p.redSub(y).redSub(v).redMul(S.redSub(this.curve.two)),h=S.redMul(b.redSub(v)),f=S.redSqr().redSub(S).redSub(S);else{var x=this.z.redSqr(),k=S.redSub(x).redISub(x);u=p.redSub(y).redISub(v).redMul(k),h=S.redMul(b.redSub(v)),f=S.redMul(k)}}else{var b=y.redAdd(v),x=this.curve._mulC(this.c.redMul(this.z)).redSqr(),k=b.redSub(x).redSub(x);u=this.curve._mulC(p.redISub(b)).redMul(k),h=this.curve._mulC(b).redMul(y.redISub(v)),f=b.redMul(k)}return this.curve.point(u,h,f)},r.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},r.prototype._extAdd=function(u){var h=this.y.redSub(this.x).redMul(u.y.redSub(u.x)),f=this.y.redAdd(this.x).redMul(u.y.redAdd(u.x)),p=this.t.redMul(this.curve.dd).redMul(u.t),y=this.z.redMul(u.z.redAdd(u.z)),v=f.redSub(h),b=y.redSub(p),S=y.redAdd(p),x=f.redAdd(h),k=v.redMul(b),L=S.redMul(x),D=v.redMul(x),V=b.redMul(S);return this.curve.point(k,L,V,D)},r.prototype._projAdd=function(u){var h,f,p=this.z.redMul(u.z),y=p.redSqr(),v=this.x.redMul(u.x),b=this.y.redMul(u.y),S=this.curve.d.redMul(v).redMul(b),x=y.redSub(S),k=y.redAdd(S),L=this.x.redAdd(this.y).redMul(u.x.redAdd(u.y)).redISub(v).redISub(b),D=p.redMul(x).redMul(L);return this.curve.twisted?(h=p.redMul(k).redMul(b.redSub(this.curve._mulA(v))),f=x.redMul(k)):(h=p.redMul(k).redMul(b.redSub(v)),f=this.curve._mulC(x).redMul(k)),this.curve.point(D,h,f)},r.prototype.add=function(u){return this.isInfinity()?u:u.isInfinity()?this:this.curve.extended?this._extAdd(u):this._projAdd(u)},r.prototype.mul=function(u){return this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve._wnafMul(this,u)},r.prototype.mulAdd=function(u,h,f){return this.curve._wnafMulAdd(1,[this,h],[u,f],2,!1)},r.prototype.jmulAdd=function(u,h,f){return this.curve._wnafMulAdd(1,[this,h],[u,f],2,!0)},r.prototype.normalize=function(){if(this.zOne)return this;var u=this.z.redInvm();return this.x=this.x.redMul(u),this.y=this.y.redMul(u),this.t&&(this.t=this.t.redMul(u)),this.z=this.curve.one,this.zOne=!0,this},r.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},r.prototype.getX=function(){return this.normalize(),this.x.fromRed()},r.prototype.getY=function(){return this.normalize(),this.y.fromRed()},r.prototype.eq=function(u){return this===u||this.getX().cmp(u.getX())===0&&this.getY().cmp(u.getY())===0},r.prototype.eqXToP=function(u){var h=u.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(h)===0)return!0;for(var f=u.clone(),p=this.curve.redN.redMul(this.z);;){if(f.iadd(this.curve.n),f.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(p),this.x.cmp(h)===0)return!0}return!1},r.prototype.toP=r.prototype.normalize,r.prototype.mixedAdd=r.prototype.add},function(n,t,e){"use strict";function i(u){l.call(this,"mont",u),this.a=new s(u.a,16).toRed(this.red),this.b=new s(u.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function r(u,h,f){l.BasePoint.call(this,u,"projective"),h===null&&f===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(h,16),this.z=new s(f,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var o=e(87),s=e(10),a=e(3),l=o.base,c=e(13),d=c.utils;a(i,l),n.exports=i,i.prototype.validate=function(u){var h=u.normalize().x,f=h.redSqr(),p=f.redMul(h).redAdd(f.redMul(this.a)).redAdd(h),y=p.redSqrt();return y.redSqr().cmp(p)===0},a(r,l.BasePoint),i.prototype.decodePoint=function(u,h){return this.point(d.toArray(u,h),1)},i.prototype.point=function(u,h){return new r(this,u,h)},i.prototype.pointFromJSON=function(u){return r.fromJSON(this,u)},r.prototype.precompute=function(){},r.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},r.fromJSON=function(u,h){return new r(u,h[0],h[1]||u.one)},r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},r.prototype.isInfinity=function(){return this.z.cmpn(0)===0},r.prototype.dbl=function(){var u=this.x.redAdd(this.z),h=u.redSqr(),f=this.x.redSub(this.z),p=f.redSqr(),y=h.redSub(p),v=h.redMul(p),b=y.redMul(p.redAdd(this.curve.a24.redMul(y)));return this.curve.point(v,b)},r.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},r.prototype.diffAdd=function(u,h){var f=this.x.redAdd(this.z),p=this.x.redSub(this.z),y=u.x.redAdd(u.z),v=u.x.redSub(u.z),b=v.redMul(f),S=y.redMul(p),x=h.z.redMul(b.redAdd(S).redSqr()),k=h.x.redMul(b.redISub(S).redSqr());return this.curve.point(x,k)},r.prototype.mul=function(u){for(var h=u.clone(),f=this,p=this.curve.point(null,null),y=this,v=[];h.cmpn(0)!==0;h.iushrn(1))v.push(h.andln(1));for(var b=v.length-1;b>=0;b--)v[b]===0?(f=f.diffAdd(p,y),p=p.dbl()):(p=f.diffAdd(p,y),f=f.dbl());return p},r.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},r.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},r.prototype.eq=function(u){return this.getX().cmp(u.getX())===0},r.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},r.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(n,t,e){"use strict";function i(h){d.call(this,"short",h),this.a=new l(h.a,16).toRed(this.red),this.b=new l(h.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(h),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function r(h,f,p,y){d.BasePoint.call(this,h,"affine"),f===null&&p===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new l(f,16),this.y=new l(p,16),y&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function o(h,f,p,y){d.BasePoint.call(this,h,"jacobian"),f===null&&p===null&&y===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new l(0)):(this.x=new l(f,16),this.y=new l(p,16),this.z=new l(y,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var s=e(87),a=e(13),l=e(10),c=e(3),d=s.base,u=a.utils.assert;c(i,d),n.exports=i,i.prototype._getEndomorphism=function(h){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var f,p;if(h.beta)f=new l(h.beta,16).toRed(this.red);else{var y=this._getEndoRoots(this.p);f=y[0].cmp(y[1])<0?y[0]:y[1],f=f.toRed(this.red)}if(h.lambda)p=new l(h.lambda,16);else{var v=this._getEndoRoots(this.n);this.g.mul(v[0]).x.cmp(this.g.x.redMul(f))===0?p=v[0]:(p=v[1],u(this.g.mul(p).x.cmp(this.g.x.redMul(f))===0))}var b;return b=h.basis?h.basis.map(function(S){return{a:new l(S.a,16),b:new l(S.b,16)}}):this._getEndoBasis(p),{beta:f,lambda:p,basis:b}}},i.prototype._getEndoRoots=function(h){var f=h===this.p?this.red:l.mont(h),p=new l(2).toRed(f).redInvm(),y=p.redNeg(),v=new l(3).toRed(f).redNeg().redSqrt().redMul(p),b=y.redAdd(v).fromRed(),S=y.redSub(v).fromRed();return[b,S]},i.prototype._getEndoBasis=function(h){for(var f,p,y,v,b,S,x,k,L,D=this.n.ushrn(Math.floor(this.n.bitLength()/2)),V=h,O=this.n.clone(),R=new l(1),G=new l(0),Z=new l(0),K=new l(1),C=0;V.cmpn(0)!==0;){var A=O.div(V);k=O.sub(A.mul(V)),L=Z.sub(A.mul(R));var I=K.sub(A.mul(G));if(!y&&k.cmp(D)<0)f=x.neg(),p=R,y=k.neg(),v=L;else if(y&&++C===2)break;x=k,O=V,V=k,Z=R,R=L,K=G,G=I}b=k.neg(),S=L;var T=y.sqr().add(v.sqr()),M=b.sqr().add(S.sqr());return M.cmp(T)>=0&&(b=f,S=p),y.negative&&(y=y.neg(),v=v.neg()),b.negative&&(b=b.neg(),S=S.neg()),[{a:y,b:v},{a:b,b:S}]},i.prototype._endoSplit=function(h){var f=this.endo.basis,p=f[0],y=f[1],v=y.b.mul(h).divRound(this.n),b=p.b.neg().mul(h).divRound(this.n),S=v.mul(p.a),x=b.mul(y.a),k=v.mul(p.b),L=b.mul(y.b),D=h.sub(S).sub(x),V=k.add(L).neg();return{k1:D,k2:V}},i.prototype.pointFromX=function(h,f){h=new l(h,16),h.red||(h=h.toRed(this.red));var p=h.redSqr().redMul(h).redIAdd(h.redMul(this.a)).redIAdd(this.b),y=p.redSqrt();if(y.redSqr().redSub(p).cmp(this.zero)!==0)throw new Error("invalid point");var v=y.fromRed().isOdd();return(f&&!v||!f&&v)&&(y=y.redNeg()),this.point(h,y)},i.prototype.validate=function(h){if(h.inf)return!0;var f=h.x,p=h.y,y=this.a.redMul(f),v=f.redSqr().redMul(f).redIAdd(y).redIAdd(this.b);return p.redSqr().redISub(v).cmpn(0)===0},i.prototype._endoWnafMulAdd=function(h,f,p){for(var y=this._endoWnafT1,v=this._endoWnafT2,b=0;b<h.length;b++){var S=this._endoSplit(f[b]),x=h[b],k=x._getBeta();S.k1.negative&&(S.k1.ineg(),x=x.neg(!0)),S.k2.negative&&(S.k2.ineg(),k=k.neg(!0)),y[2*b]=x,y[2*b+1]=k,v[2*b]=S.k1,v[2*b+1]=S.k2}for(var L=this._wnafMulAdd(1,y,v,2*b,p),D=0;D<2*b;D++)y[D]=null,v[D]=null;return L},c(r,d.BasePoint),i.prototype.point=function(h,f,p){return new r(this,h,f,p)},i.prototype.pointFromJSON=function(h,f){return r.fromJSON(this,h,f)},r.prototype._getBeta=function(){if(this.curve.endo){var h=this.precomputed;if(h&&h.beta)return h.beta;var f=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(h){var p=this.curve,y=function(v){return p.point(v.x.redMul(p.endo.beta),v.y)};h.beta=f,f.precomputed={beta:null,naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(y)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(y)}}}return f}},r.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},r.fromJSON=function(h,f,p){function y(S){return h.point(S[0],S[1],p)}typeof f=="string"&&(f=JSON.parse(f));var v=h.point(f[0],f[1],p);if(!f[2])return v;var b=f[2];return v.precomputed={beta:null,doubles:b.doubles&&{step:b.doubles.step,points:[v].concat(b.doubles.points.map(y))},naf:b.naf&&{wnd:b.naf.wnd,points:[v].concat(b.naf.points.map(y))}},v},r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},r.prototype.isInfinity=function(){return this.inf},r.prototype.add=function(h){if(this.inf)return h;if(h.inf)return this;if(this.eq(h))return this.dbl();if(this.neg().eq(h))return this.curve.point(null,null);if(this.x.cmp(h.x)===0)return this.curve.point(null,null);var f=this.y.redSub(h.y);f.cmpn(0)!==0&&(f=f.redMul(this.x.redSub(h.x).redInvm()));var p=f.redSqr().redISub(this.x).redISub(h.x),y=f.redMul(this.x.redSub(p)).redISub(this.y);return this.curve.point(p,y)},r.prototype.dbl=function(){if(this.inf)return this;var h=this.y.redAdd(this.y);if(h.cmpn(0)===0)return this.curve.point(null,null);var f=this.curve.a,p=this.x.redSqr(),y=h.redInvm(),v=p.redAdd(p).redIAdd(p).redIAdd(f).redMul(y),b=v.redSqr().redISub(this.x.redAdd(this.x)),S=v.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,S)},r.prototype.getX=function(){return this.x.fromRed()},r.prototype.getY=function(){return this.y.fromRed()},r.prototype.mul=function(h){return h=new l(h,16),this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve.endo?this.curve._endoWnafMulAdd([this],[h]):this.curve._wnafMul(this,h)},r.prototype.mulAdd=function(h,f,p){var y=[this,f],v=[h,p];return this.curve.endo?this.curve._endoWnafMulAdd(y,v):this.curve._wnafMulAdd(1,y,v,2)},r.prototype.jmulAdd=function(h,f,p){var y=[this,f],v=[h,p];return this.curve.endo?this.curve._endoWnafMulAdd(y,v,!0):this.curve._wnafMulAdd(1,y,v,2,!0)},r.prototype.eq=function(h){return this===h||this.inf===h.inf&&(this.inf||this.x.cmp(h.x)===0&&this.y.cmp(h.y)===0)},r.prototype.neg=function(h){if(this.inf)return this;var f=this.curve.point(this.x,this.y.redNeg());if(h&&this.precomputed){var p=this.precomputed,y=function(v){return v.neg()};f.precomputed={naf:p.naf&&{wnd:p.naf.wnd,points:p.naf.points.map(y)},doubles:p.doubles&&{step:p.doubles.step,points:p.doubles.points.map(y)}}}return f},r.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var h=this.curve.jpoint(this.x,this.y,this.curve.one);return h},c(o,d.BasePoint),i.prototype.jpoint=function(h,f,p){return new o(this,h,f,p)},o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var h=this.z.redInvm(),f=h.redSqr(),p=this.x.redMul(f),y=this.y.redMul(f).redMul(h);return this.curve.point(p,y)},o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function(h){if(this.isInfinity())return h;if(h.isInfinity())return this;var f=h.z.redSqr(),p=this.z.redSqr(),y=this.x.redMul(f),v=h.x.redMul(p),b=this.y.redMul(f.redMul(h.z)),S=h.y.redMul(p.redMul(this.z)),x=y.redSub(v),k=b.redSub(S);if(x.cmpn(0)===0)return k.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var L=x.redSqr(),D=L.redMul(x),V=y.redMul(L),O=k.redSqr().redIAdd(D).redISub(V).redISub(V),R=k.redMul(V.redISub(O)).redISub(b.redMul(D)),G=this.z.redMul(h.z).redMul(x);return this.curve.jpoint(O,R,G)},o.prototype.mixedAdd=function(h){if(this.isInfinity())return h.toJ();if(h.isInfinity())return this;var f=this.z.redSqr(),p=this.x,y=h.x.redMul(f),v=this.y,b=h.y.redMul(f).redMul(this.z),S=p.redSub(y),x=v.redSub(b);if(S.cmpn(0)===0)return x.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var k=S.redSqr(),L=k.redMul(S),D=p.redMul(k),V=x.redSqr().redIAdd(L).redISub(D).redISub(D),O=x.redMul(D.redISub(V)).redISub(v.redMul(L)),R=this.z.redMul(S);return this.curve.jpoint(V,O,R)},o.prototype.dblp=function(h){if(h===0)return this;if(this.isInfinity())return this;if(!h)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var f=this,p=0;p<h;p++)f=f.dbl();return f}for(var y=this.curve.a,v=this.curve.tinv,b=this.x,S=this.y,x=this.z,k=x.redSqr().redSqr(),L=S.redAdd(S),p=0;p<h;p++){var D=b.redSqr(),V=L.redSqr(),O=V.redSqr(),R=D.redAdd(D).redIAdd(D).redIAdd(y.redMul(k)),G=b.redMul(V),Z=R.redSqr().redISub(G.redAdd(G)),K=G.redISub(Z),C=R.redMul(K);C=C.redIAdd(C).redISub(O);var A=L.redMul(x);p+1<h&&(k=k.redMul(O)),b=Z,x=A,L=C}return this.curve.jpoint(b,L.redMul(v),x)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function(){var h,f,p;if(this.zOne){var y=this.x.redSqr(),v=this.y.redSqr(),b=v.redSqr(),S=this.x.redAdd(v).redSqr().redISub(y).redISub(b);S=S.redIAdd(S);var x=y.redAdd(y).redIAdd(y),k=x.redSqr().redISub(S).redISub(S),L=b.redIAdd(b);L=L.redIAdd(L),L=L.redIAdd(L),h=k,f=x.redMul(S.redISub(k)).redISub(L),p=this.y.redAdd(this.y)}else{var D=this.x.redSqr(),V=this.y.redSqr(),O=V.redSqr(),R=this.x.redAdd(V).redSqr().redISub(D).redISub(O);R=R.redIAdd(R);var G=D.redAdd(D).redIAdd(D),Z=G.redSqr(),K=O.redIAdd(O);K=K.redIAdd(K),K=K.redIAdd(K),h=Z.redISub(R).redISub(R),f=G.redMul(R.redISub(h)).redISub(K),p=this.y.redMul(this.z),p=p.redIAdd(p)}return this.curve.jpoint(h,f,p)},o.prototype._threeDbl=function(){var h,f,p;if(this.zOne){var y=this.x.redSqr(),v=this.y.redSqr(),b=v.redSqr(),S=this.x.redAdd(v).redSqr().redISub(y).redISub(b);S=S.redIAdd(S);var x=y.redAdd(y).redIAdd(y).redIAdd(this.curve.a),k=x.redSqr().redISub(S).redISub(S);h=k;var L=b.redIAdd(b);L=L.redIAdd(L),L=L.redIAdd(L),f=x.redMul(S.redISub(k)).redISub(L),p=this.y.redAdd(this.y)}else{var D=this.z.redSqr(),V=this.y.redSqr(),O=this.x.redMul(V),R=this.x.redSub(D).redMul(this.x.redAdd(D));R=R.redAdd(R).redIAdd(R);var G=O.redIAdd(O);G=G.redIAdd(G);var Z=G.redAdd(G);h=R.redSqr().redISub(Z),p=this.y.redAdd(this.z).redSqr().redISub(V).redISub(D);var K=V.redSqr();K=K.redIAdd(K),K=K.redIAdd(K),K=K.redIAdd(K),f=R.redMul(G.redISub(h)).redISub(K)}return this.curve.jpoint(h,f,p)},o.prototype._dbl=function(){var h=this.curve.a,f=this.x,p=this.y,y=this.z,v=y.redSqr().redSqr(),b=f.redSqr(),S=p.redSqr(),x=b.redAdd(b).redIAdd(b).redIAdd(h.redMul(v)),k=f.redAdd(f);k=k.redIAdd(k);var L=k.redMul(S),D=x.redSqr().redISub(L.redAdd(L)),V=L.redISub(D),O=S.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var R=x.redMul(V).redISub(O),G=p.redAdd(p).redMul(y);return this.curve.jpoint(D,R,G)},o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var h=this.x.redSqr(),f=this.y.redSqr(),p=this.z.redSqr(),y=f.redSqr(),v=h.redAdd(h).redIAdd(h),b=v.redSqr(),S=this.x.redAdd(f).redSqr().redISub(h).redISub(y);S=S.redIAdd(S),S=S.redAdd(S).redIAdd(S),S=S.redISub(b);var x=S.redSqr(),k=y.redIAdd(y);k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k);var L=v.redIAdd(S).redSqr().redISub(b).redISub(x).redISub(k),D=f.redMul(L);D=D.redIAdd(D),D=D.redIAdd(D);var V=this.x.redMul(x).redISub(D);V=V.redIAdd(V),V=V.redIAdd(V);var O=this.y.redMul(L.redMul(k.redISub(L)).redISub(S.redMul(x)));O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var R=this.z.redAdd(S).redSqr().redISub(p).redISub(x);return this.curve.jpoint(V,O,R)},o.prototype.mul=function(h,f){return h=new l(h,f),this.curve._wnafMul(this,h)},o.prototype.eq=function(h){if(h.type==="affine")return this.eq(h.toJ());if(this===h)return!0;var f=this.z.redSqr(),p=h.z.redSqr();if(this.x.redMul(p).redISub(h.x.redMul(f)).cmpn(0)!==0)return!1;var y=f.redMul(this.z),v=p.redMul(h.z);return this.y.redMul(v).redISub(h.y.redMul(y)).cmpn(0)===0},o.prototype.eqXToP=function(h){var f=this.z.redSqr(),p=h.toRed(this.curve.red).redMul(f);if(this.x.cmp(p)===0)return!0;for(var y=h.clone(),v=this.curve.redN.redMul(f);;){if(y.iadd(this.curve.n),y.cmp(this.curve.p)>=0)return!1;if(p.redIAdd(v),this.x.cmp(p)===0)return!0}return!1},o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},o.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},function(n,t,e){"use strict";function i(d){d.type==="short"?this.curve=new a.curve.short(d):d.type==="edwards"?this.curve=new a.curve.edwards(d):this.curve=new a.curve.mont(d),this.g=this.curve.g,this.n=this.curve.n,this.hash=d.hash,l(this.g.validate(),"Invalid curve"),l(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function r(d,u){Object.defineProperty(o,d,{configurable:!0,enumerable:!0,get:function(){var h=new i(u);return Object.defineProperty(o,d,{configurable:!0,enumerable:!0,value:h}),h}})}var o=t,s=e(46),a=e(13),l=a.utils.assert;o.PresetCurve=i,r("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),r("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),r("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),r("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),r("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),r("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),r("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=e(425)}catch{c=void 0}r("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})},function(n,t,e){"use strict";function i(d){return this instanceof i?(typeof d=="string"&&(a(o.curves.hasOwnProperty(d),"Unknown curve "+d),d=o.curves[d]),d instanceof o.curves.PresetCurve&&(d={curve:d}),this.curve=d.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=d.curve.g,this.g.precompute(d.curve.n.bitLength()+1),void(this.hash=d.hash||d.curve.hash)):new i(d)}var r=e(10),o=e(13),s=o.utils,a=s.assert,l=e(419),c=e(420);n.exports=i,i.prototype.keyPair=function(d){return new l(this,d)},i.prototype.keyFromPrivate=function(d,u){return l.fromPrivate(this,d,u)},i.prototype.keyFromPublic=function(d,u){return l.fromPublic(this,d,u)},i.prototype.genKeyPair=function(d){d||(d={});for(var u=new o.hmacDRBG({hash:this.hash,pers:d.pers,entropy:d.entropy||o.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),h=this.n.byteLength(),f=this.n.sub(new r(2));;){var p=new r(u.generate(h));if(!(p.cmp(f)>0))return p.iaddn(1),this.keyFromPrivate(p)}},i.prototype._truncateToN=function(d,u){var h=8*d.byteLength()-this.n.bitLength();return h>0&&(d=d.ushrn(h)),!u&&d.cmp(this.n)>=0?d.sub(this.n):d},i.prototype.sign=function(d,u,h,f){typeof h=="object"&&(f=h,h=null),f||(f={}),u=this.keyFromPrivate(u,h),d=this._truncateToN(new r(d,16));for(var p=this.n.byteLength(),y=u.getPrivate().toArray("be",p),v=d.toArray("be",p),b=new o.hmacDRBG({hash:this.hash,entropy:y,nonce:v,pers:f.pers,persEnc:f.persEnc}),S=this.n.sub(new r(1)),x=0;;x++){var k=f.k?f.k(x):new r(b.generate(this.n.byteLength()));if(k=this._truncateToN(k,!0),!(k.cmpn(1)<=0||k.cmp(S)>=0)){var L=this.g.mul(k);if(!L.isInfinity()){var D=L.getX(),V=D.umod(this.n);if(V.cmpn(0)!==0){var O=k.invm(this.n).mul(V.mul(u.getPrivate()).iadd(d));if(O=O.umod(this.n),O.cmpn(0)!==0){var R=(L.getY().isOdd()?1:0)|(D.cmp(V)!==0?2:0);return f.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),R^=1),new c({r:V,s:O,recoveryParam:R})}}}}}},i.prototype.verify=function(d,u,h,f){d=this._truncateToN(new r(d,16)),h=this.keyFromPublic(h,f),u=new c(u,"hex");var p=u.r,y=u.s;if(p.cmpn(1)<0||p.cmp(this.n)>=0||y.cmpn(1)<0||y.cmp(this.n)>=0)return!1;var v=y.invm(this.n),b=v.mul(d).umod(this.n),S=v.mul(p).umod(this.n);if(!this.curve._maxwellTrick){var x=this.g.mulAdd(b,h.getPublic(),S);return!x.isInfinity()&&x.getX().umod(this.n).cmp(p)===0}var x=this.g.jmulAdd(b,h.getPublic(),S);return!x.isInfinity()&&x.eqXToP(p)},i.prototype.recoverPubKey=function(d,u,h,f){a((3&h)===h,"The recovery param is more than two bits"),u=new c(u,f);var p=this.n,y=new r(d),v=u.r,b=u.s,S=1&h,x=h>>1;if(v.cmp(this.curve.p.umod(this.curve.n))>=0&&x)throw new Error("Unable to find sencond key candinate");v=x?this.curve.pointFromX(v.add(this.curve.n),S):this.curve.pointFromX(v,S);var k=u.r.invm(p),L=p.sub(y).mul(k).umod(p),D=b.mul(k).umod(p);return this.g.mulAdd(L,v,D)},i.prototype.getKeyRecoveryParam=function(d,u,h,f){if(u=new c(u,f),u.recoveryParam!==null)return u.recoveryParam;for(var p=0;p<4;p++){var y;try{y=this.recoverPubKey(d,u,p)}catch{continue}if(y.eq(h))return p}throw new Error("Unable to find valid recovery factor")}},function(n,t,e){"use strict";function i(l,c){this.ec=l,this.priv=null,this.pub=null,c.priv&&this._importPrivate(c.priv,c.privEnc),c.pub&&this._importPublic(c.pub,c.pubEnc)}var r=e(10),o=e(13),s=o.utils,a=s.assert;n.exports=i,i.fromPublic=function(l,c,d){return c instanceof i?c:new i(l,{pub:c,pubEnc:d})},i.fromPrivate=function(l,c,d){return c instanceof i?c:new i(l,{priv:c,privEnc:d})},i.prototype.validate=function(){var l=this.getPublic();return l.isInfinity()?{result:!1,reason:"Invalid public key"}:l.validate()?l.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(l,c){return typeof l=="string"&&(c=l,l=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),c?this.pub.encode(c,l):this.pub},i.prototype.getPrivate=function(l){return l==="hex"?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(l,c){this.priv=new r(l,c||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(l,c){return l.x||l.y?(this.ec.curve.type==="mont"?a(l.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||a(l.x&&l.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(l.x,l.y))):void(this.pub=this.ec.curve.decodePoint(l,c))},i.prototype.derive=function(l){return l.mul(this.priv).getX()},i.prototype.sign=function(l,c,d){return this.ec.sign(l,this,c,d)},i.prototype.verify=function(l,c){return this.ec.verify(l,c,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(n,t,e){"use strict";function i(h,f){return h instanceof i?h:void(this._importDER(h,f)||(u(h.r&&h.s,"Signature without r or s"),this.r=new l(h.r,16),this.s=new l(h.s,16),h.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=h.recoveryParam))}function r(){this.place=0}function o(h,f){var p=h[f.place++];if(!(128&p))return p;for(var y=15&p,v=0,b=0,S=f.place;b<y;b++,S++)v<<=8,v|=h[S];return f.place=S,v}function s(h){for(var f=0,p=h.length-1;!h[f]&&!(128&h[f+1])&&f<p;)f++;return f===0?h:h.slice(f)}function a(h,f){if(f<128)return void h.push(f);var p=1+(Math.log(f)/Math.LN2>>>3);for(h.push(128|p);--p;)h.push(f>>>(p<<3)&255);h.push(f)}var l=e(10),c=e(13),d=c.utils,u=d.assert;n.exports=i,i.prototype._importDER=function(h,f){h=d.toArray(h,f);var p=new r;if(h[p.place++]!==48)return!1;var y=o(h,p);if(y+p.place!==h.length||h[p.place++]!==2)return!1;var v=o(h,p),b=h.slice(p.place,v+p.place);if(p.place+=v,h[p.place++]!==2)return!1;var S=o(h,p);if(h.length!==S+p.place)return!1;var x=h.slice(p.place,S+p.place);return b[0]===0&&128&b[1]&&(b=b.slice(1)),x[0]===0&&128&x[1]&&(x=x.slice(1)),this.r=new l(b),this.s=new l(x),this.recoveryParam=null,!0},i.prototype.toDER=function(h){var f=this.r.toArray(),p=this.s.toArray();for(128&f[0]&&(f=[0].concat(f)),128&p[0]&&(p=[0].concat(p)),f=s(f),p=s(p);!(p[0]||128&p[1]);)p=p.slice(1);var y=[2];a(y,f.length),y=y.concat(f),y.push(2),a(y,p.length);var v=y.concat(p),b=[48];return a(b,v.length),b=b.concat(v),d.encode(b,h)}},function(n,t,e){"use strict";function i(h){if(a(h==="ed25519","only tested with ed25519 so far"),!(this instanceof i))return new i(h);var h=o.curves[h].curve;this.curve=h,this.g=h.g,this.g.precompute(h.n.bitLength()+1),this.pointClass=h.point().constructor,this.encodingLength=Math.ceil(h.n.bitLength()/8),this.hash=r.sha512}var r=e(46),o=e(13),s=o.utils,a=s.assert,l=s.parseBytes,c=e(422),d=e(423);n.exports=i,i.prototype.sign=function(u,h){u=l(u);var f=this.keyFromSecret(h),p=this.hashInt(f.messagePrefix(),u),y=this.g.mul(p),v=this.encodePoint(y),b=this.hashInt(v,f.pubBytes(),u).mul(f.priv()),S=p.add(b).umod(this.curve.n);return this.makeSignature({R:y,S,Rencoded:v})},i.prototype.verify=function(u,h,f){u=l(u),h=this.makeSignature(h);var p=this.keyFromPublic(f),y=this.hashInt(h.Rencoded(),p.pubBytes(),u),v=this.g.mul(h.S()),b=h.R().add(p.pub().mul(y));return b.eq(v)},i.prototype.hashInt=function(){for(var u=this.hash(),h=0;h<arguments.length;h++)u.update(arguments[h]);return s.intFromLE(u.digest()).umod(this.curve.n)},i.prototype.keyFromPublic=function(u){return c.fromPublic(this,u)},i.prototype.keyFromSecret=function(u){return c.fromSecret(this,u)},i.prototype.makeSignature=function(u){return u instanceof d?u:new d(this,u)},i.prototype.encodePoint=function(u){var h=u.getY().toArray("le",this.encodingLength);return h[this.encodingLength-1]|=u.getX().isOdd()?128:0,h},i.prototype.decodePoint=function(u){u=s.parseBytes(u);var h=u.length-1,f=u.slice(0,h).concat(u[h]&-129),p=(128&u[h])!==0,y=s.intFromLE(f);return this.curve.pointFromY(y,p)},i.prototype.encodeInt=function(u){return u.toArray("le",this.encodingLength)},i.prototype.decodeInt=function(u){return s.intFromLE(u)},i.prototype.isPoint=function(u){return u instanceof this.pointClass}},function(n,t,e){"use strict";function i(c,d){this.eddsa=c,this._secret=a(d.secret),c.isPoint(d.pub)?this._pub=d.pub:this._pubBytes=a(d.pub)}var r=e(13),o=r.utils,s=o.assert,a=o.parseBytes,l=o.cachedProperty;i.fromPublic=function(c,d){return d instanceof i?d:new i(c,{pub:d})},i.fromSecret=function(c,d){return d instanceof i?d:new i(c,{secret:d})},i.prototype.secret=function(){return this._secret},l(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),l(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),l(i,"privBytes",function(){var c=this.eddsa,d=this.hash(),u=c.encodingLength-1,h=d.slice(0,c.encodingLength);return h[0]&=248,h[u]&=127,h[u]|=64,h}),l(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),l(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),l(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(c){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)},i.prototype.verify=function(c,d){return this.eddsa.verify(c,d,this)},i.prototype.getSecret=function(c){return s(this._secret,"KeyPair is public only"),o.encode(this.secret(),c)},i.prototype.getPublic=function(c){return o.encode(this.pubBytes(),c)},n.exports=i},function(n,t,e){"use strict";function i(d,u){this.eddsa=d,typeof u!="object"&&(u=c(u)),Array.isArray(u)&&(u={R:u.slice(0,d.encodingLength),S:u.slice(d.encodingLength)}),a(u.R&&u.S,"Signature without R or S"),d.isPoint(u.R)&&(this._R=u.R),u.S instanceof r&&(this._S=u.S),this._Rencoded=Array.isArray(u.R)?u.R:u.Rencoded,this._Sencoded=Array.isArray(u.S)?u.S:u.Sencoded}var r=e(10),o=e(13),s=o.utils,a=s.assert,l=s.cachedProperty,c=s.parseBytes;l(i,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),l(i,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),l(i,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),l(i,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),i.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},i.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},n.exports=i},function(n,t,e){"use strict";function i(l){if(!(this instanceof i))return new i(l);this.hash=l.hash,this.predResist=!!l.predResist,this.outLen=this.hash.outSize,this.minEntropy=l.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var c=s.toArray(l.entropy,l.entropyEnc),d=s.toArray(l.nonce,l.nonceEnc),u=s.toArray(l.pers,l.persEnc);a(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(c,d,u)}var r=e(46),o=e(13),s=o.utils,a=s.assert;n.exports=i,i.prototype._init=function(l,c,d){var u=l.concat(c).concat(d);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(u),this.reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},i.prototype._update=function(l){var c=this._hmac().update(this.V).update([0]);l&&(c=c.update(l)),this.K=c.digest(),this.V=this._hmac().update(this.V).digest(),l&&(this.K=this._hmac().update(this.V).update([1]).update(l).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(l,c,d,u){typeof c!="string"&&(u=d,d=c,c=null),l=s.toBuffer(l,c),d=s.toBuffer(d,u),a(l.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(l.concat(d||[])),this.reseed=1},i.prototype.generate=function(l,c,d,u){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");typeof c!="string"&&(u=d,d=c,c=null),d&&(d=s.toArray(d,u),this._update(d));for(var h=[];h.length<l;)this.V=this._hmac().update(this.V).digest(),h=h.concat(this.V);var f=h.slice(0,l);return this._update(d),this.reseed++,s.encode(f,c)}},function(n,t){n.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(n,t,e){"use strict";function i(f,p){if(Array.isArray(f))return f.slice();if(!f)return[];var y=[];if(typeof f!="string"){for(var v=0;v<f.length;v++)y[v]=0|f[v];return y}if(p){if(p==="hex"){f=f.replace(/[^a-z0-9]+/gi,""),f.length%2!==0&&(f="0"+f);for(var v=0;v<f.length;v+=2)y.push(parseInt(f[v]+f[v+1],16))}}else for(var v=0;v<f.length;v++){var b=f.charCodeAt(v),S=b>>8,x=255&b;S?y.push(S,x):y.push(x)}return y}function r(f){return f.length===1?"0"+f:f}function o(f){for(var p="",y=0;y<f.length;y++)p+=r(f[y].toString(16));return p}function s(f,p){for(var y=[],v=1<<p+1,b=f.clone();b.cmpn(1)>=0;){var S;if(b.isOdd()){var x=b.andln(v-1);S=x>(v>>1)-1?(v>>1)-x:x,b.isubn(S)}else S=0;y.push(S);for(var k=b.cmpn(0)!==0&&b.andln(v-1)===0?p+1:1,L=1;L<k;L++)y.push(0);b.iushrn(k)}return y}function a(f,p){var y=[[],[]];f=f.clone(),p=p.clone();for(var v=0,b=0;f.cmpn(-v)>0||p.cmpn(-b)>0;){var S=f.andln(3)+v&3,x=p.andln(3)+b&3;S===3&&(S=-1),x===3&&(x=-1);var k;if((1&S)===0)k=0;else{var L=f.andln(7)+v&7;k=L!==3&&L!==5||x!==2?S:-S}y[0].push(k);var D;if((1&x)===0)D=0;else{var L=p.andln(7)+b&7;D=L!==3&&L!==5||S!==2?x:-x}y[1].push(D),2*v===k+1&&(v=1-v),2*b===D+1&&(b=1-b),f.iushrn(1),p.iushrn(1)}return y}function l(f,p,y){var v="_"+p;f.prototype[p]=function(){return this[v]!==void 0?this[v]:this[v]=y.call(this)}}function c(f){return typeof f=="string"?u.toArray(f,"hex"):f}function d(f){return new h(f,"hex","le")}var u=t,h=e(10);u.assert=function(f,p){if(!f)throw new Error(p||"Assertion failed")},u.toArray=i,u.zero2=r,u.toHex=o,u.encode=function(f,p){return p==="hex"?o(f):f},u.getNAF=s,u.getJSF=a,u.cachedProperty=l,u.parseBytes=c,u.intFromLE=d},function(n,t,e){function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var r=e(46),o=r.utils,s=o.assert;t.BlockHash=i,i.prototype.update=function(a,l){if(a=o.toArray(a,l),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var c=a.length%this._delta8;this.pending=a.slice(a.length-c,a.length),this.pending.length===0&&(this.pending=null),a=o.join32(a,0,a.length-c,this.endian);for(var d=0;d<a.length;d+=this._delta32)this._update(a,d,d+this._delta32)}return this},i.prototype.digest=function(a){return this.update(this._pad()),s(this.pending===null),this._digest(a)},i.prototype._pad=function(){var a=this.pendingTotal,l=this._delta8,c=l-(a+this.padLength)%l,d=new Array(c+this.padLength);d[0]=128;for(var u=1;u<c;u++)d[u]=0;if(a<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)d[u++]=0;d[u++]=0,d[u++]=0,d[u++]=0,d[u++]=0,d[u++]=a>>>24&255,d[u++]=a>>>16&255,d[u++]=a>>>8&255,d[u++]=255&a}else{d[u++]=255&a,d[u++]=a>>>8&255,d[u++]=a>>>16&255,d[u++]=a>>>24&255,d[u++]=0,d[u++]=0,d[u++]=0,d[u++]=0;for(var h=8;h<this.padLength;h++)d[u++]=0}return d}},function(n,t,e){function i(a,l,c){return this instanceof i?(this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,void this._init(o.toArray(l,c))):new i(a,l,c)}var r=e(46),o=r.utils,s=o.assert;n.exports=i,i.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),s(a.length<=this.blockSize);for(var l=a.length;l<this.blockSize;l++)a.push(0);for(var l=0;l<a.length;l++)a[l]^=54;this.inner=new this.Hash().update(a);for(var l=0;l<a.length;l++)a[l]^=106;this.outer=new this.Hash().update(a)},i.prototype.update=function(a,l){return this.inner.update(a,l),this},i.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},function(n,t,e){function i(){return this instanceof i?(f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new i}function r(S,x,k,L){return S<=15?x^k^L:S<=31?x&k|~x&L:S<=47?(x|~k)^L:S<=63?x&L|k&~L:x^(k|~L)}function o(S){return S<=15?0:S<=31?1518500249:S<=47?1859775393:S<=63?2400959708:2840853838}function s(S){return S<=15?1352829926:S<=31?1548603684:S<=47?1836072691:S<=63?2053994217:0}var a=e(46),l=a.utils,c=l.rotl32,d=l.sum32,u=l.sum32_3,h=l.sum32_4,f=a.common.BlockHash;l.inherits(i,f),t.ripemd160=i,i.blockSize=512,i.outSize=160,i.hmacStrength=192,i.padLength=64,i.prototype._update=function(S,x){for(var k=this.h[0],L=this.h[1],D=this.h[2],V=this.h[3],O=this.h[4],R=k,G=L,Z=D,K=V,C=O,A=0;A<80;A++){var I=d(c(h(k,r(A,L,D,V),S[p[A]+x],o(A)),v[A]),O);k=O,O=V,V=c(D,10),D=L,L=I,I=d(c(h(R,r(79-A,G,Z,K),S[y[A]+x],s(A)),b[A]),C),R=C,C=K,K=c(Z,10),Z=G,G=I}I=u(this.h[1],D,K),this.h[1]=u(this.h[2],V,C),this.h[2]=u(this.h[3],O,R),this.h[3]=u(this.h[4],k,G),this.h[4]=u(this.h[0],L,Z),this.h[0]=I},i.prototype._digest=function(S){return S==="hex"?l.toHex32(this.h,"little"):l.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(n,t,e){function i(){return this instanceof i?(fe.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=De,void(this.W=new Array(64))):new i}function r(){return this instanceof r?(i.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new r}function o(){return this instanceof o?(fe.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=be,void(this.W=new Array(160))):new o}function s(){return this instanceof s?(o.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new s}function a(){return this instanceof a?(fe.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new a}function l(Ce,we,ve){return Ce&we^~Ce&ve}function c(Ce,we,ve){return Ce&we^Ce&ve^we&ve}function d(Ce,we,ve){return Ce^we^ve}function u(Ce){return I(Ce,2)^I(Ce,13)^I(Ce,22)}function h(Ce){return I(Ce,6)^I(Ce,11)^I(Ce,25)}function f(Ce){return I(Ce,7)^I(Ce,18)^Ce>>>3}function p(Ce){return I(Ce,17)^I(Ce,19)^Ce>>>10}function y(Ce,we,ve,xe){return Ce===0?l(we,ve,xe):Ce===1||Ce===3?d(we,ve,xe):Ce===2?c(we,ve,xe):void 0}function v(Ce,we,ve,xe,Te,ke){var B=Ce&ve^~Ce&Te;return B<0&&(B+=4294967296),B}function b(Ce,we,ve,xe,Te,ke){var B=we&xe^~we&ke;return B<0&&(B+=4294967296),B}function S(Ce,we,ve,xe,Te,ke){var B=Ce&ve^Ce&Te^ve&Te;return B<0&&(B+=4294967296),B}function x(Ce,we,ve,xe,Te,ke){var B=we&xe^we&ke^xe&ke;return B<0&&(B+=4294967296),B}function k(Ce,we){var ve=$(Ce,we,28),xe=$(we,Ce,2),Te=$(we,Ce,7),ke=ve^xe^Te;return ke<0&&(ke+=4294967296),ke}function L(Ce,we){var ve=te(Ce,we,28),xe=te(we,Ce,2),Te=te(we,Ce,7),ke=ve^xe^Te;return ke<0&&(ke+=4294967296),ke}function D(Ce,we){var ve=$(Ce,we,14),xe=$(Ce,we,18),Te=$(we,Ce,9),ke=ve^xe^Te;return ke<0&&(ke+=4294967296),ke}function V(Ce,we){var ve=te(Ce,we,14),xe=te(Ce,we,18),Te=te(we,Ce,9),ke=ve^xe^Te;return ke<0&&(ke+=4294967296),ke}function O(Ce,we){var ve=$(Ce,we,1),xe=$(Ce,we,8),Te=se(Ce,we,7),ke=ve^xe^Te;return ke<0&&(ke+=4294967296),ke}function R(Ce,we){var ve=te(Ce,we,1),xe=te(Ce,we,8),Te=ue(Ce,we,7),ke=ve^xe^Te;return ke<0&&(ke+=4294967296),ke}function G(Ce,we){var ve=$(Ce,we,19),xe=$(we,Ce,29),Te=se(Ce,we,6),ke=ve^xe^Te;return ke<0&&(ke+=4294967296),ke}function Z(Ce,we){var ve=te(Ce,we,19),xe=te(we,Ce,29),Te=ue(Ce,we,6),ke=ve^xe^Te;return ke<0&&(ke+=4294967296),ke}var K=e(46),C=K.utils,A=C.assert,I=C.rotr32,T=C.rotl32,M=C.sum32,F=C.sum32_4,q=C.sum32_5,$=C.rotr64_hi,te=C.rotr64_lo,se=C.shr64_hi,ue=C.shr64_lo,Se=C.sum64,Ie=C.sum64_hi,Be=C.sum64_lo,ce=C.sum64_4_hi,pe=C.sum64_4_lo,re=C.sum64_5_hi,ae=C.sum64_5_lo,fe=K.common.BlockHash,De=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],be=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Ae=[1518500249,1859775393,2400959708,3395469782];C.inherits(i,fe),t.sha256=i,i.blockSize=512,i.outSize=256,i.hmacStrength=192,i.padLength=64,i.prototype._update=function(Ce,we){for(var ve=this.W,xe=0;xe<16;xe++)ve[xe]=Ce[we+xe];for(;xe<ve.length;xe++)ve[xe]=F(p(ve[xe-2]),ve[xe-7],f(ve[xe-15]),ve[xe-16]);var Te=this.h[0],ke=this.h[1],B=this.h[2],W=this.h[3],ie=this.h[4],ye=this.h[5],Me=this.h[6],Fe=this.h[7];A(this.k.length===ve.length);for(var xe=0;xe<ve.length;xe++){var tt=q(Fe,h(ie),l(ie,ye,Me),this.k[xe],ve[xe]),gt=M(u(Te),c(Te,ke,B));Fe=Me,Me=ye,ye=ie,ie=M(W,tt),W=B,B=ke,ke=Te,Te=M(tt,gt)}this.h[0]=M(this.h[0],Te),this.h[1]=M(this.h[1],ke),this.h[2]=M(this.h[2],B),this.h[3]=M(this.h[3],W),this.h[4]=M(this.h[4],ie),this.h[5]=M(this.h[5],ye),this.h[6]=M(this.h[6],Me),this.h[7]=M(this.h[7],Fe)},i.prototype._digest=function(Ce){return Ce==="hex"?C.toHex32(this.h,"big"):C.split32(this.h,"big")},C.inherits(r,i),t.sha224=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(Ce){return Ce==="hex"?C.toHex32(this.h.slice(0,7),"big"):C.split32(this.h.slice(0,7),"big")},C.inherits(o,fe),t.sha512=o,o.blockSize=1024,o.outSize=512,o.hmacStrength=192,o.padLength=128,o.prototype._prepareBlock=function(Ce,we){for(var ve=this.W,xe=0;xe<32;xe++)ve[xe]=Ce[we+xe];for(;xe<ve.length;xe+=2){var Te=G(ve[xe-4],ve[xe-3]),ke=Z(ve[xe-4],ve[xe-3]),B=ve[xe-14],W=ve[xe-13],ie=O(ve[xe-30],ve[xe-29]),ye=R(ve[xe-30],ve[xe-29]),Me=ve[xe-32],Fe=ve[xe-31];ve[xe]=ce(Te,ke,B,W,ie,ye,Me,Fe),ve[xe+1]=pe(Te,ke,B,W,ie,ye,Me,Fe)}},o.prototype._update=function(Ce,we){this._prepareBlock(Ce,we);var ve=this.W,xe=this.h[0],Te=this.h[1],ke=this.h[2],B=this.h[3],W=this.h[4],ie=this.h[5],ye=this.h[6],Me=this.h[7],Fe=this.h[8],tt=this.h[9],gt=this.h[10],Ut=this.h[11],Cn=this.h[12],jt=this.h[13],Ht=this.h[14],Kr=this.h[15];A(this.k.length===ve.length);for(var Rn=0;Rn<ve.length;Rn+=2){var ji=Ht,nr=Kr,Ls=D(Fe,tt),yr=V(Fe,tt),Zn=v(Fe,tt,gt,Ut,Cn,jt),Ji=b(Fe,tt,gt,Ut,Cn,jt),mr=this.k[Rn],Er=this.k[Rn+1],Ma=ve[Rn],gr=ve[Rn+1],Vi=re(ji,nr,Ls,yr,Zn,Ji,mr,Er,Ma,gr),Ta=ae(ji,nr,Ls,yr,Zn,Ji,mr,Er,Ma,gr),ji=k(xe,Te),nr=L(xe,Te),Ls=S(xe,Te,ke,B,W,ie),yr=x(xe,Te,ke,B,W,ie),Lr=Ie(ji,nr,Ls,yr),oc=Be(ji,nr,Ls,yr);Ht=Cn,Kr=jt,Cn=gt,jt=Ut,gt=Fe,Ut=tt,Fe=Ie(ye,Me,Vi,Ta),tt=Be(Me,Me,Vi,Ta),ye=W,Me=ie,W=ke,ie=B,ke=xe,B=Te,xe=Ie(Vi,Ta,Lr,oc),Te=Be(Vi,Ta,Lr,oc)}Se(this.h,0,xe,Te),Se(this.h,2,ke,B),Se(this.h,4,W,ie),Se(this.h,6,ye,Me),Se(this.h,8,Fe,tt),Se(this.h,10,gt,Ut),Se(this.h,12,Cn,jt),Se(this.h,14,Ht,Kr)},o.prototype._digest=function(Ce){return Ce==="hex"?C.toHex32(this.h,"big"):C.split32(this.h,"big")},C.inherits(s,o),t.sha384=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(Ce){return Ce==="hex"?C.toHex32(this.h.slice(0,12),"big"):C.split32(this.h.slice(0,12),"big")},C.inherits(a,fe),t.sha1=a,a.blockSize=512,a.outSize=160,a.hmacStrength=80,a.padLength=64,a.prototype._update=function(Ce,we){for(var ve=this.W,xe=0;xe<16;xe++)ve[xe]=Ce[we+xe];for(;xe<ve.length;xe++)ve[xe]=T(ve[xe-3]^ve[xe-8]^ve[xe-14]^ve[xe-16],1);for(var Te=this.h[0],ke=this.h[1],B=this.h[2],W=this.h[3],ie=this.h[4],xe=0;xe<ve.length;xe++){var ye=~~(xe/20),Me=q(T(Te,5),y(ye,ke,B,W),ie,ve[xe],Ae[ye]);ie=W,W=B,B=T(ke,30),ke=Te,Te=Me}this.h[0]=M(this.h[0],Te),this.h[1]=M(this.h[1],ke),this.h[2]=M(this.h[2],B),this.h[3]=M(this.h[3],W),this.h[4]=M(this.h[4],ie)},a.prototype._digest=function(Ce){return Ce==="hex"?C.toHex32(this.h,"big"):C.split32(this.h,"big")}},function(n,t,e){function i(I,T){if(Array.isArray(I))return I.slice();if(!I)return[];var M=[];if(typeof I=="string")if(T){if(T==="hex"){I=I.replace(/[^a-z0-9]+/gi,""),I.length%2!==0&&(I="0"+I);for(var F=0;F<I.length;F+=2)M.push(parseInt(I[F]+I[F+1],16))}}else for(var F=0;F<I.length;F++){var q=I.charCodeAt(F),$=q>>8,te=255&q;$?M.push($,te):M.push(te)}else for(var F=0;F<I.length;F++)M[F]=0|I[F];return M}function r(I){for(var T="",M=0;M<I.length;M++)T+=a(I[M].toString(16));return T}function o(I){var T=I>>>24|I>>>8&65280|I<<8&16711680|(255&I)<<24;return T>>>0}function s(I,T){for(var M="",F=0;F<I.length;F++){var q=I[F];T==="little"&&(q=o(q)),M+=l(q.toString(16))}return M}function a(I){return I.length===1?"0"+I:I}function l(I){return I.length===7?"0"+I:I.length===6?"00"+I:I.length===5?"000"+I:I.length===4?"0000"+I:I.length===3?"00000"+I:I.length===2?"000000"+I:I.length===1?"0000000"+I:I}function c(I,T,M,F){var q=M-T;b(q%4===0);for(var $=new Array(q/4),te=0,se=T;te<$.length;te++,se+=4){var ue;ue=F==="big"?I[se]<<24|I[se+1]<<16|I[se+2]<<8|I[se+3]:I[se+3]<<24|I[se+2]<<16|I[se+1]<<8|I[se],$[te]=ue>>>0}return $}function d(I,T){for(var M=new Array(4*I.length),F=0,q=0;F<I.length;F++,q+=4){var $=I[F];T==="big"?(M[q]=$>>>24,M[q+1]=$>>>16&255,M[q+2]=$>>>8&255,M[q+3]=255&$):(M[q+3]=$>>>24,M[q+2]=$>>>16&255,M[q+1]=$>>>8&255,M[q]=255&$)}return M}function u(I,T){return I>>>T|I<<32-T}function h(I,T){return I<<T|I>>>32-T}function f(I,T){return I+T>>>0}function p(I,T,M){return I+T+M>>>0}function y(I,T,M,F){return I+T+M+F>>>0}function v(I,T,M,F,q){return I+T+M+F+q>>>0}function b(I,T){if(!I)throw new Error(T||"Assertion failed")}function S(I,T,M,F){var q=I[T],$=I[T+1],te=F+$>>>0,se=(te<F?1:0)+M+q;I[T]=se>>>0,I[T+1]=te}function x(I,T,M,F){var q=T+F>>>0,$=(q<T?1:0)+I+M;return $>>>0}function k(I,T,M,F){var q=T+F;return q>>>0}function L(I,T,M,F,q,$,te,se){var ue=0,Se=T;Se=Se+F>>>0,ue+=Se<T?1:0,Se=Se+$>>>0,ue+=Se<$?1:0,Se=Se+se>>>0,ue+=Se<se?1:0;var Ie=I+M+q+te+ue;return Ie>>>0}function D(I,T,M,F,q,$,te,se){var ue=T+F+$+se;return ue>>>0}function V(I,T,M,F,q,$,te,se,ue,Se){var Ie=0,Be=T;Be=Be+F>>>0,Ie+=Be<T?1:0,Be=Be+$>>>0,Ie+=Be<$?1:0,Be=Be+se>>>0,Ie+=Be<se?1:0,Be=Be+Se>>>0,Ie+=Be<Se?1:0;var ce=I+M+q+te+ue+Ie;return ce>>>0}function O(I,T,M,F,q,$,te,se,ue,Se){var Ie=T+F+$+se+Se;return Ie>>>0}function R(I,T,M){var F=T<<32-M|I>>>M;return F>>>0}function G(I,T,M){var F=I<<32-M|T>>>M;return F>>>0}function Z(I,T,M){return I>>>M}function K(I,T,M){var F=I<<32-M|T>>>M;return F>>>0}var C=t,A=e(3);C.toArray=i,C.toHex=r,C.htonl=o,C.toHex32=s,C.zero2=a,C.zero8=l,C.join32=c,C.split32=d,C.rotr32=u,C.rotl32=h,C.sum32=f,C.sum32_3=p,C.sum32_4=y,C.sum32_5=v,C.assert=b,C.inherits=A,t.sum64=S,t.sum64_hi=x,t.sum64_lo=k,t.sum64_4_hi=L,t.sum64_4_lo=D,t.sum64_5_hi=V,t.sum64_5_lo=O,t.rotr64_hi=R,t.rotr64_lo=G,t.shr64_hi=Z,t.shr64_lo=K},function(n,t){t.read=function(e,i,r,o,s){var a,l,c=8*s-o-1,d=(1<<c)-1,u=d>>1,h=-7,f=r?s-1:0,p=r?-1:1,y=e[i+f];for(f+=p,a=y&(1<<-h)-1,y>>=-h,h+=c;h>0;a=256*a+e[i+f],f+=p,h-=8);for(l=a&(1<<-h)-1,a>>=-h,h+=o;h>0;l=256*l+e[i+f],f+=p,h-=8);if(a===0)a=1-u;else{if(a===d)return l?NaN:(y?-1:1)*(1/0);l+=Math.pow(2,o),a-=u}return(y?-1:1)*l*Math.pow(2,a-o)},t.write=function(e,i,r,o,s,a){var l,c,d,u=8*a-s-1,h=(1<<u)-1,f=h>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:a-1,v=o?1:-1,b=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(c=isNaN(i)?1:0,l=h):(l=Math.floor(Math.log(i)/Math.LN2),i*(d=Math.pow(2,-l))<1&&(l--,d*=2),i+=l+f>=1?p/d:p*Math.pow(2,1-f),i*d>=2&&(l++,d/=2),l+f>=h?(c=0,l=h):l+f>=1?(c=(i*d-1)*Math.pow(2,s),l+=f):(c=i*Math.pow(2,f-1)*Math.pow(2,s),l=0));s>=8;e[r+y]=255&c,y+=v,c/=256,s-=8);for(l=l<<s|c,u+=s;u>0;e[r+y]=255&l,y+=v,l/=256,u-=8);e[r+y-v]|=128*b}},function(n,t){var e=[].indexOf;n.exports=function(i,r){if(e)return i.indexOf(r);for(var o=0;o<i.length;++o)if(i[o]===r)return o;return-1}},function(n,t){n.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},function(n,t){n.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},function(n,t){n.exports={_args:[[{raw:"elliptic@^6.0.0",scope:null,escapedName:"elliptic",name:"elliptic",rawSpec:"^6.0.0",spec:">=6.0.0 <7.0.0",type:"range"},"/home/ubuntu/five-bells-condition/node_modules/browserify-sign"]],_from:"elliptic@>=6.0.0 <7.0.0",_id:"elliptic@6.3.3",_inCache:!0,_location:"/elliptic",_nodeVersion:"7.0.0",_npmOperationalInternal:{host:"packages-18-east.internal.npmjs.com",tmp:"tmp/elliptic-6.3.3.tgz_1486422837740_0.10658654430881143"},_npmUser:{name:"indutny",email:"fedor@indutny.com"},_npmVersion:"3.10.8",_phantomChildren:{},_requested:{raw:"elliptic@^6.0.0",scope:null,escapedName:"elliptic",name:"elliptic",rawSpec:"^6.0.0",spec:">=6.0.0 <7.0.0",type:"range"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.3.3.tgz",_shasum:"5482d9646d54bcb89fd7d994fc9e2e9568876e3f",_shrinkwrap:null,_spec:"elliptic@^6.0.0",_where:"/home/ubuntu/five-bells-condition/node_modules/browserify-sign",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},directories:{},dist:{shasum:"5482d9646d54bcb89fd7d994fc9e2e9568876e3f",tarball:"https://registry.npmjs.org/elliptic/-/elliptic-6.3.3.tgz"},files:["lib"],gitHead:"63aee8d697e9b7fac37ece24222029117a890a7e",homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",maintainers:[{name:"indutny",email:"fedor@indutny.com"}],name:"elliptic",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.3.3"}},function(n,t){n.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},function(n,t){},function(n,t,e){function i(o,s){this._id=o,this._clearFn=s}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(o){o&&o.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(o,s){clearTimeout(o._idleTimeoutId),o._idleTimeout=s},t.unenroll=function(o){clearTimeout(o._idleTimeoutId),o._idleTimeout=-1},t._unrefActive=t.active=function(o){clearTimeout(o._idleTimeoutId);var s=o._idleTimeout;s>=0&&(o._idleTimeoutId=setTimeout(function(){o._onTimeout&&o._onTimeout()},s))},e(458),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(n,t,e){var i=e(33),r=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});t.RSAPrivateKey=r;var o=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});t.RSAPublicKey=o;var s=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});t.PublicKey=s;var a=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});t.PrivateKey=l;var c=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});t.EncryptedPrivateKey=c;var d=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});t.DSAPrivateKey=d,t.DSAparam=i.define("DSAparam",function(){this.int()});var u=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())});t.ECPrivateKey=u;var h=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});t.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},function(n,t,e){(function(i){var r=/Proc-Type: 4,ENCRYPTED\r?\nDEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\r?\n\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n/m,o=/^-----BEGIN (.*) KEY-----\r?\n/m,s=/^-----BEGIN (.*) KEY-----\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n-----END \1 KEY-----$/m,a=e(89),l=e(95);n.exports=function(c,d){var u,h=c.toString(),f=h.match(r);if(f){var p="aes"+f[1],y=new i(f[2],"hex"),v=new i(f[3].replace(/\r?\n/g,""),"base64"),b=a(d,y.slice(0,8),parseInt(f[1],10)).key,S=[],x=l.createDecipheriv(p,b,y);S.push(x.update(v)),S.push(x.final()),u=i.concat(S)}else{var k=h.match(s);u=new i(k[2].replace(/\r?\n/g,""),"base64")}var L=h.match(o)[1]+" KEY";return{tag:L,data:u}}}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(c,d){for(var u=0,h=c.length-1;h>=0;h--){var f=c[h];f==="."?c.splice(h,1):f===".."?(c.splice(h,1),u++):u&&(c.splice(h,1),u--)}if(d)for(;u--;u)c.unshift("..");return c}function o(c,d){if(c.filter)return c.filter(d);for(var u=[],h=0;h<c.length;h++)d(c[h],h,c)&&u.push(c[h]);return u}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(c){return s.exec(c).slice(1)};t.resolve=function(){for(var c="",d=!1,u=arguments.length-1;u>=-1&&!d;u--){var h=u>=0?arguments[u]:i.cwd();if(typeof h!="string")throw new TypeError("Arguments to path.resolve must be strings");h&&(c=h+"/"+c,d=h.charAt(0)==="/")}return c=r(o(c.split("/"),function(f){return!!f}),!d).join("/"),(d?"/":"")+c||"."},t.normalize=function(c){var d=t.isAbsolute(c),u=l(c,-1)==="/";return c=r(o(c.split("/"),function(h){return!!h}),!d).join("/"),c||d||(c="."),c&&u&&(c+="/"),(d?"/":"")+c},t.isAbsolute=function(c){return c.charAt(0)==="/"},t.join=function(){var c=Array.prototype.slice.call(arguments,0);return t.normalize(o(c,function(d,u){if(typeof d!="string")throw new TypeError("Arguments to path.join must be strings");return d}).join("/"))},t.relative=function(c,d){function u(S){for(var x=0;x<S.length&&S[x]==="";x++);for(var k=S.length-1;k>=0&&S[k]==="";k--);return x>k?[]:S.slice(x,k-x+1)}c=t.resolve(c).substr(1),d=t.resolve(d).substr(1);for(var h=u(c.split("/")),f=u(d.split("/")),p=Math.min(h.length,f.length),y=p,v=0;v<p;v++)if(h[v]!==f[v]){y=v;break}for(var b=[],v=y;v<h.length;v++)b.push("..");return b=b.concat(f.slice(y)),b.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(c){var d=a(c),u=d[0],h=d[1];return u||h?(h&&(h=h.substr(0,h.length-1)),u+h):"."},t.basename=function(c,d){var u=a(c)[2];return d&&u.substr(-1*d.length)===d&&(u=u.substr(0,u.length-d.length)),u},t.extname=function(c){return a(c)[3]};var l="ab".substr(-1)==="b"?function(c,d,u){return c.substr(d,u)}:function(c,d,u){return d<0&&(d=c.length+d),c.substr(d,u)}}).call(t,e(28))},function(n,t){var e=Math.pow(2,30)-1;n.exports=function(i,r){if(typeof i!="number")throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if(typeof r!="number")throw new TypeError("Key length not a number");if(r<0||r>e||r!==r)throw new TypeError("Bad key length")}},function(n,t,e){t.publicEncrypt=e(446),t.privateDecrypt=e(445),t.privateEncrypt=function(i,r){return t.publicEncrypt(i,r,!0)},t.publicDecrypt=function(i,r){return t.privateDecrypt(i,r,!0)}},function(n,t,e){(function(i){function r(p,y){var v=(p.modulus,p.modulus.byteLength()),b=(y.length,h("sha1").update(new i("")).digest()),S=b.length;if(y[0]!==0)throw new Error("decryption error");var x=y.slice(1,S+1),k=y.slice(S+1),L=c(x,l(k,S)),D=c(k,l(L,v-S-1));if(s(b,D.slice(0,S)))throw new Error("decryption error");for(var V=S;D[V]===0;)V++;if(D[V++]!==1)throw new Error("decryption error");return D.slice(V)}function o(p,y,v){for(var b=y.slice(0,2),S=2,x=0;y[S++]!==0;)if(S>=y.length){x++;break}var k=y.slice(2,S-1);if(y.slice(S-1,S),(b.toString("hex")!=="0002"&&!v||b.toString("hex")!=="0001"&&v)&&x++,k.length<8&&x++,x)throw new Error("decryption error");return y.slice(S)}function s(p,y){p=new i(p),y=new i(y);var v=0,b=p.length;p.length!==y.length&&(v++,b=Math.min(p.length,y.length));for(var S=-1;++S<b;)v+=p[S]^y[S];return v}var a=e(90),l=e(181),c=e(183),d=e(10),u=e(96),h=e(56),f=e(182);n.exports=function(p,y,v){var b;b=p.padding?p.padding:v?1:4;var S=a(p),x=S.modulus.byteLength();if(y.length>x||new d(y).cmp(S.modulus)>=0)throw new Error("decryption error");var k;k=v?f(new d(y),S):u(y,S);var L=new i(x-k.length);if(L.fill(0),k=i.concat([L,k],x),b===4)return r(S,k);if(b===1)return o(S,k,v);if(b===3)return k;throw new Error("unknown padding")}}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(y,v){var b=y.modulus.byteLength(),S=v.length,x=c("sha1").update(new i("")).digest(),k=x.length,L=2*k;if(S>b-L-2)throw new Error("message too long");var D=new i(b-S-L-2);D.fill(0);var V=b-k-1,O=l(k),R=u(i.concat([x,D,new i([1]),v],V),d(O,V)),G=u(O,d(R,k));return new h(i.concat([new i([0]),G,R],b))}function o(y,v,b){var S=v.length,x=y.modulus.byteLength();if(S>x-11)throw new Error("message too long");var k;return b?(k=new i(x-S-3),k.fill(255)):k=s(x-S-3),new h(i.concat([new i([0,b?1:2]),k,new i([0]),v],x))}function s(y,v){for(var b,S=new i(y),x=0,k=l(2*y),L=0;x<y;)L===k.length&&(k=l(2*y),L=0),b=k[L++],b&&(S[x++]=b);return S}var a=e(90),l=e(68),c=e(56),d=e(181),u=e(183),h=e(10),f=e(182),p=e(96);n.exports=function(y,v,b){var S;S=y.padding?y.padding:b?1:4;var x,k=a(y);if(S===4)x=r(k,v);else if(S===1)x=o(k,v,b);else{if(S!==3)throw new Error("unknown padding");if(x=new h(v),x.cmp(k.modulus)>=0)throw new Error("data too long for modulus")}return b?p(x,k):f(x,k)}}).call(t,e(1).Buffer)},function(n,t,e){"use strict";function i(o,s){return Object.prototype.hasOwnProperty.call(o,s)}n.exports=function(o,s,a,l){s=s||"&",a=a||"=";var c={};if(typeof o!="string"||o.length===0)return c;var d=/\+/g;o=o.split(s);var u=1e3;l&&typeof l.maxKeys=="number"&&(u=l.maxKeys);var h=o.length;u>0&&h>u&&(h=u);for(var f=0;f<h;++f){var p,y,v,b,S=o[f].replace(d,"%20"),x=S.indexOf(a);x>=0?(p=S.substr(0,x),y=S.substr(x+1)):(p=S,y=""),v=decodeURIComponent(p),b=decodeURIComponent(y),i(c,v)?r(c[v])?c[v].push(b):c[v]=[c[v],b]:c[v]=b}return c};var r=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"}},function(n,t,e){"use strict";function i(a,l){if(a.map)return a.map(l);for(var c=[],d=0;d<a.length;d++)c.push(l(a[d],d));return c}var r=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};n.exports=function(a,l,c,d){return l=l||"&",c=c||"=",a===null&&(a=void 0),typeof a=="object"?i(s(a),function(u){var h=encodeURIComponent(r(u))+c;return o(a[u])?i(a[u],function(f){return h+encodeURIComponent(r(f))}).join(l):h+encodeURIComponent(r(a[u]))}).join(l):d?encodeURIComponent(r(d))+c+encodeURIComponent(r(a)):""};var o=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},s=Object.keys||function(a){var l=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&l.push(c);return l}},function(n,t,e){"use strict";t.decode=t.parse=e(447),t.encode=t.stringify=e(448)},function(n,t,e){n.exports=e(47)},function(n,t,e){"use strict";function i(){this.head=null,this.tail=null,this.length=0}var r=(e(1).Buffer,e(97));n.exports=i,i.prototype.push=function(o){var s={data:o,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length},i.prototype.unshift=function(o){var s={data:o,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length},i.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(o){if(this.length===0)return"";for(var s=this.head,a=""+s.data;s=s.next;)a+=o+s.data;return a},i.prototype.concat=function(o){if(this.length===0)return r.alloc(0);if(this.length===1)return this.head.data;for(var s=r.allocUnsafe(o>>>0),a=this.head,l=0;a;)a.data.copy(s,l),l+=a.data.length,a=a.next;return s}},function(n,t,e){n.exports=e(184)},function(n,t,e){(function(i){var r=(function(){try{return e(58)}catch{}})();t=n.exports=e(185),t.Stream=r||t,t.Readable=t,t.Writable=e(128),t.Duplex=e(47),t.Transform=e(127),t.PassThrough=e(184),!i.browser&&i.env.READABLE_STREAM==="disable"&&r&&(n.exports=r)}).call(t,e(28))},function(n,t,e){n.exports=e(127)},function(n,t,e){n.exports=e(128)},function(n,t,e){(function(i,r){(function(o){"use strict";function s($,te,se,ue){var Se=te&&te.prototype instanceof l?te:l,Ie=Object.create(Se.prototype),Be=new v(ue||[]);return Ie._invoke=f($,se,Be),Ie}function a($,te,se){try{return{type:"normal",arg:$.call(te,se)}}catch(ue){return{type:"throw",arg:ue}}}function l(){}function c(){}function d(){}function u($){["next","throw","return"].forEach(function(te){$[te]=function(se){return this._invoke(te,se)}})}function h($){function te(Se,Ie,Be,ce){var pe=a($[Se],$,Ie);if(pe.type!=="throw"){var re=pe.arg,ae=re.value;return ae&&typeof ae=="object"&&L.call(ae,"__await")?Promise.resolve(ae.__await).then(function(fe){te("next",fe,Be,ce)},function(fe){te("throw",fe,Be,ce)}):Promise.resolve(ae).then(function(fe){re.value=fe,Be(re)},ce)}ce(pe.arg)}function se(Se,Ie){function Be(){return new Promise(function(ce,pe){te(Se,Ie,ce,pe)})}return ue=ue?ue.then(Be,Be):Be()}typeof r=="object"&&r.domain&&(te=r.domain.bind(te));var ue;this._invoke=se}function f($,te,se){var ue=Z;return function(Se,Ie){if(ue===C)throw new Error("Generator is already running");if(ue===A){if(Se==="throw")throw Ie;return S()}for(se.method=Se,se.arg=Ie;;){var Be=se.delegate;if(Be){if(se.method==="return"||se.method==="throw"&&Be.iterator[se.method]===x){se.delegate=null;var ce=Be.iterator.return;if(ce){var re=a(ce,Be.iterator,se.arg);if(re.type==="throw"){se.method="throw",se.arg=re.arg;continue}}if(se.method==="return")continue}var re=a(Be.iterator[se.method],Be.iterator,se.arg);if(re.type==="throw"){se.delegate=null,se.method="throw",se.arg=re.arg;continue}se.method="next",se.arg=x;var pe=re.arg;if(!pe.done)return ue=K,pe;se[Be.resultName]=pe.value,se.next=Be.nextLoc,se.delegate=null}if(se.method==="next")se.sent=se._sent=se.arg;else if(se.method==="throw"){if(ue===Z)throw ue=A,se.arg;se.dispatchException(se.arg)}else se.method==="return"&&se.abrupt("return",se.arg);ue=C;var re=a($,te,se);if(re.type==="normal"){if(ue=se.done?A:K,re.arg===I)continue;return{value:re.arg,done:se.done}}re.type==="throw"&&(ue=A,se.method="throw",se.arg=re.arg)}}}function p($){var te={tryLoc:$[0]};1 in $&&(te.catchLoc=$[1]),2 in $&&(te.finallyLoc=$[2],te.afterLoc=$[3]),this.tryEntries.push(te)}function y($){var te=$.completion||{};te.type="normal",delete te.arg,$.completion=te}function v($){this.tryEntries=[{tryLoc:"root"}],$.forEach(p,this),this.reset(!0)}function b($){if($){var te=$[V];if(te)return te.call($);if(typeof $.next=="function")return $;if(!isNaN($.length)){var se=-1,ue=function Se(){for(;++se<$.length;)if(L.call($,se))return Se.value=$[se],Se.done=!1,Se;return Se.value=x,Se.done=!0,Se};return ue.next=ue}}return{next:S}}function S(){return{value:x,done:!0}}var x,k=Object.prototype,L=k.hasOwnProperty,D=typeof Symbol=="function"?Symbol:{},V=D.iterator||"@@iterator",O=D.toStringTag||"@@toStringTag",R=typeof n=="object",G=o.regeneratorRuntime;if(G)return void(R&&(n.exports=G));G=o.regeneratorRuntime=R?n.exports:{},G.wrap=s;var Z="suspendedStart",K="suspendedYield",C="executing",A="completed",I={},T={};T[V]=function(){return this};var M=Object.getPrototypeOf,F=M&&M(M(b([])));F&&F!==k&&L.call(F,V)&&(T=F);var q=d.prototype=l.prototype=Object.create(T);c.prototype=q.constructor=d,d.constructor=c,d[O]=c.displayName="GeneratorFunction",G.isGeneratorFunction=function($){var te=typeof $=="function"&&$.constructor;return!!te&&(te===c||(te.displayName||te.name)==="GeneratorFunction")},G.mark=function($){return Object.setPrototypeOf?Object.setPrototypeOf($,d):($.__proto__=d,O in $||($[O]="GeneratorFunction")),$.prototype=Object.create(q),$},G.awrap=function($){return{__await:$}},u(h.prototype),G.AsyncIterator=h,G.async=function($,te,se,ue){var Se=new h(s($,te,se,ue));return G.isGeneratorFunction(te)?Se:Se.next().then(function(Ie){return Ie.done?Ie.value:Se.next()})},u(q),q[O]="Generator",q.toString=function(){return"[object Generator]"},G.keys=function($){var te=[];for(var se in $)te.push(se);return te.reverse(),function ue(){for(;te.length;){var Se=te.pop();if(Se in $)return ue.value=Se,ue.done=!1,ue}return ue.done=!0,ue}},G.values=b,v.prototype={constructor:v,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=x,this.done=!1,this.delegate=null,this.method="next",this.arg=x,this.tryEntries.forEach(y),!$)for(var te in this)te.charAt(0)==="t"&&L.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=x)},stop:function(){this.done=!0;var $=this.tryEntries[0],te=$.completion;if(te.type==="throw")throw te.arg;return this.rval},dispatchException:function($){function te(pe,re){return Ie.type="throw",Ie.arg=$,se.next=pe,re&&(se.method="next",se.arg=x),!!re}if(this.done)throw $;for(var se=this,ue=this.tryEntries.length-1;ue>=0;--ue){var Se=this.tryEntries[ue],Ie=Se.completion;if(Se.tryLoc==="root")return te("end");if(Se.tryLoc<=this.prev){var Be=L.call(Se,"catchLoc"),ce=L.call(Se,"finallyLoc");if(Be&&ce){if(this.prev<Se.catchLoc)return te(Se.catchLoc,!0);if(this.prev<Se.finallyLoc)return te(Se.finallyLoc)}else if(Be){if(this.prev<Se.catchLoc)return te(Se.catchLoc,!0)}else{if(!ce)throw new Error("try statement without catch or finally");if(this.prev<Se.finallyLoc)return te(Se.finallyLoc)}}}},abrupt:function($,te){for(var se=this.tryEntries.length-1;se>=0;--se){var ue=this.tryEntries[se];if(ue.tryLoc<=this.prev&&L.call(ue,"finallyLoc")&&this.prev<ue.finallyLoc){var Se=ue;break}}Se&&($==="break"||$==="continue")&&Se.tryLoc<=te&&te<=Se.finallyLoc&&(Se=null);var Ie=Se?Se.completion:{};return Ie.type=$,Ie.arg=te,Se?(this.method="next",this.next=Se.finallyLoc,I):this.complete(Ie)},complete:function($,te){if($.type==="throw")throw $.arg;return $.type==="break"||$.type==="continue"?this.next=$.arg:$.type==="return"?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):$.type==="normal"&&te&&(this.next=te),I},finish:function($){for(var te=this.tryEntries.length-1;te>=0;--te){var se=this.tryEntries[te];if(se.finallyLoc===$)return this.complete(se.completion,se.afterLoc),y(se),I}},catch:function($){for(var te=this.tryEntries.length-1;te>=0;--te){var se=this.tryEntries[te];if(se.tryLoc===$){var ue=se.completion;if(ue.type==="throw"){var Se=ue.arg;y(se)}return Se}}throw new Error("illegal catch attempt")},delegateYield:function($,te,se){return this.delegate={iterator:b($),resultName:te,nextLoc:se},this.method==="next"&&(this.arg=x),I}}})(typeof i=="object"?i:typeof window=="object"?window:typeof self=="object"?self:this)}).call(t,e(48),e(28))},function(n,t,e){(function(i){function r(k){for(var L=[],D=0,V=0;D<k.length;D++,V+=8)L[V>>>5]|=k[D]<<24-V%32;return L}function o(k){for(var L=[],D=0;D<32*k.length;D+=8)L.push(k[D>>>5]>>>24-D%32&255);return L}function s(k,L,D){for(var V=0;V<16;V++){var O=D+V,R=L[O];L[O]=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8)}var G,Z,K,C,A,I,T,M,F,q;I=G=k[0],T=Z=k[1],M=K=k[2],F=C=k[3],q=A=k[4];var $;for(V=0;V<80;V+=1)$=G+L[D+p[V]]|0,$+=V<16?a(Z,K,C)+S[0]:V<32?l(Z,K,C)+S[1]:V<48?c(Z,K,C)+S[2]:V<64?d(Z,K,C)+S[3]:u(Z,K,C)+S[4],$|=0,$=h($,v[V]),$=$+A|0,G=A,A=C,C=h(K,10),K=Z,Z=$,$=I+L[D+y[V]]|0,$+=V<16?u(T,M,F)+x[0]:V<32?d(T,M,F)+x[1]:V<48?c(T,M,F)+x[2]:V<64?l(T,M,F)+x[3]:a(T,M,F)+x[4],$|=0,$=h($,b[V]),$=$+q|0,I=q,q=F,F=h(M,10),M=T,T=$;$=k[1]+K+F|0,k[1]=k[2]+C+q|0,k[2]=k[3]+A+I|0,k[3]=k[4]+G+T|0,k[4]=k[0]+Z+M|0,k[0]=$}function a(k,L,D){return k^L^D}function l(k,L,D){return k&L|~k&D}function c(k,L,D){return(k|~L)^D}function d(k,L,D){return k&D|L&~D}function u(k,L,D){return k^(L|~D)}function h(k,L){return k<<L|k>>>32-L}function f(k){var L=[1732584193,4023233417,2562383102,271733878,3285377520];typeof k=="string"&&(k=new i(k,"utf8"));var D=r(k),V=8*k.length,O=8*k.length;D[V>>>5]|=128<<24-V%32,D[(V+64>>>9<<4)+14]=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8);for(var R=0;R<D.length;R+=16)s(L,D,R);for(R=0;R<5;R++){var G=L[R];L[R]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8)}var Z=o(L);return new i(Z)}var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],S=[0,1518500249,1859775393,2400959708,2840853838],x=[1352829926,1548603684,1836072691,2053994217,0];n.exports=f}).call(t,e(1).Buffer)},function(n,t,e){(function(i,r){(function(o,s){"use strict";function a(V){typeof V!="function"&&(V=new Function(""+V));for(var O=new Array(arguments.length-1),R=0;R<O.length;R++)O[R]=arguments[R+1];var G={callback:V,args:O};return x[S]=G,b(S),S++}function l(V){delete x[V]}function c(V){var O=V.callback,R=V.args;switch(R.length){case 0:O();break;case 1:O(R[0]);break;case 2:O(R[0],R[1]);break;case 3:O(R[0],R[1],R[2]);break;default:O.apply(s,R)}}function d(V){if(k)setTimeout(d,0,V);else{var O=x[V];if(O){k=!0;try{c(O)}finally{l(V),k=!1}}}}function u(){b=function(V){r.nextTick(function(){d(V)})}}function h(){if(o.postMessage&&!o.importScripts){var V=!0,O=o.onmessage;return o.onmessage=function(){V=!1},o.postMessage("","*"),o.onmessage=O,V}}function f(){var V="setImmediate$"+Math.random()+"$",O=function(R){R.source===o&&typeof R.data=="string"&&R.data.indexOf(V)===0&&d(+R.data.slice(V.length))};o.addEventListener?o.addEventListener("message",O,!1):o.attachEvent("onmessage",O),b=function(R){o.postMessage(V+R,"*")}}function p(){var V=new MessageChannel;V.port1.onmessage=function(O){var R=O.data;d(R)},b=function(O){V.port2.postMessage(O)}}function y(){var V=L.documentElement;b=function(O){var R=L.createElement("script");R.onreadystatechange=function(){d(O),R.onreadystatechange=null,V.removeChild(R),R=null},V.appendChild(R)}}function v(){b=function(V){setTimeout(d,0,V)}}if(!o.setImmediate){var b,S=1,x={},k=!1,L=o.document,D=Object.getPrototypeOf&&Object.getPrototypeOf(o);D=D&&D.setTimeout?D:o,{}.toString.call(o.process)==="[object process]"?u():h()?f():o.MessageChannel?p():L&&"onreadystatechange"in L.createElement("script")?y():v(),D.setImmediate=a,D.clearImmediate=l}})(typeof self>"u"?typeof i>"u"?this:i:self)}).call(t,e(48),e(28))},function(n,i,e){var i=n.exports=function(r){r=r.toLowerCase();var o=i[r];if(!o)throw new Error(r+" is not supported (we accept pull requests)");return new o};i.sha=e(460),i.sha1=e(461),i.sha224=e(462),i.sha256=e(186),i.sha384=e(463),i.sha512=e(187)},function(n,t,e){(function(i){function r(){this.init(),this._w=u,c.call(this,64,56)}function o(h){return h<<5|h>>>27}function s(h){return h<<30|h>>>2}function a(h,f,p,y){return h===0?f&p|~f&y:h===2?f&p|f&y|p&y:f^p^y}var l=e(3),c=e(57),d=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);l(r,c),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(h){for(var f=this._w,p=0|this._a,y=0|this._b,v=0|this._c,b=0|this._d,S=0|this._e,x=0;x<16;++x)f[x]=h.readInt32BE(4*x);for(;x<80;++x)f[x]=f[x-3]^f[x-8]^f[x-14]^f[x-16];for(var k=0;k<80;++k){var L=~~(k/20),D=o(p)+a(L,y,v,b)+S+f[k]+d[L]|0;S=b,b=v,v=s(y),y=p,p=D}this._a=p+this._a|0,this._b=y+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=S+this._e|0},r.prototype._hash=function(){var h=new i(20);return h.writeInt32BE(0|this._a,0),h.writeInt32BE(0|this._b,4),h.writeInt32BE(0|this._c,8),h.writeInt32BE(0|this._d,12),h.writeInt32BE(0|this._e,16),h},n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(){this.init(),this._w=h,d.call(this,64,56)}function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function a(f){return f<<30|f>>>2}function l(f,p,y,v){return f===0?p&y|~p&v:f===2?p&y|p&v|y&v:p^y^v}var c=e(3),d=e(57),u=[1518500249,1859775393,-1894007588,-899497514],h=new Array(80);c(r,d),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(f){for(var p=this._w,y=0|this._a,v=0|this._b,b=0|this._c,S=0|this._d,x=0|this._e,k=0;k<16;++k)p[k]=f.readInt32BE(4*k);for(;k<80;++k)p[k]=o(p[k-3]^p[k-8]^p[k-14]^p[k-16]);for(var L=0;L<80;++L){var D=~~(L/20),V=s(y)+l(D,v,b,S)+x+p[L]+u[D]|0;x=S,S=b,b=a(v),v=y,y=V}this._a=y+this._a|0,this._b=v+this._b|0,this._c=b+this._c|0,this._d=S+this._d|0,this._e=x+this._e|0},r.prototype._hash=function(){var f=new i(20);return f.writeInt32BE(0|this._a,0),f.writeInt32BE(0|this._b,4),f.writeInt32BE(0|this._c,8),f.writeInt32BE(0|this._d,12),f.writeInt32BE(0|this._e,16),f},n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(){this.init(),this._w=l,a.call(this,64,56)}var o=e(3),s=e(186),a=e(57),l=new Array(64);o(r,s),r.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},r.prototype._hash=function(){var c=new i(28);return c.writeInt32BE(this._a,0),c.writeInt32BE(this._b,4),c.writeInt32BE(this._c,8),c.writeInt32BE(this._d,12),c.writeInt32BE(this._e,16),c.writeInt32BE(this._f,20),c.writeInt32BE(this._g,24),c},n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){(function(i){function r(){this.init(),this._w=l,a.call(this,128,112)}var o=e(3),s=e(187),a=e(57),l=new Array(160);o(r,s),r.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},r.prototype._hash=function(){function c(u,h,f){d.writeInt32BE(u,f),d.writeInt32BE(h,f+4)}var d=new i(48);return c(this._ah,this._al,0),c(this._bh,this._bl,8),c(this._ch,this._cl,16),c(this._dh,this._dl,24),c(this._eh,this._el,32),c(this._fh,this._fl,40),d},n.exports=r}).call(t,e(1).Buffer)},function(n,t,e){(function(i){"use strict";function r(ne,de,he,H){ne[de]=he>>24&255,ne[de+1]=he>>16&255,ne[de+2]=he>>8&255,ne[de+3]=255&he,ne[de+4]=H>>24&255,ne[de+5]=H>>16&255,ne[de+6]=H>>8&255,ne[de+7]=255&H}function o(ne,de,he,H,Y){var Le,qe=0;for(Le=0;Le<Y;Le++)qe|=ne[de+Le]^he[H+Le];return(1&qe-1>>>8)-1}function s(ne,de,he,H){return o(ne,de,he,H,16)}function a(ne,de,he,H){return o(ne,de,he,H,32)}function l(ne,de,he,H){for(var Y,Le=255&H[0]|(255&H[1])<<8|(255&H[2])<<16|(255&H[3])<<24,qe=255&he[0]|(255&he[1])<<8|(255&he[2])<<16|(255&he[3])<<24,ot=255&he[4]|(255&he[5])<<8|(255&he[6])<<16|(255&he[7])<<24,ft=255&he[8]|(255&he[9])<<8|(255&he[10])<<16|(255&he[11])<<24,Bt=255&he[12]|(255&he[13])<<8|(255&he[14])<<16|(255&he[15])<<24,en=255&H[4]|(255&H[5])<<8|(255&H[6])<<16|(255&H[7])<<24,We=255&de[0]|(255&de[1])<<8|(255&de[2])<<16|(255&de[3])<<24,et=255&de[4]|(255&de[5])<<8|(255&de[6])<<16|(255&de[7])<<24,pt=255&de[8]|(255&de[9])<<8|(255&de[10])<<16|(255&de[11])<<24,Ft=255&de[12]|(255&de[13])<<8|(255&de[14])<<16|(255&de[15])<<24,St=255&H[8]|(255&H[9])<<8|(255&H[10])<<16|(255&H[11])<<24,xn=255&he[16]|(255&he[17])<<8|(255&he[18])<<16|(255&he[19])<<24,An=255&he[20]|(255&he[21])<<8|(255&he[22])<<16|(255&he[23])<<24,mn=255&he[24]|(255&he[25])<<8|(255&he[26])<<16|(255&he[27])<<24,wt=255&he[28]|(255&he[29])<<8|(255&he[30])<<16|(255&he[31])<<24,Mt=255&H[12]|(255&H[13])<<8|(255&H[14])<<16|(255&H[15])<<24,Ct=Le,sn=qe,Tt=ot,ze=ft,Ke=Bt,at=en,rt=We,it=et,dt=pt,kn=Ft,$t=St,xt=xn,cn=An,zn=mn,ui=wt,Ot=Mt,gi=0;gi<20;gi+=2)Y=Ct+cn|0,Ke^=Y<<7|Y>>>25,Y=Ke+Ct|0,dt^=Y<<9|Y>>>23,Y=dt+Ke|0,cn^=Y<<13|Y>>>19,Y=cn+dt|0,Ct^=Y<<18|Y>>>14,Y=at+sn|0,kn^=Y<<7|Y>>>25,Y=kn+at|0,zn^=Y<<9|Y>>>23,Y=zn+kn|0,sn^=Y<<13|Y>>>19,Y=sn+zn|0,at^=Y<<18|Y>>>14,Y=$t+rt|0,ui^=Y<<7|Y>>>25,Y=ui+$t|0,Tt^=Y<<9|Y>>>23,Y=Tt+ui|0,rt^=Y<<13|Y>>>19,Y=rt+Tt|0,$t^=Y<<18|Y>>>14,Y=Ot+xt|0,ze^=Y<<7|Y>>>25,Y=ze+Ot|0,it^=Y<<9|Y>>>23,Y=it+ze|0,xt^=Y<<13|Y>>>19,Y=xt+it|0,Ot^=Y<<18|Y>>>14,Y=Ct+ze|0,sn^=Y<<7|Y>>>25,Y=sn+Ct|0,Tt^=Y<<9|Y>>>23,Y=Tt+sn|0,ze^=Y<<13|Y>>>19,Y=ze+Tt|0,Ct^=Y<<18|Y>>>14,Y=at+Ke|0,rt^=Y<<7|Y>>>25,Y=rt+at|0,it^=Y<<9|Y>>>23,Y=it+rt|0,Ke^=Y<<13|Y>>>19,Y=Ke+it|0,at^=Y<<18|Y>>>14,Y=$t+kn|0,xt^=Y<<7|Y>>>25,Y=xt+$t|0,dt^=Y<<9|Y>>>23,Y=dt+xt|0,kn^=Y<<13|Y>>>19,Y=kn+dt|0,$t^=Y<<18|Y>>>14,Y=Ot+ui|0,cn^=Y<<7|Y>>>25,Y=cn+Ot|0,zn^=Y<<9|Y>>>23,Y=zn+cn|0,ui^=Y<<13|Y>>>19,Y=ui+zn|0,Ot^=Y<<18|Y>>>14;Ct=Ct+Le|0,sn=sn+qe|0,Tt=Tt+ot|0,ze=ze+ft|0,Ke=Ke+Bt|0,at=at+en|0,rt=rt+We|0,it=it+et|0,dt=dt+pt|0,kn=kn+Ft|0,$t=$t+St|0,xt=xt+xn|0,cn=cn+An|0,zn=zn+mn|0,ui=ui+wt|0,Ot=Ot+Mt|0,ne[0]=Ct>>>0&255,ne[1]=Ct>>>8&255,ne[2]=Ct>>>16&255,ne[3]=Ct>>>24&255,ne[4]=sn>>>0&255,ne[5]=sn>>>8&255,ne[6]=sn>>>16&255,ne[7]=sn>>>24&255,ne[8]=Tt>>>0&255,ne[9]=Tt>>>8&255,ne[10]=Tt>>>16&255,ne[11]=Tt>>>24&255,ne[12]=ze>>>0&255,ne[13]=ze>>>8&255,ne[14]=ze>>>16&255,ne[15]=ze>>>24&255,ne[16]=Ke>>>0&255,ne[17]=Ke>>>8&255,ne[18]=Ke>>>16&255,ne[19]=Ke>>>24&255,ne[20]=at>>>0&255,ne[21]=at>>>8&255,ne[22]=at>>>16&255,ne[23]=at>>>24&255,ne[24]=rt>>>0&255,ne[25]=rt>>>8&255,ne[26]=rt>>>16&255,ne[27]=rt>>>24&255,ne[28]=it>>>0&255,ne[29]=it>>>8&255,ne[30]=it>>>16&255,ne[31]=it>>>24&255,ne[32]=dt>>>0&255,ne[33]=dt>>>8&255,ne[34]=dt>>>16&255,ne[35]=dt>>>24&255,ne[36]=kn>>>0&255,ne[37]=kn>>>8&255,ne[38]=kn>>>16&255,ne[39]=kn>>>24&255,ne[40]=$t>>>0&255,ne[41]=$t>>>8&255,ne[42]=$t>>>16&255,ne[43]=$t>>>24&255,ne[44]=xt>>>0&255,ne[45]=xt>>>8&255,ne[46]=xt>>>16&255,ne[47]=xt>>>24&255,ne[48]=cn>>>0&255,ne[49]=cn>>>8&255,ne[50]=cn>>>16&255,ne[51]=cn>>>24&255,ne[52]=zn>>>0&255,ne[53]=zn>>>8&255,ne[54]=zn>>>16&255,ne[55]=zn>>>24&255,ne[56]=ui>>>0&255,ne[57]=ui>>>8&255,ne[58]=ui>>>16&255,ne[59]=ui>>>24&255,ne[60]=Ot>>>0&255,ne[61]=Ot>>>8&255,ne[62]=Ot>>>16&255,ne[63]=Ot>>>24&255}function c(ne,de,he,H){for(var Y,Le=255&H[0]|(255&H[1])<<8|(255&H[2])<<16|(255&H[3])<<24,qe=255&he[0]|(255&he[1])<<8|(255&he[2])<<16|(255&he[3])<<24,ot=255&he[4]|(255&he[5])<<8|(255&he[6])<<16|(255&he[7])<<24,ft=255&he[8]|(255&he[9])<<8|(255&he[10])<<16|(255&he[11])<<24,Bt=255&he[12]|(255&he[13])<<8|(255&he[14])<<16|(255&he[15])<<24,en=255&H[4]|(255&H[5])<<8|(255&H[6])<<16|(255&H[7])<<24,We=255&de[0]|(255&de[1])<<8|(255&de[2])<<16|(255&de[3])<<24,et=255&de[4]|(255&de[5])<<8|(255&de[6])<<16|(255&de[7])<<24,pt=255&de[8]|(255&de[9])<<8|(255&de[10])<<16|(255&de[11])<<24,Ft=255&de[12]|(255&de[13])<<8|(255&de[14])<<16|(255&de[15])<<24,St=255&H[8]|(255&H[9])<<8|(255&H[10])<<16|(255&H[11])<<24,xn=255&he[16]|(255&he[17])<<8|(255&he[18])<<16|(255&he[19])<<24,An=255&he[20]|(255&he[21])<<8|(255&he[22])<<16|(255&he[23])<<24,mn=255&he[24]|(255&he[25])<<8|(255&he[26])<<16|(255&he[27])<<24,wt=255&he[28]|(255&he[29])<<8|(255&he[30])<<16|(255&he[31])<<24,Mt=255&H[12]|(255&H[13])<<8|(255&H[14])<<16|(255&H[15])<<24,Ct=Le,sn=qe,Tt=ot,ze=ft,Ke=Bt,at=en,rt=We,it=et,dt=pt,kn=Ft,$t=St,xt=xn,cn=An,zn=mn,ui=wt,Ot=Mt,gi=0;gi<20;gi+=2)Y=Ct+cn|0,Ke^=Y<<7|Y>>>25,Y=Ke+Ct|0,dt^=Y<<9|Y>>>23,Y=dt+Ke|0,cn^=Y<<13|Y>>>19,Y=cn+dt|0,Ct^=Y<<18|Y>>>14,Y=at+sn|0,kn^=Y<<7|Y>>>25,Y=kn+at|0,zn^=Y<<9|Y>>>23,Y=zn+kn|0,sn^=Y<<13|Y>>>19,Y=sn+zn|0,at^=Y<<18|Y>>>14,Y=$t+rt|0,ui^=Y<<7|Y>>>25,Y=ui+$t|0,Tt^=Y<<9|Y>>>23,Y=Tt+ui|0,rt^=Y<<13|Y>>>19,Y=rt+Tt|0,$t^=Y<<18|Y>>>14,Y=Ot+xt|0,ze^=Y<<7|Y>>>25,Y=ze+Ot|0,it^=Y<<9|Y>>>23,Y=it+ze|0,xt^=Y<<13|Y>>>19,Y=xt+it|0,Ot^=Y<<18|Y>>>14,Y=Ct+ze|0,sn^=Y<<7|Y>>>25,Y=sn+Ct|0,Tt^=Y<<9|Y>>>23,Y=Tt+sn|0,ze^=Y<<13|Y>>>19,Y=ze+Tt|0,Ct^=Y<<18|Y>>>14,Y=at+Ke|0,rt^=Y<<7|Y>>>25,Y=rt+at|0,it^=Y<<9|Y>>>23,Y=it+rt|0,Ke^=Y<<13|Y>>>19,Y=Ke+it|0,at^=Y<<18|Y>>>14,Y=$t+kn|0,xt^=Y<<7|Y>>>25,Y=xt+$t|0,dt^=Y<<9|Y>>>23,Y=dt+xt|0,kn^=Y<<13|Y>>>19,Y=kn+dt|0,$t^=Y<<18|Y>>>14,Y=Ot+ui|0,cn^=Y<<7|Y>>>25,Y=cn+Ot|0,zn^=Y<<9|Y>>>23,Y=zn+cn|0,ui^=Y<<13|Y>>>19,Y=ui+zn|0,Ot^=Y<<18|Y>>>14;ne[0]=Ct>>>0&255,ne[1]=Ct>>>8&255,ne[2]=Ct>>>16&255,ne[3]=Ct>>>24&255,ne[4]=at>>>0&255,ne[5]=at>>>8&255,ne[6]=at>>>16&255,ne[7]=at>>>24&255,ne[8]=$t>>>0&255,ne[9]=$t>>>8&255,ne[10]=$t>>>16&255,ne[11]=$t>>>24&255,ne[12]=Ot>>>0&255,ne[13]=Ot>>>8&255,ne[14]=Ot>>>16&255,ne[15]=Ot>>>24&255,ne[16]=rt>>>0&255,ne[17]=rt>>>8&255,ne[18]=rt>>>16&255,ne[19]=rt>>>24&255,ne[20]=it>>>0&255,ne[21]=it>>>8&255,ne[22]=it>>>16&255,ne[23]=it>>>24&255,ne[24]=dt>>>0&255,ne[25]=dt>>>8&255,ne[26]=dt>>>16&255,ne[27]=dt>>>24&255,ne[28]=kn>>>0&255,ne[29]=kn>>>8&255,ne[30]=kn>>>16&255,ne[31]=kn>>>24&255}function d(ne,de,he,H){l(ne,de,he,H)}function u(ne,de,he,H){c(ne,de,he,H)}function h(ne,de,he,H,Y,Le,qe){var ot,ft,Bt=new Uint8Array(16),en=new Uint8Array(64);for(ft=0;ft<16;ft++)Bt[ft]=0;for(ft=0;ft<8;ft++)Bt[ft]=Le[ft];for(;Y>=64;){for(d(en,Bt,qe,Ht),ft=0;ft<64;ft++)ne[de+ft]=he[H+ft]^en[ft];for(ot=1,ft=8;ft<16;ft++)ot=ot+(255&Bt[ft])|0,Bt[ft]=255&ot,ot>>>=8;Y-=64,de+=64,H+=64}if(Y>0)for(d(en,Bt,qe,Ht),ft=0;ft<Y;ft++)ne[de+ft]=he[H+ft]^en[ft];return 0}function f(ne,de,he,H,Y){var Le,qe,ot=new Uint8Array(16),ft=new Uint8Array(64);for(qe=0;qe<16;qe++)ot[qe]=0;for(qe=0;qe<8;qe++)ot[qe]=H[qe];for(;he>=64;){for(d(ft,ot,Y,Ht),qe=0;qe<64;qe++)ne[de+qe]=ft[qe];for(Le=1,qe=8;qe<16;qe++)Le=Le+(255&ot[qe])|0,ot[qe]=255&Le,Le>>>=8;he-=64,de+=64}if(he>0)for(d(ft,ot,Y,Ht),qe=0;qe<he;qe++)ne[de+qe]=ft[qe];return 0}function p(ne,de,he,H,Y){var Le=new Uint8Array(32);u(Le,H,Y,Ht);for(var qe=new Uint8Array(8),ot=0;ot<8;ot++)qe[ot]=H[ot+16];return f(ne,de,he,qe,Le)}function y(ne,de,he,H,Y,Le,qe){var ot=new Uint8Array(32);u(ot,Le,qe,Ht);for(var ft=new Uint8Array(8),Bt=0;Bt<8;Bt++)ft[Bt]=Le[Bt+16];return h(ne,de,he,H,Y,ft,ot)}function v(ne,de,he,H,Y,Le){var qe=new Kr(Le);return qe.update(he,H,Y),qe.finish(ne,de),0}function b(ne,de,he,H,Y,Le){var qe=new Uint8Array(16);return v(qe,0,he,H,Y,Le),s(ne,de,qe,0)}function S(ne,de,he,H,Y){var Le;if(he<32)return-1;for(y(ne,0,de,0,he,H,Y),v(ne,16,ne,32,he-32,ne),Le=0;Le<16;Le++)ne[Le]=0;return 0}function x(ne,de,he,H,Y){var Le,qe=new Uint8Array(32);if(he<32||(p(qe,0,32,H,Y),b(de,16,de,32,he-32,qe)!==0))return-1;for(y(ne,0,de,0,he,H,Y),Le=0;Le<32;Le++)ne[Le]=0;return 0}function k(ne,de){var he;for(he=0;he<16;he++)ne[he]=0|de[he]}function L(ne){var de,he,H=1;for(de=0;de<16;de++)he=ne[de]+H+65535,H=Math.floor(he/65536),ne[de]=he-65536*H;ne[0]+=H-1+37*(H-1)}function D(ne,de,he){for(var H,Y=~(he-1),Le=0;Le<16;Le++)H=Y&(ne[Le]^de[Le]),ne[Le]^=H,de[Le]^=H}function V(ne,de){var he,H,Y,Le=ke(),qe=ke();for(he=0;he<16;he++)qe[he]=de[he];for(L(qe),L(qe),L(qe),H=0;H<2;H++){for(Le[0]=qe[0]-65517,he=1;he<15;he++)Le[he]=qe[he]-65535-(Le[he-1]>>16&1),Le[he-1]&=65535;Le[15]=qe[15]-32767-(Le[14]>>16&1),Y=Le[15]>>16&1,Le[14]&=65535,D(qe,Le,1-Y)}for(he=0;he<16;he++)ne[2*he]=255&qe[he],ne[2*he+1]=qe[he]>>8}function O(ne,de){var he=new Uint8Array(32),H=new Uint8Array(32);return V(he,ne),V(H,de),a(he,0,H,0)}function R(ne){var de=new Uint8Array(32);return V(de,ne),1&de[0]}function G(ne,de){var he;for(he=0;he<16;he++)ne[he]=de[2*he]+(de[2*he+1]<<8);ne[15]&=32767}function Z(ne,de,he){for(var H=0;H<16;H++)ne[H]=de[H]+he[H]}function K(ne,de,he){for(var H=0;H<16;H++)ne[H]=de[H]-he[H]}function C(ne,de,he){var H,Y,Le=0,qe=0,ot=0,ft=0,Bt=0,en=0,We=0,et=0,pt=0,Ft=0,St=0,xn=0,An=0,mn=0,wt=0,Mt=0,Ct=0,sn=0,Tt=0,ze=0,Ke=0,at=0,rt=0,it=0,dt=0,kn=0,$t=0,xt=0,cn=0,zn=0,ui=0,Ot=he[0],gi=he[1],Xi=he[2],Yi=he[3],yi=he[4],Hi=he[5],ir=he[6],jo=he[7],Or=he[8],Ao=he[9],Do=he[10],Io=he[11],ss=he[12],Zs=he[13],Qs=he[14],Js=he[15];H=de[0],Le+=H*Ot,qe+=H*gi,ot+=H*Xi,ft+=H*Yi,Bt+=H*yi,en+=H*Hi,We+=H*ir,et+=H*jo,pt+=H*Or,Ft+=H*Ao,St+=H*Do,xn+=H*Io,An+=H*ss,mn+=H*Zs,wt+=H*Qs,Mt+=H*Js,H=de[1],qe+=H*Ot,ot+=H*gi,ft+=H*Xi,Bt+=H*Yi,en+=H*yi,We+=H*Hi,et+=H*ir,pt+=H*jo,Ft+=H*Or,St+=H*Ao,xn+=H*Do,An+=H*Io,mn+=H*ss,wt+=H*Zs,Mt+=H*Qs,Ct+=H*Js,H=de[2],ot+=H*Ot,ft+=H*gi,Bt+=H*Xi,en+=H*Yi,We+=H*yi,et+=H*Hi,pt+=H*ir,Ft+=H*jo,St+=H*Or,xn+=H*Ao,An+=H*Do,mn+=H*Io,wt+=H*ss,Mt+=H*Zs,Ct+=H*Qs,sn+=H*Js,H=de[3],ft+=H*Ot,Bt+=H*gi,en+=H*Xi,We+=H*Yi,et+=H*yi,pt+=H*Hi,Ft+=H*ir,St+=H*jo,xn+=H*Or,An+=H*Ao,mn+=H*Do,wt+=H*Io,Mt+=H*ss,Ct+=H*Zs,sn+=H*Qs,Tt+=H*Js,H=de[4],Bt+=H*Ot,en+=H*gi,We+=H*Xi,et+=H*Yi,pt+=H*yi,Ft+=H*Hi,St+=H*ir,xn+=H*jo,An+=H*Or,mn+=H*Ao,wt+=H*Do,Mt+=H*Io,Ct+=H*ss,sn+=H*Zs,Tt+=H*Qs,ze+=H*Js,H=de[5],en+=H*Ot,We+=H*gi,et+=H*Xi,pt+=H*Yi,Ft+=H*yi,St+=H*Hi,xn+=H*ir,An+=H*jo,mn+=H*Or,wt+=H*Ao,Mt+=H*Do,Ct+=H*Io,sn+=H*ss,Tt+=H*Zs,ze+=H*Qs,Ke+=H*Js,H=de[6],We+=H*Ot,et+=H*gi,pt+=H*Xi,Ft+=H*Yi,St+=H*yi,xn+=H*Hi,An+=H*ir,mn+=H*jo,wt+=H*Or,Mt+=H*Ao,Ct+=H*Do,sn+=H*Io,Tt+=H*ss,ze+=H*Zs,Ke+=H*Qs,at+=H*Js,H=de[7],et+=H*Ot,pt+=H*gi,Ft+=H*Xi,St+=H*Yi,xn+=H*yi,An+=H*Hi,mn+=H*ir,wt+=H*jo,Mt+=H*Or,Ct+=H*Ao,sn+=H*Do,Tt+=H*Io,ze+=H*ss,Ke+=H*Zs,at+=H*Qs,rt+=H*Js,H=de[8],pt+=H*Ot,Ft+=H*gi,St+=H*Xi,xn+=H*Yi,An+=H*yi,mn+=H*Hi,wt+=H*ir,Mt+=H*jo,Ct+=H*Or,sn+=H*Ao,Tt+=H*Do,ze+=H*Io,Ke+=H*ss,at+=H*Zs,rt+=H*Qs,it+=H*Js,H=de[9],Ft+=H*Ot,St+=H*gi,xn+=H*Xi,An+=H*Yi,mn+=H*yi,wt+=H*Hi,Mt+=H*ir,Ct+=H*jo,sn+=H*Or,Tt+=H*Ao,ze+=H*Do,Ke+=H*Io,at+=H*ss,rt+=H*Zs,it+=H*Qs,dt+=H*Js,H=de[10],St+=H*Ot,xn+=H*gi,An+=H*Xi,mn+=H*Yi,wt+=H*yi,Mt+=H*Hi,Ct+=H*ir,sn+=H*jo,Tt+=H*Or,ze+=H*Ao,Ke+=H*Do,at+=H*Io,rt+=H*ss,it+=H*Zs,dt+=H*Qs,kn+=H*Js,H=de[11],xn+=H*Ot,An+=H*gi,mn+=H*Xi,wt+=H*Yi,Mt+=H*yi,Ct+=H*Hi,sn+=H*ir,Tt+=H*jo,ze+=H*Or,Ke+=H*Ao,at+=H*Do,rt+=H*Io,it+=H*ss,dt+=H*Zs,kn+=H*Qs,$t+=H*Js,H=de[12],An+=H*Ot,mn+=H*gi,wt+=H*Xi,Mt+=H*Yi,Ct+=H*yi,sn+=H*Hi,Tt+=H*ir,ze+=H*jo,Ke+=H*Or,at+=H*Ao,rt+=H*Do,it+=H*Io,dt+=H*ss,kn+=H*Zs,$t+=H*Qs,xt+=H*Js,H=de[13],mn+=H*Ot,wt+=H*gi,Mt+=H*Xi,Ct+=H*Yi,sn+=H*yi,Tt+=H*Hi,ze+=H*ir,Ke+=H*jo,at+=H*Or,rt+=H*Ao,it+=H*Do,dt+=H*Io,kn+=H*ss,$t+=H*Zs,xt+=H*Qs,cn+=H*Js,H=de[14],wt+=H*Ot,Mt+=H*gi,Ct+=H*Xi,sn+=H*Yi,Tt+=H*yi,ze+=H*Hi,Ke+=H*ir,at+=H*jo,rt+=H*Or,it+=H*Ao,dt+=H*Do,kn+=H*Io,$t+=H*ss,xt+=H*Zs,cn+=H*Qs,zn+=H*Js,H=de[15],Mt+=H*Ot,Ct+=H*gi,sn+=H*Xi,Tt+=H*Yi,ze+=H*yi,Ke+=H*Hi,at+=H*ir,rt+=H*jo,it+=H*Or,dt+=H*Ao,kn+=H*Do,$t+=H*Io,xt+=H*ss,cn+=H*Zs,zn+=H*Qs,ui+=H*Js,Le+=38*Ct,qe+=38*sn,ot+=38*Tt,ft+=38*ze,Bt+=38*Ke,en+=38*at,We+=38*rt,et+=38*it,pt+=38*dt,Ft+=38*kn,St+=38*$t,xn+=38*xt,An+=38*cn,mn+=38*zn,wt+=38*ui,Y=1,H=Le+Y+65535,Y=Math.floor(H/65536),Le=H-65536*Y,H=qe+Y+65535,Y=Math.floor(H/65536),qe=H-65536*Y,H=ot+Y+65535,Y=Math.floor(H/65536),ot=H-65536*Y,H=ft+Y+65535,Y=Math.floor(H/65536),ft=H-65536*Y,H=Bt+Y+65535,Y=Math.floor(H/65536),Bt=H-65536*Y,H=en+Y+65535,Y=Math.floor(H/65536),en=H-65536*Y,H=We+Y+65535,Y=Math.floor(H/65536),We=H-65536*Y,H=et+Y+65535,Y=Math.floor(H/65536),et=H-65536*Y,H=pt+Y+65535,Y=Math.floor(H/65536),pt=H-65536*Y,H=Ft+Y+65535,Y=Math.floor(H/65536),Ft=H-65536*Y,H=St+Y+65535,Y=Math.floor(H/65536),St=H-65536*Y,H=xn+Y+65535,Y=Math.floor(H/65536),xn=H-65536*Y,H=An+Y+65535,Y=Math.floor(H/65536),An=H-65536*Y,H=mn+Y+65535,Y=Math.floor(H/65536),mn=H-65536*Y,H=wt+Y+65535,Y=Math.floor(H/65536),wt=H-65536*Y,H=Mt+Y+65535,Y=Math.floor(H/65536),Mt=H-65536*Y,Le+=Y-1+37*(Y-1),Y=1,H=Le+Y+65535,Y=Math.floor(H/65536),Le=H-65536*Y,H=qe+Y+65535,Y=Math.floor(H/65536),qe=H-65536*Y,H=ot+Y+65535,Y=Math.floor(H/65536),ot=H-65536*Y,H=ft+Y+65535,Y=Math.floor(H/65536),ft=H-65536*Y,H=Bt+Y+65535,Y=Math.floor(H/65536),Bt=H-65536*Y,H=en+Y+65535,Y=Math.floor(H/65536),en=H-65536*Y,H=We+Y+65535,Y=Math.floor(H/65536),We=H-65536*Y,H=et+Y+65535,Y=Math.floor(H/65536),et=H-65536*Y,H=pt+Y+65535,Y=Math.floor(H/65536),pt=H-65536*Y,H=Ft+Y+65535,Y=Math.floor(H/65536),Ft=H-65536*Y,H=St+Y+65535,Y=Math.floor(H/65536),St=H-65536*Y,H=xn+Y+65535,Y=Math.floor(H/65536),xn=H-65536*Y,H=An+Y+65535,Y=Math.floor(H/65536),An=H-65536*Y,H=mn+Y+65535,Y=Math.floor(H/65536),mn=H-65536*Y,H=wt+Y+65535,Y=Math.floor(H/65536),wt=H-65536*Y,H=Mt+Y+65535,Y=Math.floor(H/65536),Mt=H-65536*Y,Le+=Y-1+37*(Y-1),ne[0]=Le,ne[1]=qe,ne[2]=ot,ne[3]=ft,ne[4]=Bt,ne[5]=en,ne[6]=We,ne[7]=et,ne[8]=pt,ne[9]=Ft,ne[10]=St,ne[11]=xn,ne[12]=An,ne[13]=mn,ne[14]=wt,ne[15]=Mt}function A(ne,de){C(ne,de,de)}function I(ne,de){var he,H=ke();for(he=0;he<16;he++)H[he]=de[he];for(he=253;he>=0;he--)A(H,H),he!==2&&he!==4&&C(H,H,de);for(he=0;he<16;he++)ne[he]=H[he]}function T(ne,de){var he,H=ke();for(he=0;he<16;he++)H[he]=de[he];for(he=250;he>=0;he--)A(H,H),he!==1&&C(H,H,de);for(he=0;he<16;he++)ne[he]=H[he]}function M(ne,de,he){var H,Y,Le=new Uint8Array(32),qe=new Float64Array(80),ot=ke(),ft=ke(),Bt=ke(),en=ke(),We=ke(),et=ke();for(Y=0;Y<31;Y++)Le[Y]=de[Y];for(Le[31]=127&de[31]|64,Le[0]&=248,G(qe,he),Y=0;Y<16;Y++)ft[Y]=qe[Y],en[Y]=ot[Y]=Bt[Y]=0;for(ot[0]=en[0]=1,Y=254;Y>=0;--Y)H=Le[Y>>>3]>>>(7&Y)&1,D(ot,ft,H),D(Bt,en,H),Z(We,ot,Bt),K(ot,ot,Bt),Z(Bt,ft,en),K(ft,ft,en),A(en,We),A(et,ot),C(ot,Bt,ot),C(Bt,ft,We),Z(We,ot,Bt),K(ot,ot,Bt),A(ft,ot),K(Bt,en,et),C(ot,Bt,Fe),Z(ot,ot,en),C(Bt,Bt,ot),C(ot,en,et),C(en,ft,qe),A(ft,We),D(ot,ft,H),D(Bt,en,H);for(Y=0;Y<16;Y++)qe[Y+16]=ot[Y],qe[Y+32]=Bt[Y],qe[Y+48]=ft[Y],qe[Y+64]=en[Y];var pt=qe.subarray(32),Ft=qe.subarray(16);return I(pt,pt),C(Ft,Ft,pt),V(ne,Ft),0}function F(ne,de){return M(ne,de,ie)}function q(ne,de){return B(de,32),F(ne,de)}function $(ne,de,he){var H=new Uint8Array(32);return M(H,he,de),u(ne,W,H,Ht)}function te(ne,de,he,H,Y,Le){var qe=new Uint8Array(32);return $(qe,Y,Le),Rn(ne,de,he,H,qe)}function se(ne,de,he,H,Y,Le){var qe=new Uint8Array(32);return $(qe,Y,Le),Zn(ne,de,he,H,qe)}function ue(ne,de,he,H){for(var Y,Le,qe,ot,ft,Bt,en,We,et,pt,Ft,St,xn,An,mn,wt,Mt,Ct,sn,Tt,ze,Ke,at,rt,it,dt,kn=new Int32Array(16),$t=new Int32Array(16),xt=ne[0],cn=ne[1],zn=ne[2],ui=ne[3],Ot=ne[4],gi=ne[5],Xi=ne[6],Yi=ne[7],yi=de[0],Hi=de[1],ir=de[2],jo=de[3],Or=de[4],Ao=de[5],Do=de[6],Io=de[7],ss=0;H>=128;){for(sn=0;sn<16;sn++)Tt=8*sn+ss,kn[sn]=he[Tt+0]<<24|he[Tt+1]<<16|he[Tt+2]<<8|he[Tt+3],$t[sn]=he[Tt+4]<<24|he[Tt+5]<<16|he[Tt+6]<<8|he[Tt+7];for(sn=0;sn<80;sn++)if(Y=xt,Le=cn,qe=zn,ot=ui,ft=Ot,Bt=gi,en=Xi,We=Yi,et=yi,pt=Hi,Ft=ir,St=jo,xn=Or,An=Ao,mn=Do,wt=Io,ze=Yi,Ke=Io,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=(Ot>>>14|Or<<18)^(Ot>>>18|Or<<14)^(Or>>>9|Ot<<23),Ke=(Or>>>14|Ot<<18)^(Or>>>18|Ot<<14)^(Ot>>>9|Or<<23),at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,ze=Ot&gi^~Ot&Xi,Ke=Or&Ao^~Or&Do,at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,ze=Ji[2*sn],Ke=Ji[2*sn+1],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,ze=kn[sn%16],Ke=$t[sn%16],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,Mt=65535&it|dt<<16,Ct=65535&at|rt<<16,ze=Mt,Ke=Ct,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=(xt>>>28|yi<<4)^(yi>>>2|xt<<30)^(yi>>>7|xt<<25),Ke=(yi>>>28|xt<<4)^(xt>>>2|yi<<30)^(xt>>>7|yi<<25),at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,ze=xt&cn^xt&zn^cn&zn,Ke=yi&Hi^yi&ir^Hi&ir,at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,We=65535&it|dt<<16,wt=65535&at|rt<<16,ze=ot,Ke=St,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=Mt,Ke=Ct,at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ot=65535&it|dt<<16,St=65535&at|rt<<16,cn=Y,zn=Le,ui=qe,Ot=ot,gi=ft,Xi=Bt,Yi=en,xt=We,Hi=et,ir=pt,jo=Ft,Or=St,Ao=xn,Do=An,Io=mn,yi=wt,sn%16===15)for(Tt=0;Tt<16;Tt++)ze=kn[Tt],Ke=$t[Tt],at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=kn[(Tt+9)%16],Ke=$t[(Tt+9)%16],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,Mt=kn[(Tt+1)%16],Ct=$t[(Tt+1)%16],ze=(Mt>>>1|Ct<<31)^(Mt>>>8|Ct<<24)^Mt>>>7,Ke=(Ct>>>1|Mt<<31)^(Ct>>>8|Mt<<24)^(Ct>>>7|Mt<<25),at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,Mt=kn[(Tt+14)%16],Ct=$t[(Tt+14)%16],ze=(Mt>>>19|Ct<<13)^(Ct>>>29|Mt<<3)^Mt>>>6,Ke=(Ct>>>19|Mt<<13)^(Mt>>>29|Ct<<3)^(Ct>>>6|Mt<<26),at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,kn[Tt]=65535&it|dt<<16,$t[Tt]=65535&at|rt<<16;ze=xt,Ke=yi,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=ne[0],Ke=de[0],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ne[0]=xt=65535&it|dt<<16,de[0]=yi=65535&at|rt<<16,ze=cn,Ke=Hi,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=ne[1],Ke=de[1],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ne[1]=cn=65535&it|dt<<16,de[1]=Hi=65535&at|rt<<16,ze=zn,Ke=ir,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=ne[2],Ke=de[2],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ne[2]=zn=65535&it|dt<<16,de[2]=ir=65535&at|rt<<16,ze=ui,Ke=jo,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=ne[3],Ke=de[3],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ne[3]=ui=65535&it|dt<<16,de[3]=jo=65535&at|rt<<16,ze=Ot,Ke=Or,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=ne[4],Ke=de[4],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ne[4]=Ot=65535&it|dt<<16,de[4]=Or=65535&at|rt<<16,ze=gi,Ke=Ao,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=ne[5],Ke=de[5],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ne[5]=gi=65535&it|dt<<16,de[5]=Ao=65535&at|rt<<16,ze=Xi,Ke=Do,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=ne[6],Ke=de[6],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ne[6]=Xi=65535&it|dt<<16,de[6]=Do=65535&at|rt<<16,ze=Yi,Ke=Io,at=65535&Ke,rt=Ke>>>16,it=65535&ze,dt=ze>>>16,ze=ne[7],Ke=de[7],at+=65535&Ke,rt+=Ke>>>16,it+=65535&ze,dt+=ze>>>16,rt+=at>>>16,it+=rt>>>16,dt+=it>>>16,ne[7]=Yi=65535&it|dt<<16,de[7]=Io=65535&at|rt<<16,ss+=128,H-=128}return H}function Se(ne,de,he){var H,Y=new Int32Array(8),Le=new Int32Array(8),qe=new Uint8Array(256),ot=he;for(Y[0]=1779033703,Y[1]=3144134277,Y[2]=1013904242,Y[3]=2773480762,Y[4]=1359893119,Y[5]=2600822924,Y[6]=528734635,Y[7]=1541459225,Le[0]=4089235720,Le[1]=2227873595,Le[2]=4271175723,Le[3]=1595750129,Le[4]=2917565137,Le[5]=725511199,Le[6]=4215389547,Le[7]=327033209,ue(Y,Le,de,he),he%=128,H=0;H<he;H++)qe[H]=de[ot-he+H];for(qe[he]=128,he=256-128*(he<112?1:0),qe[he-9]=0,r(qe,he-8,ot/536870912|0,ot<<3),ue(Y,Le,qe,he),H=0;H<8;H++)r(ne,8*H,Y[H],Le[H]);return 0}function Ie(ne,de){var he=ke(),H=ke(),Y=ke(),Le=ke(),qe=ke(),ot=ke(),ft=ke(),Bt=ke(),en=ke();K(he,ne[1],ne[0]),K(en,de[1],de[0]),C(he,he,en),Z(H,ne[0],ne[1]),Z(en,de[0],de[1]),C(H,H,en),C(Y,ne[3],de[3]),C(Y,Y,gt),C(Le,ne[2],de[2]),Z(Le,Le,Le),K(qe,H,he),K(ot,Le,Y),Z(ft,Le,Y),Z(Bt,H,he),C(ne[0],qe,ot),C(ne[1],Bt,ft),C(ne[2],ft,ot),C(ne[3],qe,Bt)}function Be(ne,de,he){var H;for(H=0;H<4;H++)D(ne[H],de[H],he)}function ce(ne,de){var he=ke(),H=ke(),Y=ke();I(Y,de[2]),C(he,de[0],Y),C(H,de[1],Y),V(ne,H),ne[31]^=R(he)<<7}function pe(ne,de,he){var H,Y;for(k(ne[0],ye),k(ne[1],Me),k(ne[2],Me),k(ne[3],ye),Y=255;Y>=0;--Y)H=he[Y/8|0]>>(7&Y)&1,Be(ne,de,H),Ie(de,ne),Ie(ne,ne),Be(ne,de,H)}function re(ne,de){var he=[ke(),ke(),ke(),ke()];k(he[0],Ut),k(he[1],Cn),k(he[2],Me),C(he[3],Ut,Cn),pe(ne,he,de)}function ae(ne,de,he){var H,Y=new Uint8Array(64),Le=[ke(),ke(),ke(),ke()];for(he||B(de,32),Se(Y,de,32),Y[0]&=248,Y[31]&=127,Y[31]|=64,re(Le,Y),ce(ne,Le),H=0;H<32;H++)de[H+32]=ne[H];return 0}function fe(ne,de){var he,H,Y,Le;for(H=63;H>=32;--H){for(he=0,Y=H-32,Le=H-12;Y<Le;++Y)de[Y]+=he-16*de[H]*mr[Y-(H-32)],he=de[Y]+128>>8,de[Y]-=256*he;de[Y]+=he,de[H]=0}for(he=0,Y=0;Y<32;Y++)de[Y]+=he-(de[31]>>4)*mr[Y],he=de[Y]>>8,de[Y]&=255;for(Y=0;Y<32;Y++)de[Y]-=he*mr[Y];for(H=0;H<32;H++)de[H+1]+=de[H]>>8,ne[H]=255&de[H]}function De(ne){var de,he=new Float64Array(64);for(de=0;de<64;de++)he[de]=ne[de];for(de=0;de<64;de++)ne[de]=0;fe(ne,he)}function be(ne,de,he,H){var Y,Le,qe=new Uint8Array(64),ot=new Uint8Array(64),ft=new Uint8Array(64),Bt=new Float64Array(64),en=[ke(),ke(),ke(),ke()];Se(qe,H,32),qe[0]&=248,qe[31]&=127,qe[31]|=64;var We=he+64;for(Y=0;Y<he;Y++)ne[64+Y]=de[Y];for(Y=0;Y<32;Y++)ne[32+Y]=qe[32+Y];for(Se(ft,ne.subarray(32),he+32),De(ft),re(en,ft),ce(ne,en),Y=32;Y<64;Y++)ne[Y]=H[Y];for(Se(ot,ne,he+64),De(ot),Y=0;Y<64;Y++)Bt[Y]=0;for(Y=0;Y<32;Y++)Bt[Y]=ft[Y];for(Y=0;Y<32;Y++)for(Le=0;Le<32;Le++)Bt[Y+Le]+=ot[Y]*qe[Le];return fe(ne.subarray(32),Bt),We}function Ae(ne,de){var he=ke(),H=ke(),Y=ke(),Le=ke(),qe=ke(),ot=ke(),ft=ke();return k(ne[2],Me),G(ne[1],de),A(Y,ne[1]),C(Le,Y,tt),K(Y,Y,ne[2]),Z(Le,ne[2],Le),A(qe,Le),A(ot,qe),C(ft,ot,qe),C(he,ft,Y),C(he,he,Le),T(he,he),C(he,he,Y),C(he,he,Le),C(he,he,Le),C(ne[0],he,Le),A(H,ne[0]),C(H,H,Le),O(H,Y)&&C(ne[0],ne[0],jt),A(H,ne[0]),C(H,H,Le),O(H,Y)?-1:(R(ne[0])===de[31]>>7&&K(ne[0],ye,ne[0]),C(ne[3],ne[0],ne[1]),0)}function Ce(ne,de,he,H){var Y,Le,qe=new Uint8Array(32),ot=new Uint8Array(64),ft=[ke(),ke(),ke(),ke()],Bt=[ke(),ke(),ke(),ke()];if(Le=-1,he<64||Ae(Bt,H))return-1;for(Y=0;Y<he;Y++)ne[Y]=de[Y];for(Y=0;Y<32;Y++)ne[Y+32]=H[Y];if(Se(ot,ne,he),De(ot),pe(ft,Bt,ot),re(Bt,de.subarray(32)),Ie(ft,Bt),ce(qe,ft),he-=64,a(de,0,qe,0)){for(Y=0;Y<he;Y++)ne[Y]=0;return-1}for(Y=0;Y<he;Y++)ne[Y]=de[Y+64];return Le=he}function we(ne,de){if(ne.length!==Er)throw new Error("bad key size");if(de.length!==Ma)throw new Error("bad nonce size")}function ve(ne,de){if(ne.length!==nr)throw new Error("bad public key size");if(de.length!==Ls)throw new Error("bad secret key size")}function xe(){var ne,de;for(de=0;de<arguments.length;de++)if((ne=Object.prototype.toString.call(arguments[de]))!=="[object Uint8Array]")throw new TypeError("unexpected type "+ne+", use Uint8Array")}function Te(ne){for(var de=0;de<ne.length;de++)ne[de]=0}var ke=function(ne){var de,he=new Float64Array(16);if(ne)for(de=0;de<ne.length;de++)he[de]=ne[de];return he},B=function(){throw new Error("no PRNG")},W=new Uint8Array(16),ie=new Uint8Array(32);ie[0]=9;var ye=ke(),Me=ke([1]),Fe=ke([56129,1]),tt=ke([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),gt=ke([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Ut=ke([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Cn=ke([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),jt=ke([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),Ht=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),Kr=function(ne){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var de,he,H,Y,Le,qe,ot,ft;de=255&ne[0]|(255&ne[1])<<8,this.r[0]=8191&de,he=255&ne[2]|(255&ne[3])<<8,this.r[1]=8191&(de>>>13|he<<3),H=255&ne[4]|(255&ne[5])<<8,this.r[2]=7939&(he>>>10|H<<6),Y=255&ne[6]|(255&ne[7])<<8,this.r[3]=8191&(H>>>7|Y<<9),Le=255&ne[8]|(255&ne[9])<<8,this.r[4]=255&(Y>>>4|Le<<12),this.r[5]=Le>>>1&8190,qe=255&ne[10]|(255&ne[11])<<8,this.r[6]=8191&(Le>>>14|qe<<2),ot=255&ne[12]|(255&ne[13])<<8,this.r[7]=8065&(qe>>>11|ot<<5),ft=255&ne[14]|(255&ne[15])<<8,this.r[8]=8191&(ot>>>8|ft<<8),this.r[9]=ft>>>5&127,this.pad[0]=255&ne[16]|(255&ne[17])<<8,this.pad[1]=255&ne[18]|(255&ne[19])<<8,this.pad[2]=255&ne[20]|(255&ne[21])<<8,this.pad[3]=255&ne[22]|(255&ne[23])<<8,this.pad[4]=255&ne[24]|(255&ne[25])<<8,this.pad[5]=255&ne[26]|(255&ne[27])<<8,this.pad[6]=255&ne[28]|(255&ne[29])<<8,this.pad[7]=255&ne[30]|(255&ne[31])<<8};Kr.prototype.blocks=function(ne,de,he){for(var H,Y,Le,qe,ot,ft,Bt,en,We,et,pt,Ft,St,xn,An,mn,wt,Mt,Ct,sn=this.fin?0:2048,Tt=this.h[0],ze=this.h[1],Ke=this.h[2],at=this.h[3],rt=this.h[4],it=this.h[5],dt=this.h[6],kn=this.h[7],$t=this.h[8],xt=this.h[9],cn=this.r[0],zn=this.r[1],ui=this.r[2],Ot=this.r[3],gi=this.r[4],Xi=this.r[5],Yi=this.r[6],yi=this.r[7],Hi=this.r[8],ir=this.r[9];he>=16;)H=255&ne[de+0]|(255&ne[de+1])<<8,Tt+=8191&H,Y=255&ne[de+2]|(255&ne[de+3])<<8,ze+=8191&(H>>>13|Y<<3),Le=255&ne[de+4]|(255&ne[de+5])<<8,Ke+=8191&(Y>>>10|Le<<6),qe=255&ne[de+6]|(255&ne[de+7])<<8,at+=8191&(Le>>>7|qe<<9),ot=255&ne[de+8]|(255&ne[de+9])<<8,rt+=8191&(qe>>>4|ot<<12),it+=ot>>>1&8191,ft=255&ne[de+10]|(255&ne[de+11])<<8,dt+=8191&(ot>>>14|ft<<2),Bt=255&ne[de+12]|(255&ne[de+13])<<8,kn+=8191&(ft>>>11|Bt<<5),en=255&ne[de+14]|(255&ne[de+15])<<8,$t+=8191&(Bt>>>8|en<<8),xt+=en>>>5|sn,We=0,et=We,et+=Tt*cn,et+=ze*(5*ir),et+=Ke*(5*Hi),et+=at*(5*yi),et+=rt*(5*Yi),We=et>>>13,et&=8191,et+=it*(5*Xi),et+=dt*(5*gi),et+=kn*(5*Ot),et+=$t*(5*ui),et+=xt*(5*zn),We+=et>>>13,et&=8191,pt=We,pt+=Tt*zn,pt+=ze*cn,pt+=Ke*(5*ir),pt+=at*(5*Hi),pt+=rt*(5*yi),We=pt>>>13,pt&=8191,pt+=it*(5*Yi),pt+=dt*(5*Xi),pt+=kn*(5*gi),pt+=$t*(5*Ot),pt+=xt*(5*ui),We+=pt>>>13,pt&=8191,Ft=We,Ft+=Tt*ui,Ft+=ze*zn,Ft+=Ke*cn,Ft+=at*(5*ir),Ft+=rt*(5*Hi),We=Ft>>>13,Ft&=8191,Ft+=it*(5*yi),Ft+=dt*(5*Yi),Ft+=kn*(5*Xi),Ft+=$t*(5*gi),Ft+=xt*(5*Ot),We+=Ft>>>13,Ft&=8191,St=We,St+=Tt*Ot,St+=ze*ui,St+=Ke*zn,St+=at*cn,St+=rt*(5*ir),We=St>>>13,St&=8191,St+=it*(5*Hi),St+=dt*(5*yi),St+=kn*(5*Yi),St+=$t*(5*Xi),St+=xt*(5*gi),We+=St>>>13,St&=8191,xn=We,xn+=Tt*gi,xn+=ze*Ot,xn+=Ke*ui,xn+=at*zn,xn+=rt*cn,We=xn>>>13,xn&=8191,xn+=it*(5*ir),xn+=dt*(5*Hi),xn+=kn*(5*yi),xn+=$t*(5*Yi),xn+=xt*(5*Xi),We+=xn>>>13,xn&=8191,An=We,An+=Tt*Xi,An+=ze*gi,An+=Ke*Ot,An+=at*ui,An+=rt*zn,We=An>>>13,An&=8191,An+=it*cn,An+=dt*(5*ir),An+=kn*(5*Hi),An+=$t*(5*yi),An+=xt*(5*Yi),We+=An>>>13,An&=8191,mn=We,mn+=Tt*Yi,mn+=ze*Xi,mn+=Ke*gi,mn+=at*Ot,mn+=rt*ui,We=mn>>>13,mn&=8191,mn+=it*zn,mn+=dt*cn,mn+=kn*(5*ir),mn+=$t*(5*Hi),mn+=xt*(5*yi),We+=mn>>>13,mn&=8191,wt=We,wt+=Tt*yi,wt+=ze*Yi,wt+=Ke*Xi,wt+=at*gi,wt+=rt*Ot,We=wt>>>13,wt&=8191,wt+=it*ui,wt+=dt*zn,wt+=kn*cn,wt+=$t*(5*ir),wt+=xt*(5*Hi),We+=wt>>>13,wt&=8191,Mt=We,Mt+=Tt*Hi,Mt+=ze*yi,Mt+=Ke*Yi,Mt+=at*Xi,Mt+=rt*gi,We=Mt>>>13,Mt&=8191,Mt+=it*Ot,Mt+=dt*ui,Mt+=kn*zn,Mt+=$t*cn,Mt+=xt*(5*ir),We+=Mt>>>13,Mt&=8191,Ct=We,Ct+=Tt*ir,Ct+=ze*Hi,Ct+=Ke*yi,Ct+=at*Yi,Ct+=rt*Xi,We=Ct>>>13,Ct&=8191,Ct+=it*gi,Ct+=dt*Ot,Ct+=kn*ui,Ct+=$t*zn,Ct+=xt*cn,We+=Ct>>>13,Ct&=8191,We=(We<<2)+We|0,We=We+et|0,et=8191&We,We>>>=13,pt+=We,Tt=et,ze=pt,Ke=Ft,at=St,rt=xn,it=An,dt=mn,kn=wt,$t=Mt,xt=Ct,de+=16,he-=16;this.h[0]=Tt,this.h[1]=ze,this.h[2]=Ke,this.h[3]=at,this.h[4]=rt,this.h[5]=it,this.h[6]=dt,this.h[7]=kn,this.h[8]=$t,this.h[9]=xt},Kr.prototype.finish=function(ne,de){var he,H,Y,Le,qe=new Uint16Array(10);if(this.leftover){for(Le=this.leftover,this.buffer[Le++]=1;Le<16;Le++)this.buffer[Le]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(he=this.h[1]>>>13,this.h[1]&=8191,Le=2;Le<10;Le++)this.h[Le]+=he,he=this.h[Le]>>>13,this.h[Le]&=8191;for(this.h[0]+=5*he,he=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=he,he=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=he,qe[0]=this.h[0]+5,he=qe[0]>>>13,qe[0]&=8191,Le=1;Le<10;Le++)qe[Le]=this.h[Le]+he,he=qe[Le]>>>13,qe[Le]&=8191;for(qe[9]-=8192,H=(1^he)-1,Le=0;Le<10;Le++)qe[Le]&=H;for(H=~H,Le=0;Le<10;Le++)this.h[Le]=this.h[Le]&H|qe[Le];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),Y=this.h[0]+this.pad[0],this.h[0]=65535&Y,Le=1;Le<8;Le++)Y=(this.h[Le]+this.pad[Le]|0)+(Y>>>16)|0,this.h[Le]=65535&Y;ne[de+0]=this.h[0]>>>0&255,ne[de+1]=this.h[0]>>>8&255,ne[de+2]=this.h[1]>>>0&255,ne[de+3]=this.h[1]>>>8&255,ne[de+4]=this.h[2]>>>0&255,ne[de+5]=this.h[2]>>>8&255,ne[de+6]=this.h[3]>>>0&255,ne[de+7]=this.h[3]>>>8&255,ne[de+8]=this.h[4]>>>0&255,ne[de+9]=this.h[4]>>>8&255,ne[de+10]=this.h[5]>>>0&255,ne[de+11]=this.h[5]>>>8&255,ne[de+12]=this.h[6]>>>0&255,ne[de+13]=this.h[6]>>>8&255,ne[de+14]=this.h[7]>>>0&255,ne[de+15]=this.h[7]>>>8&255},Kr.prototype.update=function(ne,de,he){var H,Y;if(this.leftover){for(Y=16-this.leftover,Y>he&&(Y=he),H=0;H<Y;H++)this.buffer[this.leftover+H]=ne[de+H];if(he-=Y,de+=Y,this.leftover+=Y,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(he>=16&&(Y=he-he%16,this.blocks(ne,de,Y),de+=Y,he-=Y),he){for(H=0;H<he;H++)this.buffer[this.leftover+H]=ne[de+H];this.leftover+=he}};var Rn=S,Zn=x,Ji=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],mr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Er=32,Ma=24,gr=32,Vi=16,Ta=32,ji=32,nr=32,Ls=32,yr=32,Lr=Ma,oc=gr,Qn=Vi,er=64,Rl=32,kr=64,Rr=32,qd=64;i.lowlevel={crypto_core_hsalsa20:u,crypto_stream_xor:y,crypto_stream:p,crypto_stream_salsa20_xor:h,crypto_stream_salsa20:f,crypto_onetimeauth:v,crypto_onetimeauth_verify:b,crypto_verify_16:s,crypto_verify_32:a,crypto_secretbox:S,crypto_secretbox_open:x,crypto_scalarmult:M,crypto_scalarmult_base:F,crypto_box_beforenm:$,crypto_box_afternm:Rn,crypto_box:te,crypto_box_open:se,crypto_box_keypair:q,crypto_hash:Se,crypto_sign:be,crypto_sign_keypair:ae,crypto_sign_open:Ce,crypto_secretbox_KEYBYTES:Er,crypto_secretbox_NONCEBYTES:Ma,crypto_secretbox_ZEROBYTES:gr,crypto_secretbox_BOXZEROBYTES:Vi,crypto_scalarmult_BYTES:Ta,crypto_scalarmult_SCALARBYTES:ji,crypto_box_PUBLICKEYBYTES:nr,crypto_box_SECRETKEYBYTES:Ls,crypto_box_BEFORENMBYTES:yr,crypto_box_NONCEBYTES:Lr,crypto_box_ZEROBYTES:oc,crypto_box_BOXZEROBYTES:Qn,crypto_sign_BYTES:er,crypto_sign_PUBLICKEYBYTES:Rl,crypto_sign_SECRETKEYBYTES:kr,crypto_sign_SEEDBYTES:Rr,crypto_hash_BYTES:qd},i.util||(i.util={},i.util.decodeUTF8=i.util.encodeUTF8=i.util.encodeBase64=i.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),i.randomBytes=function(ne){var de=new Uint8Array(ne);return B(de,ne),de},i.secretbox=function(ne,de,he){xe(ne,de,he),we(he,de);for(var H=new Uint8Array(gr+ne.length),Y=new Uint8Array(H.length),Le=0;Le<ne.length;Le++)H[Le+gr]=ne[Le];return S(Y,H,H.length,de,he),Y.subarray(Vi)},i.secretbox.open=function(ne,de,he){xe(ne,de,he),we(he,de);for(var H=new Uint8Array(Vi+ne.length),Y=new Uint8Array(H.length),Le=0;Le<ne.length;Le++)H[Le+Vi]=ne[Le];return!(H.length<32)&&x(Y,H,H.length,de,he)===0&&Y.subarray(gr)},i.secretbox.keyLength=Er,i.secretbox.nonceLength=Ma,i.secretbox.overheadLength=Vi,i.scalarMult=function(ne,de){if(xe(ne,de),ne.length!==ji)throw new Error("bad n size");if(de.length!==Ta)throw new Error("bad p size");var he=new Uint8Array(Ta);return M(he,ne,de),he},i.scalarMult.base=function(ne){if(xe(ne),ne.length!==ji)throw new Error("bad n size");var de=new Uint8Array(Ta);return F(de,ne),de},i.scalarMult.scalarLength=ji,i.scalarMult.groupElementLength=Ta,i.box=function(ne,de,he,H){var Y=i.box.before(he,H);return i.secretbox(ne,de,Y)},i.box.before=function(ne,de){xe(ne,de),ve(ne,de);var he=new Uint8Array(yr);return $(he,ne,de),he},i.box.after=i.secretbox,i.box.open=function(ne,de,he,H){var Y=i.box.before(he,H);return i.secretbox.open(ne,de,Y)},i.box.open.after=i.secretbox.open,i.box.keyPair=function(){var ne=new Uint8Array(nr),de=new Uint8Array(Ls);return q(ne,de),{publicKey:ne,secretKey:de}},i.box.keyPair.fromSecretKey=function(ne){if(xe(ne),ne.length!==Ls)throw new Error("bad secret key size");var de=new Uint8Array(nr);return F(de,ne),{publicKey:de,secretKey:new Uint8Array(ne)}},i.box.publicKeyLength=nr,i.box.secretKeyLength=Ls,i.box.sharedKeyLength=yr,i.box.nonceLength=Lr,i.box.overheadLength=i.secretbox.overheadLength,i.sign=function(ne,de){if(xe(ne,de),de.length!==kr)throw new Error("bad secret key size");var he=new Uint8Array(er+ne.length);return be(he,ne,ne.length,de),he},i.sign.open=function(ne,de){if(arguments.length!==2)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(xe(ne,de),de.length!==Rl)throw new Error("bad public key size");var he=new Uint8Array(ne.length),H=Ce(he,ne,ne.length,de);if(H<0)return null;for(var Y=new Uint8Array(H),Le=0;Le<Y.length;Le++)Y[Le]=he[Le];return Y},i.sign.detached=function(ne,de){for(var he=i.sign(ne,de),H=new Uint8Array(er),Y=0;Y<H.length;Y++)H[Y]=he[Y];return H},i.sign.detached.verify=function(ne,de,he){if(xe(ne,de,he),de.length!==er)throw new Error("bad signature size");if(he.length!==Rl)throw new Error("bad public key size");var H,Y=new Uint8Array(er+ne.length),Le=new Uint8Array(er+ne.length);for(H=0;H<er;H++)Y[H]=de[H];for(H=0;H<ne.length;H++)Y[H+er]=ne[H];return Ce(Le,Y,Y.length,he)>=0},i.sign.keyPair=function(){var ne=new Uint8Array(Rl),de=new Uint8Array(kr);return ae(ne,de),{publicKey:ne,secretKey:de}},i.sign.keyPair.fromSecretKey=function(ne){if(xe(ne),ne.length!==kr)throw new Error("bad secret key size");for(var de=new Uint8Array(Rl),he=0;he<de.length;he++)de[he]=ne[32+he];return{publicKey:de,secretKey:new Uint8Array(ne)}},i.sign.keyPair.fromSeed=function(ne){if(xe(ne),ne.length!==Rr)throw new Error("bad seed size");for(var de=new Uint8Array(Rl),he=new Uint8Array(kr),H=0;H<32;H++)he[H]=ne[H];return ae(de,he,!0),{publicKey:de,secretKey:he}},i.sign.publicKeyLength=Rl,i.sign.secretKeyLength=kr,i.sign.seedLength=Rr,i.sign.signatureLength=er,i.hash=function(ne){xe(ne);var de=new Uint8Array(qd);return Se(de,ne,ne.length),de},i.hash.hashLength=qd,i.verify=function(ne,de){return xe(ne,de),ne.length!==0&&de.length!==0&&ne.length===de.length&&o(ne,0,de,0,ne.length)===0},i.setPRNG=function(ne){B=ne},(function(){var ne=typeof self<"u"?self.crypto||self.msCrypto:null;if(ne&&ne.getRandomValues){var de=65536;i.setPRNG(function(he,H){var Y,Le=new Uint8Array(H);for(Y=0;Y<H;Y+=de)ne.getRandomValues(Le.subarray(Y,Y+Math.min(H-Y,de)));for(Y=0;Y<H;Y++)he[Y]=Le[Y];Te(Le)})}else ne=e(470),ne&&ne.randomBytes&&i.setPRNG(function(he,H){var Y,Le=ne.randomBytes(H);for(Y=0;Y<H;Y++)he[Y]=Le[Y];Te(Le)})})()})(typeof n<"u"&&n.exports?n.exports:self.nacl=self.nacl||{})},function(n,t,e){(function(i){function r(s,a){function l(){if(!c){if(o("throwDeprecation"))throw new Error(a);o("traceDeprecation")?console.trace(a):console.warn(a),c=!0}return s.apply(this,arguments)}if(o("noDeprecation"))return s;var c=!1;return l}function o(s){try{if(!i.localStorage)return!1}catch{return!1}var a=i.localStorage[s];return a!=null&&String(a).toLowerCase()==="true"}n.exports=r}).call(t,e(48))},function(module,exports,__webpack_require__){function Context(){}var indexOf=__webpack_require__(433),Object_keys=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)t.push(e);return t},forEach=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e++)t(n[e],e,n)},defineProp=(function(){try{return Object.defineProperty({},"_",{}),function(n,t,e){Object.defineProperty(n,t,{writable:!0,enumerable:!1,configurable:!0,value:e})}}catch{return function(t,e,i){t[e]=i}}})(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(n){return this instanceof Script?void(this.code=n):new Script(n)};Script.prototype.runInContext=function(n){if(!(n instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var e=t.contentWindow,i=e.eval,r=e.execScript;!i&&r&&(r.call(e,"null"),i=e.eval),forEach(Object_keys(n),function(a){e[a]=n[a]}),forEach(globals,function(a){n[a]&&(e[a]=n[a])});var o=Object_keys(e),s=i.call(e,this.code);return forEach(Object_keys(e),function(a){(a in n||indexOf(o,a)===-1)&&(n[a]=e[a])}),forEach(globals,function(a){a in n||defineProp(n,a,e[a])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(n){var t=Script.createContext(n),e=this.runInContext(t);return forEach(Object_keys(t),function(i){n[i]=t[i]}),e},forEach(Object_keys(Script.prototype),function(n){exports[n]=Script[n]=function(t){var e=Script(t);return e[n].apply(e,[].slice.call(arguments,1))}}),exports.createScript=function(n){return exports.Script(n)},exports.createContext=Script.createContext=function(n){var t=new Context;return typeof n=="object"&&forEach(Object_keys(n),function(e){t[e]=n[e]}),t}},function(n,t){n.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(n,t){},function(n,t){},function(n,t){},function(n,t,e){e(189),n.exports=e(188)}])})});var e2e=me(s_=>{"use strict";var Kz=qB(),r_=KB(),Bge=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s_.Buffer=Qe;s_.SlowBuffer=oft;s_.INSPECT_MAX_BYTES=50;var tI=2147483647;s_.kMaxLength=tI;Qe.TYPED_ARRAY_SUPPORT=eft();!Qe.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function eft(){try{let n=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(n,t),n.foo()===42}catch{return!1}}Object.defineProperty(Qe.prototype,"parent",{enumerable:!0,get:function(){if(Qe.isBuffer(this))return this.buffer}});Object.defineProperty(Qe.prototype,"offset",{enumerable:!0,get:function(){if(Qe.isBuffer(this))return this.byteOffset}});function wf(n){if(n>tI)throw new RangeError('The value "'+n+'" is invalid for option "size"');let t=new Uint8Array(n);return Object.setPrototypeOf(t,Qe.prototype),t}function Qe(n,t,e){if(typeof n=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Zz(n)}return Hge(n,t,e)}Qe.poolSize=8192;function Hge(n,t,e){if(typeof n=="string")return nft(n,t);if(ArrayBuffer.isView(n))return ift(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(uh(n,ArrayBuffer)||n&&uh(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(uh(n,SharedArrayBuffer)||n&&uh(n.buffer,SharedArrayBuffer)))return Xz(n,t,e);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=n.valueOf&&n.valueOf();if(i!=null&&i!==n)return Qe.from(i,t,e);let r=rft(n);if(r)return r;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return Qe.from(n[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}Qe.from=function(n,t,e){return Hge(n,t,e)};Object.setPrototypeOf(Qe.prototype,Uint8Array.prototype);Object.setPrototypeOf(Qe,Uint8Array);function Wge(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function tft(n,t,e){return Wge(n),n<=0?wf(n):t!==void 0?typeof e=="string"?wf(n).fill(t,e):wf(n).fill(t):wf(n)}Qe.alloc=function(n,t,e){return tft(n,t,e)};function Zz(n){return Wge(n),wf(n<0?0:Qz(n)|0)}Qe.allocUnsafe=function(n){return Zz(n)};Qe.allocUnsafeSlow=function(n){return Zz(n)};function nft(n,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Qe.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let e=zge(n,t)|0,i=wf(e),r=i.write(n,t);return r!==e&&(i=i.slice(0,r)),i}function Gz(n){let t=n.length<0?0:Qz(n.length)|0,e=wf(t);for(let i=0;i<t;i+=1)e[i]=n[i]&255;return e}function ift(n){if(uh(n,Uint8Array)){let t=new Uint8Array(n);return Xz(t.buffer,t.byteOffset,t.byteLength)}return Gz(n)}function Xz(n,t,e){if(t<0||n.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let i;return t===void 0&&e===void 0?i=new Uint8Array(n):e===void 0?i=new Uint8Array(n,t):i=new Uint8Array(n,t,e),Object.setPrototypeOf(i,Qe.prototype),i}function rft(n){if(Qe.isBuffer(n)){let t=Qz(n.length)|0,e=wf(t);return e.length===0||n.copy(e,0,0,t),e}if(n.length!==void 0)return typeof n.length!="number"||eq(n.length)?wf(0):Gz(n);if(n.type==="Buffer"&&Array.isArray(n.data))return Gz(n.data)}function Qz(n){if(n>=tI)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+tI.toString(16)+" bytes");return n|0}function oft(n){return+n!=n&&(n=0),Qe.alloc(+n)}Qe.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==Qe.prototype};Qe.compare=function(t,e){if(uh(t,Uint8Array)&&(t=Qe.from(t,t.offset,t.byteLength)),uh(e,Uint8Array)&&(e=Qe.from(e,e.offset,e.byteLength)),!Qe.isBuffer(t)||!Qe.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let o=0,s=Math.min(i,r);o<s;++o)if(t[o]!==e[o]){i=t[o],r=e[o];break}return i<r?-1:r<i?1:0};Qe.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Qe.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Qe.alloc(0);let i;if(e===void 0)for(e=0,i=0;i<t.length;++i)e+=t[i].length;let r=Qe.allocUnsafe(e),o=0;for(i=0;i<t.length;++i){let s=t[i];if(uh(s,Uint8Array))o+s.length>r.length?(Qe.isBuffer(s)||(s=Qe.from(s)),s.copy(r,o)):Uint8Array.prototype.set.call(r,s,o);else if(Qe.isBuffer(s))s.copy(r,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return r};function zge(n,t){if(Qe.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||uh(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let e=n.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&e===0)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return Yz(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Jge(n).length;default:if(r)return i?-1:Yz(n).length;t=(""+t).toLowerCase(),r=!0}}Qe.byteLength=zge;function sft(n,t,e){let i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(n||(n="utf8");;)switch(n){case"hex":return gft(this,t,e);case"utf8":case"utf-8":return $ge(this,t,e);case"ascii":return pft(this,t,e);case"latin1":case"binary":return mft(this,t,e);case"base64":return hft(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yft(this,t,e);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),i=!0}}Qe.prototype._isBuffer=!0;function dg(n,t,e){let i=n[t];n[t]=n[e],n[e]=i}Qe.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)dg(this,e,e+1);return this};Qe.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)dg(this,e,e+3),dg(this,e+1,e+2);return this};Qe.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)dg(this,e,e+7),dg(this,e+1,e+6),dg(this,e+2,e+5),dg(this,e+3,e+4);return this};Qe.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?$ge(this,0,t):sft.apply(this,arguments)};Qe.prototype.toLocaleString=Qe.prototype.toString;Qe.prototype.equals=function(t){if(!Qe.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Qe.compare(this,t)===0};Qe.prototype.inspect=function(){let t="",e=s_.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"};Bge&&(Qe.prototype[Bge]=Qe.prototype.inspect);Qe.prototype.compare=function(t,e,i,r,o){if(uh(t,Uint8Array)&&(t=Qe.from(t,t.offset,t.byteLength)),!Qe.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),i===void 0&&(i=t?t.length:0),r===void 0&&(r=0),o===void 0&&(o=this.length),e<0||i>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=i)return 0;if(r>=o)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,r>>>=0,o>>>=0,this===t)return 0;let s=o-r,a=i-e,l=Math.min(s,a),c=this.slice(r,o),d=t.slice(e,i);for(let u=0;u<l;++u)if(c[u]!==d[u]){s=c[u],a=d[u];break}return s<a?-1:a<s?1:0};function qge(n,t,e,i,r){if(n.length===0)return-1;if(typeof e=="string"?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,eq(e)&&(e=r?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(r)return-1;e=n.length-1}else if(e<0)if(r)e=0;else return-1;if(typeof t=="string"&&(t=Qe.from(t,i)),Qe.isBuffer(t))return t.length===0?-1:Vge(n,t,e,i,r);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(n,t,e):Uint8Array.prototype.lastIndexOf.call(n,t,e):Vge(n,[t],e,i,r);throw new TypeError("val must be string, number or Buffer")}function Vge(n,t,e,i,r){let o=1,s=n.length,a=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(n.length<2||t.length<2)return-1;o=2,s/=2,a/=2,e/=2}function l(d,u){return o===1?d[u]:d.readUInt16BE(u*o)}let c;if(r){let d=-1;for(c=e;c<s;c++)if(l(n,c)===l(t,d===-1?0:c-d)){if(d===-1&&(d=c),c-d+1===a)return d*o}else d!==-1&&(c-=c-d),d=-1}else for(e+a>s&&(e=s-a),c=e;c>=0;c--){let d=!0;for(let u=0;u<a;u++)if(l(n,c+u)!==l(t,u)){d=!1;break}if(d)return c}return-1}Qe.prototype.includes=function(t,e,i){return this.indexOf(t,e,i)!==-1};Qe.prototype.indexOf=function(t,e,i){return qge(this,t,e,i,!0)};Qe.prototype.lastIndexOf=function(t,e,i){return qge(this,t,e,i,!1)};function aft(n,t,e,i){e=Number(e)||0;let r=n.length-e;i?(i=Number(i),i>r&&(i=r)):i=r;let o=t.length;i>o/2&&(i=o/2);let s;for(s=0;s<i;++s){let a=parseInt(t.substr(s*2,2),16);if(eq(a))return s;n[e+s]=a}return s}function lft(n,t,e,i){return nI(Yz(t,n.length-e),n,e,i)}function cft(n,t,e,i){return nI(wft(t),n,e,i)}function dft(n,t,e,i){return nI(Jge(t),n,e,i)}function uft(n,t,e,i){return nI(Sft(t,n.length-e),n,e,i)}Qe.prototype.write=function(t,e,i,r){if(e===void 0)r="utf8",i=this.length,e=0;else if(i===void 0&&typeof e=="string")r=e,i=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(i)?(i=i>>>0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-e;if((i===void 0||i>o)&&(i=o),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return aft(this,t,e,i);case"utf8":case"utf-8":return lft(this,t,e,i);case"ascii":case"latin1":case"binary":return cft(this,t,e,i);case"base64":return dft(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uft(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}};Qe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function hft(n,t,e){return t===0&&e===n.length?Kz.fromByteArray(n):Kz.fromByteArray(n.slice(t,e))}function $ge(n,t,e){e=Math.min(n.length,e);let i=[],r=t;for(;r<e;){let o=n[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=e){let l,c,d,u;switch(a){case 1:o<128&&(s=o);break;case 2:l=n[r+1],(l&192)===128&&(u=(o&31)<<6|l&63,u>127&&(s=u));break;case 3:l=n[r+1],c=n[r+2],(l&192)===128&&(c&192)===128&&(u=(o&15)<<12|(l&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:l=n[r+1],c=n[r+2],d=n[r+3],(l&192)===128&&(c&192)===128&&(d&192)===128&&(u=(o&15)<<18|(l&63)<<12|(c&63)<<6|d&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),r+=a}return fft(i)}var Uge=4096;function fft(n){let t=n.length;if(t<=Uge)return String.fromCharCode.apply(String,n);let e="",i=0;for(;i<t;)e+=String.fromCharCode.apply(String,n.slice(i,i+=Uge));return e}function pft(n,t,e){let i="";e=Math.min(n.length,e);for(let r=t;r<e;++r)i+=String.fromCharCode(n[r]&127);return i}function mft(n,t,e){let i="";e=Math.min(n.length,e);for(let r=t;r<e;++r)i+=String.fromCharCode(n[r]);return i}function gft(n,t,e){let i=n.length;(!t||t<0)&&(t=0),(!e||e<0||e>i)&&(e=i);let r="";for(let o=t;o<e;++o)r+=Cft[n[o]];return r}function yft(n,t,e){let i=n.slice(t,e),r="";for(let o=0;o<i.length-1;o+=2)r+=String.fromCharCode(i[o]+i[o+1]*256);return r}Qe.prototype.slice=function(t,e){let i=this.length;t=~~t,e=e===void 0?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,Qe.prototype),r};function Ps(n,t,e){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}Qe.prototype.readUintLE=Qe.prototype.readUIntLE=function(t,e,i){t=t>>>0,e=e>>>0,i||Ps(t,e,this.length);let r=this[t],o=1,s=0;for(;++s<e&&(o*=256);)r+=this[t+s]*o;return r};Qe.prototype.readUintBE=Qe.prototype.readUIntBE=function(t,e,i){t=t>>>0,e=e>>>0,i||Ps(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r};Qe.prototype.readUint8=Qe.prototype.readUInt8=function(t,e){return t=t>>>0,e||Ps(t,1,this.length),this[t]};Qe.prototype.readUint16LE=Qe.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||Ps(t,2,this.length),this[t]|this[t+1]<<8};Qe.prototype.readUint16BE=Qe.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||Ps(t,2,this.length),this[t]<<8|this[t+1]};Qe.prototype.readUint32LE=Qe.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||Ps(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Qe.prototype.readUint32BE=Qe.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||Ps(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Qe.prototype.readBigUInt64LE=E0(function(t){t=t>>>0,o_(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&vC(t,this.length-8);let r=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+i*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))});Qe.prototype.readBigUInt64BE=E0(function(t){t=t>>>0,o_(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&vC(t,this.length-8);let r=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i;return(BigInt(r)<<BigInt(32))+BigInt(o)});Qe.prototype.readIntLE=function(t,e,i){t=t>>>0,e=e>>>0,i||Ps(t,e,this.length);let r=this[t],o=1,s=0;for(;++s<e&&(o*=256);)r+=this[t+s]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r};Qe.prototype.readIntBE=function(t,e,i){t=t>>>0,e=e>>>0,i||Ps(t,e,this.length);let r=e,o=1,s=this[t+--r];for(;r>0&&(o*=256);)s+=this[t+--r]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*e)),s};Qe.prototype.readInt8=function(t,e){return t=t>>>0,e||Ps(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Qe.prototype.readInt16LE=function(t,e){t=t>>>0,e||Ps(t,2,this.length);let i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Qe.prototype.readInt16BE=function(t,e){t=t>>>0,e||Ps(t,2,this.length);let i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Qe.prototype.readInt32LE=function(t,e){return t=t>>>0,e||Ps(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Qe.prototype.readInt32BE=function(t,e){return t=t>>>0,e||Ps(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Qe.prototype.readBigInt64LE=E0(function(t){t=t>>>0,o_(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&vC(t,this.length-8);let r=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});Qe.prototype.readBigInt64BE=E0(function(t){t=t>>>0,o_(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&vC(t,this.length-8);let r=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i)});Qe.prototype.readFloatLE=function(t,e){return t=t>>>0,e||Ps(t,4,this.length),r_.read(this,t,!0,23,4)};Qe.prototype.readFloatBE=function(t,e){return t=t>>>0,e||Ps(t,4,this.length),r_.read(this,t,!1,23,4)};Qe.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||Ps(t,8,this.length),r_.read(this,t,!0,52,8)};Qe.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||Ps(t,8,this.length),r_.read(this,t,!1,52,8)};function Ll(n,t,e,i,r,o){if(!Qe.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(e+i>n.length)throw new RangeError("Index out of range")}Qe.prototype.writeUintLE=Qe.prototype.writeUIntLE=function(t,e,i,r){if(t=+t,e=e>>>0,i=i>>>0,!r){let a=Math.pow(2,8*i)-1;Ll(this,t,e,i,a,0)}let o=1,s=0;for(this[e]=t&255;++s<i&&(o*=256);)this[e+s]=t/o&255;return e+i};Qe.prototype.writeUintBE=Qe.prototype.writeUIntBE=function(t,e,i,r){if(t=+t,e=e>>>0,i=i>>>0,!r){let a=Math.pow(2,8*i)-1;Ll(this,t,e,i,a,0)}let o=i-1,s=1;for(this[e+o]=t&255;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+i};Qe.prototype.writeUint8=Qe.prototype.writeUInt8=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,1,255,0),this[e]=t&255,e+1};Qe.prototype.writeUint16LE=Qe.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2};Qe.prototype.writeUint16BE=Qe.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2};Qe.prototype.writeUint32LE=Qe.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4};Qe.prototype.writeUint32BE=Qe.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function Kge(n,t,e,i,r){Qge(t,i,r,n,e,7);let o=Number(t&BigInt(4294967295));n[e++]=o,o=o>>8,n[e++]=o,o=o>>8,n[e++]=o,o=o>>8,n[e++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return n[e++]=s,s=s>>8,n[e++]=s,s=s>>8,n[e++]=s,s=s>>8,n[e++]=s,e}function Gge(n,t,e,i,r){Qge(t,i,r,n,e,7);let o=Number(t&BigInt(4294967295));n[e+7]=o,o=o>>8,n[e+6]=o,o=o>>8,n[e+5]=o,o=o>>8,n[e+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return n[e+3]=s,s=s>>8,n[e+2]=s,s=s>>8,n[e+1]=s,s=s>>8,n[e]=s,e+8}Qe.prototype.writeBigUInt64LE=E0(function(t,e=0){return Kge(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});Qe.prototype.writeBigUInt64BE=E0(function(t,e=0){return Gge(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});Qe.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e=e>>>0,!r){let l=Math.pow(2,8*i-1);Ll(this,t,e,i,l-1,-l)}let o=0,s=1,a=0;for(this[e]=t&255;++o<i&&(s*=256);)t<0&&a===0&&this[e+o-1]!==0&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i};Qe.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e=e>>>0,!r){let l=Math.pow(2,8*i-1);Ll(this,t,e,i,l-1,-l)}let o=i-1,s=1,a=0;for(this[e+o]=t&255;--o>=0&&(s*=256);)t<0&&a===0&&this[e+o+1]!==0&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i};Qe.prototype.writeInt8=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1};Qe.prototype.writeInt16LE=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2};Qe.prototype.writeInt16BE=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2};Qe.prototype.writeInt32LE=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4};Qe.prototype.writeInt32BE=function(t,e,i){return t=+t,e=e>>>0,i||Ll(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};Qe.prototype.writeBigInt64LE=E0(function(t,e=0){return Kge(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Qe.prototype.writeBigInt64BE=E0(function(t,e=0){return Gge(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xge(n,t,e,i,r,o){if(e+i>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Yge(n,t,e,i,r){return t=+t,e=e>>>0,r||Xge(n,t,e,4,34028234663852886e22,-34028234663852886e22),r_.write(n,t,e,i,23,4),e+4}Qe.prototype.writeFloatLE=function(t,e,i){return Yge(this,t,e,!0,i)};Qe.prototype.writeFloatBE=function(t,e,i){return Yge(this,t,e,!1,i)};function Zge(n,t,e,i,r){return t=+t,e=e>>>0,r||Xge(n,t,e,8,17976931348623157e292,-17976931348623157e292),r_.write(n,t,e,i,52,8),e+8}Qe.prototype.writeDoubleLE=function(t,e,i){return Zge(this,t,e,!0,i)};Qe.prototype.writeDoubleBE=function(t,e,i){return Zge(this,t,e,!1,i)};Qe.prototype.copy=function(t,e,i,r){if(!Qe.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!r&&r!==0&&(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);let o=r-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),o};Qe.prototype.fill=function(t,e,i,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!Qe.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(t.length===1){let s=t.charCodeAt(0);(r==="utf8"&&s<128||r==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;e=e>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);let o;if(typeof t=="number")for(o=e;o<i;++o)this[o]=t;else{let s=Qe.isBuffer(t)?t:Qe.from(t,r),a=s.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<i-e;++o)this[o+e]=s[o%a]}return this};var i_={};function Jz(n,t,e){i_[n]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Jz("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Jz("ERR_INVALID_ARG_TYPE",function(n,t){return`The "${n}" argument must be of type number. Received type ${typeof t}`},TypeError);Jz("ERR_OUT_OF_RANGE",function(n,t,e){let i=`The value of "${n}" is out of range.`,r=e;return Number.isInteger(e)&&Math.abs(e)>2**32?r=jge(String(e)):typeof e=="bigint"&&(r=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(r=jge(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i},RangeError);function jge(n){let t="",e=n.length,i=n[0]==="-"?1:0;for(;e>=i+4;e-=3)t=`_${n.slice(e-3,e)}${t}`;return`${n.slice(0,e)}${t}`}function vft(n,t,e){o_(t,"offset"),(n[t]===void 0||n[t+e]===void 0)&&vC(t,n.length-(e+1))}function Qge(n,t,e,i,r,o){if(n>e||n<t){let s=typeof t=="bigint"?"n":"",a;throw o>3?t===0||t===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${t}${s} and <= ${e}${s}`,new i_.ERR_OUT_OF_RANGE("value",a,n)}vft(i,r,o)}function o_(n,t){if(typeof n!="number")throw new i_.ERR_INVALID_ARG_TYPE(t,"number",n)}function vC(n,t,e){throw Math.floor(n)!==n?(o_(n,e),new i_.ERR_OUT_OF_RANGE(e||"offset","an integer",n)):t<0?new i_.ERR_BUFFER_OUT_OF_BOUNDS:new i_.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,n)}var _ft=/[^+/0-9A-Za-z-_]/g;function bft(n){if(n=n.split("=")[0],n=n.trim().replace(_ft,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Yz(n,t){t=t||1/0;let e,i=n.length,r=null,o=[];for(let s=0;s<i;++s){if(e=n.charCodeAt(s),e>55295&&e<57344){if(!r){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),r=e;continue}e=(r-55296<<10|e-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function wft(n){let t=[];for(let e=0;e<n.length;++e)t.push(n.charCodeAt(e)&255);return t}function Sft(n,t){let e,i,r,o=[];for(let s=0;s<n.length&&!((t-=2)<0);++s)e=n.charCodeAt(s),i=e>>8,r=e%256,o.push(r),o.push(i);return o}function Jge(n){return Kz.toByteArray(bft(n))}function nI(n,t,e,i){let r;for(r=0;r<i&&!(r+e>=t.length||r>=n.length);++r)t[r+e]=n[r];return r}function uh(n,t){return n instanceof t||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===t.name}function eq(n){return n!==n}var Cft=(function(){let n="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){let i=e*16;for(let r=0;r<16;++r)t[i+r]=n[e]+n[r]}return t})();function E0(n){return typeof BigInt>"u"?xft:n}function xft(){throw new Error("BigInt not supported")}});var o2e=me((gln,r2e)=>{"use strict";var Xo=r2e.exports={},hh,fh;function tq(){throw new Error("setTimeout has not been defined")}function nq(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?hh=setTimeout:hh=tq}catch{hh=tq}try{typeof clearTimeout=="function"?fh=clearTimeout:fh=nq}catch{fh=nq}})();function t2e(n){if(hh===setTimeout)return setTimeout(n,0);if((hh===tq||!hh)&&setTimeout)return hh=setTimeout,setTimeout(n,0);try{return hh(n,0)}catch{try{return hh.call(null,n,0)}catch{return hh.call(this,n,0)}}}function kft(n){if(fh===clearTimeout)return clearTimeout(n);if((fh===nq||!fh)&&clearTimeout)return fh=clearTimeout,clearTimeout(n);try{return fh(n)}catch{try{return fh.call(null,n)}catch{return fh.call(this,n)}}}var Sf=[],a_=!1,ug,iI=-1;function Mft(){!a_||!ug||(a_=!1,ug.length?Sf=ug.concat(Sf):iI=-1,Sf.length&&n2e())}function n2e(){if(!a_){var n=t2e(Mft);a_=!0;for(var t=Sf.length;t;){for(ug=Sf,Sf=[];++iI<t;)ug&&ug[iI].run();iI=-1,t=Sf.length}ug=null,a_=!1,kft(n)}}Xo.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];Sf.push(new i2e(n,t)),Sf.length===1&&!a_&&t2e(n2e)};function i2e(n,t){this.fun=n,this.array=t}i2e.prototype.run=function(){this.fun.apply(null,this.array)};Xo.title="browser";Xo.browser=!0;Xo.env={};Xo.argv=[];Xo.version="";Xo.versions={};function Cf(){}Xo.on=Cf;Xo.addListener=Cf;Xo.once=Cf;Xo.off=Cf;Xo.removeListener=Cf;Xo.removeAllListeners=Cf;Xo.emit=Cf;Xo.prependListener=Cf;Xo.prependOnceListener=Cf;Xo.listeners=function(n){return[]};Xo.binding=function(n){throw new Error("process.binding is not supported")};Xo.cwd=function(){return"/"};Xo.chdir=function(n){throw new Error("process.chdir is not supported")};Xo.umask=function(){return 0}});var sI;function bC(){return sI}function $d(n){let t=sI;return sI=n,t}var oq=Symbol("NotFound");function hg(n){return n===oq||n?.name==="\u0275NotFound"}var ea=null,wC=!1,aI=1,W2e=null,as=Symbol("SIGNAL");function Yn(n){let t=ea;return ea=n,t}function kC(){return ea}var A0={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function D0(n){if(wC)throw new Error("");if(ea===null)return;ea.consumerOnSignalRead(n);let t=ea.producersTail;if(t!==void 0&&t.producer===n)return;let e,i=ea.recomputing;if(i&&(e=t!==void 0?t.nextProducer:ea.producers,e!==void 0&&e.producer===n)){ea.producersTail=e,e.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===ea&&(!i||q2e(r,ea)))return;let o=fg(ea),s={producer:n,consumer:ea,nextProducer:e,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};ea.producersTail=s,t!==void 0?t.nextProducer=s:ea.producers=s,o&&cq(n,s)}function sq(){aI++}function MC(n){if(!(fg(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===aI)){if(!n.producerMustRecompute(n)&&!F0(n)){xC(n);return}n.producerRecomputeValue(n),xC(n)}}function lI(n){if(n.consumers===void 0)return;let t=wC;wC=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let i=e.consumer;i.dirty||z2e(i)}}finally{wC=t}}function cI(){return ea?.consumerAllowSignalWrites!==!1}function z2e(n){n.dirty=!0,lI(n),n.consumerMarkedDirty?.(n)}function xC(n){n.dirty=!1,n.lastCleanEpoch=aI}function xf(n){return n&&aq(n),Yn(n)}function aq(n){n.producersTail=void 0,n.recomputing=!0}function I0(n,t){Yn(t),n&&lq(n)}function lq(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(fg(n))do e=dI(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function F0(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,i=t.lastReadVersion;if(i!==e.version||(MC(e),i!==e.version))return!0}return!1}function kf(n){if(fg(n)){let t=n.producers;for(;t!==void 0;)t=dI(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function cq(n,t){let e=n.consumersTail,i=fg(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)cq(r.producer,r)}function dI(n){let t=n.producer,e=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:t.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(t.consumers=i,!fg(t)){let o=t.producers;for(;o!==void 0;)o=dI(o)}return e}function fg(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function TC(n){W2e?.(n)}function q2e(n,t){let e=t.producersTail;if(e!==void 0){let i=t.producers;do{if(i===n)return!0;if(i===e)break;i=i.nextProducer}while(i!==void 0)}return!1}function EC(n,t){return Object.is(n,t)}function d_(n,t){let e=Object.create($2e);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(MC(e),D0(e),e.value===c_)throw e.error;return e.value};return i[as]=e,TC(e),i}var SC=Symbol("UNSET"),CC=Symbol("COMPUTING"),c_=Symbol("ERRORED"),$2e=Ge(le({},A0),{value:SC,dirty:!0,error:null,equal:EC,kind:"computed",producerMustRecompute(n){return n.value===SC||n.value===CC},producerRecomputeValue(n){if(n.value===CC)throw new Error("");let t=n.value;n.value=CC;let e=xf(n),i,r=!1;try{i=n.computation(),Yn(null),r=t!==SC&&t!==c_&&i!==c_&&n.equal(t,i)}catch(o){i=c_,n.error=o}finally{I0(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function K2e(){throw new Error}var dq=K2e;function uq(n){dq(n)}function uI(n){dq=n}var G2e=null;function hI(n,t){let e=Object.create(u_);e.value=n,t!==void 0&&(e.equal=t);let i=()=>hq(e);return i[as]=e,TC(e),[i,s=>pg(e,s),s=>fI(e,s)]}function hq(n){return D0(n),n.value}function pg(n,t){cI()||uq(n),n.equal(n.value,t)||(n.value=t,X2e(n))}function fI(n,t){cI()||uq(n),pg(n,t(n.value))}var u_=Ge(le({},A0),{equal:EC,value:void 0,kind:"signal"});function X2e(n){n.version++,sq(),lI(n),G2e?.(n)}function Ti(n){return typeof n=="function"}function mg(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var AC=mg(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function P0(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var qn=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Ti(i))try{i()}catch(o){t=o instanceof AC?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{fq(o)}catch(s){t=t??[],s instanceof AC?t=[...t,...s.errors]:t.push(s)}}if(t)throw new AC(t)}}add(t){var e;if(t&&t!==this)if(this.closed)fq(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&P0(e,t)}remove(t){let{_finalizers:e}=this;e&&P0(e,t),t instanceof n&&t._removeParent(this)}};qn.EMPTY=(()=>{let n=new qn;return n.closed=!0,n})();var pI=qn.EMPTY;function DC(n){return n instanceof qn||n&&"closed"in n&&Ti(n.remove)&&Ti(n.add)&&Ti(n.unsubscribe)}function fq(n){Ti(n)?n():n.unsubscribe()}var Kc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gg={setTimeout(n,t,...e){let{delegate:i}=gg;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=gg;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function IC(n){gg.setTimeout(()=>{let{onUnhandledError:t}=Kc;if(t)t(n);else throw n})}function h_(){}var pq=mI("C",void 0,void 0);function mq(n){return mI("E",void 0,n)}function gq(n){return mI("N",n,void 0)}function mI(n,t,e){return{kind:n,value:t,error:e}}var L0=null;function yg(n){if(Kc.useDeprecatedSynchronousErrorHandling){let t=!L0;if(t&&(L0={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=L0;if(L0=null,e)throw i}}else n()}function yq(n){Kc.useDeprecatedSynchronousErrorHandling&&L0&&(L0.errorThrown=!0,L0.error=n)}var R0=class extends qn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,DC(t)&&t.add(this)):this.destination=Q2e}static create(t,e,i){return new Gc(t,e,i)}next(t){this.isStopped?yI(gq(t),this):this._next(t)}error(t){this.isStopped?yI(mq(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?yI(pq,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Y2e=Function.prototype.bind;function gI(n,t){return Y2e.call(n,t)}var vI=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){FC(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){FC(i)}else FC(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){FC(e)}}},Gc=class extends R0{constructor(t,e,i){super();let r;if(Ti(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Kc.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&gI(t.next,o),error:t.error&&gI(t.error,o),complete:t.complete&&gI(t.complete,o)}):r=t}this.destination=new vI(r)}};function FC(n){Kc.useDeprecatedSynchronousErrorHandling?yq(n):IC(n)}function Z2e(n){throw n}function yI(n,t){let{onStoppedNotification:e}=Kc;e&&gg.setTimeout(()=>e(n,t))}var Q2e={closed:!0,next:h_,error:Z2e,complete:h_};var vg=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ea(n){return n}function _I(...n){return bI(n)}function bI(n){return n.length===0?Ea:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var jn=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=eye(e)?e:new Gc(e,i,r);return yg(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=vq(i),new i((r,o)=>{let s=new Gc({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[vg](){return this}pipe(...e){return bI(e)(this)}toPromise(e){return e=vq(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function vq(n){var t;return(t=n??Kc.Promise)!==null&&t!==void 0?t:Promise}function J2e(n){return n&&Ti(n.next)&&Ti(n.error)&&Ti(n.complete)}function eye(n){return n&&n instanceof R0||J2e(n)&&DC(n)}function wI(n){return Ti(n?.lift)}function hi(n){return t=>{if(wI(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ci(n,t,e,i,r){return new SI(n,t,e,i,r)}var SI=class extends R0{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function _g(){return hi((n,t)=>{let e=null;n._refCount++;let i=ci(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Mf=class extends jn{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,wI(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new qn;let e=this.getSubject();t.add(this.source.subscribe(ci(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=qn.EMPTY)}return t}refCount(){return _g()(this)}};var bg={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame,{delegate:i}=bg;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);let r=t(o=>{e=void 0,n(o)});return new qn(()=>e?.(r))},requestAnimationFrame(...n){let{delegate:t}=bg;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:t}=bg;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var _q=mg(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class n extends jn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new PC(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new _q}next(e){yg(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){yg(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){yg(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?pI:(this.currentObservers=null,o.push(e),new qn(()=>{this.currentObservers=null,P0(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new jn;return e.source=this,e}}return n.create=(t,e)=>new PC(t,e),n})(),PC=class extends Xe{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:pI}};var bi=class extends Xe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var f_={now(){return(f_.delegate||Date).now()},delegate:void 0};var Kd=class extends Xe{constructor(t=1/0,e=1/0,i=f_){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=e.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var LC=class extends qn{constructor(t,e){super()}schedule(t,e=0){return this}};var p_={setInterval(n,t,...e){let{delegate:i}=p_;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=p_;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Tf=class extends LC{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return p_.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&p_.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,P0(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var tye=1,CI,xI={};function bq(n){return n in xI?(delete xI[n],!0):!1}var wq={setImmediate(n){let t=tye++;return xI[t]=!0,CI||(CI=Promise.resolve()),CI.then(()=>bq(t)&&n()),t},clearImmediate(n){bq(n)}};var{setImmediate:nye,clearImmediate:iye}=wq,m_={setImmediate(...n){let{delegate:t}=m_;return(t?.setImmediate||nye)(...n)},clearImmediate(n){let{delegate:t}=m_;return(t?.clearImmediate||iye)(n)},delegate:void 0};var RC=class extends Tf{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return i!==null&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=m_.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);let{actions:o}=t;e!=null&&((r=o[o.length-1])===null||r===void 0?void 0:r.id)!==e&&(m_.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}};var wg=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};wg.now=f_.now;var Ef=class extends wg{constructor(t,e=wg.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var OC=class extends Ef{flush(t){this._active=!0;let e=this._scheduled;this._scheduled=void 0;let{actions:i}=this,r;t=t||i.shift();do if(r=t.execute(t.state,t.delay))break;while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}};var kI=new OC(RC);var O0=new Ef(Tf),Sq=O0;var NC=class extends Tf{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return i!==null&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=bg.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);let{actions:o}=t;e!=null&&e===t._scheduled&&((r=o[o.length-1])===null||r===void 0?void 0:r.id)!==e&&(bg.cancelAnimationFrame(e),t._scheduled=void 0)}};var BC=class extends Ef{flush(t){this._active=!0;let e;t?e=t.id:(e=this._scheduled,this._scheduled=void 0);let{actions:i}=this,r;t=t||i.shift();do if(r=t.execute(t.state,t.delay))break;while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}};var g_=new BC(NC);var ta=new jn(n=>n.complete());function VC(n){return n&&Ti(n.schedule)}function MI(n){return n[n.length-1]}function UC(n){return Ti(MI(n))?n.pop():void 0}function Gd(n){return VC(MI(n))?n.pop():void 0}function Cq(n,t){return typeof MI(n)=="number"?n.pop():t}function kq(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}function xq(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function N0(n){return this instanceof N0?(this.v=n,this):new N0(n)}function Mq(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(f){return function(p){return Promise.resolve(p).then(f,u)}}function a(f,p){i[f]&&(r[f]=function(y){return new Promise(function(v,b){o.push([f,y,v,b])>1||l(f,y)})},p&&(r[f]=p(r[f])))}function l(f,p){try{c(i[f](p))}catch(y){h(o[0][3],y)}}function c(f){f.value instanceof N0?Promise.resolve(f.value.v).then(d,u):h(o[0][2],f)}function d(f){l("next",f)}function u(f){l("throw",f)}function h(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Tq(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof xq=="function"?xq(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var jC=n=>n&&typeof n.length=="number"&&typeof n!="function";function HC(n){return Ti(n?.then)}function WC(n){return Ti(n[vg])}function zC(n){return Symbol.asyncIterator&&Ti(n?.[Symbol.asyncIterator])}function qC(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rye(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $C=rye();function KC(n){return Ti(n?.[$C])}function GC(n){return Mq(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield N0(e.read());if(r)return yield N0(void 0);yield yield N0(i)}}finally{e.releaseLock()}})}function XC(n){return Ti(n?.getReader)}function Gr(n){if(n instanceof jn)return n;if(n!=null){if(WC(n))return oye(n);if(jC(n))return sye(n);if(HC(n))return aye(n);if(zC(n))return Eq(n);if(KC(n))return lye(n);if(XC(n))return cye(n)}throw qC(n)}function oye(n){return new jn(t=>{let e=n[vg]();if(Ti(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sye(n){return new jn(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function aye(n){return new jn(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,IC)})}function lye(n){return new jn(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function Eq(n){return new jn(t=>{dye(n,t).catch(e=>t.error(e))})}function cye(n){return Eq(GC(n))}function dye(n,t){var e,i,r,o;return kq(this,void 0,void 0,function*(){try{for(e=Tq(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function rl(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function YC(n,t=0){return hi((e,i)=>{e.subscribe(ci(i,r=>rl(i,n,()=>i.next(r),t),()=>rl(i,n,()=>i.complete(),t),r=>rl(i,n,()=>i.error(r),t)))})}function ZC(n,t=0){return hi((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function Aq(n,t){return Gr(n).pipe(ZC(t),YC(t))}function Dq(n,t){return Gr(n).pipe(ZC(t),YC(t))}function Iq(n,t){return new jn(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function Fq(n,t){return new jn(e=>{let i;return rl(e,t,()=>{i=n[$C](),rl(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>Ti(i?.return)&&i.return()})}function QC(n,t){if(!n)throw new Error("Iterable cannot be null");return new jn(e=>{rl(e,t,()=>{let i=n[Symbol.asyncIterator]();rl(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Pq(n,t){return QC(GC(n),t)}function Lq(n,t){if(n!=null){if(WC(n))return Aq(n,t);if(jC(n))return Iq(n,t);if(HC(n))return Dq(n,t);if(zC(n))return QC(n,t);if(KC(n))return Fq(n,t);if(XC(n))return Pq(n,t)}throw qC(n)}function Xr(n,t){return t?Lq(n,t):Gr(n)}function Wt(...n){let t=Gd(n);return Xr(n,t)}function Af(n,t){let e=Ti(n)?n:()=>n,i=r=>r.error(e());return new jn(t?r=>t.schedule(i,0,r):i)}function ph(n){return!!n&&(n instanceof jn||Ti(n.lift)&&Ti(n.subscribe))}var Xc=mg(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Df(n,t){let e=typeof t=="object";return new Promise((i,r)=>{let o=new Gc({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{e?i(t.defaultValue):r(new Xc)}});n.subscribe(o)})}function Rq(n){return n instanceof Date&&!isNaN(n)}function Yt(n,t){return hi((e,i)=>{let r=0;e.subscribe(ci(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:uye}=Array;function hye(n,t){return uye(t)?n(...t):n(t)}function JC(n){return Yt(t=>hye(n,t))}var{isArray:fye}=Array,{getPrototypeOf:pye,prototype:mye,keys:gye}=Object;function ex(n){if(n.length===1){let t=n[0];if(fye(t))return{args:t,keys:null};if(yye(t)){let e=gye(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function yye(n){return n&&typeof n=="object"&&pye(n)===mye}function tx(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function mh(...n){let t=Gd(n),e=UC(n),{args:i,keys:r}=ex(n);if(i.length===0)return Xr([],t);let o=new jn(vye(i,t,r?s=>tx(r,s):Ea));return e?o.pipe(JC(e)):o}function vye(n,t,e=Ea){return i=>{Oq(t,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)Oq(t,()=>{let c=Xr(n[l],t),d=!1;c.subscribe(ci(i,u=>{o[l]=u,d||(d=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function Oq(n,t,e){n?rl(e,n,t):t()}function Nq(n,t,e,i,r,o,s,a){let l=[],c=0,d=0,u=!1,h=()=>{u&&!l.length&&!c&&t.complete()},f=y=>c<i?p(y):l.push(y),p=y=>{o&&t.next(y),c++;let v=!1;Gr(e(y,d++)).subscribe(ci(t,b=>{r?.(b),o?f(b):t.next(b)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){let b=l.shift();s?rl(t,s,()=>p(b)):p(b)}h()}catch(b){t.error(b)}}))};return n.subscribe(ci(t,f,()=>{u=!0,h()})),()=>{a?.()}}function So(n,t,e=1/0){return Ti(t)?So((i,r)=>Yt((o,s)=>t(i,o,r,s))(Gr(n(i,r))),e):(typeof t=="number"&&(e=t),hi((i,r)=>Nq(i,r,n,e)))}function Xd(n=1/0){return So(Ea,n)}function Bq(){return Xd(1)}function If(...n){return Bq()(Xr(n,Gd(n)))}function B0(n){return new jn(t=>{Gr(n()).subscribe(t)})}function y_(...n){let t=UC(n),{args:e,keys:i}=ex(n),r=new jn(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let d=0;d<s;d++){let u=!1;Gr(e[d]).subscribe(ci(o,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||o.next(i?tx(i,a):a),o.complete())}))}});return t?r.pipe(JC(t)):r}function nx(n=0,t,e=Sq){let i=-1;return t!=null&&(VC(t)?e=t:i=t),new jn(r=>{let o=Rq(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function TI(n=0,t=O0){return n<0&&(n=0),nx(n,n,t)}function Aa(...n){let t=Gd(n),e=Cq(n,1/0),i=n;return i.length?i.length===1?Gr(i[0]):Xd(e)(Xr(i,t)):ta}function rr(n,t){return hi((e,i)=>{let r=0;e.subscribe(ci(i,o=>n.call(t,o,r++)&&i.next(o)))})}function Vq(n){return hi((t,e)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let c=r;r=null,e.next(c)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};t.subscribe(ci(e,c=>{i=!0,r=c,o||Gr(n(c)).subscribe(o=ci(e,a,l))},()=>{s=!0,(!i||!o||o.closed)&&e.complete()}))})}function v_(n,t=O0){return Vq(()=>nx(n,t))}function Yc(n){return hi((t,e)=>{let i=null,r=!1,o;i=t.subscribe(ci(e,void 0,void 0,s=>{o=Gr(n(s,Yc(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function Uq(n,t,e,i,r){return(o,s)=>{let a=e,l=t,c=0;o.subscribe(ci(s,d=>{let u=c++;l=a?n(l,d,u):(a=!0,d),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function Yd(n,t){return Ti(t)?So(n,t,1):So(n,1)}function V0(n,t=O0){return hi((e,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+n,d=t.now();if(d<c){r=this.schedule(void 0,c-d),i.add(r);return}a()}e.subscribe(ci(i,c=>{o=c,s=t.now(),r||(r=t.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function Ff(n){return hi((t,e)=>{let i=!1;t.subscribe(ci(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function bs(n){return n<=0?()=>ta:hi((t,e)=>{let i=0;t.subscribe(ci(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Zc(n,t=Ea){return n=n??_ye,hi((e,i)=>{let r,o=!0;e.subscribe(ci(i,s=>{let a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function _ye(n,t){return n===t}function ix(n=bye){return hi((t,e)=>{let i=!1;t.subscribe(ci(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function bye(){return new Xc}function gh(n){return hi((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function yh(n,t){let e=arguments.length>=2;return i=>i.pipe(n?rr((r,o)=>n(r,o,i)):Ea,bs(1),e?Ff(t):ix(()=>new Xc))}function Sg(n){return n<=0?()=>ta:hi((t,e)=>{let i=[];t.subscribe(ci(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function EI(n,t){let e=arguments.length>=2;return i=>i.pipe(n?rr((r,o)=>n(r,o,i)):Ea,Sg(1),e?Ff(t):ix(()=>new Xc))}function Pf(){return hi((n,t)=>{let e,i=!1;n.subscribe(ci(t,r=>{let o=e;e=r,i&&t.next([o,r]),i=!0}))})}function AI(n,t){return hi(Uq(n,t,arguments.length>=2,!0))}function __(n={}){let{connector:t=()=>new Xe,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,d=!1,u=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,d=u=!1},p=()=>{let y=s;f(),y?.unsubscribe()};return hi((y,v)=>{c++,!u&&!d&&h();let b=l=l??t();v.add(()=>{c--,c===0&&!u&&!d&&(a=DI(p,r))}),b.subscribe(v),!s&&c>0&&(s=new Gc({next:S=>b.next(S),error:S=>{u=!0,h(),a=DI(f,e,S),b.error(S)},complete:()=>{d=!0,h(),a=DI(f,i),b.complete()}}),Gr(y).subscribe(s))})(o)}}function DI(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new Gc({next:()=>{i.unsubscribe(),n()}});return Gr(t(...e)).subscribe(i)}function Lf(n,t,e){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n:i=n??1/0,__({connector:()=>new Kd(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function b_(n){return rr((t,e)=>n<=e)}function Co(...n){let t=Gd(n);return hi((e,i)=>{(t?If(n,e,t):If(n,e)).subscribe(i)})}function yo(n,t){return hi((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(ci(i,l=>{r?.unsubscribe();let c=0,d=o++;Gr(n(l,d)).subscribe(r=ci(i,u=>i.next(t?t(l,u,d,c++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function fn(n){return hi((t,e)=>{Gr(n).subscribe(ci(e,()=>e.complete(),h_)),!e.closed&&t.subscribe(e)})}function II(n,t=!1){return hi((e,i)=>{let r=0;e.subscribe(ci(i,o=>{let s=n(o,r++);(s||t)&&i.next(o),!s&&i.complete()}))})}function Jr(n,t,e){let i=Ti(n)||t||e?{next:n,error:t,complete:e}:n;return i?hi((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(ci(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Ea}function jq(n){let t=Yn(null);try{return n()}finally{Yn(t)}}var Hq=Ge(le({},A0),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Wq(n){if(n.dirty=!1,n.version>0&&!F0(n))return;n.version++;let t=xf(n);try{n.cleanup(),n.fn()}finally{I0(n,t)}}var ax="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Je=class extends Error{code;constructor(t,e){super(ac(t,e)),this.code=t}};function wye(n){return`NG0${Math.abs(n)}`}function ac(n,t){return`${wye(n)}${t?": "+t:""}`}var cs=globalThis;function Ar(n){for(let t in n)if(n[t]===Ar)return t;throw Error("")}function $q(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function _h(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(_h).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function lx(n,t){return n?t?`${n} ${t}`:n:t||""}var Sye=Ar({__forward_ref__:Ar});function ds(n){return n.__forward_ref__=ds,n.toString=function(){return _h(this())},n}function Rs(n){return WI(n)?n():n}function WI(n){return typeof n=="function"&&n.hasOwnProperty(Sye)&&n.__forward_ref__===ds}function He(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function k_(n){return Cye(n,cx)}function zI(n){return k_(n)!==null}function Cye(n,t){return n.hasOwnProperty(t)&&n[t]||null}function xye(n){let t=n?.[cx]??null;return t||null}function PI(n){return n&&n.hasOwnProperty(ox)?n[ox]:null}var cx=Ar({\u0275prov:Ar}),ox=Ar({\u0275inj:Ar}),$e=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=He({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qI(n){return n&&!!n.\u0275providers}var $I=Ar({\u0275cmp:Ar}),KI=Ar({\u0275dir:Ar}),GI=Ar({\u0275pipe:Ar}),XI=Ar({\u0275mod:Ar}),S_=Ar({\u0275fac:Ar}),z0=Ar({__NG_ELEMENT_ID__:Ar}),zq=Ar({__NG_ENV_ID__:Ar});function lc(n){return typeof n=="string"?n:n==null?"":String(n)}function Kq(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():lc(n)}var Gq=Ar({ngErrorCode:Ar}),kye=Ar({ngErrorMessage:Ar}),Mye=Ar({ngTokenPath:Ar});function YI(n,t){return Xq("",-200,t)}function dx(n,t){throw new Je(-201,!1)}function Xq(n,t,e){let i=new Je(t,n);return i[Gq]=t,i[kye]=n,e&&(i[Mye]=e),i}function Tye(n){return n[Gq]}var LI;function Yq(){return LI}function Da(n){let t=LI;return LI=n,t}function ZI(n,t,e){let i=k_(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&8)return null;if(t!==void 0)return t;dx(n,"Injector")}var Eye={},U0=Eye,RI="__NG_DI_FLAG__",OI=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=j0(e)||0;try{return this.injector.get(t,i&8?null:U0,i)}catch(r){if(hg(r))return r;throw r}}};function Aye(n,t=0){let e=bC();if(e===void 0)throw new Je(-203,!1);if(e===null)return ZI(n,void 0,t);{let i=Dye(t),r=e.retrieve(n,i);if(hg(r)){if(i.optional)return null;throw r}return r}}function Ye(n,t=0){return(Yq()||Aye)(Rs(n),t)}function N(n,t){return Ye(n,j0(t))}function j0(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Dye(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function NI(n){let t=[];for(let e=0;e<n.length;e++){let i=Rs(n[e]);if(Array.isArray(i)){if(i.length===0)throw new Je(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],l=Iye(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(Ye(r,o))}else t.push(Ye(i))}return t}function ux(n,t){return n[RI]=t,n.prototype[RI]=t,n}function Iye(n){return n[RI]}function Rf(n,t){let e=n.hasOwnProperty(S_);return e?n[S_]:null}function Zq(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function Qq(n){return n.flat(Number.POSITIVE_INFINITY)}function hx(n,t){n.forEach(e=>Array.isArray(e)?hx(e,t):t(e))}function QI(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function M_(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Jq(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function e$(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function fx(n,t,e){let i=xg(n,t);return i>=0?n[i|1]=e:(i=~i,e$(n,i,t,e)),i}function px(n,t){let e=xg(n,t);if(e>=0)return n[e|1]}function xg(n,t){return Fye(n,t,1)}function Fye(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var Nf={},na=[],bh=new $e(""),JI=new $e("",-1),e7=new $e(""),C_=class{get(t,e=U0){if(e===U0){let r=Xq("",-201);throw r.name="\u0275NotFound",r}return e}};function t7(n){return n[XI]||null}function Zd(n){return n[$I]||null}function n7(n){return n[KI]||null}function t$(n){return n[GI]||null}function Bf(n){return{\u0275providers:n}}function T_(...n){return{\u0275providers:i7(!0,n),\u0275fromNgModule:!0}}function i7(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return hx(t,s=>{let a=s;sx(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&n$(r,o),e}function n$(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];r7(r,o=>{t(o,i)})}}function sx(n,t,e,i){if(n=Rs(n),!n)return!1;let r=null,o=PI(n),s=!o&&Zd(n);if(!o&&!s){let l=n.ngModule;if(o=PI(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)sx(c,t,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{hx(o.imports,d=>{sx(d,t,e,i)&&(c||=[],c.push(d))})}finally{}c!==void 0&&n$(c,t)}if(!a){let c=Rf(r)||(()=>new r);t({provide:r,useFactory:c,deps:na},r),t({provide:e7,useValue:r,multi:!0},r),t({provide:bh,useValue:()=>Ye(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=n;r7(l,d=>{t(d,c)})}}else return!1;return r!==n&&n.providers!==void 0}function r7(n,t){for(let e of n)qI(e)&&(e=e.\u0275providers),Array.isArray(e)?r7(e,t):t(e)}var Pye=Ar({provide:String,useValue:Ar});function i$(n){return n!==null&&typeof n=="object"&&Pye in n}function Lye(n){return!!(n&&n.useExisting)}function Rye(n){return!!(n&&n.useFactory)}function H0(n){return typeof n=="function"}function r$(n){return!!n.useClass}var E_=new $e(""),rx={},qq={},FI;function kg(){return FI===void 0&&(FI=new C_),FI}var Ur=class{},W0=class extends Ur{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,VI(t,s=>this.processProvider(s)),this.records.set(JI,Cg(void 0,this)),r.has("environment")&&this.records.set(Ur,Cg(void 0,this));let o=this.records.get(E_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(e7,na,{self:!0}))}retrieve(t,e){let i=j0(e)||0;try{return this.get(t,U0,i)}catch(r){if(hg(r))return r;throw r}}destroy(){w_(this),this._destroyed=!0;let t=Yn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Yn(t)}}onDestroy(t){return w_(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){w_(this);let e=$d(this),i=Da(void 0),r;try{return t()}finally{$d(e),Da(i)}}get(t,e=U0,i){if(w_(this),t.hasOwnProperty(zq))return t[zq](this);let r=j0(i),o,s=$d(this),a=Da(void 0);try{if(!(r&4)){let c=this.records.get(t);if(c===void 0){let d=Uye(t)&&k_(t);d&&this.injectableDefInScope(d)?c=Cg(BI(t),rx):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c,r)}let l=r&2?kg():this.parent;return e=r&8&&e===U0?null:e,l.get(t,e)}catch(l){let c=Tye(l);throw c===-200||c===-201?new Je(c,null):l}finally{Da(a),$d(s)}}resolveInjectorInitializers(){let t=Yn(null),e=$d(this),i=Da(void 0),r;try{let o=this.get(bh,na,{self:!0});for(let s of o)s()}finally{$d(e),Da(i),Yn(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(_h(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Rs(t);let e=H0(t)?t:Rs(t&&t.provide),i=Nye(t);if(!H0(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Cg(void 0,rx,!0),r.factory=()=>NI(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=Yn(null);try{if(e.value===qq)throw YI(_h(t));return e.value===rx&&(e.value=qq,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&Vye(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Yn(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Rs(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function BI(n){let t=k_(n),e=t!==null?t.factory:Rf(n);if(e!==null)return e;if(n instanceof $e)throw new Je(204,!1);if(n instanceof Function)return Oye(n);throw new Je(204,!1)}function Oye(n){if(n.length>0)throw new Je(204,!1);let e=xye(n);return e!==null?()=>e.factory(n):()=>new n}function Nye(n){if(i$(n))return Cg(void 0,n.useValue);{let t=o7(n);return Cg(t,rx)}}function o7(n,t,e){let i;if(H0(n)){let r=Rs(n);return Rf(r)||BI(r)}else if(i$(n))i=()=>Rs(n.useValue);else if(Rye(n))i=()=>n.useFactory(...NI(n.deps||[]));else if(Lye(n))i=(r,o)=>Ye(Rs(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=Rs(n&&(n.useClass||n.provide));if(Bye(n))i=()=>new r(...NI(n.deps));else return Rf(r)||BI(r)}return i}function w_(n){if(n.destroyed)throw new Je(205,!1)}function Cg(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Bye(n){return!!n.deps}function Vye(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Uye(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function VI(n,t){for(let e of n)Array.isArray(e)?VI(e,t):e&&qI(e)?VI(e.\u0275providers,t):t(e)}function Yo(n,t){let e;n instanceof W0?(w_(n),e=n):e=new OI(n);let i,r=$d(e),o=Da(void 0);try{return t()}finally{$d(r),Da(o)}}function s7(){return Yq()!==void 0||bC()!=null}var Qc=0,Dn=1,Jn=2,ls=3,cc=4,Ia=5,q0=6,Mg=7,Fo=8,wh=9,Qd=10,jr=11,Tg=12,a7=13,$0=14,ia=15,Vf=16,K0=17,Jd=18,A_=19,l7=20,vh=21,mx=22,Sh=23,Ol=24,G0=25,X0=26,eo=27,o$=1,c7=6,Uf=7,D_=8,Y0=9,Po=10;function eu(n){return Array.isArray(n)&&typeof n[o$]=="object"}function Jc(n){return Array.isArray(n)&&n[o$]===!0}function d7(n){return(n.flags&4)!==0}function Ch(n){return n.componentOffset>-1}function Eg(n){return(n.flags&1)===1}function tu(n){return!!n.template}function Ag(n){return(n[Jn]&512)!==0}function Z0(n){return(n[Jn]&256)===256}var u7="svg",s$="math";function dc(n){for(;Array.isArray(n);)n=n[Qc];return n}function h7(n,t){return dc(t[n])}function uc(n,t){return dc(t[n.index])}function I_(n,t){return n.data[t]}function F_(n,t){return n[t]}function f7(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function hc(n,t){let e=t[n];return eu(e)?e:e[Qc]}function a$(n){return(n[Jn]&4)===4}function gx(n){return(n[Jn]&128)===128}function l$(n){return Jc(n[ls])}function fc(n,t){return t==null?null:n[t]}function p7(n){n[K0]=0}function m7(n){n[Jn]&1024||(n[Jn]|=1024,gx(n)&&jf(n))}function c$(n,t){for(;n>0;)t=t[$0],n--;return t}function P_(n){return!!(n[Jn]&9216||n[Ol]?.dirty)}function yx(n){n[Qd].changeDetectionScheduler?.notify(8),n[Jn]&64&&(n[Jn]|=1024),P_(n)&&jf(n)}function jf(n){n[Qd].changeDetectionScheduler?.notify(0);let t=Of(n);for(;t!==null&&!(t[Jn]&8192||(t[Jn]|=8192,!gx(t)));)t=Of(t)}function g7(n,t){if(Z0(n))throw new Je(911,!1);n[vh]===null&&(n[vh]=[]),n[vh].push(t)}function d$(n,t){if(n[vh]===null)return;let e=n[vh].indexOf(t);e!==-1&&n[vh].splice(e,1)}function Of(n){let t=n[ls];return Jc(t)?t[ls]:t}function y7(n){return n[Mg]??=[]}function v7(n){return n.cleanup??=[]}function u$(n,t,e,i){let r=y7(t);r.push(e),n.firstCreatePass&&v7(n).push(i,r.length-1)}var Ii={lFrame:S$(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var UI=!1;function h$(){return Ii.lFrame.elementDepthCount}function f$(){Ii.lFrame.elementDepthCount++}function _7(){Ii.lFrame.elementDepthCount--}function vx(){return Ii.bindingsEnabled}function b7(){return Ii.skipHydrationRootTNode!==null}function w7(n){return Ii.skipHydrationRootTNode===n}function S7(){Ii.skipHydrationRootTNode=null}function bn(){return Ii.lFrame.lView}function co(){return Ii.lFrame.tView}function U(n){return Ii.lFrame.contextLView=n,n[Fo]}function j(n){return Ii.lFrame.contextLView=null,n}function us(){let n=C7();for(;n!==null&&n.type===64;)n=n.parent;return n}function C7(){return Ii.lFrame.currentTNode}function p$(){let n=Ii.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Dg(n,t){let e=Ii.lFrame;e.currentTNode=n,e.isParent=t}function x7(){return Ii.lFrame.isParent}function k7(){Ii.lFrame.isParent=!1}function m$(){return Ii.lFrame.contextLView}function M7(){return UI}function Ig(n){let t=UI;return UI=n,t}function Q0(){let n=Ii.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function T7(){return Ii.lFrame.bindingIndex}function g$(n){return Ii.lFrame.bindingIndex=n}function nu(){return Ii.lFrame.bindingIndex++}function L_(n){let t=Ii.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function y$(){return Ii.lFrame.inI18n}function v$(n,t){let e=Ii.lFrame;e.bindingIndex=e.bindingRootIndex=n,_x(t)}function _$(){return Ii.lFrame.currentDirectiveIndex}function _x(n){Ii.lFrame.currentDirectiveIndex=n}function b$(n){let t=Ii.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function bx(){return Ii.lFrame.currentQueryIndex}function R_(n){Ii.lFrame.currentQueryIndex=n}function jye(n){let t=n[Dn];return t.type===2?t.declTNode:t.type===1?n[Ia]:null}function E7(n,t,e){if(e&4){let r=t,o=n;for(;r=r.parent,r===null&&!(e&1);)if(r=jye(o),r===null||(o=o[$0],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=Ii.lFrame=w$();return i.currentTNode=t,i.lView=n,!0}function wx(n){let t=w$(),e=n[Dn];Ii.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function w$(){let n=Ii.lFrame,t=n===null?null:n.child;return t===null?S$(n):t}function S$(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function C$(){let n=Ii.lFrame;return Ii.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var A7=C$;function Sx(){let n=C$();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function x$(n){return(Ii.lFrame.contextLView=c$(n,Ii.lFrame.contextLView))[Fo]}function ed(){return Ii.lFrame.selectedIndex}function Hf(n){Ii.lFrame.selectedIndex=n}function Fg(){let n=Ii.lFrame;return I_(n.tView,n.selectedIndex)}function lt(){Ii.lFrame.currentNamespace=u7}function dn(){Hye()}function Hye(){Ii.lFrame.currentNamespace=null}function k$(){return Ii.lFrame.currentNamespace}var M$=!0;function Cx(){return M$}function O_(n){M$=n}function jI(n,t=null,e=null,i){let r=D7(n,t,e,i);return r.resolveInjectorInitializers(),r}function D7(n,t=null,e=null,i,r=new Set){let o=[e||na,T_(n)];return i=i||(typeof n=="object"?void 0:_h(n)),new W0(o,t||kg(),i||null,r)}var tn=class n{static THROW_IF_NOT_FOUND=U0;static NULL=new C_;static create(t,e){if(Array.isArray(t))return jI({name:""},e,t,"");{let i=t.name??"";return jI({name:i},t.parent,t.providers,i)}}static \u0275prov=He({token:n,providedIn:"any",factory:()=>Ye(JI)});static __NG_ELEMENT_ID__=-1},gn=new $e(""),Zt=(()=>{class n{static __NG_ELEMENT_ID__=Wye;static __NG_ENV_ID__=e=>e}return n})(),x_=class extends Zt{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Z0(this._lView)}onDestroy(t){let e=this._lView;return g7(e,t),()=>d$(e,t)}};function Wye(){return new x_(bn())}var ws=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Fa=new $e("",{providedIn:"root",factory:()=>{let n=N(Ur),t;return e=>{n.destroyed&&!t?setTimeout(()=>{throw e}):(t??=n.get(ws),t.handleError(e))}}}),T$={provide:bh,useValue:()=>void N(ws),multi:!0};function Wf(n){return typeof n=="function"&&n[as]!==void 0}function P(n,t){let[e,i,r]=hI(n,t?.equal),o=e,s=o[as];return o.set=i,o.update=r,o.asReadonly=I7.bind(o),o}function I7(){let n=this[as];if(n.readonlyFn===void 0){let t=()=>this();t[as]=n,n.readonlyFn=t}return n.readonlyFn}function F7(n){return Wf(n)&&typeof n.set=="function"}var J0=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=zye}return n})();function zye(){return new J0(bn(),us())}var sc=class{},N_=new $e("",{providedIn:"root",factory:()=>!1});var P7=new $e(""),L7=new $e(""),iu=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new bi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new jn(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=He({token:n,providedIn:"root",factory:()=>new n})}return n})(),Pg=(()=>{class n{internalPendingTasks=N(iu);scheduler=N(sc);errorHandler=N(Fa);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let i=this.add();e().catch(this.errorHandler).finally(i)}static \u0275prov=He({token:n,providedIn:"root",factory:()=>new n})}return n})();function em(...n){}var B_=(()=>{class n{static \u0275prov=He({token:n,providedIn:"root",factory:()=>new HI})}return n})(),HI=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||i.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,i]of this.queues)e===null?t||=this.flushQueue(i):t||=e.run(()=>this.flushQueue(i));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let i of t)i.dirty&&(this.dirtyEffectCount--,e=!0,i.run());return e}};function Ug(n){return{toString:n}.toString()}var xx="__parameters__";function Yye(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function I9(n,t,e){return Ug(()=>{let i=Yye(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,d){let u=l.hasOwnProperty(xx)?l[xx]:Object.defineProperty(l,xx,{value:[]})[xx];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(s),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var F9=ux(I9("Inject",n=>({token:n})),-1),Nl=ux(I9("Optional"),8);var $f=ux(I9("SkipSelf"),4);function Zye(n){return typeof n=="function"}var Lx=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function cK(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var or=(()=>{let n=()=>dK;return n.ngInherit=!0,n})();function dK(n){return n.type.prototype.ngOnChanges&&(n.setInput=Jye),Qye}function Qye(){let n=hK(this),t=n?.current;if(t){let e=n.previous;if(e===Nf)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function Jye(n,t,e,i,r){let o=this.declaredInputs[i],s=hK(n)||eve(n,{previous:Nf,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Lx(c&&c.currentValue,e,l===Nf),cK(n,t,r,e)}var uK="__ngSimpleChanges__";function hK(n){return n[uK]||null}function eve(n,t){return n[uK]=t}var E$=[];var Nr=function(n,t=null,e){for(let i=0;i<E$.length;i++){let r=E$[i];r(n,t,e)}};function tve(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=dK(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function fK(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),d!=null&&(n.destroyHooks??=[]).push(e,d)}}function Dx(n,t,e){pK(n,t,3,e)}function Ix(n,t,e,i){(n[Jn]&3)===e&&pK(n,t,e,i)}function R7(n,t){let e=n[Jn];(e&3)===t&&(e&=16383,e+=1,n[Jn]=e)}function pK(n,t,e,i){let r=i!==void 0?n[K0]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[K0]+=65536),(a<o||o==-1)&&(nve(n,e,t,l),n[K0]=(n[K0]&4294901760)+l+2),l++}function A$(n,t){Nr(4,n,t);let e=Yn(null);try{t.call(n)}finally{Yn(e),Nr(5,n,t)}}function nve(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=n[s];r?n[Jn]>>14<n[K0]>>16&&(n[Jn]&3)===t&&(n[Jn]+=16384,A$(a,o)):A$(a,o)}var Rg=-1,nm=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i,r){this.factory=t,this.name=r,this.canSeeViewProviders=e,this.injectImpl=i}};function ive(n){return(n.flags&8)!==0}function rve(n){return(n.flags&16)!==0}function ove(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{let o=r,s=e[++i];sve(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function mK(n){return n===3||n===4||n===6}function sve(n){return n.charCodeAt(0)===64}function Og(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?D$(n,e,r,null,t[++i]):D$(n,e,r,null,null))}}return n}function D$(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),r!==null&&n.splice(o++,0,r)}function gK(n){return n!==Rg}function Rx(n){return n&32767}function ave(n){return n>>16}function Ox(n,t){let e=ave(n),i=t;for(;e>0;)i=i[$0],e--;return i}var K7=!0;function Nx(n){let t=K7;return K7=n,t}var lve=256,yK=lve-1,vK=5,cve=0,ru={};function dve(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(z0)&&(i=e[z0]),i==null&&(i=e[z0]=cve++);let r=i&yK,o=1<<r;t.data[n+(r>>vK)]|=o}function Bx(n,t){let e=_K(n,t);if(e!==-1)return e;let i=t[Dn];i.firstCreatePass&&(n.injectorIndex=t.length,O7(i.data,n),O7(t,null),O7(i.blueprint,null));let r=P9(n,t),o=n.injectorIndex;if(gK(r)){let s=Rx(r),a=Ox(r,t),l=a[Dn].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=r,o}function O7(n,t){n.push(0,0,0,0,0,0,0,0,t)}function _K(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function P9(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=xK(r),i===null)return Rg;if(e++,r=r[$0],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Rg}function G7(n,t,e){dve(n,t,e)}function uve(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(mK(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===t)return e[r+1];r=r+2}}}return null}function bK(n,t,e){if(e&8||n!==void 0)return n;dx(t,"NodeInjector")}function wK(n,t,e,i){if(e&8&&i===void 0&&(i=null),(e&3)===0){let r=n[wh],o=Da(void 0);try{return r?r.get(t,i,e&8):ZI(t,i,e&8)}finally{Da(o)}}return bK(i,t,e)}function SK(n,t,e,i=0,r){if(n!==null){if(t[Jn]&2048&&!(i&2)){let s=mve(n,t,e,i,ru);if(s!==ru)return s}let o=CK(n,t,e,i,ru);if(o!==ru)return o}return wK(t,e,i,r)}function CK(n,t,e,i,r){let o=fve(e);if(typeof o=="function"){if(!E7(t,n,i))return i&1?bK(r,e,i):wK(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&8))dx(e);else return s}finally{A7()}}else if(typeof o=="number"){let s=null,a=_K(n,t),l=Rg,c=i&1?t[ia][Ia]:null;for((a===-1||i&4)&&(l=a===-1?P9(n,t):t[a+8],l===Rg||!F$(i,!1)?a=-1:(s=t[Dn],a=Rx(l),t=Ox(l,t)));a!==-1;){let d=t[Dn];if(I$(o,a,d.data)){let u=hve(a,t,e,s,i,c);if(u!==ru)return u}l=t[a+8],l!==Rg&&F$(i,t[Dn].data[a+8]===c)&&I$(o,a,t)?(s=d,a=Rx(l),t=Ox(l,t)):a=-1}}return r}function hve(n,t,e,i,r,o){let s=t[Dn],a=s.data[n+8],l=i==null?Ch(a)&&K7:i!=s&&(a.type&3)!==0,c=r&1&&o===a,d=Fx(a,s,e,l,c);return d!==null?j_(t,s,d,a,r):ru}function Fx(n,t,e,i,r){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,d=o>>20,u=i?a:a+d,h=r?a+d:c;for(let f=u;f<h;f++){let p=s[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(r){let f=s[l];if(f&&tu(f)&&f.type===e)return l}return null}function j_(n,t,e,i,r){let o=n[e],s=t.data;if(o instanceof nm){let a=o;if(a.resolving){let f=Kq(s[e]);throw YI(f)}let l=Nx(a.canSeeViewProviders);a.resolving=!0;let c=s[e].type||s[e],d,u=a.injectImpl?Da(a.injectImpl):null,h=E7(n,i,0);try{o=n[e]=a.factory(void 0,r,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&tve(e,s[e],t)}finally{u!==null&&Da(u),Nx(l),a.resolving=!1,A7()}}return o}function fve(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(z0)?n[z0]:void 0;return typeof t=="number"?t>=0?t&yK:pve:t}function I$(n,t,e){let i=1<<n;return!!(e[t+(n>>vK)]&i)}function F$(n,t){return!(n&2)&&!(n&1&&t)}var tm=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return SK(this._tNode,this._lView,t,j0(i),e)}};function pve(){return new tm(us(),bn())}function Os(n){return Ug(()=>{let t=n.prototype.constructor,e=t[S_]||X7(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[S_]||X7(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function X7(n){return WI(n)?()=>{let t=X7(Rs(n));return t&&t()}:Rf(n)}function mve(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[Jn]&2048&&!Ag(s);){let a=CK(o,s,e,i|2,ru);if(a!==ru)return a;let l=o.parent;if(!l){let c=s[l7];if(c){let d=c.get(e,ru,i);if(d!==ru)return d}l=xK(s),s=s[$0]}o=l}return r}function xK(n){let t=n[Dn],e=t.type;return e===2?t.declTNode:e===1?n[Ia]:null}function G_(n){return uve(us(),n)}function gve(){return jg(us(),bn())}function jg(n,t){return new Kt(uc(n,t))}var Kt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=gve}return n})();function kK(n){return n instanceof Kt?n.nativeElement:n}function yve(){return this._results[Symbol.iterator]()}var im=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Xe}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=Qq(t);(this._changesDetected=!Zq(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=yve};function MK(n){return(n.flags&128)===128}var L9=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(L9||{}),TK=new Map,vve=0;function _ve(){return vve++}function bve(n){TK.set(n[A_],n)}function Y7(n){TK.delete(n[A_])}var P$="__ngContext__";function Ng(n,t){eu(t)?(n[P$]=t[A_],bve(t)):n[P$]=t}function EK(n){return DK(n[Tg])}function AK(n){return DK(n[cc])}function DK(n){for(;n!==null&&!Jc(n);)n=n[cc];return n}var Z7;function R9(n){Z7=n}function O9(){if(Z7!==void 0)return Z7;if(typeof document<"u")return document;throw new Je(210,!1)}var Kf=new $e("",{providedIn:"root",factory:()=>wve}),wve="ng",Jx=new $e(""),Mh=new $e("",{providedIn:"platform",factory:()=>"unknown"});var Gf=new $e(""),Hg=new $e("",{providedIn:"root",factory:()=>O9().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Sve="h",Cve="b";var IK="r";var FK="di";var PK=!1,LK=new $e("",{providedIn:"root",factory:()=>PK});var e3=new $e("");var xve=(n,t,e,i)=>{};function kve(n,t,e,i){xve(n,t,e,i)}function t3(n){return(n.flags&32)===32}var Mve=()=>null;function RK(n,t,e=!1){return Mve(n,t,e)}function OK(n,t){let e=n.contentQueries;if(e!==null){let i=Yn(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=n.data[s];R_(o),a.contentQueries(2,t[s],s)}}}finally{Yn(i)}}}function Q7(n,t,e){R_(0);let i=Yn(null);try{t(n,e)}finally{Yn(i)}}function N9(n,t,e){if(d7(t)){let i=Yn(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{Yn(i)}}}var xh=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(xh||{});var kx;function Tve(){if(kx===void 0&&(kx=null,cs.trustedTypes))try{kx=cs.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return kx}function n3(n){return Tve()?.createHTML(n)||n}var Mx;function NK(){if(Mx===void 0&&(Mx=null,cs.trustedTypes))try{Mx=cs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Mx}function L$(n){return NK()?.createHTML(n)||n}function R$(n){return NK()?.createScriptURL(n)||n}var kh=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ax})`}},J7=class extends kh{getTypeName(){return"HTML"}},e9=class extends kh{getTypeName(){return"Style"}},t9=class extends kh{getTypeName(){return"Script"}},n9=class extends kh{getTypeName(){return"URL"}},i9=class extends kh{getTypeName(){return"ResourceURL"}};function Bl(n){return n instanceof kh?n.changingThisBreaksApplicationSecurity:n}function au(n,t){let e=BK(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${ax})`)}return e===t}function BK(n){return n instanceof kh&&n.getTypeName()||null}function B9(n){return new J7(n)}function V9(n){return new e9(n)}function U9(n){return new t9(n)}function j9(n){return new n9(n)}function H9(n){return new i9(n)}function Eve(n){let t=new o9(n);return Ave()?new r9(t):t}var r9=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(n3(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},o9=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=n3(t),e}};function Ave(){try{return!!new window.DOMParser().parseFromString(n3(""),"text/html")}catch{return!1}}var Dve=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function X_(n){return n=String(n),n.match(Dve)?n:"unsafe:"+n}function Th(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function Y_(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var VK=Th("area,br,col,hr,img,wbr"),UK=Th("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jK=Th("rp,rt"),Ive=Y_(jK,UK),Fve=Y_(UK,Th("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pve=Y_(jK,Th("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),O$=Y_(VK,Fve,Pve,Ive),HK=Th("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Lve=Th("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Rve=Th("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Ove=Y_(HK,Lve,Rve),Nve=Th("script,style,template"),s9=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=Uve(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=Vve(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=N$(t).toLowerCase();if(!O$.hasOwnProperty(e))return this.sanitizedSomething=!0,!Nve.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!Ove.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;HK[a]&&(l=X_(l)),this.buf.push(" ",s,'="',B$(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=N$(t).toLowerCase();O$.hasOwnProperty(e)&&!VK.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(B$(t))}};function Bve(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Vve(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw WK(t);return t}function Uve(n){let t=n.firstChild;if(t&&Bve(n,t))throw WK(t);return t}function N$(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function WK(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var jve=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hve=/([^\#-~ |!])/g;function B$(n){return n.replace(/&/g,"&amp;").replace(jve,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(Hve,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Tx;function i3(n,t){let e=null;try{Tx=Tx||Eve(n);let i=t?String(t):"";e=Tx.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=Tx.getInertBodyElement(i)}while(i!==o);let a=new s9().sanitizeChildren(V$(e)||e);return n3(a)}finally{if(e){let i=V$(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function V$(n){return"content"in n&&Wve(n)?n.content:null}function Wve(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var zve=/^>|^->|<!--|-->|--!>|<!-$/g,qve=/(<|>)/g,$ve="\u200B$1\u200B";function Kve(n){return n.replace(zve,t=>t.replace(qve,$ve))}function Gve(n,t){return n.createText(t)}function Xve(n,t,e){n.setValue(t,e)}function Yve(n,t){return n.createComment(Kve(t))}function zK(n,t,e){return n.createElement(t,e)}function Vx(n,t,e,i,r){n.insertBefore(t,e,i,r)}function qK(n,t,e){n.appendChild(t,e)}function U$(n,t,e,i,r){i!==null?Vx(n,t,e,i,r):qK(n,t,e)}function $K(n,t,e,i){n.removeChild(null,t,e,i)}function Zve(n,t,e){n.setAttribute(t,"style",e)}function Qve(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function KK(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&ove(n,t,i),r!==null&&Qve(n,t,r),o!==null&&Zve(n,t,o)}var Ss=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ss||{});function pn(n){let t=z9();return t?L$(t.sanitize(Ss.HTML,n)||""):au(n,"HTML")?L$(Bl(n)):i3(O9(),lc(n))}function La(n){let t=z9();return t?t.sanitize(Ss.URL,n)||"":au(n,"URL")?Bl(n):X_(lc(n))}function GK(n){let t=z9();if(t)return R$(t.sanitize(Ss.RESOURCE_URL,n)||"");if(au(n,"ResourceURL"))return R$(Bl(n));throw new Je(904,!1)}function Jve(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?GK:La}function W9(n,t,e){return Jve(t,e)(n)}function z9(){let n=bn();return n&&n[Qd].sanitizer}function q9(n){return n.ownerDocument}function XK(n){return n instanceof Function?n():n}function e_e(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}var YK="ng-template";function t_e(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&e_e(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if($9(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function $9(n){return n.type===4&&n.value!==YK}function n_e(n,t,e){let i=n.type===4&&!e?YK:n.value;return t===i}function i_e(n,t,e){let i=4,r=n.attrs,o=r!==null?s_e(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!td(i)&&!td(l))return!1;if(s&&td(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!n_e(n,l,e)||l===""&&t.length===1){if(td(i))return!1;s=!0}}else if(i&8){if(r===null||!t_e(n,r,l,e)){if(td(i))return!1;s=!0}}else{let c=t[++a],d=r_e(l,r,$9(n),e);if(d===-1){if(td(i))return!1;s=!0;continue}if(c!==""){let u;if(d>o?u="":u=r[d+1].toLowerCase(),i&2&&c!==u){if(td(i))return!1;s=!0}}}}return td(i)||s}function td(n){return(n&1)===0}function r_e(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return a_e(t,n)}function ZK(n,t,e=!1){for(let i=0;i<t.length;i++)if(i_e(n,t[i],e))return!0;return!1}function o_e(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if((e&1)===0)return t[e+1]}return null}function s_e(n){for(let t=0;t<n.length;t++){let e=n[t];if(mK(e))return t}return n.length}function a_e(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function l_e(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function j$(n,t){return n?":not("+t.trim()+")":t}function c_e(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!td(s)&&(t+=j$(o,r),r=""),i=s,o=o||!td(i);e++}return r!==""&&(t+=j$(o,r)),t}function d_e(n){return n.map(c_e).join(",")}function u_e(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!td(r))break;r=o}i++}return e.length&&t.push(1,...e),t}var Cs={};function K9(n,t,e,i,r,o,s,a,l,c,d){let u=eo+i,h=u+r,f=h_e(u,h),p=typeof c=="function"?c():c;return f[Dn]={type:n,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:d}}function h_e(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Cs);return e}function f_e(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=K9(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function G9(n,t,e,i,r,o,s,a,l,c,d){let u=t.blueprint.slice();return u[Qc]=r,u[Jn]=i|4|128|8|64|1024,(c!==null||n&&n[Jn]&2048)&&(u[Jn]|=2048),p7(u),u[ls]=u[$0]=n,u[Fo]=e,u[Qd]=s||n&&n[Qd],u[jr]=a||n&&n[jr],u[wh]=l||n&&n[wh]||null,u[Ia]=o,u[A_]=_ve(),u[q0]=d,u[l7]=c,u[ia]=t.type==2?n[ia]:u,u}function p_e(n,t,e){let i=uc(t,n),r=f_e(e),o=n[Qd].rendererFactory,s=X9(n,G9(n,r,null,QK(e),i,t,null,o.createRenderer(i,e),null,null,null));return n[t.index]=s}function QK(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function JK(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function X9(n,t){return n[Tg]?n[a7][cc]=t:n[Tg]=t,n[a7]=t,t}function _(n=1){eG(co(),bn(),ed()+n,!1)}function eG(n,t,e,i){if(!i)if((t[Jn]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Dx(t,o,e)}else{let o=n.preOrderHooks;o!==null&&Ix(t,o,0,e)}Hf(e)}var r3=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(r3||{});function a9(n,t,e,i){let r=Yn(null);try{let[o,s,a]=n.inputs[e],l=null;(s&r3.SignalBased)!==0&&(l=t[o][as]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(t,i)),n.setInput!==null?n.setInput(t,l,i,e,o):cK(t,l,o,i)}finally{Yn(r)}}var ou=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ou||{}),m_e;function Y9(n,t){return m_e(n,t)}var rm=new Set,o3=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(o3||{}),Xf=new $e(""),H$=new Set;function id(n){H$.has(n)||(H$.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var tG=!1,l9=class extends Xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,s7()&&(this.destroyRef=N(Zt,{optional:!0})??void 0,this.pendingTasks=N(iu,{optional:!0})??void 0)}emit(t){let e=Yn(null);try{super.next(t)}finally{Yn(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof qn&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},vt=l9;function nG(n){let t,e;function i(){n=em;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function W$(n){return queueMicrotask(()=>n()),()=>{n=em}}var Z9="isAngularZone",Ux=Z9+"_ID",g_e=0,Pt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=tG}=t;if(typeof Zone>"u")throw new Je(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,b_e(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Z9)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Je(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Je(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,y_e,em,em);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},y_e={};function Q9(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function v_e(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){nG(()=>{n.callbackScheduled=!1,c9(n),n.isCheckStableRunning=!0,Q9(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),c9(n)}function b_e(n){let t=()=>{v_e(n)},e=g_e++;n._inner=n._inner.fork({name:"angular",properties:{[Z9]:!0,[Ux]:e,[Ux+e]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(w_e(l))return i.invokeTask(o,s,a,l);try{return z$(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),q$(n)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return z$(n),i.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!S_e(l)&&t(),q$(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,c9(n),Q9(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function c9(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function z$(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function q$(n){n._nesting--,Q9(n)}var jx=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function w_e(n){return iG(n,"__ignore_ng_zone__")}function S_e(n){return iG(n,"__scheduler_tick__")}function iG(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var s3=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=He({token:n,providedIn:"root",factory:()=>new n})}return n})(),J9=[0,1,2,3],eF=(()=>{class n{ngZone=N(Pt);scheduler=N(sc);errorHandler=N(ws,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){N(Xf,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Nr(16),this.executing=!0;for(let i of J9)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Nr(17)}register(e){let{view:i}=e;i!==void 0?((i[G0]??=[]).push(e),jf(i),i[Jn]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(o3.AFTER_NEXT_RENDER,e):e()}static \u0275prov=He({token:n,providedIn:"root",factory:()=>new n})}return n})(),H_=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,o,s=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[G0];t&&(this.view[G0]=t.filter(e=>e!==this))}};function Zo(n,t){let e=t?.injector??N(tn);return id("NgAfterNextRender"),x_e(n,e,t,!0)}function C_e(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function x_e(n,t,e,i){let r=t.get(s3);r.impl??=t.get(eF);let o=t.get(Xf,null,{optional:!0}),s=e?.manualCleanup!==!0?t.get(Zt):null,a=t.get(J0,null,{optional:!0}),l=new H_(r.impl,C_e(n),a?.view,i,s,o?.snapshot(null));return r.impl.register(l),l}var rG=new $e("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function oG(n,t,e){let i=n.get(rG);if(Array.isArray(t))for(let r of t)i.queue.add(r),e?.detachedLeaveAnimationFns?.push(r);else i.queue.add(t),e?.detachedLeaveAnimationFns?.push(t);i.scheduler&&i.scheduler(n)}function k_e(n,t){let e=n.get(rG);if(t.detachedLeaveAnimationFns){for(let i of t.detachedLeaveAnimationFns)e.queue.delete(i);t.detachedLeaveAnimationFns=void 0}}function M_e(n,t){for(let[e,i]of t)oG(n,i.animateFns)}function $$(n,t,e,i){let r=n?.[X0]?.enter;t!==null&&r&&r.has(e.index)&&M_e(i,r)}function Lg(n,t,e,i,r,o,s,a){if(r!=null){let l,c=!1;Jc(r)?l=r:eu(r)&&(c=!0,r=r[Qc]);let d=dc(r);n===0&&i!==null?($$(a,i,o,e),s==null?qK(t,i,d):Vx(t,i,d,s||null,!0)):n===1&&i!==null?($$(a,i,o,e),Vx(t,i,d,s||null,!0)):n===2?K$(a,o,e,u=>{$K(t,d,c,u)}):n===3&&K$(a,o,e,()=>{t.destroyNode(d)}),l!=null&&N_e(t,n,e,l,o,i,s)}}function T_e(n,t){sG(n,t),t[Qc]=null,t[Ia]=null}function E_e(n,t,e,i,r,o){i[Qc]=r,i[Ia]=t,l3(n,i,e,1,r,o)}function sG(n,t){t[Qd].changeDetectionScheduler?.notify(9),l3(n,t,t[jr],2,null,null)}function A_e(n){let t=n[Tg];if(!t)return N7(n[Dn],n);for(;t;){let e=null;if(eu(t))e=t[Tg];else{let i=t[Po];i&&(e=i)}if(!e){for(;t&&!t[cc]&&t!==n;)eu(t)&&N7(t[Dn],t),t=t[ls];t===null&&(t=n),eu(t)&&N7(t[Dn],t),e=t&&t[cc]}t=e}}function tF(n,t){let e=n[Y0],i=e.indexOf(t);e.splice(i,1)}function a3(n,t){if(Z0(t))return;let e=t[jr];e.destroyNode&&l3(n,t,e,3,null,null),A_e(t)}function N7(n,t){if(Z0(t))return;let e=Yn(null);try{t[Jn]&=-129,t[Jn]|=256,t[Ol]&&kf(t[Ol]),F_e(n,t),I_e(n,t),t[Dn].type===1&&t[jr].destroy();let i=t[Vf];if(i!==null&&Jc(t[ls])){i!==t[ls]&&tF(i,t);let r=t[Jd];r!==null&&r.detachView(n)}Y7(t)}finally{Yn(e)}}function K$(n,t,e,i){let r=n?.[X0];if(r==null||r.leave==null||!r.leave.has(t.index))return i(!1);n&&rm.add(n),oG(e,()=>{if(r.leave&&r.leave.has(t.index)){let s=r.leave.get(t.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:d}=c();a.push(d)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),D_e(n,i)}else n&&rm.delete(n),i(!1)},r)}function D_e(n,t){let e=n[X0]?.running;if(e){e.then(()=>{n[X0].running=void 0,rm.delete(n),t(!0)});return}t(!1)}function I_e(n,t){let e=n.cleanup,i=t[Mg];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[e[s+1]];e[s].call(a)}i!==null&&(t[Mg]=null);let r=t[vh];if(r!==null){t[vh]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=t[Sh];if(o!==null){t[Sh]=null;for(let s of o)s.destroy()}}function F_e(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof nm)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Nr(4,a,l);try{l.call(a)}finally{Nr(5,a,l)}}else{Nr(4,r,o);try{o.call(r)}finally{Nr(5,r,o)}}}}}function aG(n,t,e){return P_e(n,t.parent,e)}function P_e(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Qc];if(Ch(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===xh.None||r===xh.Emulated)return null}return uc(i,e)}function lG(n,t,e){return R_e(n,t,e)}function L_e(n,t,e){return n.type&40?uc(n,e):null}var R_e=L_e,G$;function nF(n,t,e,i){let r=aG(n,i,t),o=t[jr],s=i.parent||t[Ia],a=lG(s,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)U$(o,r,e[l],a,!1);else U$(o,r,e,a,!1);G$!==void 0&&G$(o,i,t,e,r)}function V_(n,t){if(t!==null){let e=t.type;if(e&3)return uc(t,n);if(e&4)return d9(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return V_(n,i);{let r=n[t.index];return Jc(r)?d9(-1,r):dc(r)}}else{if(e&128)return V_(n,t.next);if(e&32)return Y9(t,n)()||dc(n[t.index]);{let i=cG(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Of(n[ia]);return V_(r,i)}else return V_(n,t.next)}}}return null}function cG(n,t){if(t!==null){let i=n[ia][Ia],r=t.projection;return i.projection[r]}return null}function d9(n,t){let e=Po+n+1;if(e<t.length){let i=t[e],r=i[Dn].firstChild;if(r!==null)return V_(i,r)}return t[Uf]}function iF(n,t,e,i,r,o,s){for(;e!=null;){let a=i[wh];if(e.type===128){e=e.next;continue}let l=i[e.index],c=e.type;if(s&&t===0&&(l&&Ng(dc(l),i),e.flags|=2),!t3(e))if(c&8)iF(n,t,e.child,i,r,o,!1),Lg(t,n,a,r,l,e,o,i);else if(c&32){let d=Y9(e,i),u;for(;u=d();)Lg(t,n,a,r,u,e,o,i);Lg(t,n,a,r,l,e,o,i)}else c&16?dG(n,t,i,e,r,o):Lg(t,n,a,r,l,e,o,i);e=s?e.projectionNext:e.next}}function l3(n,t,e,i,r,o){iF(e,i,n.firstChild,t,r,o,!1)}function O_e(n,t,e){let i=t[jr],r=aG(n,e,t),o=e.parent||t[Ia],s=lG(o,e,t);dG(i,0,t,e,r,s)}function dG(n,t,e,i,r,o){let s=e[ia],l=s[Ia].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];Lg(t,n,e[wh],r,d,i,o,e)}else{let c=l,d=s[ls];MK(i)&&(c.flags|=128),iF(n,t,c,d,r,o,!0)}}function N_e(n,t,e,i,r,o,s){let a=i[Uf],l=dc(i);a!==l&&Lg(t,n,e,o,a,r,s);for(let c=Po;c<i.length;c++){let d=i[c];l3(d[Dn],d,n,t,o,a)}}function B_e(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:ou.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ou.Important),n.setStyle(e,i,r,o))}}function uG(n,t,e,i,r){let o=ed(),s=i&2;try{Hf(-1),s&&t.length>eo&&eG(n,t,eo,!1),Nr(s?2:0,r,e),e(i,r)}finally{Hf(o),Nr(s?3:1,r,e)}}function c3(n,t,e){W_e(n,t,e),(e.flags&64)===64&&z_e(n,t,e)}function Z_(n,t,e=uc){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(t,n):n[s];n[r++]=a}}}function V_e(n,t,e,i){let o=i.get(LK,PK)||e===xh.ShadowDom,s=n.selectRootElement(t,o);return U_e(s),s}function U_e(n){j_e(n)}var j_e=()=>null;function H_e(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function hG(n,t,e,i,r,o){let s=t[Dn];if(d3(n,s,t,e,i)){Ch(n)&&pG(t,n.index);return}n.type&3&&(e=H_e(e)),fG(n,t,e,i,r,o)}function fG(n,t,e,i,r,o){if(n.type&3){let s=uc(n,t);i=o!=null?o(i,n.value||"",e):i,r.setProperty(s,e,i)}else n.type&12}function pG(n,t){let e=hc(t,n);e[Jn]&16||(e[Jn]|=64)}function W_e(n,t,e){let i=e.directiveStart,r=e.directiveEnd;Ch(e)&&p_e(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||Bx(e,t);let o=e.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=j_(t,n,s,e);if(Ng(l,t),o!==null&&K_e(t,s-i,l,a,e,o),tu(a)){let c=hc(e.index,t);c[Fo]=j_(t,n,s,e)}}}function z_e(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=_$();try{Hf(o);for(let a=i;a<r;a++){let l=n.data[a],c=t[a];_x(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&q_e(l,c)}}finally{Hf(-1),_x(s)}}function q_e(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function rF(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let o=e[r];ZK(t,o.selectors,!1)&&(i??=[],tu(o)?i.unshift(o):i.push(o))}return i}function $_e(n,t,e,i,r,o){let s=uc(n,t);mG(t[jr],s,o,n.value,e,i,r)}function mG(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let a=s==null?lc(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}function K_e(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];a9(i,e,l,c)}}function oF(n,t,e,i,r){let o=eo+e,s=t[Dn],a=r(s,t,n,i,e);t[o]=a,Dg(n,!0);let l=n.type===2;return l?(KK(t[jr],a,n),(h$()===0||Eg(n))&&Ng(a,t),f$()):Ng(a,t),Cx()&&(!l||!t3(n))&&nF(s,t,a,n),n}function sF(n){let t=n;return x7()?k7():(t=t.parent,Dg(t,!1)),t}function G_e(n,t){let e=n[wh];if(!e)return;let i;try{i=e.get(Fa,null)}catch{i=null}i?.(t)}function d3(n,t,e,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1],u=t.data[c];a9(u,e[c],d,r),a=!0}if(o)for(let l of o){let c=e[l],d=t.data[l];a9(d,c,i,r),a=!0}return a}function X_e(n,t){let e=hc(t,n),i=e[Dn];Y_e(i,e);let r=e[Qc];r!==null&&e[q0]===null&&(e[q0]=RK(r,e[wh])),Nr(18),aF(i,e,e[Fo]),Nr(19,e[Fo])}function Y_e(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function aF(n,t,e){wx(t);try{let i=n.viewQuery;i!==null&&Q7(1,i,e);let r=n.template;r!==null&&uG(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Jd]?.finishViewCreation(n),n.staticContentQueries&&OK(n,t),n.staticViewQueries&&Q7(2,n.viewQuery,e);let o=n.components;o!==null&&Z_e(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Jn]&=-5,Sx()}}function Z_e(n,t){for(let e=0;e<t.length;e++)X_e(n,t[e])}function Q_(n,t,e,i){let r=Yn(null);try{let o=t.tView,a=n[Jn]&4096?4096:16,l=G9(n,o,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[t.index];l[Vf]=c;let d=n[Jd];return d!==null&&(l[Jd]=d.createEmbeddedView(o)),aF(o,l,e),l}finally{Yn(r)}}function Bg(n,t){return!t||t.firstChild===null||MK(n)}function W_(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&i.push(dc(o)),Jc(o)&&gG(o,i);let s=e.type;if(s&8)W_(n,t,e.child,i);else if(s&32){let a=Y9(e,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=cG(t,e);if(Array.isArray(a))i.push(...a);else{let l=Of(t[ia]);W_(l[Dn],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function gG(n,t){for(let e=Po;e<n.length;e++){let i=n[e],r=i[Dn].firstChild;r!==null&&W_(i[Dn],i,r,t)}n[Uf]!==n[Qc]&&t.push(n[Uf])}function yG(n){if(n[G0]!==null){for(let t of n[G0])t.impl.addSequence(t);n[G0].length=0}}var vG=[];function Q_e(n){return n[Ol]??J_e(n)}function J_e(n){let t=vG.pop()??Object.create(tbe);return t.lView=n,t}function ebe(n){n.lView[Ol]!==n&&(n.lView=null,vG.push(n))}var tbe=Ge(le({},A0),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{jf(n.lView)},consumerOnSignalRead(){this.lView[Ol]=this}});function nbe(n){let t=n[Ol]??Object.create(ibe);return t.lView=n,t}var ibe=Ge(le({},A0),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Of(n.lView);for(;t&&!_G(t[Dn]);)t=Of(t);t&&m7(t)},consumerOnSignalRead(){this.lView[Ol]=this}});function _G(n){return n.type!==2}function bG(n){if(n[Sh]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[Sh])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[Jn]&8192)}}var rbe=100;function wG(n,t=0){let i=n[Qd].rendererFactory,r=!1;r||i.begin?.();try{obe(n,t)}finally{r||i.end?.()}}function obe(n,t){let e=M7();try{Ig(!0),u9(n,t);let i=0;for(;P_(n);){if(i===rbe)throw new Je(103,!1);i++,u9(n,1)}}finally{Ig(e)}}function sbe(n,t,e,i){if(Z0(t))return;let r=t[Jn],o=!1,s=!1;wx(t);let a=!0,l=null,c=null;o||(_G(n)?(c=Q_e(t),l=xf(c)):kC()===null?(a=!1,c=nbe(t),l=xf(c)):t[Ol]&&(kf(t[Ol]),t[Ol]=null));try{p7(t),g$(n.bindingStartIndex),e!==null&&uG(n,t,e,2,i);let d=(r&3)===3;if(!o)if(d){let f=n.preOrderCheckHooks;f!==null&&Dx(t,f,null)}else{let f=n.preOrderHooks;f!==null&&Ix(t,f,0,null),R7(t,0)}if(s||abe(t),bG(t),SG(t,0),n.contentQueries!==null&&OK(n,t),!o)if(d){let f=n.contentCheckHooks;f!==null&&Dx(t,f)}else{let f=n.contentHooks;f!==null&&Ix(t,f,1),R7(t,1)}cbe(n,t);let u=n.components;u!==null&&xG(t,u,0);let h=n.viewQuery;if(h!==null&&Q7(2,h,i),!o)if(d){let f=n.viewCheckHooks;f!==null&&Dx(t,f)}else{let f=n.viewHooks;f!==null&&Ix(t,f,2),R7(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[mx]){for(let f of t[mx])f();t[mx]=null}o||(yG(t),t[Jn]&=-73)}catch(d){throw o||jf(t),d}finally{c!==null&&(I0(c,l),a&&ebe(c)),Sx()}}function SG(n,t){for(let e=EK(n);e!==null;e=AK(e))for(let i=Po;i<e.length;i++){let r=e[i];CG(r,t)}}function abe(n){for(let t=EK(n);t!==null;t=AK(t)){if(!(t[Jn]&2))continue;let e=t[Y0];for(let i=0;i<e.length;i++){let r=e[i];m7(r)}}}function lbe(n,t,e){Nr(18);let i=hc(t,n);CG(i,e),Nr(19,i[Fo])}function CG(n,t){gx(n)&&u9(n,t)}function u9(n,t){let i=n[Dn],r=n[Jn],o=n[Ol],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&F0(o)),s||=!1,o&&(o.dirty=!1),n[Jn]&=-9217,s)sbe(i,n,i.template,n[Fo]);else if(r&8192){let a=Yn(null);try{bG(n),SG(n,1);let l=i.components;l!==null&&xG(n,l,1),yG(n)}finally{Yn(a)}}}function xG(n,t,e){for(let i=0;i<t.length;i++)lbe(n,t[i],e)}function cbe(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Hf(~r);else{let o=r,s=e[++i],a=e[++i];v$(s,o);let l=t[o];Nr(24,l),a(2,l),Nr(25,l)}}}finally{Hf(-1)}}function lF(n,t){let e=M7()?64:1088;for(n[Qd].changeDetectionScheduler?.notify(t);n;){n[Jn]|=e;let i=Of(n);if(Ag(n)&&!i)return n;n=i}return null}function kG(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function MG(n,t){let e=Po+t;if(e<n.length)return n[e]}function J_(n,t,e,i=!0){let r=t[Dn];if(dbe(r,t,n,e),i){let s=d9(e,n),a=t[jr],l=a.parentNode(n[Uf]);l!==null&&E_e(r,n[Ia],a,t,l,s)}let o=t[q0];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function TG(n,t){let e=z_(n,t);return e!==void 0&&a3(e[Dn],e),e}function z_(n,t){if(n.length<=Po)return;let e=Po+t,i=n[e];if(i){let r=i[Vf];r!==null&&r!==n&&tF(r,i),t>0&&(n[e-1][cc]=i[cc]);let o=M_(n,Po+t);T_e(i[Dn],i);let s=o[Jd];s!==null&&s.detachView(o[Dn]),i[ls]=null,i[cc]=null,i[Jn]&=-129}return i}function dbe(n,t,e,i){let r=Po+i,o=e.length;i>0&&(e[r-1][cc]=t),i<o-Po?(t[cc]=e[r],QI(e,Po+i,t)):(e.push(t),t[cc]=null),t[ls]=e;let s=t[Vf];s!==null&&e!==s&&EG(s,t);let a=t[Jd];a!==null&&a.insertView(n),yx(t),t[Jn]|=128}function EG(n,t){let e=n[Y0],i=t[ls];if(eu(i))n[Jn]|=2;else{let r=i[ls][ia];t[ia]!==r&&(n[Jn]|=2)}e===null?n[Y0]=[t]:e.push(t)}var zf=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[Dn];return W_(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[Fo]}set context(t){this._lView[Fo]=t}get destroyed(){return Z0(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ls];if(Jc(t)){let e=t[D_],i=e?e.indexOf(this):-1;i>-1&&(z_(t,i),M_(e,i))}this._attachedToViewContainer=!1}a3(this._lView[Dn],this._lView)}onDestroy(t){g7(this._lView,t)}markForCheck(){lF(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Jn]&=-129}reattach(){yx(this._lView),this._lView[Jn]|=128}detectChanges(){this._lView[Jn]|=1024,wG(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Ag(this._lView),e=this._lView[Vf];e!==null&&!t&&tF(e,this._lView),sG(this._lView[Dn],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Je(902,!1);this._appRef=t;let e=Ag(this._lView),i=this._lView[Vf];i!==null&&!e&&EG(i,this._lView),yx(this._lView)}};var ra=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=ube;constructor(e,i,r){this._declarationLView=e,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,r){let o=Q_(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:r});return new zf(o)}}return n})();function ube(){return u3(us(),bn())}function u3(n,t){return n.type&4?new ra(t,n,jg(n,t)):null}function Wg(n,t,e,i,r){let o=n.data[t];if(o===null)o=hbe(n,t,e,i,r),y$()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=p$();o.injectorIndex=s===null?-1:s.injectorIndex}return Dg(o,!0),o}function hbe(n,t,e,i,r){let o=C7(),s=x7(),a=s?o:o&&o.parent,l=n.data[t]=pbe(n,a,e,t,i,r);return fbe(n,l,o,s),l}function fbe(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function pbe(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return b7()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var z_t=new RegExp(`^(\\d+)*(${Cve}|${Sve})*(.*)`);function mbe(n){let t=n[c7]??[],i=n[ls][jr],r=[];for(let o of t)o.data[FK]!==void 0?r.push(o):gbe(o,i);n[c7]=r}function gbe(n,t){let e=0,i=n.firstChild;if(i){let r=n.data[IK];for(;e<r;){let o=i.nextSibling;$K(t,i,!1),i=o,e++}}}var ybe=()=>null,vbe=()=>null;function Hx(n,t){return ybe(n,t)}function AG(n,t,e){return vbe(n,t,e)}var DG=class{},h3=class{},h9=class{resolveComponentFactory(t){throw new Je(917,!1)}},eb=class{static NULL=new h9},xo=class{},dr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>_be()}return n})();function _be(){let n=bn(),t=us(),e=hc(t.index,n);return(eu(e)?e:n)[jr]}var IG=(()=>{class n{static \u0275prov=He({token:n,providedIn:"root",factory:()=>null})}return n})();var Px={},f9=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){let r=this.injector.get(t,Px,i);return r!==Px||e===Px?r:this.parentInjector.get(t,e,i)}};function Wx(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=lx(r,a);else if(o==2){let l=a,c=t[++s];i=lx(i,l+": "+c+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function ut(n,t=0){let e=bn();if(e===null)return Ye(n,t);let i=us();return SK(i,e,Rs(n),t)}function tb(){let n="invalid";throw new Error(n)}function FG(n,t,e,i,r){let o=i===null?null:{"":-1},s=r(n,e);if(s!==null){let a=s,l=null,c=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,l,c]=d.resolveHostDirectives(s);break}Sbe(n,t,e,a,o,l,c)}o!==null&&i!==null&&bbe(e,i,o)}function bbe(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new Je(-301,!1);i.push(t[r],o)}}function wbe(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function Sbe(n,t,e,i,r,o,s){let a=i.length,l=!1;for(let h=0;h<a;h++){let f=i[h];!l&&tu(f)&&(l=!0,wbe(n,e,h)),G7(Bx(e,t),n,f.type)}Ebe(e,n.data.length,a);for(let h=0;h<a;h++){let f=i[h];f.providersResolver&&f.providersResolver(f)}let c=!1,d=!1,u=JK(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=i[h];if(e.mergedAttrs=Og(e.mergedAttrs,f.hostAttrs),xbe(n,e,t,u,f),Tbe(u,f,r),s!==null&&s.has(f)){let[y,v]=s.get(f);e.directiveToIndex.set(f.type,[u,y+e.directiveStart,v+e.directiveStart])}else(o===null||!o.has(f))&&e.directiveToIndex.set(f.type,u);f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),c=!0),!d&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),d=!0),u++}Cbe(n,e,o)}function Cbe(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))X$(0,t,r,i),X$(1,t,r,i),Z$(t,i,!1);else{let o=e.get(r);Y$(0,t,o,i),Y$(1,t,o,i),Z$(t,i,!0)}}}function X$(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(i),PG(t,o)}}function Y$(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),PG(t,s)}}function PG(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function Z$(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!e&&r===null||e&&o===null||$9(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&r.hasOwnProperty(l)){let c=r[l];for(let d of c)if(d===t){s??=[],s.push(l,i[a+1]);break}}else if(e&&o.hasOwnProperty(l)){let c=o[l];for(let d=0;d<c.length;d+=2)if(c[d]===t){s??=[],s.push(c[d+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function xbe(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=Rf(r.type,!0)),s=new nm(o,tu(r),ut,null);n.blueprint[i]=s,e[i]=s,kbe(n,t,i,JK(n,e,r.hostVars,Cs),r)}function kbe(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;Mbe(s)!=a&&s.push(a),s.push(e,i,o)}}function Mbe(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function Tbe(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;tu(t)&&(e[""]=n)}}function Ebe(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function cF(n,t,e,i,r,o,s,a){let l=t[Dn],c=l.consts,d=fc(c,s),u=Wg(l,n,e,i,d);return o&&FG(l,t,u,fc(c,a),r),u.mergedAttrs=Og(u.mergedAttrs,u.attrs),u.attrs!==null&&Wx(u,u.attrs,!1),u.mergedAttrs!==null&&Wx(u,u.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,u),u}function dF(n,t){fK(n,t),d7(t)&&n.queries.elementEnd(t)}function Abe(n,t,e,i,r,o){let s=t.consts,a=fc(s,r),l=Wg(t,n,e,i,a);if(l.mergedAttrs=Og(l.mergedAttrs,l.attrs),o!=null){let c=fc(s,o);l.localNames=[];for(let d=0;d<c.length;d+=2)l.localNames.push(c[d],-1)}return l.attrs!==null&&Wx(l,l.attrs,!1),l.mergedAttrs!==null&&Wx(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function uF(n){return RG(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function LG(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function RG(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function f3(n,t,e){return n[t]=e}function Dbe(n,t){return n[t]}function Pa(n,t,e){if(e===Cs)return!1;let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function hF(n,t,e,i){let r=Pa(n,t,e);return Pa(n,t+1,i)||r}function OG(n,t,e,i,r){let o=hF(n,t,e,i);return Pa(n,t+2,r)||o}function B7(n,t,e){return function i(r){let o=Ch(n)?hc(n.index,t):t;lF(o,5);let s=t[Fo],a=Q$(t,s,e,r),l=i.__ngNextListenerFn__;for(;l;)a=Q$(t,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function Q$(n,t,e,i){let r=Yn(null);try{return Nr(6,t,e),e(i)!==!1}catch(o){return G_e(n,o),!1}finally{Nr(7,t,e),Yn(r)}}function Ibe(n,t,e,i,r,o,s,a){let l=Eg(n),c=!1,d=null;if(!i&&l&&(d=Pbe(t,e,o,n.index)),d!==null){let u=d.__ngLastListenerFn__||d;u.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,c=!0}else{let u=uc(n,e),h=i?i(u):u;kve(e,h,o,a);let f=r.listen(h,o,a);if(!Fbe(o)){let p=i?y=>i(dc(y[n.index])):n.index;NG(p,t,e,o,a,f,!1)}}return c}function Fbe(n){return n.startsWith("animation")||n.startsWith("transition")}function Pbe(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=t[Mg],l=r[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function NG(n,t,e,i,r,o,s){let a=t.firstCreatePass?v7(t):null,l=y7(e),c=l.length;l.push(r,o),a&&a.push(i,n,c,(c+1)*(s?-1:1))}function J$(n,t,e,i,r,o){let s=t[e],a=t[Dn],c=a.data[e].outputs[i],u=s[c].subscribe(o);NG(n.index,a,t,r,o,u,!0)}var p9=Symbol("BINDING");var zx=class extends eb{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Zd(t);return new qf(e,this.ngModule)}};function Lbe(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],o={propName:e,templateName:t,isSignal:(i&r3.SignalBased)!==0};return r&&(o.transform=r),o})}function Rbe(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function Obe(n,t,e){let i=t instanceof Ur?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new f9(e,i):e}function Nbe(n){let t=n.get(xo,null);if(t===null)throw new Je(407,!1);let e=n.get(IG,null),i=n.get(sc,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i,ngReflect:!1}}function Bbe(n,t){let e=BG(n);return zK(t,e,e==="svg"?u7:e==="math"?s$:null)}function BG(n){return(n.selectors[0][0]||"div").toLowerCase()}var qf=class extends h3{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Lbe(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Rbe(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=d_e(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r,o,s){Nr(22);let a=Yn(null);try{let l=this.componentDef,c=Vbe(i,l,s,o),d=Obe(l,r||this.ngModule,t),u=Nbe(d),h=u.rendererFactory.createRenderer(null,l),f=i?V_e(h,i,l.encapsulation,d):Bbe(l,h),p=s?.some(eK)||o?.some(b=>typeof b!="function"&&b.bindings.some(eK)),y=G9(null,c,null,512|QK(l),null,null,u,h,d,null,RK(f,d,!0));y[eo]=f,wx(y);let v=null;try{let b=cF(eo,y,2,"#host",()=>c.directiveRegistry,!0,0);KK(h,f,b),Ng(f,y),c3(c,y,b),N9(c,b,y),dF(c,b),e!==void 0&&jbe(b,this.ngContentSelectors,e),v=hc(b.index,y),y[Fo]=v[Fo],aF(c,y,null)}catch(b){throw v!==null&&Y7(v),Y7(y),b}finally{Nr(23),Sx()}return new qx(this.componentType,y,!!p)}finally{Yn(a)}}};function Vbe(n,t,e,i){let r=n?["ng-version","20.3.15"]:u_e(t.selectors[0]),o=null,s=null,a=0;if(e)for(let d of e)a+=d[p9].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(i)for(let d=0;d<i.length;d++){let u=i[d];if(typeof u!="function")for(let h of u.bindings){a+=h[p9].requiredVars;let f=d+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let l=[t];if(i)for(let d of i){let u=typeof d=="function"?d:d.type,h=n7(u);l.push(h)}return K9(0,null,Ube(o,s),1,a,l,null,null,null,[r],null)}function Ube(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let i of n)i.create();if(e&2&&t)for(let i of t)i.update()}}function eK(n){let t=n[p9].kind;return t==="input"||t==="twoWay"}var qx=class extends DG{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,i){super(),this._rootLView=e,this._hasInputBindings=i,this._tNode=I_(e[Dn],eo),this.location=jg(this._tNode,e),this.instance=hc(this._tNode.index,e)[Fo],this.hostView=this.changeDetectorRef=new zf(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,o=d3(i,r[Dn],r,t,e);this.previousInputValues.set(t,e);let s=hc(i.index,r);lF(s,1)}get injector(){return new tm(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function jbe(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Dr=(()=>{class n{static __NG_ELEMENT_ID__=Hbe}return n})();function Hbe(){let n=us();return UG(n,bn())}var Wbe=Dr,VG=class extends Wbe{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return jg(this._hostTNode,this._hostLView)}get injector(){return new tm(this._hostTNode,this._hostLView)}get parentInjector(){let t=P9(this._hostTNode,this._hostLView);if(gK(t)){let e=Ox(t,this._hostLView),i=Rx(t),r=e[Dn].data[i+8];return new tm(r,e)}else return new tm(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=tK(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Po}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Hx(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,Bg(this._hostTNode,s)),a}createComponent(t,e,i,r,o,s,a){let l=t&&!Zye(t),c;if(l)c=e;else{let v=e||{};c=v.index,i=v.injector,r=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef,s=v.directives,a=v.bindings}let d=l?t:new qf(Zd(t)),u=i||this.parentInjector;if(!o&&d.ngModule==null){let b=(l?u:this.parentInjector).get(Ur,null);b&&(o=b)}let h=Zd(d.componentType??{}),f=Hx(this._lContainer,h?.id??null),p=f?.firstChild??null,y=d.create(u,r,p,o,s,a);return this.insertImpl(y.hostView,c,Bg(this._hostTNode,f)),y}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(l$(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[ls],c=new VG(l,l[Ia],l[ls]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return J_(s,r,o,i),t.attachToViewContainerRef(),QI(V7(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=tK(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=z_(this._lContainer,e);i&&(M_(V7(this._lContainer),e),a3(i[Dn],i))}detach(t){let e=this._adjustIndex(t,-1),i=z_(this._lContainer,e);return i&&M_(V7(this._lContainer),e)!=null?new zf(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function tK(n){return n[D_]}function V7(n){return n[D_]||(n[D_]=[])}function UG(n,t){let e,i=t[n.index];return Jc(i)?e=i:(e=kG(i,t,null,n),t[n.index]=e,X9(t,e)),qbe(e,t,n,i),new VG(e,n,t)}function zbe(n,t){let e=n[jr],i=e.createComment(""),r=uc(t,n),o=e.parentNode(r);return Vx(e,o,i,e.nextSibling(r),!1),i}var qbe=Gbe,$be=()=>!1;function Kbe(n,t,e){return $be(n,t,e)}function Gbe(n,t,e,i){if(n[Uf])return;let r;e.type&8?r=dc(i):r=zbe(t,e),n[Uf]=r}var m9=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},g9=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)pF(t,e).matches!==null&&this.queries[e].setDirty()}},$x=class{flags;read;predicate;constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=Jbe(t):this.predicate=t}},y9=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},v9=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,Xbe(e,o)),this.matchTNodeWithReadOption(t,e,Fx(e,t,o,!1,!1))}else i===ra?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Fx(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Kt||r===Dr||r===ra&&e.type&4)this.addMatch(e.index,-2);else{let o=Fx(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function Xbe(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function Ybe(n,t){return n.type&11?jg(n,t):n.type&4?u3(n,t):null}function Zbe(n,t,e,i){return e===-1?Ybe(t,n):e===-2?Qbe(n,t,i):j_(n,n[Dn],e,t)}function Qbe(n,t,e){if(e===Kt)return jg(t,n);if(e===ra)return u3(t,n);if(e===Dr)return UG(t,n)}function jG(n,t,e,i){let r=t[Jd].queries[i];if(r.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=o[c];a.push(Zbe(t,d,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function _9(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=jG(n,t,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],d=t[-l];for(let u=Po;u<d.length;u++){let h=d[u];h[Vf]===h[ls]&&_9(h[Dn],h,c,i)}if(d[Y0]!==null){let u=d[Y0];for(let h=0;h<u.length;h++){let f=u[h];_9(f[Dn],f,c,i)}}}}}return i}function fF(n,t){return n[Jd].queries[t].queryList}function HG(n,t,e){let i=new im((e&4)===4);return u$(n,t,i,i.destroy),(t[Jd]??=new g9).queries.push(new m9(i))-1}function WG(n,t,e){let i=co();return i.firstCreatePass&&(qG(i,new $x(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),HG(i,bn(),t)}function zG(n,t,e,i){let r=co();if(r.firstCreatePass){let o=us();qG(r,new $x(t,e,i),o.index),ewe(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return HG(r,bn(),e)}function Jbe(n){return n.split(",").map(t=>t.trim())}function qG(n,t,e){n.queries===null&&(n.queries=new y9),n.queries.track(new v9(t,e))}function ewe(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function pF(n,t){return n.queries.getByIndex(t)}function $G(n,t){let e=n[Dn],i=pF(e,t);return i.crossesNgTemplate?_9(e,n,t,[]):jG(e,n,i,t)}function KG(n,t,e){let i,r=d_(()=>{i._dirtyCounter();let o=twe(i,n);if(t&&o===void 0)throw new Je(-951,!1);return o});return i=r[as],i._dirtyCounter=P(0),i._flatValue=void 0,r}function mF(n){return KG(!0,!1,n)}function gF(n){return KG(!0,!0,n)}function GG(n,t){let e=n[as];e._lView=bn(),e._queryIndex=t,e._queryList=fF(e._lView,t),e._queryList.onDirty(()=>e._dirtyCounter.update(i=>i+1))}function twe(n,t){let e=n._lView,i=n._queryIndex;if(e===void 0||i===void 0||e[Jn]&4)return t?void 0:na;let r=fF(e,i),o=$G(e,i);return r.reset(o,kK),t?r.first:r._changesDetected||n._flatValue===void 0?n._flatValue=r.toArray():n._flatValue}var su=class{},p3=class{};var Kx=class extends su{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new zx(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let o=t7(t);this._bootstrapComponents=XK(o.bootstrap),this._r3Injector=D7(t,e,[{provide:su,useValue:this},{provide:eb,useValue:this.componentFactoryResolver},...i],_h(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Gx=class extends p3{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Kx(this.moduleType,t,[])}};var q_=class extends su{injector;componentFactoryResolver=new zx(this);instance=null;constructor(t){super();let e=new W0([...t.providers,{provide:su,useValue:this},{provide:eb,useValue:this.componentFactoryResolver}],t.parent||kg(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function zg(n,t,e=null){return new q_({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var nwe=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=i7(!1,e.type),r=i.length>0?zg([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=He({token:n,providedIn:"environment",factory:()=>new n(Ye(Ur))})}return n})();function nt(n){return Ug(()=>{let t=XG(n),e=Ge(le({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===L9.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(nwe).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xh.Emulated,styles:n.styles||na,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&id("NgStandalone"),YG(e);let i=n.dependencies;return e.directiveDefs=nK(i,iwe),e.pipeDefs=nK(i,t$),e.id=swe(e),e})}function iwe(n){return Zd(n)||n7(n)}function zt(n){return Ug(()=>({type:n.type,bootstrap:n.bootstrap||na,declarations:n.declarations||na,imports:n.imports||na,exports:n.exports||na,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function rwe(n,t){if(n==null)return Nf;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=r3.None,l=null),e[o]=[i,a,l],t[o]=s}return e}function owe(n){if(n==null)return Nf;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function qt(n){return Ug(()=>{let t=XG(n);return YG(t),t})}function qg(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function XG(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||Nf,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||na,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:rwe(n.inputs,t),outputs:owe(n.outputs),debugInfo:null}}function YG(n){n.features?.forEach(t=>t(n))}function nK(n,t){return n?()=>{let e=typeof n=="function"?n():n,i=[];for(let r of e){let o=t(r);o!==null&&i.push(o)}return i}:null}function swe(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function awe(n){return Object.getPrototypeOf(n.prototype).constructor}function Lt(n){let t=awe(n.type),e=!0,i=[n];for(;t;){let r;if(tu(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Je(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=U7(n.inputs),s.declaredInputs=U7(n.declaredInputs),s.outputs=U7(n.outputs);let a=r.hostBindings;a&&hwe(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&dwe(n,l),c&&uwe(n,c),lwe(n,r),$q(n.outputs,r.outputs),tu(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Lt&&(e=!1)}}t=Object.getPrototypeOf(t)}cwe(i)}function lwe(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function cwe(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Og(r.hostAttrs,e=Og(e,r.hostAttrs))}}function U7(n){return n===Nf?{}:n===na?[]:n}function dwe(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function uwe(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function hwe(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function ZG(n,t,e,i,r,o,s,a){if(e.firstCreatePass){n.mergedAttrs=Og(n.mergedAttrs,n.attrs);let d=n.tView=K9(2,n,r,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),d.queries=e.queries.embeddedTView(n))}a&&(n.flags|=a),Dg(n,!1);let l=pwe(e,t,n,i);Cx()&&nF(e,t,l,n),Ng(l,t);let c=kG(l,t,l,n);t[i+eo]=c,X9(t,c),Kbe(c,n,t)}function fwe(n,t,e,i,r,o,s,a,l,c,d){let u=e+eo,h;return t.firstCreatePass?(h=Wg(t,u,4,s||null,a||null),vx()&&FG(t,n,h,fc(t.consts,c),rF),fK(t,h)):h=t.data[u],ZG(h,n,t,e,i,r,o,l),Eg(h)&&c3(t,n,h),c!=null&&Z_(n,h,d),h}function $_(n,t,e,i,r,o,s,a,l,c,d){let u=e+eo,h;if(t.firstCreatePass){if(h=Wg(t,u,4,s||null,a||null),c!=null){let f=fc(t.consts,c);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=t.data[u];return ZG(h,n,t,e,i,r,o,l),c!=null&&Z_(n,h,d),h}function nn(n,t,e,i,r,o,s,a){let l=bn(),c=co(),d=fc(c.consts,o);return fwe(l,c,n,t,e,i,r,d,void 0,s,a),nn}var pwe=mwe;function mwe(n,t,e,i){return O_(!0),t[jr].createComment("")}var m3=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var g3=new $e(""),$g=new $e(""),nb=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(e,i,r){this._ngZone=e,this.registry=i,s7()&&(this._destroyRef=N(Zt,{optional:!0})??void 0),yF||(QG(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let e=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),i=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{e.unsubscribe(),i.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e()},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static \u0275fac=function(i){return new(i||n)(Ye(Pt),Ye(ib),Ye($g))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),ib=(()=>{class n{_applications=new Map;registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return yF?.findTestabilityInTree(this,e,i)??null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function QG(n){yF=n}var yF;function Eh(n){return!!n&&typeof n.then=="function"}function y3(n){return!!n&&typeof n.subscribe=="function"}var vF=new $e("");function v3(n){return Bf([{provide:vF,multi:!0,useValue:n}])}var _F=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=N(vF,{optional:!0})??[];injector=N(tn);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=Yo(this.injector,r);if(Eh(o))e.push(o);else if(y3(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rb=new $e("");function JG(){uI(()=>{let n="";throw new Je(600,n)})}function eX(n){return n.isBoundToModule}var gwe=10;var Ns=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(Fa);afterRenderManager=N(s3);zonelessEnabled=N(N_);rootEffectScheduler=N(B_);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=N(iu);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Yt(e=>!e))}constructor(){N(Xf,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=N(Ur);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=tn.NULL){return this._injector.get(Pt).run(()=>{Nr(10);let s=e instanceof h3;if(!this._injector.get(_F).done){let p="";throw new Je(405,p)}let l;s?l=e:l=this._injector.get(eb).resolveComponentFactory(e),this.componentTypes.push(l.componentType);let c=eX(l)?void 0:this._injector.get(su),d=i||l.selector,u=l.create(r,[],d,c),h=u.location.nativeElement,f=u.injector.get(g3,null);return f?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),U_(this.components,u),f?.unregisterApplication(h)}),this._loadComponent(u),Nr(11,u),u})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Nr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(o3.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Je(101,!1);let e=Yn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Yn(e),this.afterTick.next(),Nr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xo,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<gwe;)Nr(14),this.synchronizeOnce(),Nr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!P_(r))continue;let o=i&&!this.zonelessEnabled?0:1;wG(r,o),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>P_(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;U_(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(e),this._injector.get(rb,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>U_(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Je(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U_(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function _3(n,t){let e=bn(),i=nu();if(Pa(e,i,t)){let r=co(),o=Fg();if(d3(o,r,e,n,t))Ch(o)&&pG(e,o.index);else{let a=uc(o,e);mG(e[jr],a,null,o.value,n,t,null)}}return _3}function Tn(n,t,e,i){let r=bn(),o=nu();if(Pa(r,o,t)){let s=co(),a=Fg();$_e(a,r,n,t,e,i)}return Tn}var Z_t=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function bF(){return bn()[ia][Fo]}var b9=class{destroy(t){}updateValue(t,e){}swap(t,e){let i=Math.min(t,e),r=Math.max(t,e),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(t,e){this.attach(e,this.detach(t))}};function j7(n,t,e,i,r){return n===e&&Object.is(t,i)?1:Object.is(r(n,t),r(e,i))?-1:0}function ywe(n,t,e){let i,r,o=0,s=n.length-1,a=void 0;if(Array.isArray(t)){let l=t.length-1;for(;o<=s&&o<=l;){let c=n.at(o),d=t[o],u=j7(o,c,o,d,e);if(u!==0){u<0&&n.updateValue(o,d),o++;continue}let h=n.at(s),f=t[l],p=j7(s,h,l,f,e);if(p!==0){p<0&&n.updateValue(s,f),s--,l--;continue}let y=e(o,c),v=e(s,h),b=e(o,d);if(Object.is(b,v)){let S=e(l,f);Object.is(S,y)?(n.swap(o,s),n.updateValue(s,f),l--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(i??=new Xx,r??=rK(n,o,s,e),w9(n,i,o,b))n.updateValue(o,d),o++,s++;else if(r.has(b))i.set(y,n.detach(o)),s--;else{let S=n.create(o,t[o]);n.attach(o,S),o++,s++}}for(;o<=l;)iK(n,i,e,o,t[o]),o++}else if(t!=null){let l=t[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let d=n.at(o),u=c.value,h=j7(o,d,o,u,e);if(h!==0)h<0&&n.updateValue(o,u),o++,c=l.next();else{i??=new Xx,r??=rK(n,o,s,e);let f=e(o,u);if(w9(n,i,o,f))n.updateValue(o,u),o++,s++,c=l.next();else if(!r.has(f))n.attach(o,n.create(o,u)),o++,s++,c=l.next();else{let p=e(o,d);i.set(p,n.detach(o)),s--}}}for(;!c.done;)iK(n,i,e,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(l=>{n.destroy(l)})}function w9(n,t,e,i){return t!==void 0&&t.has(i)?(n.attach(e,t.get(i)),t.delete(i),!0):!1}function iK(n,t,e,i,r){if(w9(n,t,i,e(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function rK(n,t,e,i){let r=new Set;for(let o=t;o<=e;o++)r.add(i(o,n.at(o)));return r}var Xx=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,i]of this.kvMap)if(t(i,e),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),t(i,e)}}};function Q(n,t,e,i,r,o,s,a){id("NgControlFlow");let l=bn(),c=co(),d=fc(c.consts,o);return $_(l,c,n,t,e,i,r,d,256,s,a),wF}function wF(n,t,e,i,r,o,s,a){id("NgControlFlow");let l=bn(),c=co(),d=fc(c.consts,o);return $_(l,c,n,t,e,i,r,d,512,s,a),wF}function J(n,t){id("NgControlFlow");let e=bn(),i=nu(),r=e[i]!==Cs?e[i]:-1,o=r!==-1?Yx(e,eo+r):void 0,s=0;if(Pa(e,i,n)){let a=Yn(null);try{if(o!==void 0&&TG(o,s),n!==-1){let l=eo+n,c=Yx(e,l),d=k9(e[Dn],l),u=AG(c,d,e),h=Q_(e,d,t,{dehydratedView:u});J_(c,h,s,Bg(d,u))}}finally{Yn(a)}}else if(o!==void 0){let a=MG(o,s);a!==void 0&&(a[Fo]=t)}}var S9=class{lContainer;$implicit;$index;constructor(t,e,i){this.lContainer=t,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-Po}};function SF(n){return n}function pc(n,t){return t}var C9=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,i){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=i}};function yn(n,t,e,i,r,o,s,a,l,c,d,u,h){id("NgControlFlow");let f=bn(),p=co(),y=l!==void 0,v=bn(),b=a?s.bind(v[ia][Fo]):s,S=new C9(y,b);v[eo+n]=S,$_(f,p,n+1,t,e,i,r,fc(p.consts,o),256),y&&$_(f,p,n+2,l,c,d,u,fc(p.consts,h),512)}var x9=class extends b9{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,i){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=i}get length(){return this.lContainer.length-Po}at(t){return this.getLView(t)[Fo].$implicit}attach(t,e){let i=e[q0];this.needsIndexUpdate||=t!==this.length,J_(this.lContainer,e,t,Bg(this.templateTNode,i)),vwe(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,_we(this.lContainer,t),bwe(this.lContainer,t)}create(t,e){let i=Hx(this.lContainer,this.templateTNode.tView.ssrId),r=Q_(this.hostLView,this.templateTNode,new S9(this.lContainer,e,t),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(t){a3(t[Dn],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[Fo].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Fo].$index=t}getLView(t){return wwe(this.lContainer,t)}};function vn(n){let t=Yn(null),e=ed();try{let i=bn(),r=i[Dn],o=i[e],s=e+1,a=Yx(i,s);if(o.liveCollection===void 0){let c=k9(r,s);o.liveCollection=new x9(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(ywe(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=nu(),d=l.length===0;if(Pa(i,c,d)){let u=e+2,h=Yx(i,u);if(d){let f=k9(r,u),p=AG(h,f,i),y=Q_(i,f,void 0,{dehydratedView:p});J_(h,y,0,Bg(f,p))}else r.firstUpdatePass&&mbe(h),TG(h,0)}}}finally{Yn(t)}}function Yx(n,t){return n[t]}function vwe(n,t){if(n.length<=Po)return;let e=Po+t,i=n[e],r=i?i[X0]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[wh];k_e(o,r),rm.delete(i),r.detachedLeaveAnimationFns=void 0}}function _we(n,t){if(n.length<=Po)return;let e=Po+t,i=n[e],r=i?i[X0]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function bwe(n,t){return z_(n,t)}function wwe(n,t){return MG(n,t)}function k9(n,t){return I_(n,t)}function oe(n,t,e){let i=bn(),r=nu();if(Pa(i,r,t)){let o=co(),s=Fg();hG(s,i,n,t,i[jr],e)}return oe}function M9(n,t,e,i,r){d3(t,n,e,r?"class":"style",i)}function m(n,t,e,i){let r=bn(),o=r[Dn],s=n+eo,a=o.firstCreatePass?cF(s,r,2,t,rF,vx(),e,i):o.data[s];if(oF(a,r,n,t,tX),Eg(a)){let l=r[Dn];c3(l,r,a),N9(l,a,r)}return i!=null&&Z_(r,a),m}function g(){let n=co(),t=us(),e=sF(t);return n.firstCreatePass&&dF(n,e),w7(e)&&S7(),_7(),e.classesWithoutHost!=null&&ive(e)&&M9(n,e,bn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&rve(e)&&M9(n,e,bn(),e.stylesWithoutHost,!1),g}function ee(n,t,e,i){return m(n,t,e,i),g(),ee}function Ho(n,t,e,i){let r=bn(),o=r[Dn],s=n+eo,a=o.firstCreatePass?Abe(s,o,2,t,e,i):o.data[s];return oF(a,r,n,t,tX),i!=null&&Z_(r,a),Ho}function Qo(){let n=us(),t=sF(n);return w7(t)&&S7(),_7(),Qo}function Bs(n,t,e,i){return Ho(n,t,e,i),Qo(),Bs}var tX=(n,t,e,i,r)=>(O_(!0),zK(t[jr],i,k$()));function ob(n,t,e){let i=bn(),r=i[Dn],o=n+eo,s=r.firstCreatePass?cF(o,i,8,"ng-container",rF,vx(),t,e):r.data[o];if(oF(s,i,n,"ng-container",Swe),Eg(s)){let a=i[Dn];c3(a,i,s),N9(a,s,i)}return e!=null&&Z_(i,s),ob}function sb(){let n=co(),t=us(),e=sF(t);return n.firstCreatePass&&dF(n,e),sb}function Yf(n,t,e){return ob(n,t,e),sb(),Yf}var Swe=(n,t,e,i,r)=>(O_(!0),Yve(t[jr],""));function ge(){return bn()}function mc(n,t,e){let i=bn(),r=nu();if(Pa(i,r,t)){let o=co(),s=Fg();fG(s,i,n,t,i[jr],e)}return mc}var Ex=void 0;function Cwe(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var xwe=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ex,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ex,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ex,"{1} 'at' {0}",Ex],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Cwe],H7={};function ol(n){let t=kwe(n),e=oK(t);if(e)return e;let i=t.split("-")[0];if(e=oK(i),e)return e;if(i==="en")return xwe;throw new Je(701,!1)}function oK(n){return n in H7||(H7[n]=cs.ng&&cs.ng.common&&cs.ng.common.locales&&cs.ng.common.locales[n]),H7[n]}var Lo=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Lo||{});function kwe(n){return n.toLowerCase().replace(/_/g,"-")}var ab="en-US";var Mwe=ab;function nX(n){typeof n=="string"&&(Mwe=n.toLowerCase().replace(/_/g,"-"))}function X(n,t,e){let i=bn(),r=co(),o=us();return iX(r,i,i[jr],o,n,t,e),X}function iX(n,t,e,i,r,o,s){let a=!0,l=null;if((i.type&3||s)&&(l??=B7(i,t,o),Ibe(i,n,t,s,e,r,o,l)&&(a=!1)),a){let c=i.outputs?.[r],d=i.hostDirectiveOutputs?.[r];if(d&&d.length)for(let u=0;u<d.length;u+=2){let h=d[u],f=d[u+1];l??=B7(i,t,o),J$(i,t,h,f,r,l)}if(c&&c.length)for(let u of c)l??=B7(i,t,o),J$(i,t,u,r,r,l)}}function E(n=1){return x$(n)}function Twe(n,t){let e=null,i=o_e(n);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){e=r;continue}if(i===null?ZK(n,o,!0):l_e(i,o))return r}return e}function Hr(n){let t=bn()[ia][Ia];if(!t.projection){let e=n?n.length:1,i=t.projection=Jq(e,null),r=i.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=n?Twe(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function Pi(n,t=0,e,i,r,o){let s=bn(),a=co(),l=i?n+1:null;l!==null&&$_(s,a,l,i,r,o,null,e);let c=Wg(a,eo+n,16,null,e||null);c.projection===null&&(c.projection=t),k7();let u=!s[q0]||b7();s[ia][Ia].projection[c.projection]===null&&l!==null?Ewe(s,a,l):u&&!t3(c)&&O_e(a,s,c)}function Ewe(n,t,e){let i=eo+e,r=t.data[i],o=n[i],s=Hx(o,r.tView.ssrId),a=Q_(n,r,void 0,{dehydratedView:s});J_(o,a,0,Bg(r,s))}function Vs(n,t,e,i){zG(n,t,e,i)}function Et(n,t,e){WG(n,t,e)}function _t(n){let t=bn(),e=co(),i=bx();R_(i+1);let r=pF(e,i);if(n.dirty&&a$(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=$G(t,i);n.reset(o,kK),n.notifyOnChanges()}return!0}return!1}function bt(){return fF(bn(),bx())}function CF(n,t,e,i,r){GG(t,zG(n,e,i,r))}function Kg(n,t,e,i){GG(n,WG(t,e,i))}function b3(n=1){R_(bx()+n)}function oa(n){let t=m$();return F_(t,eo+n)}function Ax(n,t){return n<<17|t<<2}function om(n){return n>>17&32767}function Awe(n){return(n&2)==2}function Dwe(n,t){return n&131071|t<<17}function T9(n){return n|2}function Vg(n){return(n&131068)>>2}function W7(n,t){return n&-131069|t<<2}function Iwe(n){return(n&1)===1}function E9(n){return n|1}function Fwe(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=om(s),l=Vg(s);n[i]=e;let c=!1,d;if(Array.isArray(e)){let u=e;d=u[1],(d===null||xg(u,d)>0)&&(c=!0)}else d=e;if(r)if(l!==0){let h=om(n[a+1]);n[i+1]=Ax(h,a),h!==0&&(n[h+1]=W7(n[h+1],i)),n[a+1]=Dwe(n[a+1],i)}else n[i+1]=Ax(a,0),a!==0&&(n[a+1]=W7(n[a+1],i)),a=i;else n[i+1]=Ax(l,0),a===0?a=i:n[l+1]=W7(n[l+1],i),l=i;c&&(n[i+1]=T9(n[i+1])),sK(n,d,i,!0),sK(n,d,i,!1),Pwe(t,d,n,i,o),s=Ax(a,l),o?t.classBindings=s:t.styleBindings=s}function Pwe(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&xg(o,t)>=0&&(e[i+1]=E9(e[i+1]))}function sK(n,t,e,i){let r=n[e+1],o=t===null,s=i?om(r):Vg(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];Lwe(l,t)&&(a=!0,n[s+1]=i?E9(c):T9(c)),s=i?om(c):Vg(c)}a&&(n[e+1]=i?T9(r):E9(r))}function Lwe(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?xg(n,t)>=0:!1}var nd={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rwe(n){return n.substring(nd.key,nd.keyEnd)}function Owe(n){return Nwe(n),rX(n,oX(n,0,nd.textEnd))}function rX(n,t){let e=nd.textEnd;return e===t?-1:(t=nd.keyEnd=Bwe(n,nd.key=t,e),oX(n,t,e))}function Nwe(n){nd.key=0,nd.keyEnd=0,nd.value=0,nd.valueEnd=0,nd.textEnd=n.length}function oX(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Bwe(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function In(n,t,e){return sX(n,t,e,!1),In}function Ue(n,t){return sX(n,t,null,!0),Ue}function sl(n){Uwe($we,Vwe,n,!0)}function Vwe(n,t){for(let e=Owe(t);e>=0;e=rX(t,e))fx(n,Rwe(t),!0)}function sX(n,t,e,i){let r=bn(),o=co(),s=L_(2);if(o.firstUpdatePass&&lX(o,n,s,i),t!==Cs&&Pa(r,s,t)){let a=o.data[ed()];cX(o,a,r,r[jr],n,r[s+1]=Gwe(t,e),i,s)}}function Uwe(n,t,e,i){let r=co(),o=L_(2);r.firstUpdatePass&&lX(r,null,o,i);let s=bn();if(e!==Cs&&Pa(s,o,e)){let a=r.data[ed()];if(dX(a,i)&&!aX(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=lx(l,e||"")),M9(r,a,s,e,i)}else Kwe(r,a,s,s[jr],s[o+1],s[o+1]=qwe(n,t,e),i,o)}}function aX(n,t){return t>=n.expandoStartIndex}function lX(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[ed()],s=aX(n,e);dX(o,i)&&t===null&&!s&&(t=!1),t=jwe(r,o,t,i),Fwe(r,o,t,e,s,i)}}function jwe(n,t,e,i){let r=b$(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=z7(null,n,t,e,i),e=K_(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=z7(r,n,t,e,i),o===null){let l=Hwe(n,t,i);l!==void 0&&Array.isArray(l)&&(l=z7(null,n,t,l[1],i),l=K_(l,t.attrs,i),Wwe(n,t,i,l))}else o=zwe(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function Hwe(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Vg(i)!==0)return n[om(i)]}function Wwe(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[om(r)]=i}function zwe(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=K_(i,s,e)}return K_(i,t.attrs,e)}function z7(n,t,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],i=K_(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function K_(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),fx(n,s,e?!0:t[++o]))}return n===void 0?null:n}function qwe(n,t,e){if(e==null||e==="")return na;let i=[],r=Bl(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function $we(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&fx(n,i,e)}function Kwe(n,t,e,i,r,o,s,a){r===Cs&&(r=na);let l=0,c=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;d!==null||u!==null;){let h=l<r.length?r[l+1]:void 0,f=c<o.length?o[c+1]:void 0,p=null,y;d===u?(l+=2,c+=2,h!==f&&(p=u,y=f)):u===null||d!==null&&d<u?(l+=2,p=d):(c+=2,p=u,y=f),p!==null&&cX(n,t,e,i,p,y,s,a),d=l<r.length?r[l]:null,u=c<o.length?o[c]:null}}function cX(n,t,e,i,r,o,s,a){if(!(t.type&3))return;let l=n.data,c=l[a+1],d=Iwe(c)?aK(l,t,e,r,Vg(c),s):void 0;if(!Zx(d)){Zx(o)||Awe(c)&&(o=aK(l,null,e,r,a,s));let u=h7(ed(),e);B_e(i,s,u,r,o)}}function aK(n,t,e,i,r,o){let s=t===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),d=c?l[1]:l,u=d===null,h=e[r+1];h===Cs&&(h=u?na:void 0);let f=u?px(h,i):d===i?h:void 0;if(c&&!Zx(f)&&(f=px(l,i)),Zx(f)&&(a=f,s))return a;let p=n[r+1];r=s?om(p):Vg(p)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=px(l,i))}return a}function Zx(n){return n!==void 0}function Gwe(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=_h(Bl(n)))),n}function dX(n,t){return(n.flags&(t?8:16))!==0}function w(n,t=""){let e=bn(),i=co(),r=n+eo,o=i.firstCreatePass?Wg(i,r,1,t,null):i.data[r],s=Xwe(i,e,o,t,n);e[r]=s,Cx()&&nF(i,e,s,o),Dg(o,!1)}var Xwe=(n,t,e,i,r)=>(O_(!0),Gve(t[jr],i));function uX(n,t,e,i=""){return Pa(n,nu(),e)?t+lc(e)+i:Cs}function Ywe(n,t,e,i,r,o=""){let s=T7(),a=hF(n,s,e,r);return L_(2),a?t+lc(e)+i+lc(r)+o:Cs}function Zwe(n,t,e,i,r,o,s,a=""){let l=T7(),c=OG(n,l,e,r,s);return L_(3),c?t+lc(e)+i+lc(r)+o+lc(s)+a:Cs}function Ee(n){return je("",n),Ee}function je(n,t,e){let i=bn(),r=uX(i,n,t,e);return r!==Cs&&xF(i,ed(),r),je}function ei(n,t,e,i,r){let o=bn(),s=Ywe(o,n,t,e,i,r);return s!==Cs&&xF(o,ed(),s),ei}function w3(n,t,e,i,r,o,s){let a=bn(),l=Zwe(a,n,t,e,i,r,o,s);return l!==Cs&&xF(a,ed(),l),w3}function xF(n,t,e){let i=h7(t,n);Xve(n[jr],i,e)}function Oe(n,t,e){F7(t)&&(t=t());let i=bn(),r=nu();if(Pa(i,r,t)){let o=co(),s=Fg();hG(s,i,n,t,i[jr],e)}return Oe}function Ve(n,t){let e=F7(n);return e&&n.set(t),e}function Ne(n,t){let e=bn(),i=co(),r=us();return iX(i,e,e[jr],r,n,t),Ne}function S3(n){return Pa(bn(),nu(),n)?lc(n):Cs}function sa(n,t,e=""){return uX(bn(),n,t,e)}function Qwe(n,t,e){let i=co();if(i.firstCreatePass){let r=tu(n);A9(e,i.data,i.blueprint,r,!0),A9(t,i.data,i.blueprint,r,!1)}}function A9(n,t,e,i,r){if(n=Rs(n),Array.isArray(n))for(let o=0;o<n.length;o++)A9(n[o],t,e,i,r);else{let o=co(),s=bn(),a=us(),l=H0(n)?n:Rs(n.provide),c=o7(n),d=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(H0(n)||!n.multi){let f=new nm(c,r,ut,null),p=$7(l,t,r?d:d+h,u);p===-1?(G7(Bx(a,s),o,l),q7(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(f),s.push(f)):(e[p]=f,s[p]=f)}else{let f=$7(l,t,d+h,u),p=$7(l,t,d,d+h),y=f>=0&&e[f],v=p>=0&&e[p];if(r&&!v||!r&&!y){G7(Bx(a,s),o,l);let b=t5e(r?e5e:Jwe,e.length,r,i,c,n);!r&&v&&(e[p].providerFactory=b),q7(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(b),s.push(b)}else{let b=hX(e[r?p:f],c,!r&&i);q7(o,n,f>-1?f:p,b)}!r&&i&&v&&e[p].componentProviders++}}}function q7(n,t,e,i){let r=H0(t),o=r$(t);if(r||o){let l=(o?Rs(t.useClass):t).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let d=c.indexOf(e);d===-1?c.push(e,[i,l]):c[d+1].push(i,l)}else c.push(e,l)}}}function hX(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function $7(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function Jwe(n,t,e,i,r){return D9(this.multi,[])}function e5e(n,t,e,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=j_(i,i[Dn],this.providerFactory.index,r);s=l.slice(0,a),D9(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],D9(o,s);return s}function D9(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function t5e(n,t,e,i,r,o){let s=new nm(n,e,ut,null);return s.multi=[],s.index=t,s.componentProviders=0,hX(s,r,i&&!e),s}function Zi(n,t=[]){return e=>{e.providersResolver=(i,r)=>Qwe(i,r?r(n):n,t)}}function Ei(n,t,e){let i=Q0()+n,r=bn();return r[i]===Cs?f3(r,i,e?t.call(e):t()):Dbe(r,i)}function Zf(n,t,e,i){return fX(bn(),Q0(),n,t,e,i)}function lb(n,t,e,i,r){return pX(bn(),Q0(),n,t,e,i,r)}function kF(n,t){let e=n[t];return e===Cs?void 0:e}function fX(n,t,e,i,r,o){let s=t+e;return Pa(n,s,r)?f3(n,s+1,o?i.call(o,r):i(r)):kF(n,s+1)}function pX(n,t,e,i,r,o,s){let a=t+e;return hF(n,a,r,o)?f3(n,a+2,s?i.call(s,r,o):i(r,o)):kF(n,a+2)}function n5e(n,t,e,i,r,o,s,a){let l=t+e;return OG(n,l,r,o,s)?f3(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):kF(n,l+3)}function ct(n,t){let e=co(),i,r=n+eo;e.firstCreatePass?(i=i5e(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=Rf(i.type,!0)),s,a=Da(ut);try{let l=Nx(!1),c=o();return Nx(l),f7(e,bn(),r,c),c}finally{Da(a)}}function i5e(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function mt(n,t,e){let i=n+eo,r=bn(),o=F_(r,i);return MF(r,i)?fX(r,Q0(),t,o.transform,e,o):o.transform(e)}function lu(n,t,e,i){let r=n+eo,o=bn(),s=F_(o,r);return MF(o,r)?pX(o,Q0(),t,s.transform,e,i,s):s.transform(e,i)}function C3(n,t,e,i,r){let o=n+eo,s=bn(),a=F_(s,o);return MF(s,o)?n5e(s,Q0(),t,a.transform,e,i,r,a):a.transform(e,i,r)}function MF(n,t){return n[Dn].data[t].pure}function vr(n,t){return u3(n,t)}var Qx=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},TF=(()=>{class n{compileModuleSync(e){return new Gx(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=t7(e),o=XK(r.declarations).reduce((s,a)=>{let l=Zd(a);return l&&s.push(new qf(l)),s},[]);return new Qx(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var r5e=(()=>{class n{zone=N(Pt);changeDetectionScheduler=N(sc);applicationRef=N(Ns);applicationErrorHandler=N(Fa);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(e){this.applicationErrorHandler(e)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mX({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new Pt(Ge(le({},gX()),{scheduleInRootZone:e})),[{provide:Pt,useFactory:n},{provide:bh,multi:!0,useFactory:()=>{let i=N(r5e,{optional:!0});return()=>i.initialize()}},{provide:bh,multi:!0,useFactory:()=>{let i=N(o5e);return()=>{i.initialize()}}},t===!0?{provide:P7,useValue:!0}:[],{provide:L7,useValue:e??tG},{provide:Fa,useFactory:()=>{let i=N(Pt),r=N(Ur),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(ws),o.handleError(s))})}}}]}function gX(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var o5e=(()=>{class n{subscription=new qn;initialized=!1;zone=N(Pt);pendingTasks=N(iu);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yX=(()=>{class n{applicationErrorHandler=N(Fa);appRef=N(Ns);taskService=N(iu);ngZone=N(Pt);zonelessEnabled=N(N_);tracing=N(Xf,{optional:!0});disableScheduling=N(P7,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new qn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ux):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(L7,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof jx||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?W$:nG;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ux+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(e),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,W$(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function s5e(){return typeof $localize<"u"&&$localize.locale||ab}var Qf=new $e("",{providedIn:"root",factory:()=>N(Qf,{optional:!0,skipSelf:!0})||s5e()});var x3=class{destroyed=!1;listeners=null;errorHandler=N(ws,{optional:!0});destroyRef=N(Zt);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new Je(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let e=this.listeners?.indexOf(t);e!==void 0&&e!==-1&&this.listeners?.splice(e,1)}}}emit(t){if(this.destroyed){console.warn(ac(953,!1));return}if(this.listeners===null)return;let e=Yn(null);try{for(let i of this.listeners)try{i(t)}catch(r){this.errorHandler?.handleError(r)}}finally{Yn(e)}}};function ko(n){return jq(n)}function _e(n,t){return d_(n,t?.equal)}var EF=class{[as];constructor(t){this[as]=t}destroy(){this[as].destroy()}};function rd(n,t){let e=t?.injector??N(tn),i=t?.manualCleanup!==!0?e.get(Zt):null,r,o=e.get(J0,null,{optional:!0}),s=e.get(sc);return o!==null?(r=c5e(o.view,s,n),i instanceof x_&&i._lView===o.view&&(i=null)):r=d5e(n,e.get(B_),s),r.injector=e,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new EF(r)}var vX=Ge(le({},Hq),{cleanupFns:void 0,zone:null,onDestroyFn:em,run(){let n=Ig(!1);try{Wq(this)}finally{Ig(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=Yn(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Yn(n)}}}),a5e=Ge(le({},vX),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){kf(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),l5e=Ge(le({},vX),{consumerMarkedDirty(){this.view[Jn]|=8192,jf(this.view),this.notifier.notify(13)},destroy(){kf(this),this.onDestroyFn(),this.cleanup(),this.view[Sh]?.delete(this)}});function c5e(n,t,e){let i=Object.create(l5e);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=t,i.fn=_X(i,e),n[Sh]??=new Set,n[Sh].add(i),i.consumerMarkedDirty(i),i}function d5e(n,t,e){let i=Object.create(a5e);return i.fn=_X(i,n),i.scheduler=t,i.notifier=e,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function _X(n,t){return()=>{t(e=>(n.cleanupFns??=[]).push(e))}}var TX=Symbol("InputSignalNode#UNSET"),_5e=Ge(le({},u_),{transformFn:void 0,applyValueToInputSignal(n,t){pg(n,t)}});function EX(n,t){let e=Object.create(_5e);e.value=n,e.transformFn=t?.transform;function i(){if(D0(e),e.value===TX){let r=null;throw new Je(-950,r)}return e.value}return i[as]=e,i}var gc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>G_(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},b5e=new $e("");b5e.__NG_ELEMENT_ID__=n=>{let t=us();if(t===null)throw new Je(204,!1);if(t.type&2)return t.value;if(n&8)return null;throw new Je(204,!1)};function E3(n){return new x3}function bX(n,t){return EX(n,t)}function w5e(n){return EX(TX,n)}var Ra=(bX.required=w5e,bX);function wX(n,t){return mF(t)}function S5e(n,t){return gF(t)}var db=(wX.required=S5e,wX);function SX(n,t){return mF(t)}function C5e(n,t){return gF(t)}var AX=(SX.required=C5e,SX);var DF=new $e(""),x5e=new $e("");function cb(n){return!n.moduleRef}function k5e(n){let t=cb(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Pt);return e.run(()=>{cb(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(Fa),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:i})}),cb(n)){let o=()=>t.destroy(),s=n.platformInjector.get(DF);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(DF);s.add(o),n.moduleRef.onDestroy(()=>{U_(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return T5e(i,e,()=>{let o=t.get(iu),s=o.add(),a=t.get(_F);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(Qf,ab);if(nX(l||ab),!t.get(x5e,!0))return cb(n)?t.get(Ns):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(cb(n)){let d=t.get(Ns);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return M5e?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var M5e;function T5e(n,t,e){try{let i=e();return Eh(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n(i)),i}}var k3=null;function E5e(n=[],t){return tn.create({name:t,providers:[{provide:E_,useValue:"platform"},{provide:DF,useValue:new Set([()=>k3=null])},...n]})}function A5e(n=[]){if(k3)return k3;let t=E5e(n);return k3=t,JG(),D5e(t),t}function D5e(n){let t=n.get(Jx,null);Yo(n,()=>{t?.forEach(e=>e())})}var vi=(()=>{class n{static __NG_ELEMENT_ID__=I5e}return n})();function I5e(n){return F5e(us(),bn(),(n&16)===16)}function F5e(n,t,e){if(Ch(n)&&!e){let i=hc(n.index,t);return new zf(i,i)}else if(n.type&175){let i=t[ia];return new zf(i,t)}return null}var IF=class{constructor(){}supports(t){return uF(t)}create(t){return new FF(t)}},P5e=(n,t)=>t,FF=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||P5e}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<CX(i,r,o)?e:i,a=CX(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,d=l-r;if(c!=d){for(let h=0;h<c;h++){let f=h<o.length?o[h]:o[h]=0,p=f+h;d<=p&&p<c&&(o[h]=f+1)}let u=s.previousIndex;o[u]=d-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!uF(t))throw new Je(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,LG(t,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new PF(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new M3),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new M3),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},PF=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},LF=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},M3=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new LF,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function CX(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function xX(){return new ub([new IF])}var ub=(()=>{class n{factories;static \u0275prov=He({token:n,providedIn:"root",factory:xX});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let i=N(n,{optional:!0,skipSelf:!0});return n.create(e,i||xX())}}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new Je(901,!1)}}return n})();var DX=(()=>{class n{constructor(e){}static \u0275fac=function(i){return new(i||n)(Ye(Ns))};static \u0275mod=zt({type:n});static \u0275inj=Vt({})}return n})();function IX(n){let{rootComponent:t,appProviders:e,platformProviders:i,platformRef:r}=n;Nr(8);try{let o=r?.injector??A5e(i),s=[mX({}),{provide:sc,useExisting:yX},T$,...e||[]],a=new q_({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return k5e({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{Nr(9)}}function Fn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function xs(n,t=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):t}var AF=Symbol("NOT_SET"),FX=new Set,L5e=Ge(le({},u_),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:AF,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(n){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==AF&&!F0(this))return this.signal;try{for(let r of this.cleanup??FX)r()}finally{this.cleanup?.clear()}let t=[];n!==void 0&&t.push(n),t.push(this.registerCleanupFn);let e=xf(this),i;try{i=this.userFn.apply(null,t)}finally{I0(this,e)}return(this.value===AF||!this.equal(this.value,i))&&(this.value=i,this.version++),this.signal}}),RF=class extends H_{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(t,e,i,r,o,s=null){super(t,[void 0,void 0,void 0,void 0],i,!1,o.get(Zt),s),this.scheduler=r;for(let a of J9){let l=e[a];if(l===void 0)continue;let c=Object.create(L5e);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(D0(c),c.value),c.signal[as]=c,c.registerCleanupFn=d=>(c.cleanup??=new Set).add(d),this.nodes[a]=c,this.hooks[a]=d=>c.phaseFn(d)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let t of this.nodes)if(t)try{for(let e of t.cleanup??FX)e()}finally{kf(t)}}};function A3(n,t){let e=t?.injector??N(tn),i=e.get(sc),r=e.get(s3),o=e.get(Xf,null,{optional:!0});r.impl??=e.get(eF);let s=n;typeof s=="function"&&(s={mixedReadWrite:n});let a=e.get(J0,null,{optional:!0}),l=new RF(r.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,i,e,o?.snapshot(null));return r.impl.register(l),l}function D3(n,t){let e=Zd(n),i=t.elementInjector||kg();return new qf(e).create(i,t.projectableNodes,t.hostElement,t.environmentInjector,t.directives,t.bindings)}function PX(n){let t=Zd(n);if(!t)return null;let e=new qf(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var OX=null;function Vl(){return OX}function OF(n){OX??=n}var hb=class{},fb=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:()=>N(NX),providedIn:"platform"})}return n})(),NF=new $e(""),NX=(()=>{class n extends fb{_location;_history;_doc=N(gn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vl().getBaseHref(this._doc)}onPopState(e){let i=Vl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Vl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function I3(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function LX(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function od(n){return n&&n[0]!=="?"?`?${n}`:n}var sd=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:()=>N(P3),providedIn:"root"})}return n})(),F3=new $e(""),P3=(()=>{class n extends sd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??N(gn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return I3(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+od(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+od(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+od(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(Ye(fb),Ye(F3,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cu=(()=>{class n{_subject=new Xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=N5e(LX(RX(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+od(i))}normalize(e){return n.stripTrailingSlash(O5e(this._basePath,RX(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+od(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+od(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=od;static joinWithSlash=I3;static stripTrailingSlash=LX;static \u0275fac=function(i){return new(i||n)(Ye(sd))};static \u0275prov=He({token:n,factory:()=>R5e(),providedIn:"root"})}return n})();function R5e(){return new cu(Ye(sd))}function O5e(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function RX(n){return n.replace(/\/index.html$/,"")}function N5e(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var $F=(()=>{class n extends sd{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=I3(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+od(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+od(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(Ye(fb),Ye(F3,8))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})();var KF=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(KF||{});var aa=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(aa||{}),Wr=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Wr||{}),al=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(al||{}),ll={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function WX(n){return ol(n)[Lo.LocaleId]}function zX(n,t,e){let i=ol(n),r=[i[Lo.DayPeriodsFormat],i[Lo.DayPeriodsStandalone]],o=yc(r,t);return yc(o,e)}function qX(n,t,e){let i=ol(n),r=[i[Lo.DaysFormat],i[Lo.DaysStandalone]],o=yc(r,t);return yc(o,e)}function $X(n,t,e){let i=ol(n),r=[i[Lo.MonthsFormat],i[Lo.MonthsStandalone]],o=yc(r,t);return yc(o,e)}function KX(n,t){let i=ol(n)[Lo.Eras];return yc(i,t)}function pb(n,t){let e=ol(n);return yc(e[Lo.DateFormat],t)}function mb(n,t){let e=ol(n);return yc(e[Lo.TimeFormat],t)}function gb(n,t){let i=ol(n)[Lo.DateTimeFormat];return yc(i,t)}function du(n,t){let e=ol(n),i=e[Lo.NumberSymbols][t];if(typeof i>"u"){if(t===ll.CurrencyDecimal)return e[Lo.NumberSymbols][ll.Decimal];if(t===ll.CurrencyGroup)return e[Lo.NumberSymbols][ll.Group]}return i}function GX(n,t){return ol(n)[Lo.NumberFormats][t]}function XX(n){if(!n[Lo.ExtraData])throw new Je(2303,!1)}function YX(n){let t=ol(n);return XX(t),(t[Lo.ExtraData][2]||[]).map(i=>typeof i=="string"?BF(i):[BF(i[0]),BF(i[1])])}function ZX(n,t,e){let i=ol(n);XX(i);let r=[i[Lo.ExtraData][0],i[Lo.ExtraData][1]],o=yc(r,t)||[];return yc(o,e)||[]}function yc(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Je(2304,!1)}function BF(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var B5e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,L3={},V5e=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function QX(n,t,e,i){let r=G5e(n);t=Ah(e,t)||t;let s=[],a;for(;t;)if(a=V5e.exec(t),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;t=d}else{s.push(t);break}let l=r.getTimezoneOffset();i&&(l=eY(i,l),r=K5e(r,i));let c="";return s.forEach(d=>{let u=q5e(d);c+=u?u(r,e,l):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function V3(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Ah(n,t){let e=WX(n);if(L3[e]??={},L3[e][t])return L3[e][t];let i="";switch(t){case"shortDate":i=pb(n,al.Short);break;case"mediumDate":i=pb(n,al.Medium);break;case"longDate":i=pb(n,al.Long);break;case"fullDate":i=pb(n,al.Full);break;case"shortTime":i=mb(n,al.Short);break;case"mediumTime":i=mb(n,al.Medium);break;case"longTime":i=mb(n,al.Long);break;case"fullTime":i=mb(n,al.Full);break;case"short":let r=Ah(n,"shortTime"),o=Ah(n,"shortDate");i=R3(gb(n,al.Short),[r,o]);break;case"medium":let s=Ah(n,"mediumTime"),a=Ah(n,"mediumDate");i=R3(gb(n,al.Medium),[s,a]);break;case"long":let l=Ah(n,"longTime"),c=Ah(n,"longDate");i=R3(gb(n,al.Long),[l,c]);break;case"full":let d=Ah(n,"fullTime"),u=Ah(n,"fullDate");i=R3(gb(n,al.Full),[d,u]);break}return i&&(L3[e][t]=i),i}function R3(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function ad(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function U5e(n,t){return ad(n,3).substring(0,t)}function Jo(n,t,e=0,i=!1,r=!1){return function(o,s){let a=j5e(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return U5e(a,t);let l=du(s,ll.MinusSign);return ad(a,t,l,i,r)}}function j5e(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Je(2301,!1)}}function to(n,t,e=aa.Format,i=!1){return function(r,o){return H5e(r,o,n,t,e,i)}}function H5e(n,t,e,i,r,o){switch(e){case 2:return $X(t,r,i)[n.getMonth()];case 1:return qX(t,r,i)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=YX(t),d=ZX(t,r,i),u=c.findIndex(h=>{if(Array.isArray(h)){let[f,p]=h,y=s>=f.hours&&a>=f.minutes,v=s<p.hours||s===p.hours&&a<p.minutes;if(f.hours<p.hours){if(y&&v)return!0}else if(y||v)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(u!==-1)return d[u]}return zX(t,r,i)[s<12?0:1];case 3:return KX(t,i)[n.getFullYear()<=0?0:1];default:let l=e;throw new Je(2302,!1)}}function O3(n){return function(t,e,i){let r=-1*i,o=du(e,ll.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+ad(s,2,o)+ad(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+ad(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+ad(s,2,o)+":"+ad(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+ad(s,2,o)+":"+ad(Math.abs(r%60),2,o);default:throw new Je(2310,!1)}}}var W5e=0,B3=4;function z5e(n){let t=V3(n,W5e,1).getDay();return V3(n,0,1+(t<=B3?B3:B3+7)-t)}function JX(n){let t=n.getDay(),e=t===0?-3:B3-t;return V3(n.getFullYear(),n.getMonth(),n.getDate()+e)}function VF(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=JX(e),s=z5e(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return ad(r,n,du(i,ll.MinusSign))}}function N3(n,t=!1){return function(e,i){let o=JX(e).getFullYear();return ad(o,n,du(i,ll.MinusSign),t)}}var UF={};function q5e(n){if(UF[n])return UF[n];let t;switch(n){case"G":case"GG":case"GGG":t=to(3,Wr.Abbreviated);break;case"GGGG":t=to(3,Wr.Wide);break;case"GGGGG":t=to(3,Wr.Narrow);break;case"y":t=Jo(0,1,0,!1,!0);break;case"yy":t=Jo(0,2,0,!0,!0);break;case"yyy":t=Jo(0,3,0,!1,!0);break;case"yyyy":t=Jo(0,4,0,!1,!0);break;case"Y":t=N3(1);break;case"YY":t=N3(2,!0);break;case"YYY":t=N3(3);break;case"YYYY":t=N3(4);break;case"M":case"L":t=Jo(1,1,1);break;case"MM":case"LL":t=Jo(1,2,1);break;case"MMM":t=to(2,Wr.Abbreviated);break;case"MMMM":t=to(2,Wr.Wide);break;case"MMMMM":t=to(2,Wr.Narrow);break;case"LLL":t=to(2,Wr.Abbreviated,aa.Standalone);break;case"LLLL":t=to(2,Wr.Wide,aa.Standalone);break;case"LLLLL":t=to(2,Wr.Narrow,aa.Standalone);break;case"w":t=VF(1);break;case"ww":t=VF(2);break;case"W":t=VF(1,!0);break;case"d":t=Jo(2,1);break;case"dd":t=Jo(2,2);break;case"c":case"cc":t=Jo(7,1);break;case"ccc":t=to(1,Wr.Abbreviated,aa.Standalone);break;case"cccc":t=to(1,Wr.Wide,aa.Standalone);break;case"ccccc":t=to(1,Wr.Narrow,aa.Standalone);break;case"cccccc":t=to(1,Wr.Short,aa.Standalone);break;case"E":case"EE":case"EEE":t=to(1,Wr.Abbreviated);break;case"EEEE":t=to(1,Wr.Wide);break;case"EEEEE":t=to(1,Wr.Narrow);break;case"EEEEEE":t=to(1,Wr.Short);break;case"a":case"aa":case"aaa":t=to(0,Wr.Abbreviated);break;case"aaaa":t=to(0,Wr.Wide);break;case"aaaaa":t=to(0,Wr.Narrow);break;case"b":case"bb":case"bbb":t=to(0,Wr.Abbreviated,aa.Standalone,!0);break;case"bbbb":t=to(0,Wr.Wide,aa.Standalone,!0);break;case"bbbbb":t=to(0,Wr.Narrow,aa.Standalone,!0);break;case"B":case"BB":case"BBB":t=to(0,Wr.Abbreviated,aa.Format,!0);break;case"BBBB":t=to(0,Wr.Wide,aa.Format,!0);break;case"BBBBB":t=to(0,Wr.Narrow,aa.Format,!0);break;case"h":t=Jo(3,1,-12);break;case"hh":t=Jo(3,2,-12);break;case"H":t=Jo(3,1);break;case"HH":t=Jo(3,2);break;case"m":t=Jo(4,1);break;case"mm":t=Jo(4,2);break;case"s":t=Jo(5,1);break;case"ss":t=Jo(5,2);break;case"S":t=Jo(6,1);break;case"SS":t=Jo(6,2);break;case"SSS":t=Jo(6,3);break;case"Z":case"ZZ":case"ZZZ":t=O3(0);break;case"ZZZZZ":t=O3(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=O3(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=O3(2);break;default:return null}return UF[n]=t,t}function eY(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function $5e(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function K5e(n,t,e){let r=n.getTimezoneOffset(),o=eY(t,r);return $5e(n,-1*(o-r))}function G5e(n){if(BX(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return V3(r,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(B5e))return X5e(i)}let t=new Date(n);if(!BX(t))throw new Je(2311,!1);return t}function X5e(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,c),t}function BX(n){return n instanceof Date&&!isNaN(n.valueOf())}var Y5e=/^(\d+)?\.((\d+)(-(\d+))?)?$/,VX=22,U3=".",yb="0",Z5e=";",Q5e=",",jF="#";function J5e(n,t,e,i,r,o,s=!1){let a="",l=!1;if(!isFinite(n))a=du(e,ll.Infinity);else{let c=nSe(n);s&&(c=tSe(c));let d=t.minInt,u=t.minFrac,h=t.maxFrac;if(o){let S=o.match(Y5e);if(S===null)throw new Je(2306,!1);let x=S[1],k=S[3],L=S[5];x!=null&&(d=HF(x)),k!=null&&(u=HF(k)),L!=null?h=HF(L):k!=null&&u>h&&(h=u)}iSe(c,u,h);let f=c.digits,p=c.integerLen,y=c.exponent,v=[];for(l=f.every(S=>!S);p<d;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?v=f.splice(p,f.length):(v=f,f=[0]);let b=[];for(f.length>=t.lgSize&&b.unshift(f.splice(-t.lgSize,f.length).join(""));f.length>t.gSize;)b.unshift(f.splice(-t.gSize,f.length).join(""));f.length&&b.unshift(f.join("")),a=b.join(du(e,i)),v.length&&(a+=du(e,r)+v.join("")),y&&(a+=du(e,ll.Exponential)+"+"+y)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function tY(n,t,e){let i=GX(t,KF.Decimal),r=eSe(i,du(t,ll.MinusSign));return J5e(n,r,t,ll.Group,ll.Decimal,e)}function eSe(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(Z5e),r=i[0],o=i[1],s=r.indexOf(U3)!==-1?r.split(U3):[r.substring(0,r.lastIndexOf(yb)+1),r.substring(r.lastIndexOf(yb)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(jF));for(let d=0;d<l.length;d++){let u=l.charAt(d);u===yb?e.minFrac=e.maxFrac=d+1:u===jF?e.maxFrac=d+1:e.posSuf+=u}let c=a.split(Q5e);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let d=r.length-e.posPre.length-e.posSuf.length,u=o.indexOf(jF);e.negPre=o.substring(0,u).replace(/'/g,""),e.negSuf=o.slice(u+d).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function tSe(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function nSe(n){let t=Math.abs(n)+"",e=0,i,r,o,s,a;for((r=t.indexOf(U3))>-1&&(t=t.replace(U3,"")),(o=t.search(/e/i))>0?(r<0&&(r=o),r+=+t.slice(o+1),t=t.substring(0,o)):r<0&&(r=t.length),o=0;t.charAt(o)===yb;o++);if(o===(a=t.length))i=[0],r=1;else{for(a--;t.charAt(a)===yb;)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(t.charAt(o))}return r>VX&&(i=i.splice(0,VX-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function iSe(n,t,e){if(t>e)throw new Je(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(t,r),e),s=o+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let u=s;u<i.length;u++)i[u]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let u=1;u<s;u++)i[u]=0}if(a>=5)if(s-1<0){for(let u=0;u>s;u--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let l=o!==0,c=t+n.integerLen,d=i.reduceRight(function(u,h,f,p){return h=h+u,p[f]=h<10?h:h-10,l&&(p[f]===0&&f>=c?p.pop():l=!1),h>=10?1:0},0);d&&(i.unshift(d),n.integerLen++)}function HF(n){let t=parseInt(n);if(isNaN(t))throw new Je(2305,!1);return t}var WF=/\s+/,UX=[],Oa=(()=>{class n{_ngEl;_renderer;initialClasses=UX;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(WF):UX}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(WF):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(WF).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(ut(Kt),ut(dr))};static \u0275dir=qt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var j3=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},W3=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new j3(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),jX(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);jX(o,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(ut(Dr),ut(ra),ut(ub))};static \u0275dir=qt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function jX(n,t){n.context.$implicit=t.item}var GF=(()=>{class n{_viewContainer;_context=new H3;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){HX(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){HX(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(ut(Dr),ut(ra))};static \u0275dir=qt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),H3=class{$implicit=null;ngIf=null};function HX(n,t){if(n&&!n.createEmbeddedView)throw new Je(2020,!1)}var vb=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(ut(Dr))};static \u0275dir=qt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[or]})}return n})();function z3(n,t){return new Je(2100,!1)}var zF=class{createSubscription(t,e,i){return ko(()=>t.subscribe({next:e,error:i}))}dispose(t){ko(()=>t.unsubscribe())}},qF=class{createSubscription(t,e,i){return t.then(r=>e?.(r),r=>i?.(r)),{unsubscribe:()=>{e=null,i=null}}}dispose(t){t.unsubscribe()}},rSe=new qF,oSe=new zF,zi=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=N(Fa);constructor(e){this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i),i=>this.applicationErrorHandler(i))}_selectStrategy(e){if(Eh(e))return rSe;if(y3(e))return oSe;throw z3(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(ut(vi,16))};static \u0275pipe=qg({name:"async",type:n,pure:!1})}return n})();var sSe="mediumDate",nY=new $e(""),iY=new $e(""),ld=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,o){if(e==null||e===""||e!==e)return null;try{let s=i??this.defaultOptions?.dateFormat??sSe,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return QX(e,s,o||this.locale,a)}catch(s){throw z3(n,s.message)}}static \u0275fac=function(i){return new(i||n)(ut(Qf,16),ut(nY,24),ut(iY,24))};static \u0275pipe=qg({name:"date",type:n,pure:!0})}return n})();var _b=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,r){if(!aSe(e))return null;r||=this._locale;try{let o=lSe(e);return tY(o,r,i)}catch(o){throw z3(n,o.message)}}static \u0275fac=function(i){return new(i||n)(ut(Qf,16))};static \u0275pipe=qg({name:"number",type:n,pure:!0})}return n})();function aSe(n){return!(n==null||n===""||n!==n)}function lSe(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Je(2309,!1);return n}var XF=(()=>{class n{transform(e,i,r){if(e==null)return null;if(!(typeof e=="string"||Array.isArray(e)))throw z3(n,e);return e.slice(i,r)}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=qg({name:"slice",type:n,pure:!1})}return n})();var ln=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({})}return n})();function bb(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var sm=class{};var ZF="browser",cSe="server";function rY(n){return n===ZF}function oY(n){return n===cSe}var sY=(()=>{class n{static \u0275prov=He({token:n,providedIn:"root",factory:()=>new YF(N(gn),window)})}return n})(),YF=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,e){this.window.scrollTo(Ge(le({},e),{left:t[0],top:t[1]}))}scrollToAnchor(t,e){let i=dSe(this.document,t);i&&(this.scrollToElement(i,e),i.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(ac(2400,!1))}}scrollToElement(t,e){let i=t.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Ge(le({},e),{left:r-s[0],top:o-s[1]}))}};function dSe(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}var wb=class{_doc;constructor(t){this._doc=t}manager},q3=(()=>{class n extends wb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,o){return e.addEventListener(i,r,o),()=>this.removeEventListener(e,i,r,o)}removeEventListener(e,i,r,o){return e.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Ye(gn))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),K3=new $e(""),nP=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(s=>{s.manager=this});let r=e.filter(s=>!(s instanceof q3));this._plugins=r.slice().reverse();let o=e.find(s=>s instanceof q3);o&&this._plugins.push(o)}addEventListener(e,i,r,o){return this._findPluginFor(i).addEventListener(e,i,r,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new Je(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(Ye(K3),Ye(Pt))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),QF="ng-app-id";function aY(n){for(let t of n)t.remove()}function lY(n,t){let e=t.createElement("style");return e.textContent=n,e}function uSe(n,t,e,i){let r=n.head?.querySelectorAll(`style[${QF}="${t}"],link[${QF}="${t}"]`);if(r)for(let o of r)o.removeAttribute(QF),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function eP(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var iP=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,uSe(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,lY);i?.forEach(r=>this.addUsage(r,this.external,eP))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let o=i.get(e);o?o.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(aY(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])aY(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,lY(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,eP(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Ye(gn),Ye(Kf),Ye(Hg,8),Ye(Mh))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),JF={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rP=/%COMP%/g;var dY="%COMP%",hSe=`_nghost-${dY}`,fSe=`_ngcontent-${dY}`,pSe=!0,mSe=new $e("",{providedIn:"root",factory:()=>pSe});function gSe(n){return fSe.replace(rP,n)}function ySe(n){return hSe.replace(rP,n)}function uY(n,t){return t.map(e=>e.replace(rP,n))}var xb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,o,s,a,l=null,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new Sb(e,s,a,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(e,i);return r instanceof $3?r.applyToHost(e):r instanceof Cb&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case xh.Emulated:o=new $3(l,c,i,this.appId,d,s,a,u,h);break;case xh.ShadowDom:return new tP(l,c,e,i,s,a,this.nonce,u,h);default:o=new Cb(l,c,i,d,s,a,u,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(Ye(nP),Ye(iP),Ye(Kf),Ye(mSe),Ye(gn),Ye(Pt),Ye(Hg),Ye(Xf,8))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),Sb=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,o){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(JF[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(cY(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(cY(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Je(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=JF[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=JF[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ou.DashCase|ou.Important)?t.style.setProperty(e,i,r&ou.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ou.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=Vl().getGlobalEventTarget(this.doc,t),!t))throw new Je(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function cY(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var tP=class extends Sb{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,o,s,a,l,c){super(t,o,s,l,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=uY(r.id,d);for(let h of d){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let u=r.getExternalStyles?.();if(u)for(let h of u){let f=eP(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cb=class extends Sb{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,o,s,a,l,c){super(t,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let d=i.styles;this.styles=c?uY(c,d):d,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&rm.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},$3=class extends Cb{contentAttr;hostAttr;constructor(t,e,i,r,o,s,a,l,c){let d=r+"-"+i.id;super(t,e,i,o,s,a,l,c,d),this.contentAttr=gSe(d),this.hostAttr=ySe(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var G3=class n extends hb{supportsDOMEvents=!0;static makeCurrent(){OF(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=vSe();return e==null?null:_Se(e)}resetBaseElement(){kb=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return bb(document.cookie,t)}},kb=null;function vSe(){return kb=kb||document.head.querySelector("base"),kb?kb.getAttribute("href"):null}function _Se(n){return new URL(n,document.baseURI).pathname}var X3=class{addToWindow(t){cs.getAngularTestability=(i,r=!0)=>{let o=t.findTestabilityInTree(i,r);if(o==null)throw new Je(5103,!1);return o},cs.getAllAngularTestabilities=()=>t.getAllTestabilities(),cs.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let r=cs.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};cs.frameworkStabilizers||(cs.frameworkStabilizers=[]),cs.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let r=t.getTestability(e);return r??(i?Vl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},bSe=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),hY=["alt","control","meta","shift"],wSe={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SSe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},fY=(()=>{class n extends wb{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vl().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),hY.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=wSe[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),hY.forEach(s=>{if(s!==r){let a=SSe[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(Ye(gn))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function oP(n,t,e){let i=le({rootComponent:n,platformRef:e?.platformRef},CSe(t));return IX(i)}function CSe(n){return{appProviders:[...pY,...n?.providers??[]],platformProviders:TSe}}function xSe(){G3.makeCurrent()}function kSe(){return new ws}function MSe(){return R9(document),document}var TSe=[{provide:Mh,useValue:ZF},{provide:Jx,useValue:xSe,multi:!0},{provide:gn,useFactory:MSe}];var ESe=[{provide:$g,useClass:X3},{provide:g3,useClass:nb,deps:[Pt,ib,$g]},{provide:nb,useClass:nb,deps:[Pt,ib,$g]}],pY=[{provide:E_,useValue:"root"},{provide:ws,useFactory:kSe},{provide:K3,useClass:q3,multi:!0,deps:[gn]},{provide:K3,useClass:fY,multi:!0,deps:[gn]},xb,iP,nP,{provide:xo,useExisting:xb},{provide:sm,useClass:bSe},[]],sP=(()=>{class n{constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[...pY,...ESe],imports:[ln,DX]})}return n})();var Yg=class{},Mb=class{},Jf=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=e.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Z3=class{encodeKey(t){return mY(t)}encodeValue(t){return mY(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function ASe(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var DSe=/%(\d[a-f0-9])/gi,ISe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mY(n){return encodeURIComponent(n).replace(DSe,(t,e)=>ISe[e]??t)}function Y3(n){return`${n}`}var Dh=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Z3,t.fromString){if(t.fromObject)throw new Je(2805,!1);this.map=ASe(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Y3):[Y3(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Y3(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Y3(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Q3=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function FSe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function gY(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yY(n){return typeof Blob<"u"&&n instanceof Blob}function vY(n){return typeof FormData<"u"&&n instanceof FormData}function PSe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var _Y="Content-Type",bY="Accept",wY="X-Request-URL",SY="text/plain",CY="application/json",LSe=`${CY}, ${SY}, */*`,Gg=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let o;if(FSe(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Je(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Jf,this.context??=new Q3,!this.params)this.params=new Dh,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||gY(this.body)||yY(this.body)||vY(this.body)||PSe(this.body)?this.body:this.body instanceof Dh?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||vY(this.body)?null:yY(this.body)?this.body.type||null:gY(this.body)?null:typeof this.body=="string"?SY:this.body instanceof Dh?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?CY:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,l=t.mode||this.mode,c=t.redirect||this.redirect,d=t.credentials||this.credentials,u=t.referrer||this.referrer,h=t.integrity||this.integrity,f=t.transferCache??this.transferCache,p=t.timeout??this.timeout,y=t.body!==void 0?t.body:this.body,v=t.withCredentials??this.withCredentials,b=t.reportProgress??this.reportProgress,S=t.headers||this.headers,x=t.params||this.params,k=t.context??this.context;return t.setHeaders!==void 0&&(S=Object.keys(t.setHeaders).reduce((L,D)=>L.set(D,t.setHeaders[D]),S)),t.setParams&&(x=Object.keys(t.setParams).reduce((L,D)=>L.set(D,t.setParams[D]),x)),new n(e,i,y,{params:x,headers:S,context:k,reportProgress:b,responseType:r,withCredentials:v,transferCache:f,keepalive:o,cache:a,priority:s,timeout:p,mode:l,redirect:c,credentials:d,referrer:u,integrity:h})}},am=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(am||{}),Zg=class{headers;status;statusText;url;ok;type;redirected;constructor(t,e=200,i="OK"){this.headers=t.headers||new Jf,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},J3=class n extends Zg{constructor(t={}){super(t)}type=am.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Tb=class n extends Zg{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=am.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},Xg=class extends Zg{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},RSe=200,OSe=204;function aP(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var ep=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof Gg)o=e;else{let l;r.headers instanceof Jf?l=r.headers:l=new Jf(r.headers);let c;r.params&&(r.params instanceof Dh?c=r.params:c=new Dh({fromObject:r.params})),o=new Gg(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,integrity:r.integrity,timeout:r.timeout})}let s=Wt(o).pipe(Yd(l=>this.handler.handle(l)));if(e instanceof Gg||r.observe==="events")return s;let a=s.pipe(rr(l=>l instanceof Tb));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Yt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Je(2806,!1);return l.body}));case"blob":return a.pipe(Yt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Je(2807,!1);return l.body}));case"text":return a.pipe(Yt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Je(2808,!1);return l.body}));case"json":default:return a.pipe(Yt(l=>l.body))}case"response":return a;default:throw new Je(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Dh().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,aP(r,i))}post(e,i,r={}){return this.request("POST",e,aP(r,i))}put(e,i,r={}){return this.request("PUT",e,aP(r,i))}static \u0275fac=function(i){return new(i||n)(Ye(Yg))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})();var NSe=new $e("");function BSe(n,t){return t(n)}function VSe(n,t,e){return(i,r)=>Yo(e,()=>t(i,o=>n(o,r)))}var xY=new $e(""),kY=new $e(""),MY=new $e("",{providedIn:"root",factory:()=>!0});var ek=(()=>{class n extends Yg{backend;injector;chain=null;pendingTasks=N(Pg);contributeToStability=N(MY);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(xY),...this.injector.get(kY,[])]));this.chain=i.reduceRight((r,o)=>VSe(r,o,this.injector),BSe)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(gh(i))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Ye(Mb),Ye(Ur))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})();var USe=/^\)\]\}',?\n/,jSe=RegExp(`^${wY}:`,"m");function HSe(n){return"responseURL"in n&&n.responseURL?n.responseURL:jSe.test(n.getAllResponseHeaders())?n.getResponseHeader(wY):null}var lP=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Je(-2800,!1);let i=this.xhrFactory;return Wt(null).pipe(yo(()=>new jn(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((v,b)=>s.setRequestHeader(v,b.join(","))),e.headers.has(bY)||s.setRequestHeader(bY,LSe),!e.headers.has(_Y)){let v=e.detectContentTypeHeader();v!==null&&s.setRequestHeader(_Y,v)}if(e.timeout&&(s.timeout=e.timeout),e.responseType){let v=e.responseType.toLowerCase();s.responseType=v!=="json"?v:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let v=s.statusText||"OK",b=new Jf(s.getAllResponseHeaders()),S=HSe(s)||e.url;return l=new J3({headers:b,status:s.status,statusText:v,url:S}),l},d=()=>{let{headers:v,status:b,statusText:S,url:x}=c(),k=null;b!==OSe&&(k=typeof s.response>"u"?s.responseText:s.response),b===0&&(b=k?RSe:0);let L=b>=200&&b<300;if(e.responseType==="json"&&typeof k=="string"){let D=k;k=k.replace(USe,"");try{k=k!==""?JSON.parse(k):null}catch(V){k=D,L&&(L=!1,k={error:V,text:k})}}L?(o.next(new Tb({body:k,headers:v,status:b,statusText:S,url:x||void 0})),o.complete()):o.error(new Xg({error:k,headers:v,status:b,statusText:S,url:x||void 0}))},u=v=>{let{url:b}=c(),S=new Xg({error:v,status:s.status||0,statusText:s.statusText||"Unknown Error",url:b||void 0});o.error(S)},h=u;e.timeout&&(h=v=>{let{url:b}=c(),S=new Xg({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:b||void 0});o.error(S)});let f=!1,p=v=>{f||(o.next(c()),f=!0);let b={type:am.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(b.total=v.total),e.responseType==="text"&&s.responseText&&(b.partialText=s.responseText),o.next(b)},y=v=>{let b={type:am.UploadProgress,loaded:v.loaded};v.lengthComputable&&(b.total=v.total),o.next(b)};return s.addEventListener("load",d),s.addEventListener("error",u),s.addEventListener("timeout",h),s.addEventListener("abort",u),e.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:am.Sent}),()=>{s.removeEventListener("error",u),s.removeEventListener("abort",u),s.removeEventListener("load",d),s.removeEventListener("timeout",h),e.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(Ye(sm))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),TY=new $e(""),WSe="XSRF-TOKEN",zSe=new $e("",{providedIn:"root",factory:()=>WSe}),qSe="X-XSRF-TOKEN",$Se=new $e("",{providedIn:"root",factory:()=>qSe}),Eb=class{},KSe=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=bb(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)(Ye(gn),Ye(zSe))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),GSe=/^(?:https?:)?\/\//i;function XSe(n,t){if(!N(TY)||n.method==="GET"||n.method==="HEAD"||GSe.test(n.url))return t(n);let e=N(Eb).getToken(),i=N($Se);return e!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,e)})),t(n)}function cP(...n){let t=[ep,lP,ek,{provide:Yg,useExisting:ek},{provide:Mb,useFactory:()=>N(NSe,{optional:!0})??N(lP)},{provide:xY,useValue:XSe,multi:!0},{provide:TY,useValue:!0},{provide:Eb,useClass:KSe}];for(let e of n)t.push(...e.\u0275providers);return Bf(t)}var tk=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(Ye(gn))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ab=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Ye(YSe),r},providedIn:"root"})}return n})(),YSe=(()=>{class n extends Ab{_doc;constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case Ss.NONE:return i;case Ss.HTML:return au(i,"HTML")?Bl(i):i3(this._doc,String(i)).toString();case Ss.STYLE:return au(i,"Style")?Bl(i):i;case Ss.SCRIPT:if(au(i,"Script"))return Bl(i);throw new Je(5200,!1);case Ss.URL:return au(i,"URL")?Bl(i):X_(String(i));case Ss.RESOURCE_URL:if(au(i,"ResourceURL"))return Bl(i);throw new Je(5201,!1);default:throw new Je(5202,!1)}}bypassSecurityTrustHtml(e){return B9(e)}bypassSecurityTrustStyle(e){return V9(e)}bypassSecurityTrustScript(e){return U9(e)}bypassSecurityTrustUrl(e){return j9(e)}bypassSecurityTrustResourceUrl(e){return H9(e)}static \u0275fac=function(i){return new(i||n)(Ye(gn))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ai=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Ai||{}),vc="*";function Hn(n,t){return{type:Ai.Trigger,name:n,definitions:t,options:{}}}function Pn(n,t=null){return{type:Ai.Animate,styles:t,timings:n}}function EY(n,t=null){return{type:Ai.Sequence,steps:n,options:t}}function kt(n){return{type:Ai.Style,styles:n,offset:null}}function Ln(n,t,e=null){return{type:Ai.Transition,expr:n,animation:t,options:e}}var uu=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},lm=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Qg="!";function AY(n){return new Je(3e3,!1)}function ZSe(){return new Je(3100,!1)}function QSe(){return new Je(3101,!1)}function JSe(n){return new Je(3001,!1)}function eCe(n){return new Je(3003,!1)}function tCe(n){return new Je(3004,!1)}function IY(n,t){return new Je(3005,!1)}function FY(){return new Je(3006,!1)}function PY(){return new Je(3007,!1)}function LY(n,t){return new Je(3008,!1)}function RY(n){return new Je(3002,!1)}function OY(n,t,e,i,r){return new Je(3010,!1)}function NY(){return new Je(3011,!1)}function BY(){return new Je(3012,!1)}function VY(){return new Je(3200,!1)}function UY(){return new Je(3202,!1)}function jY(){return new Je(3013,!1)}function HY(n){return new Je(3014,!1)}function WY(n){return new Je(3015,!1)}function zY(n){return new Je(3016,!1)}function qY(n,t){return new Je(3404,!1)}function nCe(n){return new Je(3502,!1)}function $Y(n){return new Je(3503,!1)}function KY(){return new Je(3300,!1)}function GY(n){return new Je(3504,!1)}function XY(n){return new Je(3301,!1)}function YY(n,t){return new Je(3302,!1)}function ZY(n){return new Je(3303,!1)}function QY(n,t){return new Je(3400,!1)}function JY(n){return new Je(3401,!1)}function eZ(n){return new Je(3402,!1)}function tZ(n,t){return new Je(3505,!1)}function Ih(n){switch(n.length){case 0:return new uu;case 1:return n[0];default:return new lm(n)}}function pP(n,t,e=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(t.forEach(l=>{let c=l.get("offset"),d=c==s,u=d&&a||new Map;l.forEach((h,f)=>{let p=f,y=h;if(f!=="offset")switch(p=n.normalizePropertyName(p,r),y){case Qg:y=e.get(f);break;case vc:y=i.get(f);break;default:y=n.normalizeStyleValue(f,p,y,r);break}u.set(p,y)}),d||o.push(u),a=u,s=c}),r.length)throw nCe(r);return o}function ik(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&uP(e,"start",n)));break;case"done":n.onDone(()=>i(e&&uP(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&uP(e,"destroy",n)));break}}function uP(n,t,e){let i=e.totalTime,r=!!e.disabled,o=rk(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function rk(n,t,e,i,r="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function cl(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function mP(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var iCe=typeof document>"u"?null:document.documentElement;function ok(n){let t=n.parentNode||n.host||null;return t===iCe?null:t}function rCe(n){return n.substring(1,6)=="ebkit"}var cm=null,DY=!1;function nZ(n){cm||(cm=oCe()||{},DY=cm.style?"WebkitAppearance"in cm.style:!1);let t=!0;return cm.style&&!rCe(n)&&(t=n in cm.style,!t&&DY&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in cm.style)),t}function oCe(){return typeof document<"u"?document.body:null}function gP(n,t){for(;t;){if(t===n)return!0;t=ok(t)}return!1}function yP(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var sCe=1e3,vP="{{",aCe="}}",_P="ng-enter",sk="ng-leave",Db="ng-trigger",Ib=".ng-trigger",bP="ng-animating",ak=".ng-animating";function hu(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:hP(parseFloat(t[1]),t[2])}function hP(n,t){switch(t){case"s":return n*sCe;default:return n}}function Fb(n,t,e){return n.hasOwnProperty("duration")?n:cCe(n,t,e)}var lCe=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function cCe(n,t,e){let i,r=0,o="";if(typeof n=="string"){let s=n.match(lCe);if(s===null)return t.push(AY(n)),{duration:0,delay:0,easing:""};i=hP(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(r=hP(parseFloat(a),s[4]));let l=s[5];l&&(o=l)}else i=n;if(!e){let s=!1,a=t.length;i<0&&(t.push(ZSe()),s=!0),r<0&&(t.push(QSe()),s=!0),s&&t.splice(a,0,AY(n))}return{duration:i,delay:r,easing:o}}function iZ(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function cd(n,t,e){t.forEach((i,r)=>{let o=lk(r);e&&!e.has(r)&&e.set(r,n.style[o]),n.style[o]=i})}function tp(n,t){t.forEach((e,i)=>{let r=lk(i);n.style[r]=""})}function Jg(n){return Array.isArray(n)?n.length==1?n[0]:EY(n):n}function rZ(n,t,e){let i=t.params||{},r=wP(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(JSe(o))})}var fP=new RegExp(`${vP}\\s*(.+?)\\s*${aCe}`,"g");function wP(n){let t=[];if(typeof n=="string"){let e;for(;e=fP.exec(n);)t.push(e[1]);fP.lastIndex=0}return t}function e2(n,t,e){let i=`${n}`,r=i.replace(fP,(o,s)=>{let a=t[s];return a==null&&(e.push(eCe(s)),a=""),a.toString()});return r==i?n:r}var dCe=/-+([a-z0-9])/g;function lk(n){return n.replace(dCe,(...t)=>t[1].toUpperCase())}function oZ(n,t){return n===0||t===0}function sZ(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,ck(n,a)))}}return t}function dl(n,t,e){switch(t.type){case Ai.Trigger:return n.visitTrigger(t,e);case Ai.State:return n.visitState(t,e);case Ai.Transition:return n.visitTransition(t,e);case Ai.Sequence:return n.visitSequence(t,e);case Ai.Group:return n.visitGroup(t,e);case Ai.Animate:return n.visitAnimate(t,e);case Ai.Keyframes:return n.visitKeyframes(t,e);case Ai.Style:return n.visitStyle(t,e);case Ai.Reference:return n.visitReference(t,e);case Ai.AnimateChild:return n.visitAnimateChild(t,e);case Ai.AnimateRef:return n.visitAnimateRef(t,e);case Ai.Query:return n.visitQuery(t,e);case Ai.Stagger:return n.visitStagger(t,e);default:throw tCe(t.type)}}function ck(n,t){return window.getComputedStyle(n)[t]}var BP=(()=>{class n{validateStyleProperty(e){return nZ(e)}containsElement(e,i){return gP(e,i)}getParentElement(e){return ok(e)}query(e,i,r){return yP(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,s,a=[],l){return new uu(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),um=class{static NOOP=new BP},hm=class{};var uCe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),pk=class extends hm{normalizePropertyName(t,e){return lk(t)}normalizeStyleValue(t,e,i,r){let o="",s=i.toString().trim();if(uCe.has(e)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(IY(t,i))}return s+o}};var mk="*";function hCe(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>fCe(i,e,t)):e.push(n),e}function fCe(n,t,e){if(n[0]==":"){let l=pCe(n,e);if(typeof l=="function"){t.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(WY(n)),t;let r=i[1],o=i[2],s=i[3];t.push(aZ(r,s));let a=r==mk&&s==mk;o[0]=="<"&&!a&&t.push(aZ(s,r))}function pCe(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(zY(n)),"* => *"}}var dk=new Set(["true","1"]),uk=new Set(["false","0"]);function aZ(n,t){let e=dk.has(n)||uk.has(n),i=dk.has(t)||uk.has(t);return(r,o)=>{let s=n==mk||n==r,a=t==mk||t==o;return!s&&e&&typeof r=="boolean"&&(s=r?dk.has(n):uk.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?dk.has(t):uk.has(t)),s&&a}}var yZ=":self",mCe=new RegExp(`s*${yZ}s*,?`,"g");function vZ(n,t,e,i){return new TP(n).build(t,e,i)}var lZ="",TP=class{_driver;constructor(t){this._driver=t}build(t,e,i){let r=new EP(e);return this._resetContextStyleTimingState(r),dl(this,Jg(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=lZ,t.collectedStyles=new Map,t.collectedStyles.set(lZ,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(FY()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==Ai.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,e))}),l.name=c}else if(a.type==Ai.Transition){let l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,s.push(l)}else e.errors.push(PY())}),{type:Ai.Trigger,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{wP(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(LY(t.name,[...o.values()]))}return{type:Ai.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=dl(this,Jg(t.animation),e),r=hCe(t.expr,e.errors);return{type:Ai.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:dm(t.options)}}visitSequence(t,e){return{type:Ai.Sequence,steps:t.steps.map(i=>dl(this,i,e)),options:dm(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,o=t.steps.map(s=>{e.currentTime=i;let a=dl(this,s,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:Ai.Group,steps:o,options:dm(t.options)}}visitAnimate(t,e){let i=_Ce(t.timings,e.errors);e.currentAnimateTimings=i;let r,o=t.styles?t.styles:kt({});if(o.type==Ai.Keyframes)r=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;let c={};i.easing&&(c.easing=i.easing),s=kt(c)}e.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:Ai.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)typeof a=="string"?a===vc?i.push(a):e.errors.push(RY(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(vP)>=0){o=!0;break}}}),{type:Ai.Style,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(l),u=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(e.errors.push(OY(l,d.startTime,d.endTime,o,r)),u=!1),o=d.startTime),u&&c.set(l,{startTime:o,endTime:r}),e.options&&rZ(a,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:Ai.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(NY()),i;let r=1,o=0,s=[],a=!1,l=!1,c=0,d=t.steps.map(b=>{let S=this._makeStyleAst(b,e),x=S.offset!=null?S.offset:vCe(S.styles),k=0;return x!=null&&(o++,k=S.offset=x),l=l||k<0||k>1,a=a||k<c,c=k,s.push(k),S});l&&e.errors.push(BY()),a&&e.errors.push(VY());let u=t.steps.length,h=0;o>0&&o<u?e.errors.push(UY()):o==0&&(h=r/(u-1));let f=u-1,p=e.currentTime,y=e.currentAnimateTimings,v=y.duration;return d.forEach((b,S)=>{let x=h>0?S==f?1:h*S:s[S],k=x*v;e.currentTime=p+y.delay+k,y.duration=k,this._validateStyleAst(b,e),b.offset=x,i.styles.push(b)}),i}visitReference(t,e){return{type:Ai.Reference,animation:dl(this,Jg(t.animation),e),options:dm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:Ai.AnimateChild,options:dm(t.options)}}visitAnimateRef(t,e){return{type:Ai.AnimateRef,animation:this.visitReference(t.animation,e),options:dm(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=gCe(t.selector);e.currentQuerySelector=i.length?i+" "+o:o,cl(e.collectedStyles,e.currentQuerySelector,new Map);let a=dl(this,Jg(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Ai.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:dm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(jY());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Fb(t.timings,e.errors,!0);return{type:Ai.Stagger,animation:dl(this,Jg(t.animation),e),timings:i,options:null}}};function gCe(n){let t=!!n.split(/\s*,\s*/).find(e=>e==yZ);return t&&(n=n.replace(mCe,"")),n=n.replace(/@\*/g,Ib).replace(/@\w+/g,e=>Ib+"-"+e.slice(1)).replace(/:animating/g,ak),[n,t]}function yCe(n){return n?le({},n):null}var EP=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function vCe(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function _Ce(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Fb(n,t).duration;return SP(o,0,"")}let e=n;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=SP(0,0,"");return o.dynamic=!0,o.strValue=e,o}let r=Fb(e,t);return SP(r.duration,r.delay,r.easing)}function dm(n){return n?(n=le({},n),n.params&&(n.params=yCe(n.params))):n={},n}function SP(n,t,e){return{duration:n,delay:t,easing:e}}function VP(n,t,e,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Lb=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},bCe=1,wCe=":enter",SCe=new RegExp(wCe,"g"),CCe=":leave",xCe=new RegExp(CCe,"g");function _Z(n,t,e,i,r,o=new Map,s=new Map,a,l,c=[]){return new AP().buildKeyframes(n,t,e,i,r,o,s,a,l,c)}var AP=class{buildKeyframes(t,e,i,r,o,s,a,l,c,d=[]){c=c||new Lb;let u=new DP(t,e,c,r,o,d,[]);u.options=l;let h=l.delay?hu(l.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([s],null,u.errors,l),dl(this,i,u);let f=u.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let y=f.length-1;y>=0;y--){let v=f[y];if(v.element===e){p=v;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,u.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[VP(e,[],[],[],0,h,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let o=r?.delay;if(o){let s=typeof o=="number"?o:hu(e2(o,r?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,e,i){let o=e.currentTimeline.currentTime,s=i.duration!=null?hu(i.duration):null,a=i.delay!=null?hu(i.delay):null;return s!==0&&t.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),dl(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==Ai.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=gk);let s=hu(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>dl(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,o=t.options&&t.options.delay?hu(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);o&&a.delayNextStep(o),dl(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?e2(i,e.params,e.errors):i;return Fb(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let o=t.style;o.type==Ai.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?hu(r.delay):0;o&&(e.previousNode.type===Ai.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gk);let s=i,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{e.currentQueryIndex=d;let u=e.createSubContext(t.options,c);o&&u.delayNextStep(o),c===e.element&&(l=u.currentTimeline),dl(this,t.animation,u),u.currentTimeline.applyStylesToKeyframe();let h=u.currentTimeline.currentTime;s=Math.max(s,h)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let d=e.currentTimeline;l&&d.delayNextStep(l);let u=d.currentTime;dl(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-u+(r.startTime-i.currentTimeline.startTime)}},gk={},DP=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=gk;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,i,r,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new yk(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=hu(i.duration)),i.delay!=null&&(r.delay=hu(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=e2(o[a],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=gk,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new IP(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=t.replace(SCe,"."+this._enterClassName),t=t.replace(xCe,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,t,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&a.length==0&&s.push(HY(e)),a}},yk=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=bCe,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||vc),this._currentKeyframe.set(e,vc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let o=r&&r.params||{},s=kCe(t,this._globalTimelineStyles);for(let[a,l]of s){let c=e2(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??vc),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((d,u)=>{d===Qg?t.add(u):d===vc&&e.add(u)}),i||c.set("offset",l/this.duration),r.push(c)});let o=[...t.values()],s=[...e.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return VP(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},IP=class extends yk{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,i,r,o,s,a=!1){super(t,e,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=i+e,a=e/s,l=new Map(t[0]);l.set("offset",0),o.push(l);let c=new Map(t[0]);c.set("offset",cZ(a)),o.push(c);let d=t.length-1;for(let u=1;u<=d;u++){let h=new Map(t[u]),f=h.get("offset"),p=e+f*i;h.set("offset",cZ(p/s)),o.push(h)}i=s,e=0,r="",t=o}return VP(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function cZ(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function kCe(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let o of i)e.set(o,vc)}else for(let[o,s]of r)e.set(o,s)}),e}function dZ(n,t,e,i,r,o,s,a,l,c,d,u,h){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}var CP={},vk=class{_triggerName;ast;_stateStyles;constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return MCe(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,o,s,a,l,c,d){let u=[],h=this.ast.options&&this.ast.options.params||CP,f=a&&a.params||CP,p=this.buildStyles(i,f,u),y=l&&l.params||CP,v=this.buildStyles(r,y,u),b=new Set,S=new Map,x=new Map,k=r==="void",L={params:bZ(y,h),delay:this.ast.options?.delay},D=d?[]:_Z(t,e,this.ast.animation,o,s,p,v,L,c,u),V=0;return D.forEach(O=>{V=Math.max(O.duration+O.delay,V)}),u.length?dZ(e,this._triggerName,i,r,k,p,v,[],[],S,x,V,u):(D.forEach(O=>{let R=O.element,G=cl(S,R,new Set);O.preStyleProps.forEach(K=>G.add(K));let Z=cl(x,R,new Set);O.postStyleProps.forEach(K=>Z.add(K)),R!==e&&b.add(R)}),dZ(e,this._triggerName,i,r,k,p,v,D,[...b.values()],S,x,V))}};function MCe(n,t,e,i,r){return n.some(o=>o(t,e,i,r))}function bZ(n,t){let e=le({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var FP=class{styles;defaultParams;normalizer;constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=bZ(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=e2(s,r,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),i.set(a,s)})}),i}};function TCe(n,t,e){return new PP(n,t,e)}var PP=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new FP(r.style,o,i))}),uZ(this.states,"true","1"),uZ(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new vk(t,r,this.states))}),this.fallbackTransition=ECe(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(s=>s.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function ECe(n,t,e){let i=[(s,a)=>!0],r={type:Ai.Sequence,steps:[],options:null},o={type:Ai.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new vk(n,o,t)}function uZ(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var ACe=new Lb,LP=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i}register(t,e){let i=[],r=[],o=vZ(this._driver,e,i,r);if(i.length)throw $Y(i);this._animations.set(t,o)}_buildPlayer(t,e,i){let r=t.element,o=pP(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],o=this._animations.get(t),s,a=new Map;if(o?(s=_Z(this._driver,e,o,_P,sk,new Map,new Map,i,ACe,r),s.forEach(d=>{let u=cl(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(KY()),s=[]),r.length)throw GY(r);a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,vc))})});let l=s.map(d=>{let u=a.get(d.element);return this._buildPlayer(d,new Map,u)}),c=Ih(l);return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw XY(t);return e}listen(t,e,i,r){let o=rk(e,"","","");return ik(this._getPlayer(t),i,o,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},hZ="ng-animate-queued",DCe=".ng-animate-queued",xP="ng-animate-disabled",ICe=".ng-animate-disabled",FCe="ng-star-inserted",PCe=".ng-star-inserted",LCe=[],wZ={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},RCe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},dd="__ng_removed",Rb=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=NCe(r),i){let o=t,{value:s}=o,a=l_(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},Pb="void",kP=new Rb(Pb),RP=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+t,_c(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw YY(i,e);if(i==null||i.length==0)throw ZY(e);if(!BCe(i))throw QY(i,e);let o=cl(this._elementListeners,t,[]),s={name:e,phase:i,callback:r};o.push(s);let a=cl(this._engine.statesByElement,t,new Map);return a.has(e)||(_c(t,Db),_c(t,Db+"-"+e),a.set(e,kP)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw JY(t);return e}trigger(t,e,i,r=!0){let o=this._getTrigger(e),s=new Ob(this.id,e,t),a=this._engine.statesByElement.get(t);a||(_c(t,Db),_c(t,Db+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e),c=new Rb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=kP),!(c.value===Pb)&&l.value===c.value){if(!jCe(l.params,c.params)){let y=[],v=o.matchStyles(l.value,l.params,y),b=o.matchStyles(c.value,c.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{tp(t,v),cd(t,b)})}return}let h=cl(this._engine.playersByElement,t,[]);h.forEach(y=>{y.namespaceId==this.id&&y.triggerName==e&&y.queued&&y.destroy()});let f=o.matchTransition(l.value,c.value,t,c.params),p=!1;if(!f){if(!r)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:f,fromState:l,toState:c,player:s,isFallbackTransition:p}),p||(_c(t,hZ),s.onStart(()=>{t2(t,hZ)})),s.onDone(()=>{let y=this.players.indexOf(s);y>=0&&this.players.splice(y,1);let v=this._engine.playersByElement.get(t);if(v){let b=v.indexOf(s);b>=0&&v.splice(b,1)}}),this.players.push(s),h.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,Ib,!0);i.forEach(r=>{if(r[dd])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let d=this.trigger(t,c,Pb,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),i&&Ih(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=i.get(s)||kP,d=new Rb(Pb),u=new Ob(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let o=t[dd];(!o||o===wZ)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){_c(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=rk(o,i.triggerName,i.fromState.value,i.toState.value);l._data=t,ik(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},OP=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new RP(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=r.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}}return e}trigger(t,e,i,r){if(hk(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!hk(e))return;let o=e[dd];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),_c(t,xP)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),t2(t,xP))}removeNode(t,e,i){if(hk(e)){let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,o){this.collectedLeaveElements.push(e),e[dd]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,i,r,o){return hk(e)?this._fetchNamespace(t).listen(e,i,r,o):()=>{}}_buildInstruction(t,e,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Ib,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,ak,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Ih(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[dd];if(e&&e.setForRemoval){if(t[dd]=wZ,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(xP)&&this.markElementAsDisabled(t,!1),this.driver.query(t,ICe,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];_c(r,FCe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Ih(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw eZ(t)}_flushAnimations(t,e){let i=new Lb,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(T=>{d.add(T);let M=this.driver.query(T,DCe,!0);for(let F=0;F<M.length;F++)d.add(M[F])});let u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=mZ(h,this.collectedEnterElements),p=new Map,y=0;f.forEach((T,M)=>{let F=_P+y++;p.set(M,F),T.forEach(q=>_c(q,F))});let v=[],b=new Set,S=new Set;for(let T=0;T<this.collectedLeaveElements.length;T++){let M=this.collectedLeaveElements[T],F=M[dd];F&&F.setForRemoval&&(v.push(M),b.add(M),F.hasAnimation?this.driver.query(M,PCe,!0).forEach(q=>b.add(q)):S.add(M))}let x=new Map,k=mZ(h,Array.from(b));k.forEach((T,M)=>{let F=sk+y++;x.set(M,F),T.forEach(q=>_c(q,F))}),t.push(()=>{f.forEach((T,M)=>{let F=p.get(M);T.forEach(q=>t2(q,F))}),k.forEach((T,M)=>{let F=x.get(M);T.forEach(q=>t2(q,F))}),v.forEach(T=>{this.processLeaveNode(T)})});let L=[],D=[];for(let T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(F=>{let q=F.player,$=F.element;if(L.push(q),this.collectedEnterElements.length){let ce=$[dd];if(ce&&ce.setForMove){if(ce.previousTriggersValues&&ce.previousTriggersValues.has(F.triggerName)){let pe=ce.previousTriggersValues.get(F.triggerName),re=this.statesByElement.get(F.element);if(re&&re.has(F.triggerName)){let ae=re.get(F.triggerName);ae.value=pe,re.set(F.triggerName,ae)}}q.destroy();return}}let te=!u||!this.driver.containsElement(u,$),se=x.get($),ue=p.get($),Se=this._buildInstruction(F,i,ue,se,te);if(Se.errors&&Se.errors.length){D.push(Se);return}if(te){q.onStart(()=>tp($,Se.fromStyles)),q.onDestroy(()=>cd($,Se.toStyles)),r.push(q);return}if(F.isFallbackTransition){q.onStart(()=>tp($,Se.fromStyles)),q.onDestroy(()=>cd($,Se.toStyles)),r.push(q);return}let Ie=[];Se.timelines.forEach(ce=>{ce.stretchStartingKeyframe=!0,this.disabledNodes.has(ce.element)||Ie.push(ce)}),Se.timelines=Ie,i.append($,Se.timelines);let Be={instruction:Se,player:q,element:$};s.push(Be),Se.queriedElements.forEach(ce=>cl(a,ce,[]).push(q)),Se.preStyleProps.forEach((ce,pe)=>{if(ce.size){let re=l.get(pe);re||l.set(pe,re=new Set),ce.forEach((ae,fe)=>re.add(fe))}}),Se.postStyleProps.forEach((ce,pe)=>{let re=c.get(pe);re||c.set(pe,re=new Set),ce.forEach((ae,fe)=>re.add(fe))})});if(D.length){let T=[];D.forEach(M=>{T.push(tZ(M.triggerName,M.errors))}),L.forEach(M=>M.destroy()),this.reportError(T)}let V=new Map,O=new Map;s.forEach(T=>{let M=T.element;i.has(M)&&(O.set(M,M),this._beforeAnimationBuild(T.player.namespaceId,T.instruction,V))}),r.forEach(T=>{let M=T.element;this._getPreviousPlayers(M,!1,T.namespaceId,T.triggerName,null).forEach(q=>{cl(V,M,[]).push(q),q.destroy()})});let R=v.filter(T=>gZ(T,l,c)),G=new Map;pZ(G,this.driver,S,c,vc).forEach(T=>{gZ(T,l,c)&&R.push(T)});let K=new Map;f.forEach((T,M)=>{pZ(K,this.driver,new Set(T),l,Qg)}),R.forEach(T=>{let M=G.get(T),F=K.get(T);G.set(T,new Map([...M?.entries()??[],...F?.entries()??[]]))});let C=[],A=[],I={};s.forEach(T=>{let{element:M,player:F,instruction:q}=T;if(i.has(M)){if(d.has(M)){F.onDestroy(()=>cd(M,q.toStyles)),F.disabled=!0,F.overrideTotalTime(q.totalTime),r.push(F);return}let $=I;if(O.size>1){let se=M,ue=[];for(;se=se.parentNode;){let Se=O.get(se);if(Se){$=Se;break}ue.push(se)}ue.forEach(Se=>O.set(Se,$))}let te=this._buildAnimation(F.namespaceId,q,V,o,K,G);if(F.setRealPlayer(te),$===I)C.push(F);else{let se=this.playersByElement.get($);se&&se.length&&(F.parentPlayer=Ih(se)),r.push(F)}}else tp(M,q.fromStyles),F.onDestroy(()=>cd(M,q.toStyles)),A.push(F),d.has(M)&&r.push(F)}),A.forEach(T=>{let M=o.get(T.element);if(M&&M.length){let F=Ih(M);T.setRealPlayer(F)}}),r.forEach(T=>{T.parentPlayer?T.syncPlayerEvents(T.parentPlayer):T.destroy()});for(let T=0;T<v.length;T++){let M=v[T],F=M[dd];if(t2(M,sk),F&&F.hasAnimation)continue;let q=[];if(a.size){let te=a.get(M);te&&te.length&&q.push(...te);let se=this.driver.query(M,ak,!0);for(let ue=0;ue<se.length;ue++){let Se=a.get(se[ue]);Se&&Se.length&&q.push(...Se)}}let $=q.filter(te=>!te.destroyed);$.length?VCe(this,M,$):this.processLeaveNode(M)}return v.length=0,C.forEach(T=>{this.players.push(T),T.onDone(()=>{T.destroy();let M=this.players.indexOf(T);this.players.splice(M,1)}),T.play()}),C}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,o){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let l=!o||o==Pb;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,e,i){let r=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:r;for(let l of e.timelines){let c=l.element,d=c!==o,u=cl(i,c,[]);this._getPreviousPlayers(c,d,s,a,e.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),u.push(f)})}tp(o,e.fromStyles)}_buildAnimation(t,e,i,r,o,s){let a=e.triggerName,l=e.element,c=[],d=new Set,u=new Set,h=e.timelines.map(p=>{let y=p.element;d.add(y);let v=y[dd];if(v&&v.removedBeforeQueried)return new uu(p.duration,p.delay);let b=y!==l,S=UCe((i.get(y)||LCe).map(V=>V.getRealPlayer())).filter(V=>{let O=V;return O.element?O.element===y:!1}),x=o.get(y),k=s.get(y),L=pP(this._normalizer,p.keyframes,x,k),D=this._buildPlayer(p,L,S);if(p.subTimeline&&r&&u.add(y),b){let V=new Ob(t,a,y);V.setRealPlayer(D),c.push(V)}return D});c.forEach(p=>{cl(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>OCe(this.playersByQueriedElement,p.element,p))}),d.forEach(p=>_c(p,bP));let f=Ih(h);return f.onDestroy(()=>{d.forEach(p=>t2(p,bP)),cd(l,e.toStyles)}),u.forEach(p=>{cl(r,p,[]).push(f)}),f}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new uu(t.duration,t.delay)}},Ob=class{namespaceId;triggerName;element;_player=new uu;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>ik(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){cl(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function OCe(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function NCe(n){return n??null}function hk(n){return n&&n.nodeType===1}function BCe(n){return n=="start"||n=="done"}function fZ(n,t){let e=n.style.display;return n.style.display=t??"none",e}function pZ(n,t,e,i,r){let o=[];e.forEach(l=>o.push(fZ(l)));let s=[];i.forEach((l,c)=>{let d=new Map;l.forEach(u=>{let h=t.computeStyle(c,u,r);d.set(u,h),(!h||h.length==0)&&(c[dd]=RCe,s.push(c))}),n.set(c,d)});let a=0;return e.forEach(l=>fZ(l,o[a++])),s}function mZ(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let i=1,r=new Set(t),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:r.has(c)?l=i:l=s(c),o.set(a,l),l}return t.forEach(a=>{let l=s(a);l!==i&&e.get(l).push(a)}),e}function _c(n,t){n.classList?.add(t)}function t2(n,t){n.classList?.remove(t)}function VCe(n,t,e){Ih(e).onDone(()=>n.processLeaveNode(t))}function UCe(n){let t=[];return SZ(n,t),t}function SZ(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof lm?SZ(i.players,t):t.push(i)}}function jCe(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let o=e[r];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}function gZ(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(o=>r.add(o)):t.set(n,i),e.delete(n),!0}var n2=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new OP(t.body,e,i),this._timelineEngine=new LP(t.body,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,e,i,r,o){let s=t+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],d=vZ(this._driver,o,l,c);if(l.length)throw qY(r,l);a=TCe(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[o,s]=mP(i),a=r;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,o){if(i.charAt(0)=="@"){let[s,a]=mP(i);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function HCe(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=MP(t[0]),t.length>1&&(i=MP(t[t.length-1]))):t instanceof Map&&(e=MP(t)),e||i?new WCe(n,e,i):null}var WCe=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&cd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cd(this._element,this._initialStyles),this._endStyles&&(cd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(tp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tp(this._element,this._endStyles),this._endStyles=null),cd(this._element,this._initialStyles),this._state=3)}}return n})();function MP(n){let t=null;return n.forEach((e,i)=>{zCe(i)&&(t=t||new Map,t.set(i,e))}),t}function zCe(n){return n==="display"||n==="position"}var _k=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let t=this.keyframes,e=this._triggerWebAnimation(this.element,t,this.options);if(!e)return this._onFinish(),null;this.domPlayer=e,this._finalKeyframe=t.length?t[t.length-1]:new Map;let i=()=>this._onFinish();return e.addEventListener("finish",i),this.onDestroy(()=>{e.removeEventListener("finish",i)}),e}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){let r=this._convertKeyframesToObject(e);try{return t.animate(r,i)}catch{return null}}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){let t=this._buildPlayer();t&&(this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),t.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=t*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:ck(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},bk=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return gP(t,e)}getParentElement(t){return ok(t)}query(t,e,i){return yP(t,e,i)}computeStyle(t,e,i){return ck(t,e)}animate(t,e,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let c=new Map,d=s.filter(f=>f instanceof _k);oZ(i,r)&&d.forEach(f=>{f.currentSnapshot.forEach((p,y)=>c.set(y,p))});let u=iZ(e).map(f=>new Map(f));u=sZ(t,u,c);let h=HCe(t,u);return new _k(t,u,l,h)}};var fk="@",CZ="@.disabled",wk=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i,r){if(r){this.delegate.removeChild(t,e,i,r);return}this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==fk&&e==CZ?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,r){return this.delegate.listen(t,e,i,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},NP=class extends wk{factory;constructor(t,e,i,r,o){super(e,i,r,o),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==fk?e.charAt(1)=="."&&e==CZ?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i,r){if(e.charAt(0)==fk){let o=qCe(t),s=e.slice(1),a="";return s.charAt(0)!=fk&&([s,a]=$Ce(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,i,l)})}return this.delegate.listen(t,e,i,r)}};function qCe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function $Ce(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var Sk=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,e.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(t,e){let r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let c=this._rendererCache,d=c.get(r);if(!d){let u=()=>c.delete(r);d=new wk("",r,this.engine,u),c.set(r,d)}return d}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,t,c.name,c)};return e.data.animation.forEach(a),new NP(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var GCe=(()=>{class n extends n2{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(Ye(gn),Ye(um),Ye(hm))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function XCe(){return new pk}function YCe(n,t,e){return new Sk(n,t,e)}var kZ=[{provide:hm,useFactory:XCe},{provide:n2,useClass:GCe},{provide:xo,useFactory:YCe,deps:[xb,n2,Pt]}],ZCe=[{provide:um,useClass:BP},{provide:Gf,useValue:"NoopAnimations"},...kZ],xZ=[{provide:um,useFactory:()=>new bk},{provide:Gf,useFactory:()=>"BrowserAnimations"},...kZ],MZ=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?ZCe:xZ}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:xZ,imports:[sP]})}return n})();var wi="primary",Xb=Symbol("RouteTitle"),zP=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function mm(n){return new zP(n)}function LZ(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function QCe(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!fu(n[e],t[e]))return!1;return!0}function fu(n,t){let e=n?qP(n):void 0,i=t?qP(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!RZ(n[r],t[r]))return!1;return!0}function qP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function RZ(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function OZ(n){return n.length>0?n[n.length-1]:null}function Fh(n){return ph(n)?n:Eh(n)?Xr(Promise.resolve(n)):Wt(n)}var JCe={exact:BZ,subset:VZ},NZ={exact:exe,subset:txe,ignored:()=>!0};function TZ(n,t,e){return JCe[e.paths](n.root,t.root,e.matrixParams)&&NZ[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function exe(n,t){return fu(n,t)}function BZ(n,t,e){if(!fm(n.segments,t.segments)||!kk(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!BZ(n.children[i],t.children[i],e))return!1;return!0}function txe(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>RZ(n[e],t[e]))}function VZ(n,t,e){return UZ(n,t,t.segments,e)}function UZ(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!fm(r,e)||t.hasChildren()||!kk(r,e,i))}else if(n.segments.length===e.length){if(!fm(n.segments,e)||!kk(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!VZ(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!fm(n.segments,r)||!kk(n.segments,r,i)||!n.children[wi]?!1:UZ(n.children[wi],t,o,i)}}function kk(n,t,e){return t.every((i,r)=>NZ[e](n[r].parameters,i.parameters))}var mu=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Mr([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=mm(this.queryParams),this._queryParamMap}toString(){return rxe.serialize(this)}},Mr=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mk(this)}},np=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=mm(this.parameters),this._parameterMap}toString(){return HZ(this)}};function nxe(n,t){return fm(n,t)&&n.every((e,i)=>fu(e.parameters,t[i].parameters))}function fm(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function ixe(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===wi&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==wi&&(e=e.concat(t(r,i)))}),e}var gm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:()=>new ip,providedIn:"root"})}return n})(),ip=class{parse(t){let e=new KP(t);return new mu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Nb(t.root,!0)}`,i=axe(t.queryParams),r=typeof t.fragment=="string"?`#${oxe(t.fragment)}`:"";return`${e}${i}${r}`}},rxe=new ip;function Mk(n){return n.segments.map(t=>HZ(t)).join("/")}function Nb(n,t){if(!n.hasChildren())return Mk(n);if(t){let e=n.children[wi]?Nb(n.children[wi],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==wi&&i.push(`${r}:${Nb(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=ixe(n,(i,r)=>r===wi?[Nb(n.children[wi],!1)]:[`${r}:${Nb(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[wi]!=null?`${Mk(n)}/${e[0]}`:`${Mk(n)}/(${e.join("//")})`}}function jZ(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ck(n){return jZ(n).replace(/%3B/gi,";")}function oxe(n){return encodeURI(n)}function $P(n){return jZ(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tk(n){return decodeURIComponent(n)}function EZ(n){return Tk(n.replace(/\+/g,"%20"))}function HZ(n){return`${$P(n.path)}${sxe(n.parameters)}`}function sxe(n){return Object.entries(n).map(([t,e])=>`;${$P(t)}=${$P(e)}`).join("")}function axe(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Ck(e)}=${Ck(r)}`).join("&"):`${Ck(e)}=${Ck(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var lxe=/^[^\/()?;#]+/;function UP(n){let t=n.match(lxe);return t?t[0]:""}var cxe=/^[^\/()?;=#]+/;function dxe(n){let t=n.match(cxe);return t?t[0]:""}var uxe=/^[^=?&#]+/;function hxe(n){let t=n.match(uxe);return t?t[0]:""}var fxe=/^[^&#]+/;function pxe(n){let t=n.match(fxe);return t?t[0]:""}var KP=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mr([],{}):new Mr([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[wi]=new Mr(t,e)),i}parseSegment(){let t=UP(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Je(4009,!1);return this.capture(t),new np(Tk(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=dxe(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=UP(this.remaining);r&&(i=r,this.capture(i))}t[Tk(e)]=Tk(i)}parseQueryParam(t){let e=hxe(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=pxe(this.remaining);s&&(i=s,this.capture(i))}let r=EZ(e),o=EZ(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=UP(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Je(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=wi);let s=this.parseChildren();e[o??wi]=Object.keys(s).length===1&&s[wi]?s[wi]:new Mr([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Je(4011,!1)}};function WZ(n){return n.segments.length>0?new Mr([],{[wi]:n}):n}function zZ(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=zZ(r);if(i===wi&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new Mr(n.segments,t);return mxe(e)}function mxe(n){if(n.numberOfChildren===1&&n.children[wi]){let t=n.children[wi];return new Mr(n.segments.concat(t.segments),t.children)}return n}function rp(n){return n instanceof mu}function qZ(n,t,e=null,i=null){let r=$Z(n);return KZ(r,t,e,i)}function $Z(n){let t;function e(o){let s={};for(let l of o.children){let c=e(l);s[l.outlet]=c}let a=new Mr(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=WZ(i);return t??r}function KZ(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return jP(r,r,r,e,i);let o=gxe(t);if(o.toRoot())return jP(r,r,new Mr([],{}),e,i);let s=yxe(o,r,n),a=s.processChildren?Vb(s.segmentGroup,s.index,o.commands):XZ(s.segmentGroup,s.index,o.commands);return jP(r,s.segmentGroup,a,e,i)}function Ek(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function jb(n){return typeof n=="object"&&n!=null&&n.outlets}function jP(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;n===t?s=e:s=GZ(n,t,e);let a=WZ(zZ(s));return new mu(a,o,r)}function GZ(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=GZ(o,t,e)}),new Mr(n.segments,i)}var Ak=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Ek(i[0]))throw new Je(4003,!1);let r=i.find(jb);if(r&&r!==OZ(i))throw new Je(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gxe(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ak(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Ak(e,t,i)}var o2=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function yxe(n,t,e){if(n.isAbsolute)return new o2(t,!0,0);if(!e)return new o2(t,!1,NaN);if(e.parent===null)return new o2(e,!0,0);let i=Ek(n.commands[0])?0:1,r=e.segments.length-1+i;return vxe(e,r,n.numberOfDoubleDots)}function vxe(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Je(4005,!1);r=i.segments.length}return new o2(i,!1,r-o)}function _xe(n){return jb(n[0])?n[0].outlets:{[wi]:n}}function XZ(n,t,e){if(n??=new Mr([],{}),n.segments.length===0&&n.hasChildren())return Vb(n,t,e);let i=bxe(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Mr(n.segments.slice(0,i.pathIndex),{});return o.children[wi]=new Mr(n.segments.slice(i.pathIndex),n.children),Vb(o,0,r)}else return i.match&&r.length===0?new Mr(n.segments,{}):i.match&&!n.hasChildren()?GP(n,t,e):i.match?Vb(n,0,r):GP(n,t,e)}function Vb(n,t,e){if(e.length===0)return new Mr(n.segments,{});{let i=_xe(e),r={};if(Object.keys(i).some(o=>o!==wi)&&n.children[wi]&&n.numberOfChildren===1&&n.children[wi].segments.length===0){let o=Vb(n.children[wi],t,e);return new Mr(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=XZ(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Mr(n.segments,r)}}function bxe(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(jb(a))break;let l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!DZ(l,c,s))return o;i+=2}else{if(!DZ(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function GP(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(jb(o)){let l=wxe(o.outlets);return new Mr(i,l)}if(r===0&&Ek(e[0])){let l=n.segments[t];i.push(new np(l.path,AZ(e[0]))),r++;continue}let s=jb(o)?o.outlets[wi]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&Ek(a)?(i.push(new np(s,AZ(a))),r+=2):(i.push(new np(s,{})),r++)}return new Mr(i,{})}function wxe(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=GP(new Mr([],{}),0,i))}),t}function AZ(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function DZ(n,t,e){return n==e.path&&fu(t,e.parameters)}var s2="imperative",hs=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(hs||{}),jl=class{id;url;constructor(t,e){this.id=t,this.url=e}},op=class extends jl{type=hs.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ba=class extends jl{urlAfterRedirects;type=hs.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Na=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Na||{}),l2=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(l2||{}),pu=class extends jl{reason;code;type=hs.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gu=class extends jl{reason;code;type=hs.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},c2=class extends jl{error;target;type=hs.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hb=class extends jl{urlAfterRedirects;state;type=hs.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dk=class extends jl{urlAfterRedirects;state;type=hs.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ik=class extends jl{urlAfterRedirects;state;shouldActivate;type=hs.GuardsCheckEnd;constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fk=class extends jl{urlAfterRedirects;state;type=hs.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pk=class extends jl{urlAfterRedirects;state;type=hs.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lk=class{route;type=hs.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rk=class{route;type=hs.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ok=class{snapshot;type=hs.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nk=class{snapshot;type=hs.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bk=class{snapshot;type=hs.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vk=class{snapshot;type=hs.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},d2=class{routerEvent;position;anchor;type=hs.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Wb=class{},u2=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function Sxe(n){return!(n instanceof Wb)&&!(n instanceof u2)}function Cxe(n,t){return n.providers&&!n._injector&&(n._injector=zg(n.providers,t,`Route: ${n.path}`)),n._injector??t}function ud(n){return n.outlet||wi}function xxe(n,t){let e=n.filter(i=>ud(i)===t);return e.push(...n.filter(i=>ud(i)!==t)),e}function p2(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Uk=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return p2(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new ym(this.rootInjector)}},ym=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Uk(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(Ye(Ur))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jk=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=XP(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=XP(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=YP(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return YP(t,this._root).map(e=>e.value)}};function XP(n,t){if(n===t.value)return t;for(let e of t.children){let i=XP(n,e);if(i)return i}return null}function YP(n,t){if(n===t.value)return[t];for(let e of t.children){let i=YP(n,e);if(i.length)return i.unshift(t),i}return[]}var Ul=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function r2(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var zb=class extends jk{snapshot;constructor(t,e){super(t),this.snapshot=e,rL(this,t)}toString(){return this.snapshot.toString()}};function YZ(n){let t=kxe(n),e=new bi([new np("",{})]),i=new bi({}),r=new bi({}),o=new bi({}),s=new bi(""),a=new bc(e,i,o,s,r,wi,n,t.root);return a.snapshot=t.root,new zb(new Ul(a,[]),t)}function kxe(n){let t={},e={},i={},o=new pm([],t,i,"",e,wi,n,null,{});return new qb("",new Ul(o,[]))}var bc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Yt(c=>c[Xb]))??Wt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Yt(t=>mm(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Yt(t=>mm(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hk(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:le(le({},t.params),n.params),data:le(le({},t.data),n.data),resolve:le(le(le(le({},n.data),t.data),r?.data),n._resolvedData)}:i={params:le({},n.params),data:le({},n.data),resolve:le(le({},n.data),n._resolvedData??{})},r&&QZ(r)&&(i.resolve[Xb]=r.title),i}var pm=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xb]}constructor(t,e,i,r,o,s,a,l,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mm(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mm(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},qb=class extends jk{url;constructor(t,e){super(e),this.url=t,rL(this,e)}toString(){return ZZ(this._root)}};function rL(n,t){t.value._routerState=n,t.children.forEach(e=>rL(n,e))}function ZZ(n){let t=n.children.length>0?` { ${n.children.map(ZZ).join(", ")} } `:"";return`${n.value}${t}`}function HP(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,fu(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),fu(t.params,e.params)||n.paramsSubject.next(e.params),QCe(t.url,e.url)||n.urlSubject.next(e.url),fu(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ZP(n,t){let e=fu(n.params,t.params)&&nxe(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||ZP(n.parent,t.parent))}function QZ(n){return typeof n.title=="string"||n.title===null}var JZ=new $e(""),Yb=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=wi;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=Ra();parentContexts=N(ym);location=N(Dr);changeDetector=N(vi);inputBinder=N(Zb,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Je(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Je(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new QP(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[or]})}return n})(),QP=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===bc?this.route:t===ym?this.childContexts:t===JZ?this.outletData:this.parent.get(t,e)}},Zb=new $e(""),oL=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=mh([i.queryParams,i.params,i.data]).pipe(yo(([o,s,a],l)=>(a=le(le(le({},o),s),a),l===0?Wt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let s=PX(i.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),sL=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&ee(0,"router-outlet")},dependencies:[Yb],encapsulation:2})}return n})();function aL(n){let t=n.children&&n.children.map(aL),e=t?Ge(le({},n),{children:t}):le({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==wi&&(e.component=sL),e}function Mxe(n,t,e){let i=$b(n,t._root,e?e._root:void 0);return new zb(i,t)}function $b(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=Txe(n,t,e);return new Ul(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>$b(n,a)),s}}let i=Exe(t.value),r=t.children.map(o=>$b(n,o));return new Ul(i,r)}}function Txe(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return $b(n,i,r);return $b(n,i)})}function Exe(n){return new bc(new bi(n.url),new bi(n.params),new bi(n.queryParams),new bi(n.fragment),new bi(n.data),n.outlet,n.component,n)}var h2=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},eQ="ngNavigationCancelingError";function Wk(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=rp(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=tQ(!1,Na.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function tQ(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[eQ]=!0,e.cancellationCode=t,e}function Axe(n){return nQ(n)&&rp(n.url)}function nQ(n){return!!n&&n[eQ]}var Dxe=(n,t,e,i)=>Yt(r=>(new JP(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),JP=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),HP(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=r2(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=r2(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=r2(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=r2(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Vk(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Nk(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(HP(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),HP(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},zk=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},a2=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Ixe(n,t,e){let i=n._root,r=t?t._root:null;return Bb(i,r,e,[i.value])}function Fxe(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function m2(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!zI(n)?n:t.get(n):i}function Bb(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=r2(t);return n.children.forEach(s=>{Pxe(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ub(a,e.getContext(s),r)),r}function Pxe(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Lxe(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new zk(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Bb(n,t,a?a.children:null,i,r):Bb(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new a2(a.outlet.component,s))}else s&&Ub(t,a,r),r.canActivateChecks.push(new zk(i)),o.component?Bb(n,null,a?a.children:null,i,r):Bb(n,null,e,i,r);return r}function Lxe(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!fm(n.url,t.url);case"pathParamsOrQueryParamsChange":return!fm(n.url,t.url)||!fu(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ZP(n,t)||!fu(n.queryParams,t.queryParams);case"paramsChange":default:return!ZP(n,t)}}function Ub(n,t,e){let i=r2(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?Ub(s,t.children.getContext(o),e):Ub(s,null,e):Ub(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new a2(t.outlet.component,r)):e.canDeactivateChecks.push(new a2(null,r)):e.canDeactivateChecks.push(new a2(null,r))}function Qb(n){return typeof n=="function"}function Rxe(n){return typeof n=="boolean"}function Oxe(n){return n&&Qb(n.canLoad)}function Nxe(n){return n&&Qb(n.canActivate)}function Bxe(n){return n&&Qb(n.canActivateChild)}function Vxe(n){return n&&Qb(n.canDeactivate)}function Uxe(n){return n&&Qb(n.canMatch)}function iQ(n){return n instanceof Xc||n?.name==="EmptyError"}var xk=Symbol("INITIAL_VALUE");function f2(){return yo(n=>mh(n.map(t=>t.pipe(bs(1),Co(xk)))).pipe(Yt(t=>{for(let e of t)if(e!==!0){if(e===xk)return xk;if(e===!1||jxe(e))return e}return!0}),rr(t=>t!==xk),bs(1)))}function jxe(n){return rp(n)||n instanceof h2}function Hxe(n,t){return So(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Wt(Ge(le({},e),{guardsResult:!0})):Wxe(s,i,r,n).pipe(So(a=>a&&Rxe(a)?zxe(i,o,n,t):Wt(a)),Yt(a=>Ge(le({},e),{guardsResult:a})))})}function Wxe(n,t,e,i){return Xr(n).pipe(So(r=>Xxe(r.component,r.route,e,t,i)),yh(r=>r!==!0,!0))}function zxe(n,t,e,i){return Xr(t).pipe(Yd(r=>If($xe(r.route.parent,i),qxe(r.route,i),Gxe(n,r.path,e),Kxe(n,r.route,e))),yh(r=>r!==!0,!0))}function qxe(n,t){return n!==null&&t&&t(new Bk(n)),Wt(!0)}function $xe(n,t){return n!==null&&t&&t(new Ok(n)),Wt(!0)}function Kxe(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Wt(!0);let r=i.map(o=>B0(()=>{let s=p2(t)??e,a=m2(o,s),l=Nxe(a)?a.canActivate(t,n):Yo(s,()=>a(t,n));return Fh(l).pipe(yh())}));return Wt(r).pipe(f2())}function Gxe(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>Fxe(s)).filter(s=>s!==null).map(s=>B0(()=>{let a=s.guards.map(l=>{let c=p2(s.node)??e,d=m2(l,c),u=Bxe(d)?d.canActivateChild(i,n):Yo(c,()=>d(i,n));return Fh(u).pipe(yh())});return Wt(a).pipe(f2())}));return Wt(o).pipe(f2())}function Xxe(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Wt(!0);let s=o.map(a=>{let l=p2(t)??r,c=m2(a,l),d=Vxe(c)?c.canDeactivate(n,t,e,i):Yo(l,()=>c(n,t,e,i));return Fh(d).pipe(yh())});return Wt(s).pipe(f2())}function Yxe(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return Wt(!0);let o=r.map(s=>{let a=m2(s,n),l=Oxe(a)?a.canLoad(t,e):Yo(n,()=>a(t,e));return Fh(l)});return Wt(o).pipe(f2(),rQ(i))}function rQ(n){return _I(Jr(t=>{if(typeof t!="boolean")throw Wk(n,t)}),Yt(t=>t===!0))}function Zxe(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return Wt(!0);let o=r.map(s=>{let a=m2(s,n),l=Uxe(a)?a.canMatch(t,e):Yo(n,()=>a(t,e));return Fh(l)});return Wt(o).pipe(f2(),rQ(i))}var Kb=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Gb=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function i2(n){return Af(new Kb(n))}function Qxe(n){return Af(new Je(4e3,!1))}function Jxe(n){return Af(tQ(!1,Na.GuardRejected))}var eL=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Wt(i);if(r.numberOfChildren>1||!r.children[wi])return Qxe(`${t.redirectTo}`);r=r.children[wi]}}applyRedirectCommands(t,e,i,r,o){return e3e(e,r,o).pipe(Yt(s=>{if(s instanceof mu)throw new Gb(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,i);if(s[0]==="/")throw new Gb(a);return a}))}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new mu(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new Mr(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Je(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}};function e3e(n,t,e){if(typeof n=="string")return Wt(n);let i=n,{queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,params:c,data:d,title:u}=t;return Fh(Yo(e,()=>i({params:c,data:d,queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,title:u})))}var tL={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function t3e(n,t,e,i,r){let o=oQ(n,t,e);return o.matched?(i=Cxe(t,i),Zxe(i,t,e,r).pipe(Yt(s=>s===!0?o:le({},tL)))):Wt(o)}function oQ(n,t,e){if(t.path==="**")return n3e(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?le({},tL):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||LZ)(e,n,t);if(!r)return le({},tL);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?le(le({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function n3e(n){return{matched:!0,parameters:n.length>0?OZ(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function IZ(n,t,e,i){return e.length>0&&o3e(n,e,i)?{segmentGroup:new Mr(t,r3e(i,new Mr(e,n.children))),slicedSegments:[]}:e.length===0&&s3e(n,e,i)?{segmentGroup:new Mr(n.segments,i3e(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Mr(n.segments,n.children),slicedSegments:e}}function i3e(n,t,e,i){let r={};for(let o of e)if($k(n,t,o)&&!i[ud(o)]){let s=new Mr([],{});r[ud(o)]=s}return le(le({},i),r)}function r3e(n,t){let e={};e[wi]=t;for(let i of n)if(i.path===""&&ud(i)!==wi){let r=new Mr([],{});e[ud(i)]=r}return e}function o3e(n,t,e){return e.some(i=>$k(n,t,i)&&ud(i)!==wi)}function s3e(n,t,e){return e.some(i=>$k(n,t,i))}function $k(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function a3e(n,t,e){return t.length===0&&!n.children[e]}var nL=class{};function l3e(n,t,e,i,r,o,s="emptyOnly"){return new iL(n,t,e,i,r,s,o).recognize()}var c3e=31,iL=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new eL(this.urlSerializer,this.urlTree)}noMatchError(t){return new Je(4002,`'${t.segmentGroup}'`)}recognize(){let t=IZ(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Yt(({children:e,rootSnapshot:i})=>{let r=new Ul(i,e),o=new qb("",r),s=qZ(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new pm([],Object.freeze({}),Object.freeze(le({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),wi,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,wi,e).pipe(Yt(i=>({children:i,rootSnapshot:e})),Yc(i=>{if(i instanceof Gb)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Kb?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(Yt(s=>s instanceof Ul?[s]:[]))}processChildren(t,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Xr(o).pipe(Yd(s=>{let a=i.children[s],l=xxe(e,s);return this.processSegmentGroup(t,l,a,s,r)}),AI((s,a)=>(s.push(...a),s)),Ff(null),EI(),So(s=>{if(s===null)return i2(i);let a=sQ(s);return d3e(a),Wt(a)}))}processSegment(t,e,i,r,o,s,a){return Xr(e).pipe(Yd(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,o,s,a).pipe(Yc(c=>{if(c instanceof Kb)return Wt(null);throw c}))),yh(l=>!!l),Yc(l=>{if(iQ(l))return a3e(i,r,o)?Wt(new nL):i2(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,o,s,a,l){return ud(i)!==s&&(s===wi||!$k(r,o,i))?i2(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s,l):i2(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=oQ(e,r,o);if(!l)return i2(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>c3e&&(this.allowRedirects=!1));let f=new pm(o,c,Object.freeze(le({},this.urlTree.queryParams)),this.urlTree.fragment,FZ(r),ud(r),r.component??r._loadedComponent??null,r,PZ(r)),p=Hk(f,a,this.paramsInheritanceStrategy);return f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u,f,t).pipe(yo(v=>this.applyRedirects.lineralizeSegments(r,v)),So(v=>this.processSegment(t,i,e,v.concat(h),s,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let a=t3e(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(yo(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(yo(({routes:c})=>{let d=i._loadedInjector??t,{parameters:u,consumedSegments:h,remainingSegments:f}=l,p=new pm(h,u,Object.freeze(le({},this.urlTree.queryParams)),this.urlTree.fragment,FZ(i),ud(i),i.component??i._loadedComponent??null,i,PZ(i)),y=Hk(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let{segmentGroup:v,slicedSegments:b}=IZ(e,h,f,c);if(b.length===0&&v.hasChildren())return this.processChildren(d,c,v,p).pipe(Yt(x=>new Ul(p,x)));if(c.length===0&&b.length===0)return Wt(new Ul(p,[]));let S=ud(i)===o;return this.processSegment(d,c,v,b,S?wi:o,!0,p).pipe(Yt(x=>new Ul(p,x instanceof Ul?[x]:[])))}))):i2(e)))}getChildConfig(t,e,i){return e.children?Wt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Wt({routes:e._loadedRoutes,injector:e._loadedInjector}):Yxe(t,e,i,this.urlSerializer).pipe(So(r=>r?this.configLoader.loadChildren(t,e).pipe(Jr(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):Jxe(e))):Wt({routes:[],injector:t})}};function d3e(n){n.sort((t,e)=>t.value.outlet===wi?-1:e.value.outlet===wi?1:t.value.outlet.localeCompare(e.value.outlet))}function u3e(n){let t=n.value.routeConfig;return t&&t.path===""}function sQ(n){let t=[],e=new Set;for(let i of n){if(!u3e(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=sQ(i.children);t.push(new Ul(i.value,r))}return t.filter(i=>!e.has(i))}function FZ(n){return n.data||{}}function PZ(n){return n.resolve||{}}function h3e(n,t,e,i,r,o){return So(s=>l3e(n,t,e,i,s.extractedUrl,r,o).pipe(Yt(({state:a,tree:l})=>Ge(le({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function f3e(n,t){return So(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Wt(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of aQ(l))s.add(c);let a=0;return Xr(s).pipe(Yd(l=>o.has(l)?p3e(l,i,n,t):(l.data=Hk(l,l.parent,n).resolve,Wt(void 0))),Jr(()=>a++),Sg(1),So(l=>a===s.size?Wt(e):ta))})}function aQ(n){let t=n.children.map(e=>aQ(e)).flat();return[n,...t]}function p3e(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!QZ(r)&&(o[Xb]=r.title),B0(()=>(n.data=Hk(n,n.parent,e).resolve,m3e(o,n,t,i).pipe(Yt(s=>(n._resolvedData=s,n.data=le(le({},n.data),s),null)))))}function m3e(n,t,e,i){let r=qP(n);if(r.length===0)return Wt({});let o={};return Xr(r).pipe(So(s=>g3e(n[s],t,e,i).pipe(yh(),Jr(a=>{if(a instanceof h2)throw Wk(new ip,a);o[s]=a}))),Sg(1),Yt(()=>o),Yc(s=>iQ(s)?ta:Af(s)))}function g3e(n,t,e,i){let r=p2(t)??i,o=m2(n,r),s=o.resolve?o.resolve(t,e):Yo(r,()=>o(t,e));return Fh(s)}function WP(n){return yo(t=>{let e=n(t);return e?Xr(e).pipe(Yt(()=>t)):Wt(t)})}var lL=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===wi);return i}getResolvedTitleForRoute(e){return e.data[Xb]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:()=>N(lQ),providedIn:"root"})}return n})(),lQ=(()=>{class n extends lL{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Ye(tk))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sp=new $e("",{providedIn:"root",factory:()=>({})}),vm=new $e(""),Kk=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(TF);loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Wt(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Fh(Yo(e,()=>i.loadComponent())).pipe(Yt(dQ),yo(uQ),Jr(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),gh(()=>{this.componentLoaders.delete(i)})),o=new Mf(r,()=>new Xe).pipe(_g());return this.componentLoaders.set(i,o),o}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Wt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=cQ(i,this.compiler,e,this.onLoadEndListener).pipe(gh(()=>{this.childrenLoaders.delete(i)})),s=new Mf(o,()=>new Xe).pipe(_g());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cQ(n,t,e,i){return Fh(Yo(e,()=>n.loadChildren())).pipe(Yt(dQ),yo(uQ),So(r=>r instanceof p3||Array.isArray(r)?Wt(r):Xr(t.compileModuleAsync(r))),Yt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(vm,[],{optional:!0,self:!0}).flat()),{routes:s.map(aL),injector:o}}))}function y3e(n){return n&&typeof n=="object"&&"default"in n}function dQ(n){return y3e(n)?n.default:n}function uQ(n){return Wt(n)}var Gk=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:()=>N(v3e),providedIn:"root"})}return n})(),v3e=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cL=new $e(""),dL=new $e("");function hQ(n,t,e){let i=n.get(dL),r=n.get(gn);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=r.startViewTransition(()=>(o(),_3e(n)));a.ready.catch(c=>{});let{onViewTransitionCreated:l}=i;return l&&Yo(n,()=>l({transition:a,from:t,to:e})),s}function _3e(n){return new Promise(t=>{Zo({read:()=>setTimeout(t)},{injector:n})})}var uL=new $e(""),Xk=(()=>{class n{currentNavigation=P(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Xe;transitionAbortWithErrorSubject=new Xe;configLoader=N(Kk);environmentInjector=N(Ur);destroyRef=N(Zt);urlSerializer=N(gm);rootContexts=N(ym);location=N(cu);inputBindingEnabled=N(Zb,{optional:!0})!==null;titleStrategy=N(lL);options=N(sp,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(Gk);createViewTransition=N(cL,{optional:!0});navigationErrorHandler=N(uL,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Wt(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new Lk(r)),i=r=>this.events.next(new Rk(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;ko(()=>{this.transitions?.next(Ge(le({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(e){return this.transitions=new bi(null),this.transitions.pipe(rr(i=>i!==null),yo(i=>{let r=!1;return Wt(i).pipe(yo(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Na.SupersededByNewNavigation),ta;this.currentTransition=i,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ge(le({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new gu(o.id,this.urlSerializer.serialize(o.rawUrl),"",l2.IgnoredSameUrlNavigation)),o.resolve(!1),ta;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Wt(o).pipe(yo(l=>(this.events.next(new op(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?ta:Promise.resolve(l))),h3e(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Jr(l=>{i.targetSnapshot=l.targetSnapshot,i.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=l.urlAfterRedirects,d));let c=new Hb(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:c,source:d,restoredState:u,extras:h}=o,f=new op(l,this.urlSerializer.serialize(c),d,u);this.events.next(f);let p=YZ(this.rootComponentType).snapshot;return this.currentTransition=i=Ge(le({},o),{targetSnapshot:p,urlAfterRedirects:c,extras:Ge(le({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(y=>(y.finalUrl=c,y)),Wt(i)}else return this.events.next(new gu(o.id,this.urlSerializer.serialize(o.extractedUrl),"",l2.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ta}),Jr(o=>{let s=new Dk(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Yt(o=>(this.currentTransition=i=Ge(le({},o),{guards:Ixe(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),Hxe(this.environmentInjector,o=>this.events.next(o)),Jr(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Wk(this.urlSerializer,o.guardsResult);let s=new Ik(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),rr(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Na.GuardRejected),!1)),WP(o=>{if(o.guards.canActivateChecks.length!==0)return Wt(o).pipe(Jr(s=>{let a=new Fk(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),yo(s=>{let a=!1;return Wt(s).pipe(f3e(this.paramsInheritanceStrategy,this.environmentInjector),Jr({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Na.NoDataFromResolver)}}))}),Jr(s=>{let a=new Pk(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),WP(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let c=p2(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(Jr(d=>{a.component=d}),Yt(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return mh(s(o.targetSnapshot.root)).pipe(Ff(null),bs(1))}),WP(()=>this.afterPreactivation()),yo(()=>{let{currentSnapshot:o,targetSnapshot:s}=i,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Xr(a).pipe(Yt(()=>i)):Wt(i)}),Yt(o=>{let s=Mxe(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=Ge(le({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),i}),Jr(()=>{this.events.next(new Wb)}),Dxe(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),bs(1),fn(new jn(o=>{let s=i.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(rr(()=>!r&&!i.targetRouterState),Jr(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Na.Aborted)}))),Jr({next:o=>{r=!0,this.lastSuccessfulNavigation=ko(this.currentNavigation),this.events.next(new Ba(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),fn(this.transitionAbortWithErrorSubject.pipe(Jr(o=>{throw o}))),gh(()=>{r||this.cancelNavigationTransition(i,"",Na.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Yc(o=>{if(this.destroyed)return i.resolve(!1),ta;if(r=!0,nQ(o))this.events.next(new pu(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),Axe(o)?this.events.next(new u2(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let s=new c2(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let a=Yo(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof h2){let{message:l,cancellationCode:c}=Wk(this.urlSerializer,a);this.events.next(new pu(i.id,this.urlSerializer.serialize(i.extractedUrl),l,c)),this.events.next(new u2(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(a)}}return ta}))}))}cancelNavigationTransition(e,i,r){let o=new pu(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=ko(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return e.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function b3e(n){return n!==s2}var fQ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:()=>N(w3e),providedIn:"root"})}return n})(),qk=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},w3e=(()=>{class n extends qk{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pQ=(()=>{class n{urlSerializer=N(gm);options=N(sp,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(cu);urlHandlingStrategy=N(Gk);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mu;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,s=r??o;return s instanceof mu?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=YZ(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:()=>N(S3e),providedIn:"root"})}return n})(),S3e=(()=>{class n extends pQ{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof op?this.updateStateMemento():e instanceof gu?this.commitTransition(i):e instanceof Hb?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Wb?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof pu&&e.code!==Na.SupersededByNewNavigation&&e.code!==Na.Redirect?this.restoreHistory(i):e instanceof c2?this.restoreHistory(i,!0):e instanceof Ba&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,l=le(le({},s),this.generateNgRouterState(r,a));this.location.replaceState(e,"",l)}else{let a=le(le({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yk(n,t){n.events.pipe(rr(e=>e instanceof Ba||e instanceof pu||e instanceof c2||e instanceof gu),Yt(e=>e instanceof Ba||e instanceof gu?0:(e instanceof pu?e.code===Na.Redirect||e.code===Na.SupersededByNewNavigation:!1)?2:1),rr(e=>e!==2),bs(1)).subscribe(()=>{t()})}var C3e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},x3e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(m3);stateManager=N(pQ);options=N(sp,{optional:!0})||{};pendingTasks=N(iu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(Xk);urlSerializer=N(gm);location=N(cu);urlHandlingStrategy=N(Gk);injector=N(Ur);_events=new Xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(fQ);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(vm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(Zb,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new qn;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=ko(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof pu&&i.code!==Na.Redirect&&i.code!==Na.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ba)this.navigated=!0;else if(i instanceof u2){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=le({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||b3e(r.source)},s);this.scheduleNavigation(a,s2,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Sxe(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),s2,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=le({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o).catch(l=>{this.disposed||this.injector.get(Fa)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ko(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(aL),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=le(le({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=r?r.snapshot:this.routerState.snapshot.root;u=$Z(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),u=this.currentUrlTree.root}return KZ(u,e,d,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=rp(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,s2,null,i)}navigate(e,i={skipLocationChange:!1}){return k3e(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(ac(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=le({},C3e):i===!1?r=le({},x3e):r=i,rp(e))return TZ(this.currentUrlTree,e,r);let o=this.parseUrl(e);return TZ(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((u,h)=>{a=u,l=h});let d=this.pendingTasks.add();return Yk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function k3e(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Je(4008,!1)}var g2=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=P(null);get href(){return ko(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Xe;applicationErrorHandler=N(Fa);options=N(sp,{optional:!0});constructor(e,i,r,o,s,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(N(new gc("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,i=r=>r==="merge"||r==="preserve";e||=i(this.queryParamsHandling),e||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Ba&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(rp(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(c=>{this.applicationErrorHandler(c)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:rp(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(ut(fs),ut(bc),G_("tabindex"),ut(dr),ut(Kt),ut(sd))};static \u0275dir=qt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&X("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Tn("href",r.reactiveHref(),W9)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Fn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Fn],replaceUrl:[2,"replaceUrl","replaceUrl",Fn],routerLink:"routerLink"},features:[or]})}return n})(),fL=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new vt;constructor(e,i,r,o,s){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Ba&&this.update()})}ngAfterContentInit(){Wt(this.links.changes,Wt(null)).pipe(Xd()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Xr(e).pipe(Xd()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){let i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let i=M3e(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,i):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(i){return new(i||n)(ut(fs),ut(Kt),ut(dr),ut(vi),ut(g2,8))};static \u0275dir=qt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&Vs(o,g2,5),i&2){let s;_t(s=bt())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[or]})}return n})();function M3e(n){return!!n.paths}var Jb=class{};var mQ=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,o){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(rr(e=>e instanceof Ba),Yd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=zg(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Xr(r).pipe(Xd())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=Wt(null);let o=r.pipe(So(s=>s===null?Wt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(e,i);return Xr([o,s]).pipe(Xd())}else return o})}static \u0275fac=function(i){return new(i||n)(Ye(fs),Ye(Ur),Ye(Jb),Ye(Kk))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gQ=new $e(""),T3e=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=s2;restoredId=0;store={};constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof op?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ba?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof gu&&e.code===l2.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof d2))return;let i={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,i):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>z(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new d2(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){tb()};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function pL(n,...t){return Bf([{provide:vm,multi:!0,useValue:n},[],{provide:bc,useFactory:yQ,deps:[fs]},{provide:rb,multi:!0,useFactory:vQ},t.map(e=>e.\u0275providers)])}function yQ(n){return n.routerState.root}function ew(n,t){return{\u0275kind:n,\u0275providers:t}}function vQ(){let n=N(tn);return t=>{let e=n.get(Ns);if(t!==e.components[0])return;let i=n.get(fs),r=n.get(_Q);n.get(mL)===1&&i.initialNavigation(),n.get(SQ,null,{optional:!0})?.setUpPreloading(),n.get(gQ,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var _Q=new $e("",{factory:()=>new Xe}),mL=new $e("",{providedIn:"root",factory:()=>1});function bQ(){let n=[{provide:e3,useValue:!0},{provide:mL,useValue:0},v3(()=>{let t=N(tn);return t.get(NF,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(fs),o=t.get(_Q);Yk(r,()=>{i(!0)}),t.get(Xk).afterPreactivation=()=>(i(!0),o.closed?Wt(void 0):o),r.initialNavigation()}))})];return ew(2,n)}function wQ(){let n=[v3(()=>{N(fs).setUpLocationChangeListener()}),{provide:mL,useValue:2}];return ew(3,n)}var SQ=new $e("");function CQ(n){return ew(0,[{provide:SQ,useExisting:mQ},{provide:Jb,useExisting:n}])}function xQ(){return ew(8,[oL,{provide:Zb,useExisting:oL}])}function kQ(n){id("NgRouterViewTransitions");let t=[{provide:cL,useValue:hQ},{provide:dL,useValue:le({skipNextTransition:!!n?.skipInitialTransition},n)}];return ew(9,t)}var MQ=[cu,{provide:gm,useClass:ip},fs,ym,{provide:bc,useFactory:yQ,deps:[fs]},Kk,[]],tw=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[MQ,[],{provide:vm,multi:!0,useValue:e},[],i?.errorHandler?{provide:uL,useValue:i.errorHandler}:[],{provide:sp,useValue:i||{}},i?.useHash?A3e():D3e(),E3e(),i?.preloadingStrategy?CQ(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?I3e(i):[],i?.bindToComponentInputs?xQ().\u0275providers:[],i?.enableViewTransitions?kQ().\u0275providers:[],F3e()]}}static forChild(e){return{ngModule:n,providers:[{provide:vm,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({})}return n})();function E3e(){return{provide:gQ,useFactory:()=>{let n=N(sY),t=N(Pt),e=N(sp),i=N(Xk),r=N(gm);return e.scrollOffset&&n.setOffset(e.scrollOffset),new T3e(r,i,n,t,e)}}}function A3e(){return{provide:sd,useClass:$F}}function D3e(){return{provide:sd,useClass:P3}}function I3e(n){return[n.initialNavigation==="disabled"?wQ().\u0275providers:[],n.initialNavigation==="enabledBlocking"?bQ().\u0275providers:[]]}var hL=new $e("");function F3e(){return[{provide:hL,useFactory:vQ},{provide:rb,multi:!0,useExisting:hL}]}var P3e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},TQ=(n,t,e)=>{let i,r=P3e[n];return typeof r=="string"?i=r:t===1?i=r.one:i=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Zk(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var L3e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},R3e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},O3e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},EQ={date:Zk({formats:L3e,defaultWidth:"full"}),time:Zk({formats:R3e,defaultWidth:"full"}),dateTime:Zk({formats:O3e,defaultWidth:"full"})};var N3e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},AQ=(n,t,e,i)=>N3e[n];function y2(n){return(t,e)=>{let i=e?.context?String(e.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):s;r=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;r=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(t):t;return r[o]}}var B3e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},V3e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},U3e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},j3e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},H3e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},W3e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},z3e=(n,t)=>{let e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},DQ={ordinalNumber:z3e,era:y2({values:B3e,defaultWidth:"wide"}),quarter:y2({values:V3e,defaultWidth:"wide",argumentCallback:n=>n-1}),month:y2({values:U3e,defaultWidth:"wide"}),day:y2({values:j3e,defaultWidth:"wide"}),dayPeriod:y2({values:H3e,defaultWidth:"wide",formattingValues:W3e,defaultFormattingWidth:"wide"})};function v2(n){return(t,e={})=>{let i=e.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=t.match(r);if(!o)return null;let s=o[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?$3e(a,u=>u.test(s)):q3e(a,u=>u.test(s)),c;c=n.valueCallback?n.valueCallback(l):l,c=e.valueCallback?e.valueCallback(c):c;let d=t.slice(s.length);return{value:c,rest:d}}}function q3e(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function $3e(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function IQ(n){return(t,e={})=>{let i=t.match(n.matchPattern);if(!i)return null;let r=i[0],o=t.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=e.valueCallback?e.valueCallback(s):s;let a=t.slice(r.length);return{value:s,rest:a}}}var K3e=/^(\d+)(th|st|nd|rd)?/i,G3e=/\d+/i,X3e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Y3e={any:[/^b/i,/^(a|c)/i]},Z3e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Q3e={any:[/1/i,/2/i,/3/i,/4/i]},J3e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eke={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tke={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nke={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ike={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rke={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FQ={ordinalNumber:IQ({matchPattern:K3e,parsePattern:G3e,valueCallback:n=>parseInt(n,10)}),era:v2({matchPatterns:X3e,defaultMatchWidth:"wide",parsePatterns:Y3e,defaultParseWidth:"any"}),quarter:v2({matchPatterns:Z3e,defaultMatchWidth:"wide",parsePatterns:Q3e,defaultParseWidth:"any",valueCallback:n=>n+1}),month:v2({matchPatterns:J3e,defaultMatchWidth:"wide",parsePatterns:eke,defaultParseWidth:"any"}),day:v2({matchPatterns:tke,defaultMatchWidth:"wide",parsePatterns:nke,defaultParseWidth:"any"}),dayPeriod:v2({matchPatterns:ike,defaultMatchWidth:"any",parsePatterns:rke,defaultParseWidth:"any"})};var yL={code:"en-US",formatDistance:TQ,formatLong:EQ,formatRelative:AQ,localize:DQ,match:FQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};var oke={};function yu(){return oke}var ske=Math.pow(10,8)*24*60*60*1e3,WMt=-ske,Qk=6048e5,PQ=864e5;var ake=3600;var LQ=ake*24,zMt=LQ*7,lke=LQ*365.2425,cke=lke/12,qMt=cke*3,vL=Symbol.for("constructDateFrom");function ul(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&vL in n?n[vL](t):n instanceof Date?new n.constructor(t):new Date(t)}function Ro(n,t){return ul(t||n,n)}function _L(n){let t=Ro(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function RQ(n,...t){let e=ul.bind(null,n||t.find(i=>typeof i=="object"));return t.map(e)}function bL(n,t){let e=Ro(n,t?.in);return e.setHours(0,0,0,0),e}function OQ(n,t,e){let[i,r]=RQ(e?.in,n,t),o=bL(i),s=bL(r),a=+o-_L(o),l=+s-_L(s);return Math.round((a-l)/PQ)}function NQ(n,t){let e=Ro(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function BQ(n,t){let e=Ro(n,t?.in);return OQ(e,NQ(e))+1}function Ph(n,t){let e=yu(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Ro(n,t?.in),o=r.getDay(),s=(o<i?7:0)+o-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function _m(n,t){return Ph(n,Ge(le({},t),{weekStartsOn:1}))}function Jk(n,t){let e=Ro(n,t?.in),i=e.getFullYear(),r=ul(e,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);let o=_m(r),s=ul(e,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);let a=_m(s);return e.getTime()>=o.getTime()?i+1:e.getTime()>=a.getTime()?i:i-1}function VQ(n,t){let e=Jk(n,t),i=ul(t?.in||n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),_m(i)}function UQ(n,t){let e=Ro(n,t?.in),i=+_m(e)-+VQ(e);return Math.round(i/Qk)+1}function e4(n,t){let e=Ro(n,t?.in),i=e.getFullYear(),r=yu(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=ul(t?.in||n,0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);let a=Ph(s,t),l=ul(t?.in||n,0);l.setFullYear(i,0,o),l.setHours(0,0,0,0);let c=Ph(l,t);return+e>=+a?i+1:+e>=+c?i:i-1}function jQ(n,t){let e=yu(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=e4(n,t),o=ul(t?.in||n,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),Ph(o,t)}function HQ(n,t){let e=Ro(n,t?.in),i=+Ph(e,t)-+jQ(e,t);return Math.round(i/Qk)+1}function Tr(n,t){let e=n<0?"-":"",i=Math.abs(n).toString().padStart(t,"0");return e+i}var Lh={y(n,t){let e=n.getFullYear(),i=e>0?e:1-e;return Tr(t==="yy"?i%100:i,t.length)},M(n,t){let e=n.getMonth();return t==="M"?String(e+1):Tr(e+1,2)},d(n,t){return Tr(n.getDate(),t.length)},a(n,t){let e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return Tr(n.getHours()%12||12,t.length)},H(n,t){return Tr(n.getHours(),t.length)},m(n,t){return Tr(n.getMinutes(),t.length)},s(n,t){return Tr(n.getSeconds(),t.length)},S(n,t){let e=t.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,e-3));return Tr(r,t.length)}};var _2={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wL={G:function(n,t,e){let i=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});case"GGGG":default:return e.era(i,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){let i=n.getFullYear(),r=i>0?i:1-i;return e.ordinalNumber(r,{unit:"year"})}return Lh.y(n,t)},Y:function(n,t,e,i){let r=e4(n,i),o=r>0?r:1-r;if(t==="YY"){let s=o%100;return Tr(s,2)}return t==="Yo"?e.ordinalNumber(o,{unit:"year"}):Tr(o,t.length)},R:function(n,t){let e=Jk(n);return Tr(e,t.length)},u:function(n,t){let e=n.getFullYear();return Tr(e,t.length)},Q:function(n,t,e){let i=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Tr(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,e){let i=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Tr(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,e){let i=n.getMonth();switch(t){case"M":case"MM":return Lh.M(n,t);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,e){let i=n.getMonth();switch(t){case"L":return String(i+1);case"LL":return Tr(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,e,i){let r=HQ(n,i);return t==="wo"?e.ordinalNumber(r,{unit:"week"}):Tr(r,t.length)},I:function(n,t,e){let i=UQ(n);return t==="Io"?e.ordinalNumber(i,{unit:"week"}):Tr(i,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Lh.d(n,t)},D:function(n,t,e){let i=BQ(n);return t==="Do"?e.ordinalNumber(i,{unit:"dayOfYear"}):Tr(i,t.length)},E:function(n,t,e){let i=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});case"EEEE":default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,e,i){let r=n.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Tr(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});case"eeee":default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(n,t,e,i){let r=n.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Tr(o,t.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});case"cccc":default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(n,t,e){let i=n.getDay(),r=i===0?7:i;switch(t){case"i":return String(r);case"ii":return Tr(r,t.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});case"iiii":default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,e){let r=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,t,e){let i=n.getHours(),r;switch(i===12?r=_2.noon:i===0?r=_2.midnight:r=i/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,t,e){let i=n.getHours(),r;switch(i>=17?r=_2.evening:i>=12?r=_2.afternoon:i>=4?r=_2.morning:r=_2.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let i=n.getHours()%12;return i===0&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return Lh.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Lh.H(n,t)},K:function(n,t,e){let i=n.getHours()%12;return t==="Ko"?e.ordinalNumber(i,{unit:"hour"}):Tr(i,t.length)},k:function(n,t,e){let i=n.getHours();return i===0&&(i=24),t==="ko"?e.ordinalNumber(i,{unit:"hour"}):Tr(i,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Lh.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Lh.s(n,t)},S:function(n,t){return Lh.S(n,t)},X:function(n,t,e){let i=n.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return zQ(i);case"XXXX":case"XX":return bm(i);case"XXXXX":case"XXX":default:return bm(i,":")}},x:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"x":return zQ(i);case"xxxx":case"xx":return bm(i);case"xxxxx":case"xxx":default:return bm(i,":")}},O:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+WQ(i,":");case"OOOO":default:return"GMT"+bm(i,":")}},z:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+WQ(i,":");case"zzzz":default:return"GMT"+bm(i,":")}},t:function(n,t,e){let i=Math.trunc(+n/1e3);return Tr(i,t.length)},T:function(n,t,e){return Tr(+n,t.length)}};function WQ(n,t=""){let e=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),o=i%60;return o===0?e+String(r):e+String(r)+t+Tr(o,2)}function zQ(n,t){return n%60===0?(n>0?"-":"+")+Tr(Math.abs(n)/60,2):bm(n,t)}function bm(n,t=""){let e=n>0?"-":"+",i=Math.abs(n),r=Tr(Math.trunc(i/60),2),o=Tr(i%60,2);return e+r+t+o}var qQ=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$Q=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},dke=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],i=e[1],r=e[2];if(!r)return qQ(n,t);let o;switch(i){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",qQ(i,t)).replace("{{time}}",$Q(r,t))},KQ={p:$Q,P:dke};var uke=/^D+$/,hke=/^Y+$/,fke=["D","DD","YY","YYYY"];function GQ(n){return uke.test(n)}function XQ(n){return hke.test(n)}function YQ(n,t,e){let i=pke(n,t,e);if(console.warn(i),fke.includes(n))throw new RangeError(i)}function pke(n,t,e){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function ZQ(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function QQ(n){return!(!ZQ(n)&&typeof n!="number"||isNaN(+Ro(n)))}var mke=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gke=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yke=/^'([^]*?)'?$/,vke=/''/g,_ke=/[a-zA-Z]/;function JQ(n,t,e){let i=yu(),r=e?.locale??i.locale??yL,o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=Ro(n,e?.in);if(!QQ(a))throw new RangeError("Invalid time value");let l=t.match(gke).map(d=>{let u=d[0];if(u==="p"||u==="P"){let h=KQ[u];return h(d,r.formatLong)}return d}).join("").match(mke).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let u=d[0];if(u==="'")return{isToken:!1,value:bke(d)};if(wL[u])return{isToken:!0,value:d};if(u.match(_ke))throw new RangeError("Format string contains an unescaped latin alphabet character `"+u+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(l=r.localize.preprocessor(a,l));let c={firstWeekContainsDate:o,weekStartsOn:s,locale:r};return l.map(d=>{if(!d.isToken)return d.value;let u=d.value;(!e?.useAdditionalWeekYearTokens&&XQ(u)||!e?.useAdditionalDayOfYearTokens&&GQ(u))&&YQ(u,t,String(n));let h=wL[u[0]];return h(a,u,r.localize,c)}).join("")}function bke(n){let t=n.match(yke);return t?t[1].replace(vke,"'"):n}function eJ(){return Object.assign({},yu())}function SL(n,t,e){let i=eJ(),r=Cke(n,e.timeZone,e.locale??i.locale);return"formatToParts"in r?wke(r,t):Ske(r,t)}function wke(n,t){let e=n.formatToParts(t);for(let i=e.length-1;i>=0;--i)if(e[i].type==="timeZoneName")return e[i].value}function Ske(n,t){let e=n.format(t).replace(/\u200E/g,""),i=/ [\w-+ ]+$/.exec(e);return i?i[0].substr(1):""}function Cke(n,t,e){return new Intl.DateTimeFormat(e?[e.code,"en-US"]:void 0,{timeZone:t,timeZoneName:n})}function nJ(n,t){let e=Eke(t);return"formatToParts"in e?kke(e,n):Mke(e,n)}var xke={year:0,month:1,day:2,hour:3,minute:4,second:5};function kke(n,t){try{let e=n.formatToParts(t),i=[];for(let r=0;r<e.length;r++){let o=xke[e[r].type];o!==void 0&&(i[o]=parseInt(e[r].value,10))}return i}catch(e){if(e instanceof RangeError)return[NaN];throw e}}function Mke(n,t){let e=n.format(t),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(e);return[parseInt(i[3],10),parseInt(i[1],10),parseInt(i[2],10),parseInt(i[4],10),parseInt(i[5],10),parseInt(i[6],10)]}var CL={},tJ=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Tke=tJ==="06/25/2014, 00:00:00"||tJ==="\u200E06\u200E/\u200E25\u200E/\u200E2014\u200E \u200E00\u200E:\u200E00\u200E:\u200E00";function Eke(n){return CL[n]||(CL[n]=Tke?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),CL[n]}function t4(n,t,e,i,r,o,s){let a=new Date(0);return a.setUTCFullYear(n,t,e),a.setUTCHours(i,r,o,s),a}var iJ=36e5,Ake=6e4,xL={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function ap(n,t,e){if(!n)return 0;let i=xL.timezoneZ.exec(n);if(i)return 0;let r,o;if(i=xL.timezoneHH.exec(n),i)return r=parseInt(i[1],10),rJ(r)?-(r*iJ):NaN;if(i=xL.timezoneHHMM.exec(n),i){r=parseInt(i[2],10);let s=parseInt(i[3],10);return rJ(r,s)?(o=Math.abs(r)*iJ+s*Ake,i[1]==="+"?-o:o):NaN}if(Fke(n)){t=new Date(t||Date.now());let s=e?t:Dke(t),a=kL(s,n);return-(e?a:Ike(t,a,n))}return NaN}function Dke(n){return t4(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function kL(n,t){let e=nJ(n,t),i=t4(e[0],e[1]-1,e[2],e[3]%24,e[4],e[5],0).getTime(),r=n.getTime(),o=r%1e3;return r-=o>=0?o:1e3+o,i-r}function Ike(n,t,e){let r=n.getTime()-t,o=kL(new Date(r),e);if(t===o)return t;r-=o-t;let s=kL(new Date(r),e);return o===s?o:Math.max(o,s)}function rJ(n,t){return-23<=n&&n<=23&&(t==null||0<=t&&t<=59)}var oJ={};function Fke(n){if(oJ[n])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:n}),oJ[n]=!0,!0}catch{return!1}}var Pke=60*1e3,aJ={X:function(n,t,e){let i=ML(e.timeZone,n);if(i===0)return"Z";switch(t){case"X":return sJ(i);case"XXXX":case"XX":return b2(i);case"XXXXX":case"XXX":default:return b2(i,":")}},x:function(n,t,e){let i=ML(e.timeZone,n);switch(t){case"x":return sJ(i);case"xxxx":case"xx":return b2(i);case"xxxxx":case"xxx":default:return b2(i,":")}},O:function(n,t,e){let i=ML(e.timeZone,n);switch(t){case"O":case"OO":case"OOO":return"GMT"+Lke(i,":");case"OOOO":default:return"GMT"+b2(i,":")}},z:function(n,t,e){switch(t){case"z":case"zz":case"zzz":return SL("short",n,e);case"zzzz":default:return SL("long",n,e)}}};function ML(n,t){let e=n?ap(n,t,!0)/Pke:t?.getTimezoneOffset()??0;if(Number.isNaN(e))throw new RangeError("Invalid time zone specified: "+n);return e}function n4(n,t){let e=n<0?"-":"",i=Math.abs(n).toString();for(;i.length<t;)i="0"+i;return e+i}function b2(n,t=""){let e=n>0?"-":"+",i=Math.abs(n),r=n4(Math.floor(i/60),2),o=n4(Math.floor(i%60),2);return e+r+t+o}function sJ(n,t){return n%60===0?(n>0?"-":"+")+n4(Math.abs(n)/60,2):b2(n,t)}function Lke(n,t=""){let e=n>0?"-":"+",i=Math.abs(n),r=Math.floor(i/60),o=i%60;return o===0?e+String(r):e+String(r)+t+n4(o,2)}function TL(n){let t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+n-+t}var EL=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;var AL=36e5,lJ=6e4,Rke=2,Va={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:EL};function w2(n,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(n===null)return new Date(NaN);let e=t.additionalDigits==null?Rke:Number(t.additionalDigits);if(e!==2&&e!==1&&e!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]")return new Date(n.getTime());if(typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]")return new Date(n);if(Object.prototype.toString.call(n)!=="[object String]")return new Date(NaN);let i=Oke(n),{year:r,restDateString:o}=Nke(i.date,e),s=Bke(o,r);if(s===null||isNaN(s.getTime()))return new Date(NaN);if(s){let a=s.getTime(),l=0,c;if(i.time&&(l=Vke(i.time),l===null||isNaN(l)))return new Date(NaN);if(i.timeZone||t.timeZone){if(c=ap(i.timeZone||t.timeZone,new Date(a+l)),isNaN(c))return new Date(NaN)}else c=TL(new Date(a+l)),c=TL(new Date(a+l+c));return new Date(a+l+c)}else return new Date(NaN)}function Oke(n){let t={},e=Va.dateTimePattern.exec(n),i;if(e?(t.date=e[1],i=e[3]):(e=Va.datePattern.exec(n),e?(t.date=e[1],i=e[2]):(t.date=null,i=n)),i){let r=Va.timeZone.exec(i);r?(t.time=i.replace(r[1],""),t.timeZone=r[1].trim()):t.time=i}return t}function Nke(n,t){if(n){let e=Va.YYY[t],i=Va.YYYYY[t],r=Va.YYYY.exec(n)||i.exec(n);if(r){let o=r[1];return{year:parseInt(o,10),restDateString:n.slice(o.length)}}if(r=Va.YY.exec(n)||e.exec(n),r){let o=r[1];return{year:parseInt(o,10)*100,restDateString:n.slice(o.length)}}}return{year:null}}function Bke(n,t){if(t===null)return null;let e,i,r;if(!n||!n.length)return e=new Date(0),e.setUTCFullYear(t),e;let o=Va.MM.exec(n);if(o)return e=new Date(0),i=parseInt(o[1],10)-1,dJ(t,i)?(e.setUTCFullYear(t,i),e):new Date(NaN);if(o=Va.DDD.exec(n),o){e=new Date(0);let s=parseInt(o[1],10);return Hke(t,s)?(e.setUTCFullYear(t,0,s),e):new Date(NaN)}if(o=Va.MMDD.exec(n),o){e=new Date(0),i=parseInt(o[1],10)-1;let s=parseInt(o[2],10);return dJ(t,i,s)?(e.setUTCFullYear(t,i,s),e):new Date(NaN)}if(o=Va.Www.exec(n),o)return r=parseInt(o[1],10)-1,uJ(r)?cJ(t,r):new Date(NaN);if(o=Va.WwwD.exec(n),o){r=parseInt(o[1],10)-1;let s=parseInt(o[2],10)-1;return uJ(r,s)?cJ(t,r,s):new Date(NaN)}return null}function Vke(n){let t,e,i=Va.HH.exec(n);if(i)return t=parseFloat(i[1].replace(",",".")),DL(t)?t%24*AL:NaN;if(i=Va.HHMM.exec(n),i)return t=parseInt(i[1],10),e=parseFloat(i[2].replace(",",".")),DL(t,e)?t%24*AL+e*lJ:NaN;if(i=Va.HHMMSS.exec(n),i){t=parseInt(i[1],10),e=parseInt(i[2],10);let r=parseFloat(i[3].replace(",","."));return DL(t,e,r)?t%24*AL+e*lJ+r*1e3:NaN}return null}function cJ(n,t,e){t=t||0,e=e||0;let i=new Date(0);i.setUTCFullYear(n,0,4);let r=i.getUTCDay()||7,o=t*7+e+1-r;return i.setUTCDate(i.getUTCDate()+o),i}var Uke=[31,28,31,30,31,30,31,31,30,31,30,31],jke=[31,29,31,30,31,30,31,31,30,31,30,31];function hJ(n){return n%400===0||n%4===0&&n%100!==0}function dJ(n,t,e){if(t<0||t>11)return!1;if(e!=null){if(e<1)return!1;let i=hJ(n);if(i&&e>jke[t]||!i&&e>Uke[t])return!1}return!0}function Hke(n,t){if(t<1)return!1;let e=hJ(n);return!(e&&t>366||!e&&t>365)}function uJ(n,t){return!(n<0||n>52||t!=null&&(t<0||t>6))}function DL(n,t,e){return!(n<0||n>=25||t!=null&&(t<0||t>=60)||e!=null&&(e<0||e>=60))}var Wke=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function IL(n,t,e={}){t=String(t);let i=t.match(Wke);if(i){let r=w2(e.originalDate||n,e);t=i.reduce(function(o,s){if(s[0]==="'")return o;let a=o.indexOf(s),l=o[a-1]==="'",c=o.replace(s,"'"+aJ[s[0]](r,s,e)+"'");return l?c.substring(0,a-1)+c.substring(a+1):c},t)}return JQ(n,t,e)}function FL(n,t,e){n=w2(n,e);let i=ap(t,n,!0),r=new Date(n.getTime()-i),o=new Date(0);return o.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),o.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),o}function nw(n,t,e,i){return i=Ge(le({},i),{timeZone:t,originalDate:n}),IL(FL(n,t,{timeZone:i.timeZone}),e,i)}var Xa=_i(Ki()),Uy=_i(Ki()),Re={NETWORKS:{MAINNET:{NAME:"mainnet",URL:"wss://s1.ripple.com"},TESTNET:{NAME:"testnet",URL:"wss://s.altnet.rippletest.net:51233"},DEVNET:{NAME:"devnet",URL:"wss://s.devnet.rippletest.net:51233"}},XRPL_WIN_URL:{MAINNET:"https://xrplwin.com/",TESTNET:"https://testnet.xrplwin.com/",DEVNET:"https://devnet.xrplwin.com/",TX:"https://devnet.xrplwin.com/tx/",DEVNET_ACCOUNT:"https://devnet.xrplwin.com/account/"},XRPL_EXPLORER_URL:{MAINNET:"https://livenet.xrpl.org/",TESTNET:"https://testnet.xrpl.org/",DEVNET:"https://devnet.xrpl.org/",TX:"https://devnet.xrplwin.com/tx/",DEVNET_ACCOUNT:"https://devnet.xrplwin.com/account/"},CREDENTIAL_REGEX:/^[0-9A-F]{2,128}$/,LSF_ACCEPTED:65536,SKIP_THRESHOLD_MS:60*1e3,ENCRYPTION:{ED25519:"ed25519",SECP256K1:"secp256k1"},TRANSACTION:{TES_SUCCESS:"tesSUCCESS"},PAYMENT_FLAGS:{65536:"tfNoDirectRipple",131072:"tfPartialPayment",262144:"tfLimitQuality"},OFFER_CREATE_FLAGS:{65536:"tfPassive",131072:"tfImmediateOrCancel",262144:"tfFillOrKill",524288:"tfSell"},TRUST_SET_FLAGS:{65536:"tfSetAuth",131072:"tfSetNoRipple",262144:"tfClearNoRipple",524288:"tfSetFreeze",1048576:"tfClearFreeze"},RIPPLE_STATE_FLAGS:{65536:"lsfLowReserve",131072:"lsfHighReserve",262144:"lsfLowNoRipple",524288:"lsfHighNoRipple",1048576:"lsfLowFreeze",2097152:"lsfHighFreeze"},ESCROW_CREATE_FLAGS:{131072:"tfFinishAfter",262144:"tfCancelAfter"},NFT_FLAGS:{Burnable:1,OnlyXRP:2,TrustLine:4,Transferable:8,Mutable:16},TF_INNER_BATCH_TXN:{BATCH_TXN:1073741824},BATCH_FLAGS:{ALL_OR_NOTHING:65536,ONLY_ONE:131072,UNTIL_FAILURE:262144,INDEPENDENT:524288},ACCOUNT_FLAGS_CONFIG:[{key:"asfRequireDest",title:"Require Destination Tag",desc:"Require a destination tag to send transactions to this account."},{key:"asfRequireAuth",title:"Require Trust Line Auth",desc:"Require authorization for users to hold balances issued by this address can only be enabled if the address has no trust lines connected to it."},{key:"asfDisallowXRP",title:"Disallow XRP",desc:"XRP should not be sent to this account."},{key:"asfDisableMaster",title:"Disable Master Key",desc:"Disallow use of the master key pair. Can only be enabled if the account has configured another way to sign transactions, such as a Regular Key or a Signer List."},{key:"asfNoFreeze",title:"No Freeze",desc:"Permanently give up the ability to freeze individual trust lines or disable Global Freeze. This flag can never be disabled after being enabled."},{key:"asfGlobalFreeze",title:"Global Freeze",desc:"Freeze all assets issued by this account."},{key:"asfDefaultRipple",title:"Default Ripple",desc:"Enable rippling on this account's trust lines by default."},{key:"asfDepositAuth",title:"Deposit Authorization",desc:"Enable Deposit Authorization on this account."},{key:"asfAuthorizedNFTokenMinter",title:"Authorized NFToken Minter",desc:"Allow another account to mint and burn tokens on behalf of this account."},{key:"asfDisallowIncomingNFTokenOffer",title:"Disallow Incoming NFToken Offer",desc:"Disallow other accounts from creating incoming NFTOffers."},{key:"asfDisallowIncomingCheck",title:"Disallow Incoming Check",desc:"Disallow other accounts from creating incoming Checks."},{key:"asfDisallowIncomingPayChan",title:"Disallow Incoming Payment Channel",desc:"Disallow other accounts from creating incoming PayChannels."},{key:"asfDisallowIncomingTrustline",title:"Disallow Incoming Trustline",desc:"Disallow other accounts from creating incoming Trustlines."},{key:"asfAllowTrustLineClawback",title:"Allow TrustLine Clawback",desc:"Permanently gain the ability to claw back issued IOUs."},{key:"asfAllowTrustLineLocking",title:"Allow TrustLine Locking",desc:"Issuers allow their IOUs to be used as escrow amounts."}],FLAGS:[{name:"asfRequireDest",label:"Require Destination Tag",value:1,xrplName:"requireDestinationTag",xrplEnum:Xa.AccountSetAsfFlags.asfRequireDest},{name:"asfRequireAuth",label:"Require Trust Line Auth",value:2,xrplName:"requireAuthorization",xrplEnum:Xa.AccountSetAsfFlags.asfRequireAuth},{name:"asfDisallowXRP",label:"Disallow XRP Payments",value:3,xrplName:"disallowIncomingXRP",xrplEnum:Xa.AccountSetAsfFlags.asfDisallowXRP},{name:"asfDisableMaster",label:"Disable Master Key",value:4,xrplName:"disableMasterKey",xrplEnum:Xa.AccountSetAsfFlags.asfDisableMaster},{name:"asfNoFreeze",label:"Prevent Freezing Trust Lines",value:6,xrplName:"noFreeze",xrplEnum:Xa.AccountSetAsfFlags.asfNoFreeze},{name:"asfGlobalFreeze",label:"Freeze All Trust Lines",value:7,xrplName:"globalFreeze",xrplEnum:Xa.AccountSetAsfFlags.asfGlobalFreeze},{name:"asfDefaultRipple",label:"Enable Rippling",value:8,xrplName:"defaultRipple",xrplEnum:Xa.AccountSetAsfFlags.asfDefaultRipple},{name:"asfDepositAuth",label:"Require Deposit Auth",value:9,xrplName:"depositAuth",xrplEnum:Xa.AccountSetAsfFlags.asfDepositAuth},{name:"asfDisallowIncomingNFTokenOffer",label:"Block NFT Offers",value:12,xrplName:"disallowIncomingNFTokenOffer",xrplEnum:Xa.AccountSetAsfFlags.asfDisallowIncomingNFTokenOffer},{name:"asfDisallowIncomingCheck",label:"Block Checks",value:13,xrplName:"disallowIncomingCheck",xrplEnum:Xa.AccountSetAsfFlags.asfDisallowIncomingCheck},{name:"asfDisallowIncomingPayChan",label:"Block Payment Channels",value:14,xrplName:"disallowIncomingPayChan",xrplEnum:Xa.AccountSetAsfFlags.asfDisallowIncomingPayChan},{name:"asfDisallowIncomingTrustline",label:"Block Trust Lines",value:15,xrplName:"disallowIncomingTrustline",xrplEnum:Xa.AccountSetAsfFlags.asfDisallowIncomingTrustline},{name:"asfAllowTrustLineClawback",label:"Allow Trust Line Clawback",value:16,xrplName:"allowTrustLineClawback",xrplEnum:Xa.AccountSetAsfFlags.asfAllowTrustLineClawback},{name:"asfAllowTrustLineLocking",label:"Allow Trust Line Locking",value:17,xrplName:"allowTrustLineLocking",xrplEnum:Xa.AccountSetAsfFlags.asfAllowTrustLineLocking},{name:"passwordSpent",label:"Set Regular Key",value:100,xrplName:"passwordSpent",xrplEnum:""}],FLAGMAP:{asfRequireDest:"requireDestinationTag",asfRequireAuth:"requireAuthorization",asfDisallowXRP:"disallowIncomingXRP",asfDisableMaster:"disableMasterKey",asfNoFreeze:"noFreeze",asfGlobalFreeze:"globalFreeze",asfDefaultRipple:"defaultRipple",asfDepositAuth:"depositAuth",asfDisallowIncomingNFTokenOffer:"disallowIncomingNFTokenOffer",asfDisallowIncomingCheck:"disallowIncomingCheck",asfDisallowIncomingPayChan:"disallowIncomingPayChan",asfDisallowIncomingTrustline:"disallowIncomingTrustline",asfAllowTrustLineClawback:"allowTrustLineClawback",asfAllowTrustLineLocking:"allowTrustLineLocking"},DELEGATE_ACTIONS:[{id:65537,key:"TrustlineAuthorize",txType:"Trustline Authorize",description:"Can authorize individual trust lines."},{id:65538,key:"TrustlineFreeze",txType:"Trustline Freeze",description:"Can freeze individual trust lines."},{id:65539,key:"TrustlineUnfreeze",txType:"Trustline Unfreeze",description:"Can unfreeze individual trust lines."},{id:65540,key:"AccountDomainSet",txType:"Account Domain Set",description:"Can set the Domain field of the account."},{id:65541,key:"AccountEmailHashSet",txType:"Account Email Hash Set",description:"Can set the EmailHash field of the account."},{id:65542,key:"AccountMessageKeySet",txType:"Account Message Key Set",description:"Can set the MessageKey field of the account."},{id:65543,key:"AccountTransferRateSet",txType:"Account Transfer Rate Set",description:"Can set the transfer fee of fungible tokens."},{id:65544,key:"AccountTickSizeSet",txType:"Account TickSize Set",description:"Can set the tick size of fungible tokens."},{id:65545,key:"PaymentMint",txType:"Payment Mint",description:"Can send payments that mint fungible tokens or MPTs."},{id:65546,key:"PaymentBurn",txType:"Payment Burn",description:"Can send payments that burn fungible tokens or MPTs."},{id:65547,key:"MPTokenIssuanceLock",txType:"MPToken Issuance Lock",description:"Can lock balances of a particular MPT."},{id:65548,key:"MPTokenIssuanceUnlock",txType:"MPToken Issuance Unlock",description:"Can unlock balances of a particular MPT."}],BLACK_LISTED_MEMES:["USD","EUR","GBP","JPY","BTC","ETH","XRP","CNY","USDT","USDC","DAI","666","GRD","coreum905c098732","RLUSD","ETH","USDC.axl"],INPUT_IDS:["encryptionType","createWallet","account1name","account2name","account3name","issuerName","account1address","account2address","account3address","issuerAddress","account1seed","account2seed","account3seed","issuerSeed","account1encryptionAlgorithm","account2encryptionAlgorithm","issuerEncryptionAlgorithm","account1mnemonic","account2mnemonic","account3mnemonic","issuerMnemonic","account1secretNumbers","account2secretNumbers","account3secretNumbers","issuerSecretNumbers","accountNameField","accountAddressField","accountSeedField","xrpBalanceField","amountField","destinationField","knownIssuers"],XRP_CURRENCY:"XRP",EMPTY_STRING:"",LAST_LEDGER_ADD_TIME:20,MAX_FEE:"12",MIN_FEE:"10",MAX_ESCROW_FEE:"24",TRUSTLINE:{FLAGS:{tfSetfAuth:!1,tfSetNoRipple:!1,tfClearNoRipple:!1,tfSetFreeze:!1,tfClearFreeze:!1},FLAG_LIST:[{key:"tfSetfAuth",label:"Require Authorization (tfSetfAuth)"},{key:"tfSetNoRipple",label:"Set No Ripple (tfSetNoRipple)"},{key:"tfClearNoRipple",label:"Clear No Ripple (tfClearNoRipple)"},{key:"tfSetFreeze",label:"Set Freeze (tfSetFreeze)"},{key:"tfClearFreeze",label:"Clear Freeze (tfClearFreeze)"}],FLAG_MAP:{tfSetfAuth:Uy.TrustSetFlags.tfSetfAuth,tfSetNoRipple:Uy.TrustSetFlags.tfSetNoRipple,tfClearNoRipple:Uy.TrustSetFlags.tfClearNoRipple,tfSetFreeze:Uy.TrustSetFlags.tfSetFreeze,tfClearFreeze:Uy.TrustSetFlags.tfClearFreeze},LEDGER_FLAG_MAP:{lsfLowAuth:65536,lsfNoRipple:131072,lsfLowFreeze:1048576,lsfHighFreeze:2097152,lsfHighAuth:524288},CONFLICTS:{tfSetNoRipple:["tfClearNoRipple"],tfClearNoRipple:["tfSetNoRipple"],tfSetFreeze:["tfClearFreeze"],tfClearFreeze:["tfSetFreeze"]}},SIGN_TRANSACTION_LABEL_MAP:{batch:"Batch",sendXrp:"Send XRP",setTrustline:"Set Trustline",removeTrustline:"Remove Trustline",accountFlagSet:"Account Flag Set",issueCurrency:"Issue Currency",accountFlagClear:"Account Flag Clear",createTimeEscrow:"Create Time Escrow",finishTimeEscrow:"Finish Time Escrow",createConditionEscrow:"Create Condition Escrow",finishConditionEscrow:"Finish Condition Escrow",cancelEscrow:"Cancel Escrow",createTimeEscrowToken:"Create Token Time Escrow",finishTimeEscrowToken:"Finish Token Time Escrow",createConditionEscrowToken:"Create Token Condition Escrow",finishConditionEscrowToken:"Finish Token Condition Escrow",cancelEscrowToken:"Cancel Token Escrow",createCheck:"Check Create",cashCheck:"Check Cash",cancelCheck:"Check Cancel",createCheckToken:"Check Token Create",cashCheckToken:"Check Token Cash",cancelCheckToken:"Check Token Cancel",createMPT:"MPT Create",authorizeMPT:"Authorize MPT",unauthorizeMPT:"Unauthorize MPT",sendMPT:"Send MPT",lockMPT:"Lock MPT",unlockMPT:"Unlock MPT",destroyMPT:"Destroy MPT"}};var rn=class n{inputsCleared=new vt;networkColors={devnet:"rgb(56, 113, 69)",testnet:"#ff6719",mainnet:"rgb(115, 49, 55)"};networkServers={devnet:"wss://s.devnet.rippletest.net:51233",testnet:"wss://s.altnet.rippletest.net:51233",mainnet:"wss://s1.ripple.com"};getNet(){let t=localStorage.getItem("selectedNetwork")||"devnet",e;return!localStorage.getItem("server")||localStorage.getItem("server")==="undefined"?e=this.networkServers[t]:e=localStorage.getItem("server")||this.networkServers[t],{net:e,environment:t}}setNet(t,e){localStorage.setItem("server",t),localStorage.setItem("selectedNetwork",e)}getNetworkColor(t){return this.networkColors[t.toLowerCase()]||"#1a1c21"}getInputValue(t){return localStorage.getItem(t)||""}removeValue(t){localStorage.removeItem(t)}claerValues(){localStorage.clear()}set(t,e){if(e===void 0){localStorage.removeItem(t);return}localStorage.setItem(t,JSON.stringify(e))}get(t){let e=localStorage.getItem(t);return e?JSON.parse(e):null}setKnownIssuers(t,e){e.XRP||(e.XRP=[]),localStorage.setItem(t,JSON.stringify(e))}getKnownIssuers(t){let e=localStorage.getItem(t);if(!e)return null;try{let i=JSON.parse(e);return Object.keys(i).forEach(r=>{Array.isArray(i[r])||(i[r]=i[r]?[i[r]]:[])}),i.XRP||(i.XRP=[]),i}catch(i){return console.error("Error parsing known issuers from storage:",i),null}}setKnownWhitelistAddress(t,e){localStorage.setItem(t,JSON.stringify(e))}getKnownWhitelistAddress(t){let e=localStorage.getItem(t);return e?JSON.parse(e):null}setInputValue(t,e){Re.INPUT_IDS.includes(t)&&localStorage.setItem(t,e)}getInputIds(){return[...Re.INPUT_IDS]}getActiveNavLink(){return localStorage.getItem("activeNavLink")||""}setActiveNavLink(t){localStorage.setItem("activeNavLink",t),localStorage.removeItem("activeEscrowLink"),localStorage.removeItem("activeAccountsLink")}getActiveEscrowLink(){return localStorage.getItem("activeEscrowLink")||""}getActiveNftLink(){return localStorage.getItem("activeNftLink")||""}getActiveMptLink(){return localStorage.getItem("activeMptLink")||""}setActiveEscrowLink(t){localStorage.setItem("activeEscrowLink",t),localStorage.removeItem("activeNavLink"),localStorage.removeItem("activeAccountsLink")}getActiveAccountsLink(){return localStorage.getItem("activeAccountsLink")||""}setActiveAccountsLink(t){localStorage.setItem("activeAccountsLink",t),localStorage.removeItem("activeNavLink"),localStorage.removeItem("activeEscrowLink")}static \u0275fac=function(e){return new(e||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var Cr=_i(Ki()),Ad=_i(Ki());var lue=_i(gle()),cue=_i(jU()),due=_i(oue()),uue=_i(aue());var Fc=_i(Ki());var GE=class n{STORAGE_KEY="tokenCreationDates";cache;constructor(){let t=localStorage.getItem(this.STORAGE_KEY);this.cache=t?new Map(JSON.parse(t)):new Map}getDate(t){let e=this.cache.get(t);return e?new Date(e):null}setDate(t,e){this.cache.set(t,e.toISOString()),this.persist()}clear(){this.cache.clear(),localStorage.removeItem(this.STORAGE_KEY)}persist(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(Array.from(this.cache.entries())))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sr=class n{constructor(t,e,i){this.storageService=t;this.http=e;this.tokenCacheService=i}client=null;tokensSubject=new bi([]);tokens$=this.tokensSubject.asObservable();proxyServer="http://localhost:3000";connectingPromise=null;connectionStatus=new bi("disconnected");connectionStatus$=this.connectionStatus.asObservable();connectionMessage=new bi("Disconnected");connectionMessage$=this.connectionMessage.asObservable();getClient(){return z(this,null,function*(){if(this.client?.isConnected())return this.client;if(this.connectingPromise)return this.connectingPromise;this.connectingPromise=this.connectWithRetry();try{return this.client=yield this.connectingPromise,this.client}finally{this.connectingPromise=null}})}connectWithRetry(){return z(this,null,function*(){let{net:t}=this.getNet(),e=5,i=1e3;this.setStatus("connecting","Connecting...");for(let r=1;r<=e;r++){let o=new Fc.Client(t);try{let s=o.connect(),a=new Promise((c,d)=>setTimeout(()=>d(new Error("Connection timeout")),15e3));yield Promise.race([s,a]),yield o.request({command:"server_info"}),this.client=o;let l=this.getNetworkName();return this.setStatus("connected",`Connected to ${l}`),o.on("disconnected",c=>{console.warn("XRPL client disconnected:",c),this.setStatus("disconnected","Connection lost"),this.client=null}),o}catch(s){if(console.warn(`XRPL connection attempt ${r}/${e} failed:`,s.message),r===e){let l=`Failed to connect after ${e} attempts`;throw this.setStatus("disconnected",l),new Error(l)}let a=i*Math.pow(2,r-1);yield new Promise(l=>setTimeout(l,a))}}throw new Error("Unexpected connection failure")})}disconnect(){return z(this,null,function*(){this.client&&(yield this.client.disconnect(),this.client=null),this.setStatus("disconnected","Disconnected")})}setStatus(t,e){this.connectionStatus.next(t),this.connectionMessage.next(e)}getNetworkName(){let t=this.storageService.getNet().environment;return t.charAt(0).toUpperCase()+t.slice(1)}getCurrentStatus(){return this.connectionStatus.value}getCurrentMessage(){return this.connectionMessage.value}getNet(){return this.storageService.getNet()}decodeCurrencyCode(t){let e=Buffer.from(t,"hex"),i=e.subarray(0,e.findIndex(r=>r===0)===-1?20:e.findIndex(r=>r===0));return new TextDecoder().decode(i)}getXrplServerInfo(t,e,i){return z(this,null,function*(){try{return yield t.request({command:"server_info",ledger_index:e})}catch(r){throw console.error(`Error fetching ledger server info:: ${r}`),new Error(`Error fetching ledger server info:: ${r.message||"Unknown error"}`)}})}getTxData(t,e){return z(this,null,function*(){try{return yield t.request({command:"tx",transaction:e})}catch(i){throw console.error(`Error fetching ${e} data: ${i}`),new Error(`Failed to fetch trasnaction data: ${i.message||"Unknown error"}`)}})}getXrplServerState(t,e,i){return z(this,null,function*(){try{return yield t.request({command:"server_state",ledger_index:e})}catch(r){throw console.error("Error fetching xrpl server state:",r),new Error(`Failed to fetch Ripple server state: ${r.message||"Unknown error"}`)}})}formatTokenAge(t){let i=new Date().getTime()-t.getTime(),r=Math.floor(i/(1e3*60)),o=Math.floor(r/1440),s=Math.floor(r%1440/60),a=r%60,l=[];return o>0&&l.push(`${o}d `),(s>0||o>0)&&l.push(`${s}h `),l.push(`${a}min`),l.join("")}delay(t){return z(this,null,function*(){return new Promise(e=>setTimeout(e,t))})}getTokenInfo(t,e){let i=`${t}.${e}`,r=`${this.proxyServer}/api/xpmarket/token/${i}`;return this.http.get(r)}getTokenCreationDateService(t,e,i){return z(this,null,function*(){let r=`${t}:${e}`,o=this.tokenCacheService.getDate(r);if(o)return console.debug(`Token creation date for ${r} found in cache: ${o}`),o;let s=null;for(;;){let l=yield i.request(le({command:"account_tx",account:e,limit:20,forward:!0},s&&{marker:s}));for(let c of l.result.transactions){let d=c.tx_json??c.tx;if(!d)continue;if((d.TransactionType==="TrustSet"&&d.LimitAmount?.currency===t||d.TransactionType==="Payment"&&typeof d.Amount=="object"&&d.Amount?.currency===t||d.TransactionType==="OfferCreate"&&(typeof d.TakerGets=="object"&&d.TakerGets.currency===t||typeof d.TakerPays=="object"&&d.TakerPays.currency===t))&&d.date){let h=new Date((d.date+946684800)*1e3);return this.tokenCacheService.setDate(r,h),h}}if(!l.result.marker)break;s=l.result.marker,yield this.delay(150)}let a=new Date(0);return this.tokenCacheService.setDate(r,a),a})}isMemeCoin(t,e){let i;return t.length>3?(i=Re.BLACK_LISTED_MEMES.includes(this.decodeCurrencyCode(t)),i&&console.debug(`Skipping non-meme token: ${this.decodeCurrencyCode(t)}:${e}`)):(i=Re.BLACK_LISTED_MEMES.includes(t.toUpperCase()),i&&console.debug(`Skipping non-meme token: ${t}:${e}`)),i}monitorNewTokens(){return z(this,null,function*(){let t=yield this.getClient();try{yield t.request({command:"subscribe",streams:["ledger"]}),t.on("ledgerClosed",e=>z(this,null,function*(){try{let r=yield t.request({command:"ledger",ledger_index:e.ledger_index,transactions:!0,expand:!0});if(!r.result.ledger.transactions||r.result.ledger.transactions.length===0){console.log("No transactions found in ledger:",e.ledger_index);return}let o=[];for(let s of r.result.ledger.transactions){let a,l,c="Unknown",d="0",u="0",h=new Date,f=s.tx_json.TransactionType;if(s.meta?.TransactionResult!=="tesSUCCESS")continue;if(f==="TrustSet"&&s.tx_json.LimitAmount)a=s.tx_json.LimitAmount.currency,l=s.tx_json.LimitAmount.issuer,c="TrustSet",d=s.tx_json.LimitAmount.value||"0";else if(f==="Payment")if(typeof s.tx_json.DeliverMax=="object"&&s.tx_json.DeliverMax)a=s.tx_json.DeliverMax.currency,l=s.tx_json.DeliverMax.issuer,c="Buy",d=s.tx_json.DeliverMax.value,u=typeof s.tx_json.SendMax=="string"?Number(Fc.dropsToXrp(s.tx_json.SendMax)).toFixed(6):"0";else if(typeof s.tx_json.Amount=="object"&&s.tx_json.Amount)a=s.tx_json.Amount.currency,l=s.tx_json.Amount.issuer,c="Buy",d=s.tx_json.Amount.value,u=typeof s.tx_json.SendMax=="string"?Number(Fc.dropsToXrp(s.tx_json.SendMax)).toFixed(6):"0";else if(typeof s.tx_json.SendMax=="object"&&s.tx_json.SendMax){a=s.tx_json.SendMax.currency,l=s.tx_json.SendMax.issuer,c="Sell",d=s.tx_json.SendMax.value;let y=s.meta?.delivered_amount;typeof y=="string"?u=Number(Fc.dropsToXrp(y)).toFixed(6):typeof y=="object"&&(y.currency==="XRP"?u=Number(Fc.dropsToXrp(y.value)).toFixed(6):(d=y.value,a=y.currency,l=y.issuer))}else continue;else f==="OfferCreate"&&(typeof s.tx_json.TakerGets=="object"&&s.tx_json.TakerGets?(a=s.tx_json.TakerGets.currency,l=s.tx_json.TakerGets.issuer,c="Buy",d=s.tx_json.TakerGets.value,u=typeof s.tx_json.TakerPays=="string"?Number(Fc.dropsToXrp(s.tx_json.TakerPays)).toFixed(6):"0"):typeof s.tx_json.TakerPays=="object"&&s.tx_json.TakerPays&&(a=s.tx_json.TakerPays.currency,l=s.tx_json.TakerPays.issuer,c="Sell",d=s.tx_json.TakerPays.value,u=typeof s.tx_json.TakerGets=="string"?Number(Fc.dropsToXrp(s.tx_json.TakerGets)).toFixed(6):"0"));if(a&&l&&this.isMemeCoin(a,l))continue;let p=!1;if(a&&l){let y=null;try{y=yield this.getTokenCreationDateService(a,l,t),yield this.delay(2e3),(y?Date.now()-y.getTime()<3e3*60*1e3:!1)||(console.debug(`Old tokens skipped: ${a}:${l}`),p=!0)}catch(b){console.error(`Error fetching token creation date for ${a}:${l}:`,b)}if(p)continue;let v="";y!==null?v=this.formatTokenAge(y):y=new Date,o.push({currency:a,issuer:l,transactionHash:s.hash,timestamp:h,createdDate:y,transactionType:f,creationAge:v,action:c,amountToken:d,amountXrp:u})}}o.length>0&&this.tokensSubject.next([...this.tokensSubject.value,...o])}catch(i){console.error("Error processing ledger:",i)}}))}catch(e){console.error("Error subscribing to ledger:",e)}})}getLastLedgerIndex(t){return z(this,null,function*(){try{return(yield t.request({command:"ledger",ledger_index:"closed"})).result.ledger_index}catch(e){throw console.error("Error fetching last ledger index:",e),new Error(`Failed to fetch Ripple last ledger index: ${e.message||"Unknown error"}`)}})}getLedgerCloseTime(t){return z(this,null,function*(){try{return(yield t.request({command:"ledger",ledger_index:"current"})).result.ledger.close_time}catch(e){throw console.error("Error fetching ledger close time:",e),new Error(`Failed to fetch Ripple ledger close time: ${e.message||"Unknown error"}`)}})}getCurrentRippleTime(t){return z(this,null,function*(){try{return(yield t.request({command:"ledger",ledger_index:"validated"})).result.ledger.close_time}catch(e){throw console.error("Error fetching Ripple time:",e),new Error(`Failed to fetch Ripple time: ${e.message||"Unknown error"}`)}})}getTransactionFee(t){return z(this,null,function*(){try{return(yield t.request({command:"fee",ledger_index:"closed"})).result.drops.open_ledger_fee}catch(e){throw console.error("Error fetching fee:",e),new Error(`Failed to fetch Ripple fee: ${e.message||"Unknown error"}`)}})}calculateTransactionFee(t){return z(this,null,function*(){try{let i=(yield this.getTransactionFee(t))||Re.MIN_FEE,r=Math.min(parseInt(i)*1.5,parseInt(Re.MAX_FEE)).toString();return r==="1.5"?Re.MIN_FEE:(console.log(`Calculated transaction fee: ${r} drops`),r)}catch(e){return console.error("Error calculating transaciton fee:",e),Re.MIN_FEE}})}getAccountInfo(t,e,i,r){return z(this,null,function*(){try{return r?yield t.request({command:"account_info",account:e,ledger_index:i,type:r}):yield t.request({command:"account_info",account:e,ledger_index:i})}catch(o){throw console.error("Error fetching account info:",o),new Error(`Failed to fetch account info: ${o.message||"Unknown error"}`)}})}filterAccountObjectsByTypes(t,e){let i=(t.result.account_objects??[]).filter(r=>e.includes(r.LedgerEntryType));return Ge(le({},t),{result:Ge(le({},t.result),{account_objects:i})})}getAMMInfo(t,e,i,r,o){return z(this,null,function*(){try{return yield t.request({command:"amm_info",asset:e,asset2:i,account:r,ledger_index:o})}catch(s){if(s.data&&s.data?.error==="actNotFound")return[];throw console.error("Error fetching amm info:",s),new Error(`Failed to fetch amm info: ${s.message||"Unknown error"}`)}})}getAccountNFTs(t,e,i,r){return z(this,null,function*(){try{return r?yield t.request({command:"account_nfts",account:e,ledger_index:i,type:r}):yield t.request({command:"account_nfts",account:e,ledger_index:i})}catch(o){throw console.error("Error fetching account nft info:",o),new Error(`Failed to fetch account nft info: ${o.message||"Unknown error"}`)}})}getAccountNFTOffers(t,e,i,r){return z(this,null,function*(){try{return yield t.request({command:"account_objects",account:e,ledger_index:"validated",type:"nft_offer"})}catch(o){throw console.error("Error fetching account nft info:",o),new Error(`Failed to fetch account nft info: ${o.message||"Unknown error"}`)}})}getNFTBuyOffers(t,e){return z(this,null,function*(){try{return yield t.request({command:"nft_buy_offers",nft_id:e})}catch(i){if(i.data&&i.data.error==="objectNotFound")return[];throw i}})}getNFTSellOffers(t,e){return z(this,null,function*(){try{return yield t.request({command:"nft_sell_offers",nft_id:e})}catch(i){if(i.data&&i.data.error==="objectNotFound")return[];throw i}})}fetchAllOffersSafe(t,e,i){return z(this,null,function*(){let r,o=[];try{do{let s={command:e,nft_id:i,limit:200};r&&(s.marker=r);let a=yield t.request(s);a.result.offers&&o.push(...a.result.offers),r=a.result.marker}while(r)}catch(s){if(s.data&&s.data.error==="objectNotFound")return[];throw s}return o})}getNFTHistory(t,e,i){return z(this,null,function*(){try{return yield t.request({command:"nft_history",nft_id:i,ledger_index:e})}catch(r){throw console.error("Error fetching gateway_balances:",r),new Error(`Failed to fetch gateway_balances: ${r.message||"Unknown error"}`)}})}getNFTsByIssuer(t,e,i,r){return z(this,null,function*(){try{return yield t.request({command:"nfts_by_issuer",nft_id:i,issuer:r,ledger_index:e})}catch(o){throw console.error("Error fetching gateway_balances:",o),new Error(`Failed to fetch gateway_balances: ${o.message||"Unknown error"}`)}})}getChannelVerifiy(t,e,i,r,o){return z(this,null,function*(){try{return yield t.request({command:"channel_verify",amount:Fc.xrpToDrops(i),public_key:r,signature:o,channel_id:e})}catch(s){throw console.error("Error verifying channel:",s),new Error(`Failed to verifying channel: ${s.message||"Unknown error"}`)}})}getPaymentChannelAuthorized(t,e,i,r){return z(this,null,function*(){try{return yield t.request({id:"channel_authorize_example_id1",command:"channel_authorize",channel_id:e,seed:r.seed,key_type:this.storageService.getInputValue("encryptionType")?Re.ENCRYPTION.ED25519:Re.ENCRYPTION.SECP256K1,amount:Fc.xrpToDrops(i)})}catch(o){throw console.error("Error verifying channel:",o),new Error(`Failed to verifying channel: ${o.message||"Unknown error"}`)}})}getAccountObjects(t,e,i,r){return z(this,null,function*(){try{return r?yield t.request({command:"account_objects",account:e,ledger_index:i,type:r}):yield t.request({command:"account_objects",account:e,ledger_index:i})}catch(o){throw console.error("Error fetching account objects:",o),new Error(`Failed to fetch account objects: ${o.message||"Unknown error"}`)}})}checkAccountObjectsForDeletion(t,e){return z(this,null,function*(){try{return yield t.request({command:"account_objects",account:e,deletion_blockers_only:!0})}catch(i){throw console.error("Error fetching account objects:",i),new Error(`Failed to fetch account objects: ${i.message||"Unknown error"}`)}})}getAccountLines(t,e,i,r){return z(this,null,function*(){try{return r?yield t.request({command:"account_lines",account:e,ledger_index:i,type:r}):yield t.request({command:"account_lines",account:e,ledger_index:i})}catch(o){throw console.error("Error fetching account lines:",o),new Error(`Failed to fetch account lines: ${o.message||"Unknown error"}`)}})}getTokenBalance(t,e,i,r){return z(this,null,function*(){try{let o=yield t.request({command:"gateway_balances",account:e,ledger_index:i}),s=o.result;return s?.obligations&&Object.keys(s.obligations).length>0||s?.balances&&Object.keys(s.balances).length>0||s?.assets&&Object.keys(s.assets).length>0?o:{id:0,type:"response",result:{account:e,ledger_hash:"",ledger_index:i,obligations:{},balances:{},assets:{}}}}catch(o){return console.warn("Error fetching gateway_balances:",o),{id:0,type:"response",result:{account:e,ledger_hash:"",ledger_index:i,obligations:{},balances:{},assets:{}}}}})}getAccountOffers(t,e,i,r){return z(this,null,function*(){try{return yield t.request({command:"account_offers",account:e,ledger_index:i})}catch(o){throw console.error("Error fetching account offers:",o),new Error(`Failed to fetch account offers: ${o.message||"Unknown error"}`)}})}getAccountChannels(t,e,i,r){return z(this,null,function*(){try{return yield t.request({command:"account_channels",account:e,ledger_index:i})}catch(o){throw console.error("Error fetching account channels:",o),new Error(`Failed to fetch account channels: ${o.message||"Unknown error"}`)}})}getAccountCurrencies(t,e,i,r){return z(this,null,function*(){try{return yield t.request({command:"account_currencies",account:e,ledger_index:i})}catch(o){throw console.error("Error fetching account currencies:",o),new Error(`Failed to fetch account currencies: ${o.message||"Unknown error"}`)}})}getAccountTrustlines(t,e,i,r){return z(this,null,function*(){try{return yield t.request({command:"account_lines",account:e,ledger_index:i})}catch(o){throw console.error("Error fetching account trustlines:",o),new Error(`Failed to fetch account trustlines: ${o.message||"Unknown error"}`)}})}getMptByIssuanceId(t,e,i){return z(this,null,function*(){try{return yield t.request({command:"mpt_holders",mpt_issuance_id:e,ledger_index:i})}catch(r){throw console.error("Error fetching MPT info:",r),new Error(`Failed to fetch MPT info: ${r.message||"Unknown error"}`)}})}getAccountTransactions(t,e,i,r){return z(this,null,function*(){try{return yield t.request({command:"account_tx",account:e,limit:i,marker:r,ledger_index_min:-1,ledger_index_max:-1,forward:!1})}catch(o){throw console.error("Error fetching account transactions:",o),new Error(`Failed to fetch account transactions: ${o.message||"Unknown error"}`)}})}getAccountNoRippleCheck(t,e,i,r){return z(this,null,function*(){try{return yield t.request({command:"noripple_check",account:e,role:"gateway",limit:10,ledger_index:i})}catch(o){throw console.error("Error fetching account no ripple check:",o),new Error(`Failed to fetch account no ripple check: ${o.message||"Unknown error"}`)}})}checkTicketExists(t,e,i){return z(this,null,function*(){try{let r=yield this.getAccountObjects(t,e,"validated","ticket");return console.debug("Ticket Objects",r),(r.result.account_objects||[]).some(s=>s.TicketSequence===i)}catch(r){return console.error("Error checking ticket: ",r),!1}})}getCheckByCheckId(t,e,i){return z(this,null,function*(){try{let r=yield t.request({command:"ledger_entry",index:e,ledger_index:i});return r.result.node?(console.log("Check found:",r.result.node),r.result.node):(console.log("Check not found"),null)}catch(r){return console.error("Error fetching Check ID:",r),null}})}getEscrowBySequence(t,e,i){return z(this,null,function*(){try{let r=yield this.getAccountObjects(t,e,"validated","escrow");for(let[o,s]of r.result.account_objects.entries())if(s.PreviousTxnID){let a=yield this.getTxData(t,s.PreviousTxnID);if(a.result.tx_json.Sequence===i)return Ge(le({},s),{Sequence:a.result.tx_json.Sequence})}return null}catch(r){return console.error("Error fetching escrow by sequence nunber:",r),null}})}getOnlyTokenBalance(t,e,i){return z(this,null,function*(){try{let o=(yield this.getAccountLines(t,e,"validated","")).result.lines||[],s=i.length>3?this.decodeCurrencyCode(i):i,a=o.find(l=>l.currency.toUpperCase()===s.toUpperCase());return a?a.balance:"0"}catch(r){throw console.error("Error fetching token balance:",r),new Error(`Failed to fetch token balance: ${r.message||"Unknown error"}`)}})}getXrpReserveRequirements(t,e){try{let i=t.result.account_data.Reserve,r=t.result.account_data.OwnerCount,o=e.result.info.validated_ledger?.reserve_base_xrp||10,s=e.result.info.validated_ledger?.reserve_inc_xrp||2;return{baseReserve:o,ownerReserve:s,currentReserve:i,ownerCount:r}}catch(i){throw console.error("Error fetching XRP reserve requirements:",i),new Error(`Failed to fetch XRP reserve requirements: ${i.message||"Unknown error"}`)}}static \u0275fac=function(e){return new(e||n)(Ye(rn),Ye(ep),Ye(GE))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var o0=class n{networkChangedSource=new Xe;networkChanged$=this.networkChangedSource.asObservable();announceNetworkChange(t){this.networkChangedSource.next(t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var un=class n{constructor(t,e){this.storageService=t;this.networkService=e;let i=this.storageService.getNet();this.currentNetwork=i?.environment||"devnet",this.loadFromStorage(),this.networkService.networkChanged$.subscribe(r=>{this.currentNetwork=r,this.loadFromStorage()})}walletsSubject=new bi([]);wallets$=this.walletsSubject.asObservable();editingIndex=null;tempName="";currentNetwork="devnet";selectedIndexSource=new bi(0);selectedIndex$=this.selectedIndexSource.asObservable();hasWallets$=this.wallets$.pipe(Yt(t=>t.length>0),Zc(),Lf(1));hasWalletsFromWallets$=this.wallets$.pipe(Yt(t=>t.length>0),Zc());loadFromStorage(){console.log("loadFromStorage called for network:",this.currentNetwork);let t=`wallets_${this.currentNetwork}`,e=this.storageService.get(t),i=[];if(e)try{let s=JSON.parse(e);i=Array.isArray(s)?s:[]}catch(s){console.error("Failed to parse wallets from storage",s),i=[]}this.walletsSubject.next(i),console.log("wallets$ emitted:",i.length,"wallets");let r=`selectedIndex_${this.currentNetwork}`,o=this.storageService.get(r);if(o!==null){let s=parseInt(o,10);!isNaN(s)&&s>=0&&s<i.length?this.selectedIndexSource.next(s):this.selectedIndexSource.next(0)}else this.selectedIndexSource.next(0)}saveToStorage(t){let e=`wallets_${this.currentNetwork}`;this.storageService.set(e,JSON.stringify(t))}updateWallets(t){this.walletsSubject.next(t),this.saveToStorage(t)}getWallets(){return this.walletsSubject.value}addWallet(t){let e=[...this.getWallets(),t];this.updateWallets(e)}updateWallet(t,e){let i=this.getWallets().map((r,o)=>o===t?le(le({},r),e):r);this.setWallets(i)}updateWalletByAddress(t,e){let i=this.getWallets().map(r=>(r.classicAddress||r.address)===t?le(le({},r),e):r);this.setWallets(i)}setWallets(t){this.updateWallets(t)}deleteWallet(t){let e=this.getWallets().filter((i,r)=>r!==t);this.updateWallets(e)}clearWallets(){this.updateWallets([])}startEdit(t){this.editingIndex=t}saveEdit(t){if(this.editingIndex===null)return;let e=this.editingIndex,i=t.trim()||`Wallet ${e+1}`,r=this.getWallets().map((o,s)=>s===e?Ge(le({},o),{name:i}):o);this.updateWallets(r),setTimeout(()=>this.resetEdit(),0)}cancelEdit(){this.resetEdit()}resetEdit(){this.editingIndex=null}isEditing(t){return this.editingIndex===t}getTempName(){return this.tempName}setSelectedIndex(t){this.selectedIndexSource.next(t);let e=`selectedIndex_${this.currentNetwork}`;this.storageService.set(e,t.toString())}getSelectedIndex(){return this.selectedIndexSource.value}getDestinationFromDisplay(t,e){let i=t.match(/\((.+)\)/);if(!i)return null;let r=i[1];for(let o of e){let s=o.address,a=s.slice(0,6),l=s.slice(-6);if(r===`${a}...${l}`)return o}return null}static \u0275fac=function(e){return new(e||n)(Ye(rn),Ye(o0))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gt=class n{constructor(t,e,i){this.xrplService=t;this.storageService=e;this.walletManagerService=i}resultField;result="";isError=!1;isSuccess=!1;spinner=!1;MPT_FLAGS={1:"MptLocked",2:"CanLock",4:"RequireAuth",8:"CanEscrow",16:"CanTrade",32:"CanTransfer",64:"CanClawback"};ledgerEntryTypeFields={AccountRoot:{fields:[{key:"Account",format:t=>t||null},{key:"Balance",format:t=>this.formatXRPLAmount(t||"0")},{key:"Sequence",format:t=>t||null},{key:"OwnerCount",format:t=>t||"0"},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"Domain",format:t=>t||null},{key:"EmailHash",format:t=>t||null},{key:"index",format:t=>t||null},{key:"FirstNFTokenSequence",format:t=>t||null},{key:"MintedNFTokens",format:t=>t||"0"},{key:"Flags",format:t=>t||"0"}],label:"Account",pluralLabel:"Accounts"},Escrow:{fields:[{key:"Account",format:t=>t||null},{key:"Amount",format:t=>this.formatXRPLAmount(t||"0")},{key:"Destination",format:t=>t||null},{key:"DestinationTag",format:t=>t||null},{key:"Sequence",format:t=>t||null},{key:"CancelAfter",format:t=>t?this.convertXRPLTime(t):null},{key:"FinishAfter",format:t=>t?this.convertXRPLTime(t):null},{key:"Condition",format:t=>t||null},{key:"memo",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"Escrow",pluralLabel:"Escrows"},Offer:{fields:[{key:"Account",format:t=>t||null},{key:"TakerPays",format:t=>typeof t=="object"?`${t.value} ${t.currency}`:this.formatXRPLAmount(t||"0")},{key:"TakerGets",format:t=>typeof t=="object"?`${t.value} ${t.currency}`:this.formatXRPLAmount(t||"0")},{key:"Expiration",format:t=>t?this.convertXRPLTime(t):null},{key:"OfferSequence",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"Offer",pluralLabel:"Offers"},RippleState:{fields:[{key:"Balance",format:t=>typeof t=="object"?this.formatXRPLAmount(t):t||null},{key:"Flags",format:t=>this.getFlagName(t)||"0"},{key:"HighLimit",format:t=>typeof t=="object"?this.formatXRPLAmount(t):t||null},{key:"HighNode",format:t=>t||null},{key:"LedgerEntryType",format:t=>t||null},{key:"LowLimit",format:t=>typeof t=="object"?this.formatXRPLAmount(t):t||null},{key:"LowNode",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"RippleState",pluralLabel:"RippleStates"},PayChannel:{fields:[{key:"Account",format:t=>t||null},{key:"Destination",format:t=>t||null},{key:"Amount",format:t=>this.formatXRPLAmount(t||"0")},{key:"Balance",format:t=>this.formatXRPLAmount(t||"0")},{key:"SettleDelay",format:t=>t||null},{key:"Expiration",format:t=>t?this.convertXRPLTime(t):null},{key:"CancelAfter",format:t=>t?this.convertXRPLTime(t):null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"Payment Channel",pluralLabel:"Payment Channels"},Check:{fields:[{key:"Account",format:t=>t||null},{key:"Destination",format:t=>t||null},{key:"Expiration",format:t=>t?this.convertXRPLTime(t):null},{key:"SendMax",format:t=>typeof t=="object"?`${t.value} ${t.currency}`:this.formatXRPLAmount(t||"0")},{key:"Sequence",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"Check",pluralLabel:"Checks"},DepositPreauth:{fields:[{key:"Account",format:t=>t||null},{key:"Authorize",format:t=>t||null},{key:"Flags",format:t=>t||null},{key:"OwnerNode",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"Deposit Preauthorization",pluralLabel:"Deposit Preauthorizations"},Ticket:{fields:[{key:"Account",format:t=>t||null},{key:"Flags",format:t=>this.decodeNFTFlags(Number(t))},{key:"TicketSequence",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"Ticket",pluralLabel:"Tickets"},DirectoryNode:{fields:[{key:"Flags",format:t=>t||"0"},{key:"Owner",format:t=>t||null},{key:"Indexes",format:t=>Array.isArray(t)?t.join(", "):t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null},{key:"RootIndex",format:t=>t||null}],label:"Directory",pluralLabel:"Directories"},AMM:{fields:[{key:"LPTokenBalance",format:t=>`${t.value} ${t.currency}`},{key:"TradingFee",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"Automated Market Maker",pluralLabel:"Automated Market Makers"},NFTokenPage:{fields:[{key:"Flags",format:t=>t||"0"},{key:"LedgerEntryType",format:t=>t||null},{key:"NFTokens",format:t=>Array.isArray(t)?t:null},{key:"index",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null}],label:"NFTokenPage",pluralLabel:"NFTokenPages"},SignerList:{fields:[{key:"Flags",format:t=>t||null},{key:"SignerQuorum",format:t=>t||null},{key:"SignerEntries",format:t=>Array.isArray(t)?t.map(e=>e.SignerEntry.Account).join(", "):null},{key:"SignerListID",format:t=>t||null},{key:"PreviousTxnID",format:t=>t||null},{key:"PreviousTxnLgrSeq",format:t=>t||null},{key:"index",format:t=>t||null}],label:"Signer List",pluralLabel:"Signer Lists"},NFT:{fields:[{key:"Flags",format:t=>this.decodeNFTFlags(Number(t))},{key:"Issuer",format:t=>t||null},{key:"NFTokenID",format:t=>t||null},{key:"NFTokenTaxon",format:t=>t===0?null:t||null},{key:"URI",format:t=>t||null},{key:"nft_serial",format:t=>t||null}],label:"NFT",pluralLabel:"NFTs"}};sleep(t){return new Promise(e=>setTimeout(e,t))}encodeIfNeeded(t){return t?.length>3?this.encodeCurrencyCode(t):t||""}decodeIfNeeded(t){return this.isCurrencyCode(t)?this.decodeCurrencyCode(t):t}isCurrencyCode(t){return t!=="XRP"&&t.length>3}validateCondition(t){return this.validateInput(t)?/^[0-9A-F]+$/.test(t)?t.length!==64?"Condition must be 64 hex characters (32 bytes) for SHA-256":null:"Condition must be a valid uppercase hex string (0-9, A-F)":"Condition cannot be empty"}validateFulfillment(t,e){if(!this.validateInput(t))return"Fulfillment cannot be empty";if(!/^[0-9A-F]+$/.test(t))return"Fulfillment must be a valid uppercase hex string (0-9, A-F)";try{let r=Buffer.from(t,"hex");if((0,lue.sha256)(r).toUpperCase()!==e)return"Fulfillment does not match the condition"}catch{return"Invalid fulfillment: unable to compute SHA-256 hash"}return null}validateInput(t){return typeof t=="string"&&!!t.trim()}isValidTransactionHash(t){return/^[0-9A-Fa-f]{64}$/.test(t)}parseAndValidateNFTokenIDs(t){return t.split(",").map(r=>r.trim()).filter(r=>/^[0-9A-Fa-f]{64}$/.test(r))}isValidCTID(t){return/^C[0-9A-Fa-f]+$/.test(t)}formatXRPLAmount=t=>t==null||isNaN(t)?"Invalid amount":typeof t=="object"&&t.currency&&t.value?`${t.value} ${t.currency}${t.issuer?` (Issuer: ${t.issuer})`:""}`:`${(parseInt(t)/1e6).toFixed(6)} XRP`;isValidDate(t){return t&&!isNaN(new Date(t).getTime())}isValidAddress(t){return Cr.isValidAddress(t)}jsonToHex(t){let e=typeof t=="string"?t:JSON.stringify(t);return Buffer.from(e,"utf8").toString("hex")}hexTojson(t){let e=typeof t=="string"?t:JSON.stringify(t);return Buffer.from(e,"hex").toString("utf8")}validateAndConvertDidJson(t,e){let i=new cue.default({allErrors:!0});(0,due.default)(i);let r=i.compile(e);try{let o=JSON.parse(t);if(Array.isArray(o))for(let a=0;a<o.length;a++){let l=o[a];if(!r(l))return console.error(`Document ${a} invalid:`,r.errors),{success:!1,errors:`Document ${a} invalid: ${JSON.stringify(r.errors)}`};console.log(`Document ${a} valid!`)}else{if(!r(o))return console.error("DID JSON invalid:",r.errors),{success:!1,errors:`DID JSON invalid: ${JSON.stringify(r.errors)}`};console.log("DID JSON valid")}let s=this.jsonToHex(o);return console.log("didDataHex in json",this.hexTojson(s)),{success:!0,hexData:s}}catch(o){return console.error("Invalid JSON:",o.message),{success:!1,errors:`Invalid JSON: ${o.message}`}}}issuedAmount(t,e,i){return{currency:t,issuer:e,value:i.toString()}}convertXRPLTime(t){let i=t+946684800,r=new Date(i*1e3);return this.dateFormatter().format(r)}convertToUnixTimestamp(t){let[e,i,r]=t.split("/").map(Number),o=new Date(Date.UTC(r,e-1,i,0,0,0));return Math.floor(o.getTime()/1e3)}toRippleTime(t){let e=Date.UTC(2e3,0,1,0,0,0),i=new Date(t).getTime();return Math.floor((i-e)/1e3)}fromRippleTime(t){let e=Date.UTC(2e3,0,1,0,0,0),i=new Date(e+t*1e3),r=i.toISOString(),o=new Intl.DateTimeFormat("en-US",{timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).format(i);return{isoUTC:r,est:o}}getExpirationRippleSeconds(t){let e=t;if(e){if(e instanceof Date){let i=e.getFullYear(),r=e.getMonth()+1,o=e.getDate();return Math.floor(Date.UTC(i,r-1,o,0,0,0)/1e3)-946684800}if(typeof e=="string"){let i=e.split("-").map(Number);if(i.length!==3||i.some(isNaN))throw new Error("expirationDate must be YYYY-MM-DD or Date");let[r,o,s]=i;return Math.floor(Date.UTC(r,o-1,s,0,0,0)/1e3)-946684800}throw new Error("Unsupported expirationDate type: "+typeof e)}}decodeHex=t=>{try{return this.validateInput(t)?Buffer.from(t,"hex").toString("ascii"):""}catch(e){return console.error(`Error decoding hex: ${t}`,e),t}};decodeutf8Hex(t){if(!t)return"N/A";try{return Buffer.from(t,"hex").toString("utf8")||"N/A"}catch{return"Invalid Hex"}}formatIssuer(t){return t?`${t.slice(0,6)}...${t.slice(-6)}`:""}getCredentialColor(t){let e=t?.CredentialType;return e.includes("kyc")||e.includes("KYC")?"green":e.includes("member")?"#007bff":e.includes("compliance")||e.includes("Compliance")?"orange":e.includes("admin")||e.includes("Admin")?"red":"#333"}getRegularKeyWallet(t,e,i){return z(this,null,function*(){let r="",o=!1;return e&&!t&&(console.log("Using Regular Key Seed for transaction signing"),r=yield this.getWallet(i),o=!0),{useRegularKeyWalletSignTx:o,regularKeyWalletSignTx:r}})}getMultiSignSeeds(t){return t.split(",").map(e=>e.trim()).filter(e=>e.length>0&&e!=="")}getMultiSignAddress(t){return t.split(",").map(e=>e.trim()).filter(e=>e.length>0&&e!=="")}getNftIds(t){return t.split(",").map(e=>e.trim()).filter(e=>e.length>0&&e!=="")}populateKnownDestinations(t,e,i,r){return t={Account1:e,Account2:i,Account3:r}}populateKnownWhitelistAddresses(t,e,i,r){return t={Account1:e,Account2:i,Account3:r}}formatTokenBalance(t,e){return Number(t).toLocaleString(),Number(t).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:e,useGrouping:!0})}removeCommaFromAmount(t){return t.replace(/,/g,"")}normalizeMnemonic(t){return t.toLowerCase().replace(/[^a-z\s]/g,"").replace(/\s+/g," ").trim()}normalizeSecrets(t){return t.split(/[\s,]+/).map(e=>e.trim()).filter(Boolean)}normalizeFamilySeed(t){return t?t.trim().replace(/\s+/g,"").replace(/[\u200B-\u200D\uFEFF]/g,""):""}isValidSecret(t){let e=[],i=[];for(let r of t)this.isValidSecretNumber(r.trim())?e.push(r):i.push(r);return!(i.length>0||e.length!=8)}isValidMnemonic(t){let i=this.normalizeMnemonic(t).split(" ");return i.length!==24?!1:i.every(r=>/^[a-z]+$/.test(r))}isValidSecretNumber(t){return/^\d{6}$/.test(t)}convertSecretNumberStringToArray(t){return t.split(",").map(e=>e.trim()).filter(e=>e.length>0)}getWalletFromAddress(t){return z(this,null,function*(){let e=this.walletManagerService.getWallets().find(o=>o.address===t||o.classicAddress&&o.classicAddress===t);if(!e?.seed)throw new Error(`Wallet seed not found for address: ${t}`);let i=e.encryptionAlgorithm||"ed25519",r={};return i==="secp256k1"&&(r.algorithm=Cr.ECDSA.secp256k1),Cr.Wallet.fromSeed(e.seed,r)})}formatCurrencyForDisplay(t){let e=String(t),i=this.normalizeCurrencyCode(e);return i===""?`(LP Token) ${e}`:`${i}`}formatValueForKey(t,e){let i=String(e);if(t==="index"||t==="Account"||t==="issuer")return`<code>${i}</code>`;if(t==="currency"){let r=this.normalizeCurrencyCode(i);return r===""?`(LP Token) <code>${i}</code>`:`<code>${r}</code>`}return i}formatInvoiceId(t){if(!t||t.length!==64)return"\u2014";try{let e=new Uint8Array(t.match(/.{1,2}/g).map(o=>parseInt(o,16))),r=new TextDecoder("utf-8",{fatal:!0}).decode(e);if(/[\w\d\s\-\.\,\!\@\#\$\%\^\&\*\(\)]/.test(r))return r.trim()||t.slice(0,16)+"..."}catch{}return t.slice(0,12)+"..."+t.slice(-8)}normalizeAccounts(t,e){if(Object.entries(t).filter(([o])=>o!=="XRP").every(([,o])=>o===e))return t.XRP="",t;let r=le({},t);for(let o in r)o!=="XRP"&&(r[o]=e);return t.XRP="",r}isValidCurrencyCode(t){return/^[A-Za-z0-9]{3,20}$/.test(t)||/^[0-9A-Fa-f]{40}$/.test(t)}normalizeCurrencyCode(t,e=20){if(!t)return"";if(t.length===3&&t.trim().toLowerCase()!=="xrp")return t.trim();if(t.match(/^[a-fA-F0-9]{40}$/)&&!isNaN(parseInt(t,16))){let i=t.toString().replace(/(00)+$/g,"");if(i.startsWith("01"))return this.convertDemurrageToUTF8(t);if(i.startsWith("02")){let o=Buffer.from(i,"hex").slice(8).toString("utf-8").slice(0,e).trim();if(o.match(/[a-zA-Z0-9]{3,}/)&&o.toLowerCase()!=="xrp")return o}if(i.startsWith("03"))return"LP Token "+i;let r=Buffer.from(i,"hex").toString("utf-8").slice(0,e).trim();if(r.match(/[a-zA-Z0-9]{3,}/)&&r.toLowerCase()!=="xrp")return r}return""}convertDemurrageToUTF8(t){let e=Buffer.from(t,"hex"),i=String.fromCharCode(e[1])+String.fromCharCode(e[2])+String.fromCharCode(e[3]),r=(e[4]<<24)+(e[5]<<16)+(e[6]<<8)+e[7],o=e.readDoubleBE(8),l=Math.pow(Math.E,(r+31536e3-r)/o)*100-100;return`${i} (${l}% pa)`}decodeCurrencyCode(t){let e=Buffer.from(t,"hex"),i=e.subarray(0,e.findIndex(r=>r===0)===-1?20:e.findIndex(r=>r===0));return new TextDecoder().decode(i)}encodeCurrencyCode(t){let i=new TextEncoder().encode(t);if(i.length>20)throw new Error("Currency code too long");let r=new Uint8Array(20);return r.set(i),Buffer.from(r).toString("hex").toUpperCase()}isEscrow(t){return t&&t.LedgerEntryType==="Escrow"}isRippleState(t){return t&&t.LedgerEntryType==="RippleState"}isMPT(t){return t&&t.LedgerEntryType==="MPToken"}decodeNFTFlags(t){if(typeof t!="number")return"";let e={1:"Burnable",2:"Only XRP",8:"Transferable",16:"Mutable"},i=[];for(let[r,o]of Object.entries(e))t&Number(r)&&i.push(o);return i.length?i.join(", "):"None"}getCredentialStatus(t){return t===65536?"Credential accepted":"Credential not accepted"}parseTransferRateToPercentage(t){let e=parseInt(t,10);return isNaN(e)||e<1e9?0:(e/1e9-1)*100}convertToEstTime(t){let e=new Date(t);return this.dateFormatter().format(e)}toLocalDateTimeString(t){let e=i=>i.toString().padStart(2,"0");return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())}T${e(t.getHours())}:${e(t.getMinutes())}:${e(t.getSeconds())}`}dateFormatter(){return new Intl.DateTimeFormat("en-US",{timeZone:"America/New_York",timeZoneName:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0})}convertDateTimeToRippleTime(t){let i=new Date(t),o=Math.floor(i.getTime()/1e3)-946684800;return console.log("XRPL CancelAfter:",o),o}addTime(t,e="seconds",i=new Date){let o={seconds:1,minutes:60,hours:3600,days:86400}[e];if(!o)throw new Error(`Invalid unit: ${e}. Use 'seconds', 'minutes', 'hours', or 'days'.`);let s=t*o;return Math.floor(i.getTime()/1e3)+s-946684800}getTransferRate(t){return Math.round((1+t/100)*1e9)}stripHTMLForSearch(t){let e=document.createElement("div");e.innerHTML=t;let i=(e.textContent||e.innerText||"").toLowerCase().trim();return console.debug("stripHTMLForSearch:",{input:t,output:i}),i}stripHTML(t){let e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""}getWalletWithEncryptionAlgorithm(t,e){return z(this,null,function*(){let i=this.detectXrpInputType(t),r={};e==="secp256k1"&&(r.algorithm=Cr.ECDSA.secp256k1);try{if(i.type==="seed")return Cr.Wallet.fromSeed(i.value,r);if(i.type==="mnemonic")return Cr.Wallet.fromMnemonic(i.value,r);if(i.type==="secret_numbers")return(0,Ad.walletFromSecretNumbers)(i.value,r);throw new Error("Invalid input format")}catch{throw new Error("Invalid input or algorithm mismatch")}})}getWallet(t){return z(this,null,function*(){let e=this.storageService.getInputValue("encryptionType"),i=this.detectXrpInputType(t);try{if(e==="true"){if(i.type==="seed")return Cr.Wallet.fromSeed(i.value,{algorithm:Re.ENCRYPTION.ED25519});if(i.type==="mnemonic")return Ad.Wallet.fromMnemonic(i.value,{algorithm:Re.ENCRYPTION.ED25519});if(i.type==="secret_numbers")return(0,Ad.walletFromSecretNumbers)(i.value,{algorithm:Re.ENCRYPTION.ED25519});throw new Error("Invalid seed or mnemonic format")}else{if(i.type==="seed")return Cr.Wallet.fromSeed(i.value,{algorithm:Re.ENCRYPTION.SECP256K1});if(i.type==="mnemonic")return Ad.Wallet.fromMnemonic(i.value,{algorithm:Re.ENCRYPTION.SECP256K1});if(i.type==="secret_numbers")return(0,Ad.walletFromSecretNumbers)(i.value,{algorithm:Re.ENCRYPTION.SECP256K1});throw new Error("Invalid seed or mnemonic format")}}catch{throw new Error("Invalid seed or mnemonic format")}})}validateSeed(t){let e=this.storageService.getInputValue("encryptionType"),i=this.detectXrpInputType(t);try{return i.type==="unknown"?!1:(e==="true"?i.type==="seed"?Cr.Wallet.fromSeed(i.value,{algorithm:Re.ENCRYPTION.ED25519}):i.type==="mnemonic"?Ad.Wallet.fromMnemonic(i.value,{algorithm:Re.ENCRYPTION.ED25519}):i.type==="secret_numbers"&&(0,Ad.walletFromSecretNumbers)(i.value,{algorithm:Re.ENCRYPTION.ED25519}):i.type==="seed"?Cr.Wallet.fromSeed(i.value,{algorithm:Re.ENCRYPTION.SECP256K1}):i.type==="mnemonic"?Ad.Wallet.fromMnemonic(i.value,{algorithm:Re.ENCRYPTION.SECP256K1}):i.type==="secret_numbers"&&(0,Ad.walletFromSecretNumbers)(i.value,{algorithm:Re.ENCRYPTION.SECP256K1}),!0)}catch{return!1}}detectXrpInputType(t){let e="";try{if(e=t.trim(),/^s[0-9A-Za-z]{20,}$/.test(e)&&Cr.isValidSecret(e))return{type:"seed",value:e};let r=e.split(/\s+/);if(r.every(l=>/^[a-z]+$/.test(l))&&[12,15,18,21,24].includes(r.length))return{type:"mnemonic",value:e};let s=e.split(",");return s.every(l=>/^\d{6}$/.test(l.trim()))&&s.length>1?{type:"secret_numbers",value:e}:{type:"unknown",value:e}}catch(i){return console.error("Error in detectXrpInputType",i),{type:"unknown",value:e}}}checkForSignerAccounts(t){let e,i=[],r=t.result?.account_objects;if(!Array.isArray(r))return[];for(let o of r)if(o.LedgerEntryType==="SignerList"&&Array.isArray(o.SignerEntries)){o.SignerQuorum!==void 0&&(e=o.SignerQuorum);for(let s of o.SignerEntries){let a=s.SignerEntry?.Account;a&&i.push(`${a}~${s.SignerEntry.SignerWeight??""}`)}}return{signerAccounts:i,signerQuorum:e}}getAccountTickets(t){let e=t.result?.account_objects;return Array.isArray(e)?e.reduce((r,o)=>(o.LedgerEntryType==="Ticket"&&typeof o.TicketSequence=="number"&&r.push(o.TicketSequence),r),[]).sort((r,o)=>r-o).map(String):[]}setRegularKeyProperties(t,e){if(t){let i=t,r=this.storageService.get(`${e}regularKeySeed`)||"";return{regularKeyAddress:i,regularKeySeed:r,isRegularKeyAddress:!0}}}validateQuorum(t,e){let i=t.reduce((r,o)=>r+(o.weight||0),0);if(e>i)return i}toggleUseMultiSign(t,e){return z(this,null,function*(){return t==="No Multi-Sign address configured for account"?(e="",{multiSignSeeds:e}):null})}onTicketToggle(t,e,i){return t.target.checked?i=[...i,e]:i=i.filter(r=>r!==e),i}toggleMultiSign(t,e,i){return z(this,null,function*(){try{t?this.loadSignerList(i,e):this.clearSignerList(e)}catch(r){throw new Error(`Error getting wallet in toggleMultiSign' ${r.message}`)}})}cleanUpSingleSelection(t,e){return t&&!e.includes(t),""}cleanUpMultiSelection(t,e){return t.filter(i=>e.includes(i))}checkTimeBasedEscrowStatus(t,e,i,r){let o=e,{FinishAfter:s,CancelAfter:a,owner:l}=t,c=!1,d=!1,u="",h="";return s!==void 0?o>=s?c=!0:u=`Escrow can only be finished after: ${this.convertXRPLTime(s)} The current time is: ${this.convertXRPLTime(o)}.`:u="No FinishAfter time defined.",a!==void 0?o>=a?i===l?d=!0:h=`The Escrow has expired and can only be cancelled. Only the escrow owner (${l}) can cancel this escrow.`:h=`Escrow can only be canceled after: ${this.convertXRPLTime(a)} The Current time is: ${this.convertXRPLTime(o)}.`:h="No CancelAfter time defined.",r==="finishEscrow"&&d&&c&&(c=!1,d=!0,u="The Escrow has expired and can only be cancelled."),{canFinish:c,canCancel:d,reasonFinish:u,reasonCancel:h}}checkEscrowStatus(t,e,i,r,o){let s=e,{FinishAfter:a,CancelAfter:l,Condition:c,owner:d}=t,u=!0,h=!1,f="",p="";return a!==void 0&&s<a&&(u=!1,f=`Escrow can only be finished after ${this.convertXRPLTime(a)}, current time is ${this.convertXRPLTime(s)}.`),c?o||(u=!1,f=f?`${f} Additionally, a fulfillment is required for condition-based escrow.`:"A fulfillment is required for condition-based escrow."):o&&!c&&(u=!1,f=f?`${f} No condition is set, so fulfillment is not applicable.`:"No condition is set, so fulfillment is not applicable."),a===void 0&&!c&&(u=!1,f="No FinishAfter time or Condition defined."),l!==void 0?s>=l?i===d?h=!0:p=`Only the escrow owner (${d}) can cancel this escrow.`:p=`Escrow can only be canceled after ${this.convertXRPLTime(l)}, current time is ${this.convertXRPLTime(s)}.`:p="No CancelAfter time defined.",r==="finishEscrow"&&h&&u&&(u=!1,f=f?`${f} The escrow has expired and can only be canceled.`:"The escrow has expired and can only be canceled."),{canFinish:u,canCancel:h,reasonFinish:f,reasonCancel:p}}isTxResponse(t){return t&&typeof t!="string"&&"result"in t}isTxSuccessful(t){return t?.result?.meta?typeof t.result.meta=="string"?!1:t.result.meta.TransactionResult===Re.TRANSACTION.TES_SUCCESS:t?.engine_result?t.engine_result==="tesSUCCESS":t?.result?.engine_result?t.result.engine_result==="tesSUCCESS":(console.warn("Unknown response format in isTxSuccessful:",t),!1)}getTransactionResultMessage(t){return t?.result?.meta?.TransactionResult?t.result.meta.TransactionResult:t?.engine_result?t.engine_result:t?.result?.engine_result?t.result.engine_result:"UNKNOWN"}processErrorMessageFromLedger(t){return t==="tefALREADY"?"Transaction already applied or queued.":t==="tefBAD_ADD_AUTH"?"Invalid addition to signer list.":t==="tefBAD_AUTH"?"Invalid signature or authorization.":t==="tefBAD_AUTH_MASTER"?"Master key is disabled and no regular key set.":t==="tefBAD_LEDGER"?"Ledger state is invalid or inconsistent.":t==="tefCREATED"?"Object created that should not be created.":t==="tefEXCEPTION"?"Unexpected exception during processing.":t==="tefFAILURE"?"Generic failure during local processing.":t==="tefINTERNAL"?"Internal error in rippled server.":t==="tefMAX_LEDGER"?"Transaction expired. Please try again.":t==="tefNO_AUTH_REQUIRED"?"Auth is required but not provided.":t==="tefPAST_SEQ"?"Sequence number is too low (already used).":t==="tefWRONG_PRIOR"?"Incorrect previous transaction hash.":t==="tefMASTER_DISABLED"?"Master key is disabled and no regular key available.":t==="tecCLAIM"?"Fee claimed, but transaction failed.":t==="tecDIR_FULL"?"Directory is full. Try again later.":t==="tecFAILED_PROCESSING"?"Transaction failed during processing.":t==="tecINSUF_RESERVE_LINE"?"Insufficient reserve to add trust line.":t==="tecINSUF_RESERVE_OFFER"?"Insufficient reserve to create offer.":t==="tecNO_DST"?"Destination account does not exist.":t==="tecNO_DST_INSUF_XRP"?"Destination account does not exist and cannot be created (insufficient XRP).":t==="tecNO_ISSUER"?"Issuer account does not exist.":t==="tecNO_AUTH"?"Not authorized to hold asset (trust line not authorized).":t==="tecNO_LINE"?"No trust line exists for this asset.":t==="tecNO_LINE_INSUF_RESERVE"?"No trust line and insufficient reserve to create one.":t==="tecNO_LINE_REDUNDANT"?"Trust line already exists with same limit.":t==="tecPATH_DRY"?"No liquidity found along payment path.":t==="tecPATH_PARTIAL"?"Only partial payment possible.":t==="tecUNFUNDED_ADD"?"Insufficient funds to add to balance.":t==="tecUNFUNDED_OFFER"?"Insufficient funds to place offer.":t==="tecUNFUNDED_PAYMENT"?"Insufficient balance to complete transaction.":t==="tecOWNERS"?"Cannot modify object with existing owners (e.g. disable account with trust lines/offers).":t==="tecOVERSIZE"?"Transaction is too large.":t==="tecCRYPTOCONDITION_ERROR"?"Cryptocondition validation failed.":t==="tecEXPIRED"?"Transaction or object has expired.":t==="tecDUPLICATE"?"Transaction is duplicate or conflicts with existing one.":t==="tecKILLED"?"Offer or object was killed (e.g., expired/cancelled).":t==="tecHAS_OBLIGATIONS"?"Action cannot be executed \u2014 still has obligations (issued tokens).":t==="tecTOO_SOON"?"Too soon to perform this action (e.g., clawback cooldown).":t==="terRETRY"?"Temporary failure. Please retry transaction.":t==="terQUEUED"?"Transaction queued for future processing.":t==="terPRE_SEQ"?"Sequence number is too high (future sequence).":t==="terLAST"?"Transaction is last in queue \u2014 retry may help.":t==="temBAD_AMOUNT"?"Invalid amount specified.":t==="temBAD_CURRENCY"?"Invalid currency code.":t==="temBAD_EXPIRATION"?"Invalid expiration time.":t==="temBAD_FEE"?"Invalid transaction fee.":t==="temBAD_ISSUER"?"Invalid issuer address.":t==="temBAD_LIMIT"?"Invalid limit amount.":t==="temBAD_OFFER"?"Invalid offer.":t==="temBAD_PATH"?"Invalid payment path.":t==="temBAD_PATH_LOOP"?"Payment path contains loop.":t==="temBAD_QUANTITY"?"Invalid quantity.":t==="temBAD_SEND_XRP_LIMIT"?"XRP send limit exceeded.":t==="temBAD_SEND_XRP_MAX"?"Maximum XRP send exceeded.":t==="temBAD_SEND_XRP_NO_DIRECT"?"No direct XRP send allowed.":t==="temBAD_SEND_XRP_PARTIAL"?"Partial XRP send not allowed.":t==="temBAD_SEND_XRP_SRC_TAG"?"Source tag not allowed for XRP send.":t==="temBAD_SEQUENCE"?"Invalid sequence number.":t==="temBAD_SIGNATURE"?"Invalid signature.":t==="temBAD_SRC_ACCOUNT"?"Invalid source account.":t==="temBAD_TRANSFER_RATE"?"Invalid transfer rate.":t==="temDST_IS_SRC"?"Destination cannot be same as source.":t==="temDST_NEEDED"?"Destination account required.":t==="temINVALID"?"Transaction is malformed or invalid.":t==="temINVALID_FLAG"?"Invalid flag combination.":t==="temREDUNDANT"?"Redundant transaction (no change).":t==="temRIPPLE_EMPTY"?"Ripple state is empty.":t==="temDISABLED"?"Feature is disabled.":t==="temBAD_SIGNER"?"Invalid signer or quorum.":t==="tesSUCCESS"?"":` (Code: ${t})`}handleMultiSignTransaction(a){return z(this,arguments,function*({client:t,wallet:e,tx:i,signerAddresses:r,signerSeeds:o,fee:s}){let c=(yield this.xrplService.getAccountObjects(t,e.classicAddress,"validated","")).result.account_objects.find(k=>k.LedgerEntryType==="SignerList");if(!c)throw new Error("Account does not have a SignerList");if(new Set(r).size!==r.length)throw new Error("Duplicate signer addresses are not allowed");if(!Array.isArray(c.SignerEntries))throw new Error("SignerList object does not have valid SignerEntries");if(!("SignerEntries"in c)||!Array.isArray(c.SignerEntries))throw new Error("SignerList object does not have SignerEntries");let u=c.SignerEntries.map(k=>k.SignerEntry.Account);if(r.some(k=>!u.includes(k)))throw new Error("One or more signer addresses are not in the SignerList");let h=c.SignerQuorum,f=0;if(r.forEach(k=>{let L=c.SignerEntries.find(D=>D.SignerEntry.Account===k);L&&(f+=L.SignerEntry.SignerWeight)}),f<h)throw new Error(`Signer weight (${f}) is less than required quorum (${h})`);console.log("SignerList:",c),console.log("Valid Signers:",u),console.log("Provided Signers:",r),console.log("Quorum:",h);let p=Number(s)*(1+r.length);i.Fee=String(p),i.SigningPubKey="";let y=yield t.autofill(Ge(le({},i),{SigningPubKey:""}));delete y.Signers,delete y.TxnSignature,console.log("PreparedTx before signing:",y);let v=[];for(let k=0;k<r.length;k++){let L=yield this.getWallet(o[k]);if(L.classicAddress!==r[k])throw new Error(`Seed mismatch for signer ${r[k]}`);let D=L.sign(y,!0);console.log("Signed Transaction:",D),D.tx_blob&&v.push(D.tx_blob)}if(v.length===0)throw new Error("No valid signatures collected for multisign transaction");console.log("PreparedTx after signing:",y),console.log("signerBlobs:",v);let b=Cr.multisign(v);console.log("Final multisignedTxBlob:",b);let x=Cr.decode(b).Signers||[];return{signedTx:{tx_blob:b,hash:Cr.hashes.hashSignedTx(b)},signers:x}})}findDepositPreauthObjects(t){let e=[];return t.result&&Array.isArray(t.result.account_objects)&&t.result.account_objects.forEach(i=>{i.LedgerEntryType==="DepositPreauth"&&i.Authorize&&e.push(i.Authorize)}),e}decodeRippleStateFlags(t){let e={lsfAMMNode:16777216,lsfLowReserve:131072,lsfHighReserve:262144,lsfLowAuth:65536,lsfHighAuth:131072,lsfLowNoRipple:1048576,lsfHighNoRipple:2097152,lsfLowFreeze:4194304,lsfHighFreeze:8388608,lsfLowDeepFreeze:33554432,lsfHighDeepFreeze:67108864},i=[];for(let[r,o]of Object.entries(e))(t&o)!==0&&i.push(r);return i.length>0?i:["No Flags Set"]}getFlagName(t){let e=Re.FLAGS.find(r=>r.value===Number(t))?.label;if(e)return e;let i=this.decodeRippleStateFlags(Number(t));return i.length>0?i.join(", "):`${t}`}getFlagUpdates(t){let e=[],i=[];return Re.FLAGS.forEach(r=>{let o=document.getElementById(r.name);if(!o||!r.xrplName)return;let s=o.checked,a=!!t[r.xrplName];s&&!a&&e.push(r.value),!s&&a&&i.push(r.value)}),{setFlags:e,clearFlags:i}}formatAmount(t){return typeof t=="string"&&/^\d+$/.test(t)?(parseInt(t)/1e6).toFixed(6)+" XRP":typeof t=="object"&&t.currency?`${t.value} ${t.currency}${t.issuer?` (<code>${t.issuer}</code>)`:""}`:JSON.stringify(t)}formatIOUXrpAmountUI(t){if(!t)return"Unknown";if(typeof t=="string")return`${Cr.dropsToXrp(t)} XRP`;if(typeof t=="object"){let{currency:e,issuer:i,value:r}=t;return`${r} ${e} (issuer: ${i})`}return"Unknown"}formatValue(t,e,i=[]){if(t==="Account"||t.includes("PubKey")||t.includes("Signature")||t.includes("index"))return`<code>${e}</code>`;if(t==="Flags")return this.getFlagName(String(e));if(typeof e=="string"&&e.length>50)return`<code>${e.slice(0,50)}...</code>`;if(t==="Memos"){let r=e[0].Memo.MemoData,o=e[0].Memo.MemoType;return this.decodeHex(r)+(o?` (${this.decodeHex(o)})`:"")}return t==="Domain"||t==="EmailHash"||t==="URI"?this.decodeHex(e):t==="Balance"&&typeof e=="object"?`${e.value} ${e.currency}${e.issuer?` (<code>${e.issuer}</code>)`:""}`:t==="Balance"||t==="Fee"?this.formatXRPLAmount(e):t==="date"||t==="CancelAfter"||t==="FinishAfter"||t==="Expiration"?this.convertXRPLTime(e):typeof e=="object"?this.formatAmount(e):String(e)}increasesOwnerCount(t){switch(t.TransactionType){case"TrustSet":let i=parseFloat(t?.LimitAmount?.value||"0"),r=t?.Flags||0;return i!==0||r!==0;case"OfferCreate":return!0;case"CheckCreate":case"EscrowCreate":case"PaymentChannelCreate":case"TicketCreate":case"SignerListSet":case"AMMDeposit":case"NFTokenMint":return!0;case"AccountSet":return!1;default:return!1}}decodeAccountFlags(t){let e=[];if(t?.result?.account_flags){for(let[i,r]of Object.entries(t.result.account_flags))if(r===!0){let o=Re.FLAGS.find(s=>s.xrplName===i);e.push(o?o.label:i)}}return e}getMptFlagsReadable(t){let e=[];for(let[i,r]of Object.entries(this.MPT_FLAGS))(t&Number(i))!==0&&(e.length==0?e.push(r):e.push(" "+r));return e.length>0?e:["No MPT flags set"]}formatFlags(t){return t.length<=1?t[0]||"":t.slice(0,-1).join(", ")+" and "+t[t.length-1]}roundToEightDecimals(t){return parseFloat(t.toFixed(8))}sortByLedgerEntryType(t){return!t||!t.result||!Array.isArray(t.result.account_objects)?t:Ge(le({},t),{result:Ge(le({},t.result),{account_objects:[...t.result.account_objects].sort((e,i)=>{let r=e.LedgerEntryType||"",o=i.LedgerEntryType||"";return r.localeCompare(o)})})})}validateAmmDepositBalances(t,e,i,r){if(typeof r=="string"&&BigInt(t)<BigInt(r)||typeof i=="string"&&BigInt(t)<BigInt(i))return"Insufficient XRP balance";let o=e.filter(s=>s.LedgerEntryType==="RippleState");if(typeof r!="string"){let s=o.find(l=>l.Balance.currency===r.currency&&(l.LowLimit.issuer===r.issuer||l.HighLimit.issuer===r.issuer));if((s?Math.abs(parseFloat(s.Balance.value)):0)<parseFloat(r.value))return`Insufficient ${r.currency} balance`}if(typeof i!="string"){let s=o.find(l=>l.Balance.currency===i.currency&&(l.LowLimit.issuer===i.issuer||l.HighLimit.issuer===i.issuer));if((s?Math.abs(parseFloat(s.Balance.value)):0)<parseFloat(i.value))return`Insufficient ${i.currency} balance`}return null}validateAmmWithdrawBalances(t,e,i,r){if(r?.lpTokens?.[0]){let o=parseFloat(r.lpTokens[0].balance);if(parseFloat(i)>o)return`Insufficient LP token balance. Available: ${o}`}return null}validateAmmCreateBalances(t,e,i,r){if(typeof r=="string"&&BigInt(t)<BigInt(r))return`Insufficient XRP balance. Required: ${Cr.dropsToXrp(r)} XRP`;if(typeof i!="string"){let s=e.filter(l=>l.LedgerEntryType==="RippleState").find(l=>l.Balance.currency===i.currency&&(l.LowLimit.issuer===i.issuer||l.HighLimit.issuer===i.issuer));if((s?Math.abs(parseFloat(s.Balance.value)):0)<parseFloat(i.value))return`Insufficient ${i.currency} balance. Required: ${i.value}`}return null}isInsufficientXrpBalance1(t,e,i,r,o,s="10"){try{if(!i||isNaN(parseFloat(i))||parseFloat(i)<0)throw new Error("Invalid amount: must be a non-negative number");let a=0n,l=new Set(["Payment","EscrowCreate","EscrowFinish","EscrowCancel","CheckCreate","CheckCash","CheckCancel","PaymentChannelCreate","PaymentChannelFund","PaymentChannelClaim","OfferCreate","OfferCancel","AMMCreate","AMMDeposit","AMMWithdraw"]);o?.TransactionType&&l.has(o.TransactionType)?o?.Amount&&typeof o.Amount=="string"?a=BigInt(o.Amount):typeof i=="string"&&!isNaN(Number(i))&&(a=BigInt(Cr.xrpToDrops(i))):a=0n;let c=BigInt(e.result.account_data.Balance),d=BigInt(Cr.xrpToDrops(t.result.info.validated_ledger?.reserve_base_xrp||10)),u=BigInt(Cr.xrpToDrops(t.result.info.validated_ledger?.reserve_inc_xrp||.2)),h=BigInt(e.result.account_data.OwnerCount||0),f=d+h*u;o&&this.increasesOwnerCount(o)&&(f+=u);let p=BigInt(s),y=a+p+f;return c<y}catch(a){throw console.error("Error checking XRP balance:",a),new Error(`Failed to check balance: ${a.message||"Unknown error"}`)}}isInsufficientIouTrustlineBalance(t,e,i){try{if(!e?.Amount||typeof e.Amount=="string")return!1;let r=e.Amount,{currency:o,issuer:s,value:a}=r;if(!o||!s||!a)throw new Error("Invalid IOU Amount structure");let l=parseFloat(a);if(isNaN(l)||l<0)throw new Error("Invalid IOU amount value");let c=t.result.lines.find(u=>u.currency===o&&(u.account===i||u.issuer===s||u.account===s));if(!c)return!0;let d=parseFloat(c.balance);return Math.abs(d)<l}catch(r){throw console.error("Error checking IOU balance:",r),new Error(`Failed to check IOU balance: ${r.message||"Unknown error"}`)}}getAccountReserves(t,e,i){return z(this,null,function*(){try{let r=e.result.account_data,o=Number(r.OwnerCount||0),s=yield this.getXrplReserve(t);if(!s)throw new Error("Failed to fetch XRPL reserve data");let{reserveBaseXRP:a,reserveIncrementXRP:l}=s,c=a+o*l;return{ownerCount:o,totalReserveXRP:c}}catch(r){console.error("Error in getAccountReserves:",r),this.setError(`${r.message||"Unknown error"}`,void 0);return}})}getXrplReserve(t){return z(this,null,function*(){try{let i=(yield this.xrplService.getXrplServerState(t,"current","")).result.state.validated_ledger;if(!i)throw new Error("validated_ledger is undefined in server_state");let r=i.base_fee,o=i.reserve_base,s=i.reserve_inc;return{reserveBaseXRP:o,reserveIncrementXRP:s}}catch(e){console.error("Error:",e),this.setError(`${e.message||"Unknown error"}`,void 0);return}})}updateOwnerCountAndReserves(t,e,i){return z(this,null,function*(){let r=yield this.getAccountReserves(t,e,i),o="0",s="0";return r&&(o=r.ownerCount.toString(),s=String(Cr.dropsToXrp(r.totalReserveXRP)),console.debug(`Owner Count: ${o} Total XRP Reserves: ${s}`)),{ownerCount:o,totalXrpReserves:s}})}getOnlyTokenBalance(t,e,i){return z(this,null,function*(){try{let s=((yield this.xrplService.getAccountLines(t,e,"validated","")).result.lines||[]).find(a=>a.currency.toUpperCase()===i.toUpperCase());return s?s.balance:"0"}catch(r){return console.error("Error fetching token balance:",r),"0"}})}getTokenBalance(t,e,i,r,o){return z(this,null,function*(){try{let s=yield this.xrplService.getTokenBalance(t,i,"validated","");console.debug("gatewayBalances:",s.result);let a=0,l=[];s.result.assets&&Object.entries(s.result.assets).forEach(([u,h])=>{console.log(`Issuer: ${u}`),h.forEach(f=>{console.log(`  Currency: ${f.currency}, Value: ${f.value}`);let p=f.currency.length>3?this.decodeCurrencyCode(f.currency):f.currency;if(r===p){console.log(`  Match: ${r} = ${p}`);let y=parseFloat(f.value);isNaN(y)||(a+=y,l.includes(u)||l.push(u))}})});let c=Math.round(a*100)/100,d=yield t.getXrpBalance(i);return yield this.updateOwnerCountAndReserves(t,e,i),{issuers:l,total:c,xrpBalance:d}}catch(s){throw console.error("Error fetching token balance:",s),s}})}getCurrencyBalance(t,e){return z(this,null,function*(){try{let i=[];return e&&!Array.isArray(e)&&e.result&&Array.isArray(e.result.account_objects)&&(i=e.result.account_objects),i.filter(s=>s.Balance&&s.Balance.currency===t.toUpperCase()).reduce((s,a)=>s+parseFloat(a.Balance.value),0)}catch(i){return console.error("Error fetching balance:",i),null}})}getCurrencyBalanceWithIssuer(t,e,i,r){return z(this,null,function*(){try{let o=[];i&&!Array.isArray(i)&&i.result&&Array.isArray(i.result.account_objects)&&(o=i.result.account_objects);let s=o.filter(l=>{if(!l.Balance||l.Balance.currency!==t.toUpperCase())return!1;let c=l.LowLimit?.issuer,d=l.HighLimit?.issuer;return c===r&&d===e||d===r&&c===e}),a=0;for(let l of s){let c=parseFloat(l.Balance.value),d=r===l.HighLimit?.issuer?c:-c;a+=d}return a}catch(o){return console.error("Error fetching balance:",o),null}})}setError(t,e){this.isError=!0,this.isSuccess=!1,this.result=`${t}`,this.spinner=!1}setSuccess(t){this.result=`${t}`,this.isError=!1,this.isSuccess=!0}getValidInvoiceID(t){return z(this,null,function*(){if(!t)return null;if(/^[0-9A-Fa-f]{64}$/.test(t))return t.toUpperCase();try{let i=new TextEncoder().encode(t),r=yield crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(r)).map(a=>a.toString(16).padStart(2,"0")).join("").toUpperCase()}catch{throw new Error("Failed to hash InvoiceID")}})}loadSignerList(t,e){let i=t+"signerEntries";this.storageService.get(i)!=null&&this.storageService.get(i).length>0?e=this.storageService.get(i).map(r=>({account:r.Account,seed:r.seed,weight:r.SignerWeight})):this.clearSignerList(e)}clearSignerList(t){t=[{account:"",seed:"",weight:1}]}getUserEnteredAddress(t){return t.split(",").map(e=>e.trim()).filter(e=>e!=="")}formatMemos(t){return t.map(e=>{let i=Buffer.from(e.Memo.MemoData,"hex").toString("utf8"),r=e.Memo.MemoType?Buffer.from(e.Memo.MemoType,"hex").toString("utf8"):"text/plain";return`${i} (${r})`}).join(`
`)}setInvoiceIdField(t,e){return z(this,null,function*(){let i=yield this.getValidInvoiceID(e);i&&(t.InvoiceID=i)})}setSourceTagField(t,e){t.SourceTag=Number(e)}setURI(t,e){t.URI=Cr.convertStringToHex(e)}setIssuerAddress(t,e){t.Issuer=e}setDestination(t,e){t.Destination=e}applyTicketSequence(t,e,i,r){if(r){if(!this.isTicketExists(e,Number(r)))throw new Error(`Ticket Sequence ${r} not found for account ${e.account}`);this.setTicketSequence(i,r,!0)}else this.setTicketSequence(i,t.result.account_data.Sequence,!1)}isTicketExists(t,e){try{return(t.result.account_objects||[]).some(r=>r.TicketSequence===e)}catch(i){return console.error("Error checking ticket: ",i),!1}}setTicketSequence(t,e,i){i?(t.TicketSequence=Number(e),t.Sequence=0):t.Sequence=Number(e)}setMemoField(t,e){let i=(e||"").split(",").map(r=>r.trim()).filter(Boolean);i.length>0?t.Memos=i.map(r=>({Memo:{MemoData:Buffer.from(r,"utf8").toString("hex"),MemoType:Buffer.from("text/plain","utf8").toString("hex")}})):t.Memos=[{Memo:{MemoData:Buffer.from(e,"utf8").toString("hex"),MemoType:Buffer.from("text/plain","utf8").toString("hex")}}]}setDestinationTag(t,e){t.DestinationTag=parseInt(e,10)}setMessageKey(t,e){t.MessageKey=e}setEmailHash(t,e){let i=(0,uue.default)(e.trim().toLowerCase()).toUpperCase();t.EmailHash=i}setDomain(t,e){e===""?t.Domain="":t.Domain=Buffer.from(e,"utf8").toString("hex")}setTransferRate(t,e){t.TransferRate=this.getTransferRate(e)}setTransferFee(t,e){t.TransferFee=parseInt(e,10)}setTickSize(t,e){t.TickSize=e}setExpiration(t,e){t.Expiration=e}setAmount(t,e){t.Amount=this.determineAmountType(e)}setPublicKey(t,e){t.PublicKey=e}setCancelAfter(t,e){t.CancelAfter=e}determineAmountType(t){if(typeof t=="string")return Cr.xrpToDrops(t);if(typeof t=="object")return t.value}logLedgerObjects(t,e,i){console.debug("fee:",t),console.debug("currentLedger:",e),console.debug("serverInfo:",i)}logAccountInfoObjects(t,e){t&&console.debug("accountInfo:",t.result),e&&console.debug("accountObject:",e.result)}logAssets(t,e){t&&console.debug("asset:",t),e&&console.debug("asset2:",e)}logObjects(t,e){e.result?console.debug(`${t}`,e.result):console.debug(`${t}`,e)}logEscrowObjects(t,e){t&&console.debug("escrowObjects:",t?.result),e&&console.debug("escrow:",e)}static \u0275fac=function(e){return new(e||n)(Ye(Sr),Ye(rn),Ye(un))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};function gze(n,t){if(n&1){let e=ge();m(0,"button",15),X("click",function(){let r=U(e).$implicit,o=E();return j(o.selectNetwork(r.value))}),m(1,"span",16),w(2),g(),m(3,"span",17),w(4),g()()}if(n&2){let e=t.$implicit,i=E();Ue("active",i.selectedNetwork===e.name),_(2),je("",e.name," Environment"),_(2),Ee(e.tag)}}var XE=class n{constructor(t,e,i,r,o,s){this.storageService=t;this.utilsService=e;this.xrplService=i;this.router=r;this.datePipe=o;this.networkService=s}transactionResult=new vt;selectedNetwork="Devnet";networkColor="#1a1c21";navbarColor="#1a1c21";isNetworkDropdownOpen=!1;currentDateTime="";isDarkMode=!1;searchSubject=new Xe;transactionInput="";spinner=!1;connectionStatus="disconnected";connectionStatusMessage="Disconnected";subs=[];expandedGroup=null;isCollapsed=!1;networks=[{name:"Devnet",value:"devnet",tag:"Development"},{name:"Testnet",value:"testnet",tag:"Testing"},{name:"Mainnet",value:"mainnet",tag:"Production"}];ngOnInit(){let{environment:t}=this.storageService.getNet();this.selectedNetwork=t.charAt(0).toUpperCase()+t.slice(1),this.networkColor=this.storageService.getNetworkColor(t),this.subs.push(this.xrplService.connectionStatus$.subscribe(i=>this.connectionStatus=i)),this.subs.push(this.xrplService.connectionMessage$.subscribe(i=>this.connectionStatusMessage=i)),this.xrplService.getClient().catch(()=>{});let e=localStorage.getItem("darkMode");e?this.isDarkMode=e==="true":this.isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,this.applyDarkMode()}toggleSidebar(){this.isCollapsed=!this.isCollapsed,this.isCollapsed&&(this.expandedGroup=null,this.isNetworkDropdownOpen=!1)}onAccountsClick(t){if(t.preventDefault(),t.stopPropagation(),this.isCollapsed){this.router.navigate(["/account-configurator"]);return}this.expandedGroup=this.expandedGroup==="accounts"?null:"accounts",this.isNetworkDropdownOpen=!1}onNftsClick(t){if(t.preventDefault(),t.stopPropagation(),this.isCollapsed){this.router.navigate(["/create-nft"]);return}this.expandedGroup=this.expandedGroup==="nfts"?null:"nfts"}onEscrowsClick(t){if(t.preventDefault(),t.stopPropagation(),this.isCollapsed){this.router.navigate(["/time-escrow"]);return}this.expandedGroup=this.expandedGroup==="escrows"?null:"escrows"}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,localStorage.setItem("darkMode",this.isDarkMode.toString()),this.applyDarkMode()}applyDarkMode(){this.isDarkMode?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")}checkConnection(){return z(this,null,function*(){try{let t=yield this.xrplService.getClient();if(!t?.isConnected()){this.connectionStatus="disconnected",this.connectionStatusMessage="Disconnected from network";return}yield t.request({command:"server_info"}),this.connectionStatus="connected",this.connectionStatusMessage=`Connected to ${this.selectedNetwork}`}catch{this.connectionStatus="disconnected",this.connectionStatusMessage="Failed to reach network"}})}triggerSearch(){this.searchSubject.next()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}updateDateTime(){let t=new Date;this.currentDateTime=nw(t,"America/New_York","M/d/yyyy h:mm:ss aa")}toggleNetworkDropdown(){this.isNetworkDropdownOpen=!this.isNetworkDropdownOpen}toggleAccountsDropdown(t){t.preventDefault(),t.stopPropagation(),this.expandedGroup=this.expandedGroup==="accounts"?null:"accounts",this.isNetworkDropdownOpen=!1}ttoggleEscrowsDropdown(t){t.preventDefault(),t.stopPropagation(),this.expandedGroup=this.expandedGroup==="escrows"?null:"escrows",this.isNetworkDropdownOpen=!1}toggleNftDropdown(t){t.preventDefault(),t.stopPropagation(),this.expandedGroup=this.expandedGroup==="nfts"?null:"nfts",this.isNetworkDropdownOpen=!1}toggleMptDropdown(t){t.preventDefault(),t.stopPropagation(),this.expandedGroup=this.expandedGroup==="mpt"?null:"mpt",this.isNetworkDropdownOpen=!1}toggleUtilsDropdown(t){t.preventDefault(),this.isNetworkDropdownOpen=!1}selectNetwork(t){return z(this,null,function*(){let e=t.toLowerCase();this.selectedNetwork=t.charAt(0).toUpperCase()+t.slice(1),this.networkColor=this.storageService.getNetworkColor(e),this.storageService.setNet(this.storageService.networkServers[e],e),this.xrplService.disconnect().then(()=>{this.xrplService.getClient()}),this.networkService.announceNetworkChange(e),this.isNetworkDropdownOpen=!1})}setActiveLink(t){this.storageService.setActiveNavLink(t)}setActiveEscrowLink(t){this.storageService.setActiveEscrowLink(t)}setActiveAccountsLink(t){this.storageService.setActiveAccountsLink(t),this.expandedGroup=null,this.isNetworkDropdownOpen=!1}disconnectClient(t){return z(this,null,function*(){t.preventDefault(),yield this.xrplService.disconnect()})}static \u0275fac=function(e){return new(e||n)(ut(rn),ut(Gt),ut(Sr),ut(fs),ut(ld),ut(o0))};static \u0275cmp=nt({type:n,selectors:[["app-header"]],outputs:{transactionResult:"transactionResult"},features:[Zi([ld])],decls:18,vars:18,consts:[[1,"app-header"],[1,"header-left"],[1,"app-title"],[1,"header-center"],[1,"header-right"],[1,"network-selector","relative","z-[10000]"],[1,"network-button",3,"click"],[1,"network-label"],[1,"connection-status",3,"title"],[1,"status-dot"],[1,"status-text"],["viewBox","0 0 24 24",1,"dropdown-arrow"],["d","M7 10l5 5 5-5z","fill","currentColor"],[1,"dropdown-menu"],["class","dropdown-item",3,"active","click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],[1,"network-name"],[1,"network-tag"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"div",1)(2,"h1",2),w(3,"XRPL Tool"),g()(),ee(4,"div",3),m(5,"div",4)(6,"div",5)(7,"button",6),X("click",function(){return i.toggleNetworkDropdown()}),m(8,"span",7),w(9),g(),m(10,"span",8),ee(11,"span",9),m(12,"span",10),w(13),g()(),lt(),m(14,"svg",11),ee(15,"path",12),g()(),dn(),m(16,"div",13),nn(17,gze,5,4,"button",14),g()()()()),e&2&&(_(7),In("background-color",i.networkColor),Tn("aria-expanded",i.isNetworkDropdownOpen)("aria-label","Current network: "+i.selectedNetwork),_(2),je("",i.selectedNetwork," Environment"),_(),Ue("connected",i.connectionStatus==="connected")("disconnected",i.connectionStatus==="disconnected")("connecting",i.connectionStatus==="connecting"),oe("title",i.connectionStatusMessage),_(3),je(" ",i.connectionStatus==="connected"?"Connected":i.connectionStatus==="connecting"?"Connecting...":"Disconnected"," "),_(),Ue("open",i.isNetworkDropdownOpen),_(2),Ue("open",i.isNetworkDropdownOpen),_(),oe("ngForOf",i.networks))},dependencies:[ln,W3,tw],styles:['.app-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:60px;padding:0 20px;background-color:#1a1c21;color:#fff;border-bottom:1px solid #333;position:relative;top:0;z-index:1000}.app-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.app-body[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 60px)}.content-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px}.network-selector[_ngcontent-%COMP%]{position:relative;z-index:10000}.network-button[_ngcontent-%COMP%]{position:relative;z-index:1001;display:flex;align-items:center;gap:12px;padding:10px 16px;border-radius:12px;border:none;color:#fff;font-weight:500;font-size:14px;cursor:pointer;transition:all .2s ease;min-width:220px;justify-content:space-between}.network-button[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px);box-shadow:0 4px 12px #0003}.network-label[_ngcontent-%COMP%]{font-weight:600}.connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;opacity:.9}.status-dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;background-color:#f44;animation:_ngcontent-%COMP%_pulse 2s infinite}.status-dot[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:100%;border-radius:50%;background:inherit;animation:_ngcontent-%COMP%_pulse 2s infinite}.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#4f8;box-shadow:0 0 10px #4f89}.connecting[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#fa4;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.dropdown-arrow[_ngcontent-%COMP%]{width:20px;height:20px;transition:transform .3s ease}.dropdown-arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;margin-top:8px;background:#1e1e1e;border-radius:12px;box-shadow:0 10px 30px #0006;overflow:hidden;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease;min-width:260px;z-index:1000}.dropdown-menu.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0);z-index:10000}.dropdown-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:12px 16px;background:none;border:none;color:#ddd;text-align:left;cursor:pointer;transition:background .2s}.dropdown-item[_ngcontent-%COMP%]:hover{background:#2a2a2a}.dropdown-item.active[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;font-weight:600}.network-tag[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px;background:#ffffff26;border-radius:6px;text-transform:uppercase;letter-spacing:.5px}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #f446}70%{box-shadow:0 0 0 8px #f440}to{box-shadow:0 0 #f440}}.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]:before{animation:none;box-shadow:0 0 10px #4f89}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);right:0;min-width:260px;background:#1e1e1e;border-radius:12px;box-shadow:0 12px 32px #00000080;padding:8px 0;z-index:9999;opacity:0;visibility:hidden;transform:translateY(-8px);transition:opacity .25s ease,transform .25s ease,visibility .25s;pointer-events:none;overflow:visible}.dropdown-menu.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0);pointer-events:auto}']})};var ni=class n{id=0;toasts=P([]);isShowing=P(!1);constructor(){}success(t,e=2e3){this.show({message:t,type:"success"},e)}error(t,e=3e3){this.show({message:t,type:"error"},e)}info(t,e=2e3){this.show({message:t,type:"info"},e)}show(t,e){let i=++this.id;this.toasts.update(r=>[...r,Ge(le({},t),{id:i})]),setTimeout(()=>{this.toasts.update(r=>r.filter(o=>o.id!==i))},e)}clear(){this.toasts.set([])}removeToast(t){setTimeout(()=>{this.toasts.update(e=>e.filter(i=>i.id!==t))},200)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var yze=(n,t)=>t.id;function vze(n,t){n&1&&(lt(),m(0,"svg",9),ee(1,"path",12),g())}function _ze(n,t){n&1&&(lt(),m(0,"svg",9),ee(1,"path",13),g())}function bze(n,t){n&1&&(lt(),m(0,"svg",9),ee(1,"circle",14)(2,"path",15)(3,"path",16),g())}function wze(n,t){if(n&1){let e=ge();m(0,"div",7),X("click",function(){let r=U(e).$implicit,o=E();return j(o.toastService.removeToast(r.id))}),m(1,"div",8),Q(2,vze,2,0,":svg:svg",9)(3,_ze,2,0,":svg:svg",9)(4,bze,4,0,":svg:svg",9),g(),m(5,"div",10),w(6),g(),m(7,"button",11),X("click",function(r){let o=U(e).$implicit;return E().toastService.removeToast(o.id),j(r.stopPropagation())}),w(8,"\xD7"),g()()}if(n&2){let e,i=t.$implicit;oe("ngClass",i.type)("@toastAnimation",void 0),_(2),J((e=i.type)==="success"?2:e==="error"?3:e==="info"?4:-1),_(4),Ee(i.message)}}var YE=class n{constructor(t,e,i,r){this.titleService=t;this.router=e;this.activatedRoute=i;this.toastService=r}ngOnInit(){this.router.events.pipe(rr(t=>t instanceof Ba),Yt(()=>this.activatedRoute),Yt(t=>{for(;t.firstChild;)t=t.firstChild;return t}),So(t=>t.data)).subscribe(t=>{t.title?this.titleService.setTitle(t.title):this.titleService.setTitle("XRPL App")})}static \u0275fac=function(e){return new(e||n)(ut(tk),ut(fs),ut(bc),ut(ni))};static \u0275cmp=nt({type:n,selectors:[["app-root"]],decls:10,vars:0,consts:[[1,"main-container"],[1,"app-body"],[1,"content-area"],[1,"fixed","inset-0","pointer-events-none","z-[9999]"],[1,"toast-wrap"],[1,"toast-stack"],[1,"toast",3,"ngClass"],[1,"toast",3,"click","ngClass"],[1,"icon"],["viewBox","0 0 24 24"],[1,"message"],[1,"close",3,"click"],["d","M5 13l4 4L19 7"],["d","M6 18L18 6M6 6l12 12"],["cx","12","cy","12","r","10"],["d","M12 8h.01"],["d","M11 12h1v4h1"]],template:function(e,i){e&1&&(m(0,"div",0),ee(1,"app-header"),m(2,"div",1)(3,"div",2),ee(4,"router-outlet"),g()()(),m(5,"div",3)(6,"div",4)(7,"div",5),yn(8,wze,9,4,"div",6,yze),g()()()),e&2&&(_(8),vn(i.toastService.toasts()))},dependencies:[Yb,ln,Oa,XE],encapsulation:2,data:{animation:[Hn("toastAnimation",[Ln(":enter",[kt({opacity:0,transform:"translateY(100%)"}),Pn("300ms ease-out",kt({opacity:1,transform:"translateY(0)"}))]),Ln(":leave",[Pn("200ms ease-in",kt({opacity:0,transform:"translateY(50%)"}))])])]}})};var wue=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(ut(dr),ut(Kt))};static \u0275dir=qt({type:n})}return n})(),cv=(()=>{class n extends wue{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275dir=qt({type:n,features:[Lt]})}return n})(),k1=new $e(""),Sze={provide:k1,useExisting:ds(()=>cS),multi:!0},cS=(()=>{class n extends cv{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&X("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Zi([Sze]),Lt]})}return n})(),Cze={provide:k1,useExisting:ds(()=>Bn),multi:!0};function xze(){let n=Vl()?Vl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var kze=new $e(""),Bn=(()=>{class n extends wue{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!xze())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(ut(dr),ut(Kt),ut(kze,8))};static \u0275dir=qt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&X("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Zi([Cze]),Lt]})}return n})();function ZU(n){return n==null||QU(n)===0}function QU(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var u8=new $e(""),JU=new $e(""),Mze=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,QE=class{static min(t){return Sue(t)}static max(t){return Tze(t)}static required(t){return Eze(t)}static requiredTrue(t){return Aze(t)}static email(t){return Dze(t)}static minLength(t){return Ize(t)}static maxLength(t){return Fze(t)}static pattern(t){return Pze(t)}static nullValidator(t){return JE()}static compose(t){return Eue(t)}static composeAsync(t){return Aue(t)}};function Sue(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function Tze(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Eze(n){return ZU(n.value)?{required:!0}:null}function Aze(n){return n.value===!0?null:{required:!0}}function Dze(n){return ZU(n.value)||Mze.test(n.value)?null:{email:!0}}function Ize(n){return t=>{let e=t.value?.length??QU(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function Fze(n){return t=>{let e=t.value?.length??QU(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function Pze(n){if(!n)return JE;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(ZU(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function JE(n){return null}function Cue(n){return n!=null}function xue(n){return Eh(n)?Xr(n):n}function kue(n){let t={};return n.forEach(e=>{t=e!=null?le(le({},t),e):t}),Object.keys(t).length===0?null:t}function Mue(n,t){return t.map(e=>e(n))}function Lze(n){return!n.validate}function Tue(n){return n.map(t=>Lze(t)?t:e=>t.validate(e))}function Eue(n){if(!n)return null;let t=n.filter(Cue);return t.length==0?null:function(e){return kue(Mue(e,t))}}function ej(n){return n!=null?Eue(Tue(n)):null}function Aue(n){if(!n)return null;let t=n.filter(Cue);return t.length==0?null:function(e){let i=Mue(e,t).map(xue);return y_(i).pipe(Yt(kue))}}function tj(n){return n!=null?Aue(Tue(n)):null}function fue(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Due(n){return n._rawValidators}function Iue(n){return n._rawAsyncValidators}function YU(n){return n?Array.isArray(n)?n:[n]:[]}function e8(n,t){return Array.isArray(n)?n.includes(t):n===t}function pue(n,t){let e=YU(t);return YU(n).forEach(r=>{e8(e,r)||e.push(r)}),e}function mue(n,t){return YU(t).filter(e=>!e8(n,e))}var t8=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ej(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=tj(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},s0=class extends t8{name;get formDirective(){return null}get path(){return null}},a0=class extends t8{_parent=null;name=null;valueAccessor=null},n8=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Rze={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},lFt=Ge(le({},Rze),{"[class.ng-submitted]":"isSubmitted"}),$n=(()=>{class n extends n8{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(ut(a0,2))};static \u0275dir=qt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ue("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Lt]})}return n})(),Ci=(()=>{class n extends n8{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(ut(s0,10))};static \u0275dir=qt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ue("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Lt]})}return n})();var rS="VALID",ZE="INVALID",av="PENDING",oS="DISABLED",l0=class{},i8=class extends l0{value;source;constructor(t,e){super(),this.value=t,this.source=e}},aS=class extends l0{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},lS=class extends l0{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},lv=class extends l0{status;source;constructor(t,e){super(),this.status=t,this.source=e}},r8=class extends l0{source;constructor(t){super(),this.source=t}},o8=class extends l0{source;constructor(t){super(),this.source=t}};function Fue(n){return(h8(n)?n.validators:n)||null}function Oze(n){return Array.isArray(n)?ej(n):n||null}function Pue(n,t){return(h8(t)?t.asyncValidators:n)||null}function Nze(n){return Array.isArray(n)?tj(n):n||null}function h8(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Bze(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Je(1e3,"");if(!i[e])throw new Je(1001,"")}function Vze(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new Je(1002,"")})}var s8=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ko(this.statusReactive)}set status(t){ko(()=>this.statusReactive.set(t))}_status=_e(()=>this.statusReactive());statusReactive=P(void 0);get valid(){return this.status===rS}get invalid(){return this.status===ZE}get pending(){return this.status==av}get disabled(){return this.status===oS}get enabled(){return this.status!==oS}errors;get pristine(){return ko(this.pristineReactive)}set pristine(t){ko(()=>this.pristineReactive.set(t))}_pristine=_e(()=>this.pristineReactive());pristineReactive=P(!0);get dirty(){return!this.pristine}get touched(){return ko(this.touchedReactive)}set touched(t){ko(()=>this.touchedReactive.set(t))}_touched=_e(()=>this.touchedReactive());touchedReactive=P(!1);get untouched(){return!this.touched}_events=new Xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(pue(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(pue(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(mue(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(mue(t,this._rawAsyncValidators))}hasValidator(t){return e8(this._rawValidators,t)}hasAsyncValidator(t){return e8(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Ge(le({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new lS(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new lS(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Ge(le({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new aS(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new aS(!0,i))}markAsPending(t={}){this.status=av;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new lv(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Ge(le({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=oS,this.errors=null,this._forEachChild(r=>{r.disable(Ge(le({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new i8(this.value,i)),this._events.next(new lv(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ge(le({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=rS,this._forEachChild(i=>{i.enable(Ge(le({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ge(le({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rS||this.status===av)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new i8(this.value,e)),this._events.next(new lv(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Ge(le({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oS:rS}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=av,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=xue(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new lv(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?oS:this.errors?ZE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(av)?av:this._anyControlsHaveStatus(ZE)?ZE:rS}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new aS(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new lS(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){h8(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Oze(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Nze(this._rawAsyncValidators)}},a8=class extends s8{constructor(t,e,i){super(Fue(e),Pue(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Vze(this,!0,t),Object.keys(t).forEach(i=>{Bze(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new o8(this))}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var dS=new $e("",{providedIn:"root",factory:()=>f8}),f8="always";function Uze(n,t){return[...t.path,n]}function l8(n,t,e=f8){nj(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Hze(n,t),zze(n,t),Wze(n,t),jze(n,t)}function gue(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),d8(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function c8(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function jze(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function nj(n,t){let e=Due(n);t.validator!==null?n.setValidators(fue(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Iue(n);t.asyncValidator!==null?n.setAsyncValidators(fue(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();c8(t._rawValidators,r),c8(t._rawAsyncValidators,r)}function d8(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=Due(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=Iue(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return c8(t._rawValidators,i),c8(t._rawAsyncValidators,i),e}function Hze(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Lue(n,t)})}function Wze(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Lue(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Lue(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zze(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Rue(n,t){n==null,nj(n,t)}function qze(n,t){return d8(n,t)}function $ze(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Kze(n){return Object.getPrototypeOf(n.constructor)===cv}function Oue(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Gze(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Bn?e=o:Kze(o)?i=o:r=o}),r||i||e||null}function Xze(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var Yze={provide:s0,useExisting:ds(()=>di)},sS=Promise.resolve(),di=(()=>{class n extends s0{callSetDisabledState;get submitted(){return ko(this.submittedReactive)}_submitted=_e(()=>this.submittedReactive());submittedReactive=P(!1);_directives=new Set;form;ngSubmit=new vt;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new a8({},ej(e),tj(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){sS.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),l8(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){sS.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){sS.then(()=>{let i=this._findContainer(e.path),r=new a8({});Rue(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){sS.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){sS.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Oue(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new r8(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(ut(u8,10),ut(JU,10),ut(dS,8))};static \u0275dir=qt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&X("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Zi([Yze]),Lt]})}return n})();function yue(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function vue(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Nue=class extends s8{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(Fue(e),Pue(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),h8(e)&&(e.nonNullable||e.initialValueIsDefault)&&(vue(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new o8(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){yue(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){yue(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){vue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Zze=n=>n instanceof Nue;var Qze={provide:a0,useExisting:ds(()=>Wn)},_ue=Promise.resolve(),Wn=(()=>{class n extends a0{_changeDetectorRef;callSetDisabledState;control=new Nue;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vt;constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Gze(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),$ze(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){l8(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){_ue.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Fn(i);_ue.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Uze(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(ut(s0,9),ut(u8,10),ut(JU,10),ut(k1,10),ut(vi,8),ut(dS,8))};static \u0275dir=qt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Zi([Qze]),Lt,or]})}return n})();var xi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Jze={provide:k1,useExisting:ds(()=>M1),multi:!0},M1=(()=>{class n extends cv{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&X("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Zi([Jze]),Lt]})}return n})(),eqe={provide:k1,useExisting:ds(()=>ij),multi:!0};var tqe=(()=>{class n{_accessors=[];add(e,i){this._accessors.push([e,i])}remove(e){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===e){this._accessors.splice(i,1);return}}select(e){this._accessors.forEach(i=>{this._isSameGroup(i,e)&&i[1]!==e&&i[1].fireUncheck(e.value)})}_isSameGroup(e,i){return e[0].control?e[0]._parent===i._control._parent&&e[1].name===i.name:!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ij=(()=>{class n extends cv{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=N(dS,{optional:!0})??f8;constructor(e,i,r,o){super(e,i),this._registry=r,this._injector=o}ngOnInit(){this._control=this._injector.get(a0),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(i){return new(i||n)(ut(dr),ut(Kt),ut(tqe),ut(tn))};static \u0275dir=qt({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){i&1&&X("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Zi([eqe]),Lt]})}return n})();var nqe={provide:s0,useExisting:ds(()=>rj)},rj=(()=>{class n extends s0{callSetDisabledState;get submitted(){return ko(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=_e(()=>this._submittedReactive());_submittedReactive=P(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new vt;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(d8(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return l8(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){gue(e.control||null,e,!1),Xze(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),Oue(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new r8(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,i={}){this.form.reset(e,i),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(gue(i||null,e),Zze(r)&&(l8(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);Rue(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&qze(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nj(this.form,this),this._oldForm&&d8(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(ut(u8,10),ut(JU,10),ut(dS,8))};static \u0275dir=qt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&X("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Zi([nqe]),Lt,or]})}return n})();var iqe={provide:k1,useExisting:ds(()=>Vue),multi:!0};function Bue(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function rqe(n){return n.split(":")[0]}var Vue=(()=>{class n extends cv{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=N(Ns).injector;destroyRef=N(Zt);cdr=N(vi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Zo({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),r=Bue(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=rqe(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&X("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Zi([iqe]),Lt]})}return n})(),Uue=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(Bue(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(ut(Kt),ut(dr),ut(Vue,9))};static \u0275dir=qt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),oqe={provide:k1,useExisting:ds(()=>p8),multi:!0};function bue(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function sqe(n){return n.split(":")[0]}var p8=(()=>{class n extends cv{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);r.push(c)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=sqe(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&X("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Zi([oqe]),Lt]})}return n})(),jue=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(bue(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(bue(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ut(Kt),ut(dr),ut(p8,9))};static \u0275dir=qt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function aqe(n){return typeof n=="number"?n:parseFloat(n)}var lqe=(()=>{class n{_validator=JE;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):JE,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,features:[or]})}return n})();var cqe={provide:u8,useExisting:ds(()=>oj),multi:!0},oj=(()=>{class n extends lqe{min;inputName="min";normalizeInput=e=>aqe(e);createValidator=e=>Sue(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Tn("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Zi([cqe]),Lt]})}return n})();var dqe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({})}return n})();var Kn=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:dS,useValue:e.callSetDisabledState??f8}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[dqe]})}return n})();function uqe(n){return n==null?"":/^\d+$/.test(n)?`${n}px`:n}var hqe=new $e("Ng Icon Pre Processor"),fqe=new $e("Ng Icon Post Processor");function pqe(){return N(hqe,{optional:!0})??(n=>n)}function mqe(){return N(fqe,{optional:!0})??(()=>{})}var gqe=new $e("Ng Icon Logger"),sj=class{log(t){console.log(t)}warn(t){console.warn(t)}error(t){console.error(t)}};function yqe(){return N(gqe,{optional:!0})??new sj}var vqe=new $e("Ng Icon Config");function _qe(){return N(vqe,{optional:!0})??{}}var bqe=new $e("Ng Icon Loader Token");var wqe=new $e("Ng Icon Cache Token");function Sqe(){return N(bqe,{optional:!0})}function Cqe(){return N(wqe,{optional:!0})}function Hue(n){return[{provide:aj,useFactory:(t=N(aj,{optional:!0,skipSelf:!0}))=>le(le({},t?.reduce((e,i)=>le(le({},e),i),{})),n),multi:!0}]}var aj=new $e("Icons Token");function xqe(){return N(aj,{optional:!0})??[]}function kqe(n){return typeof n=="string"?Promise.resolve(n):ph(n)?n.toPromise():n}function Mqe(n){return n.replace(/([^a-zA-Z0-9])+(.)?/g,(t,e,i)=>i?i.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,t=>t.toLowerCase())}var Tqe=0,ii=(()=>{let t=class t{constructor(){this.config=_qe(),this.icons=xqe(),this.loader=Sqe(),this.cache=Cqe(),this.preProcessor=pqe(),this.postProcessor=mqe(),this.injector=N(tn),this.renderer=N(dr),this.platform=N(Mh),this.elementRef=N(Kt),this.uniqueId=Tqe++,this.logger=yqe(),this.name=Ra(),this.svg=Ra(),this.size=Ra(this.config.size,{transform:uqe}),this.strokeWidth=Ra(this.config.strokeWidth),this.color=Ra(this.config.color),rd(()=>this.updateIcon()),N(new gc("aria-hidden"),{optional:!0})||this.elementRef.nativeElement.setAttribute("aria-hidden","true")}ngOnDestroy(){this.svgElement=void 0}updateIcon(){return z(this,null,function*(){let i=this.name(),r=this.svg();if(r!==void 0){this.setSvg(r);return}if(i===void 0)return;let o=Mqe(i);for(let s of[...this.icons].reverse())if(s[o]){this.setSvg(s[o]);return}if(this.loader){let s=yield this.requestIconFromLoader(i);if(s!==null){this.setSvg(s);return}}this.logger.warn(`No icon named ${i} was found. You may need to import it using the withIcons function.`)})}setSvg(i){if(oY(this.platform)){this.elementRef.nativeElement.innerHTML=i,this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");return}if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===i)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),i===""))return;let r=this.renderer.createElement("template");i=this.replaceIds(i),this.renderer.setProperty(r,"innerHTML",this.preProcessor(i)),this.svgElement=r.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}replaceIds(i){if(!i.includes("ID_PLACEHOLDER_"))return i;let r=/ID_PLACEHOLDER_(\d+)/g,o=new Map,s=new Set(i.match(r));if(s===null)return i;for(let a of s){let l=a.replace("ID_PLACEHOLDER_",""),c=`ng-icon-${this.uniqueId}-${o.size}`;o.set(l,c),i=i.replace(new RegExp(a,"g"),c)}return i}requestIconFromLoader(i){return new Promise(r=>{Yo(this.injector,()=>z(this,null,function*(){if(this.cache){let a=this.cache.get(i);if(typeof a=="string"){r(a);return}if(a instanceof Promise){let l=yield a;r(l);return}}let o=kqe(this.loader(i));this.cache?.set(i,o);let s=yield o;this.cache?.set(i,s),r(s)}))})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=nt({type:t,selectors:[["ng-icon"]],hostAttrs:["role","img"],hostVars:6,hostBindings:function(r,o){r&2&&In("--ng-icon__stroke-width",o.strokeWidth())("--ng-icon__size",o.size())("--ng-icon__color",o.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},decls:0,vars:0,template:function(r,o){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0});let n=t;return n})();var Eqe=["*"];var Wue=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]];var zue=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"m16 19 3 3 3-3",key:"1ibux0"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],que=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 22v-6",key:"qhmiwi"}],["path",{d:"m22 19-3-3-3 3",key:"rn6bg2"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]];var $ue=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]];var Kue=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]];var Gue=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]];var Xue=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]];var Yue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]];var Zue=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]];var Que=[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]];var Jue=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]];var ehe=[["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}],["path",{d:"M9 14 4 9l5-5",key:"102s5s"}]];var the=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]];var nhe=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]];var ihe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],rhe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]];var ohe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]];var she=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]];var ahe=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]];var lhe=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]];var che=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]];var dhe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]];var uhe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]],hhe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fhe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]];var phe=[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]];var mhe=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]];var ghe=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]];var yhe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]];var vhe=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]];var uS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},lj=new $e("LucideIcons",{factory:()=>new hS({})}),hS=class{constructor(t){this.icons=t}getIcon(t){return this.hasIcon(t)?this.icons[t]:null}hasIcon(t){return typeof this.icons=="object"&&t in this.icons}},Aqe=(()=>{class n{constructor(){this.color=uS.stroke,this.size=uS.width,this.strokeWidth=uS["stroke-width"],this.absoluteStrokeWidth=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dqe(n,t=3){return parseFloat(n.toFixed(t)).toString(10)}var xr=(()=>{class n{constructor(e,i,r,o,s){this.elem=e,this.renderer=i,this.changeDetector=r,this.iconProviders=o,this.iconConfig=s,this.absoluteStrokeWidth=!1,this.defaultSize=uS.height}get size(){return this._size??this.iconConfig.size}set size(e){e?this._size=this.parseNumber(e):delete this._size}get strokeWidth(){return this._strokeWidth??this.iconConfig.strokeWidth}set strokeWidth(e){e?this._strokeWidth=this.parseNumber(e):delete this._strokeWidth}ngOnChanges(e){if(e.name||e.img||e.color||e.size||e.absoluteStrokeWidth||e.strokeWidth||e.class){this.color=this.color??this.iconConfig.color,this.size=this.parseNumber(this.size??this.iconConfig.size),this.strokeWidth=this.parseNumber(this.strokeWidth??this.iconConfig.strokeWidth),this.absoluteStrokeWidth=this.absoluteStrokeWidth??this.iconConfig.absoluteStrokeWidth;let i=this.img??this.name;if(typeof i=="string"){let r=this.getIcon(this.toPascalCase(i));if(r)this.replaceElement(r);else throw new Error(`The "${i}" icon has not been provided by any available icon providers.`)}else if(Array.isArray(i))this.replaceElement(i);else throw new Error("No icon name or image has been provided.")}this.changeDetector.markForCheck()}replaceElement(e){let i=Ge(le({},uS),{width:this.size,height:this.size,stroke:this.color??this.iconConfig.color,"stroke-width":this.absoluteStrokeWidth?Dqe(this.strokeWidth/(this.size/this.defaultSize)):this.strokeWidth.toString(10)}),r=this.createElement(["svg",i,e]);r.classList.add("lucide"),typeof this.name=="string"&&r.classList.add(`lucide-${this.name.replace("_","-")}`),this.class&&r.classList.add(...this.class.split(/ /).map(s=>s.trim()).filter(s=>s.length>0));let o=this.elem.nativeElement.childNodes;for(let s of o)this.renderer.removeChild(this.elem.nativeElement,s);this.renderer.appendChild(this.elem.nativeElement,r)}toPascalCase(e){return e.replace(/(\w)([a-z0-9]*)(_|-|\s*)/g,(i,r,o)=>r.toUpperCase()+o.toLowerCase())}parseNumber(e){if(typeof e=="string"){let i=parseInt(e,10);if(isNaN(i))throw new Error(`${e} is not numeric.`);return i}return e}getIcon(e){for(let i of Array.isArray(this.iconProviders)?this.iconProviders:[this.iconProviders])if(i.hasIcon(e))return i.getIcon(e);return null}createElement([e,i,r=[]]){let o=this.renderer.createElement(e,"http://www.w3.org/2000/svg");return Object.keys(i).forEach(s=>{let a=typeof i[s]=="string"?i[s]:i[s].toString(10);this.renderer.setAttribute(o,s,a)}),r.length&&r.forEach(s=>{let a=this.createElement(s);this.renderer.appendChild(o,a)}),o}}return n.\u0275fac=function(e){return new(e||n)(ut(Kt),ut(dr),ut(vi),ut(lj),ut(Aqe))},n.\u0275cmp=nt({type:n,selectors:[["lucide-angular"],["lucide-icon"],["i-lucide"],["span-lucide"]],inputs:{class:"class",name:"name",img:"img",color:"color",absoluteStrokeWidth:"absoluteStrokeWidth",size:"size",strokeWidth:"strokeWidth"},standalone:!1,features:[or],ngContentSelectors:Eqe,decls:1,vars:0,template:function(e,i){e&1&&(Hr(),Pi(0))},encapsulation:2}),n})(),cj=class{constructor(t){this.icons=t}},Iqe=n=>new hS(n??{}),En=(()=>{class n{static pick(e){return{ngModule:n,providers:[{provide:lj,multi:!0,useValue:new hS(e)},{provide:lj,multi:!0,useFactory:Iqe,deps:[[new Nl,cj]]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=zt({type:n}),n.\u0275inj=Vt({imports:[[]]}),n})();var dj;try{dj=typeof Intl<"u"&&Intl.v8BreakIterator}catch{dj=!1}var Pr=(()=>{class n{_platformId=N(Mh);isBrowser=this._platformId?rY(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||dj)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uj;function _he(){if(uj==null){let n=typeof document<"u"?document.head:null;uj=!!(n&&(n.createShadowRoot||n.attachShadow))}return uj}function T1(n){if(_he()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function fS(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function rs(n){return n.composedPath?n.composedPath()[0]:n.target}function hj(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var m8=new WeakMap,qo=(()=>{class n{_appRef;_injector=N(tn);_environmentInjector=N(Ur);load(e){let i=this._appRef=this._appRef||this._injector.get(Ns),r=m8.get(i);r||(r={loaders:new Set,refs:[]},m8.set(i,r),i.onDestroy(()=>{m8.get(i)?.refs.forEach(o=>o.destroy()),m8.delete(i)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(D3(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $o(n){return n==null?"":typeof n=="string"?n:`${n}px`}function c0(n){return Array.isArray(n)?n:[n]}function Pc(n,t=0){return bhe(n)?Number(n):arguments.length===2?t:0}function bhe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function gs(n){return n instanceof Kt?n.nativeElement:n}var Fqe=new $e("cdk-dir-doc",{providedIn:"root",factory:Pqe});function Pqe(){return N(gn)}var Lqe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function whe(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?Lqe.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var ys=(()=>{class n{get value(){return this.valueSignal()}valueSignal=P("ltr");change=new vt;constructor(){let e=N(Fqe,{optional:!0});if(e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.valueSignal.set(whe(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dd=(function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n})(Dd||{}),g8,E1;function y8(){if(E1==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return E1=!1,E1;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)E1=!0;else{let n=Element.prototype.scrollTo;n?E1=!/\{\s*\[native code\]\s*\}/.test(n.toString()):E1=!1}}return E1}function dv(){if(typeof document!="object"||!document)return Dd.NORMAL;if(g8==null){let n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),g8=Dd.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,g8=n.scrollLeft===0?Dd.NEGATED:Dd.INVERTED),n.remove()}return g8}var d0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({})}return n})();var v8=class{};function She(n){return n&&typeof n.connect=="function"&&!(n instanceof Mf)}var _8=class extends v8{_data;constructor(t){super(),this._data=t}connect(){return ph(this._data)?this._data:Wt(this._data)}disconnect(){}},pS=(function(n){return n[n.REPLACED=0]="REPLACED",n[n.INSERTED=1]="INSERTED",n[n.MOVED=2]="MOVED",n[n.REMOVED=3]="REMOVED",n})(pS||{}),fj=new $e("_ViewRepeater"),b8=class{viewCacheSize=20;_viewCache=[];applyChanges(t,e,i,r,o){t.forEachOperation((s,a,l)=>{let c,d;if(s.previousIndex==null){let u=()=>i(s,a,l);c=this._insertView(u,l,e,r(s)),d=c?pS.INSERTED:pS.REPLACED}else l==null?(this._detachAndCacheView(a,e),d=pS.REMOVED):(c=this._moveView(a,l,e,r(s)),d=pS.MOVED);o&&o({context:c?.context,operation:d,record:s})})}detach(){for(let t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,e,i,r){let o=this._insertViewFromCache(e,i);if(o){o.context.$implicit=r;return}let s=t();return i.createEmbeddedView(s.templateRef,s.context,s.index)}_detachAndCacheView(t,e){let i=e.detach(t);this._maybeCacheView(i,e)}_moveView(t,e,i,r){let o=i.get(t);return i.move(o,e),o.context.$implicit=r,o}_maybeCacheView(t,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{let i=e.indexOf(t);i===-1?t.destroy():e.remove(i)}}_insertViewFromCache(t,e){let i=this._viewCache.pop();return i&&e.insert(i,t),i||null}};var Rqe=["contentWrapper"],Oqe=["*"],khe=new $e("VIRTUAL_SCROLL_STRATEGY"),pj=class{_scrolledIndexChange=new Xe;scrolledIndexChange=this._scrolledIndexChange.pipe(Zc());_viewport=null;_itemSize;_minBufferPx;_maxBufferPx;constructor(t,e,i){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,i){i<e,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;let t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},i=this._viewport.getViewportSize(),r=this._viewport.getDataLength(),o=this._viewport.measureScrollOffset(),s=this._itemSize>0?o/this._itemSize:0;if(e.end>r){let l=Math.ceil(i/this._itemSize),c=Math.max(0,Math.min(s,r-l));s!=c&&(s=c,o=c*this._itemSize,e.start=Math.floor(s)),e.end=Math.max(0,Math.min(r,e.start+l))}let a=o-e.start*this._itemSize;if(a<this._minBufferPx&&e.start!=0){let l=Math.ceil((this._maxBufferPx-a)/this._itemSize);e.start=Math.max(0,e.start-l),e.end=Math.min(r,Math.ceil(s+(i+this._minBufferPx)/this._itemSize))}else{let l=e.end*this._itemSize-(o+i);if(l<this._minBufferPx&&e.end!=r){let c=Math.ceil((this._maxBufferPx-l)/this._itemSize);c>0&&(e.end=Math.min(r,e.end+c),e.start=Math.max(0,Math.floor(s-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(Math.round(this._itemSize*e.start)),this._scrolledIndexChange.next(Math.floor(s))}};function Nqe(n){return n._scrollStrategy}var mj=(()=>{class n{get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=Pc(e)}_itemSize=20;get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Pc(e)}_minBufferPx=100;get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Pc(e)}_maxBufferPx=200;_scrollStrategy=new pj(this.itemSize,this.minBufferPx,this.maxBufferPx);ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[Zi([{provide:khe,useFactory:Nqe,deps:[ds(()=>n)]}]),or]})}return n})(),Bqe=20,df=(()=>{class n{_ngZone=N(Pt);_platform=N(Pr);_renderer=N(xo).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Xe;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Bqe){return this._platform.isBrowser?new jn(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=e>0?this._scrolled.pipe(v_(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Wt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(rr(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_scrollableContainsElement(e,i){let r=gs(i),o=e.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gj=(()=>{class n{elementRef=N(Kt);scrollDispatcher=N(df);ngZone=N(Pt);dir=N(ys,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new Xe;_renderer=N(dr);_cleanupScroll;_elementScrolled=new Xe;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&dv()!=Dd.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),dv()==Dd.INVERTED?e.left=e.right:dv()==Dd.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;y8()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",r="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return e=="start"?e=s?r:i:e=="end"&&(e=s?i:r),s&&dv()==Dd.INVERTED?e==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&dv()==Dd.NEGATED?e==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),Vqe=20,Zl=(()=>{class n{_platform=N(Pr);_listeners;_viewportSize;_change=new Xe;_document=N(gn);constructor(){let e=N(Pt),i=N(xo).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect(),s=-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(e=Vqe){return e>0?this._change.pipe(v_(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Che=new $e("VIRTUAL_SCROLLABLE"),Uqe=(()=>{class n extends gj{constructor(){super()}measureViewportSize(e){let i=this.elementRef.nativeElement;return e==="horizontal"?i.clientWidth:i.clientHeight}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,features:[Lt]})}return n})();function jqe(n,t){return n.start==t.start&&n.end==t.end}var Hqe=typeof requestAnimationFrame<"u"?g_:kI,uv=(()=>{class n extends Uqe{elementRef=N(Kt);_changeDetectorRef=N(vi);_scrollStrategy=N(khe,{optional:!0});scrollable=N(Che,{optional:!0});_platform=N(Pr);_detachedSubject=new Xe;_renderedRangeSubject=new Xe;get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}_orientation="vertical";appendOnly=!1;scrolledIndexChange=new jn(e=>this._scrollStrategy.scrolledIndexChange.subscribe(i=>Promise.resolve().then(()=>this.ngZone.run(()=>e.next(i)))));_contentWrapper;renderedRangeStream=this._renderedRangeSubject;_totalContentSize=0;_totalContentWidth=P("");_totalContentHeight=P("");_renderedContentTransform;_renderedRange={start:0,end:0};_dataLength=0;_viewportSize=0;_forOf;_renderedContentOffset=0;_renderedContentOffsetNeedsRewrite=!1;_changeDetectionNeeded=P(!1);_runAfterChangeDetection=[];_viewportChanges=qn.EMPTY;_injector=N(tn);_isDestroyed=!1;constructor(){super();let e=N(Zl);this._scrollStrategy,this._viewportChanges=e.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this);let i=rd(()=>{this._changeDetectionNeeded()&&this._doChangeDetection()},{injector:N(Ns).injector});N(Zt).onDestroy(()=>void i.destroy())}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Co(null),v_(0,Hqe),fn(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),this._isDestroyed=!0,super.ngOnDestroy()}attach(e){this._forOf,this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(fn(this._detachedSubject)).subscribe(i=>{let r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){jqe(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){e=this.appendOnly&&i==="to-start"?0:e;let r=this.dir&&this.dir.value=="rtl",o=this.orientation=="horizontal",s=o?"X":"Y",l=`translate${s}(${Number((o&&r?-1:1)*e)}px)`;this._renderedContentOffset=e,i==="to-end"&&(l+=` translate${s}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){let r={behavior:i};this.orientation==="horizontal"?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){let i;return this.scrollable==this?i=r=>super.measureScrollOffset(r):i=r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(e??(this.orientation==="horizontal"?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let i,r="left",o="right",s=this.dir?.value=="rtl";e=="start"?i=s?o:r:e=="end"?i=s?r:o:e?i=e:i=this.orientation==="horizontal"?"left":"top";let a=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-a}measureRenderedContentSize(){let e=this._contentWrapper.nativeElement;return this.orientation==="horizontal"?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),!ko(this._changeDetectionNeeded)&&this.ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this.ngZone.run(()=>{this._changeDetectionNeeded.set(!0)})})})}_doChangeDetection(){this._isDestroyed||this.ngZone.run(()=>{this._changeDetectorRef.markForCheck(),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,Zo(()=>{this._changeDetectionNeeded.set(!1);let e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(let i of e)i()},{injector:this._injector})})}_calculateSpacerSize(){this._totalContentHeight.set(this.orientation==="horizontal"?"":`${this._totalContentSize}px`),this._totalContentWidth.set(this.orientation==="horizontal"?`${this._totalContentSize}px`:"")}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(i,r){if(i&1&&Et(Rqe,7),i&2){let o;_t(o=bt())&&(r._contentWrapper=o.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(i,r){i&2&&Ue("cdk-virtual-scroll-orientation-horizontal",r.orientation==="horizontal")("cdk-virtual-scroll-orientation-vertical",r.orientation!=="horizontal")},inputs:{orientation:"orientation",appendOnly:[2,"appendOnly","appendOnly",Fn]},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[Zi([{provide:gj,useFactory:(e,i)=>e||i,deps:[[new Nl,new F9(Che)],n]}]),Lt],ngContentSelectors:Oqe,decls:4,vars:4,consts:[["contentWrapper",""],[1,"cdk-virtual-scroll-content-wrapper"],[1,"cdk-virtual-scroll-spacer"]],template:function(i,r){i&1&&(Hr(),Ho(0,"div",1,0),Pi(2),Qo(),Bs(3,"div",2)),i&2&&(_(3),In("width",r._totalContentWidth())("height",r._totalContentHeight()))},styles:[`cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}
`],encapsulation:2,changeDetection:0})}return n})();function xhe(n,t,e){let i=e;if(!i.getBoundingClientRect)return 0;let r=i.getBoundingClientRect();return n==="horizontal"?t==="start"?r.left:r.right:t==="start"?r.top:r.bottom}var yj=(()=>{class n{_viewContainerRef=N(Dr);_template=N(ra);_differs=N(ub);_viewRepeater=N(fj);_viewport=N(uv,{skipSelf:!0});viewChange=new Xe;_dataSourceChanges=new Xe;get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,She(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new _8(ph(e)?e:Array.from(e||[])))}_cdkVirtualForOf;get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(i,r)=>e(i+(this._renderedRange?this._renderedRange.start:0),r):void 0}_cdkVirtualForTrackBy;set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=Pc(e)}dataStream=this._dataSourceChanges.pipe(Co(null),Pf(),yo(([e,i])=>this._changeDataSource(e,i)),Lf(1));_differ=null;_data;_renderedItems;_renderedRange;_needsUpdate=!1;_destroyed=new Xe;constructor(){let e=N(Pt);this.dataStream.subscribe(i=>{this._data=i,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(fn(this._destroyed)).subscribe(i=>{this._renderedRange=i,this.viewChange.observers.length&&e.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}measureRangeSize(e,i){if(e.start>=e.end)return 0;e.start<this._renderedRange.start||e.end>this._renderedRange.end;let r=e.start-this._renderedRange.start,o=e.end-e.start,s,a;for(let l=0;l<o;l++){let c=this._viewContainerRef.get(l+r);if(c&&c.rootNodes.length){s=a=c.rootNodes[0];break}}for(let l=o-1;l>-1;l--){let c=this._viewContainerRef.get(l+r);if(c&&c.rootNodes.length){a=c.rootNodes[c.rootNodes.length-1];break}}return s&&a?xhe(i,"end",a)-xhe(i,"start",s):0}ngDoCheck(){if(this._differ&&this._needsUpdate){let e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,i)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,i):i)),this._needsUpdate=!0)}_changeDataSource(e,i){return e&&e.disconnect(this),this._needsUpdate=!0,i?i.connect(this):Wt()}_updateContext(){let e=this._data.length,i=this._viewContainerRef.length;for(;i--;){let r=this._viewContainerRef.get(i);r.context.index=this._renderedRange.start+i,r.context.count=e,this._updateComputedContextProperties(r.context),r.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(o,s,a)=>this._getEmbeddedViewArgs(o,a),o=>o.item),e.forEachIdentityChange(o=>{let s=this._viewContainerRef.get(o.currentIndex);s.context.$implicit=o.item});let i=this._data.length,r=this._viewContainerRef.length;for(;r--;){let o=this._viewContainerRef.get(r);o.context.index=this._renderedRange.start+r,o.context.count=i,this._updateComputedContextProperties(o.context)}}_updateComputedContextProperties(e){e.first=e.index===0,e.last=e.index===e.count-1,e.even=e.index%2===0,e.odd=!e.even}_getEmbeddedViewArgs(e,i){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:i}}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[Zi([{provide:fj,useClass:b8}])]})}return n})();var Yl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({})}return n})(),A1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[d0,Yl,d0,Yl]})}return n})();var mS=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},D1=class extends mS{component;viewContainerRef;injector;projectableNodes;constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.projectableNodes=r}},Lc=class extends mS{templateRef;viewContainerRef;context;injector;constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},vj=class extends mS{element;constructor(t){super(),this.element=t instanceof Kt?t.nativeElement:t}},w8=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof D1)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Lc)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof vj)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},S8=class extends w8{outletElement;_appRef;_defaultInjector;constructor(t,e,i){super(),this.outletElement=t,this._appRef=e,this._defaultInjector=i}attachComponentPortal(t){let e;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,r=i.get(su,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let i=this._appRef,r=t.injector||this._defaultInjector||tn.NULL,o=r.get(Ur,i.injector);e=D3(t.component,{elementInjector:r,environmentInjector:o,projectableNodes:t.projectableNodes||void 0}),i.attachView(e.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}attachDomPortal=t=>{let e=t.element;e.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var _j=(()=>{class n extends w8{_moduleRef=N(su,{optional:!0});_document=N(gn);_viewContainerRef=N(Dr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new vt;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,r=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let r=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Lt]})}return n})();var C8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({})}return n})();var bj={},Xs=(()=>{class n{_appId=N(Kf);getId(e){return this._appId!=="ng"&&(e+=this._appId),bj.hasOwnProperty(e)||(bj[e]=0),`${e}${bj[e]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tl(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Mhe=y8();function Cj(n){return new x8(n.get(Zl),n.get(gn))}var x8=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=$o(-this._previousScrollPosition.left),t.style.top=$o(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Mhe&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Mhe&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};function Phe(n,t){return new k8(n.get(df),n.get(Pt),n.get(Zl),t)}var k8=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(rr(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var gS=class{enable(){}disable(){}attach(){}};function wj(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,o=n.right<e.left,s=n.left>e.right;return i||r||o||s})}function The(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,o=n.left<e.left,s=n.right>e.right;return i||r||o||s})}function wa(n,t){return new M8(n.get(df),n.get(Zl),n.get(Pt),t)}var M8=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();wj(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Lhe=(()=>{class n{_injector=N(tn);constructor(){}noop=()=>new gS;close=e=>Phe(this._injector,e);block=()=>Cj(this._injector);reposition=e=>wa(this._injector,e);static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),F1=class{positionStrategy;scrollStrategy=new gS;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var T8=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Rhe=(()=>{class n{_attachedOverlays=[];_document=N(gn);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ohe=(()=>{class n extends Rhe{_ngZone=N(Pt);_renderer=N(xo).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nhe=(()=>{class n extends Rhe{_platform=N(Pr);_ngZone=N(Pt);_renderer=N(xo).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let i=this._document.body,r={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,r),o.listen(i,"click",this._clickListener,r),o.listen(i,"auxclick",this._clickListener,r),o.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=rs(e)};_clickListener=e=>{let i=rs(e),r=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Ehe(a.overlayElement,i)||Ehe(a.overlayElement,r))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=Os(n)))(r||n)}})();static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ehe(n,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===n)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Bhe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return n})(),Vhe=(()=>{class n{_platform=N(Pr);_containerElement;_document=N(gn);_styleLoader=N(qo);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||hj()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(e),hj()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(Bhe)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sj=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,e,i,r){this._renderer=e,this._ngZone=i,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},E8=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Xe;_attachments=new Xe;_detachments=new Xe;_positionStrategy;_scrollStrategy;_locationChanges=qn.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Xe;_outsidePointerEvents=new Xe;_afterNextRenderRef;constructor(t,e,i,r,o,s,a,l,c,d=!1,u,h){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._injector=u,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Zo(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=le(le({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Ge(le({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=$o(this._config.width),t.height=$o(this._config.height),t.minWidth=$o(this._config.minWidth),t.minHeight=$o(this._config.minHeight),t.maxWidth=$o(this._config.maxWidth),t.maxHeight=$o(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new Sj(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,e,i){let r=c0(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=Zo(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(e){if(t)throw e;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},Ahe="cdk-overlay-connected-position-bounding-box",Wqe=/([A-Za-z%]+)$/;function P1(n,t){return new yS(t,n.get(Zl),n.get(gn),n.get(Pr),n.get(Vhe))}var yS=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Xe;_resizeSubscription=qn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Ahe),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),d=this._getOverlayFit(c,e,i,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(d,c,i)){o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(let c of o){let d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&I1(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ahe),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?s:a}e.left<0&&(r-=e.left);let o;return i.originY=="center"?o=t.top+t.height/2:o=i.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,i,r){let o=Ihe(e),{x:s,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let d=0-s,u=s+o.width-i.width,h=0-a,f=a+o.height-i.height,p=this._subtractOverflows(o.width,d,u),y=this._subtractOverflows(o.height,h,f),v=p*y;return{visibleArea:v,isCompletelyWithinViewport:o.width*o.height===v,fitsInViewportVertically:y===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,o=i.right-e.x,s=Dhe(this._overlayRef.getConfig().minHeight),a=Dhe(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||s!=null&&s<=r,c=t.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=Ihe(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-i.top-t.y,0),c=Math.max(o.left-i.left-t.x,0),d=0,u=0;return r.width<=o.width?d=c||-s:d=t.x<this._viewportMargin?o.left-i.left-t.x:0,r.height<=o.height?u=l||-a:u=t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!zqe(this._lastScrollVisibility,i)){let r=new T8(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(e.overlayY==="top")s=t.y,o=i.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-t.y+i.top,t.y),p=this._lastBoundingBoxSize.height;o=f*2,s=t.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-p/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,c=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,d,u,h;if(c)h=i.width-t.x+this._viewportMargin*2,d=t.x-this._viewportMargin;else if(l)u=t.x,d=i.right-t.x;else{let f=Math.min(i.right-t.x+i.left,t.x),p=this._lastBoundingBoxSize.width;d=f*2,u=t.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-p/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=$o(i.height),r.top=$o(i.top),r.bottom=$o(i.bottom),r.width=$o(i.width),r.left=$o(i.left),r.right=$o(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=$o(o)),s&&(r.maxWidth=$o(s))}this._lastBoundingBoxSize=i,I1(this._boundingBox.style,r)}_resetBoundingBoxStyles(){I1(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){I1(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();I1(i,this._getExactOverlayY(e,t,d)),I1(i,this._getExactOverlayX(e,t,d))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=$o(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=$o(s.maxWidth):o&&(i.maxWidth="")),I1(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=$o(o.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=$o(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:The(t,i),isOriginOutsideView:wj(t,i),isOverlayClipped:The(e,i),isOverlayOutsideView:wj(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&c0(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof Kt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function I1(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Dhe(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(Wqe);return!e||e==="px"?parseFloat(t):null}return n||null}function Ihe(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function zqe(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var Fhe="cdk-global-overlay-wrapper";function xj(n){return new A8}var A8=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Fhe),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",y="";l?y="flex-start":d==="center"?(y="center",h?p=u:f=u):h?d==="left"||d==="end"?(y="flex-end",f=u):(d==="right"||d==="start")&&(y="flex-start",p=u):d==="left"||d==="start"?(y="flex-start",f=u):(d==="right"||d==="end")&&(y="flex-end",p=u),t.position=this._cssPosition,t.marginLeft=l?"0":f,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":p,e.justifyContent=y,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Fhe),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Uhe=(()=>{class n{_injector=N(tn);constructor(){}global(){return xj()}flexibleConnectedTo(e){return P1(this._injector,e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function L1(n,t){n.get(qo).load(Bhe);let e=n.get(Vhe),i=n.get(gn),r=n.get(Xs),o=n.get(Ns),s=n.get(ys),a=i.createElement("div"),l=i.createElement("div");l.id=r.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),e.getContainerElement().appendChild(a);let c=new S8(l,o,n),d=new F1(t),u=n.get(dr,null,{optional:!0})||n.get(xo).createRenderer(null,null);return d.direction=d.direction||s.value,new E8(c,a,l,d,n.get(Pt),n.get(Ohe),i,n.get(cu),n.get(Nhe),t?.disableAnimations??n.get(Gf,null,{optional:!0})==="NoopAnimations",n.get(Ur),u)}var Xu=(()=>{class n{scrollStrategies=N(Lhe);_positionBuilder=N(Uhe);_injector=N(tn);constructor(){}create(e){return L1(this._injector,e)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qqe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],jhe=new $e("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=N(tn);return()=>wa(n)}}),hv=(()=>{class n{elementRef=N(Kt);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return n})(),D8=(()=>{class n{_dir=N(ys,{optional:!0});_injector=N(tn);_overlayRef;_templatePortal;_backdropSubscription=qn.EMPTY;_attachSubscription=qn.EMPTY;_detachSubscription=qn.EMPTY;_positionSubscription=qn.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=N(jhe);_disposeOnNavigation=!1;_ngZone=N(Pt);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new vt;positionChange=new vt;attach=new vt;detach=new vt;overlayKeydown=new vt;overlayOutsideClick=new vt;constructor(){let e=N(ra),i=N(Dr);this._templatePortal=new Lc(e,i),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=qqe);let e=this._overlayRef=L1(this._injector,this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!Tl(i)&&(i.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{let r=this._getOriginElement(),o=rs(i);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(i)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new F1({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){let i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=P1(this._injector,this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof hv?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof hv?this.origin.elementRef.nativeElement:this.origin instanceof Kt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(II(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Fn],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Fn],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Fn],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Fn],push:[2,"cdkConnectedOverlayPush","push",Fn],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Fn]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[or]})}return n})();function $qe(n){let t=N(tn);return()=>wa(t)}var Kqe={provide:jhe,useFactory:$qe},Mn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[Xu,Kqe],imports:[d0,C8,A1,A1]})}return n})();var Is=_i(Ki());var O8=_i(vd());var hn=class n{constructor(t,e){this.sanitizer=t;this.xrplService=e}txHash=null;txHashes=[];isError=!1;isSuccess=!1;result="";spinnerMessage="";toastId=0;errorMessageSignal=P(null);amountField=P("");destinationTagField=P("");invoiceIdField=P("");sourceTagField=P("");isMemoEnabled=P(!1);useMultiSign=P(!1);isRegularKeyAddress=P(!1);isTicket=P(!1);isSimulateEnabled=P(!1);masterKeyDisabled=P(!1);depositAuthEnabled=P(!1);isdepositAuthAddress=P(!1);isNFTokenMinterEnabled=P(!1);nfTokenMinterAddress=P("");isUpdateMetaData=P(!1);isHolderConfiguration=P(!1);isExchangerConfiguration=P(!1);isIssuerConfiguration=P(!1);isAuthorizedNFTokenMinter=P(!1);depositAuthAddress=P("");tickSize=P("");transferRate=P("");isMessageKey=P(!1);domain=P("");avatarUrl=P("");userEmail=P("");memoField=P("");multiSignAddress=P("");multiSignSeeds=P("");signerQuorum=P(0);regularKeyAddress=P("");regularKeySeed=P("");selectedSingleTicket=P("");selectedTickets=P([]);multiSelectMode=P(!1);ticketArray=P([]);regularKeySigningEnabled=P(!1);multiSigningEnabled=P(!1);signers=P([{Account:"",seed:"",SignerWeight:1}]);depositAuthAddresses=P([{account:""}]);spinner=P(!1);currentWallet=P({});toasts=P([]);paymentTxSignal=P([]);txSignal=P([]);txResultSignal=P([]);txHashSignal=P([]);successMessageSignal=P("");spinnerMessageSignal=P("");executionTime=P("");url=P("");domainId=P("");explorerUrl=_e(()=>{let t=this.xrplService.getNet().environment.toUpperCase();return Re.XRPL_WIN_URL[t]||Re.XRPL_WIN_URL.DEVNET});_infoData=new bi(null);infoData$=this._infoData.asObservable();setInfoData(t){this._infoData.next(t)}setPaymentTxSignal(t){this.paymentTxSignal.set(Array.isArray(t)?t:[t])}setTxSignal(t){this.txSignal.set(Array.isArray(t)?t:[t])}setTxResultSignal(t){this.txResultSignal.set(Array.isArray(t)?t:[t])}addTxResultSignal(t){this.txResultSignal.update(e=>[...e,t])}setExecutionTime(t){this.executionTime.set(t)}addTxHashSignal(t){this.txHashSignal.update(e=>[...e,t])}addTxSignal(t){this.txSignal.update(e=>[...e,t])}addPaymentTxSignal(t){this.paymentTxSignal.update(e=>[...e,t])}clearTxSignal(){this.txSignal.set([])}clearTxResultSignal(){this.txResultSignal.set([])}clearTxHashSignal(){this.txHashSignal.set([])}addSignersSignal(t){this.signers.update(e=>[...e,t])}removeSignerSignal(t){this.signers.update(e=>e.filter((i,r)=>r!==t))}addDepositAuthAddressesSignal(t){this.depositAuthAddresses.update(e=>[...e,t])}removeDepositAuthAddressesSignal(t){this.depositAuthAddresses.update(e=>e.filter((i,r)=>r!==t))}setUrl(){let t=this.xrplService.getNet().environment.toUpperCase();this.url.set(Re.XRPL_WIN_URL[t]||Re.XRPL_WIN_URL.DEVNET)}getUrl(){return this.url()}paymentTx=[];txResult=[];txErrorHashes=[];_safeInfo="";_safeWarning="";_infoMessage=null;_warningMessage=null;successMessage=null;errorMessage=null;setPaymentTx(t){this.paymentTx=[...this.paymentTx,t]}setTxResult(t){this.txResult=[...this.txResult,t]}toggleSimulate(t){this.isSimulateEnabled.set(t),this.txHash=null,this.txHashes=[],this.paymentTxSignal.set([]),this.txSignal.set([]),this.txResultSignal.set([]),this.successMessageSignal.set(""),this.successMessage=null,this.errorMessage=null,this.errorMessageSignal.set(null),this.clearMessages()}clearMessages(){this.result="",this.isError=!1,this.isSuccess=!1,this.txHash="",this.txHashes=[],this.txResult=[],this.txErrorHashes=[],this.paymentTx=[],this.successMessage=""}allowOnly(t,e){if(!e)return"";let i=e;e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let r=t.filter(o=>o!=="br");if(r.length>0){let o=new RegExp(`&lt;(${r.join("|")})\\b[^&]*&gt;(.*?)&lt;/\\1&gt;`,"gi");i=i.replace(o,"<$1>$2</$1>")}return i=i.replace(/&lt;br\s*\/?&gt;/gi,"<br>"),i=i.replace(/&lt;a\s+href="([^"]*)"[^&]*&gt;([^&]*)&lt;\/a&gt;/gi,'<a href="$1" target="_blank" rel="noopener noreferrer" class="xrpl-win-link">$2</a>'),this.sanitizer.bypassSecurityTrustHtml(i)}get infoMessage(){return this._infoMessage}get warningMessage(){return this._warningMessage}setInfoMessage(t){this._infoMessage=t,this._safeInfo=t?this.allowOnly(["code","strong","b","em","br","a","ul","li"],t):""}setWarning(t){this._warningMessage=t,this._safeWarning=t?this.allowOnly(["code","strong","b","em","br","a","ul","li"],t):""}get safeInfo(){return this._safeInfo}get safeWarning(){return this._safeWarning}clearWarning(){this.setWarning(null)}showSpinnerWithDelay(t,e=200){return z(this,null,function*(){this.spinner.set(!0),this.updateSpinnerMessage(t),yield new Promise(i=>setTimeout(i,e))})}updateSpinnerMessage(t){this.spinnerMessage=t}updateSpinnerMessageSignal(t){this.spinnerMessageSignal.set(t)}showToastMessage(t,e=3e3){let i=++this.toastId,r={id:i,message:t,duration:e};this.toasts.update(o=>[...o,r]),console.log("Toasts: ",this.toasts()),setTimeout(()=>{this.toasts.update(o=>o.filter(s=>s.id!==i))},e)}clearAllToasts(){this.toasts.set([])}setSuccess(t,e){this.setSuccessProperties(),this.handleTransactionResult({result:`${t}`,isError:this.isError,isSuccess:this.isSuccess}),this.successMessage=t,this.errorMessage=null,this.errorMessageSignal.set(null),this.txHash=this.isSimulateEnabled?null:e||null}setSuccessProperties(){this.isSuccess=!0,this.isError=!1,this.spinner.set(!1)}setError(t,e){this.setErrorProperties(),this.handleTransactionResult({result:`${t}`,isError:this.isError,isSuccess:this.isSuccess}),this.errorMessage=t,this.errorMessageSignal.set(t),this.successMessage=null,this.txHash=this.isSimulateEnabled?null:e||null}setErrorProperties(){this.isSuccess=!1,this.isError=!0,this.spinner.set(!1)}handleTransactionResult(t){this.result=t.result,this.isError=t.isError,this.isSuccess=t.isSuccess}getValidationInputs(t){return{wallet:{address:t.wallet.address,seed:t.wallet.seed,subject:t.wallet.name},network:t.network,destination:t.destination,amountXrp:t.amountXrp,paymentXrp:{amount:this.amountField(),destination:t?.paymentXrp?.destination,destinationTag:this.destinationTagField(),sourceTag:this.sourceTagField(),invoiceId:this.invoiceIdField()},multiSign:{enabled:this.useMultiSign(),addresses:this.useMultiSign()?this.multiSignAddress().split(",").map(e=>e.trim()):void 0,seeds:this.useMultiSign()?this.multiSignSeeds().split(",").map(e=>e.trim()):void 0,signerQuorum:this.signerQuorum(),signers:this.signers()},regularKey:{isRegularKey:this.isRegularKeyAddress(),address:this.isRegularKeyAddress()?this.regularKeyAddress():void 0,seed:this.isRegularKeyAddress()?this.regularKeySeed():void 0},ticket:{enabled:this.isTicket(),singleTicket:this.selectedSingleTicket()||void 0,selectedTicket:this.selectedTickets().length>0?this.selectedTickets()[0]:void 0},did:t.did,domain:{domainId:t.domain?.domainId??this.domainId(),date:t.domain?.date},subject:{subject:t.subject?.subject},credentials:{credentialType:t.credentials?.credentialType,subject:t.credentials?.subject,destination:t.credentials?.destination,date:t.credentials?.date,credentialId:t.credentials?.credentialId}}}clearAllFields(){this.amountField.set(""),this.destinationTagField.set(""),this.invoiceIdField.set(""),this.sourceTagField.set(""),this.nfTokenMinterAddress.set(""),this.depositAuthAddress.set(""),this.tickSize.set(""),this.transferRate.set(""),this.isMessageKey.set(!1),this.domain.set(""),this.avatarUrl.set(""),this.userEmail.set(""),this.memoField.set(""),this.regularKeyAddress.set(""),this.regularKeySeed.set(""),this.selectedSingleTicket.set("")}clearAllOptions(){this.isMemoEnabled.set(!1),this.useMultiSign.set(!1),this.isRegularKeyAddress.set(!1),this.regularKeySigningEnabled.set(!1),this.multiSigningEnabled.set(!1),this.isTicket.set(!1),this.isSimulateEnabled.set(!1),this.memoField.set(""),this.selectedSingleTicket.set(""),this.selectedTickets.set([])}clearAllOptionsAndMessages(){this.clearTxAndHash(),this.isTicket.set(!1),this.selectedSingleTicket.set(""),this.selectedTickets.set([]),this.isMemoEnabled.set(!1),this.successMessage=""}clearTxAndHash(){this.errorMessage="",this.errorMessageSignal.set(null),this.updateSpinnerMessageSignal(""),this.clearTxResultSignal(),this.clearTxHashSignal(),this.clearTxSignal(),this.clearMessages()}static \u0275fac=function(e){return new(e||n)(Ye(Ab),Ye(Sr))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gn=class n{constructor(t){this.ui=t}downloadSignTxJson(t){let e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`tx-result-${Date.now()}.json`,r.click(),URL.revokeObjectURL(i)}downloadTxResultSignal(){let t=JSON.stringify(this.ui.txResultSignal(),null,2),e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`tx-result-${Date.now()}.json`,r.click(),URL.revokeObjectURL(i)}downloadTxResult(){let t=JSON.stringify(this.ui.txResult,null,2),e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`tx-result-${Date.now()}.json`,r.click(),URL.revokeObjectURL(i)}downloadTxSignal(){let t=JSON.stringify(this.ui.txSignal(),null,2),e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`payment-tx-${Date.now()}.json`,r.click(),URL.revokeObjectURL(i)}downloadTx(){let t=JSON.stringify(this.ui.paymentTx,null,2),e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`payment-tx-${Date.now()}.json`,r.click(),URL.revokeObjectURL(i)}static \u0275fac=function(e){return new(e||n)(Ye(hn))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vn=class n{constructor(t,e){this.ui=t;this.toast=e}copyAndToast(t,e){let i=typeof t=="string"?t:JSON.stringify(t,null,2);navigator.clipboard.writeText(i).then(()=>{this.toast.success(`${e} copied`)}).catch(()=>{this.toast.error(`Failed to copy ${e}`)})}copyToClipboard(t){console.log("copyAndToast fired for:",performance.now()),navigator.clipboard.writeText(t).then(()=>{this.toast.success("Data copied to clipboard!")}).catch(e=>{console.error("Failed to copy data:",e),this.toast.error("Failed to copy data. Please select and copy manually.")})}copyAddress(t){navigator.clipboard.writeText(t).then(()=>{this.toast.success("Address copied to clipboard!")}).catch(e=>{console.error("Failed to copy address:",e),this.toast.error("Failed to copy address. Please select and copy manually.")})}copySeed(t){navigator.clipboard.writeText(t).then(()=>{this.toast.success("Seed copied to clipboard!")}).catch(e=>{console.error("Failed to copy seed:",e),this.toast.error("Failed to copy. Please select and copy manually.")})}copyTxSignal(){let t=JSON.stringify(this.ui.txSignal(),null,2);navigator.clipboard.writeText(t).then(()=>{this.toast.success("Transaction JSON copied!")}).catch(e=>{console.error("Failed to copy JSON:",e),this.toast.error("Failed to JSON. Please select and copy manually.")})}copyTx(){let t=JSON.stringify(this.ui.paymentTx,null,2);navigator.clipboard.writeText(t).then(()=>{this.toast.success("Transaction JSON copied!")}).catch(e=>{console.error("Failed to copy JSON:",e),this.toast.error("Failed to JSON. Please select and copy manually.")})}copySignTx(t){navigator.clipboard.writeText(t).then(()=>{this.toast.success("Transaction JSON copied!")}).catch(e=>{console.error("Failed to copy JSON:",e),this.toast.error("Failed to JSON. Please select and copy manually.")})}copyTxResultSignal(){let t=JSON.stringify(this.ui.txResultSignal(),null,2);navigator.clipboard.writeText(t).then(()=>{this.toast.success("Transaction Result JSON copied!")}).catch(e=>{console.error("Failed to copy JSON:",e),this.toast.error("Failed to JSON. Please select and copy manually.")})}copyTxResult(){let t=JSON.stringify(this.ui.txResult,null,2);navigator.clipboard.writeText(t).then(()=>{this.toast.success("Transaction Result JSON copied!")}).catch(e=>{console.error("Failed to copy JSON:",e),this.toast.error("Failed to JSON. Please select and copy manually.")})}copySignedTx(t){navigator.clipboard.writeText(t).then(()=>{this.toast.success("Copied Signed Tx to clipboard!")}).catch(e=>{console.error("Failed to copy JSON:",e),this.toast.error("Failed to JSON. Please select and copy manually.")})}static \u0275fac=function(e){return new(e||n)(Ye(hn),Ye(ni))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var u0=_i(Ki());var pv={$schema:"http://json-schema.org/draft-07/schema#",title:"DID Document",type:"object",required:["@context","id","authentication"],properties:{"@context":{oneOf:[{type:"string",const:"https://www.w3.org/ns/did/v1"},{type:"array",items:{type:"string"},minItems:1}]},id:{type:"string",pattern:"^did:[a-z0-9]+:.*$"},verificationMethod:{type:"array",minItems:1,items:{type:"object",required:["id","type","controller"],properties:{id:{type:"string"},type:{type:"string"},controller:{type:"string"},publicKeyBase58:{type:"string"},publicKeyMultibase:{type:"string"}},additionalProperties:!1}},authentication:{type:"array",items:{oneOf:[{type:"string"},{type:"object",properties:{id:{type:"string"},type:{type:"string"},controller:{type:"string"},publicKeyBase58:{type:"string"}},required:["id","type","controller"]}]}},service:{type:"array",items:{type:"object",required:["id","type","serviceEndpoint"],properties:{id:{type:"string"},type:{type:"string"},serviceEndpoint:{oneOf:[{type:"string",format:"uri"},{type:"array",items:{type:"string",format:"uri"},minItems:1}]}},additionalProperties:!1}}},additionalProperties:!1};var ri=class n{constructor(t,e){this.xrplService=t;this.utilsService=e;this.registerBuiltInRules()}rules=new Map;registerRule(t){this.rules.set(t.transactionType,t)}getValueByPath(t,e){if(!(!t||!e))return e.split(".").reduce((i,r)=>i?.[r],t)}validate(t,e){return z(this,null,function*(){let i=this.rules.get(t);if(!i)return[`No validation rules for transaction type: ${t}`];let r=[];if(i.requiredFields)for(let s of i.requiredFields){let a=this.getValueByPath(e.inputs,s);(a==null||a==="")&&r.push(`${this.capitalize(s.split(".")[1])} is required`)}return(yield Promise.all(i.validators.map(s=>Promise.resolve(s(e))))).forEach(s=>s&&r.push(s)),r.filter(Boolean)})}capitalize(t){return t.replace(/([a-z])([A-Z])(?![A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z])/g,"$1 $2").replace(/^./,e=>e.toUpperCase())}requireField(t,e){return i=>i.inputs[t]?null:e||`${this.capitalize(t)} is required`}isValidAddress(t){return e=>{let i=this.getValueByPath(e.inputs,t);return i?i&&!u0.isValidAddress(i)?"Invalid XRP Address":null:`${this.capitalize(t.split(".")[1])} is required`}}notSelf(t,e){return i=>i.inputs[t]&&i.inputs[e]&&i.inputs[t]===i.inputs[e]?"Sender and receiver cannot be the same address":null}numeric(t,e={}){return i=>{let r=i.inputs[t],{min:o,max:s,allowEmpty:a=!1,message:l}=e;if(this.shouldSkipNumericValidation(r)||a&&r==="")return null;let c=parseFloat(r);return isNaN(c)||!isFinite(c)?l||`${this.capitalize(t)} must be a valid number`:o!==void 0&&c<=o?l||`${this.capitalize(t)} must be greater than ${o}`:s!==void 0&&c>s?l||`${this.capitalize(t)} must be ${s} or less`:null}}optionalNumeric(t,e){return this.numeric(t,{min:e,allowEmpty:!0})}isValidNumber(t,e,i,r,o=!1){return s=>z(null,null,function*(){if(t===void 0||o&&t==="")return null;let a=parseFloat(t);return isNaN(a)||!isFinite(a)?`${e} must be a valid number`:i!==void 0&&a<i?`${e} must be greater than or equal to ${i}`:r!==void 0&&a>r?`${e} must be less than or equal to ${r}`:null})}requireDestinationTagIfNeeded(){return t=>z(this,null,function*(){let e=t.inputs.destination;if(!e||!t.client)return null;try{if((yield this.xrplService.getAccountInfo(t.client,e,"validated","")).result.account_flags?.requireDestinationTag&&!t.inputs.destinationTag)return"Destination account requires a destination tag"}catch(i){console.warn("Could not check destination tag requirement:",i)}return null})}validDestinationTag(){return t=>{let e=t.inputs.paymentXrp?.destinationTag;if(!e)return null;let i=Number(e);return isNaN(i)||i<0||i>4294967295||!Number.isInteger(i)?"Destination Tag must be an integer between 0 and 4294967295":null}}validSourceTag(){return t=>{let e=t.inputs.paymentXrp?.sourceTag;if(!e)return null;let i=Number(e);return isNaN(i)||i<0||i>4294967295||!Number.isInteger(i)?"Source Tag must be an integer between 0 and 4294967295":null}}validInvoiceId(){return t=>{let e=t.inputs.paymentXrp?.invoiceId;if(!e)return null;let i=e.toString().replace(/[^0-9a-fA-F]/g,"");return i.length===0?"Invoice ID contains no valid hex characters":i.length>64?"Invoice ID cannot exceed 64 hex characters (256 bits)":null}}requireDestinationTagIfNeededNewDestination(){return t=>z(this,null,function*(){let e=t.inputs.formattedDestination;if(!e||!t.client)return null;try{if((yield this.xrplService.getAccountInfo(t.client,e,"validated","")).result.account_flags?.requireDestinationTag&&!t.inputs.destinationTag)return"Destination account requires a destination tag"}catch(i){console.warn("Could not check destination tag requirement:",i)}return null})}shouldSkipNumericValidation=t=>t==null||t.trim()==="";invoiceId(){return t=>{let e=t.inputs.invoiceId;return e?this.utilsService.validateInput(e)?null:"Invoice ID is invalid (contains disallowed characters)":null}}multiSign(){return t=>{let e=t.inputs.multiSignAddresses,i=t.inputs.multiSignSeeds;if(!e&&!i||!e||!i)return null;let r=this.utilsService.getMultiSignAddress(e),o=this.utilsService.getMultiSignSeeds(i);if(r.length===0)return"At least one signer address is required for multi-signing";if(r.length!==o.length)return"Number of signer addresses must match number of signer seeds";let s=r.find(l=>!u0.isValidAddress(l));return s?`Invalid signer address: ${s}`:o.find(l=>!u0.isValidSecret(l))?"One or more signer seeds are invalid":null}}requireIf(t,e,i){return r=>t(r)&&!r.inputs[e]?i||`${this.capitalize(e)} is required`:null}validAddressIf(t,e){return i=>{let r=i.inputs[e];return t(i)&&r&&!u0.isValidAddress(r)?`${this.capitalize(e)} is not a valid XRP address`:null}}validSecretIf(t,e){return i=>{let r=i.inputs[e];return t(i)&&r&&!u0.isValidSecret(r)?`${this.capitalize(e)} is invalid`:null}}masterKeyDisabledRequiresAltSigning(){return t=>{let i=t.accountInfo?.result?.account_flags?.disableMasterKey===!0,r=!!t.inputs.isRegularKeyAddress,o=!!t.inputs.useMultiSign;return i&&!r&&!o?"Master key is disabled. Must sign with Regular Key or Multi-sign.":null}}ticketValidation(){return t=>{if(!t.inputs.isTicket)return null;if(!t.inputs.selectedSingleTicket)return"Ticket Sequence is required when using a ticket";let e=parseFloat(t.inputs.selectedSingleTicket);return isNaN(e)||e<=0?"Ticket Sequence must be a valid number greater than 0":null}}regularKeySigningValidation(){let t=e=>!!e.inputs.isRegularKeyAddress&&!e.inputs.useMultiSign;return[this.requireIf(t,"regularKeyAddress","Regular Key Address is required"),this.requireIf(t,"regularKeySeed","Regular Key Seed is required"),this.validAddressIf(t,"regularKeyAddress"),this.validSecretIf(t,"regularKeySeed")]}positiveAmount(){return t=>{let e=t.inputs.paymentXrp?.amount;if(e==="")return null;let i=Number(e);return isNaN(i)?"Amount must be a valid number":i<=0?"Amount must be greater than 0":null}}validateDidData(t,e){return i=>{if(!t)return null;let r=this.utilsService.validateAndConvertDidJson(t,pv);return r.success?null:`${e} is invalid: ${r.errors||"Unknown error"}`}}validCurrency(t){return e=>{let i=e.inputs[t];return i?this.utilsService.isValidCurrencyCode(i)?null:`${this.capitalize(t)} must be a valid currency code (3-20 chars or 40-char hex)`:null}}requireIssuerIfNotXRP(t,e){return i=>{let r=i.inputs[t],o=i.inputs[e];return r&&r!=="XRP"&&!o?`${this.capitalize(e)} is required when currency is not XRP`:null}}validIssuerIfProvided(t,e){return i=>{let r=i.inputs[t],o=i.inputs[e];return r&&r!=="XRP"&&o&&!u0.isValidAddress(o)?`${this.capitalize(e)} is not a valid XRP address`:null}}positiveNumber(t){return e=>{let i=e.inputs[t];if(!i)return null;let r=Number(i);return isNaN(r)||r<=0?`${this.capitalize(t)} must be greater than 0`:null}}validOfferSequences(t="offerSequenceField"){return e=>{let i=e.inputs[t];if(!i)return null;let r=i.split(",").map(s=>s.trim()).filter(Boolean);if(r.length===0)return"At least one offer sequence is required";let o=r.find(s=>{let a=parseInt(s,10);return isNaN(a)||a<=0});return o?`Invalid offer sequence: ${o}. Must be positive integers`:null}}notSelfOffer(t){return e=>{let i=e.inputs.senderAddress,r=e.inputs[t];return i&&r&&i===r?"Cannot create offer to yourself":null}}validTradingFee(){return t=>{let e=t.inputs.tradingFeeField;if(!e)return null;let i=Number(e);return isNaN(i)||i<0||i>1e3?"Trading fee must be between 0 and 1000 (inclusive)":null}}requireAtLeastOneAmountForDeposit(){return t=>t.inputs.weWantAmountField||t.inputs.weSpendAmountField?null:"At least one amount must be provided for deposit (single or both assets)"}validLpTokenAmount(t="lpTokenAmountField"){return e=>{let i=e.inputs[t];if(!i)return null;let r=Number(i);return isNaN(r)||r<=0?`${this.capitalize(t)} must be greater than 0`:null}}requireCurrencyPair(){return t=>{let e=t.inputs.firstPoolCurrencyField,i=t.inputs.secondPoolCurrencyField;return!e||!i?"Both currencies in the trading pair are required":e===i?"The two assets in the AMM pool cannot be the same":null}}getSeed(t){return t.inputs.wallet?.seed||t.inputs.regularKey?.seed||(t.inputs.multiSign?.seeds?.length?t.inputs.multiSign.seeds[0]:null)}registerBuiltInRules(){this.registerRule({transactionType:"AccountInfo",requiredFields:["seed","accountInfo"],validators:[t=>t.accountInfo?null:"Account info not loaded"]}),this.registerRule({transactionType:"AccountDelete",requiredFields:["wallet.seed","destination.address"],validators:[this.isValidAddress("destination.address"),this.requireDestinationTagIfNeeded(),t=>{if(!t.accountInfo)return"Account info not loaded";let e=t.accountInfo.result.account_data.Sequence,i=t.currentLedger||0;return i<e+256?`Account is too new. Must wait ~${Math.round((e+256-i)*4/60)} minutes before deletion`:null},t=>{let e=t.accountObjects?.result?.account_objects;if(e&&e.length>0){let i={};for(let o of e){let s=o.LedgerEntryType||"Unknown";i[s]=(i[s]||0)+1}return`Cannot delete account \u2014 active ledger objects detected (${Object.entries(i).map(([o,s])=>`${o}: ${s}`).join(", ")})`}return null},this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"PaymentXrp",requiredFields:["wallet.seed","paymentXrp.amount","paymentXrp.destination"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.positiveAmount(),this.isValidAddress("paymentXrp.destination"),this.requireDestinationTagIfNeededNewDestination(),this.validDestinationTag(),this.validSourceTag(),this.validInvoiceId(),this.optionalNumeric("destinationTag",0),this.optionalNumeric("sourceTag",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.invoiceId()]}),this.registerRule({transactionType:"CreateTicket",requiredFields:["amount"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"DeleteTicket",requiredFields:["deleteTicketSequence"],validators:[this.optionalNumeric("deleteTicketSequence",0),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"DelegateActions",requiredFields:["wallet.seed","destination.address"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address"),this.requireDestinationTagIfNeededNewDestination(),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"PermissionedDomainSet",requiredFields:["wallet.seed","subject.subject","credentials.credentialType"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("subject.subject"),this.requireDestinationTagIfNeededNewDestination(),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"PermissionedDomainDelete",requiredFields:["wallet.seed","domain.domainId"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"DIDSet",requiredFields:["wallet.seed","did.document","did.uri","did.data"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",t=>this.validateDidData(t.inputs.didData,"DID Data")(t),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"DIDdelete",requiredFields:["wallet.seed"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"CredentialCreate",requiredFields:["wallet.seed","credentials.credentialType","credentials.subject","credentials.date"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.isValidAddress("credentials.subject")]}),this.registerRule({transactionType:"CredentialDelete",requiredFields:["wallet.seed","credentials.credentialId"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"CredentialAccept",requiredFields:["wallet.seed","credentials.credentialId"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"CredentialVerify",requiredFields:["wallet.seed","credentials.credentialId"],validators:[t=>{let e=this.getSeed(t);if(e){let{type:i,value:r}=this.utilsService.detectXrpInputType(e);if(r==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"CreateCheck",requiredFields:["seed","amount","destination"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address"),this.requireDestinationTagIfNeededNewDestination(),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.invoiceId()]}),this.registerRule({transactionType:"CashCheck",requiredFields:["seed","amount","checkId"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address"),this.requireDestinationTagIfNeededNewDestination(),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.invoiceId()]}),this.registerRule({transactionType:"CancelCheck",requiredFields:["seed","checkId"],validators:[t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.requireDestinationTagIfNeededNewDestination(),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.invoiceId()]}),this.registerRule({transactionType:"PaymentChannelCreate",requiredFields:["seed","amount","destination","settleDelay"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address"),this.requireDestinationTagIfNeededNewDestination(),this.optionalNumeric("settleDelay",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"PaymentChannelFund",requiredFields:["seed","amount","destination","channelID"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address"),this.requireDestinationTagIfNeededNewDestination(),this.optionalNumeric("channelID",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"PaymentChannelRenew",requiredFields:["seed","amount","destination","channelID"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address"),this.requireDestinationTagIfNeededNewDestination(),this.optionalNumeric("channelID",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"PaymentChannelClaim",requiredFields:["seed","amount","channelID","channelClaimSignatureField","publicKeyField"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.optionalNumeric("channelID",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"PaymentChannelClose",requiredFields:["seed","channelID"],validators:[t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.optionalNumeric("channelID",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"PaymentChannelGenerateCreatorClaimSignature",requiredFields:["seed","amount","channelID","destination"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address"),this.requireDestinationTagIfNeededNewDestination(),this.optionalNumeric("channelID",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"UpdateAccountFlags",requiredFields:["seed"],validators:[t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination"),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),t=>t.inputs.setFlags.length===0&&t.inputs.clearFlags.length===0?"Set Flags and Clear Flags length is 0. No flags selected for update.":null]}),this.registerRule({transactionType:"TrustSet",requiredFields:["currency","issuer","amount"],validators:[t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",t=>Number(t.inputs.amount)<0?"Trust amount cannot be negative":null,this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.isValidAddress("issuer")]}),this.registerRule({transactionType:"RemoveTrustline",requiredFields:["currency","issuer"],validators:[t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.isValidAddress("issuer")]}),this.registerRule({transactionType:"IssueCurrency",requiredFields:["currency","issuer","amount"],validators:[t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",t=>Number(t.inputs.amount)<0?"Trust amount cannot be negative":null,this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.isValidAddress("issuer")]}),this.registerRule({transactionType:"ClawbackTokens",requiredFields:["currency","issuer","amount"],validators:[t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",t=>Number(t.inputs.amount)<0?"Trust amount cannot be negative":null,this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.isValidAddress("issuer")]}),this.registerRule({transactionType:"EscrowOwner",requiredFields:["destination"],validators:[t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address")]}),this.registerRule({transactionType:"CreateTimeBasedEscrow",requiredFields:["seed","amount","destination","finishTime","cancelTime"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.isValidAddress("destination.address"),this.requireDestinationTagIfNeededNewDestination(),this.optionalNumeric("finishTime",0),this.optionalNumeric("cancelTime",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.invoiceId()]}),this.registerRule({transactionType:"FinishTimeBasedEscrow",requiredFields:["seed","escrowSequence"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.requireDestinationTagIfNeededNewDestination(),this.optionalNumeric("escrowSequence",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.invoiceId()]}),this.registerRule({transactionType:"CancelTimeBasedEscrow",requiredFields:["seed","escrowSequence"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.requireDestinationTagIfNeededNewDestination(),this.optionalNumeric("escrowSequence",0),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign(),this.invoiceId()]}),this.registerRule({transactionType:"MptCreate",requiredFields:["seed"],validators:[this.positiveAmount(),t=>{if(t.inputs.seed){let{type:e,value:i}=this.utilsService.detectXrpInputType(t.inputs.seed);if(i==="unknown")return"Account seed is invalid"}return null},t=>t.accountInfo?null:"Account info not loaded",this.optionalNumeric("tokenCountField",0),t=>(t.inputs.assetScaleField&&this.isValidNumber("assetScaleField","Asset scale",0,15),null),t=>(t.inputs.transferFeeField&&this.isValidNumber("transferFeeField","Transfer fee",0,5e4),null),t=>(t.inputs.tokenCountField&&this.isValidNumber("tokenCountField","Transfer fee",0),null),this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"OfferCreate",requiredFields:["weWantAmountField","weSpendAmountField","weWantCurrencyField","weSpendCurrencyField"],validators:[this.positiveNumber("weWantAmountField"),this.positiveNumber("weSpendAmountField"),this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField"),this.notSelfOffer("weWantIssuerField"),this.notSelfOffer("weSpendIssuerField"),t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"OfferCancel",requiredFields:["offerSequenceField"],validators:[this.validOfferSequences("offerSequenceField"),t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"GetOrderBook",requiredFields:["weWantCurrencyField","weSpendCurrencyField"],validators:[this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField")]}),this.registerRule({transactionType:"AMMCreate",requiredFields:["firstPoolAssetAmount","secondPoolAssetAmount","firstPoolCurrencyField","secondPoolCurrencyField","tradingFeeField"],validators:[this.positiveNumber("firstPoolAssetAmount"),this.positiveNumber("secondPoolAssetAmount"),this.numeric("tradingFeeField",{min:0,max:1e3}),this.validCurrency("firstPoolCurrencyField"),this.validCurrency("secondPoolCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("firstPoolCurrencyField","firstPoolIssuerField"),this.requireIssuerIfNotXRP("secondPoolCurrencyField","secondPoolIssuerField"),this.validIssuerIfProvided("firstPoolCurrencyField","firstPoolIssuerField"),this.validIssuerIfProvided("secondPoolCurrencyField","secondPoolIssuerField"),t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"AMMDeposit",requiredFields:["weWantCurrencyField","weSpendCurrencyField"],validators:[this.requireAtLeastOneAmountForDeposit(),t=>t.inputs.weWantAmountField?this.positiveNumber("weWantAmountField")(t):null,t=>t.inputs.weSpendAmountField?this.positiveNumber("weSpendAmountField")(t):null,this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField"),t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"AMMWithdraw",requiredFields:["weWantCurrencyField","weSpendCurrencyField"],validators:[this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField"),t=>t.inputs.weWantAmountField?this.positiveNumber("weWantAmountField")(t):null,t=>t.inputs.weSpendAmountField?this.positiveNumber("weSpendAmountField")(t):null,t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"AMMVote",requiredFields:["weWantCurrencyField","weSpendCurrencyField","tradingFeeField"],validators:[this.numeric("tradingFeeField",{min:0,max:1e3}),this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField"),t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"AMMBid",requiredFields:["weWantCurrencyField","weSpendCurrencyField"],validators:[this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField"),t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"AMMDelete",requiredFields:["weWantCurrencyField","weSpendCurrencyField"],validators:[this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField"),t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"AMMClawback",requiredFields:["lpTokenAmountField","weWantCurrencyField","weSpendCurrencyField"],validators:[this.positiveNumber("lpTokenAmountField"),this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField"),t=>t.accountInfo?.result?.account_flags?.clawbackEnabled?null:"Clawback is not enabled only if the account has the lsfClawback flag set",t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"AMMSwap",requiredFields:["weWantAmountField","weWantCurrencyField","weSpendCurrencyField"],validators:[this.positiveNumber("weWantAmountField"),t=>t.inputs.weSpendAmountField?this.positiveNumber("weSpendAmountField")(t):null,this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField"),t=>t.accountInfo?null:"Account info not loaded",this.masterKeyDisabledRequiresAltSigning(),this.ticketValidation(),...this.regularKeySigningValidation(),this.multiSign()]}),this.registerRule({transactionType:"GetPoolInfo",requiredFields:["weWantCurrencyField","weSpendCurrencyField"],validators:[this.validCurrency("weWantCurrencyField"),this.validCurrency("weSpendCurrencyField"),this.requireCurrencyPair(),this.requireIssuerIfNotXRP("weWantCurrencyField","weWantIssuerField"),this.requireIssuerIfNotXRP("weSpendCurrencyField","weSpendIssuerField"),this.validIssuerIfProvided("weWantCurrencyField","weWantIssuerField"),this.validIssuerIfProvided("weSpendCurrencyField","weSpendIssuerField")]})}static \u0275fac=function(e){return new(e||n)(Ye(Sr),Ye(Gt))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var Whe=_i(Ki());var Xn=class n{constructor(t,e,i,r){this.ngZone=t;this.utilsService=e;this.xrplService=i;this.walletManagerService=r}cachedReserves=null;refreshWallets(t,e,i,r,o){return z(this,null,function*(){console.log("Entering refreshWallets (service)");let s=3e3,a=Date.now();try{let l=e.filter(u=>{let h=!u.lastUpdated||a-u.lastUpdated>s,f=r?r.includes(u.classicAddress??u.address):!0;return h&&f});if(l.length===0){console.debug("No wallets need updating.");return}console.debug(`Refreshing ${l.length} wallet(s)...`);let c;try{c=yield Promise.all(l.map(u=>this.xrplService.getAccountInfo(t,u.classicAddress??u.address,"validated","")))}catch(u){throw new Error(u.message)}this.cachedReserves||(this.cachedReserves=yield this.utilsService.getXrplReserve(t));let d=yield this.ngZone.runOutsideAngular(()=>Promise.all(l.map((u,h)=>z(this,null,function*(){try{let f=c[h],p=u.classicAddress??u.address,y=String(f.result.account_data.Balance),v=Whe.dropsToXrp(y),{ownerCount:b,totalXrpReserves:S}=yield this.utilsService.updateOwnerCountAndReserves(t,f,p),x=parseFloat(String(v))-parseFloat(String(S||"0"));return Ge(le({},u),{ownerCount:b,xrpReserves:S,balance:x.toFixed(6),spendableXrp:x.toFixed(6),lastUpdated:a})}catch(f){return console.error(`Error updating wallet ${u.address}:`,f),u}}))));this.ngZone.run(()=>{d.forEach(h=>{let f=e.findIndex(p=>(p.classicAddress??p.address)===(h.classicAddress??h.address));f!==-1&&this.walletManagerService.updateWallet(f,h)});let u=e[i];if(u){let f=d.find(p=>(p.classicAddress??p.address)===(u.classicAddress??u.address))||u;o?.(e,le({},f))}})}catch(l){throw console.error("Error in refreshWallets:",l),new Error(l.message)}finally{console.log(`Leaving refreshWallets in ${(Date.now()-a).toString()}ms`)}})}static \u0275fac=function(e){return new(e||n)(Ye(Pt),Ye(Gt),Ye(Sr),Ye(un))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ni=class n{_isOpen=new bi(!1);isOpen$=this._isOpen.asObservable();_allItems=[];_allSelectedItems=[];_filtered=new bi([]);_filteredSelectedItems=new bi([]);filtered$=this._filtered.asObservable();filteredSelectedItems$=this._filteredSelectedItems.asObservable();setItems(t){this._allItems=t||[],this._filtered.next(this._allItems)}setSelectedItems(t){this._allSelectedItems=t||[],this._filteredSelectedItems.next(this._allSelectedItems)}openDropdown(){this._isOpen.next(!0)}closeDropdown(){this._isOpen.next(!1)}toggleDropdown(){this._isOpen.next(!this._isOpen.value)}filter(t){if(!t){this._filtered.next(this._allItems);return}let e=t.toLowerCase(),i=this._allItems.filter(r=>(r.name||"").toLowerCase().includes(e)||r.address.toLowerCase().includes(e));this._filtered.next(i)}formatShort(t){if(!t)return"";let e=t.slice(0,6),i=t.slice(-6);return`${e}...${i}`}formatDisplay(t){return t.address?t.name?`${t.name} (${this.formatShort(t.address)})`:this.formatShort(t.address):""}formatDomainId(t){return`${t.slice(0,12)}...${t.slice(-10)}`}formatOfferDisplay(t){return`${t.Sequence}: Taker Gets: ${t.TakerGets} \u2192 Taker Pays: ${t.TakerPays}`}static \u0275fac=function(e){return new(e||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};function R1(n){return n.buttons===0||n.detail===0}function O1(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}function Tj(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return i==="canvas"?$he(n,t):(i==="input"||i==="select"||i==="textarea")&&qhe(n,t),zhe("canvas",n,t,$he),zhe("input, textarea, select",n,t,qhe),t}function zhe(n,t,e,i){let r=t.querySelectorAll(n);if(r.length){let o=e.querySelectorAll(n);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var Qqe=0;function qhe(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${Qqe++}`)}function $he(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function Pj(n){let t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function Ej(n,t,e){let{top:i,bottom:r,left:o,right:s}=n;return e>=i&&e<=r&&t>=o&&t<=s}function Jqe(n,t){let e=t.left<n.left,i=t.left+t.width>n.right,r=t.top<n.top,o=t.top+t.height>n.bottom;return e||i||r||o}function wS(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function Khe(n,t,e,i){let{top:r,right:o,bottom:s,left:a,width:l,height:c}=n,d=l*t,u=c*t;return i>r-u&&i<s+u&&e>a-d&&e<o+d}var I8=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Pj(e)})})}handleScroll(t){let e=rs(t),i=this.positions.get(e);if(!i)return null;let r=i.scrollPosition,o,s;if(e===this._document){let c=this.getViewportScrollPosition();o=c.top,s=c.left}else o=e.scrollTop,s=e.scrollLeft;let a=r.top-o,l=r.left-s;return this.positions.forEach((c,d)=>{c.clientRect&&e!==d&&e.contains(d)&&wS(c.clientRect,a,l)}),r.top=o,r.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function sfe(n,t){let e=n.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function Lj(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function mv(n,t){let e=t?"":"none";Lj(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Ghe(n,t,e){Lj(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function F8(n,t){return t&&t!="none"?n+" "+t:n}function Xhe(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=SS(t.left,t.top)}function SS(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function Yhe(n){let t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function e$e(n){let t=getComputedStyle(n),e=kj(t,"transition-property"),i=e.find(a=>a==="transform"||a==="all");if(!i)return 0;let r=e.indexOf(i),o=kj(t,"transition-duration"),s=kj(t,"transition-delay");return Yhe(o[r])+Yhe(s[r])}function kj(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}var t$e=new Set(["position"]),Aj=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,r,o,s,a,l,c,d){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=r,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=c,this._renderer=d}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),Zhe(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return e$e(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,r;if(i&&t){let o=t.matchSize?this._initialDomRect:null,s=t.viewContainer.createEmbeddedView(i,t.context);s.detectChanges(),r=sfe(s,this._document),this._previewEmbeddedView=s,t.matchSize?Xhe(r,o):r.style.transform=SS(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Tj(this._rootElement),Xhe(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return Lj(r.style,{"pointer-events":"none",margin:Zhe(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},t$e),mv(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}};function Zhe(n){return"showPopover"in n}var n$e={passive:!0},Qhe={passive:!1},i$e={passive:!1,capture:!0},r$e=800,Jhe="cdk-drag-placeholder",efe=new Set(["position"]),Dj=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=P(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new Xe;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=qn.EMPTY;_pointerUpSubscription=qn.EMPTY;_scrollSubscription=qn.EMPTY;_resizeSubscription=qn.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>mv(e,t)))}_disabled=!1;beforeStarted=new Xe;started=new Xe;released=new Xe;ended=new Xe;entered=new Xe;exited=new Xe;dropped=new Xe;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,r,o,s,a){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new I8(i),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>gs(i)),this._handles.forEach(i=>mv(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=gs(t);if(e!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(e,"mousedown",this._pointerDown,Qhe),i.listen(e,"touchstart",this._pointerDown,n$e),i.listen(e,"dragstart",this._nativeDragStart,Qhe)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?gs(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Jqe(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let t=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),i=0,r=0;e.left<t.left?i=t.left-e.left:e.right>t.right&&(i=t.right-e.right),e.top<t.top?r=t.top-e.top:e.bottom>t.bottom&&(r=t.bottom-e.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,a=o+i,l=s+r;this._rootElement.style.transform=SS(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),mv(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),mv(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let r=Math.abs(e.x-this._pickupPositionOnPage.x),o=Math.abs(e.y-this._pickupPositionOnPage.y);if(r+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),l=this._dropContainer;if(!a){this._endDragSequence(t);return}(!l||!l.isDragging()&&!l.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let r=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=i.x-r.x+this._passiveTransform.x,o.y=i.y-r.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){_S(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",o$e,i$e)}),i){let r=this._rootElement,o=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");o.insertBefore(a,r),this._initialTransform=r.style.transform||"",this._preview=new Aj(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,e)),Ghe(r,!1,efe),this._document.body.appendChild(o.replaceChild(s,r)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),r=_S(e),o=!r&&e.button!==0,s=this._rootElement,a=rs(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+r$e>Date.now(),c=r?O1(e):R1(e);if(a&&a.draggable&&e.type==="mousedown"&&e.preventDefault(),i||o||l||c)return;if(this._handles.length){let h=s.style;this._rootElementTapHighlight=h.webkitTapHighlightColor||"",h.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>this._updateOnScroll(h)),this._boundaryElement&&(this._boundaryRect=Pj(this._boundaryElement));let d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let u=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Ghe(this._rootElement,!0,efe),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),o=this._getDragDistance(r),s=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,s,o,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,a),this._dropContainer=o,this._dropContainer.enter(this,t,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=a=>{(!a||this._preview&&rs(a)===this._preview.element&&a.propertyName==="transform")&&(s(),i(),clearTimeout(o))},o=setTimeout(r,e*1.5),s=this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=sfe(this._placeholderRef,this._document)):i=Tj(this._rootElement),i.style.pointerEvents="none",i.classList.add(Jhe),i}_getPointerPositionInElement(t,e,i){let r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():t,s=_S(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),l=s.pageX-o.left-a.left,c=s.pageY-o.top-a.top;return{x:o.left-t.left+l,y:o.top-t.top+c}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=_S(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,o=i.pageY-e.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=o,a.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),d=a.top+s,u=a.bottom-(c-s),h=a.left+o,f=a.right-(l-o);i=tfe(i,h,f),r=tfe(r,d,u)}return{x:i,y:r}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-o.x),a=Math.abs(i-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,mv(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let i=1/this.scale,r=SS(t*i,e*i),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=F8(r,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=SS(t,e);this._preview.setTransform(F8(r,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let o=r.left-i.left,s=i.right-r.right,a=r.top-i.top,l=i.bottom-r.bottom;r.width>i.width?(o>0&&(t+=o),s>0&&(t-=s)):t=0,r.height>i.height?(a>0&&(e+=a),l>0&&(e-=l)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:_S(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=rs(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&wS(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=T1(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return gs(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}_conditionallyInsertAnchor(t,e,i){if(t===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(e===this._initialContainer&&e.hasAnchor){let r=this._anchor??=Tj(this._placeholder);r.classList.remove(Jhe),r.classList.add("cdk-drag-anchor"),r.style.transform="",i?i.before(r):gs(e.element).appendChild(r)}}};function tfe(n,t,e){return Math.max(t,Math.min(e,n))}function _S(n){return n.type[0]==="t"}function o$e(n){n.preventDefault()}function L8(n,t,e){let i=nfe(t,n.length-1),r=nfe(e,n.length-1);if(i===r)return;let o=n[i],s=r<i?-1:1;for(let a=i;a!==r;a+=s)n[a]=n[a+s];n[r]=o}function nfe(n,t){return Math.max(0,Math.min(t,n))}var P8=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,r){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,e,i,r);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(v=>v.drag===t),c=o[s],d=o[l].clientRect,u=c.clientRect,h=l>s?1:-1,f=this._getItemOffsetPx(d,u,h),p=this._getSiblingOffsetPx(l,o,h),y=o.slice();return L8(o,l,s),o.forEach((v,b)=>{if(y[b]===v)return;let S=v.drag===t,x=S?f:p,k=S?t.getPlaceholderElement():v.drag.getRootElement();v.offset+=x;let L=Math.round(v.offset*(1/v.drag.scale));a?(k.style.transform=F8(`translate3d(${L}px, 0, 0)`,v.initialTransform),wS(v.clientRect,0,x)):(k.style.transform=F8(`translate3d(0, ${L}px, 0)`,v.initialTransform),wS(v.clientRect,x,0))}),this._previousSwap.overlaps=Ej(u,e,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:l,currentIndex:s}}enter(t,e,i,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,s=this._activeDraggables,a=s.indexOf(t),l=t.getPlaceholderElement(),c=s[o];if(c===t&&(c=s[o+1]),!c&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(c=s[0]),a>-1&&s.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){let d=c.getRootElement();d.parentElement.insertBefore(l,d),s.splice(o,0,t)}else this._element.appendChild(l),s.push(t);l.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return this._getVisualItemPositions().findIndex(e=>e.drag===t)}getItemAtIndex(t){return this._getVisualItemPositions()[t]?.drag||null}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{wS(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:Pj(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(t,e,i){let r=this.orientation==="horizontal",o=r?e.left-t.left:e.top-t.top;return i===-1&&(o+=r?e.width-t.width:e.height-t.height),o}_getSiblingOffsetPx(t,e,i){let r=this.orientation==="horizontal",o=e[t].clientRect,s=e[t+i*-1],a=o[r?"width":"height"]*i;if(s){let l=r?"left":"top",c=r?"right":"bottom";i===-1?a-=s.clientRect[l]-o[c]:a+=o[l]-s.clientRect[c]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let s=i[i.length-1].clientRect;return r?t>=s.right:e>=s.bottom}else{let s=i[0].clientRect;return r?t<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(t,e,i,r){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===t)return!1;if(r){let c=o?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return o?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,t)?-1:s}},Ij=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let r=e[i];this._relatedNodes.push([r,r.nextSibling])}this.withItems(t)}sort(t,e,i,r){let o=this._getItemIndexFromPointerPosition(t,e,i),s=this._previousSwap;if(o===-1||this._activeItems[o]===t)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===r.x&&s.deltaY===r.y)return null;let l=this.getItemIndex(t),c=t.getPlaceholderElement(),d=a.getRootElement();o>l?d.after(c):d.before(c),L8(this._activeItems,l,o);let u=this._getRootNode().elementFromPoint(e,i);return s.deltaX=r.x,s.deltaY=r.y,s.drag=a,s.overlaps=d===u||d.contains(u),{previousIndex:l,currentIndex:o}}enter(t,e,i,r){let o=this._activeItems.indexOf(t);o>-1&&this._activeItems.splice(o,1);let s=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,i):r;s===-1&&(s=this._getClosestItemIndexToPointer(t,e,i));let a=this._activeItems[s];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(s,0,t),a.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[r,o]=this._relatedNodes[i];r.parentNode===t&&r.nextSibling!==o&&(o===null?t.appendChild(r):o.parentNode===t&&t.insertBefore(r,o))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}getItemAtIndex(t){return this._activeItems[t]||null}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let r=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),o=r?this._activeItems.findIndex(s=>{let a=s.getRootElement();return r===a||a.contains(r)}):-1;return o===-1||!this._sortPredicate(o,t)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=T1(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let r=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==t){let{x:l,y:c}=a.getRootElement().getBoundingClientRect(),d=Math.hypot(e-l,i-c);d<r&&(r=d,o=s)}}return o}},ife=.05,afe=.05,Rc=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(Rc||{}),Qa=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(Qa||{}),Fj=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new Xe;entered=new Xe;exited=new Xe;dropped=new Xe;sorted=new Xe;receivingStarted=new Xe;receivingStopped=new Xe;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=qn.EMPTY;_verticalScrollDirection=Rc.NONE;_horizontalScrollDirection=Qa.NONE;_scrollNode;_stopScrollTimers=new Xe;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o;let s=this.element=gs(t);this._document=i,this.withOrientation("vertical").withElementContainer(s),e.registerDropContainer(this),this._parentPositions=new I8(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,o,s,a,l={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>t.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof P8&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new Ij(this._document,this._dragDropRegistry);else{let e=new P8(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=gs(this.element),i=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}getItemAtIndex(t){return this._isDragging?this._sortStrategy.getItemAtIndex(t):this._draggables[t]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._domRect||!Khe(this._domRect,ife,e,i))return;let o=this._sortStrategy.sort(t,e,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=Rc.NONE,o=Qa.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||i||Khe(s.clientRect,ife,t,e)&&([r,o]=s$e(a,s.clientRect,this._direction,t,e),(r||o)&&(i=a))}),!r&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};r=lfe(l,e),o=cfe(l,t),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),TI(0,g_).pipe(fn(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===Rc.UP?t.scrollBy(0,-e):this._verticalScrollDirection===Rc.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===Qa.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===Qa.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&Ej(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!Ej(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let r=this._getShadowRoot().elementFromPoint(e,i);return r?r===this._container||this._container.contains(r):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=T1(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function lfe(n,t){let{top:e,bottom:i,height:r}=n,o=r*afe;return t>=e-o&&t<=e+o?Rc.UP:t>=i-o&&t<=i+o?Rc.DOWN:Rc.NONE}function cfe(n,t){let{left:e,right:i,width:r}=n,o=r*afe;return t>=e-o&&t<=e+o?Qa.LEFT:t>=i-o&&t<=i+o?Qa.RIGHT:Qa.NONE}function s$e(n,t,e,i,r){let o=lfe(t,r),s=cfe(t,i),a=Rc.NONE,l=Qa.NONE;if(o){let c=n.scrollTop;o===Rc.UP?c>0&&(a=Rc.UP):n.scrollHeight-c>n.clientHeight&&(a=Rc.DOWN)}if(s){let c=n.scrollLeft;e==="rtl"?s===Qa.RIGHT?c<0&&(l=Qa.RIGHT):n.scrollWidth+c>n.clientWidth&&(l=Qa.LEFT):s===Qa.LEFT?c>0&&(l=Qa.LEFT):n.scrollWidth-c>n.clientWidth&&(l=Qa.RIGHT)}return[a,l]}var bS={capture:!0},Mj={passive:!1,capture:!0},a$e=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,r){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),dfe=(()=>{class n{_ngZone=N(Pt);_document=N(gn);_styleLoader=N(qo);_renderer=N(xo).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new Xe;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=P([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new Xe;pointerUp=new Xe;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,Mj)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(a$e),this._activeDragInstances.update(r=>[...r,e]),this._activeDragInstances().length===1)){let r=i.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),bS],["selectstart",this._preventDefaultWhileDragging,Mj]];r?s.push(["touchend",o,bS],["touchcancel",o,bS]):s.push(["mouseup",o,bS]),r||s.push(["mousemove",a=>this.pointerMove.next(a),Mj]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,l,c])=>this._renderer.listen(this._document,a,l,c))})}}stopDragging(e){this._activeDragInstances.update(i=>{let r=i.indexOf(e);return r>-1?(i.splice(r,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this._scroll];return e&&e!==this._document&&i.push(new jn(r=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(e,"scroll",s=>{this._activeDragInstances().length&&r.next(s)},bS);return()=>{o()}}))),Aa(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),l$e={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Rj=(()=>{class n{_document=N(gn);_ngZone=N(Pt);_viewportRuler=N(Zl);_dragDropRegistry=N(dfe);_renderer=N(xo).createRenderer(null,null);constructor(){}createDrag(e,i=l$e){return new Dj(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new Fj(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rfe=new $e("CDK_DRAG_PARENT");var c$e=new $e("CdkDragHandle");var ufe=new $e("CDK_DRAG_CONFIG"),hfe=new $e("CdkDropList"),ffe=(()=>{class n{element=N(Kt);dropContainer=N(hfe,{optional:!0,skipSelf:!0});_ngZone=N(Pt);_viewContainerRef=N(Dr);_dir=N(ys,{optional:!0});_changeDetectorRef=N(vi);_selfHandle=N(c$e,{optional:!0,self:!0});_parentDrag=N(rfe,{optional:!0,skipSelf:!0});_dragDropRegistry=N(dfe);_destroyed=new Xe;_handles=new bi([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new vt;released=new vt;ended=new vt;entered=new vt;exited=new vt;dropped=new vt;moved=new jn(e=>{let i=this._dragRef.moved.pipe(Yt(r=>({source:this,pointerPosition:r.pointerPosition,event:r.event,delta:r.delta,distance:r.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=N(tn);constructor(){let e=this.dropContainer,i=N(ufe,{optional:!0}),r=N(Rj);this._dragRef=r.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(e.addItem(this),e._dropListRef.beforeStarted.pipe(fn(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){Zo(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,r=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),r=i.indexOf(e);r>-1&&(i.splice(r,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):gs(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof r=="object"&&r?r:Pc(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(bs(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let r=this._dragDropRegistry.getDragDirectiveForNode(i);if(r){e.withParent(r._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:r,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:l,rootElementSelector:c,previewContainer:d}=e;this.disabled=l??!1,this.dragStartDelay=r||0,this.lockAxis=i||null,o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),c&&(this.rootElementSelector=c),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.pipe(Jr(e=>{let i=e.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),yo(e=>Aa(...e.map(i=>i._stateChanges.pipe(Co(i))))),fn(this._destroyed)).subscribe(e=>{let i=this._dragRef,r=e.element.nativeElement;e.disabled?i.disableHandle(r):i.enableHandle(r)})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,r){i&2&&Ue("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Fn],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",xs]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Zi([{provide:rfe,useExisting:n}]),or]})}return n})(),ofe=new $e("CdkDropListGroup");var pfe=(()=>{class n{element=N(Kt);_changeDetectorRef=N(vi);_scrollDispatcher=N(df);_dir=N(ys,{optional:!0});_group=N(ofe,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new Xe;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=N(Xs).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new vt;entered=new vt;exited=new vt;sorted=new vt;_unsortedItems=new Set;constructor(){let e=N(Rj),i=N(ufe,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(r,o)=>this.enterPredicate(r.data,o.data),this._dropListRef.sortPredicate=(r,o,s)=>this.sortPredicate(r,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),e._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(e._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=n._dropLists.indexOf(this);e>-1&&n._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(Co(this._dir.value),fn(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=c0(this.connectedTo).map(r=>{if(typeof r=="string"){let o=n._dropLists.find(s=>s.id===r);return o}return r});if(this._group&&this._group._items.forEach(r=>{i.indexOf(r)===-1&&i.push(r)}),!this._scrollableParentsResolved){let r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let r=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(r)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Pc(this.autoScrollStep,2),e.hasAnchor=this.hasAnchor,e.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),Aa(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:a}=e;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",this.lockAxis=i||null}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,r){i&2&&(Tn("id",r.id),Ue("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Fn],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Fn],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Fn],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",Fn]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Zi([{provide:ofe,useValue:void 0},{provide:hfe,useExisting:n}])]})}return n})();var gv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[Rj],imports:[Yl]})}return n})();var Oj=_i(Ki()),Nj=_i(Ki());var Un=class n{constructor(t){this.xrplService=t}client=null;cache=new Map;defaultTTL=1e4;ttlMap=new Map;setTTL(t,e){this.ttlMap.set(t,e)}getClient(t){return z(this,null,function*(){return this.client&&this.client.isConnected()?this.client:(this.client=yield t(),this.client)})}get(t){let e=this.cache.get(t);if(!e)return null;let i=this.ttlMap.get(t)??this.defaultTTL;return Date.now()-e.timestamp>i?(this.cache.delete(t),null):e.data}set(t,e,i){this.cache.set(t,{data:e,timestamp:Date.now()}),i&&this.ttlMap.set(t,i)}invalidate(t){t?this.cache.delete(t):(this.cache.clear(),this.ttlMap.clear())}getOrFetch(t,e,i){return z(this,null,function*(){let r=this.get(t);if(r!==null)return console.log("Using cache data................."),r;let o=yield e();return this.set(t,o,i),o})}invalidateAccountCache(t){let e=`account:${t}:`;for(let i of this.cache.keys())i.startsWith(e)&&this.cache.delete(i)}getAccountData(t,e){return z(this,null,function*(){let i=`account:${t}:info`,r=`account:${t}:objects`,o=yield this.getClient(()=>this.xrplService.getClient());e&&(console.log("Invalidating cache for account data"),this.invalidate(i),this.invalidate(r));let[s,a]=yield Promise.all([this.getOrFetch(i,()=>this.xrplService.getAccountInfo(o,t,"validated",""),1e4),this.getOrFetch(r,()=>this.xrplService.getAccountObjects(o,t,"validated",""),1e4)]);return{accountInfo:s,accountObjects:a}})}getAccountInfo(t,e){return z(this,null,function*(){let i=`account:${t}:info`,r=`account:${t}:objects`,o=yield this.getClient(()=>this.xrplService.getClient());e&&(this.invalidate(i),this.invalidate(r));let[s]=yield Promise.all([this.getOrFetch(i,()=>this.xrplService.getAccountInfo(o,t,"validated",""),1e4)]);return s})}getAccountObjects(t,e){return z(this,null,function*(){let i=`account:${t}:info`,r=`account:${t}:objects`,o=yield this.getClient(()=>this.xrplService.getClient());e&&(this.invalidate(i),this.invalidate(r));let[s]=yield Promise.all([this.getOrFetch(r,()=>this.xrplService.getAccountObjects(o,t,"validated",""),1e4)]);return s})}getAccountObjectsWithType(t,e,i){return z(this,null,function*(){let r=`account:${t}:info:${i}`,o=`account:${t}:objects:${i}`,s=yield this.getClient(()=>this.xrplService.getClient());e&&(this.invalidate(r),this.invalidate(o));let[a]=yield Promise.all([this.getOrFetch(o,()=>this.xrplService.getAccountObjects(s,t,"validated",i||""),1e4)]);return a})}getFee(t,e=!1){return z(this,null,function*(){let r=`${t.getNet().environment}:server:fee`;return e&&this.cache.delete(r),this.getOrFetch(r,()=>z(this,null,function*(){let o=yield this.getClient(()=>t.getClient());return yield t.calculateTransactionFee(o)}),this.getFeeTtl())})}getServerInfo(t,e="current",i=!1){return z(this,null,function*(){let o=`${t.getNet().environment}:server:info:${e}`;return i&&this.cache.delete(o),this.getOrFetch(o,()=>z(this,null,function*(){let s=yield this.getClient(()=>t.getClient());return yield t.getXrplServerInfo(s,e,"")}),1e4)})}getBaseFeeDrops(t){return z(this,null,function*(){let e=yield this.getClient(()=>t.getClient()),s=(yield this.xrplService.getXrplServerState(e,"current","")).result.state.validated_ledger?.base_fee?.toString()??"0.000010";return Math.ceil(parseFloat(s)*1e6)})}getFeeAndServerInfo(i){return z(this,arguments,function*(t,e={}){let{forceRefresh:r=!1,ledgerIndex:o="current"}=e,[s,a]=yield Promise.all([this.getFee(t,r),this.getServerInfo(t,o,r)]);return{fee:s,serverInfo:a}})}getFeeTtl(){return this.xrplService.getNet().environment==="mainnet"?15e3:8e3}debug(){if(this.cache.size===0){console.log("XrplCacheService -> cache is empty");return}console.group("XrplCacheService -> Current Cache (%d entries)",this.cache.size);for(let[t,e]of this.cache.entries()){let r=((Date.now()-e.timestamp)/1e3).toFixed(1);console.log(`Key: ${t}`),console.log(`   Age: ${r}s ago`),console.log("   Data:",e.data),console.groupEnd()}console.groupEnd()}debugSnapshot(){let t={};for(let[e,i]of this.cache.entries())t[e]={ageSec:((Date.now()-i.timestamp)/1e3).toFixed(1),data:i.data};return t}static \u0275fac=function(e){return new(e||n)(Ye(Sr))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var h0=class n{constructor(t,e,i,r,o,s){this.xrplService=t;this.utilsService=e;this.http=i;this.storageService=r;this.walletManager=o;this.xrplCache=s}proxyServer="http://localhost:3000";getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}generateNewAccount(t,e,i){return z(this,null,function*(){console.log("Entering generateNewAccount");let r=Date.now();try{console.log("encryptionType: ",i);let o,s;try{o=yield this.generateWalletFromFamilySeed(e,i),yield this.utilsService.sleep(6e3),console.log("Generated wallet:",o);let l=this.walletManager.getWallets().length+1;s={address:o.address,classicAddress:o.address,seed:o.secret.familySeed||"",mnemonic:"",secretNumbers:"",encryptionAlgorithm:o.keypair.algorithm||"",name:`Wallet ${l}`}}catch{o=yield this.createAndFundWalletWithXrplClient(),yield this.utilsService.sleep(6e3),console.log("Generated wallet:",o.wallet.classicAddress);let c=this.walletManager.getWallets().length+1;s={address:o.wallet.classicAddress,classicAddress:o.wallet.classicAddress,seed:o.wallet.seed||"",mnemonic:"",secretNumbers:"",encryptionAlgorithm:Re.ENCRYPTION.ED25519,name:`Wallet ${c}`}}return this.walletManager.addWallet(s),o}catch(o){throw console.error("Error in generateNewAccount:",o),new Error(`${o.message}`)}finally{let o=(Date.now()-r).toString();console.log(`Leaving generateNewAccount in ${o}ms`)}})}deriveWalletFromFamilySeed(t,e,i,r){return z(this,null,function*(){console.log("Entering deriveWalletFromFamilySeed");let o=Date.now();try{let s,a={};try{s=yield this.deriveFromFamilySeed(e,Re.ENCRYPTION.ED25519),r=this.checkIfWalletAlreadyExist(i,s,r),s=yield this.deriveFromFamilySeed(e,Re.ENCRYPTION.SECP256K1),r=this.checkIfWalletAlreadyExist(i,s,r);let c=this.walletManager.getWallets().length+1;a={address:s.address,classicAddress:s.address,seed:s.secret.familySeed||"",mnemonic:"",secretNumbers:"",encryptionAlgorithm:s.keypair.algorithm||"",name:`Wallet ${c}`}}catch{s=yield this.deriveFromFamilySeedWithXrplClient(e),r=this.checkIfWalletAlreadyExist(i,s,r);let d=this.walletManager.getWallets().length+1;a={address:s.address,classicAddress:s.address,seed:s.seed||"",mnemonic:"",secretNumbers:"",name:`Wallet ${d}`}}return yield this.xrplService.getAccountInfo(t,s.address,"validated",""),this.walletManager.addWallet(a),{wallet:s,destinations:i,customDestinations:r}}catch(s){throw console.error("Error in deriveWalletFromFamilySeed:",s),new Error(`${s.message}`)}finally{let s=(Date.now()-o).toString();console.log(`Leaving deriveWalletFromFamilySeed in ${s}ms`)}})}generateNewWalletFromMnemonic(t,e,i){return z(this,null,function*(){console.log("Entering generateNewWalletFromMnemonic");let r=Date.now();try{console.log("encryptionType:",i);let o=yield this.generateWalletFromMnemonic(e,i);yield this.utilsService.sleep(6e3),console.log("Generated wallet:",o);let a=this.walletManager.getWallets().length+1,l={address:o.address,classicAddress:o.address,seed:o.secret.mnemonic||"",mnemonic:o.secret.mnemonic,secretNumbers:"",encryptionAlgorithm:o.keypair.algorithm||"",name:`Wallet ${a}`};return this.walletManager.addWallet(l),o}catch(o){throw console.error("Error in generateNewWalletFromMnemonic:",o),new Error(`${o.message}`)}finally{let o=(Date.now()-r).toString();console.log(`Leaving generateNewWalletFromMnemonic in ${o}ms`)}})}deriveWalletFromMnemonic(t,e,i,r){return z(this,null,function*(){console.log("Entering deriveWalletFromMnemonic");let o=Date.now();try{let s=yield this.deriveFromMnemonic(e,Re.ENCRYPTION.SECP256K1);r=this.checkIfWalletAlreadyExist(i,s,r);let l=this.walletManager.getWallets().length+1,c={address:s.address,classicAddress:s.address,seed:s.secret.mnemonic||"",mnemonic:s.secret.mnemonic,secretNumbers:"",encryptionAlgorithm:s.keypair.algorithm||"",name:`Wallet ${l}`};return yield this.xrplService.getAccountInfo(t,s.address,"validated",""),this.walletManager.addWallet(c),{wallet:s,destinations:i,customDestinations:r}}catch(s){throw console.error("Error in deriveWalletFromMnemonic:",s),new Error(`${s.message}`)}finally{let s=(Date.now()-o).toString();console.log(`Leaving deriveWalletFromMnemonic in ${s}ms`)}})}generateNewWalletFromSecretNumbers(t,e,i){return z(this,null,function*(){console.log("Entering generateNewWalletFromSecretNumbers");let r=Date.now();try{console.log("encryptionType: ",i);let o=yield this.generateWalletFromSecretNumbers(e,i);yield this.utilsService.sleep(6e3),console.log("Generated wallet:",o);let a=this.walletManager.getWallets().length+1,l={address:o.address,classicAddress:o.address,seed:o.secret.familySeed||"",mnemonic:"",secretNumbers:o.secret.secretNumbers,encryptionAlgorithm:o.keypair.algorithm||"",name:`Wallet ${a}`};return this.walletManager.addWallet(l),o}catch(o){throw console.error("Error in generateNewWalletFromSecretNumbers:",o),new Error(`${o.message}`)}finally{let o=(Date.now()-r).toString();console.log(`Leaving generateNewWalletFromSecretNumbers in ${o}ms`)}})}deriveWalletFromSecretNumbers(t,e,i,r){return z(this,null,function*(){console.log("Entering deriveWalletFromSecretNumbers");let o=Date.now();try{let s=yield this.deriveFromSecretNumbers(e,Re.ENCRYPTION.SECP256K1);r=this.checkIfWalletAlreadyExist(i,s,r);let l=this.walletManager.getWallets().length+1,c={address:s.address,classicAddress:s.address,seed:s.secret.familySeed||"",mnemonic:"",secretNumbers:s.secret.secretNumbers,encryptionAlgorithm:s.keypair.algorithm||"",name:`Wallet ${l}`};return yield this.xrplService.getAccountInfo(t,s.address,"validated",""),this.walletManager.addWallet(c),{wallet:s,destinations:i,customDestinations:r}}catch(s){throw console.error("Error in deriveWalletFromSecretNumbers:",s),new Error(`${s.message}`)}finally{let s=(Date.now()-o).toString();console.log(`Leaving deriveWalletFromSecretNumbers in ${s}ms`)}})}checkIfWalletAlreadyExist(t,e,i){for(let r=t.length-1;r>=0;r--)if(console.log(`Destinations: ${t[r].address} wallet.address: ${e.address}`),t[r].address===e.address){if(t[r].name?.includes("Custom")){this.walletManager.deleteWallet(r),i=i.filter(o=>o.address!==t[r].address),this.storageService.set("customDestinations",JSON.stringify(i));break}throw new Error(`Wallet already exists in the application with ${e?.keypair?.algorithm?e.keypair.algorithm:"XRPL default"} encryption.`)}return i}createAndFundWalletWithXrplClient(){return z(this,null,function*(){try{let t=this.getClient(),e=Nj.Wallet.generate();console.log(`Generated wallet: ${e.address}`);let i=!1,r=yield(yield t).fundWallet(e);return console.log(`Funded ${r} XRP to ${e.address}`),i=!0,{wallet:e,funded:i}}catch(t){throw console.error("Error creating/funding wallet:",t),t}})}deriveFromFamilySeedWithXrplClient(t){return z(this,null,function*(){let e=Nj.Wallet.fromSeed(t);return{address:e.address,publicKey:e.publicKey,privateKey:e.privateKey,seed:e.seed,classicAddress:e.classicAddress}})}generateWalletFromFamilySeed(t,e="ed25519"){return z(this,null,function*(){console.log("Entering generateWalletFromFamilySeed");let i=Date.now();try{let r=`${this.proxyServer}/api/create-wallet/family-seed/`;return yield Df(this.http.post(r,{environment:t,algorithm:e}))}catch(r){throw console.error("Error in generateWalletFromFamilySeed:",r),new Error(`${r.message}`)}finally{let r=(Date.now()-i).toString();console.log(`Leaving generateWalletFromFamilySeed in ${r}ms`)}})}deriveFromFamilySeed(t,e="ed25519"){return z(this,null,function*(){console.log("Entering deriveFromFamilySeed");let i=Date.now();try{let r=`${this.proxyServer}/api/derive/family-seed/${encodeURIComponent(t)}?algorithm=${encodeURIComponent(e)}`;return console.log(`deriveFromFamilySeed ${r}`),console.log(`deriveFromFamilySeed with ${t} familySeed`),yield Df(this.http.get(r))}catch(r){throw console.error("Error in deriveFromFamilySeed:",r),new Error(`${r.message}`)}finally{let r=(Date.now()-i).toString();console.log(`Leaving deriveFromFamilySeed in ${r}ms`)}})}generateWalletFromMnemonic(t,e="ed25519"){return z(this,null,function*(){console.log("Entering generateWalletFromMnemonic");let i=Date.now();try{let r=`${this.proxyServer}/api/create-wallet/mnemonic/`,o={environment:t,algorithm:e};return yield Df(this.http.post(r,o))}catch(r){throw console.error("Error in generateWalletFromMnemonic:",r),new Error(`${r.message}`)}finally{let r=(Date.now()-i).toString();console.log(`Leaving generateWalletFromMnemonic in ${r}ms`)}})}deriveFromMnemonic(t,e="ed25519"){return z(this,null,function*(){console.log("Entering deriveFromMnemonic");let i=Date.now();try{let r=`${this.proxyServer}/api/derive/mnemonic/${encodeURIComponent(t)}?algorithm=${encodeURIComponent(e)}`;return console.log(`deriveFromMnemonic ${r}`),console.log(`deriveFromMnemonic with ${t} mnemonic`),yield Df(this.http.get(r))}catch(r){throw console.error("Error in deriveFromMnemonic:",r),new Error(`${r.message}`)}finally{let r=(Date.now()-i).toString();console.log(`Leaving deriveFromMnemonic in ${r}ms`)}})}generateWalletFromSecretNumbers(t,e="ed25519"){return z(this,null,function*(){console.log("Entering generateWalletFromSecretNumbers");let i=Date.now();try{let r=`${this.proxyServer}/api/create-wallet/secret-numbers/`,o={environment:t,algorithm:e};return yield Df(this.http.post(r,o))}catch(r){throw console.error("Error in generateWalletFromSecretNumbers:",r),new Error(`${r.message}`)}finally{let r=(Date.now()-i).toString();console.log(`Leaving generateWalletFromSecretNumbers in ${r}ms`)}})}deriveFromSecretNumbers(t,e="ed25519"){return z(this,null,function*(){console.log("Entering deriveFromSecretNumbers");let i=Date.now();try{let r=`${this.proxyServer}/api/derive/secretNumbers`;console.log(`deriveFromSecretNumbers ${r}`),console.log(`deriveFromSecretNumbers with ${t} ${t.length} numbers`);let o={secretNumbers:t,algorithm:e};return yield Df(this.http.post(r,o))}catch(r){throw console.error("Error in deriveFromSecretNumbers:",r),new Error(`${r.message}`)}finally{let r=(Date.now()-i).toString();console.log(`Leaving deriveFromSecretNumbers in ${r}ms`)}})}fundWalletFromFaucet(t,e){return z(this,null,function*(){console.log("Entering fundWalletFromFaucet");let i=Date.now();if(e!=="mainnet")try{let r=yield this.xrplService.getClient(),o;if(t instanceof Oj.Wallet)o=t;else if(t&&typeof t=="object"&&t.secret?.familySeed)o=Oj.Wallet.fromSeed(t.secret.familySeed);else throw new Error("Unsupported wallet type for funding");let s=yield r.fundWallet(o);return console.log("Faucet result:",s),s}catch(r){throw console.error("Funding failed:",r),new Error(`${r.message}`)}finally{let r=(Date.now()-i).toString();console.log(`Leaving fundWalletFromFaucet in ${r}ms`)}return null})}static \u0275fac=function(e){return new(e||n)(Ye(Sr),Ye(Gt),Ye(ep),Ye(rn),Ye(un),Ye(Un))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var h$e=["nameInput"],f$e=(n,t)=>t.address;function p$e(n,t){if(n&1){let e=ge();m(0,"input",32,0),Ne("ngModelChange",function(r){U(e);let o=E(3);return Ve(o.tempName,r)||(o.tempName=r),j(r)}),X("blur",function(){U(e);let r=E(3);return j(r.saveName())})("keyup.enter",function(){U(e);let r=E(3);return j(r.saveName())})("keyup.escape",function(){U(e);let r=E(3);return j(r.cancelEdit())})("click",function(r){return U(e),j(r.stopPropagation())}),g()}if(n&2){let e=E(3);Oe("ngModel",e.tempName)}}function m$e(n,t){if(n&1){let e=ge();m(0,"span",33),X("click",function(r){U(e);let o=E().$index;return E(2).editName(o),j(r.stopPropagation())}),w(1),g()}if(n&2){let e=E(),i=e.$implicit,r=e.$index;_(),je(" ",i.name||"Wallet "+(r+1)," ")}}function g$e(n,t){if(n&1){let e=ge();m(0,"div",31)(1,"div",34),w(2),g(),m(3,"button",35),X("click",function(r){U(e);let o=E().$implicit;return E(2).copyUtilService.copySeed(o.seed),j(r.stopPropagation())}),ee(4,"lucide-icon",36),g()()}if(n&2){let e=E().$implicit;_(2),Ee(e.seed)}}function y$e(n,t){if(n&1){let e=ge();m(0,"div",13)(1,"div",14),Q(2,p$e,2,1,"input",15)(3,m$e,2,1,"span",16),g(),m(4,"div",17),X("click",function(){let r=U(e).$index,o=E(2);return j(o.selectWallet(r))}),m(5,"div",18)(6,"div",19),w(7),ct(8,"slice"),ct(9,"slice"),g(),m(10,"div",20),w(11),ct(12,"number"),g()(),m(13,"div",21)(14,"button",22),X("click",function(r){let o=U(e).$index;return E(2).refreshBalance(o),j(r.stopPropagation())}),ee(15,"lucide-icon",23),g(),m(16,"button",24),X("click",function(r){let o=U(e).$implicit;return E(2).copyUtilService.copyAddress(o.address),j(r.stopPropagation())}),ee(17,"lucide-icon",25),g(),m(18,"button",26),X("click",function(r){let o=U(e).$index;return E(2).deleteWallet(o),j(r.stopPropagation())}),ee(19,"lucide-icon",27),g()()(),m(20,"div",28),X("click",function(){let r=U(e).$index,o=E(2);return j(o.selectWallet(r))}),m(21,"button",29),X("click",function(r){let o=U(e).$index;return E(2).toggleSecret(o),j(r.stopPropagation())}),ee(22,"lucide-icon",30),m(23,"span"),w(24),g()(),Q(25,g$e,5,1,"div",31),g()()}if(n&2){let e=t.$implicit,i=t.$index,r=E(2);Ue("selected",r.selectedWalletIndex===i),_(2),J(r.editingIndex(i)?2:3),_(5),ei("",C3(8,9,e.address,0,7),"...",lu(9,13,e.address,-7)),_(4),je("",lu(12,16,e.balance||0,"1.2-2")," XRP"),_(11),oe("name",e.showSecret?"eye-off":"eye"),_(2),Ee(e.showSecret?"Hide Secret":"Show Secret"),_(),J(e.showSecret?25:-1)}}function v$e(n,t){if(n&1){let e=ge();m(0,"div")(1,"div",7),X("cdkDropListDropped",function(r){U(e);let o=E();return j(o.dropWallet(r))}),yn(2,y$e,26,19,"div",8,f$e),g(),m(4,"div",9)(5,"div",10),w(6,"Selected Account"),g(),m(7,"div",11)(8,"span"),w(9,"Address:"),g(),m(10,"span"),w(11),ct(12,"slice"),ct(13,"slice"),g()(),m(14,"div",11)(15,"span"),w(16,"Balance:"),g(),m(17,"span",12),w(18),g()(),m(19,"div",11)(20,"span"),w(21,"Owner Count:"),g(),m(22,"span",12),w(23),g()(),m(24,"div",11)(25,"span"),w(26,"Xrp Reserves:"),g(),m(27,"span",12),w(28),g()()()()}if(n&2){let e=E();_(2),vn(e.wallets),_(9),ei("",C3(12,5,e.currentWallet.address,0,7),"...",lu(13,9,e.currentWallet.address,-7)),_(7),je("",e.currentWallet.balance," XRP"),_(5),Ee(e.currentWallet.ownerCount),_(5),je("",e.currentWallet.xrpReserves," XRP")}}function _$e(n,t){if(n&1&&(m(0,"div",6),ee(1,"lucide-icon",37),m(2,"p"),w(3,"No accounts generated yet."),g(),m(4,"p"),w(5),g()()),n&2){let e=E();_(5),je('Click "Generate" to create your first ',e.environment," account")}}var oi=class n{constructor(t,e,i,r,o,s){this.walletManagerService=t;this.walletGenerator=e;this.xrplService=i;this.copyUtilService=r;this.walletDataService=o;this.ui=s}destroy$=new Xe;walletSelected=new vt;nameInput;wallets=[];selectedWalletIndex=0;currentWallet={classicAddress:"",address:"",seed:"",name:void 0,balance:"0",ownerCount:void 0,xrpReserves:void 0,spendableXrp:void 0};hasWallets=!1;environment="";tempName="";executionTime="";editingIndex;cdr=N(vi);ngOnInit(){this.environment=this.xrplService.getNet().environment,this.editingIndex=this.walletManagerService.isEditing.bind(this.walletManagerService),this.walletManagerService.wallets$.pipe(Co(null),Pf(),fn(this.destroy$)).subscribe(([t,e])=>{this.wallets=e||[],this.hasWallets=this.wallets.length>0,this.selectedWalletIndex=Math.min(this.selectedWalletIndex,this.wallets.length-1||0),this.updateCurrentWallet(),this.cdr.detectChanges()}),this.walletManagerService.selectedIndex$.pipe(fn(this.destroy$)).subscribe(t=>{t>=0&&t<this.wallets.length&&(this.selectedWalletIndex=t,this.updateCurrentWallet(),this.walletSelected.emit(this.currentWallet),this.cdr.detectChanges())})}syncSelectedIndex(){this.walletManagerService.setSelectedIndex(this.selectedWalletIndex)}updateCurrentWallet(){this.wallets.length>0&&(this.currentWallet=le({},this.wallets[this.selectedWalletIndex]))}selectWallet(t){this.selectedWalletIndex!==t&&(this.selectedWalletIndex=t,this.updateCurrentWallet(),this.walletSelected.emit(this.currentWallet),this.syncSelectedIndex())}editName(t){this.walletManagerService.startEdit(t);let e=this.wallets[t];this.tempName=e.name||`Wallet ${t+1}`,setTimeout(()=>this.nameInput?.nativeElement.focus(),0)}saveName(){this.walletManagerService.saveEdit(this.tempName),this.tempName=""}cancelEdit(){this.walletManagerService.cancelEdit(),this.tempName=""}toggleSecret(t){this.wallets[t].showSecret=!this.wallets[t].showSecret}refreshBalance(t){return z(this,null,function*(){let e=this.wallets[t],i=yield this.xrplService.getClient();yield this.walletDataService.refreshWallets(i,this.wallets,this.selectedWalletIndex,[e.address])})}deleteWallet(t){confirm("Delete this wallet? This cannot be undone.")&&(this.walletManagerService.deleteWallet(t),this.updateCurrentWallet(),this.walletSelected.emit(this.currentWallet))}generateNewAccount(){return z(this,null,function*(){console.log("Entering generateNewAccount");let t=Date.now();this.ui.showSpinnerWithDelay("Generating new wallet",5e3);try{let e=yield this.walletGenerator.generateNewAccount(this.wallets,this.environment,Re.ENCRYPTION.ED25519),i=yield this.xrplService.getClient();yield this.walletDataService.refreshWallets(i,this.wallets,this.selectedWalletIndex,[e.address]),this.ui.spinner.set(!1),this.ui.clearWarning(),this.syncSelectedIndex()}catch(e){console.error("Error in generateNewAccount:",e),this.ui.setError(`${e.message||"Unknown error"}`)}finally{this.ui.spinner.set(!1),this.executionTime=(Date.now()-t).toString();let e=((Date.now()-t)/1e3).toFixed(2);console.log(`Leaving generateNewAccount in ${this.executionTime} ms ${e} seconds`)}})}dropWallet(t){L8(this.wallets,t.previousIndex,t.currentIndex),this.selectedWalletIndex===t.previousIndex?this.selectedWalletIndex=t.currentIndex:this.selectedWalletIndex>t.previousIndex&&this.selectedWalletIndex<=t.currentIndex?this.selectedWalletIndex--:this.selectedWalletIndex<t.previousIndex&&this.selectedWalletIndex>=t.currentIndex&&this.selectedWalletIndex++,this.walletManagerService.setWallets(this.wallets),this.updateCurrentWallet(),this.walletSelected.emit(this.currentWallet),this.syncSelectedIndex()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||n)(ut(un),ut(h0),ut(Sr),ut(Vn),ut(Xn),ut(hn))};static \u0275cmp=nt({type:n,selectors:[["app-wallet-panel"]],viewQuery:function(e,i){if(e&1&&Et(h$e,5),e&2){let r;_t(r=bt())&&(i.nameInput=r.first)}},outputs:{walletSelected:"walletSelected"},decls:10,vars:2,consts:[["nameInput",""],[1,"wallets-panel"],[1,"panel-title"],["name","wallet","size","25",2,"padding-top","5px"],[1,"generate-btn",3,"click"],[1,"panel-subtitle"],[1,"no-wallet-found"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",1,"wallet-item",3,"selected"],[1,"selected-account-card"],[1,"wallet-address",2,"padding-bottom","0.5em"],[1,"summary-row"],[1,"highlight","wallet-balance"],["cdkDrag","",1,"wallet-item"],[1,"wallet-info"],["placeholder","Enter name",1,"name-input",3,"ngModel"],[1,"clickable-name"],[1,"wallet-info",3,"click"],[1,"address-line"],[1,"wallet-address"],[1,"wallet-balance"],[1,"wallet-actions"],["title","Refresh Balance",1,"icon-btn","refresh",3,"click"],["name","refresh-ccw"],["title","Copy Address",1,"icon-btn","copy",3,"click"],["name","copy"],["title","Delete Wallet",1,"icon-btn","delete",3,"click"],["name","trash-2"],[1,"secret-section",3,"click"],[1,"show-toggle",3,"click"],["size","16",2,"padding-top","5px",3,"name"],[1,"secret-seed-container"],["placeholder","Enter name",1,"name-input",3,"ngModelChange","blur","keyup.enter","keyup.escape","click","ngModel"],[1,"clickable-name",3,"click"],[1,"secret-seed"],["title","Copy seed",1,"copy-btn",3,"click"],["name","copy","size","20"],["name","wallet","size","40"]],template:function(e,i){e&1&&(m(0,"div",1)(1,"h2",2),ee(2,"lucide-icon",3),w(3," Accounts "),m(4,"button",4),X("click",function(){return i.generateNewAccount()}),w(5,"+ Generate"),g()(),m(6,"p",5),w(7),g(),Q(8,v$e,29,12,"div")(9,_$e,6,1,"div",6),g()),e&2&&(_(7),je("Generate ",i.environment," accounts with XRP from the faucet. You can also generate or derive accounts in the 'Wallets' Menu."),_(),J(i.hasWallets?8:9))},dependencies:[ln,Kn,Bn,$n,Wn,En,xr,gv,pfe,ffe,XF,_b],encapsulation:2})};var Bj=n=>({expanded:n});function b$e(n,t){n&1&&(m(0,"span",53),w(1,"Wallets"),g())}function w$e(n,t){n&1&&(m(0,"span",54),w(1," Accounts \u25BE "),g())}function S$e(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"a",56),X("click",function(){U(e);let r=E();return j(r.setActiveAccountsLink("/account-balance-changes"))}),w(2," Balance Changes "),g(),m(3,"a",57),X("click",function(){U(e);let r=E();return j(r.setActiveAccountsLink("/account-configurator"))}),w(4," Configurator "),g(),m(5,"a",58),X("click",function(){U(e);let r=E();return j(r.setActiveAccountsLink("/create-credentials"))}),w(6,"Create Credentials"),g(),m(7,"a",59),X("click",function(){U(e);let r=E();return j(r.setActiveAccountsLink("/create-did"))}),w(8,"Create DID"),g(),m(9,"a",60),X("click",function(){U(e);let r=E();return j(r.setActiveAccountsLink("/account-delegate"))}),w(10,"Delegate"),g(),m(11,"a",61),X("click",function(){U(e);let r=E();return j(r.setActiveAccountsLink("/delete-account"))}),w(12,"Delete Account"),g(),m(13,"a",62),X("click",function(){U(e);let r=E();return j(r.setActiveAccountsLink("/firewall"))}),w(14,"Firewall"),g(),m(15,"a",63),X("click",function(){U(e);let r=E();return j(r.setActiveAccountsLink("/permissioned-domain"))}),w(16,"Permissioned Domain"),g()()}}function C$e(n,t){n&1&&(m(0,"span",53),w(1,"Send XRP"),g())}function x$e(n,t){n&1&&(m(0,"span",53),w(1,"Sign Transactions"),g())}function k$e(n,t){n&1&&(m(0,"span",53),w(1,"Trustlines"),g())}function M$e(n,t){n&1&&(m(0,"span",53),w(1,"Payment Channel"),g())}function T$e(n,t){n&1&&(m(0,"span",54),w(1,"Escrows \u25BE"),g())}function E$e(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"a",64),X("click",function(){U(e);let r=E();return j(r.setActiveEscrowLink("/time-escrow"))}),w(2," Time Escrow "),g(),m(3,"a",65),X("click",function(){U(e);let r=E();return j(r.setActiveEscrowLink("/conditional-escrow"))}),w(4," Conditional Escrow "),g()()}}function A$e(n,t){n&1&&(m(0,"span",53),w(1,"Checks"),g())}function D$e(n,t){n&1&&(m(0,"span",53),w(1,"Tickets"),g())}function I$e(n,t){n&1&&(m(0,"span",53),w(1,"Offers"),g())}function F$e(n,t){n&1&&(m(0,"span",53),w(1,"AMM"),g())}function P$e(n,t){n&1&&(m(0,"span",54),w(1,"NFTs \u25BE"),g())}function L$e(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"a",66),X("click",function(){U(e);let r=E();return j(r.setActiveLink("/create-nft"))}),w(2," NFT Create "),g(),m(3,"a",67),X("click",function(){U(e);let r=E();return j(r.setActiveLink("/nft-offers"))}),w(4," NFT Offers "),g()()}}function R$e(n,t){n&1&&(m(0,"span",53),w(1,"MPT"),g())}function O$e(n,t){n&1&&(lt(),m(0,"svg",16),ee(1,"circle",68)(2,"path",69),g())}function N$e(n,t){n&1&&(lt(),m(0,"svg",16),ee(1,"path",70),g())}function B$e(n,t){if(n&1&&(m(0,"span",71),w(1),g()),n&2){let e=E();_(),je(" ",e.isDarkMode?"Light Mode":"Dark Mode"," ")}}var si=class n{constructor(t,e,i,r,o,s){this.storageService=t;this.utilsService=e;this.xrplService=i;this.router=r;this.datePipe=o;this.networkService=s}transactionResult=new vt;selectedNetwork="Devnet";networkColor="#1a1c21";navbarColor="#1a1c21";isNetworkDropdownOpen=!1;currentDateTime="";isDarkMode=!1;searchSubject=new Xe;transactionInput="";spinner=!1;connectionStatus="disconnected";connectionStatusMessage="Disconnected";subs=[];expandedGroup=null;isCollapsed=!1;ngOnInit(){let{environment:t}=this.storageService.getNet();this.selectedNetwork=t.charAt(0).toUpperCase()+t.slice(1),this.networkColor=this.storageService.getNetworkColor(t),this.subs.push(this.xrplService.connectionStatus$.subscribe(i=>this.connectionStatus=i)),this.subs.push(this.xrplService.connectionMessage$.subscribe(i=>this.connectionStatusMessage=i)),this.xrplService.getClient().catch(()=>{});let e=localStorage.getItem("darkMode");e?this.isDarkMode=e==="true":this.isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,this.applyDarkMode()}toggleSidebar(){this.isCollapsed=!this.isCollapsed,this.isCollapsed&&(this.expandedGroup=null,this.isNetworkDropdownOpen=!1)}onAccountsClick(t){if(t.preventDefault(),t.stopPropagation(),this.isCollapsed){this.router.navigate(["/account-configurator"]);return}this.expandedGroup=this.expandedGroup==="accounts"?null:"accounts",this.isNetworkDropdownOpen=!1}onNftsClick(t){if(t.preventDefault(),t.stopPropagation(),this.isCollapsed){this.router.navigate(["/create-nft"]);return}this.expandedGroup=this.expandedGroup==="nfts"?null:"nfts"}onEscrowsClick(t){if(t.preventDefault(),t.stopPropagation(),this.isCollapsed){this.router.navigate(["/time-escrow"]);return}this.expandedGroup=this.expandedGroup==="escrows"?null:"escrows"}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,localStorage.setItem("darkMode",this.isDarkMode.toString()),this.applyDarkMode()}applyDarkMode(){this.isDarkMode?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")}checkConnection(){return z(this,null,function*(){try{let t=yield this.xrplService.getClient();if(!t?.isConnected()){this.connectionStatus="disconnected",this.connectionStatusMessage="Disconnected from network";return}yield t.request({command:"server_info"}),this.connectionStatus="connected",this.connectionStatusMessage=`Connected to ${this.selectedNetwork}`}catch{this.connectionStatus="disconnected",this.connectionStatusMessage="Failed to reach network"}})}triggerSearch(){this.searchSubject.next()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}updateDateTime(){let t=new Date;this.currentDateTime=nw(t,"America/New_York","M/d/yyyy h:mm:ss aa")}toggleNetworkDropdown(){this.isNetworkDropdownOpen=!this.isNetworkDropdownOpen}toggleAccountsDropdown(t){t.preventDefault(),t.stopPropagation(),this.expandedGroup=this.expandedGroup==="accounts"?null:"accounts",this.isNetworkDropdownOpen=!1}ttoggleEscrowsDropdown(t){t.preventDefault(),t.stopPropagation(),this.expandedGroup=this.expandedGroup==="escrows"?null:"escrows",this.isNetworkDropdownOpen=!1}toggleNftDropdown(t){t.preventDefault(),t.stopPropagation(),this.expandedGroup=this.expandedGroup==="nfts"?null:"nfts",this.isNetworkDropdownOpen=!1}toggleMptDropdown(t){t.preventDefault(),t.stopPropagation(),this.expandedGroup=this.expandedGroup==="mpt"?null:"mpt",this.isNetworkDropdownOpen=!1}toggleUtilsDropdown(t){t.preventDefault(),this.isNetworkDropdownOpen=!1}selectNetwork(t){return z(this,null,function*(){let e=t.toLowerCase();this.selectedNetwork=t.charAt(0).toUpperCase()+t.slice(1),this.networkColor=this.storageService.getNetworkColor(e),this.storageService.setNet(this.storageService.networkServers[e],e),this.xrplService.disconnect().then(()=>{this.xrplService.getClient()}),this.networkService.announceNetworkChange(e),this.isNetworkDropdownOpen=!1})}setActiveLink(t){this.storageService.setActiveNavLink(t)}setActiveEscrowLink(t){this.storageService.setActiveEscrowLink(t)}setActiveAccountsLink(t){this.storageService.setActiveAccountsLink(t),this.expandedGroup=null,this.isNetworkDropdownOpen=!1}disconnectClient(t){return z(this,null,function*(){t.preventDefault(),yield this.xrplService.disconnect()})}static \u0275fac=function(e){return new(e||n)(ut(rn),ut(Gt),ut(Sr),ut(fs),ut(ld),ut(o0))};static \u0275cmp=nt({type:n,selectors:[["app-navbar"]],outputs:{transactionResult:"transactionResult"},features:[Zi([ld])],decls:83,vars:49,consts:[[1,"sidebar-container"],[1,"sidebar-links"],[1,"sidebar-header"],[1,"hamburger-btn",3,"click","title"],["viewBox","0 0 24 24","width","20","height","20"],["stroke","currentColor","stroke-width","2","stroke-linecap","round"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","18","x2","21","y2","18"],["routerLink","/wallet-configurator","routerLinkActive","active",1,"nav-link",3,"title"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"sidebar-icon"],["d","M21 12.5v4.5a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h8"],["x","14","y","6","width","8","height","10","rx","2"],["class","label",4,"ngIf"],[1,"sidebar-group",3,"ngClass"],["href","#",1,"group-toggle",3,"click","title"],["viewBox","0 0 24 24","aria-hidden","true",1,"icon"],["cx","12","cy","8","r","4","fill","currentColor"],["d","M4 20c0-4 4-6 8-6s8 2 8 6","fill","currentColor"],["class","label","style","padding-left: 10px",4,"ngIf"],["class","group-items",4,"ngIf"],["routerLink","/send-xrp","routerLinkActive","active",1,"nav-link",3,"title"],["x1","22","y1","2","x2","11","y2","13"],["points","22 2 15 22 11 13 2 9 22 2"],["routerLink","/sign-transactions","routerLinkActive","active",1,"nav-link",3,"click","title"],["d","M3 21l3.5-.5L19 8a2.1 2.1 0 0 0-3-3L3.5 17.5 3 21z","fill","currentColor"],["d","M14 6l4 4","stroke","currentColor","stroke-width","2","fill","none"],["routerLink","/trustlines","routerLinkActive","active",1,"nav-link",3,"click","title"],["d","M10 14a4 4 0 0 1 0-6l2-2a4 4 0 1 1 6 6l-1 1","stroke","currentColor","stroke-width","2","fill","none"],["d","M14 10a4 4 0 0 1 0 6l-2 2a4 4 0 1 1-6-6l1-1","stroke","currentColor","stroke-width","2","fill","none"],["routerLink","/payment-channel","routerLinkActive","active",1,"nav-link",3,"click","title"],["d","M4 6h10M4 12h16M4 18h10","stroke","currentColor","stroke-width","2","fill","none"],["d","M18 5l2 2-2 2M18 11l2 2-2 2M18 17l2 2-2 2","stroke","currentColor","stroke-width","2","fill","none"],["x","5","y","10","width","14","height","10","rx","2","stroke","currentColor","stroke-width","2","fill","none"],["d","M8 10V7a4 4 0 0 1 8 0v3","stroke","currentColor","stroke-width","2","fill","none"],["routerLink","/checks","routerLinkActive","active",1,"nav-link",3,"click","title"],["d","M20 6L9 17l-5-5","stroke","currentColor","stroke-width","2","fill","none"],["routerLink","/tickets","routerLinkActive","active",1,"nav-link",3,"click","title"],["d","M4 7h16v4a2 2 0 0 1 0 4v4H4v-4a2 2 0 0 1 0-4V7z","stroke","currentColor","stroke-width","2","fill","none"],["routerLink","/create-offer","routerLinkActive","active",1,"nav-link",3,"click","title"],["d","M20 10l-8 8-8-8V4h6l10 6z","stroke","currentColor","stroke-width","2","fill","none"],["routerLink","/create-amm","routerLinkActive","active",1,"nav-link",3,"click","title"],["cx","8","cy","12","r","3","stroke","currentColor","stroke-width","2","fill","none"],["cx","16","cy","12","r","3","stroke","currentColor","stroke-width","2","fill","none"],["d","M11 12h2","stroke","currentColor","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","3","stroke","currentColor","stroke-width","2","fill","none"],["cx","9","cy","9","r","2","stroke","currentColor","stroke-width","2","fill","none"],["d","M21 16l-5-5-7 7","stroke","currentColor","stroke-width","2","fill","none"],["routerLink","/mpt","routerLinkActive","active",1,"nav-link",3,"click","title"],["cx","12","cy","12","r","9","stroke","currentColor","stroke-width","2","fill","none"],["d","M8 12h8M12 8v8","stroke","currentColor","stroke-width","2"],[1,"dark-mode-toggle",3,"click"],["class","toggle-text",4,"ngIf"],[1,"label"],[1,"label",2,"padding-left","10px"],[1,"group-items"],["routerLink","/account-balance-changes","routerLinkActive","active",3,"click"],["routerLink","/account-configurator","routerLinkActive","active",3,"click"],["routerLink","/create-credentials","routerLinkActive","active",3,"click"],["routerLink","/create-did","routerLinkActive","active",3,"click"],["routerLink","/account-delegate","routerLinkActive","active",3,"click"],["routerLink","/delete-account","routerLinkActive","active",3,"click"],["routerLink","/firewall","routerLinkActive","active",3,"click"],["routerLink","/permissioned-domain","routerLinkActive","active",3,"click"],["routerLink","/time-escrow","routerLinkActive","active",3,"click"],["routerLink","/conditional-escrow","routerLinkActive","active",3,"click"],["routerLink","/create-nft","routerLinkActive","active",3,"click"],["routerLink","/nft-offers","routerLinkActive","active",3,"click"],["cx","12","cy","12","r","5","fill","currentColor"],["d",`M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42
           M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42`,"stroke","currentColor","stroke-width","2","fill","none"],["d",`M21 12.79A9 9 0 1 1 11.21 3
           7 7 0 0 0 21 12.79z`,"fill","currentColor"],[1,"toggle-text"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),X("click",function(){return i.toggleSidebar()}),lt(),m(4,"svg",4)(5,"g",5),ee(6,"line",6)(7,"line",7)(8,"line",8),g()()()(),dn(),m(9,"a",9),lt(),m(10,"svg",10),ee(11,"path",11)(12,"rect",12),g(),nn(13,b$e,2,0,"span",13),g(),dn(),m(14,"div",14)(15,"a",15),X("click",function(o){return i.onAccountsClick(o)}),lt(),m(16,"svg",16),ee(17,"circle",17)(18,"path",18),g(),nn(19,w$e,2,0,"span",19),g(),nn(20,S$e,17,0,"div",20),g(),dn(),m(21,"a",21),lt(),m(22,"svg",10),ee(23,"line",22)(24,"polygon",23),g(),nn(25,C$e,2,0,"span",13),g(),dn(),m(26,"a",24),X("click",function(){return i.setActiveLink("/sign-transactions")}),lt(),m(27,"svg",16),ee(28,"path",25)(29,"path",26),g(),nn(30,x$e,2,0,"span",13),g(),dn(),m(31,"a",27),X("click",function(){return i.setActiveLink("/trustlines")}),lt(),m(32,"svg",16),ee(33,"path",28)(34,"path",29),g(),nn(35,k$e,2,0,"span",13),g(),dn(),m(36,"a",30),X("click",function(){return i.setActiveLink("/payment-channel")}),lt(),m(37,"svg",16),ee(38,"path",31)(39,"path",32),g(),nn(40,M$e,2,0,"span",13),g(),dn(),m(41,"div",14)(42,"a",15),X("click",function(o){return i.onEscrowsClick(o)}),lt(),m(43,"svg",16),ee(44,"rect",33)(45,"path",34),g(),nn(46,T$e,2,0,"span",19),g(),nn(47,E$e,5,0,"div",20),g(),dn(),m(48,"a",35),X("click",function(){return i.setActiveLink("/checks")}),lt(),m(49,"svg",16),ee(50,"path",36),g(),nn(51,A$e,2,0,"span",13),g(),dn(),m(52,"a",37),X("click",function(){return i.setActiveLink("/tickets")}),lt(),m(53,"svg",16),ee(54,"path",38),g(),nn(55,D$e,2,0,"span",13),g(),dn(),m(56,"a",39),X("click",function(){return i.setActiveLink("/create-offer")}),lt(),m(57,"svg",16),ee(58,"path",40),g(),nn(59,I$e,2,0,"span",13),g(),dn(),m(60,"a",41),X("click",function(){return i.setActiveLink("/create-amm")}),lt(),m(61,"svg",16),ee(62,"circle",42)(63,"circle",43)(64,"path",44),g(),nn(65,F$e,2,0,"span",13),g(),dn(),m(66,"div",14)(67,"a",15),X("click",function(o){return i.onNftsClick(o)}),lt(),m(68,"svg",16),ee(69,"rect",45)(70,"circle",46)(71,"path",47),g(),nn(72,P$e,2,0,"span",19),g(),nn(73,L$e,5,0,"div",20),g(),dn(),m(74,"a",48),X("click",function(){return i.setActiveLink("/mpt")}),lt(),m(75,"svg",16),ee(76,"circle",49)(77,"path",50),g(),nn(78,R$e,2,0,"span",13),g(),dn(),m(79,"div",51),X("click",function(){return i.toggleDarkMode()}),Q(80,O$e,3,0,":svg:svg",16),Q(81,N$e,2,0,":svg:svg",16),nn(82,B$e,2,1,"span",52),g()()()),e&2&&(Ue("collapsed",i.isCollapsed),_(3),oe("title",i.isCollapsed?"Expand sidebar":"Collapse sidebar"),_(3),Tn("transform",i.isCollapsed?null:"rotate(45 12 12)"),_(),Tn("opacity",i.isCollapsed?"1":"0"),_(),Tn("transform",i.isCollapsed?null:"rotate(-45 12 12)"),_(),oe("title",i.isCollapsed?"Wallets":""),_(4),oe("ngIf",!i.isCollapsed),_(),oe("ngClass",Zf(43,Bj,i.expandedGroup==="accounts")),_(),oe("title",i.isCollapsed?"Accounts":""),_(4),oe("ngIf",!i.isCollapsed),_(),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"Send XRP":null),_(4),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"Sign Transactions":null),_(4),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"Trustlines":null),_(4),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"Payment Channel":null),_(4),oe("ngIf",!i.isCollapsed),_(),oe("ngClass",Zf(45,Bj,i.expandedGroup==="escrows")),_(),oe("title",i.isCollapsed?"Escrows":null),_(4),oe("ngIf",!i.isCollapsed),_(),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"Checks":null),_(3),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"Tickets":null),_(3),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"Offers":null),_(3),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"AMM":null),_(5),oe("ngIf",!i.isCollapsed),_(),oe("ngClass",Zf(47,Bj,i.expandedGroup==="nfts")),_(),oe("title",i.isCollapsed?"NFTs":null),_(5),oe("ngIf",!i.isCollapsed),_(),oe("ngIf",!i.isCollapsed),_(),oe("title",i.isCollapsed?"MPT":null),_(4),oe("ngIf",!i.isCollapsed),_(),Ue("collapsed",i.isCollapsed),_(),J(i.isDarkMode?-1:80),_(),J(i.isDarkMode?81:-1),_(),oe("ngIf",!i.isCollapsed))},dependencies:[ln,Oa,GF,tw,g2,fL],encapsulation:2})};var so=class n{constructor(t,e,i,r){this.storage=t;this.xrplService=e;this.utils=i;this.walletManagerService=r;this.loadFromStorage(),mh([this.walletManagerService.wallets$,this.walletManagerService.selectedIndex$]).pipe(fn(this.destroy$)).subscribe(([o,s])=>{if(this.latestWallets=o,this.latestSelectedIndex=s,o.length===0||s<0||s>=o.length){this.currentWalletAddress.set(""),this.clearCurrentSelection();return}let a=o[s];a.address!==this.currentWalletAddress()&&(this.currentWalletAddress.set(a.address),this.clearCurrentSelection(),this.currentCurrency&&(this.loadIssuersForCurrency(this.currentCurrency()),this.updateBalanceForCurrentCombo()))})}knownTrustLinesIssuers=P({XRP:[]});knownTrustLinesIssuers$=this.knownTrustLinesIssuers.asReadonly();destroy$=new Xe;currentWalletAddress=P("");currentCurrency=P("");currentIssuer=P("");balanceCache=new Map;latestWallets=[];latestSelectedIndex=0;currencies$=new bi([]);issuers$=new bi([]);selectedIssuer$=new bi("");balance$=new bi("0");clearCurrentSelection(){this.currentCurrency.set(""),this.currentIssuer.set(""),this.selectedIssuer$.next(""),this.balance$.next("0")}loadFromStorage(){let t=this.storage.getKnownIssuers("knownIssuers");if(t){let e={};for(let[i,r]of Object.entries(t))Array.isArray(r)?e[i]=r:r&&typeof r=="object"?e[i]=Object.values(r):e[i]=[];e.XRP=[],this.knownTrustLinesIssuers.set(e)}else this.knownTrustLinesIssuers.set({XRP:[]});this.updateCurrencies()}saveToStorage(){this.storage.setKnownIssuers("knownIssuers",this.knownTrustLinesIssuers())}addToken(t,e){if(!t?.trim()||!e?.trim())return;let i=t.trim(),r=e.trim();this.knownTrustLinesIssuers.update(o=>(o[i]||(o[i]=[]),o[i].includes(r)||o[i].push(r),le({},o))),this.saveToStorage(),this.updateCurrencies()}removeToken(t,e){t&&(this.knownTrustLinesIssuers.update(i=>i[t]?(e?(i[t]=i[t].filter(r=>r!==e),i[t].length===0&&delete i[t]):delete i[t],le({},i)):i),this.saveToStorage(),this.updateCurrencies())}updateCurrencies(){let t=Object.keys(this.knownTrustLinesIssuers()).filter(e=>e!=="XRP").sort((e,i)=>e.localeCompare(i));this.currencies$.next(t),t.length>0&&!this.currentCurrency()&&this.selectCurrency(t[0])}getAvailableCurrencies(t=!1){let e=Object.keys(this.knownTrustLinesIssuers);return t||(e=e.filter(i=>i!=="XRP")),e.sort((i,r)=>i.localeCompare(r))}selectCurrency(t,e){return z(this,null,function*(){if(!t||t==="XRP"){this.currentCurrency.set(""),this.currentIssuer.set(""),this.issuers$.next([]),this.selectedIssuer$.next(""),this.balance$.next("0");return}if(this.currentCurrency.set(t),this.latestWallets.length===0||this.latestSelectedIndex>=this.latestWallets.length){this.currentWalletAddress.set(""),this.balance$.next("0");return}let i=this.latestWallets[this.latestSelectedIndex];this.currentWalletAddress.set(i.address),yield this.loadIssuersForCurrency(t),yield this.updateBalanceForCurrentCombo()})}selectIssuer(t){this.currentIssuer.set(t),this.selectedIssuer$.next(t),this.updateBalanceForCurrentCombo()}loadIssuersForCurrency(t){return z(this,null,function*(){let e=this.knownTrustLinesIssuers()[t]||[],i=e.map(o=>({name:this.getNiceName(o,t),address:o})).sort((o,s)=>o.name.localeCompare(s.name));if(this.issuers$.next(i),i.length===0){this.currentIssuer.set(""),this.selectedIssuer$.next(""),this.balance$.next("0");return}this.currentIssuer()&&e.includes(this.currentIssuer())||this.currentIssuer.set(i[0].address),this.selectedIssuer$.next(this.currentIssuer()),yield this.updateBalanceForCurrentCombo()})}getNiceName(t,e){let i=this.walletManagerService.getWallets()?.find(s=>s.address===t);if(i?.name)return i.name;let r=this.storage.get("customDestinations");if(r){let a=JSON.parse(r).find(l=>l.address===t);if(a?.name)return a.name}let o=t.slice(0,6)+"..."+t.slice(-4);return`${e} \u2013 ${o}`}updateBalanceForCurrentCombo(){return z(this,null,function*(){if(!this.currentWalletAddress()||!this.currentCurrency()||!this.currentIssuer()){this.balance$.next("0");return}let t=`${this.currentWalletAddress()}_${this.currentCurrency()}`,e=this.balanceCache.get(t);if(e&&Date.now()-e.timestamp<8e3){let i=this.extractBalance(e.data,this.currentCurrency(),this.currentIssuer());this.balance$.next(i);return}try{let i=yield this.xrplService.getClient(),r=yield this.xrplService.getTokenBalance(i,this.currentWalletAddress(),"validated","");this.balanceCache.set(t,{data:r,timestamp:Date.now()});let o=this.extractBalance(r,this.currentCurrency(),this.currentIssuer());this.balance$.next(o)}catch(i){console.warn("Failed to load balance for currency+issuer",i),this.balance$.next("0")}})}extractBalance(t,e,i){let r=t.result,o=this.utils.normalizeCurrencyCode(e);if(r.obligations?.[o])return`-${this.utils.formatTokenBalance(r.obligations[o],18)}`;if(r.assets?.[i]){let s=r.assets[i].find(a=>this.utils.normalizeCurrencyCode(a.currency)===o);if(s)return this.utils.formatTokenBalance(s.value,18)}if(r.balances?.[i]){let s=r.balances[i].find(a=>this.utils.normalizeCurrencyCode(a.currency)===o);if(s)return this.utils.formatTokenBalance(s.value,18)}return"0"}getCurrencies(){return this.currencies$.value}getSelectedCurrency(){return this.currentCurrency()}getSelectedIssuer(){return this.currentIssuer()}getIssuersForCurrency(t){return!t||t==="XRP"?[]:this.knownTrustLinesIssuers()[t]||[]}static \u0275fac=function(e){return new(e||n)(Ye(rn),Ye(Sr),Ye(Gt),Ye(un))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var Yu=class n{constructor(t){this.utilsService=t}signTransaction(t,e,i,r,o,s,a,l,c){return z(this,null,function*(){if(a){let d=this.utilsService.getMultiSignAddress(l),u=this.utilsService.getMultiSignSeeds(c);if(d.length===0)throw new Error("No signer addresses provided for multi-signing");if(u.length===0)throw new Error("No signer seeds provided for multi-signing");let h=yield this.utilsService.handleMultiSignTransaction({client:t,wallet:e,tx:i,signerAddresses:d,signerSeeds:u,fee:s});i.Signers=h.signers;let f=String((d.length+1)*Number(s));return i.Fee=f,console.info("tx",i),h.signedTx}else{console.info("tx",i);let d=yield t.autofill(i);return r?o.sign(d):e.sign(d)}})}signTransactionNoAutofill(t,e,i,r,o,s,a,l,c,d=!1){return z(this,null,function*(){if(a){let u=this.utilsService.getMultiSignAddress(l),h=this.utilsService.getMultiSignSeeds(c);if(u.length===0)throw new Error("No signer addresses provided for multi-signing");if(h.length===0)throw new Error("No signer seeds provided for multi-signing");let f=yield this.utilsService.handleMultiSignTransaction({client:t,wallet:e,tx:i,signerAddresses:u,signerSeeds:h,fee:s});i.Signers=f.signers;let p=String((u.length+1)*Number(s));return i.Fee=p,console.info("tx",i),f.signedTx}else{console.info("tx",i);let u=d?i:yield t.autofill(i);return r?o.sign(u):e.sign(u)}})}submitTransaction(t,e){return z(this,null,function*(){return console.log(`[REAL] Submitting transaction ${e.hash} to network`),yield t.submitAndWait(e.tx_blob)})}simulateTransaction(t,e){return z(this,null,function*(){console.log("[SIMULATE] Simulating transaction:",e);try{let i=yield t.request({command:"simulate",tx_json:e});return console.log("[SIMULATE] Result:",i),i}catch(i){throw console.error("[SIMULATE] Error:",i),i}})}static \u0275fac=function(e){return new(e||n)(Ye(Gt))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var ai=class n{constructor(t,e,i,r,o){this.xrplTransactions=t;this.utilsService=e;this.txUiService=i;this.xrplCache=r;this.xrplService=o}execute(t,e,i,r){return z(this,null,function*(){let{simulateMessage:o,submitMessage:s,insufficientXrpMessage:a="Insufficient XRP to complete transaction",amount:l="0",useMultiSign:c=!1,multiSignAddress:d="",multiSignSeeds:u="",isRegularKeyAddress:h=!1,regularKeySeed:f="",suppressIndividualFeedback:p=!1}=r,[{accountInfo:y,accountObjects:v},{fee:b,serverInfo:S}]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFeeAndServerInfo(this.xrplService,{forceRefresh:!1})]);if(this.utilsService.isInsufficientXrpBalance1(S,y,l,e.classicAddress,i,b))return{success:!1,error:a};this.txUiService.showSpinnerWithDelay(this.txUiService.isSimulateEnabled()?o:s,200),this.txUiService.addTxSignal(i);let x;try{if(this.txUiService.isSimulateEnabled())x=yield this.xrplTransactions.simulateTransaction(t,i);else{let{useRegularKeyWalletSignTx:D,regularKeyWalletSignTx:V}=yield this.utilsService.getRegularKeyWallet(c,h,f),O=yield this.xrplTransactions.signTransaction(t,e,i,D,V,b,c,d,u);if(!O)return{success:!1,error:"Failed to sign transaction."};x=yield this.xrplTransactions.submitTransaction(t,O)}if(this.txUiService.addTxResultSignal(x.result),!this.utilsService.isTxSuccessful(x)){let D=this.utilsService.getTransactionResultMessage(x),V=`Transaction failed.
`+this.utilsService.processErrorMessageFromLedger(D);return console.error(`Transaction ${this.txUiService.isSimulateEnabled()?"simulation":"submission"} failed: ${D}`,x),x.result&&(x.result.errorMessage=V),this.txUiService.addTxResultSignal(x.result),this.txUiService.setError(V),{success:!1,error:V}}this.txUiService.setSuccess(this.txUiService.result);let L=x.result.hash??x.result.tx_json?.hash??"unknown";return p||(this.txUiService.addTxHashSignal(L),this.txUiService.setSuccess(this.txUiService.result)),{success:!0,hash:L}}catch(k){let L=k.message||"Unknown error during transaction";return this.txUiService.setError(L),{success:!1,error:L}}finally{p||this.txUiService.spinner.set(!1)}})}ticketCreate(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulated Ticket create (no changes will be made)...",submitMessage:"Submitting Ticket create to Ledger...",amount:"0"},r))})}ticketDelete(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:r.customSpinnerMessage??"Simulated Ticket delete (no changes will be made)...",submitMessage:r.customSpinnerMessage??"Submitting Ticket delete to Ledger...",amount:"0",suppressIndividualFeedback:r.suppressIndividualFeedback},r))})}sendXrpPayment(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulated XRP payment (no changes will be made)...",submitMessage:"Submitting XRP payment to Ledger...",amount:this.txUiService.amountField()},r))})}checkCreate(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulated Check create (no changes will be made)...",submitMessage:"Submitting Check create to Ledger...",amount:"0"},r))})}checkCancel(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulated Check cancel (no changes will be made)...",submitMessage:"Submitting Check cancel to Ledger...",amount:"0"},r))})}checkCash(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulated Check cash (no changes will be made)...",submitMessage:"Submitting Check cash to Ledger...",amount:"0"},r))})}createCredential(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Create Credentials (no changes will be made)...",submitMessage:"Submitting Create Credentials to Ledger...",amount:"0"},r))})}deleteCredential(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Delete Credentials (no changes will be made)...",submitMessage:"Deleting Credential from Ledger...",amount:"0"},r))})}acceptCredential(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Credentials Accept (no changes will be made)...",submitMessage:"Accepting Credential on the XRP Ledger...",amount:"0"},r))})}setDid(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating DID Set (no changes will be made)...",submitMessage:"Setting DID on the XRP Ledger...",amount:"0"},r))})}deleteDid(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating DID Delete (no changes will be made)...",submitMessage:"Deleting DID on the XRP Ledger...",amount:"0"},r))})}delegateActions(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Delegate Action (no changes will be made)...",submitMessage:"Delegating Action on the XRP Ledger...",amount:"0"},r))})}accountDelete(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Account Delete (no changes will be made)...",submitMessage:"Deleting Account on the XRP Ledger...",amount:"0"},r))})}permissionedDomainSet(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Permissioned Domain Set (no changes will be made)...",submitMessage:"Setting Permissioned Domain on the XRP Ledger...",amount:"0"},r))})}permissionedDomainDelete(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Permission Domain Delete (no changes will be made)...",submitMessage:"Deleting Permission Domain on the XRP Ledger...",amount:"0"},r))})}createEscrow(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Escrow create (no changes will be made)...",submitMessage:"Creating escrow on the XRP Ledger...",amount:"0"},r))})}finishEscrow(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Escrow finish (no changes will be made)...",submitMessage:"Finishing escrow on the XRP Ledger...",amount:"0"},r))})}cancelEscrow(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Escrow cancel (no changes will be made)...",submitMessage:"Cancelling escrow on the XRP Ledger...",amount:"0"},r))})}paymentChannelCreate(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Escrow cancel (no changes will be made)...",submitMessage:"Cancelling escrow on the XRP Ledger...",amount:"0"},r))})}paymentChannelFundTx(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Escrow cancel (no changes will be made)...",submitMessage:"Cancelling escrow on the XRP Ledger...",amount:"0"},r))})}paymentChannelClaimTx(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Escrow cancel (no changes will be made)...",submitMessage:"Cancelling escrow on the XRP Ledger...",amount:"0"},r))})}setTrustline(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Trustline set (no changes will be made)...",submitMessage:"Setting Trustline on the XRP Ledger...",amount:"0"},r))})}removeTrustline(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Trustline removal (no changes will be made)...",submitMessage:"Removing Trustline on the XRP Ledger...",amount:"0"},r))})}issueCurrency(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Currency issuance (no changes will be made)...",submitMessage:"Issuing Currency on the XRP Ledger...",amount:"0"},r))})}clawbackTokens(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Token Clawback (no changes will be made)...",submitMessage:"Clawing back token on the XRP Ledger...",amount:"0"},r))})}mptCreate(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating MPT create (no changes will be made)...",submitMessage:"Creating MPT on the XRP Ledger...",amount:"0"},r))})}mptAuthUnauth(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating MPT Authorization (no changes will be made)...",submitMessage:"Modifying MPT Authorization on the XRP Ledger...",amount:"0"},r))})}mptLockUnlock(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating MPT Lock/Unlock Clawback (no changes will be made)...",submitMessage:"Executing MPT Lock/Unlock on the XRP Ledger...",amount:"0"},r))})}mptSend(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating MPT send (no changes will be made)...",submitMessage:"Sending MPT on the XRP Ledger...",amount:"0"},r))})}mptDestroy(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating MPT destroy (no changes will be made)...",submitMessage:"Destroying MPT on the XRP Ledger...",amount:"0"},r))})}mptClawback(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating MPT Clawback (no changes will be made)...",submitMessage:"Clawing back MPT on the XRP Ledger...",amount:"0"},r))})}mintNft(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating NFT mint (no changes will be made)...",submitMessage:"Minting NFT on the XRP Ledger...",amount:"0"},r))})}burnNft(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating NFT burn (no changes will be made)...",submitMessage:"Burned NFT on the XRP Ledger...",amount:"0"},r))})}updateNftMetaData(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Nft meta data update (no changes will be made)...",submitMessage:"Updating NFT meta data on the XRP Ledger...",amount:"0"},r))})}createBuyNft(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating NFT buy (no changes will be made)...",submitMessage:"Submitting NFT buy on the XRP Ledger...",amount:"0"},r))})}createSellNft(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating NFT sell (no changes will be made)...",submitMessage:"Submitting NFT sell on the XRP Ledger...",amount:"0"},r))})}createNftOffer(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating NFT offer create (no changes will be made)...",submitMessage:"Creating NFT offer on the XRP Ledger...",amount:"0"},r))})}cancelNftOffer(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating NFT offer cancel (no changes will be made)...",submitMessage:"Cancelling NFT offer on the XRP Ledger...",amount:"0"},r))})}createFirewall(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Firewall create (no changes will be made)...",submitMessage:"Creating Firewall on the XRP Ledger...",amount:"0"},r))})}modifyFirewall(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Firewall modification (no changes will be made)...",submitMessage:"Modifying Firewall on the XRP Ledger...",amount:"0"},r))})}authorizeFlag(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Firewall authorization (no changes will be made)...",submitMessage:"Authorizing Firewall on the XRP Ledger...",amount:"0"},r))})}deleteFirewall(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Firewall delete (no changes will be made)...",submitMessage:"Deleteing Firewall on the XRP Ledger...",amount:"0"},r))})}setMultiSign(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating setting signer (no changes will be made)...",submitMessage:"Setting signer list on the XRP Ledger...",amount:"0"},r))})}setRegularKey(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating setting regular key (no changes will be made)...",submitMessage:"Setting regular key on the XRP Ledger...",amount:"0"},r))})}setDepositAuth(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating setting deposit authorization (no changes will be made)...",submitMessage:"Setting deposit authorization on the XRP Ledger...",amount:"0",suppressIndividualFeedback:r.suppressIndividualFeedback},r))})}setNftMinterAddress(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating NFT minter address change (no changes will be made)...",submitMessage:"Modifying NFT minter address on the XRP Ledger...",amount:"0"},r))})}updateMetaData(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating meta data update (no changes will be made)...",submitMessage:"Updated meta data on the XRP Ledger...",amount:"0"},r))})}createAMM(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating AMM create (no changes will be made)...",submitMessage:"Creating AMM on the XRP Ledger...",amount:"0"},r))})}depositToAMM(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating deposit to AMM (no changes will be made)...",submitMessage:"Depositing assets to AMM on the XRP Ledger...",amount:"0"},r))})}withdrawlFromAMM(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating withdrawl from AMM (no changes will be made)...",submitMessage:"Withdrawling assets to AMM on the XRP Ledger...",amount:"0"},r))})}clawbackFromAMM(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating clawaback from AMM (no changes will be made)...",submitMessage:"Clawing back AMM assets on the XRP Ledger...",amount:"0"},r))})}swapViaAMM(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating swap via AMM (no changes will be made)...",submitMessage:"Swaping AMM assets on the XRP Ledger...",amount:"0"},r))})}deleteAMM(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating AMM delete (no changes will be made)...",submitMessage:"Deleting AMM on the XRP Ledger...",amount:"0"},r))})}createOffer(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Offer create (no changes will be made)...",submitMessage:"Creating offer on the XRP Ledger...",amount:"0"},r))})}offerCancel(o,s,a){return z(this,arguments,function*(t,e,i,r={}){return this.execute(i,e,t,le({simulateMessage:"Simulating Offer cancel (no changes will be made)...",submitMessage:"Cancelling offer on the XRP Ledger...",amount:"0",suppressIndividualFeedback:r.suppressIndividualFeedback},r))})}static \u0275fac=function(e){return new(e||n)(Ye(Yu),Ye(Gt),Ye(hn),Ye(Un),Ye(Sr))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var li=class n{xrplService=N(Sr);executionTime=P("");withPerf(t,e){return z(this,null,function*(){this.environment()!=="mainnet"&&console.log(`Entering ${t}`);let i=Date.now();try{return yield e()}finally{let r=Date.now()-i;this.environment()!=="mainnet"&&console.log(`Leaving ${t} in ${r}ms (${(r/1e3).toFixed(2)}s)`),this.executionTime.set(`Execution time: ${r} ms (${(r/1e3).toFixed(2)} sec)`)}})}environment(){return this.xrplService.getNet().environment||"devnet"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-performance-base"]],decls:2,vars:0,template:function(e,i){e&1&&(Ho(0,"p"),w(1,"performance-base works!"),Qo())},encapsulation:2})};var U$e=["*"],$r=class n{constructor(t,e){this.host=t;this.renderer=e}href="";tooltipText="Open in Explorer";tooltipEl;showTimeout=0;hideTimeout=0;onMouseEnter(){window.clearTimeout(this.hideTimeout),this.showTimeout=window.setTimeout(()=>{this.showTooltip()},120)}onMouseLeave(){window.clearTimeout(this.showTimeout),this.hideTimeout=window.setTimeout(()=>{this.hideTooltip()},60)}createTooltip(){this.tooltipEl||(this.tooltipEl=this.renderer.createElement("div"),this.renderer.addClass(this.tooltipEl,"app-tooltip"),this.tooltipEl.innerText=this.tooltipText,this.renderer.appendChild(document.body,this.tooltipEl))}showTooltip(){if(!this.tooltipText||(this.createTooltip(),!this.tooltipEl))return;this.tooltipEl.innerText=this.tooltipText;let t=this.host.nativeElement.getBoundingClientRect(),e=this.tooltipEl.getBoundingClientRect(),i=8,r=0,o=0,s=t.top,a=window.innerHeight-t.bottom;s>e.height+i?r=t.top-e.height-i:r=t.bottom+i,o+e.width>window.innerWidth-6?o=window.innerWidth-e.width-6:o<6&&(o=6),o=t.left+t.width/2-e.width/2,o=Math.max(6,Math.min(o,window.innerWidth-e.width-6)),r=Math.max(6,Math.min(r,window.innerHeight-e.height-6)),this.renderer.setStyle(this.tooltipEl,"top",`${r}px`),this.renderer.setStyle(this.tooltipEl,"left",`${o}px`),this.renderer.setStyle(this.tooltipEl,"opacity","1"),this.renderer.setStyle(this.tooltipEl,"transform","translateY(0) scale(1)")}hideTooltip(){this.tooltipEl&&(this.renderer.removeClass(this.tooltipEl,"show"),setTimeout(()=>{if(this.tooltipEl){try{this.renderer.removeChild(document.body,this.tooltipEl)}catch{}this.tooltipEl=null}},150))}ngOnDestroy(){if(this.tooltipEl){try{this.renderer.removeChild(document.body,this.tooltipEl)}catch{}this.tooltipEl=null}}static \u0275fac=function(e){return new(e||n)(ut(Kt),ut(dr))};static \u0275cmp=nt({type:n,selectors:[["app-tooltip-link"]],hostBindings:function(e,i){e&1&&X("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()})},inputs:{href:"href",tooltipText:"tooltipText"},ngContentSelectors:U$e,decls:2,vars:1,consts:[["target","_blank","rel","noopener noreferrer",1,"tooltip-link",3,"href"]],template:function(e,i){e&1&&(Hr(),Ho(0,"a",0),Pi(1),Qo()),e&2&&mc("href",i.href,La)},styles:[`.tooltip-link{text-decoration:none;color:inherit}.app-tooltip{position:fixed;padding:6px 10px;border-radius:6px;font-size:.85rem;background:#0f172a;color:#fff;box-shadow:0 8px 24px #02061773;white-space:pre-wrap;max-width:340px;overflow-wrap:break-word;opacity:0;transform:translateY(4px) scale(.95);transition:opacity .12s ease,transform .12s ease;pointer-events:none;z-index:999999}.app-tooltip.show{opacity:1;transform:translateY(0) scale(1)}
`],encapsulation:2})};var j$e=["inputEl"],H$e=["dropdown"],W$e=(n,t)=>t.id;function z$e(n,t){if(n&1&&(m(0,"div",8),w(1),g()),n&2){let e=E(2);_(),Ee(e.emptyMessage())}}function q$e(n,t){if(n&1&&(m(0,"div",9),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.group||"")}}function $$e(n,t){n&1&&(m(0,"span",12),w(1,"Current Account"),g())}function K$e(n,t){n&1&&(m(0,"span",13),w(1,"Current Code"),g())}function G$e(n,t){n&1&&(m(0,"span",14),w(1,"Selected"),g())}function X$e(n,t){n&1&&(m(0,"span",15),w(1,"Pending"),g())}function Y$e(n,t){if(n&1&&(m(0,"div",16),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.secondary)}}function Z$e(n,t){if(n&1){let e=ge();Q(0,q$e,2,1,"div",9),m(1,"div",10),X("click",function(){let r=U(e).$implicit,o=E(2);return j(r.isCurrentAccount||r.isCurrentCode||r.isCurrentToken?null:o.onSelect(r))}),m(2,"div",11),w(3),Q(4,$$e,2,0,"span",12),Q(5,K$e,2,0,"span",13),Q(6,G$e,2,0,"span",14),Q(7,X$e,2,0,"span",15),g(),Q(8,Y$e,2,1,"div",16),g()}if(n&2){let e,i,r=t.$implicit,o=t.$index,s=E(2);J(o===0||r.group!==(((e=s.filteredItems()[o-1])==null?null:e.group)??null)?0:-1),_(),Ue("highlighted",s.highlightedIndex()===o||r.id===((i=s.value())==null?null:i.id))("current-account",r.isCurrentAccount)("current-code",r.isCurrentCode)("current-token",r.isCurrentToken),_(2),je(" ",r.display," "),_(),J(r.isCurrentAccount?4:-1),_(),J(r.isCurrentCode?5:-1),_(),J(r.isCurrentToken?6:-1),_(),J(r.pending?7:-1),_(),J(r.secondary?8:-1)}}function Q$e(n,t){if(n&1&&(m(0,"div",6)(1,"div",7),Q(2,z$e,2,1,"div",8),yn(3,Z$e,9,15,null,null,W$e),g()()),n&2){let e=E();_(2),J(e.filteredItems().length===0?2:-1),_(),vn(e.filteredItems())}}var Bi=class n{static openInstance=null;static closeAnyOther(t){this.openInstance&&this.openInstance!==t&&this.openInstance.close(),this.openInstance=t}inputEl;dropdownTpl;items=Ra.required();searchQueryChange=E3();value=Ra(null);valueChange=E3();selected=E3();showSecondaryInInput=Ra(!0);placeholder=Ra("Search...");emptyMessage=Ra("No items found");showShortAddress=Ra(!0);overlay=N(Xu);vcr=N(Dr);overlayRef=null;portal;searchQuery=P("");highlightedIndex=P(-1);displayValue=_e(()=>{if(this.searchQuery())return this.searchQuery();let t=this.value();if(!t)return"";if(this.showSecondaryInInput()){let e=t.secondary?`${t.secondary.slice(0,7)}...${t.secondary.slice(-7)}`:"";return e?`${t.display} (${e})`:t.display}else if(this.showShortAddress()){let e=t.secondary?`${t.secondary.slice(0,7)}...${t.secondary.slice(-7)}`:"";return e?`${t.display} (${e})`:t.display}return t.display});filteredItems=_e(()=>{let t=this.searchQuery().toLowerCase().trim();return t?this.items().filter(e=>e.display.toLowerCase().includes(t)||(e.secondary??"").toLowerCase().includes(t)):this.items()});ngAfterViewInit(){this.portal=new Lc(this.dropdownTpl,this.vcr)}ngOnDestroy(){n.openInstance===this&&(n.openInstance=null),this.close()}open(){if(n.closeAnyOther(this),this.overlayRef?.hasAttached())return;this.overlayRef&&this.overlayRef.dispose();let t=this.overlay.position().flexibleConnectedTo(this.inputEl).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:4},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-4}]).withPush(!1);this.overlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",positionStrategy:t,scrollStrategy:this.overlay.scrollStrategies.reposition(),width:this.inputEl.nativeElement.getBoundingClientRect().width}),this.overlayRef.attach(this.portal),this.overlayRef.backdropClick().subscribe(()=>this.close()),this.scrollToSelected()}toggle(){this.overlayRef?.hasAttached()?this.close():this.open()}close(){this.overlayRef?.dispose(),this.overlayRef=null,this.highlightedIndex.set(-1),this.searchQueryChange.emit(this.searchQuery()),n.openInstance===this&&(n.openInstance=null)}onInput(t){let e=t.target.value;this.searchQuery.set(e),this.searchQueryChange.emit(e),this.open()}onSelect(t){t.isCurrentAccount||(this.valueChange.emit(t),this.selected.emit(t),this.searchQuery.set(""),this.close())}onKeydown(t){let e=this.filteredItems();if(!e.length||!this.overlayRef?.hasAttached())return;let i=this.highlightedIndex();switch(t.key){case"ArrowDown":t.preventDefault(),i=i<e.length-1?i+1:0;break;case"ArrowUp":t.preventDefault(),i=i<=0?e.length-1:i-1;break;case"Enter":if(i>=0){t.preventDefault();let r=e[i];r.isCurrentAccount||this.onSelect(r)}return;case"Escape":this.close();return;default:return}this.highlightedIndex.set(i),requestAnimationFrame(()=>{this.overlayRef?.overlayElement.querySelector(".combobox-item.highlighted")?.scrollIntoView({block:"nearest",behavior:"smooth"})})}scrollToSelected(){let t=this.value();if(!t)return;let e=this.filteredItems().findIndex(i=>i.id===t.id);e!==-1&&(this.highlightedIndex.set(e),setTimeout(()=>{this.overlayRef?.overlayElement.querySelector(".combobox-item.highlighted")?.scrollIntoView({block:"nearest"})}))}handleOutsideClick(t){if(!this.overlayRef?.hasAttached())return;let e=this.inputEl.nativeElement,i=this.overlayRef.overlayElement;e.contains(t.target)||i.contains(t.target)||this.close()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-select-search-dropdown"]],viewQuery:function(e,i){if(e&1&&(Et(j$e,7),Et(H$e,5)),e&2){let r;_t(r=bt())&&(i.inputEl=r.first),_t(r=bt())&&(i.dropdownTpl=r.first)}},hostBindings:function(e,i){e&1&&X("mousedown",function(o){return i.handleOutsideClick(o)},q9)},inputs:{items:[1,"items"],value:[1,"value"],showSecondaryInInput:[1,"showSecondaryInInput"],placeholder:[1,"placeholder"],emptyMessage:[1,"emptyMessage"],showShortAddress:[1,"showShortAddress"]},outputs:{searchQueryChange:"searchQueryChange",valueChange:"valueChange",selected:"selected"},decls:7,vars:2,consts:[["inputEl",""],["dropdown",""],[1,"combobox-container"],["type","text","autocomplete","off",1,"combobox-input",3,"focus","input","keydown","value","placeholder"],["type","button",1,"combobox-toggle",3,"click"],["name","chevron-down","size","18"],[1,"combobox-wrapper-stop"],[1,"combobox-dropdown-overlay"],[1,"combobox-empty"],[1,"combobox-group-header"],[1,"combobox-item",3,"click"],[1,"item-name"],[1,"current-account-badge"],[1,"current-code-badge"],[1,"current-token-badge"],[1,"ml-2","text-xs","bg-orange-100","text-orange-800","px-2","py-0.5","rounded-full"],[1,"item-address"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",2)(1,"input",3,0),X("focus",function(){return U(r),j(i.open())})("input",function(s){return U(r),j(i.onInput(s))})("keydown",function(s){return U(r),j(i.onKeydown(s))}),g(),m(3,"button",4),X("click",function(){return U(r),j(i.toggle())}),ee(4,"lucide-icon",5),g()(),nn(5,Q$e,5,1,"ng-template",null,1,vr)}e&2&&(_(),oe("value",i.displayValue())("placeholder",i.placeholder()))},dependencies:[ln,En,xr],styles:['.combobox-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.combobox-input[_ngcontent-%COMP%]{width:100%;padding:.5rem 2.5rem .5rem .75rem;border:1px solid #cbd5e1;border-radius:6px;font-size:.95rem;background:#fff}.combobox-toggle[_ngcontent-%COMP%]{position:absolute;right:8px;top:25%;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:4px;color:#666}.combobox-toggle[_ngcontent-%COMP%]:hover{color:#333}.combobox-wrapper-stop[_ngcontent-%COMP%]{width:100%;border-radius:8px}.combobox-wrapper[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;border:none!important;box-shadow:0 10px 25px -5px #00000026,0 4px 6px -2px #0000001a;border-radius:8px;overflow:hidden;background:#fff}.destination-combobox-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;transform:translateZ(0);-webkit-transform:translateZ(0)}.combobox-dropdown[_ngcontent-%COMP%]{top:100%;left:0;right:0;margin-top:8px;max-height:380px;overflow-y:auto;background:#fff;border:1px solid #cbd5e1;border-radius:12px;box-shadow:0 20px 40px #0000002e;z-index:99999;padding:8px 0;transform:translateZ(0);-webkit-transform:translateZ(0);backface-visibility:hidden;scrollbar-width:thin;scrollbar-color:#94a3b8 #f8fafc}.item-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:#1e40af}.item-address[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.84rem;color:#64748b;margin-top:2px}.combobox-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#94a3b8;font-style:italic}.combobox-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.combobox-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8fafc;border-radius:10px}.combobox-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:10px;border:2px solid #f8fafc}.combobox-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.combobox-dropdown-portal[_ngcontent-%COMP%]{max-height:420px;overflow-y:auto;background:#fff;border:1px solid #cbd5e1;border-radius:12px;box-shadow:0 20px 50px #00000038;padding:8px 0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);scrollbar-width:thin}.combobox-dropdown-overlay[_ngcontent-%COMP%]{max-height:420px;overflow-y:auto;background:#fff;border:1px solid #cbd5e1;box-shadow:0 20px 50px #00000038;padding:8px 0;min-width:387px;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);width:calc(100% - 2px)!important;box-sizing:border-box;border-radius:12px!important;margin-top:4px}.combobox-item[_ngcontent-%COMP%]{padding:12px 16px;cursor:pointer;transition:background .15s}.combobox-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.combobox-item[_ngcontent-%COMP%]:hover, .combobox-item.highlighted[_ngcontent-%COMP%]{background:#f0f7ff}.cdk-overlay-pane[_ngcontent-%COMP%], .cdk-overlay-pane[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{position:fixed!important}.combobox-item.current-account[_ngcontent-%COMP%]{background:#f8fafc;border-left:3px solid #10b981;position:relative;pointer-events:none;cursor:not-allowed;padding-left:13px!important}.combobox-item.current-account[_ngcontent-%COMP%]:before{content:"";color:#10b981;font-weight:700;position:absolute;left:8px;top:50%;transform:translateY(-50%);font-size:10px}.current-account-badge[_ngcontent-%COMP%], .current-code-badge[_ngcontent-%COMP%], .current-token-badge[_ngcontent-%COMP%]{color:#10b981;font-size:.75rem;font-weight:600;margin-left:6px;opacity:.9}'],changeDetection:0})};var J$e=()=>({standalone:!0});function eKe(n,t){if(n&1){let e=ge();m(0,"label",1)(1,"input",6),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.isMemoEnabled,r)||(o.isMemoEnabled=r),j(r)}),g(),ee(2,"span",7),w(3," Add Memo "),g()}if(n&2){let e=E(2);_(),Oe("ngModel",e.isMemoEnabled)}}function tKe(n,t){if(n&1){let e=ge();m(0,"label",1)(1,"input",8),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.useMultiSign,r)||(o.useMultiSign=r),j(r)}),X("ngModelChange",function(){U(e);let r=E(2);return j(r.toggleMultiSign())}),g(),ee(2,"span",7),w(3," Use Multi-Sign "),g()}if(n&2){let e=E(2);_(),Oe("ngModel",e.useMultiSign)}}function nKe(n,t){if(n&1){let e=ge();m(0,"label",1)(1,"input",9),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.isRegularKeyAddress,r)||(o.isRegularKeyAddress=r),j(r)}),g(),ee(2,"span",7),w(3," Use Regular Key "),g()}if(n&2){let e=E(2);_(),Oe("ngModel",e.isRegularKeyAddress)}}function iKe(n,t){if(n&1){let e=ge();m(0,"label",1)(1,"input",10),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.isTicket,r)||(o.isTicket=r),j(r)}),g(),ee(2,"span",7),w(3," Use Ticket "),g()}if(n&2){let e=E(2);_(),Oe("ngModel",e.isTicket)}}function rKe(n,t){if(n&1){let e=ge();m(0,"label",1)(1,"input",11),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.txUiService.isSimulateEnabled,r)||(o.txUiService.isSimulateEnabled=r),j(r)}),X("ngModelChange",function(r){U(e);let o=E(2);return j(o.toggleSimulate(r))}),g(),ee(2,"span",7),w(3," Simulate "),g()}if(n&2){let e=E(2);_(),Oe("ngModel",e.txUiService.isSimulateEnabled)}}function oKe(n,t){if(n&1){let e=ge();m(0,"textarea",12),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.memoField,r)||(o.memoField=r),j(r)}),g()}if(n&2){let e=E(2);Oe("ngModel",e.memoField)}}function sKe(n,t){if(n&1){let e=ge();m(0,"div",3)(1,"div",13)(2,"label"),w(3,"Signers"),g(),m(4,"textarea",14),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.multiSignAddress,r)||(o.multiSignAddress=r),j(r)}),g()(),m(5,"div",13)(6,"label"),w(7,"Seeds"),g(),m(8,"textarea",15),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.multiSignSeeds,r)||(o.multiSignSeeds=r),j(r)}),g()(),m(9,"div",16)(10,"label"),w(11,"Quorum"),g(),m(12,"input",17),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.signerQuorum,r)||(o.signerQuorum=r),j(r)}),g()()()}if(n&2){let e=E(2);_(4),Oe("ngModel",e.multiSignAddress),_(4),Oe("ngModel",e.multiSignSeeds),_(4),Oe("ngModel",e.signerQuorum)}}function aKe(n,t){if(n&1){let e=ge();m(0,"div",4)(1,"div",18)(2,"div",19)(3,"label"),w(4,"Regular Key Address"),g(),m(5,"input",20),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.regularKeyAddress,r)||(o.regularKeyAddress=r),j(r)}),g()()(),m(6,"div",18)(7,"div",19)(8,"label"),w(9,"Regular Key Seed"),g(),m(10,"input",21),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.regularKeySeed,r)||(o.regularKeySeed=r),j(r)}),g()()()()}if(n&2){let e=E(2);_(5),Oe("ngModel",e.regularKeyAddress),_(5),Oe("ngModel",e.regularKeySeed)}}function lKe(n,t){if(n&1&&(m(0,"option",24),w(1),g()),n&2){let e=t.$implicit;oe("value",e),_(),Ee(e)}}function cKe(n,t){if(n&1){let e=ge();m(0,"select",23),Ne("ngModelChange",function(r){U(e);let o=E(3);return Ve(o.selectedTickets,r)||(o.selectedTickets=r),j(r)}),yn(1,lKe,2,2,"option",24,pc),g()}if(n&2){let e=E(3);Oe("ngModel",e.selectedTickets),oe("ngModelOptions",Ei(2,J$e)),_(),vn(e.ticketArray())}}function dKe(n,t){if(n&1&&(m(0,"div",26),w(1,"Selected: "),m(2,"strong"),w(3),g()()),n&2){let e=E(4);_(3),je("Ticket #",e.selectedSingleTicket())}}function uKe(n,t){if(n&1){let e=ge();m(0,"app-select-search-dropdown",25),X("valueChange",function(r){U(e);let o=E(3);return j(o.selectedSingleTicket.set((r==null?null:r.id)??""))}),g(),Q(1,dKe,4,1,"div",26)}if(n&2){let e=E(3);oe("items",e.ticketItems())("value",e.selectedTicketItem()),_(),J(e.selectedSingleTicket()?1:-1)}}function hKe(n,t){if(n&1&&(m(0,"div",5)(1,"div",19)(2,"label"),w(3,"Ticket Sequence"),g(),Q(4,cKe,3,3,"select",22)(5,uKe,2,3),g()()),n&2){let e=E(2);_(4),J(e.multiSelectMode()?4:5)}}function fKe(n,t){if(n&1&&(m(0,"div",0),Q(1,eKe,4,1,"label",1),Q(2,tKe,4,1,"label",1),Q(3,nKe,4,1,"label",1),Q(4,iKe,4,1,"label",1),Q(5,rKe,4,1,"label",1),g(),Q(6,oKe,1,1,"textarea",2),Q(7,sKe,13,3,"div",3),Q(8,aKe,11,2,"div",4),Q(9,hKe,6,1,"div",5)),n&2){let e=E();_(),J(e.showMemo?1:-1),_(),J(e.showMultiSign&&e.multiSigningEnabled()?2:-1),_(),J(e.showRegularKey&&e.regularKeySigningEnabled()?3:-1),_(),J(e.showTicket&&e.ticketArray().length>0?4:-1),_(),J(e.showSimulate?5:-1),_(),J(e.isMemoEnabled()?6:-1),_(),J(e.useMultiSign()?7:-1),_(),J(e.isRegularKeyAddress()?8:-1),_(),J(e.isTicket()&&e.showTicket&&e.ticketArray().length>0?9:-1)}}var ki=class n{txUiService=N(hn);utilsService=N(Gt);Array=Array;activeTab;showWhenTab="*";multiSigningEnabled=P(!1);regularKeySigningEnabled=P(!1);showMemo=!0;showMultiSign=!0;showRegularKey=!0;showTicket=!0;showSimulate=!0;isMemoEnabled=this.txUiService.isMemoEnabled;useMultiSign=this.txUiService.useMultiSign;isRegularKeyAddress=this.txUiService.isRegularKeyAddress;isTicket=this.txUiService.isTicket;memoField=this.txUiService.memoField;multiSignAddress=this.txUiService.multiSignAddress;multiSignSeeds=this.txUiService.multiSignSeeds;signerQuorum=this.txUiService.signerQuorum;regularKeyAddress=this.txUiService.regularKeyAddress;regularKeySeed=this.txUiService.regularKeySeed;selectedSingleTicket=this.txUiService.selectedSingleTicket;selectedTickets=this.txUiService.selectedTickets;multiSelectMode=this.txUiService.multiSelectMode;ticketArray=this.txUiService.ticketArray;ticketItems=_e(()=>this.ticketArray().map(t=>({id:t,display:`Ticket #${t}`,secondary:`Sequence: ${t}`,isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1})));selectedTicketItem=_e(()=>{let t=this.selectedSingleTicket();return t&&this.ticketItems().find(e=>e.id===t)||null});toggleSimulate(t){this.txUiService.toggleSimulate(t)}toggleMultiSign(){this.utilsService.toggleMultiSign(this.useMultiSign(),this.txUiService.signers(),this.txUiService.currentWallet()?.classicAddress||""),this.multiSignAddress.set(this.txUiService.signers().map(t=>t.Account).join(`,
`)),this.multiSignSeeds.set(this.txUiService.signers().map(t=>t.seed).join(`,
`)),this.signerQuorum.set(this.txUiService.signerQuorum())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-transaction-options"]],inputs:{activeTab:"activeTab",showWhenTab:"showWhenTab",multiSigningEnabled:"multiSigningEnabled",regularKeySigningEnabled:"regularKeySigningEnabled",showMemo:"showMemo",showMultiSign:"showMultiSign",showRegularKey:"showRegularKey",showTicket:"showTicket",showSimulate:"showSimulate"},decls:1,vars:1,consts:[[1,"switch-group"],[1,"switch"],["name","memoField","placeholder","Separate multiple memos with commas",1,"memo-input",3,"ngModel"],[1,"multisign-grid"],[1,"regular-key-fields"],[1,"ticket-fields"],["type","checkbox","name","isMemoEnabled",3,"ngModelChange","ngModel"],[1,"slider"],["type","checkbox","name","useMultiSign",3,"ngModelChange","ngModel"],["type","checkbox","name","isRegularKeyAddress",3,"ngModelChange","ngModel"],["type","checkbox","name","isTicket",3,"ngModelChange","ngModel"],["type","checkbox","name","isSimulateEnabled",3,"ngModelChange","ngModel"],["name","memoField","placeholder","Separate multiple memos with commas",1,"memo-input",3,"ngModelChange","ngModel"],[1,"multisign-field"],["name","multiSignAddress","readonly","",3,"ngModelChange","ngModel"],["name","multiSignSeeds","readonly","",3,"ngModelChange","ngModel"],[1,"multisign-field","quorum-field"],["type","text","name","signerQuorumField","readonly","",3,"ngModelChange","ngModel"],[1,"form-row"],[1,"form-group"],["type","text","name","regularKeyAddress","readonly","",3,"ngModelChange","ngModel"],["type","text","name","regularKeySeed","readonly","",3,"ngModelChange","ngModel"],["multiple","",3,"ngModel","ngModelOptions"],["multiple","",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value"],["placeholder","Search or select a ticket...","noResultsText","No tickets available",3,"valueChange","items","value"],[1,"selected-ticket-preview",2,"margin-top","8px","font-size","0.9em","color","#059669"]],template:function(e,i){e&1&&Q(0,fKe,10,9),e&2&&J(i.showWhenTab==="*"||(i.Array.isArray(i.showWhenTab)?i.showWhenTab.includes((i.activeTab==null?null:i.activeTab())??""):i.showWhenTab===(i.activeTab==null?null:i.activeTab()))?0:-1)},dependencies:[ln,Kn,Uue,jue,Bn,cS,p8,$n,Wn,Bi],encapsulation:2})};var pKe=["paymentJson"],mKe=["txResultJson"];function gKe(n,t){if(n&1&&(m(0,"div",2),ee(1,"div",6),m(2,"span"),w(3),g()()),n&2){let e=E();_(3),Ee(e.txUiService.spinnerMessage||"Loading...")}}function yKe(n,t){if(n&1&&(m(0,"div",10),w(1),m(2,"a",11),w(3),g()()),n&2){let e=t.$implicit,i=t.$index,r=E(3);_(),je(" Transaction ",i+1," hash: "),_(),oe("href",r.url()+"tx/"+e,La),_(),je(" ",e," ")}}function vKe(n,t){if(n&1&&(m(0,"span"),w(1),g(),m(2,"div",9),yn(3,yKe,4,3,"div",10,pc),g()),n&2){let e=E(2);_(),Ee(e.txUiService.successMessage),_(2),vn(e.txUiService.txHashSignal())}}function _Ke(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E(2);_(),Ee(e.txUiService.successMessage)}}function bKe(n,t){if(n&1&&(m(0,"div",3),ee(1,"lucide-icon",7),m(2,"div",8),Q(3,vKe,5,1)(4,_Ke,2,1,"span"),g()()),n&2){let e=E();_(3),J(e.txUiService.txHashSignal()&&!e.txUiService.isSimulateEnabled()?3:4)}}function wKe(n,t){if(n&1&&(m(0,"span"),w(1,"Transaction hash: "),m(2,"a",11),w(3),g()()),n&2){let e=E(3);_(2),oe("href",`${e.url()}tx/`+e.txUiService.txHashSignal(),La),_(),je(" ",e.txUiService.txHashSignal()," ")}}function SKe(n,t){if(n&1&&(m(0,"span"),w(1),g(),ee(2,"br"),Q(3,wKe,4,2,"span")),n&2){let e=E(2);_(),Ee(e.txUiService.result),_(2),J(e.txUiService.txHashSignal().length>0?3:-1)}}function CKe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E(2);_(),Ee(e.txUiService.result)}}function xKe(n,t){if(n&1&&(m(0,"div",4),ee(1,"ng-icon",12),m(2,"div",13),Q(3,SKe,4,2)(4,CKe,2,1,"span"),g()()),n&2){let e=E();_(3),J(e.txUiService.txHashSignal()&&!e.txUiService.isSimulateEnabled()?3:4)}}function kKe(n,t){if(n&1){let e=ge();m(0,"div",5)(1,"div",14)(2,"h5",15),w(3,"Transaction JSON"),g(),m(4,"div",16)(5,"button",17),X("click",function(){U(e);let r=E();return j(r.copyUtilService.copyTxSignal())}),ee(6,"ng-icon",18),w(7," Copy "),g(),m(8,"button",19),X("click",function(){U(e);let r=E();return j(r.downloadUtilService.downloadTxSignal())}),ee(9,"ng-icon",20),w(10," Download "),g()()(),m(11,"pre",21),ee(12,"code",22,0),g()()}}function MKe(n,t){if(n&1){let e=ge();m(0,"div",5)(1,"div",14)(2,"h3",15),w(3,"Transaction Result"),g(),m(4,"div",16)(5,"button",17),X("click",function(){U(e);let r=E();return j(r.copyUtilService.copyTxResultSignal())}),ee(6,"ng-icon",18),w(7," Copy "),g(),m(8,"button",19),X("click",function(){U(e);let r=E();return j(r.downloadUtilService.downloadTxResultSignal())}),ee(9,"ng-icon",20),w(10," Download "),g()()(),m(11,"pre",21),ee(12,"code",22,1),g()()}}var mi=class n{constructor(t,e,i,r){this.txUiService=t;this.copyUtilService=e;this.downloadUtilService=i;this.xrplService=r;rd(()=>{let s=this.txUiService.txSignal(),a=this.txUiService.txResultSignal();queueMicrotask(()=>{this.paymentJson?.nativeElement&&(this.paymentJson.nativeElement.textContent=s?JSON.stringify(s,null,2):"// No transaction",Prism.highlightElement(this.paymentJson.nativeElement)),this.txResultJson?.nativeElement&&(this.txResultJson.nativeElement.textContent=a?JSON.stringify(a,null,2):"// No result yet",Prism.highlightElement(this.txResultJson.nativeElement))})});let o=this.xrplService.getNet().environment.toUpperCase();this.url.set(Re.XRPL_WIN_URL[o]||Re.XRPL_WIN_URL.DEVNET)}paymentJson;txResultJson;url=P("");static \u0275fac=function(e){return new(e||n)(ut(hn),ut(Vn),ut(Gn),ut(Sr))};static \u0275cmp=nt({type:n,selectors:[["app-transaction-preview"]],viewQuery:function(e,i){if(e&1&&(Et(pKe,5),Et(mKe,5)),e&2){let r;_t(r=bt())&&(i.paymentJson=r.first),_t(r=bt())&&(i.txResultJson=r.first)}},decls:5,vars:5,consts:[["paymentJson",""],["txResultJson",""],[1,"spinner-row"],[1,"success-message"],[1,"tx-message","error"],[1,"tx-preview-container"],[1,"spinner"],["name","check","size","20"],[1,"success-text"],[1,"tx-hashes"],[1,"tx-hash-item"],["target","_blank","rel","noopener noreferrer",1,"tx-hash-link",3,"href"],["name","heroExclamationCircle","size","20",1,"text-red-600"],[1,"tx-text"],[1,"tx-header"],[1,"tx-title"],[1,"tx-actions"],["title","Copy JSON",1,"copy-btn",3,"click"],["name","heroClipboardDocumentList","size","20",1,"text-red-600"],["title","Download JSON",1,"download-btn",3,"click"],["name","heroArrowDownOnSquareStack","size","20",1,"text-red-600"],[1,"tx-json","language-json"],[1,"language-json"]],template:function(e,i){e&1&&(Q(0,gKe,4,1,"div",2),Q(1,bKe,5,1,"div",3),Q(2,xKe,5,1,"div",4),Q(3,kKe,14,0,"div",5),Q(4,MKe,14,0,"div",5)),e&2&&(J(i.txUiService.spinner()?0:-1),_(),J(i.txUiService.isSuccess&&!i.txUiService.isError?1:-1),_(),J(i.txUiService.isError&&i.txUiService.result?2:-1),_(),J(i.txUiService.txSignal().length>0?3:-1),_(),J(i.txUiService.txResultSignal().length>0?4:-1))},dependencies:[ii,En,xr],encapsulation:2,data:{animation:[Hn("toastAnimation",[Ln(":enter",[kt({opacity:0,transform:"translateY(100%)"}),Pn("300ms ease-out",kt({opacity:1,transform:"translateY(0)"}))]),Ln(":leave",[Pn("200ms ease-in",kt({opacity:0,transform:"translateY(50%)"}))])])]}})};function yt(n){n||(n=N(Zt));let t=new jn(e=>{if(n.destroyed){e.next();return}return n.onDestroy(e.next.bind(e))});return e=>e.pipe(fn(t))}var TKe=()=>["create","close","claim","fund"],EKe=(n,t)=>t.id;function AKe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",30),ee(3,"ng-icon",31),g(),m(4,"div")(5,"h2",32),w(6,"Create Payment Channel"),g(),m(7,"p",33),w(8,"Create a payment channel to another XRPL address"),g()()()())}function DKe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",34),ee(3,"lucide-icon",11),g(),m(4,"div")(5,"h2",32),w(6,"Fund Payment Channel"),g(),m(7,"p",33),w(8,"Fund existing payment channel created by the selected account"),g()()()())}function IKe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",34),ee(3,"lucide-icon",12),g(),m(4,"div")(5,"h2",32),w(6,"Claim Payment Channel"),g(),m(7,"p",33),w(8,"Claim funds from payment channel"),g()()()())}function FKe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",35),ee(3,"ng-icon",36),g(),m(4,"div")(5,"h2",32),w(6,"Close Payment Channel"),g(),m(7,"p",33),w(8,"Close existing payment channel created by the selected account"),g()()()())}function PKe(n,t){n&1&&w(0," has no payment channels. ")}function LKe(n,t){n&1&&w(0," created. ")}function RKe(n,t){n&1&&w(0," available for funding. ")}function OKe(n,t){n&1&&w(0," with claimable funds. ")}function NKe(n,t){n&1&&w(0," that can be closed. ")}function BKe(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3),Q(4,LKe,1,0)(5,RKe,1,0)(6,OKe,1,0)(7,NKe,1,0)),n&2){let e,i=E();_(2),Ee(i.channelCount),_(),je(" payment channel",i.channelCount===1?"":"s"," "),_(),J((e=i.activeTab)==="create"?4:e==="fund"?5:e==="claim"?6:e==="close"?7:-1)}}function VKe(n,t){if(n&1&&(m(0,"div",41),ee(1,"span",43),w(2," on XRPL Win"),g()),n&2){let e=E();_(),oe("innerHTML",e.links,pn)}}function UKe(n,t){n&1&&w(0," Created Payment Channels ")}function jKe(n,t){n&1&&w(0," Fundable Payment Channels ")}function HKe(n,t){n&1&&w(0," Claimable Payment Channels ")}function WKe(n,t){n&1&&w(0," Closable Payment Channels ")}function zKe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2192 ",e.destination.slice(0,7)+"..."+e.destination.slice(-7)," ")}}function qKe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2190 ",(e.sender==null?null:e.sender.slice(0,7))+"..."+(e.sender==null?null:e.sender.slice(-7))," ")}}function $Ke(n,t){if(n&1&&(m(0,"div"),w(1,"Expires: "),m(2,"code"),w(3),g()()),n&2){let e=E().$implicit;_(3),Ee(e.expiration)}}function KKe(n,t){if(n&1){let e=ge();m(0,"li",49)(1,"app-tooltip-link",50)(2,"div",51),w(3),Q(4,zKe,1,1)(5,qKe,1,1),g(),m(6,"div",52)(7,"div"),w(8,"Channel ID: "),m(9,"code"),w(10),g()(),m(11,"div"),w(12,"Remaining: "),m(13,"strong"),w(14),g(),w(15),g(),Q(16,$Ke,4,1,"div"),m(17,"div"),w(18),g()()(),m(19,"button",53),X("click",function(r){let o=U(e).$implicit;return E(4).copyAndToast(o.id,"Channel ID"),j(r.stopPropagation())}),lt(),m(20,"svg",54),ee(21,"rect",55)(22,"path",56),g()()()}if(n&2){let e=t.$implicit,i=E(3),r=E();_(),oe("href",r.txUiService.explorerUrl()+"entry/"+e.id),_(2),je("",e.totalAmount," "),_(),J(i.activeTab==="create"||i.activeTab==="close"?4:5),_(6),ei("",e.id.slice(0,10),"...",e.id.slice(-8)),_(4),Ee(e.remaining),_(),je(" (",e.balance," claimed)"),_(),J(e.expiration?16:-1),_(2),je("Settle Delay: ",e.settleDelay,"s")}}function GKe(n,t){if(n&1&&(m(0,"ul",48),yn(1,KKe,23,9,"li",49,EKe),g()),n&2){let e=E(2);_(),vn(e.channelsToShow)}}function XKe(n,t){if(n&1){let e=ge();m(0,"div",44),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",45)(2,"span"),Q(3,UKe,1,0)(4,jKe,1,0)(5,HKe,1,0)(6,WKe,1,0),w(7),g(),lt(),m(8,"svg",46),ee(9,"path",47),g()(),Q(10,GKe,3,0,"ul",48),g()}if(n&2){let e,i=E(),r=E();_(3),J((e=i.activeTab)==="create"?3:e==="fund"?4:e==="claim"?5:e==="close"?6:-1),_(4),je(" (",i.channelCount,") "),_(),In("transform",r.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(r.infoPanelExpanded()?10:-1)}}function YKe(n,t){if(n&1&&(m(0,"div",14)(1,"div",37)(2,"div",38)(3,"div",39),ee(4,"ng-icon",40),m(5,"code"),w(6),g(),Q(7,PKe,1,0)(8,BKe,8,3),Q(9,VKe,3,1,"div",41),g(),Q(10,XKe,11,5,"div",42),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.channelCount===0?7:8),_(2),J(e.links?9:-1),_(),J(e.channelCount>0?10:-1)}}function ZKe(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",57)(2,"div",58),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function QKe(n,t){if(n&1){let e=ge();m(0,"div",59)(1,"label"),w(2,"XRP Amount"),g(),m(3,"p",60),w(4,"Amount of XRP, in drops, to deduct from the sender's balance and set aside in this channel."),g(),m(5,"input",61),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()}if(n&2){let e=E(2);_(5),Oe("ngModel",e.amountField)}}function JKe(n,t){if(n&1){let e=ge();m(0,"div",59)(1,"label",62),w(2,"Destination"),g(),m(3,"p",60),w(4,'Address to receive XRP claims against this channel. This is also known as the "destination address" for the channel.'),g(),m(5,"app-select-search-dropdown",63),X("valueChange",function(r){U(e);let o=E(2);return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()()}if(n&2){let e=E(2);_(5),oe("items",e.destinationItems())("value",e.selectedDestinationItem())}}function eGe(n,t){if(n&1&&(m(0,"div",19),Q(1,QKe,6,1,"div",59),Q(2,JKe,6,2,"div",59),g()),n&2){let e=E();_(),J(e.activeTab()!=="close"?1:-1),_(),J(e.activeTab()==="create"||e.activeTab()==="fund"?2:-1)}}function tGe(n,t){if(n&1){let e=ge();m(0,"div",59)(1,"label"),w(2,"Settle Delay"),g(),m(3,"p",60),w(4,"Amount of time the source address must wait before closing the channel if it has unclaimed XRP."),g(),m(5,"input",65),Ne("ngModelChange",function(r){U(e);let o=E(3);return Ve(o.settleDelayField,r)||(o.settleDelayField=r),j(r)}),g()()}if(n&2){let e=E(3);_(5),Oe("ngModel",e.settleDelayField)}}function nGe(n,t){if(n&1){let e=ge();m(0,"div",59)(1,"label"),w(2,"Destination Tag"),g(),m(3,"p",60),w(4,"Arbitrary tag to further specify the destination for this payment channel, such as a hosted recipient at the destination address."),g(),m(5,"input",64),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.destinationTagField,r)||(o.destinationTagField=r),j(r)}),g()(),Q(6,tGe,6,1,"div",59)}if(n&2){let e=E(2);_(5),Oe("ngModel",e.destinationTagField),_(),J(e.activeTab()==="create"?6:-1)}}function iGe(n,t){if(n&1){let e=ge();m(0,"div",59)(1,"label"),w(2,"Channel ID"),g(),m(3,"p",60),w(4," The unique ID of the channel as a 64-character"),ee(5,"br"),w(6," hexadecimal string. "),g(),m(7,"input",66),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.channelIDField,r)||(o.channelIDField=r),j(r)}),g()()}if(n&2){let e=E(2);_(7),Oe("ngModel",e.channelIDField)}}function rGe(n,t){if(n&1&&(m(0,"div",19),Q(1,nGe,7,2),Q(2,iGe,8,1,"div",59),g()),n&2){let e=E();_(),J(e.activeTab()==="create"||e.activeTab()==="fund"?1:-1),_(),J(e.activeTab()==="claim"||e.activeTab()==="fund"||e.activeTab()==="close"?2:-1)}}function oGe(n,t){if(n&1){let e=ge();m(0,"div",67)(1,"label"),w(2,"Sender Public Key"),g(),m(3,"p",60),w(4,"The public key used for the signature, as hexadecimal"),g(),m(5,"input",68),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.publicKeyField,r)||(o.publicKeyField=r),j(r)}),g()(),m(6,"div",59)(7,"label"),w(8,"Claim Signature"),g(),m(9,"p",60),w(10,"The signed message contains the channel ID and the amount of the claim"),g(),m(11,"input",69),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.channelClaimSignatureField,r)||(o.channelClaimSignatureField=r),j(r)}),g()()}if(n&2){let e=E(2);_(5),Oe("ngModel",e.publicKeyField),_(6),Oe("ngModel",e.channelClaimSignatureField)}}function sGe(n,t){if(n&1&&(m(0,"div",19),Q(1,oGe,12,2),g()),n&2){let e=E();_(),J(e.activeTab()==="claim"?1:-1)}}function aGe(n,t){if(n&1){let e=ge();m(0,"div",59)(1,"label",70),w(2,"Cancel After Time"),g(),m(3,"p",60),w(4," The time, in seconds since the Ripple Epoch, "),ee(5,"br"),w(6," when this channel expires. "),g(),m(7,"div",71)(8,"input",72),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.paymentChannelCancelAfterTimeField,r)||(o.paymentChannelCancelAfterTimeField=r),j(r)}),X("focus",function(){U(e);let r=E(2);return j(r.populateDefaultDateTime())}),g(),m(9,"div",73)(10,"button",74),X("click",function(){U(e);let r=E(2);return j(r.setCancelAfterExpirationToNow())}),w(11,"Now"),g(),m(12,"button",74),X("click",function(){U(e);let r=E(2);return j(r.addCancelAfterToExpiration(10))}),w(13,"+10s"),g(),m(14,"button",74),X("click",function(){U(e);let r=E(2);return j(r.addCancelAfterToExpiration(30))}),w(15,"+30s"),g(),m(16,"button",74),X("click",function(){U(e);let r=E(2);return j(r.addCancelAfterToExpiration(60))}),w(17,"+1min"),g(),m(18,"button",74),X("click",function(){U(e);let r=E(2);return j(r.addCancelAfterToExpiration(300))}),w(19,"+5min"),g()()()(),ee(20,"div",59)}if(n&2){let e=E(2);_(8),Oe("ngModel",e.paymentChannelCancelAfterTimeField)}}function lGe(n,t){if(n&1&&(m(0,"div",19),Q(1,aGe,21,1),g()),n&2){let e=E();_(),J(e.activeTab()==="create"?1:-1)}}function cGe(n,t){if(n&1){let e=ge();m(0,"div",82),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("renew"))}),m(1,"div",83),ee(2,"input",84),lt(),m(3,"svg",85),ee(4,"path",86),g(),dn(),m(5,"span",87),w(6,"Renew"),g()(),m(7,"div",88),w(8,"0x00010000"),g(),m(9,"div",89),w(10," When set, the channel will be renewed on a "),m(11,"code"),w(12,"PaymentChannelFund"),g(),w(13," transaction. "),g()()}if(n&2){let e=E(2);Ue("enabled",e.flags.renew),_(2),oe("checked",e.flags.renew)}}function dGe(n,t){if(n&1){let e=ge();m(0,"div",90),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("close"))}),m(1,"div",83),ee(2,"input",91),lt(),m(3,"svg",85),ee(4,"path",92)(5,"path",93),g(),dn(),m(6,"span",87),w(7,"Close"),g(),m(8,"span",94),w(9,"Locked"),g()(),m(10,"div",88),w(11,"0x00020000"),g(),m(12,"div",89),w(13,"When set on a "),m(14,"code"),w(15,"PaymentChannelClaim"),g(),w(16," transaction, the channel will be closed after the claim."),g()()}n&2&&(Ue("disabled",!0),_(2),oe("checked",!0))}function uGe(n,t){if(n&1&&(m(0,"div",81)(1,"span",95),w(2,"Total Flags Value:"),g(),m(3,"span",96),w(4),g()()),n&2){let e=E(2);_(4),ei("",e.totalFlagsValue()," (",e.totalFlagsHex(),")")}}function hGe(n,t){if(n&1&&(m(0,"div",20)(1,"div",75)(2,"div",76),ee(3,"lucide-icon",77),m(4,"span",78),w(5,"Payment Channel Flags"),g()(),Q(6,cGe,14,3,"div",79),Q(7,dGe,17,3,"div",80),Q(8,uGe,5,2,"div",81),g()()),n&2){let e=E();_(6),J(e.activeTab()==="claim"?6:-1),_(),J(e.activeTab()==="close"?7:-1),_(),J(e.activeTab()!=="close"?8:-1)}}function fGe(n,t){if(n&1){let e=ge();m(0,"button",97),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.handlePaymentChannelAction())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create Channel")}}function pGe(n,t){if(n&1){let e=ge();m(0,"button",98),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.handlePaymentChannelAction())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Close Channel")}}function mGe(n,t){if(n&1){let e=ge();m(0,"button",99),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.handlePaymentChannelAction())}),w(2),g(),m(3,"button",97),ct(4,"async"),X("click",function(){U(e);let r=E();return j(r.generateCreatorClaimSignature())}),w(5),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,4,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Claim/Renew Channel"),_(),oe("disabled",e.txUiService.spinner()||!mt(4,6,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Generate Claim Signature")}}function gGe(n,t){if(n&1){let e=ge();m(0,"button",99),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.handlePaymentChannelAction())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Fund Channel")}}var R8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("create");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");paymentChannelCancelAfterTimeField=P("");paymentChannelCancelAfterTimeUnit=P("seconds");channelIDField=P("");settleDelayField=P("");publicKeyField=P("");channelClaimSignatureField=P("");channelAction=P("create");renewChannel=P("");authorizedWalletAddress=P("");authorizedWallets=[];selectedWalletIndex=P(0);authorizedWalletIndex=P(1);actions=[{value:"create",label:"Create"},{value:"fund",label:"Fund"},{value:"renew",label:"Renew"},{value:"claim",label:"Claim"},{value:"close",label:"Close"}];flags={renew:!1,close:!0};totalFlagsValue=P(0);totalFlagsHex=P("0x0");flagValues={renew:65536,close:131072};walletPaymentChannelCount=P(0);existingPaymentChannels=P([]);receivablePaymentChannels=P([]);closablePaymentChannels=P([]);selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});infoData=_e(()=>{let t=this.currentWallet();if(!t.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=this.txUiService.explorerUrl(),r=[];switch(this.activeTab()){case"create":case"fund":r=this.existingPaymentChannels();break;case"claim":r=this.receivablePaymentChannels();break;case"close":r=this.closablePaymentChannels();break}let o=r.length,s="";return o>0&&(this.activeTab()==="create"||this.activeTab()==="close")&&(s=`<a href="${i}account/${t.address}/payment-channels" target="_blank" rel="noopener noreferrer" class="xrpl-win-link">View Payment Channels</a>`),{walletName:e,activeTab:this.activeTab(),channelCount:o,channelsToShow:r,links:s}});timeUnitItems=_e(()=>[{id:"seconds",display:"Seconds"},{id:"minutes",display:"Minutes"},{id:"hours",display:"Hours"},{id:"days",display:"Days"}]);selectedCancelAfterTimeUnit=_e(()=>{let t=this.paymentChannelCancelAfterTimeUnit();return this.timeUnitItems().find(e=>e.id===t)||null});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),this.clearInputFields(),this.populateDefaultDateTime(),yield this.getPaymentChannels(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set(""),this.populateDefaultDateTime()}trackById(t,e){return e.id}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}toggleFlag(t){t!=="close"&&(this.flags[t]=!this.flags[t],this.updateFlagTotal())}updateFlagTotal(){let t=0;this.flags.renew&&(t|=this.flagValues.renew),this.flags.close&&(t|=this.flagValues.close),this.totalFlagsValue.set(t),this.totalFlagsHex.set("0x"+t.toString(16).toUpperCase().padStart(8,"0"))}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.clearFlagsValue(),this.clearFields(),this.hasWallets()&&(this.populateDefaultDateTime(),yield this.getPaymentChannels(!0))})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getPaymentChannels(t=!1){return z(this,null,function*(){yield this.withPerf("getPaymentChannels",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:r,accountObjects:o},s]=yield Promise.all([this.xrplCache.getAccountData(i.classicAddress,t),this.xrplService.getAccountObjects(e,i.classicAddress,"validated","payment_channel")]),a=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(a.length>0)return this.txUiService.setError(a.join(`
\u2022 `));this.getExistingPaymentChannels(s,i.classicAddress),this.getReceivablePaymentChannels(s,i.classicAddress),this.getClosablePaymentChannels(s,i.classicAddress),this.walletPaymentChannelCount.set(s.result.account_objects.length),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getPaymentChannels:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}handlePaymentChannelAction(){return z(this,null,function*(){yield this.withPerf("handlePaymentChannelAction",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[r,o,s,a,l]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getAccountObjects(t,e.classicAddress,"validated","payment_channel"),this.xrplService.getXrplServerInfo(t,"current","")]),c=this.channelAction();if(c==="create"){let d={TransactionType:"PaymentChannelCreate",Account:e.classicAddress,Amount:Is.xrpToDrops(this.amountField()),Destination:i,SettleDelay:parseInt(this.settleDelayField()),PublicKey:e.publicKey,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,r);let u=yield this.txExecutor.paymentChannelCreate(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated XRP payment successfully!":"XRP payment sent successfully!"}else if(c==="fund"){let d={TransactionType:"PaymentChannelFund",Account:e.classicAddress,Channel:this.channelIDField(),Amount:Is.xrpToDrops(this.amountField()),Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,r);let u=yield this.txExecutor.paymentChannelFundTx(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated XRP payment successfully!":"XRP payment sent successfully!"}else if(c==="claim"||c==="renew"){let d=yield this.getPaymentChannelAuthorizedWallet(this.authorizedWalletAddress()),[u,h]=yield Promise.all([this.xrplService.getChannelVerifiy(t,this.channelIDField(),this.amountField(),this.publicKeyField(),this.channelClaimSignatureField()),this.xrplService.getPaymentChannelAuthorized(t,this.channelIDField(),this.amountField(),d)]),p=a.result.account_objects.find(x=>x.index===this.channelIDField());if(!p)return this.txUiService.setError(`Payment channel ${this.channelIDField} not found`);let y=p.Destination===e.classicAddress,v=this.channelClaimSignatureField();if(!u.result.signature_verified)return this.txUiService.setError("Invalid signature");let b={TransactionType:"PaymentChannelClaim",Account:e.classicAddress,Channel:this.channelIDField(),Balance:Is.xrpToDrops(this.amountField()),Signature:v,PublicKey:y?this.publicKeyField():e.publicKey,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};c==="renew"&&(b.Flags=Is.PaymentChannelClaimFlags.tfRenew),yield this.setTxOptionalFields(t,b,e,r);let S=yield this.txExecutor.paymentChannelClaimTx(b,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!S.success)return this.txUiService.setError(`${S.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated XRP payment successfully!":"XRP payment sent successfully!"}else if(c==="close"){let u=a.result.account_objects.find(x=>x.index===this.channelIDField());if(!u)return this.txUiService.setError(`Payment channel ${this.channelIDField} not found`);let h=!1;e.classicAddress==u.Account&&(h=!0);let f=yield this.xrplService.getLedgerCloseTime(t);if(u.Expiration&&u.Expiration>f)return this.txUiService.setError("Cannot close channel before expiration");let p=this.checkChannelExpired(u);if(!(!!h||!!p)){let x=BigInt(u.Amount??"0"),k=BigInt(u.Balance??"0"),L=x-k;if(L>0n)return this.txUiService.setError(`Cannot close channel with non-zero balance. ${Is.dropsToXrp(L.toString())} XRP still available to claim.`)}let b={TransactionType:"PaymentChannelClaim",Account:e.classicAddress,Channel:this.channelIDField(),Flags:Is.PaymentChannelClaimFlags.tfClose,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,b,e,r);let S=yield this.txExecutor.paymentChannelClaimTx(b,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!S.success)return this.txUiService.setError(`${S.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated XRP payment successfully!":"XRP payment sent successfully!"}yield this.refreshAfterTx(t,e,i,!0)}catch(t){console.error("Error in handlePaymentChannelAction:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getPaymentChannelInfo(){return z(this,null,function*(){if(this.activeTab()==="close"){let[t]=yield Promise.all([this.getClient()]),e=yield this.xrplService.getAccountObjects(t,this.currentWallet().address,"validated","payment_channel");this.getClosablePaymentChannels(e,this.currentWallet().address)}else if(this.activeTab()==="create"||this.activeTab()==="fund"||this.activeTab()==="renew"||this.activeTab()==="claim"){if(this.activeTab()==="create"||this.activeTab()==="fund"||this.activeTab()==="renew"){let[t]=yield Promise.all([this.getClient()]),e=yield this.xrplService.getAccountObjects(t,this.currentWallet().address,"validated","payment_channel");this.getExistingPaymentChannels(e,this.currentWallet().address)}if(this.activeTab()==="claim"){let[t]=yield Promise.all([this.getClient()]),e=yield this.xrplService.getAccountObjects(t,this.currentWallet().address,"validated","payment_channel");this.getReceivablePaymentChannels(e,this.currentWallet().address)}}})}getExistingPaymentChannels(t,e){let i=Math.floor(Date.now()/1e3),r=(t.result.account_objects??[]).filter(o=>o.LedgerEntryType==="PayChannel"&&o.Account===e).map(o=>{let s=Is.dropsToXrp(o.Amount),a=Is.dropsToXrp(o.Balance??"0"),l=(s-a).toFixed(6),c=o.Expiration?Number(o.Expiration)+946684800:null,u=(c?i>c:!1)?"Expired":l==="0.000000"?"Fully Claimed":"Open";return{id:o.index,totalAmount:`${s} XRP`,balance:`${a} XRP`,remaining:`${l} XRP`,destination:o.Destination,settleDelay:o.SettleDelay,expiration:c?new Date(c*1e3).toLocaleString():"\u2014",publicKey:o.PublicKey,status:u,canClose:u!=="Open"}}).sort((o,s)=>o.destination.localeCompare(s.destination));this.utilsService.logObjects("existingPaymentChannels",r),this.existingPaymentChannels.set(r)}getReceivablePaymentChannels(t,e){let i=Math.floor(Date.now()/1e3),r=(t.result.account_objects??[]).filter(o=>o.LedgerEntryType==="PayChannel"&&o.Destination===e).map(o=>{let s=Is.dropsToXrp(o.Amount),a=Is.dropsToXrp(o.Balance??"0"),l=(s-a).toFixed(6),c=o.Expiration?Number(o.Expiration)+946684800:null,u=(c?i>c:!1)?"Expired":l==="0.000000"?"Fully Claimed":"Claimable";return{id:o.index,totalAmount:`${s} XRP`,balance:`${a} XRP`,remaining:`${l} XRP`,sender:o.Account,settleDelay:o.SettleDelay,expiration:c?new Date(c*1e3).toLocaleString():"\u2014",status:u,canClaim:u==="Claimable"}}).sort((o,s)=>o.sender.localeCompare(s.sender));this.utilsService.logObjects("receivablePaymentChannels",r),this.receivablePaymentChannels.set(r)}getClosablePaymentChannels(t,e){let i=Math.floor(Date.now()/1e3),r=(t.result.account_objects??[]).filter(o=>o.LedgerEntryType==="PayChannel"&&o.Account===e).map(o=>{let s=Is.dropsToXrp(o.Amount),a=Is.dropsToXrp(o.Balance??"0"),l=(s-a).toFixed(6),c=o.Expiration?Number(o.Expiration)+946684800:null,u=(c?i>c:!1)?"Expired":l==="0.000000"?"Fully Claimed":"Open";return{id:o.index,totalAmount:`${s} XRP`,balance:`${a} XRP`,remaining:`${l} XRP`,destination:o.Destination,settleDelay:o.SettleDelay,expiration:c?new Date(c*1e3).toLocaleString():"\u2014",status:u,canClose:u!=="Open"}}).sort((o,s)=>o.destination.localeCompare(s.destination));this.utilsService.logObjects("closablePaymentChannels",r),this.closablePaymentChannels.set(r)}getPaymentChannelAuthorizedWallet(t){return z(this,null,function*(){if(!this.wallets()||this.wallets().length===0)throw new Error("No wallets available");if(!t||t===this.currentWallet().address)throw new Error("Invalid authorized wallet address (must be different from selected)");let e=this.wallets().find(o=>o.address===t);if(!e)throw new Error("Authorized wallet not found");let i=e.seed||e.mnemonic||e.secretNumbers;if(!i)throw new Error("No seed available for authorized wallet");let r=yield this.utilsService.getWallet(i);if(!r)throw new Error("Authorized wallet could not be created or is undefined");return r})}generateCreatorClaimSignature(){return z(this,null,function*(){yield this.withPerf("generateCreatorClaimSignature",()=>z(this,null,function*(){try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),r=yield this.xrplService.getAccountInfo(t,e.classicAddress,"validated","");this.publicKeyField.set(e.publicKey),this.channelClaimSignatureField.set(this.generateChannelSignature(this.channelIDField(),this.amountField(),e))}catch(t){console.error("Error in generateCreatorClaimSignature:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}generateChannelSignature(t,e,i){try{if(!/^[0-9A-Fa-f]{64}$/.test(t))throw new Error("Invalid channelID: must be a 64-character hexadecimal string");if(!e||e.toString().trim()==="")throw new Error("Invalid amountXRP: must be a valid number or string");let r=Is.xrpToDrops(e);if(isNaN(parseFloat(this.amountField()))||parseFloat(this.amountField())<=0)throw new Error("Invalid amountXRP: must be a valid number or string");let o=Buffer.alloc(8);o.writeBigUInt64BE(BigInt(r),0);let a=Buffer.concat([Buffer.from("CLM\0"),Buffer.from(t,"hex"),o]).toString("hex"),l=(0,O8.sign)(a,i.privateKey);if(!(0,O8.verify)(a,l,i.publicKey))throw new Error("Generated signature is invalid");return l.toUpperCase()}catch(r){throw new Error(`Failed to generate channel signature: ${r.message}`)}}checkChannelExpired(t){if(t.CancelAfter){let e=t.CancelAfter+946684800;console.log("Expiration (UTC):",new Date(e*1e3).toISOString());let i=Date.now()/1e3>e;return console.log("Expired?",i),!!i}else return console.log("This channel has no expiration set."),!1}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}if(this.txUiService.destinationTagField()&&this.utilsService.setDestinationTag(e,this.txUiService.destinationTagField()),this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),this.txUiService.destinationTagField()&&this.utilsService.setDestinationTag(e,this.txUiService.destinationTagField()),this.publicKeyField()&&this.utilsService.setPublicKey(e,this.publicKeyField()),this.paymentChannelCancelAfterTimeField()){let o=this.utilsService.toRippleTime(this.paymentChannelCancelAfterTimeField()),s=yield this.xrplService.getLedgerCloseTime(t);if(o<=s)return this.txUiService.setError("Cancel After time must be in the future");this.utilsService.setCancelAfter(e,o)}if(this.paymentChannelCancelAfterTimeField()&&(this.channelAction()==="fund"||this.channelAction()==="renew")){let o=this.utilsService.addTime(this.paymentChannelCancelAfterTimeField(),this.paymentChannelCancelAfterTimeUnit()),s=yield this.xrplService.getLedgerCloseTime(t);if(o<=s)return this.txUiService.setError("New expiration time must be in the future");this.utilsService.setExpiration(e,o)}})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&i&&this.addNewDestinationFromUser(i),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultAuthorizedWallet()}ensureDefaultAuthorizedWallet(){if(this.wallets().length<=1){this.authorizedWalletAddress.set("");return}let t=this.currentWallet().address;if(!this.authorizedWalletAddress||this.authorizedWalletAddress()===t){let e=this.wallets().find(i=>i.address!==t);this.authorizedWalletAddress.set(e?e.address:this.wallets()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&Is.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}addToDateTimeField(t,e,i){let r=t();if(!r){let a=new Date;r=this.formatDateTimeLocal(a)}let o=new Date(r);o.setSeconds(o.getSeconds()+i);let s=this.formatDateTimeLocal(o);e.set(s)}formatDateTimeLocal(t){let e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${e}-${i}-${r}T${o}:${s}:${a}`}addCancelAfterToExpiration(t){this.addToDateTimeField(this.paymentChannelCancelAfterTimeField,this.paymentChannelCancelAfterTimeField,t)}setCancelAfterExpirationToNow(){let t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");this.paymentChannelCancelAfterTimeField.set(`${e}-${i}-${r}T${o}:${s}:${a}`)}populateDefaultDateTime(){this.setCancelAfterExpirationToNow()}clearFlagsValue(){this.flags={renew:!1,close:!1},this.totalFlagsValue.set(0),this.totalFlagsHex.set("0x0")}copyPaymentChannelId(t){if(!t){console.warn("no txHash");return}navigator.clipboard.writeText(t).then(()=>{this.channelIDField.set(t),this.txUiService.showToastMessage?.("Payment Channel Hash copied!")}).catch(e=>console.error("Clipboard copy failed:",e))}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(){this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.channelIDField.set(""),this.channelClaimSignatureField.set(""),this.amountField.set(""),this.destinationTagField.set(""),this.settleDelayField.set(""),this.paymentChannelCancelAfterTimeField.set(""),this.paymentChannelCancelAfterTimeUnit.set("seconds"),this.clearInputFields(),this.txUiService.clearAllOptionsAndMessages()}clearInputFields(){this.txUiService.amountField.set(""),this.txUiService.destinationTagField.set(""),this.txUiService.invoiceIdField.set(""),this.txUiService.sourceTagField.set("")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-account"]],features:[Lt],decls:48,vars:30,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],[1,"menu-btn",3,"click"],["name","banknote-arrow-down","size","25"],["name","banknote-arrow-up","size","25"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[1,"form-row"],[1,"tab-content-container","flags-container"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"green-button-submenu"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[2,"margin-top","8px","font-size","0.9em"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[3,"innerHTML"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View Channel on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[2,"color","#555","font-size","0.88em","display","flex","flex-direction","column","gap","4px"],["title","Copy Channel ID",1,"copy-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-group"],[1,"form-hint"],["type","text","name","amountField","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["type","text","name","destinationTagField",3,"ngModelChange","ngModel"],["type","text","name","settleDelayField",3,"ngModelChange","ngModel"],["type","text","name","channelIDField",3,"ngModelChange","ngModel"],["hidden","",1,"form-group"],["type","text","name","publicKeyField",3,"ngModelChange","ngModel"],["type","text","name","channelClaimSignatureField",3,"ngModelChange","ngModel"],["for","credentialExpiration"],[1,"expiration-input-group"],["type","datetime-local","name","expirationDate","step","1",1,"expiration-input",3,"ngModelChange","focus","ngModel"],[1,"expiration-buttons"],["type","button",1,"btn-small","btn-primary-blue",3,"click"],[1,"flags-wrapper"],[1,"token-flags-header"],["name","flag","size","20"],[1,"token-flags-title"],[1,"flag-item",3,"enabled"],[1,"flag-item","enabled",3,"disabled"],[1,"flags-total"],[1,"flag-item",3,"click"],[1,"flag-header"],["type","checkbox",1,"flag-checkbox",3,"checked"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"flag-icon"],["d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0L3 7m1.582 2H12"],[1,"flag-title"],[1,"flag-value"],[1,"flag-desc"],[1,"flag-item","enabled",3,"click"],["type","checkbox","disabled","",1,"flag-checkbox",3,"checked"],["d","M18.36 6.64a9 9 0 1 1-12.73 0"],["d","M12 2v10"],[1,"lock-icon"],[1,"total-label"],[1,"total-value"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6)(7,"div",7)(8,"button",8),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",9),w(10," Create Payment Channel "),g(),m(11,"button",10),X("click",function(){return U(r),j(i.setTab("fund"))}),ee(12,"lucide-icon",11),w(13," Fund Payment Channel "),g(),m(14,"button",10),X("click",function(){return U(r),j(i.setTab("claim"))}),ee(15,"lucide-icon",12),w(16," Claim/Renew Payment Channel "),g(),m(17,"button",10),X("click",function(){return U(r),j(i.setTab("close"))}),ee(18,"ng-icon",13),w(19," Close Payment Channel "),g()(),Q(20,AKe,9,0,"div"),Q(21,DKe,9,0,"div"),Q(22,IKe,9,0,"div"),Q(23,FKe,9,0,"div"),Q(24,YKe,11,4,"div",14),Q(25,ZKe,3,1,"div",15),m(26,"form",16,0)(28,"div")(29,"div",17)(30,"div",18),Q(31,eGe,3,2,"div",19),Q(32,rGe,3,2,"div",19),Q(33,sGe,2,1,"div",19),Q(34,lGe,2,1,"div",19),g(),Q(35,hGe,9,3,"div",20),g(),ee(36,"app-transaction-options",21),m(37,"div",22),Q(38,fGe,3,4,"button",23)(39,pGe,3,4,"button",24)(40,mGe,6,8)(41,gGe,3,4,"button",25),m(42,"button",26),ct(43,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(44,"Clear Fields"),g()(),m(45,"div",27)(46,"input",28),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(47,"app-transaction-preview"),g()()()()()()()}if(e&2){let r,o;_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="fund"),_(3),Ue("active",i.activeTab()==="claim"),_(3),Ue("active",i.activeTab()==="close"),_(3),J(i.activeTab()==="create"?20:-1),_(),J(i.activeTab()==="fund"?21:-1),_(),J(i.activeTab()==="claim"?22:-1),_(),J(i.activeTab()==="close"?23:-1),_(),J((r=i.infoData())?24:-1,r),_(),J(i.txUiService.warningMessage?25:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()==="create"||i.activeTab()==="fund"||i.activeTab()==="claim"||i.activeTab()==="close"?31:-1),_(),J(i.activeTab()==="create"||i.activeTab()==="fund"||i.activeTab()==="claim"||i.activeTab()==="close"?32:-1),_(),J(i.activeTab()==="create"||i.activeTab()==="claim"||i.activeTab()==="close"?33:-1),_(),J(i.activeTab()==="create"||i.activeTab()==="claim"||i.activeTab()==="close"?34:-1),_(),J(i.activeTab()==="claim"||i.activeTab()==="close"?35:-1),_(),oe("showWhenTab",Ei(29,TKe))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J((o=i.activeTab())==="create"?38:o==="close"?39:o==="claim"?40:o==="fund"?41:-1),_(4),oe("disabled",!mt(43,27,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,$r,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var Ja=_i(Ki());var yGe=()=>["create","finish","cancel"],vGe=(n,t)=>t.index;function _Ge(n,t){n&1&&(m(0,"div")(1,"div",26)(2,"div",27),ee(3,"ng-icon",28),g(),m(4,"div")(5,"h2",29),w(6,"Create Time Based Escrow"),g(),m(7,"p",30),w(8,"Create a time based escrow to another XRPL address"),g()()()())}function bGe(n,t){n&1&&(m(0,"div")(1,"div",26)(2,"div",31),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",29),w(6,"Finish Time Based Escrow"),g(),m(7,"p",30),w(8,"Finish a time based escrow sent from another XRPL address"),g()()()())}function wGe(n,t){n&1&&(m(0,"div")(1,"div",26)(2,"div",33),ee(3,"ng-icon",34),g(),m(4,"div")(5,"h2",29),w(6,"Cancel Time Based Escrow"),g(),m(7,"p",30),w(8,"Cancel a time based escrow create from the selected account"),g()()()())}function SGe(n,t){n&1&&w(0," has no outstanding escrows. ")}function CGe(n,t){n&1&&w(0," created. ")}function xGe(n,t){n&1&&w(0," that can be finished. ")}function kGe(n,t){n&1&&w(0," that can be cancelled. ")}function MGe(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3),Q(4,CGe,1,0)(5,xGe,1,0)(6,kGe,1,0)),n&2){let e,i=E();_(2),Ee(i.escrowCount),_(),je(" escrow",i.escrowCount===1?"":"s"," "),_(),J((e=i.activeTab)==="create"?4:e==="finish"?5:e==="cancel"?6:-1)}}function TGe(n,t){if(n&1&&(m(0,"div",39),ee(1,"span",41),w(2," on XRPL Win"),g()),n&2){let e=E();_(),oe("innerHTML",e.links,pn)}}function EGe(n,t){n&1&&w(0," Outstanding Escrows ")}function AGe(n,t){n&1&&w(0," Finishable Escrows ")}function DGe(n,t){n&1&&w(0," Cancellable Escrows ")}function IGe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2192 ",e.destination.slice(0,7)+"..."+e.destination.slice(-7)," ")}}function FGe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2190 ",e.sender.slice(0,7)+"..."+e.sender.slice(-7)," ")}}function PGe(n,t){if(n&1&&(m(0,"div"),w(1,"Finishes: "),m(2,"code"),w(3),g()()),n&2){let e=E().$implicit,i=E(4);_(3),Ee(i.formatXrplTimestamp(e.finishAfter))}}function LGe(n,t){if(n&1&&(m(0,"div"),w(1,"Cancellable after: "),m(2,"code"),w(3),g()()),n&2){let e=E().$implicit,i=E(4);_(3),Ee(i.formatXrplTimestamp(e.cancelAfter))}}function RGe(n,t){if(n&1){let e=ge();m(0,"li",47)(1,"app-tooltip-link",48)(2,"div",49),w(3),Q(4,IGe,1,1),Q(5,FGe,1,1),g(),m(6,"div",50)(7,"div"),w(8,"Sequence: "),m(9,"code"),w(10),g()(),Q(11,PGe,4,1,"div"),Q(12,LGe,4,1,"div"),g()(),m(13,"button",51),X("click",function(r){let o=U(e).$implicit;return E(4).copyAndToast(o.index,"Escrow Sequence"),j(r.stopPropagation())}),lt(),m(14,"svg",52),ee(15,"rect",53)(16,"path",54),g()()()}if(n&2){let e=t.$implicit,i=E(3),r=E();_(),oe("href",r.txUiService.explorerUrl()+"entry/"+e.index),_(2),je("",e.amount," "),_(),J(i.activeTab==="create"||i.activeTab==="cancel"?4:-1),_(),J(i.activeTab==="finish"?5:-1),_(5),Ee(e.index),_(),J(e.finishAfter?11:-1),_(),J(e.cancelAfter?12:-1)}}function OGe(n,t){if(n&1&&(m(0,"ul",46),yn(1,RGe,17,7,"li",47,vGe),g()),n&2){let e=E(2);_(),vn(e.escrowsToShow)}}function NGe(n,t){if(n&1){let e=ge();m(0,"div",42),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",43)(2,"span"),Q(3,EGe,1,0)(4,AGe,1,0)(5,DGe,1,0),w(6),g(),lt(),m(7,"svg",44),ee(8,"path",45),g()(),Q(9,OGe,3,0,"ul",46),g()}if(n&2){let e,i=E(),r=E();_(3),J((e=i.activeTab)==="create"?3:e==="finish"?4:e==="cancel"?5:-1),_(3),je(" (",i.escrowCount,") "),_(),In("transform",r.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(r.infoPanelExpanded()?9:-1)}}function BGe(n,t){if(n&1&&(m(0,"div",14)(1,"div",35)(2,"div",36)(3,"div",37),ee(4,"ng-icon",38),m(5,"code"),w(6),g(),Q(7,SGe,1,0)(8,MGe,7,3),Q(9,TGe,3,1,"div",39),g(),Q(10,NGe,10,5,"div",40),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.escrowCount===0?7:8),_(2),J(e.links?9:-1),_(),J(e.escrowCount>0?10:-1)}}function VGe(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",55)(2,"div",56),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function UGe(n,t){n&1&&(m(0,"span",76),w(1,"XRP"),g())}function jGe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function HGe(n,t){if(n&1&&(m(0,"div",75),Q(1,UGe,2,0,"span",76)(2,jGe,2,1,"span"),m(3,"span",77),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function WGe(n,t){if(n&1){let e=ge();m(0,"div",57)(1,"div",58)(2,"label",78),w(3,"Issuer"),g(),m(4,"p",60),w(5,"The XRPL account that issues and controls this currency."),g(),m(6,"app-select-search-dropdown",79),X("valueChange",function(r){U(e);let o=E(2);return j(o.onIssuerSelected(r))}),g()(),m(7,"div",58)(8,"label",80),w(9,"Currency Balance"),g(),m(10,"p",60),w(11,"Total currency balance held by this account."),g(),m(12,"input",81),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.currencyBalanceField,r)||(o.currencyBalanceField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),oe("items",e.issuerItems())("value",e.selectedIssuerItem()),_(6),Oe("ngModel",e.currencyBalanceField)}}function zGe(n,t){if(n&1){let e=ge();m(0,"div",57)(1,"div",58)(2,"label",82),w(3,"MPT Issuance ID"),g(),m(4,"input",83),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.mptIssuanceIdField,r)||(o.mptIssuanceIdField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(4),Oe("ngModel",e.mptIssuanceIdField)}}function qGe(n,t){if(n&1){let e=ge();m(0,"div",57)(1,"div",58)(2,"label",59),w(3,"Currency Code"),g(),m(4,"p",60),w(5,"Issued asset combined with the issuer to uniquely define a token."),g(),m(6,"app-select-search-dropdown",61),X("valueChange",function(r){U(e);let o=E();return j(o.onCurrencySelected(r))}),nn(7,HGe,5,2,"ng-template",null,1,vr),g()(),m(9,"div",58)(10,"label",62),w(11,"Amount"),g(),m(12,"p",60),w(13,"The amount to deduct from the sender's balance and put in escrow."),g(),m(14,"input",63),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()(),Q(15,WGe,13,3,"div",57),Q(16,zGe,5,1,"div",57),m(17,"div",57)(18,"div",58)(19,"label",64),w(20,"Destination"),g(),m(21,"p",60),w(22,"Address to receive escrowed XRP."),g(),m(23,"app-select-search-dropdown",65),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()(),m(24,"div",58)(25,"label",66),w(26,"Destination Tag"),g(),m(27,"p",60),w(28,"Arbitrary tag to further specify the destination for this escrowed."),g(),m(29,"input",67),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.destinationTagField,r)||(o.destinationTagField=r),j(r)}),g()()(),m(30,"div",57)(31,"div",58)(32,"label",68),w(33,"Finish Time"),g(),m(34,"p",60),w(35,"The time, in seconds since the Ripple Epoch, when the escrowed XRP can be released to the recipient."),g(),m(36,"div",69)(37,"input",70),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.escrowFinishTimeField,r)||(o.escrowFinishTimeField=r),j(r)}),X("focus",function(){U(e);let r=E();return j(r.setEscrowFinishToNow())}),g(),m(38,"div",71)(39,"button",72),X("click",function(){U(e);let r=E();return j(r.setEscrowFinishToNow())}),w(40,"Now"),g(),m(41,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowFinishToExpiration(10))}),w(42,"+10s"),g(),m(43,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowFinishToExpiration(30))}),w(44,"+30s"),g(),m(45,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowFinishToExpiration(60))}),w(46,"+1min"),g(),m(47,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowFinishToExpiration(300))}),w(48,"+5min"),g()()()(),m(49,"div",58)(50,"label",73),w(51,"Cancel Time"),g(),m(52,"p",60),w(53," The time, in seconds since the Ripple Epoch, "),ee(54,"br"),w(55," this escrow expires. "),g(),m(56,"div",69)(57,"input",74),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.escrowCancelTimeField,r)||(o.escrowCancelTimeField=r),j(r)}),X("focus",function(){U(e);let r=E();return j(r.setEscrowCancelToNow())}),g(),m(58,"div",71)(59,"button",72),X("click",function(){U(e);let r=E();return j(r.setEscrowCancelToNow())}),w(60,"Now"),g(),m(61,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowCancelToExpiration(10))}),w(62,"+10s"),g(),m(63,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowCancelToExpiration(30))}),w(64,"+30s"),g(),m(65,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowCancelToExpiration(60))}),w(66,"+1min"),g(),m(67,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowCancelToExpiration(300))}),w(68,"+5min"),g()()()()()}if(n&2){let e=E();_(6),oe("items",e.currencyItems())("value",e.selectedCurrencyItem())("showShortAddress",!1),_(8),Oe("ngModel",e.amountField),_(),J(e.currencyFieldDropDownValue()!=="XRP"&&e.currencyFieldDropDownValue()!=="MPT"?15:-1),_(),J(e.currencyFieldDropDownValue()==="MPT"?16:-1),_(7),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(6),Oe("ngModel",e.destinationTagField),_(8),Oe("ngModel",e.escrowFinishTimeField),_(20),Oe("ngModel",e.escrowCancelTimeField)}}function $Ge(n,t){if(n&1){let e=ge();m(0,"div",57)(1,"div",58)(2,"label",87),w(3,"Escrow Owner"),g(),m(4,"p",60),w(5,"The account that orginally created the escrow."),g(),m(6,"input",88),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.escrowOwnerField,r)||(o.escrowOwnerField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),Oe("ngModel",e.escrowOwnerField)}}function KGe(n,t){if(n&1){let e=ge();m(0,"div",57)(1,"div",58)(2,"label",84),w(3),g(),m(4,"p",60),w(5),g(),m(6,"app-select-search-dropdown",85),X("valueChange",function(r){U(e);let o=E();return j(o.onEscrowSelected(r))}),g()()(),m(7,"div",57)(8,"div",58)(9,"label"),w(10,"Escrow Sequence ID"),g(),m(11,"p",60),w(12,"Sequence ID generated when the escrow was created."),g(),m(13,"input",86),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.escrowSequenceNumberField,r)||(o.escrowSequenceNumberField=r),j(r)}),g()()(),Q(14,$Ge,7,1,"div",57)}if(n&2){let e=E();_(3),je("Select Escrow to ",e.activeTab()==="finish"?"Finish":"Cancel"),_(2),je("Select an existing escrow to ",e.activeTab()==="finish"?"Finish":"Cancel","."),_(),oe("items",e.escrowItems())("value",e.selectedEscrowItem())("showShortAddress",!1),_(7),Oe("ngModel",e.escrowSequenceNumberField),_(),J(e.activeTab()==="finish"?14:-1)}}function GGe(n,t){if(n&1){let e=ge();m(0,"button",89),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.createTimeBasedEscrow())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create Escrow")}}function XGe(n,t){if(n&1){let e=ge();m(0,"button",90),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.finishTimeBasedEscrow())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Finish Escrow")}}function YGe(n,t){if(n&1){let e=ge();m(0,"button",91),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.cancelEscrow())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Cancel Escrow")}}var N8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("create");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");currencyFieldDropDownValue=P("XRP");issuerFields=P("");mptIssuanceIdField=P("");isMptEnabled=P(!1);currencyBalanceField=P("0");knownTrustLinesIssuers=P({XRP:[]});currencies=P([]);storedIssuers=P([]);selectedIssuer=P("");issuers=P([]);currencyChangeTrigger=P(0);escrowFinishTimeField=P("");escrowFinishTimeUnit=P("seconds");escrowCancelTimeUnit=P("seconds");escrowCancelTimeField=P("");escrowOwnerField=P("");escrowSequenceNumberField=P("");selectedEscrow=P(null);tokenBalance=P("0");escrowCancelDateTimeField=P("");escrowFinishDateTimeField=P("");expiredOrFulfilledEscrows=P([]);allEscrowsRaw=P([]);finishEscrow=P([]);existingEscrow=P([]);exsitingMpt=P([]);existingIOUs=P([]);outstandingEscrowCollapsed=P(!0);outstandingMptCollapsed=P(!0);outstandingIOUCollapsed=P(!0);selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return[...this.wallets().map(i=>({address:i.address,name:i.name??`Wallet ${i.address.slice(0,8)}`})),...this.customDestinations()].map(i=>({id:i.address,display:i.name||"Unknown Wallet",secondary:i.address,isCurrentAccount:i.address===t,isCurrentCode:!1,isCurrentToken:!1}))});currencyItems=_e(()=>{let t=this.currencyFieldDropDownValue();return this.availableCurrencies.map(e=>e==="MPT"?{id:"MPT",display:"MPT",secondary:"Multi-Purpose Token",isCurrentAccount:!1,isCurrentCode:t==="MPT",isCurrentToken:!1}:{id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":`${this.trustlineCurrency.getIssuersForCurrency(e).length} issuer${this.trustlineCurrency.getIssuersForCurrency(e).length!==1?"s":""}`,isCurrentAccount:!1,isCurrentCode:e===t,isCurrentToken:!1})});selectedCurrencyItem=_e(()=>{let t=this.currencyFieldDropDownValue();return t&&this.currencyItems().find(e=>e.id===t)||null});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});escrowItems=_e(()=>{let t=this.allEscrowsRaw(),e=this.currentWallet().address,i=this.activeTab()==="cancel";return t.filter(r=>i?r.Sender===e:r.Destination===e).map(r=>{let o=typeof r.Amount=="string"?`${Ja.dropsToXrp(r.Amount)} XRP`:`${r.Amount.value} ${this.utilsService.normalizeCurrencyCode(r.Amount.currency)}`;return{id:r.EscrowSequence?.toString()||"unknown",display:`${o} \u2192 ${i?r.Destination:r.Sender}`,secondary:`Seq: ${r.EscrowSequence} \u2022 ${i?"You created":"Sent to you"}`,isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1}})});selectedEscrowItem=_e(()=>{let t=this.escrowSequenceNumberField();if(!t)return null;console.log("seq",t),console.log("escrowItems",this.escrowItems());let e=t.toString();return this.escrowItems().find(i=>i.id===e)||null});issuerItems=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return this.issuers().map((e,i)=>({id:e.address,display:e.name||`Issuer ${i+1}`,secondary:e.address.slice(0,7)+"..."+e.address.slice(-7),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:e.address===t}))});selectedIssuerAddress=_e(()=>this.trustlineCurrency.getSelectedIssuer());selectedIssuerItem=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return t&&this.issuerItems().find(e=>e.id===t)||null});infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=t.address,r=this.txUiService.explorerUrl(),o=0,s=[];switch(this.activeTab()){case"create":{let l=this.allEscrowsRaw().filter(c=>c.Sender===i);o=l.length,s=l.map(c=>({index:c.EscrowSequence?.toString()||"Unknown",amount:typeof c.Amount=="string"?`${Ja.dropsToXrp(c.Amount)} XRP`:`${c.Amount.value} ${this.utilsService.normalizeCurrencyCode(c.Amount.currency)}`,destination:c.Destination,finishAfter:c.FinishAfter,cancelAfter:c.CancelAfter}));break}case"finish":{let l=this.allEscrowsRaw().filter(c=>c.Destination===i);o=l.length,s=l.map(c=>({index:c.EscrowSequence?.toString()||"Unknown",amount:typeof c.Amount=="string"?`${Ja.dropsToXrp(c.Amount)} XRP`:`${c.Amount.value} ${this.utilsService.normalizeCurrencyCode(c.Amount.currency)}`,sender:c.Sender,finishAfter:c.FinishAfter}));break}case"cancel":{let l=this.allEscrowsRaw().filter(c=>c.Sender===i);o=l.length,s=l.map(c=>({index:c.EscrowSequence?.toString()||"Unknown",amount:typeof c.Amount=="string"?`${Ja.dropsToXrp(c.Amount)} XRP`:`${c.Amount.value} ${this.utilsService.normalizeCurrencyCode(c.Amount.currency)}`,destination:c.Destination,cancelAfter:c.CancelAfter}));break}}let a=[];if(this.activeTab()==="create"){let l=this.existingEscrow().length>0,c=this.existingIOUs().length>0,d=this.exsitingMpt().length>0;l&&a.push(`<a href="${r}account/${i}/escrows" target="_blank" rel="noopener" class="xrpl-win-link">View Escrows</a>`),c&&a.push(`<a href="${r}account/${i}/tokens" target="_blank" rel="noopener" class="xrpl-win-link">View IOUs</a>`),d&&a.push(`<a href="${r}account/${i}/mpts/owned" target="_blank" rel="noopener" class="xrpl-win-link">View MPTs</a>`)}return{walletName:e,escrowCount:o,escrowsToShow:s,links:a.length>0?a.join(" | "):null,activeTab:this.activeTab()}});timeUnitItems=_e(()=>[{id:"seconds",display:"Seconds"},{id:"minutes",display:"Minutes"},{id:"hours",display:"Hours"},{id:"days",display:"Days"}]);selectedEscrowFinishTimeUnit=_e(()=>{let t=this.escrowFinishTimeUnit();return this.timeUnitItems().find(e=>e.id===t)||null});selectedEscrowCancelTimeUnit=_e(()=>{let t=this.escrowCancelTimeUnit();return this.timeUnitItems().find(e=>e.id===t)||null});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadKnownIssuers(),this.refreshStoredIssuers(),this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.trustlineCurrency.currencies$.subscribe(t=>{this.currencies.set(t),t.length>0&&!this.currencyFieldDropDownValue()&&(this.currencyFieldDropDownValue.set(t[0]),this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address))}),this.trustlineCurrency.issuers$.subscribe(t=>{this.issuers.set(t)}),this.trustlineCurrency.selectedIssuer$.subscribe(t=>{this.issuerFields.set(t)}),this.trustlineCurrency.balance$.subscribe(t=>{this.currencyBalanceField.set(t)}),this.currencyFieldDropDownValue.set("XRP"),this.populateDefaultDateTime()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.clearFields(!0),this.selectWallet(i))}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.clearFields(!0),yield this.getEscrows(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set(""),this.populateDefaultDateTime()}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}onCurrencySelected(t){let e=t?.id||"XRP";this.currencyFieldDropDownValue.set(e),this.onCurrencyChange(e)}onDestinationSelected(t){this.selectedDestinationAddress.set(t?.id||"")}onEscrowSelected(t){if(!t?.id){this.escrowSequenceNumberField.set(""),this.escrowOwnerField.set("");return}let e=this.expiredOrFulfilledEscrows().find(i=>i.EscrowSequence?.toString()===t.id);e&&(this.escrowSequenceNumberField.set(e.EscrowSequence),this.escrowOwnerField.set(e.Sender))}onIssuerSelected(t){let e=t?.id||"";this.trustlineCurrency.selectIssuer(e),this.onIssuerChange(e)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),Object.keys(this.knownTrustLinesIssuers).length>0&&this.issuerFields()===""&&this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue.set(Object.keys(this.knownTrustLinesIssuers)[0]),this.clearFields(!0),this.hasWallets()&&(yield this.getEscrows(!0),this.populateDefaultDateTime())})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getEscrows(t=!1){return z(this,null,function*(){yield this.withPerf("getEscrows",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.getExistingEscrows(o,i.classicAddress),this.getExistingMpts(o,i.classicAddress),this.getExistingIOUs(o,i.classicAddress),this.getExpiredOrFulfilledEscrows(e,o,i.classicAddress),this.loadAllEscrows(o,i.classicAddress),this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.issuerFields()!==""&&this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getEscrows:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createTimeBasedEscrow(){return z(this,null,function*(){yield this.withPerf("createTimeBasedEscrow",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),l=this.selectedDestinationAddress()||this.typedDestination();console.log(this.utilsService.toRippleTime(this.escrowFinishTimeField())),console.log(this.utilsService.toRippleTime(this.escrowCancelTimeField()));let c=this.utilsService.toRippleTime(this.escrowFinishTimeField()),d=this.utilsService.toRippleTime(this.escrowCancelTimeField()),u=this.currencyFieldDropDownValue()===Re.XRP_CURRENCY?Ja.xrpToDrops(this.amountField()):{value:this.amountField(),currency:this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue()),issuer:this.issuerFields()},h={TransactionType:"EscrowCreate",Account:e.address,Amount:u,Destination:l,FinishAfter:c,CancelAfter:d,Fee:s,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,h,e,i,"create");let f=yield this.txExecutor.createEscrow(h,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!f.success)return this.txUiService.setError(`${f.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow cancel successfully!":"Cancelled escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in createTimeBasedEscrow:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}finishTimeBasedEscrow(){return z(this,null,function*(){yield this.withPerf("finishTimeBasedEscrow",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a,l,c]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated","escrow"),this.xrplService.getEscrowBySequence(t,e.classicAddress,Number(this.escrowSequenceNumberField())),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),d=yield this.xrplService.getCurrentRippleTime(t),u=this.utilsService.checkTimeBasedEscrowStatus({FinishAfter:a.FinishAfter,CancelAfter:a.CancelAfter,owner:a.Account},d,e.classicAddress,"finishEscrow");if(!u.canFinish&&!u.canCancel)return this.txUiService.setError(`
${u.reasonCancel}
${u.reasonFinish}`);if(!u.canFinish)return this.txUiService.setError(`${u.reasonFinish}`);let h={TransactionType:"EscrowFinish",Account:e.classicAddress,Owner:this.escrowOwnerField(),OfferSequence:Number.parseInt(this.escrowSequenceNumberField()),Fee:l,LastLedgerSequence:c+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,h,e,i,"finish");let f=yield this.txExecutor.finishEscrow(h,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!f.success)return this.txUiService.setError(`${f.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow finished successfully!":"Finished escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in finishTimeBasedEscrow:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}cancelEscrow(){return z(this,null,function*(){yield this.withPerf("cancelEscrow",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[r,o,s,a,l]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated","escrow"),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),c=!1,d=this.currentWallet().address,u;for(let[S,x]of o.result.account_objects.entries())if(x.PreviousTxnID){let k=yield this.xrplService.getTxData(t,x.PreviousTxnID);if(k.result.tx_json.Sequence===Number(this.escrowSequenceNumberField())){c=!0,u=x,d=u.Account;break}else if(k.result.tx_json.TicketSequence!=null&&k.result.tx_json.TicketSequence===Number(this.escrowSequenceNumberField())){c=!0,u=x,d=u.Account;break}}if(!u)return this.txUiService.setError(`No escrow found for sequence ${this.escrowSequenceNumberField()}`);let h=yield this.xrplService.getCurrentRippleTime(t),f=u.FinshAfter!==void 0?Number(u.FinshAfter):void 0,p=u.CancelAfter!==void 0?Number(u.CancelAfter):void 0,y=this.utilsService.checkTimeBasedEscrowStatus({FinishAfter:f,CancelAfter:p,owner:d},h,e.classicAddress,"cancelEscrow");if(!y.canCancel)return this.txUiService.setError(`${y.reasonCancel}`);let v={TransactionType:"EscrowCancel",Account:e.classicAddress,Owner:d,OfferSequence:Number.parseInt(this.escrowSequenceNumberField()),Fee:s,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,v,e,r,"cancel");let b=yield this.txExecutor.cancelEscrow(v,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!b.success)return this.txUiService.setError(`${b.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow cancel successfully!":"Cancelled escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in cancelEscrow:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}loadAllEscrows(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Escrow"&&(r.FinishAfter||r.CancelAfter)&&!r.Condition).map(r=>z(this,null,function*(){let o=null;if(r.PreviousTxnID)try{let a=yield this.getClient();o=(yield this.xrplService.getTxData(a,r.PreviousTxnID)).result.tx_json.Sequence??null}catch{console.warn("Failed to fetch sequence for escrow",r.PreviousTxnID)}let s=typeof r.Amount=="string"?Ja.dropsToXrp(r.Amount):r.Amount.value+" "+this.utilsService.normalizeCurrencyCode(r.Amount.currency);return{Sender:r.Account,Destination:r.Destination,Amount:r.Amount,EscrowSequence:o,CancelAfter:r.CancelAfter,FinishAfter:r.FinishAfter}}));Promise.all(i).then(r=>{this.allEscrowsRaw.set(r)})}getExistingEscrows(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Escrow"&&r.Account===e&&(r.FinishAfter||r.CancelAfter)&&!r.Condition).map(r=>{let o=r.Amount,s="0",a="";return typeof o=="string"?(s=String(Ja.dropsToXrp(o)),a=""):o?.value&&(s=o.value,a=this.utilsService.normalizeCurrencyCode(o.currency)),{Account:r.Account,Amount:`${s} ${a}`,Destination:r.Destination,DestinationTag:r.DestinationTag,CancelAfter:r.CancelAfter,FinishAfter:r.FinishAfter,TxHash:r.PreviousTxnID,Sequence:r.PreviousTxnID}}).sort((r,o)=>r.Destination.localeCompare(o.Destination));this.existingEscrow.set(i),this.utilsService.logObjects("existingEscrow",i)}getExistingMpts(t,e){let i=(t.result.account_objects??[]).filter(r=>(r.LedgerEntryType==="MPToken"||r.LedgerEntryType==="MPTokenIssuance")&&(r.Account===e||r.Issuer===e)).map(r=>({LedgerEntryType:r.LedgerEntryType,MPTAmount:r.MaximumAmount?r.MaximumAmount:r.MPTAmount,mpt_issuance_id:r.mpt_issuance_id?r.mpt_issuance_id:r.MPTokenIssuanceID})).sort((r,o)=>{let s=r.mpt_issuance_id??"",a=o.mpt_issuance_id??"";return s.localeCompare(a)});this.exsitingMpt.set(i),this.utilsService.logObjects("exsitingMpt",i)}getExistingIOUs(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="RippleState").map(r=>{let o=r.Balance?.value??"0",s=this.utilsService.normalizeCurrencyCode(r.Balance?.currency),a=r.HighLimit?.issuer===e?r.LowLimit?.issuer:r.HighLimit?.issuer;return{LedgerEntryType:"RippleState",Balance:{currency:s,value:o},HighLimit:{issuer:a}}}).sort((r,o)=>r.HighLimit.issuer.localeCompare(o.HighLimit.issuer));this.existingIOUs.set(i),this.utilsService.logObjects("existingIOUs",i)}getExpiredOrFulfilledEscrows(t,e,i){return z(this,null,function*(){let r=(e.result.account_objects??[]).filter(s=>s.LedgerEntryType==="Escrow"&&(this.activeTab()==="cancel"?s.Account===i:s.Destination===i)),o=yield Promise.all(r.map(s=>z(this,null,function*(){let a=s.Amount,l="0";typeof a=="string"?l=String(Ja.dropsToXrp(a)):a?.value&&(l=`${a.value} ${this.utilsService.normalizeCurrencyCode(a.currency)}`);let c=null;if(s.PreviousTxnID)try{c=(yield this.xrplService.getTxData(t,s.PreviousTxnID))?.result?.tx_json?.Sequence??null}catch(d){console.warn(`Failed to fetch escrow sequence for ${s.PreviousTxnID}:`,d)}return{Amount:l,Sender:s.Account,Destination:s.Destination,EscrowSequence:c}})));this.expiredOrFulfilledEscrows.set(o.sort((s,a)=>s.Sender.localeCompare(a.Sender))),this.utilsService.logObjects("expiredOrFulfilledEscrows",this.expiredOrFulfilledEscrows)})}get availableCurrencies(){return["XRP","MPT",...Object.keys(this.knownTrustLinesIssuers()).filter(t=>t&&t!=="XRP"&&t!=="MPT").sort((t,e)=>t.localeCompare(e))]}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}if(this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),this.txUiService.destinationTagField()&&this.utilsService.setDestinationTag(e,this.txUiService.destinationTagField()),o==="create")if(this.currencyFieldDropDownValue()==="MPT"){let a=(yield this.xrplService.getAccountObjects(t,this.selectedDestinationAddress(),"validated","")).result.account_objects.filter(d=>d.LedgerEntryType==="MPToken");if(console.debug("Destination MPT Tokens:",a),console.debug("MPT Issuance ID:",this.mptIssuanceIdField),!a.some(d=>d.MPTokenIssuanceID===this.mptIssuanceIdField))throw new Error(`Destination ${this.selectedDestinationAddress()} is not authorized to receive this MPT (issuance ID ${this.mptIssuanceIdField}). Please ensure authorization has been completed.`);let c={mpt_issuance_id:this.mptIssuanceIdField(),value:this.amountField()};e.Amount=c}else if(this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"){let s={currency:this.currencyFieldDropDownValue.length>3?this.utilsService.encodeCurrencyCode(this.currencyFieldDropDownValue()):this.currencyFieldDropDownValue(),issuer:this.issuerFields(),value:this.amountField()};e.Amount=s}else e.Amount=Ja.xrpToDrops(this.amountField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getExistingEscrows(s,e.classicAddress),this.getExistingMpts(s,e.classicAddress),this.getExistingIOUs(s,e.classicAddress),this.getExpiredOrFulfilledEscrows(t,s,e.classicAddress),this.loadAllEscrows(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&Ja.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}copyEscrowTxHash(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Escrow Tx Hash copied!")})}copyMptIssuanceIdHash(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("MPT Issuance ID copied!")})}copyIOUIssuanceAddress(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("IOU Token Issuer copied!")})}formatIOUXrpAmountUI(t){if(!t)return"Unknown";if(typeof t=="string"&&t.split(" ").length===1)return`${t} XRP`;if(t.split(" ").length===2){let e=t.split(" ");return`${e[0]} ${e[1]}`}if(typeof t=="object"){let{currency:e,issuer:i,value:r}=t;return`${r} ${e} (issuer: ${i})`}return"Unknown"}formatIOUXrpAmountOutstanding(t){if(!t)return"Unknown";if(typeof t=="string"&&/^[0-9]+$/.test(t))return`${Ja.dropsToXrp(t)} XRP`;if(typeof t=="object"){let{currency:e,value:i}=t;return`${i} ${this.utilsService.decodeIfNeeded(e)}`}return`${t} XRP`}formatInvoiceId(t){return this.utilsService.formatInvoiceId(t||"")}formatXrplTimestamp(t){return this.utilsService.convertXRPLTime(t)}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}loadKnownIssuers(){let t=this.storageService.getKnownIssuers("knownIssuers");t&&(this.knownTrustLinesIssuers.set(t),this.updateCurrencies())}clearFields(t=!0){this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.escrowFinishTimeField.set(""),this.escrowCancelTimeField.set(""),this.escrowSequenceNumberField.set(""),this.escrowOwnerField.set(""),this.amountField.set(""),this.destinationTagField.set("")}resetEscrowSelection(){this.selectedEscrow.set(null),this.escrowSequenceNumberField.set(""),this.escrowOwnerField.set("")}onCurrencyChange(t){this.trustlineCurrency.selectCurrency(t,this.currentWallet().address),this.currencyChangeTrigger.update(e=>e+1)}onIssuerChange(t){this.trustlineCurrency.selectIssuer(t)}refreshStoredIssuers(){let t=[],e=this.knownTrustLinesIssuers();for(let i in e)if(i!=="XRP")for(let r of e[i])t.push({name:i,address:r});t.sort((i,r)=>i.name.localeCompare(r.name)),this.storedIssuers.set(t)}updateCurrencies(){let i=Object.keys(this.knownTrustLinesIssuers).filter(r=>r!=="XRP").sort((r,o)=>r.localeCompare(o));this.currencies.set(i),i.length>0?(!this.currencyFieldDropDownValue()||!i.includes(this.currencyFieldDropDownValue()))&&(this.currencyFieldDropDownValue.set(i[0]),Promise.resolve().then(()=>{this.currencyFieldDropDownValue()&&this.onCurrencyChange(this.currencyFieldDropDownValue())})):(this.currencyFieldDropDownValue.set(""),this.issuerFields.set(""),this.issuers.set([]))}addToDateTimeField(t,e,i){let r=t();if(!r){let a=new Date;r=this.formatDateTimeLocal(a)}let o=new Date(r);o.setSeconds(o.getSeconds()+i);let s=this.formatDateTimeLocal(o);e.set(s)}formatDateTimeLocal(t){let e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${e}-${i}-${r}T${o}:${s}:${a}`}addEscrowFinishToExpiration(t){this.addToDateTimeField(this.escrowFinishTimeField,this.escrowFinishTimeField,t)}addEscrowCancelToExpiration(t){this.addToDateTimeField(this.escrowCancelTimeField,this.escrowCancelTimeField,t)}setEscrowFinishToNow(){let t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");this.escrowFinishTimeField.set(`${e}-${i}-${r}T${o}:${s}:${a}`)}setEscrowCancelToNow(){let t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");this.escrowCancelTimeField.set(`${e}-${i}-${r}T${o}:${s}:${a}`)}populateDefaultDateTime(){this.setEscrowFinishToNow(),this.setEscrowCancelToNow()}displayAmount(t){let e;if(typeof t=="string")e=`${Ja.dropsToXrp(t)} XRP`;else if(typeof t=="object"&&t.currency){let i=t.currency;if(/^[0-9A-F]{40}$/i.test(i))try{i=this.utilsService.normalizeCurrencyCode(i)}catch{}e=`${t.value} ${i} Issuer: <code>${t.issuer}</code>`}else e="N/A";return e}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-time-escrow"]],features:[Lt],decls:39,vars:24,consts:[["theForm","ngForm"],["itemTemplate",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],[1,"menu-btn",3,"click"],["name","heroClock","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"green-button-submenu"],["name","heroClock","size","27",1,"text-red-600"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[2,"margin-top","8px","font-size","0.9em"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[3,"innerHTML"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View Escrow on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[2,"color","#555","font-size","0.88em","display","flex","flex-direction","column","gap","4px"],["title","Copy Sequence",1,"copy-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-row"],[1,"form-group"],["for","currencyCodeCreate"],[1,"form-hint"],["placeholder","Search currency code...","emptyMessage","No currencies available",3,"valueChange","items","value","showShortAddress"],["for","amount"],["type","text","name","amountField","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["for","destinationTag"],["type","text","name","destinationTagField",3,"ngModelChange","ngModel"],["for","escrowFinishTime"],[1,"expiration-input-group"],["type","datetime-local","name","escrowFinishExpirationDate","step","1",1,"expiration-input",3,"ngModelChange","focus","ngModel"],[1,"expiration-buttons"],["type","button",1,"btn-small","btn-primary-blue",3,"click"],["for","escrowCancelTime"],["type","datetime-local","name","escrowCancelExpirationDate","step","1",1,"expiration-input",3,"ngModelChange","focus","ngModel"],[1,"flex","items-center","gap-2"],[1,"text-yellow-500","font-bold"],[1,"text-xs","text-gray-500"],["for","issuer"],["placeholder","Search or select issuer...","emptyMessage","No issuers found",3,"valueChange","items","value"],["for","currencyBalance"],["type","text","name","currencyBalanceField","readonly","",3,"ngModelChange","ngModel"],["for","mptIssuanceId"],["type","text","name","mptIssuanceIdField",3,"ngModelChange","ngModel"],["for","selectEscrow"],["placeholder","Search by amount, address, or sequence...","emptyMessage","No escrows available",3,"valueChange","items","value","showShortAddress"],["type","text","name","escrowSequenceNumberField",3,"ngModelChange","ngModel"],["for","escrowOwner"],["type","text","id","escrowOwnerField","name","escrowOwnerField",3,"ngModelChange","ngModel"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",2),ee(1,"app-navbar"),m(2,"main",3)(3,"div",4)(4,"div",5)(5,"app-wallet-panel",6),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",7)(7,"div",8)(8,"button",9),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",10),w(10," Create Escrow "),g(),m(11,"button",11),X("click",function(){return U(r),j(i.setTab("finish"))}),ee(12,"ng-icon",12),w(13," Finish Escrow "),g(),m(14,"button",11),X("click",function(){return U(r),j(i.setTab("cancel"))}),ee(15,"ng-icon",13),w(16," Cancel Escrow "),g()(),Q(17,_Ge,9,0,"div"),Q(18,bGe,9,0,"div"),Q(19,wGe,9,0,"div"),Q(20,BGe,11,4,"div",14),Q(21,VGe,3,1,"div",15),m(22,"form",16,0)(24,"div",17)(25,"div"),Q(26,qGe,69,11),Q(27,KGe,15,7),ee(28,"app-transaction-options",18),m(29,"div",19),Q(30,GGe,3,4,"button",20)(31,XGe,3,4,"button",21)(32,YGe,3,4,"button",22),m(33,"button",23),ct(34,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(35,"Clear Fields"),g()(),m(36,"div",24)(37,"input",25),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(38,"app-transaction-preview"),g()()()()()()()()}if(e&2){let r,o;_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="finish"),_(3),Ue("active",i.activeTab()==="cancel"),_(3),J(i.activeTab()==="create"?17:-1),_(),J(i.activeTab()==="finish"?18:-1),_(),J(i.activeTab()==="cancel"?19:-1),_(),J((r=i.infoData())?20:-1,r),_(),J(i.txUiService.warningMessage?21:-1),_(4),oe("@tabTransition",i.activeTab()),_(),J(i.activeTab()==="create"?26:-1),_(),J(i.activeTab()==="finish"||i.activeTab()==="cancel"?27:-1),_(),oe("showWhenTab",Ei(23,yGe))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J((o=i.activeTab())==="create"?30:o==="finish"?31:o==="cancel"?32:-1),_(3),oe("disabled",!mt(34,21,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki,$r,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var el=_i(Ki());var yfe=_i(gfe());var ZGe=()=>["create","finish","cancel"],QGe=(n,t)=>t.index;function JGe(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",26),ee(3,"ng-icon",27),g(),m(4,"div")(5,"h2",28),w(6,"Create Conditional Escrow"),g(),m(7,"p",29),w(8,"Create a conditional escrow to another XRPL address"),g()()()())}function eXe(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",30),ee(3,"lucide-icon",12),g(),m(4,"div")(5,"h2",28),w(6,"Finish Conditional Escrow"),g(),m(7,"p",29),w(8,"Finish a conditional escrow sent from another XRPL address"),g()()()())}function tXe(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",31),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",28),w(6,"Cancel Conditional Escrow"),g(),m(7,"p",29),w(8,"Cancel conditional escrow create from the selected account"),g()()()())}function nXe(n,t){n&1&&w(0," has no outstanding escrows. ")}function iXe(n,t){n&1&&w(0," created. ")}function rXe(n,t){n&1&&w(0," that can be finished. ")}function oXe(n,t){n&1&&w(0," that can be cancelled. ")}function sXe(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3),Q(4,iXe,1,0)(5,rXe,1,0)(6,oXe,1,0)),n&2){let e,i=E();_(2),Ee(i.escrowCount),_(),je(" escrow",i.escrowCount===1?"":"s"," "),_(),J((e=i.activeTab)==="create"?4:e==="finish"?5:e==="cancel"?6:-1)}}function aXe(n,t){if(n&1&&(m(0,"div",37),ee(1,"span",39),w(2," on XRPL Win"),g()),n&2){let e=E();_(),oe("innerHTML",e.links,pn)}}function lXe(n,t){n&1&&w(0," Outstanding Escrows ")}function cXe(n,t){n&1&&w(0," Finishable Escrows ")}function dXe(n,t){n&1&&w(0," Cancellable Escrows ")}function uXe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2192 ",e.destination.slice(0,7)+"..."+e.destination.slice(-7)," ")}}function hXe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2190 ",e.sender.slice(0,7)+"..."+e.sender.slice(-7)," ")}}function fXe(n,t){if(n&1&&(m(0,"div"),w(1,"Finishes: "),m(2,"code"),w(3),g()()),n&2){let e=E().$implicit,i=E(4);_(3),Ee(i.formatXrplTimestamp(e.finishAfter))}}function pXe(n,t){if(n&1&&(m(0,"div"),w(1,"Cancellable after: "),m(2,"code"),w(3),g()()),n&2){let e=E().$implicit,i=E(4);_(3),Ee(i.formatXrplTimestamp(e.cancelAfter))}}function mXe(n,t){if(n&1){let e=ge();m(0,"li",45)(1,"app-tooltip-link",46)(2,"div",47),w(3),Q(4,uXe,1,1),Q(5,hXe,1,1),g(),m(6,"div",48)(7,"div"),w(8,"Sequence: "),m(9,"code"),w(10),g()(),Q(11,fXe,4,1,"div"),Q(12,pXe,4,1,"div"),g()(),m(13,"button",49),X("click",function(r){let o=U(e).$implicit;return E(4).copyAndToast(o.index,"Escrow Sequence"),j(r.stopPropagation())}),lt(),m(14,"svg",50),ee(15,"rect",51)(16,"path",52),g()()()}if(n&2){let e=t.$implicit,i=E(3),r=E();_(),oe("href",r.txUiService.explorerUrl()+"entry/"+e.index),_(2),je("",e.amount," "),_(),J(i.activeTab==="create"||i.activeTab==="cancel"?4:-1),_(),J(i.activeTab==="finish"?5:-1),_(5),Ee(e.index),_(),J(e.finishAfter?11:-1),_(),J(e.cancelAfter?12:-1)}}function gXe(n,t){if(n&1&&(m(0,"ul",44),yn(1,mXe,17,7,"li",45,QGe),g()),n&2){let e=E(2);_(),vn(e.escrowsToShow)}}function yXe(n,t){if(n&1){let e=ge();m(0,"div",40),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",41)(2,"span"),Q(3,lXe,1,0)(4,cXe,1,0)(5,dXe,1,0),w(6),g(),lt(),m(7,"svg",42),ee(8,"path",43),g()(),Q(9,gXe,3,0,"ul",44),g()}if(n&2){let e,i=E(),r=E();_(3),J((e=i.activeTab)==="create"?3:e==="finish"?4:e==="cancel"?5:-1),_(3),je(" (",i.escrowCount,") "),_(),In("transform",r.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(r.infoPanelExpanded()?9:-1)}}function vXe(n,t){if(n&1&&(m(0,"div",14)(1,"div",33)(2,"div",34)(3,"div",35),ee(4,"ng-icon",36),m(5,"code"),w(6),g(),Q(7,nXe,1,0)(8,sXe,7,3),Q(9,aXe,3,1,"div",37),g(),Q(10,yXe,10,5,"div",38),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.escrowCount===0?7:8),_(2),J(e.links?9:-1),_(),J(e.escrowCount>0?10:-1)}}function _Xe(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",53)(2,"div",54),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function bXe(n,t){n&1&&(m(0,"span",76),w(1,"XRP"),g())}function wXe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function SXe(n,t){if(n&1&&(m(0,"div",75),Q(1,bXe,2,0,"span",76)(2,wXe,2,1,"span"),m(3,"span",77),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function CXe(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",78),w(3,"Issuer"),g(),m(4,"p",58),w(5,"The XRPL account that issues and controls this currency."),g(),m(6,"app-select-search-dropdown",79),X("valueChange",function(r){U(e);let o=E(2);return j(o.onIssuerSelected(r))}),g()(),m(7,"div",56)(8,"label",80),w(9,"Currency Balance"),g(),m(10,"p",58),w(11,"Total currency balance held by this account."),g(),m(12,"input",81),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.currencyBalanceField,r)||(o.currencyBalanceField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),oe("items",e.issuerItems())("value",e.selectedIssuerItem()),_(6),Oe("ngModel",e.currencyBalanceField)}}function xXe(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",82),w(3,"MPT Issuance ID"),g(),m(4,"input",83),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.mptIssuanceIdField,r)||(o.mptIssuanceIdField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(4),Oe("ngModel",e.mptIssuanceIdField)}}function kXe(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",57),w(3,"Currency Code"),g(),m(4,"p",58),w(5,"Issued asset combined with the issuer to uniquely define a token."),g(),m(6,"app-select-search-dropdown",59),X("valueChange",function(r){U(e);let o=E();return j(o.onCurrencySelected(r))}),nn(7,SXe,5,2,"ng-template",null,1,vr),g()(),m(9,"div",56)(10,"label",60),w(11,"Amount"),g(),m(12,"p",58),w(13,"The amount to deduct from the sender's balance and put in escrow."),g(),m(14,"input",61),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()(),Q(15,CXe,13,3,"div",55),Q(16,xXe,5,1,"div",55),m(17,"div",55)(18,"div",56)(19,"label",62),w(20,"Destination"),g(),m(21,"p",58),w(22,"Address to receive escrowed XRP."),g(),m(23,"app-select-search-dropdown",63),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()(),m(24,"div",56)(25,"label",64),w(26,"Destination Tag"),g(),m(27,"p",58),w(28,"Arbitrary tag to further specify the destination for this escrowed."),g(),m(29,"input",65),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.destinationTagField,r)||(o.destinationTagField=r),j(r)}),g()()(),m(30,"div",55)(31,"div",56)(32,"label"),w(33,"Condition"),g(),m(34,"p",58),w(35,"PREIMAGE-SHA-256 crypto-condition of the created escrow."),g(),m(36,"input",66),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.escrowConditionField,r)||(o.escrowConditionField=r),j(r)}),g()()(),m(37,"div",55)(38,"div",56)(39,"label"),w(40,"Fulfillment"),g(),m(41,"p",58),w(42,"PREIMAGE-SHA-256 crypto-condition fulfillment matching the held payment's Condition"),g(),m(43,"input",67),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.escrowFulfillmentField,r)||(o.escrowFulfillmentField=r),j(r)}),g()()(),m(44,"div",55)(45,"div",56)(46,"label",68),w(47,"Finish Time"),g(),m(48,"p",58),w(49,"The time, in seconds since the Ripple Epoch, when the escrowed XRP can be released to the recipient."),g(),m(50,"div",69)(51,"input",70),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.escrowFinishTimeField,r)||(o.escrowFinishTimeField=r),j(r)}),X("focus",function(){U(e);let r=E();return j(r.setEscrowFinishToNow())}),g(),m(52,"div",71)(53,"button",72),X("click",function(){U(e);let r=E();return j(r.setEscrowFinishToNow())}),w(54,"Now"),g(),m(55,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowFinishToExpiration(10))}),w(56,"+10s"),g(),m(57,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowFinishToExpiration(30))}),w(58,"+30s"),g(),m(59,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowFinishToExpiration(60))}),w(60,"+1min"),g(),m(61,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowFinishToExpiration(300))}),w(62,"+5min"),g()()()(),m(63,"div",56)(64,"label",73),w(65,"Cancel Time"),g(),m(66,"p",58),w(67," The time, in seconds since the Ripple Epoch, "),ee(68,"br"),w(69," this escrow expires. "),g(),m(70,"div",69)(71,"input",74),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.escrowCancelTimeField,r)||(o.escrowCancelTimeField=r),j(r)}),X("focus",function(){U(e);let r=E();return j(r.setEscrowCancelToNow())}),g(),m(72,"div",71)(73,"button",72),X("click",function(){U(e);let r=E();return j(r.setEscrowCancelToNow())}),w(74,"Now"),g(),m(75,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowCancelToExpiration(10))}),w(76,"+10s"),g(),m(77,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowCancelToExpiration(30))}),w(78,"+30s"),g(),m(79,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowCancelToExpiration(60))}),w(80,"+1min"),g(),m(81,"button",72),X("click",function(){U(e);let r=E();return j(r.addEscrowCancelToExpiration(300))}),w(82,"+5min"),g()()()()()}if(n&2){let e=E();_(6),oe("items",e.currencyItems())("value",e.selectedCurrencyItem())("showShortAddress",!1),_(8),Oe("ngModel",e.amountField),_(),J(e.currencyFieldDropDownValue()!=="XRP"&&e.currencyFieldDropDownValue()!=="MPT"?15:-1),_(),J(e.currencyFieldDropDownValue()==="MPT"?16:-1),_(7),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(6),Oe("ngModel",e.destinationTagField),_(7),Oe("ngModel",e.escrowConditionField),_(7),Oe("ngModel",e.escrowFulfillmentField),_(8),Oe("ngModel",e.escrowFinishTimeField),_(20),Oe("ngModel",e.escrowCancelTimeField)}}function MXe(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",87),w(3,"Escrow Owner"),g(),m(4,"p",58),w(5,"The account that orginally created the escrow."),g(),m(6,"input",88),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.escrowOwnerField,r)||(o.escrowOwnerField=r),j(r)}),g()()(),m(7,"div",55)(8,"div",56)(9,"label"),w(10,"Condition"),g(),m(11,"p",58),w(12,"Hex value matching the previously-supplied PREIMAGE-SHA-256 crypto-condition of the held payment."),g(),m(13,"input",66),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.escrowConditionField,r)||(o.escrowConditionField=r),j(r)}),g()()(),m(14,"div",55)(15,"div",56)(16,"label"),w(17,"Fulfillment"),g(),m(18,"p",58),w(19,"Hex value of the PREIMAGE-SHA-256 crypto-condition fulfillment matching the held payment's Condition."),g(),m(20,"input",67),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.escrowFulfillmentField,r)||(o.escrowFulfillmentField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),Oe("ngModel",e.escrowOwnerField),_(7),Oe("ngModel",e.escrowConditionField),_(7),Oe("ngModel",e.escrowFulfillmentField)}}function TXe(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",84),w(3),g(),m(4,"p",58),w(5),g(),m(6,"app-select-search-dropdown",85),X("valueChange",function(r){U(e);let o=E();return j(o.onEscrowSelected(r))}),g()()(),m(7,"div",55)(8,"div",56)(9,"label"),w(10,"Escrow Sequence ID"),g(),m(11,"p",58),w(12,"Sequence ID generated when the escrow was created."),g(),m(13,"input",86),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.escrowSequenceNumberField,r)||(o.escrowSequenceNumberField=r),j(r)}),g()()(),Q(14,MXe,21,3)}if(n&2){let e=E();_(3),je("Select Escrow to ",e.activeTab()==="finish"?"Finish":"Cancel"),_(2),je("Select an existing escrow to ",e.activeTab()==="finish"?"Finish":"Cancel","."),_(),oe("items",e.escrowItems())("value",e.selectedEscrowItem())("showShortAddress",!1),_(7),Oe("ngModel",e.escrowSequenceNumberField),_(),J(e.activeTab()==="finish"?14:-1)}}function EXe(n,t){if(n&1){let e=ge();m(0,"button",89),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.createConditionalEscrow())}),w(2),g(),m(3,"button",90),ct(4,"async"),X("click",function(r){return U(e),E().getCondition(),j(r.preventDefault())}),w(5),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,4,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create Escrow"),_(),oe("disabled",e.txUiService.spinner()||!mt(4,6,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Generate Condition")}}function AXe(n,t){if(n&1){let e=ge();m(0,"button",90),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.finishConditionalEscrow())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Finish Escrow")}}function DXe(n,t){if(n&1){let e=ge();m(0,"button",91),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.cancelEscrow())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Cancel Escrow")}}var B8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("create");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");currencyFieldDropDownValue=P("XRP");issuerFields=P("");mptIssuanceIdField=P("");isMptEnabled=P(!1);currencyBalanceField=P("0");knownTrustLinesIssuers=P({XRP:[]});currencies=P([]);storedIssuers=P([]);selectedIssuer=P("");issuers=P([]);currencyChangeTrigger=P(0);escrowFinishTimeField=P("");escrowFinishTimeUnit=P("seconds");escrowCancelTimeUnit=P("seconds");escrowCancelTimeField=P("");escrowOwnerField=P("");escrowSequenceNumberField=P("");selectedEscrow=P(null);tokenBalance=P("0");escrowCancelDateTimeField=P("");escrowFinishDateTimeField=P("");expiredOrFulfilledEscrows=P([]);allEscrowsRaw=P([]);finishEscrow=P([]);existingEscrow=P([]);exsitingMpt=P([]);existingIOUs=P([]);outstandingEscrowCollapsed=P(!0);outstandingMptCollapsed=P(!0);outstandingIOUCollapsed=P(!0);escrowConditionField=P("");escrowFulfillmentField=P("");selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return[...this.wallets().map(i=>({address:i.address,name:i.name??`Wallet ${i.address.slice(0,8)}`})),...this.customDestinations()].map(i=>({id:i.address,display:i.name||"Unknown Wallet",secondary:i.address,isCurrentAccount:i.address===t,isCurrentCode:!1,isCurrentToken:!1}))});currencyItems=_e(()=>{let t=this.currencyFieldDropDownValue();return this.availableCurrencies.map(e=>e==="MPT"?{id:"MPT",display:"MPT",secondary:"Multi-Purpose Token",isCurrentAccount:!1,isCurrentCode:t==="MPT",isCurrentToken:!1}:{id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":`${this.trustlineCurrency.getIssuersForCurrency(e).length} issuer${this.trustlineCurrency.getIssuersForCurrency(e).length!==1?"s":""}`,isCurrentAccount:!1,isCurrentCode:e===t,isCurrentToken:!1})});selectedCurrencyItem=_e(()=>{let t=this.currencyFieldDropDownValue();return t&&this.currencyItems().find(e=>e.id===t)||null});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});escrowItems=_e(()=>{let t=this.allEscrowsRaw(),e=this.currentWallet().address,i=this.activeTab()==="cancel";return t.filter(r=>i?r.Sender===e:r.Destination===e).map(r=>{let o=typeof r.Amount=="string"?`${el.dropsToXrp(r.Amount)} XRP`:`${r.Amount.value} ${this.utilsService.normalizeCurrencyCode(r.Amount.currency)}`;return{id:r.EscrowSequence?.toString()||"unknown",display:`${o} \u2192 ${i?r.Destination:r.Sender}`,secondary:`Seq: ${r.EscrowSequence} \u2022 ${i?"You created":"Sent to you"}`,isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1}})});selectedEscrowItem=_e(()=>{let t=this.escrowSequenceNumberField();if(!t)return null;console.log("seq",t),console.log("escrowItems",this.escrowItems());let e=t.toString();return this.escrowItems().find(i=>i.id===e)||null});issuerItems=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return this.issuers().map((e,i)=>({id:e.address,display:e.name||`Issuer ${i+1}`,secondary:e.address.slice(0,7)+"..."+e.address.slice(-7),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:e.address===t}))});selectedIssuerAddress=_e(()=>this.trustlineCurrency.getSelectedIssuer());selectedIssuerItem=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return t&&this.issuerItems().find(e=>e.id===t)||null});infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=t.address,r=this.txUiService.explorerUrl(),o=0,s=[];switch(this.activeTab()){case"create":{let l=this.allEscrowsRaw().filter(c=>c.Sender===i);o=l.length,s=l.map(c=>({index:c.EscrowSequence?.toString()||"Unknown",amount:typeof c.Amount=="string"?`${el.dropsToXrp(c.Amount)} XRP`:`${c.Amount.value} ${this.utilsService.normalizeCurrencyCode(c.Amount.currency)}`,destination:c.Destination,finishAfter:c.FinishAfter,cancelAfter:c.CancelAfter}));break}case"finish":{let l=this.allEscrowsRaw().filter(c=>c.Destination===i);o=l.length,s=l.map(c=>({index:c.EscrowSequence?.toString()||"Unknown",amount:typeof c.Amount=="string"?`${el.dropsToXrp(c.Amount)} XRP`:`${c.Amount.value} ${this.utilsService.normalizeCurrencyCode(c.Amount.currency)}`,sender:c.Sender,finishAfter:c.FinishAfter}));break}case"cancel":{let l=this.allEscrowsRaw().filter(c=>c.Sender===i);o=l.length,s=l.map(c=>({index:c.EscrowSequence?.toString()||"Unknown",amount:typeof c.Amount=="string"?`${el.dropsToXrp(c.Amount)} XRP`:`${c.Amount.value} ${this.utilsService.normalizeCurrencyCode(c.Amount.currency)}`,destination:c.Destination,cancelAfter:c.CancelAfter}));break}}let a=[];if(this.activeTab()==="create"){let l=this.existingEscrow().length>0,c=this.existingIOUs().length>0,d=this.exsitingMpt().length>0;l&&a.push(`<a href="${r}account/${i}/escrows" target="_blank" rel="noopener" class="xrpl-win-link">View Escrows</a>`),c&&a.push(`<a href="${r}account/${i}/tokens" target="_blank" rel="noopener" class="xrpl-win-link">View IOUs</a>`),d&&a.push(`<a href="${r}account/${i}/mpts/owned" target="_blank" rel="noopener" class="xrpl-win-link">View MPTs</a>`)}return{walletName:e,escrowCount:o,escrowsToShow:s,links:a.length>0?a.join(" | "):null,activeTab:this.activeTab()}});timeUnitItems=_e(()=>[{id:"seconds",display:"Seconds"},{id:"minutes",display:"Minutes"},{id:"hours",display:"Hours"},{id:"days",display:"Days"}]);selectedEscrowFinishTimeUnit=_e(()=>{let t=this.escrowFinishTimeUnit();return this.timeUnitItems().find(e=>e.id===t)||null});selectedEscrowCancelTimeUnit=_e(()=>{let t=this.escrowCancelTimeUnit();return this.timeUnitItems().find(e=>e.id===t)||null});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadKnownIssuers(),this.refreshStoredIssuers(),this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.trustlineCurrency.currencies$.subscribe(t=>{this.currencies.set(t),t.length>0&&!this.currencyFieldDropDownValue()&&(this.currencyFieldDropDownValue.set(t[0]),this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address))}),this.trustlineCurrency.issuers$.subscribe(t=>{this.issuers.set(t)}),this.trustlineCurrency.selectedIssuer$.subscribe(t=>{this.issuerFields.set(t)}),this.trustlineCurrency.balance$.subscribe(t=>{this.currencyBalanceField.set(t)}),this.currencyFieldDropDownValue.set("XRP"),this.populateDefaultDateTime()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.clearFields(!0),this.selectWallet(i))}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.clearFields(!0),yield this.getEscrows(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set(""),this.populateDefaultDateTime()}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}onCurrencySelected(t){let e=t?.id||"XRP";this.currencyFieldDropDownValue.set(e),this.onCurrencyChange(e)}onDestinationSelected(t){this.selectedDestinationAddress.set(t?.id||"")}onEscrowSelected(t){if(!t?.id){this.escrowSequenceNumberField.set(""),this.escrowOwnerField.set("");return}let e=this.expiredOrFulfilledEscrows().find(i=>i.EscrowSequence?.toString()===t.id);e&&(this.escrowSequenceNumberField.set(e.EscrowSequence),this.escrowOwnerField.set(e.Sender))}onIssuerSelected(t){let e=t?.id||"";this.trustlineCurrency.selectIssuer(e),this.onIssuerChange(e)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),Object.keys(this.knownTrustLinesIssuers).length>0&&this.issuerFields()===""&&this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue.set(Object.keys(this.knownTrustLinesIssuers)[0]),this.clearFields(!0),this.hasWallets()&&(yield this.getEscrows(!0),this.populateDefaultDateTime())})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getEscrows(t=!1){return z(this,null,function*(){yield this.withPerf("getEscrows",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.getExistingEscrows(o,i.classicAddress),this.getExistingMpts(o,i.classicAddress),this.getExistingIOUs(o,i.classicAddress),this.getExpiredOrFulfilledEscrows(e,o,i.classicAddress),this.loadAllEscrows(o,i.classicAddress),this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.issuerFields()!==""&&this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getEscrows:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createConditionalEscrow(){return z(this,null,function*(){yield this.withPerf("createConditionalEscrow",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),l=this.selectedDestinationAddress()||this.typedDestination();console.log(this.utilsService.toRippleTime(this.escrowFinishTimeField())),console.log(this.utilsService.toRippleTime(this.escrowCancelTimeField()));let c=this.utilsService.toRippleTime(this.escrowFinishTimeField()),d=this.utilsService.toRippleTime(this.escrowCancelTimeField()),u=this.currencyFieldDropDownValue()===Re.XRP_CURRENCY?el.xrpToDrops(this.amountField()):{value:this.amountField(),currency:this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue()),issuer:this.issuerFields()},h={TransactionType:"EscrowCreate",Account:e.address,Amount:u,Destination:l,FinishAfter:c,CancelAfter:d,Condition:this.escrowConditionField(),Fee:s,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,h,e,i,"create");let f=yield this.txExecutor.createEscrow(h,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!f.success)return this.txUiService.setError(`${f.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow cancel successfully!":"Cancelled escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in createTimeBasedEscrow:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}finishConditionalEscrow(){return z(this,null,function*(){yield this.withPerf("finishConditionalEscrow",()=>z(this,null,function*(){if(this.txUiService.clearAllOptionsAndMessages(),this.escrowConditionField()&&!this.utilsService.validateInput(this.escrowFulfillmentField()))return this.txUiService.setError("Fulfillment is required when a condition is provided");try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a,l,c]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated","escrow"),this.xrplService.getEscrowBySequence(t,e.classicAddress,Number(this.escrowSequenceNumberField())),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),d=yield this.xrplService.getCurrentRippleTime(t),u=this.utilsService.checkEscrowStatus({FinishAfter:a.FinshAfter?Number(a.FinshAfter):void 0,CancelAfter:a.CancelAfter?Number(a.CancelAfter):void 0,Condition:this.escrowConditionField(),owner:this.escrowOwnerField()},d,e.classicAddress,"finishEscrow",this.escrowFulfillmentField());if(!u.canFinish&&!u.canCancel)return this.txUiService.setError(`
${u.reasonCancel}
${u.reasonFinish}`);if(!u.canFinish)return this.txUiService.setError(`${u.reasonFinish}`);let h={TransactionType:"EscrowFinish",Account:e.classicAddress,Owner:this.escrowOwnerField(),OfferSequence:Number.parseInt(this.escrowSequenceNumberField()),Condition:this.escrowConditionField(),Fulfillment:this.escrowFulfillmentField(),Fee:l,LastLedgerSequence:c+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,h,e,i,"finish");let f=yield this.txExecutor.finishEscrow(h,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!f.success)return this.txUiService.setError(`${f.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow finished successfully!":"Finished escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in finishConditionalEscrow:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}cancelEscrow(){return z(this,null,function*(){yield this.withPerf("cancelEscrow",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[r,o,s,a,l]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated","escrow"),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),c=!1,d=this.currentWallet().address,u;for(let[S,x]of o.result.account_objects.entries())if(x.PreviousTxnID){let k=yield this.xrplService.getTxData(t,x.PreviousTxnID);if(k.result.tx_json.Sequence===Number(this.escrowSequenceNumberField())){c=!0,u=x,d=u.Account;break}else if(k.result.tx_json.TicketSequence!=null&&k.result.tx_json.TicketSequence===Number(this.escrowSequenceNumberField())){c=!0,u=x,d=u.Account;break}}if(!u)return this.txUiService.setError(`No escrow found for sequence ${this.escrowSequenceNumberField()}`);let h=yield this.xrplService.getCurrentRippleTime(t),f=u.FinshAfter!==void 0?Number(u.FinshAfter):void 0,p=u.CancelAfter!==void 0?Number(u.CancelAfter):void 0,y=this.utilsService.checkTimeBasedEscrowStatus({FinishAfter:f,CancelAfter:p,owner:d},h,e.classicAddress,"cancelEscrow");if(!y.canCancel)return this.txUiService.setError(`${y.reasonCancel}`);let v={TransactionType:"EscrowCancel",Account:e.classicAddress,Owner:d,OfferSequence:Number.parseInt(this.escrowSequenceNumberField()),Fee:s,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,v,e,r,"cancel");let b=yield this.txExecutor.cancelEscrow(v,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!b.success)return this.txUiService.setError(`${b.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow cancel successfully!":"Cancelled escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in cancelEscrow:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}loadAllEscrows(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Escrow"&&(r.FinishAfter||r.CancelAfter)&&!r.Condition).map(r=>z(this,null,function*(){let o=null;if(r.PreviousTxnID)try{let a=yield this.getClient();o=(yield this.xrplService.getTxData(a,r.PreviousTxnID)).result.tx_json.Sequence??null}catch{console.warn("Failed to fetch sequence for escrow",r.PreviousTxnID)}let s=typeof r.Amount=="string"?el.dropsToXrp(r.Amount):r.Amount.value+" "+this.utilsService.normalizeCurrencyCode(r.Amount.currency);return{Sender:r.Account,Destination:r.Destination,Amount:r.Amount,EscrowSequence:o,CancelAfter:r.CancelAfter,FinishAfter:r.FinishAfter}}));Promise.all(i).then(r=>{this.allEscrowsRaw.set(r)})}getExistingEscrows(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Escrow"&&r.Account===e&&(r.FinishAfter||r.CancelAfter)&&!!r.Condition).map(r=>{let o=r.Amount,s="0",a="";return typeof o=="string"?(s=String(el.dropsToXrp(o)),a=""):o?.value&&(s=o.value,a=this.utilsService.normalizeCurrencyCode(o.currency)),{Account:r.Account,Amount:`${s} ${a}`,Destination:r.Destination,DestinationTag:r.DestinationTag,CancelAfter:r.CancelAfter,FinishAfter:r.FinishAfter,TxHash:r.PreviousTxnID,Sequence:r.PreviousTxnID}}).sort((r,o)=>r.Destination.localeCompare(o.Destination));this.existingEscrow.set(i),this.utilsService.logObjects("existingEscrow",i)}getExistingMpts(t,e){let i=(t.result.account_objects??[]).filter(r=>(r.LedgerEntryType==="MPToken"||r.LedgerEntryType==="MPTokenIssuance")&&(r.Account===e||r.Issuer===e)).map(r=>({LedgerEntryType:r.LedgerEntryType,MPTAmount:r.MaximumAmount?r.MaximumAmount:r.MPTAmount,mpt_issuance_id:r.mpt_issuance_id?r.mpt_issuance_id:r.MPTokenIssuanceID})).sort((r,o)=>{let s=r.mpt_issuance_id??"",a=o.mpt_issuance_id??"";return s.localeCompare(a)});this.exsitingMpt.set(i),this.utilsService.logObjects("exsitingMpt",i)}getExistingIOUs(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="RippleState").map(r=>{let o=r.Balance?.value??"0",s=this.utilsService.normalizeCurrencyCode(r.Balance?.currency),a=r.HighLimit?.issuer===e?r.LowLimit?.issuer:r.HighLimit?.issuer;return{LedgerEntryType:"RippleState",Balance:{currency:s,value:o},HighLimit:{issuer:a}}}).sort((r,o)=>r.HighLimit.issuer.localeCompare(o.HighLimit.issuer));this.existingIOUs.set(i),this.utilsService.logObjects("existingIOUs",i)}getExpiredOrFulfilledEscrows(t,e,i){return z(this,null,function*(){let r=(e.result.account_objects??[]).filter(s=>s.LedgerEntryType==="Escrow"&&(this.activeTab()==="cancel"?s.Account===i:s.Destination===i)),o=yield Promise.all(r.map(s=>z(this,null,function*(){let a=s.Amount,l="0";typeof a=="string"?l=String(el.dropsToXrp(a)):a?.value&&(l=`${a.value} ${this.utilsService.normalizeCurrencyCode(a.currency)}`);let c=null;if(s.PreviousTxnID)try{c=(yield this.xrplService.getTxData(t,s.PreviousTxnID))?.result?.tx_json?.Sequence??null}catch(d){console.warn(`Failed to fetch escrow sequence for ${s.PreviousTxnID}:`,d)}return{Amount:l,Sender:s.Account,Destination:s.Destination,EscrowSequence:c}})));this.expiredOrFulfilledEscrows.set(o.sort((s,a)=>s.Sender.localeCompare(a.Sender))),this.utilsService.logObjects("expiredOrFulfilledEscrows",this.expiredOrFulfilledEscrows)})}get availableCurrencies(){return["XRP","MPT",...Object.keys(this.knownTrustLinesIssuers()).filter(t=>t&&t!=="XRP"&&t!=="MPT").sort((t,e)=>t.localeCompare(e))]}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}if(this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),this.txUiService.destinationTagField()&&this.utilsService.setDestinationTag(e,this.txUiService.destinationTagField()),o==="create")if(this.currencyFieldDropDownValue()==="MPT"){let a=(yield this.xrplService.getAccountObjects(t,this.selectedDestinationAddress(),"validated","")).result.account_objects.filter(d=>d.LedgerEntryType==="MPToken");if(console.debug("Destination MPT Tokens:",a),console.debug("MPT Issuance ID:",this.mptIssuanceIdField),!a.some(d=>d.MPTokenIssuanceID===this.mptIssuanceIdField))throw new Error(`Destination ${this.selectedDestinationAddress()} is not authorized to receive this MPT (issuance ID ${this.mptIssuanceIdField}). Please ensure authorization has been completed.`);let c={mpt_issuance_id:this.mptIssuanceIdField(),value:this.amountField()};e.Amount=c}else if(this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"){let s={currency:this.currencyFieldDropDownValue.length>3?this.utilsService.encodeCurrencyCode(this.currencyFieldDropDownValue()):this.currencyFieldDropDownValue(),issuer:this.issuerFields(),value:this.amountField()};e.Amount=s}else e.Amount=el.xrpToDrops(this.amountField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getExistingEscrows(s,e.classicAddress),this.getExistingMpts(s,e.classicAddress),this.getExistingIOUs(s,e.classicAddress),this.getExpiredOrFulfilledEscrows(t,s,e.classicAddress),this.loadAllEscrows(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&el.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}copyEscrowTxHash(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Escrow Tx Hash copied!")})}copyMptIssuanceIdHash(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("MPT Issuance ID copied!")})}copyIOUIssuanceAddress(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("IOU Token Issuer copied!")})}formatIOUXrpAmountUI(t){if(!t)return"Unknown";if(typeof t=="string"&&t.split(" ").length===1)return`${t} XRP`;if(t.split(" ").length===2){let e=t.split(" ");return`${e[0]} ${e[1]}`}if(typeof t=="object"){let{currency:e,issuer:i,value:r}=t;return`${r} ${e} (issuer: ${i})`}return"Unknown"}formatIOUXrpAmountOutstanding(t){if(!t)return"Unknown";if(typeof t=="string"&&/^[0-9]+$/.test(t))return`${el.dropsToXrp(t)} XRP`;if(typeof t=="object"){let{currency:e,value:i}=t;return`${i} ${this.utilsService.decodeIfNeeded(e)}`}return`${t} XRP`}formatInvoiceId(t){return this.utilsService.formatInvoiceId(t||"")}formatXrplTimestamp(t){return this.utilsService.convertXRPLTime(t)}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}loadKnownIssuers(){let t=this.storageService.getKnownIssuers("knownIssuers");t&&(this.knownTrustLinesIssuers.set(t),this.updateCurrencies())}clearFields(t=!0){this.escrowConditionField.set(""),this.escrowFulfillmentField.set(""),this.escrowFinishTimeField.set(""),this.escrowCancelTimeField.set(""),this.escrowSequenceNumberField.set(""),this.escrowOwnerField.set(""),this.amountField.set(""),this.destinationTagField.set(""),this.typedDestination.set(""),this.selectedDestinationAddress.set("")}resetEscrowSelection(){this.selectedEscrow.set(null),this.escrowSequenceNumberField.set(""),this.escrowOwnerField.set("")}onCurrencyChange(t){this.trustlineCurrency.selectCurrency(t,this.currentWallet().address),this.currencyChangeTrigger.update(e=>e+1)}onIssuerChange(t){this.trustlineCurrency.selectIssuer(t)}refreshStoredIssuers(){let t=[],e=this.knownTrustLinesIssuers();for(let i in e)if(i!=="XRP")for(let r of e[i])t.push({name:i,address:r});t.sort((i,r)=>i.name.localeCompare(r.name)),this.storedIssuers.set(t)}updateCurrencies(){let i=Object.keys(this.knownTrustLinesIssuers).filter(r=>r!=="XRP").sort((r,o)=>r.localeCompare(o));this.currencies.set(i),i.length>0?(!this.currencyFieldDropDownValue()||!i.includes(this.currencyFieldDropDownValue()))&&(this.currencyFieldDropDownValue.set(i[0]),Promise.resolve().then(()=>{this.currencyFieldDropDownValue()&&this.onCurrencyChange(this.currencyFieldDropDownValue())})):(this.currencyFieldDropDownValue.set(""),this.issuerFields.set(""),this.issuers.set([]))}getCondition(){let{condition:t,fulfillment:e}=this.generateCondition();this.escrowConditionField.set(t),this.escrowFulfillmentField.set(e)}generateCondition(){console.log("Generating a cryptographic condition and fulfillment for XRPL escrow");let t=new Uint8Array(32);globalThis.crypto.getRandomValues(t);let e=new yfe.PreimageSha256;e.setPreimage(Buffer.from(t));let i=e.getConditionBinary().toString("hex").toUpperCase(),r=e.serializeBinary().toString("hex").toUpperCase();return console.log("Condition:",i),console.log("Fulfillment (keep secret until ready to finish escrow):",r),{condition:i,fulfillment:r}}addToDateTimeField(t,e,i){let r=t();if(!r){let a=new Date;r=this.formatDateTimeLocal(a)}let o=new Date(r);o.setSeconds(o.getSeconds()+i);let s=this.formatDateTimeLocal(o);e.set(s)}formatDateTimeLocal(t){let e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${e}-${i}-${r}T${o}:${s}:${a}`}addEscrowFinishToExpiration(t){this.addToDateTimeField(this.escrowFinishTimeField,this.escrowFinishTimeField,t)}addEscrowCancelToExpiration(t){this.addToDateTimeField(this.escrowCancelTimeField,this.escrowCancelTimeField,t)}setEscrowFinishToNow(){let t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");this.escrowFinishTimeField.set(`${e}-${i}-${r}T${o}:${s}:${a}`)}setEscrowCancelToNow(){let t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");this.escrowCancelTimeField.set(`${e}-${i}-${r}T${o}:${s}:${a}`)}populateDefaultDateTime(){this.setEscrowFinishToNow(),this.setEscrowCancelToNow()}displayAmount(t){let e;if(typeof t=="string")e=`${el.dropsToXrp(t)} XRP`;else if(typeof t=="object"&&t.currency){let i=t.currency;if(/^[0-9A-F]{40}$/i.test(i))try{i=this.utilsService.normalizeCurrencyCode(i)}catch{}e=`${t.value} ${i} Issuer: <code>${t.issuer}</code>`}else e="N/A";return e}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-conditional-escrow"]],features:[Lt],decls:39,vars:24,consts:[["theForm","ngForm"],["itemTemplate",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],[1,"menu-btn",3,"click"],["name","split-icon","size","20"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"green-button-submenu"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[2,"margin-top","8px","font-size","0.9em"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[3,"innerHTML"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View Escrow on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[2,"color","#555","font-size","0.88em","display","flex","flex-direction","column","gap","4px"],["title","Copy Sequence",1,"copy-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-row"],[1,"form-group"],["for","currencyCodeCreate"],[1,"form-hint"],["placeholder","Search currency code...","emptyMessage","No currencies available",3,"valueChange","items","value","showShortAddress"],["for","amount"],["type","text","name","amountField","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["for","destinationTag"],["type","text","name","destinationTagField",3,"ngModelChange","ngModel"],["type","text","name","escrowConditionField",3,"ngModelChange","ngModel"],["type","text","name","escrowFulfillmentField",3,"ngModelChange","ngModel"],["for","escrowFinishTime"],[1,"expiration-input-group"],["type","datetime-local","name","escrowFinishExpirationDate","step","1",1,"expiration-input",3,"ngModelChange","focus","ngModel"],[1,"expiration-buttons"],["type","button",1,"btn-small","btn-primary-blue",3,"click"],["for","escrowCancelTime"],["type","datetime-local","name","escrowCancelExpirationDate","step","1",1,"expiration-input",3,"ngModelChange","focus","ngModel"],[1,"flex","items-center","gap-2"],[1,"text-yellow-500","font-bold"],[1,"text-xs","text-gray-500"],["for","issuer"],["placeholder","Search or select issuer...","emptyMessage","No issuers found",3,"valueChange","items","value"],["for","currencyBalance"],["type","text","name","currencyBalanceField","readonly","",3,"ngModelChange","ngModel"],["for","mptIssuanceId"],["type","text","name","mptIssuanceIdField",3,"ngModelChange","ngModel"],["for","selectEscrow"],["placeholder","Search by amount, address, or sequence...","emptyMessage","No escrows available",3,"valueChange","items","value","showShortAddress"],["type","text","name","escrowSequenceNumberField",3,"ngModelChange","ngModel"],["for","escrowOwner"],["type","text","id","escrowOwnerField","name","escrowOwnerField",3,"ngModelChange","ngModel"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",2),ee(1,"app-navbar"),m(2,"main",3)(3,"div",4)(4,"div",5)(5,"app-wallet-panel",6),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",7)(7,"div",8)(8,"button",9),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",10),w(10," Create Escrow "),g(),m(11,"button",11),X("click",function(){return U(r),j(i.setTab("finish"))}),ee(12,"lucide-icon",12),w(13," Finish Escrow "),g(),m(14,"button",11),X("click",function(){return U(r),j(i.setTab("cancel"))}),ee(15,"ng-icon",13),w(16," Cancel Escrow "),g()(),Q(17,JGe,9,0,"div"),Q(18,eXe,9,0,"div"),Q(19,tXe,9,0,"div"),Q(20,vXe,11,4,"div",14),Q(21,_Xe,3,1,"div",15),m(22,"form",16,0)(24,"div",17)(25,"div"),Q(26,kXe,83,13),Q(27,TXe,15,7),ee(28,"app-transaction-options",18),m(29,"div",19),Q(30,EXe,6,8)(31,AXe,3,4,"button",20)(32,DXe,3,4,"button",21),m(33,"button",22),ct(34,"async"),X("click",function(){return U(r),j(i.clearFields(!0))}),w(35,"Clear Fields"),g()(),m(36,"div",23)(37,"input",24),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(38,"app-transaction-preview"),g()()()()()()()()}if(e&2){let r,o;_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="finish"),_(3),Ue("active",i.activeTab()==="cancel"),_(3),J(i.activeTab()==="create"?17:-1),_(),J(i.activeTab()==="finish"?18:-1),_(),J(i.activeTab()==="cancel"?19:-1),_(),J((r=i.infoData())?20:-1,r),_(),J(i.txUiService.warningMessage?21:-1),_(4),oe("@tabTransition",i.activeTab()),_(),J(i.activeTab()==="create"?26:-1),_(),J(i.activeTab()==="finish"||i.activeTab()==="cancel"?27:-1),_(),oe("showWhenTab",Ei(23,ZGe))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J((o=i.activeTab())==="create"?30:o==="finish"?31:o==="cancel"?32:-1),_(3),oe("disabled",!mt(34,21,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,$r,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var Zu=_i(Ki());var IXe=()=>["create","cash","cancel"],FXe=(n,t)=>t.id;function PXe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",28),ee(3,"ng-icon",29),g(),m(4,"div")(5,"h2",30),w(6,"Create Check"),g(),m(7,"p",31),w(8,"Create a check to another XRPL address"),g()()()())}function LXe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",32),ee(3,"ng-icon",33),g(),m(4,"div")(5,"h2",30),w(6,"Cash Check"),g(),m(7,"p",31),w(8,"Cash check sent from another XRPL address"),g()()()())}function RXe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",34),ee(3,"ng-icon",35),g(),m(4,"div")(5,"h2",30),w(6,"Cancel Check"),g(),m(7,"p",31),w(8,"Cancel check create from the selected account"),g()()()())}function OXe(n,t){n&1&&w(0," has no outstanding checks. ")}function NXe(n,t){n&1&&w(0," created. ")}function BXe(n,t){n&1&&w(0," that can be cashed. ")}function VXe(n,t){n&1&&w(0," that can be cancelled. ")}function UXe(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3),Q(4,NXe,1,0)(5,BXe,1,0)(6,VXe,1,0)),n&2){let e,i=E(),r=E();_(2),Ee(i.checkCount),_(),je(" check",i.checkCount===1?"":"s"," "),_(),J((e=r.activeTab())==="create"?4:e==="cash"?5:e==="cancel"?6:-1)}}function jXe(n,t){n&1&&w(0," Outstanding Checks ")}function HXe(n,t){n&1&&w(0," Cashable Checks ")}function WXe(n,t){n&1&&w(0," Cancellable Checks ")}function zXe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2192 ",e.destination.slice(0,7)+"..."+e.destination.slice(-7)," ")}}function qXe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2190 ",e.sender.slice(0,7)+"..."+e.sender.slice(-7)," ")}}function $Xe(n,t){if(n&1&&w(0),n&2){let e=E().$implicit;je(" \u2192 ",e.destination.slice(0,7)+"..."+e.destination.slice(-7)," ")}}function KXe(n,t){if(n&1&&(m(0,"div",51)(1,"span"),w(2,"Dest Tag: "),g(),m(3,"code"),w(4),g()()),n&2){let e=E().$implicit;_(4),Ee(e.destinationTag)}}function GXe(n,t){if(n&1&&(m(0,"div",51)(1,"span"),w(2,"Expires: "),g(),m(3,"code"),w(4),g()()),n&2){let e=E().$implicit,i=E(4);_(4),Ee(i.formatXrplTimestamp(e.expiration))}}function XXe(n,t){if(n&1&&(m(0,"div",51)(1,"span"),w(2,"Invoice ID: "),g(),m(3,"code"),w(4),g()()),n&2){let e=E().$implicit,i=E(4);_(4),Ee(i.formatInvoiceId(e.invoiceId))}}function YXe(n,t){if(n&1){let e=ge();m(0,"li",46)(1,"app-tooltip-link",47)(2,"div",48),w(3),Q(4,zXe,1,1),Q(5,qXe,1,1),Q(6,$Xe,1,1),g(),m(7,"div",49)(8,"span"),w(9,"Check ID:"),g(),m(10,"code",50),w(11),g()(),Q(12,KXe,5,1,"div",51),Q(13,GXe,5,1,"div",51),Q(14,XXe,5,1,"div",51),g(),m(15,"button",52),X("click",function(r){let o=U(e).$implicit;return E(4).copyAndToast(o.index,"Check ID"),j(r.stopPropagation())}),lt(),m(16,"svg",53),ee(17,"rect",54)(18,"path",55),g()()()}if(n&2){let e=t.$implicit,i=E(4);_(),oe("href",i.txUiService.explorerUrl()+"entry/"+e.index),_(2),je(" ",e.amount," "),_(),J(i.activeTab()==="create"?4:-1),_(),J(i.activeTab()==="cash"?5:-1),_(),J(i.activeTab()==="cancel"?6:-1),_(5),Ee(e.index),_(),J(e.destinationTag?12:-1),_(),J(e.expiration?13:-1),_(),J(e.invoiceId?14:-1)}}function ZXe(n,t){if(n&1&&(m(0,"ul",45),yn(1,YXe,19,9,"li",46,FXe),g()),n&2){let e=E(2);_(),vn(e.checksToShow)}}function QXe(n,t){if(n&1){let e=ge();m(0,"div",41),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",42)(2,"span"),Q(3,jXe,1,0)(4,HXe,1,0)(5,WXe,1,0),w(6),g(),lt(),m(7,"svg",43),ee(8,"path",44),g()(),Q(9,ZXe,3,0,"ul",45),g()}if(n&2){let e,i=E(),r=E();_(3),J((e=r.activeTab())==="create"?3:e==="cash"?4:e==="cancel"?5:-1),_(3),je(" (",i.checkCount,") "),_(),In("transform",r.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(r.infoPanelExpanded()?9:-1)}}function JXe(n,t){if(n&1&&(m(0,"div",14)(1,"div",36)(2,"div",37)(3,"div",38),ee(4,"ng-icon",39),m(5,"code"),w(6),g(),Q(7,OXe,1,0)(8,UXe,7,3),g(),Q(9,QXe,10,5,"div",40),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.checkCount===0?7:8),_(2),J(e.checkCount>0?9:-1)}}function eYe(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",56)(2,"div",57),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function tYe(n,t){n&1&&(m(0,"span",78),w(1,"XRP"),g())}function nYe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function iYe(n,t){if(n&1&&(m(0,"div",77),Q(1,tYe,2,0,"span",78)(2,nYe,2,1,"span"),m(3,"span",79),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function rYe(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",58)(2,"label",80),w(3,"Issuer"),g(),m(4,"p",60),w(5,"The XRPL account that issues and controls this currency."),g(),m(6,"app-select-search-dropdown",81),X("valueChange",function(r){U(e);let o=E(2);return j(o.onIssuerSelected(r))}),g()(),m(7,"div",58)(8,"label",82),w(9,"Currency Balance"),g(),m(10,"p",60),w(11,"Total currency balance held by this account."),g(),m(12,"input",83),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.currencyBalanceField,r)||(o.currencyBalanceField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),oe("items",e.issuerItems())("value",e.selectedIssuerItem()),_(6),Oe("ngModel",e.currencyBalanceField)}}function oYe(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",58)(2,"label",59),w(3,"Currency Code"),g(),m(4,"p",60),w(5,"Issued asset combined with the issuer to uniquely define a token."),g(),m(6,"app-select-search-dropdown",61),X("valueChange",function(r){U(e);let o=E();return j(o.onCurrencySelected(r))}),nn(7,iYe,5,2,"ng-template",null,1,vr),g()(),m(9,"div",58)(10,"label",62),w(11,"Amount"),g(),m(12,"p",60),w(13,"Amount, in XRP or token, to send to the destination."),g(),m(14,"input",63),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()(),Q(15,rYe,13,3,"div",18),m(16,"div",18)(17,"div",58)(18,"label",64),w(19,"Destination"),g(),m(20,"p",60),w(21,"The unique address of the account receiving the payment."),g(),m(22,"app-select-search-dropdown",65),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()(),m(23,"div",58)(24,"label",66),w(25,"Destination Tag"),g(),m(26,"p",60),w(27,"Arbitrary tag that identifies the reason for the payment."),g(),m(28,"input",67),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.destinationTagField,r)||(o.destinationTagField=r),j(r)}),g()()(),m(29,"div",18)(30,"div",58)(31,"label",68),w(32,"Source Tag (opt)"),g(),m(33,"p",60),w(34,"Identify which internal user, wallet, or sub-account "),ee(35,"br"),w(36,"initiated a payment."),g(),m(37,"input",69),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.sourceTagField,r)||(o.sourceTagField=r),j(r)}),g()(),m(38,"div",58)(39,"label",70),w(40,"Invoice ID (opt)"),g(),m(41,"p",60),w(42,"Arbitrary 256-bit hash representing a specific reason or identifier for this payment."),g(),m(43,"input",71),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.invoiceIdField,r)||(o.invoiceIdField=r),j(r)}),g()()(),m(44,"div",18)(45,"div",58)(46,"label",72),w(47,"Check Expiration"),g(),m(48,"p",60),w(49,"Check expiration when the check will expire."),g(),m(50,"div",73)(51,"input",74),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.expirationTimeField,r)||(o.expirationTimeField=r),j(r)}),X("focus",function(){U(e);let r=E();return j(r.populateDefaultDateTime())}),g(),m(52,"div",75)(53,"button",76),X("click",function(){U(e);let r=E();return j(r.setCheckExpirationToNow())}),w(54,"Now"),g(),m(55,"button",76),X("click",function(){U(e);let r=E();return j(r.addCheckToExpiration(10))}),w(56,"+10s"),g(),m(57,"button",76),X("click",function(){U(e);let r=E();return j(r.addCheckToExpiration(30))}),w(58,"+30s"),g(),m(59,"button",76),X("click",function(){U(e);let r=E();return j(r.addCheckToExpiration(60))}),w(60,"+1min"),g(),m(61,"button",76),X("click",function(){U(e);let r=E();return j(r.addCheckToExpiration(300))}),w(62,"+5min"),g()()()(),ee(63,"div",58),g()}if(n&2){let e=E();_(6),oe("items",e.currencyItems())("value",e.selectedCurrencyItem())("showShortAddress",!1),_(8),Oe("ngModel",e.amountField),_(),J(e.currencyFieldDropDownValue()!=="XRP"?15:-1),_(7),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(6),Oe("ngModel",e.destinationTagField),_(9),Oe("ngModel",e.sourceTagField),_(6),Oe("ngModel",e.invoiceIdField),_(8),Oe("ngModel",e.expirationTimeField)}}function sYe(n,t){n&1&&(m(0,"span",78),w(1,"XRP"),g())}function aYe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function lYe(n,t){if(n&1&&(m(0,"div",77),Q(1,sYe,2,0,"span",78)(2,aYe,2,1,"span"),m(3,"span",79),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function cYe(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",58)(2,"label",80),w(3,"Issuer"),g(),m(4,"p",60),w(5,"The XRPL account that issues and controls this currency."),g(),m(6,"app-select-search-dropdown",81),X("valueChange",function(r){U(e);let o=E(2);return j(o.onIssuerSelected(r))}),g()(),m(7,"div",58)(8,"label",82),w(9,"Currency Balance"),g(),m(10,"p",60),w(11,"Total currency balance held by this account."),g(),m(12,"input",83),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.currencyBalanceField,r)||(o.currencyBalanceField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),oe("items",e.issuerItems())("value",e.selectedIssuerItem()),_(6),Oe("ngModel",e.currencyBalanceField)}}function dYe(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",58)(2,"label",84),w(3,"Currency Code"),g(),m(4,"p",60),w(5,"Issued asset combined with the issuer to uniquely define a token."),g(),m(6,"app-select-search-dropdown",61),X("valueChange",function(r){U(e);let o=E();return j(o.onCurrencySelected(r))}),nn(7,lYe,5,2,"ng-template",null,1,vr),g()(),m(9,"div",58)(10,"label",62),w(11,"Amount"),g(),m(12,"p",60),w(13,"Amount, in XRP or token, to send to the destination."),g(),m(14,"input",63),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()(),Q(15,cYe,13,3,"div",18)}if(n&2){let e=E();_(6),oe("items",e.currencyItems())("value",e.selectedCurrencyItem())("showShortAddress",!1),_(8),Oe("ngModel",e.amountField),_(),J(e.currencyFieldDropDownValue()!=="XRP"?15:-1)}}function uYe(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",58)(2,"label",85),w(3,"Select Check:"),g(),m(4,"p",60),w(5,"Check ID generated when the check was created."),g(),m(6,"app-select-search-dropdown",86),X("valueChange",function(r){U(e);let o=E();return j(o.onCheckSelected(r))}),g()()()}if(n&2){let e=E();_(6),oe("items",e.checkItems())("value",e.selectedCheckItem())}}function hYe(n,t){if(n&1){let e=ge();m(0,"button",87),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.createCheck())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create Check")}}function fYe(n,t){if(n&1){let e=ge();m(0,"button",88),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.cashCheck())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Cash Check")}}function pYe(n,t){if(n&1){let e=ge();m(0,"button",89),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.cancelCheck())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Cancel Check")}}var V8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("create");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");sourceTagField=P("");invoiceIdField=P("");currencyFieldDropDownValue=P("XRP");checkExpirationTime=P("seconds");issuerFields=P("");expirationTimeField=P("");ticketSequence=P("");checkIdField=P("");outstandingChecks=P("");mptIssuanceIdField=P("");isMptEnabled=P(!1);currencyBalanceField=P("0");gatewayBalance=P("0");knownTrustLinesIssuers=P({XRP:[]});issuerToRemove=P("");currencies=P([]);userAddedCurrencyFieldDropDownValue=P([]);userAddedissuerFields=P("");allKnownIssuers=P([]);storedIssuers=P([]);selectedIssuer=P("");newCurrency=P("");newIssuer=P("");tokenToRemove=P("");selectedWalletIndex=P(0);issuers=P([]);lastCurrency=P("");lastIssuer=P("");cancellableChecks=P([]);cashableChecks=P([]);existingChecks=P([]);outstandingChecksCollapsed=P(!0);currencyChangeTrigger=P(0);selectedCheckItem=_e(()=>{let t=this.checkIdField();return t&&this.checkItems().find(e=>e.id===t)||null});checkItems=_e(()=>(this.activeTab()==="cash"?this.cashableChecks():this.cancellableChecks()).map(e=>{let i=this.activeTab()==="cash"?e.sender:e.destination,r=i?.slice(0,8)+"..."+i?.slice(-6);return{id:e.id,display:`${this.formatIOUXrpAmountOutstanding(e.sendMax)} ${this.activeTab()==="cash"?"\u2190":"\u2192"} ${r}`,secondary:e.id,isCurrentAccount:!1}}));onCheckSelected(t){this.checkIdField.set(t?.id||"")}selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});currencyItems=_e(()=>{let t=this.currencyFieldDropDownValue();return this.availableCurrencies.map(e=>({id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":(()=>{let i=this.trustlineCurrency.getIssuersForCurrency(e).length;return i===0?"No issuers":`${i} issuer${i!==1?"s":""}`})(),isCurrentAccount:!1,isCurrentCode:e===t,isCurrentToken:!1}))});selectedCurrencyItem=_e(()=>{let t=this.currencyFieldDropDownValue();return t&&this.currencyItems().find(e=>e.id===t)||null});onCurrencySelected(t){let e=t?.id||"XRP";this.currencyFieldDropDownValue.set(e),this.onCurrencyChange(e)}destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});checkIdDisplay=_e(()=>{let t=this.checkIdField();if(!t)return this.checkIdSearchQuery()||"";let e=this.getCheckById(t);if(!e)return t.slice(0,20)+"...";let i=this.formatIOUXrpAmountOutstanding(e.sendMax),r=this.activeTab()==="cash"?e.sender||"Unknown":e.destination||"Unknown",o=r.slice(0,8)+"..."+r.slice(-6),s=this.activeTab()==="cash"?"\u2190":"\u2192";return`${i} ${s} ${o}`});checkIdInputDisplay=_e(()=>this.checkIdSearchQuery()?this.checkIdSearchQuery():this.checkIdDisplay());filteredCheckIds=_e(()=>{let t=this.checkIdSearchQuery().trim().toLowerCase(),e=this.activeTab()==="cash"?this.cashableChecks():this.cancellableChecks();return t===""?e:e.filter(i=>{let r=i.id.toLowerCase().includes(t),o=this.formatIOUXrpAmountOutstanding(i.sendMax).toLowerCase().includes(t),s=(i.sender||i.destination||"").toLowerCase().includes(t);return r||o||s})});issuerItems=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return this.issuers().map((e,i)=>({id:e.address,display:e.name||`Issuer ${i+1}`,secondary:e.address.slice(0,7)+"..."+e.address.slice(-7),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:e.address===t}))});selectedIssuerAddress=_e(()=>this.trustlineCurrency.getSelectedIssuer());selectedIssuerItem=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return t&&this.issuerItems().find(e=>e.id===t)||null});onIssuerSelected(t){let e=t?.id||"";this.trustlineCurrency.selectIssuer(e),this.onIssuerChange(e)}infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=0,r=[];switch(this.activeTab()){case"create":i=this.existingChecks().length,r=this.existingChecks().map(o=>({index:o.id,amount:this.formatIOUXrpAmountOutstanding(o.sendMax),destination:o.destination,destinationTag:o.destinationTag,expiration:o.expiration,invoiceId:o.invoiceId}));break;case"cash":i=this.cashableChecks().length,r=this.cashableChecks().map(o=>({index:o.id,amount:o.amount,sender:o.sender}));break;case"cancel":i=this.cancellableChecks().length,r=this.cancellableChecks().map(o=>({index:o.id,amount:o.amount,destination:o.destination}));break}return{walletName:e,checkCount:i,checksToShow:r}});timeUnitItems=_e(()=>[{id:"seconds",display:"Seconds"},{id:"minutes",display:"Minutes"},{id:"hours",display:"Hours"},{id:"days",display:"Days"}]);selectedTimeUnitItem=_e(()=>{let t=this.checkExpirationTime();return this.timeUnitItems().find(e=>e.id===t)||null});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadKnownIssuers(),this.refreshStoredIssuers(),this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.currencyFieldDropDownValue.set("XRP"),this.populateDefaultDateTime(),this.trustlineCurrency.currencies$.subscribe(t=>{this.currencies.set(t),t.length>0&&!this.currencyFieldDropDownValue()&&(this.currencyFieldDropDownValue.set(t[0]),this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address))}),this.trustlineCurrency.issuers$.subscribe(t=>{this.issuers.set(t)}),this.trustlineCurrency.selectedIssuer$.subscribe(t=>{this.issuerFields.set(t)}),this.trustlineCurrency.balance$.subscribe(t=>{this.currencyBalanceField.set(t)})}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.clearFields(!0),this.selectWallet(i))}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.clearFields(!0),yield this.getChecks(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleOutstandingChecks(){this.outstandingChecksCollapsed.set(!this.outstandingChecksCollapsed())}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}getCheckById(t){return[...this.cashableChecks(),...this.cancellableChecks()].find(e=>e.id===t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),Object.keys(this.knownTrustLinesIssuers).length>0&&this.issuerFields()===""&&this.currencyFieldDropDownValue.set(Object.keys(this.knownTrustLinesIssuers)[0]),this.clearFields(!0),this.hasWallets()&&(yield this.getChecks(!0),this.populateDefaultDateTime())})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getChecks(t=!1){return z(this,null,function*(){yield this.withPerf("getChecks",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.getExistingChecks(o,i.classicAddress),this.getCashableChecks(o,i.classicAddress),this.getCancelableChecks(o,i.classicAddress),this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.issuerFields()!==""&&this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getChecks:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createCheck(){return z(this,null,function*(){yield this.withPerf("createCheck",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a,l]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplCache.getAccountObjectsWithType(this.currentWallet().address,!0,"check"),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),c=this.selectedDestinationAddress()||this.typedDestination(),[d]=yield Promise.all([this.xrplService.getAccountInfo(t,c,"validated","")]);if(d.result.account_flags.disallowIncomingCheck)return this.txUiService.setError(`Error:
Destination ${c} has disallowIncomingCheck enabled. This wallet can not recieve checks.`);let u={mpt_issuance_id:this.mptIssuanceIdField(),value:this.amountField()},h;this.currencyFieldDropDownValue()===Re.XRP_CURRENCY?h=Zu.xrpToDrops(this.amountField()):h={currency:this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue()),value:this.amountField(),issuer:this.issuerFields()};let f={TransactionType:"CheckCreate",Account:e.classicAddress,SendMax:h,Destination:c,Fee:a,LastLedgerSequence:l+Re.LAST_LEDGER_ADD_TIME};if(this.currencyFieldDropDownValue()!=="MPT"&&this.utilsService.isInsufficientIouTrustlineBalance(o,f,this.issuerFields()))return this.txUiService.setError("Not enough IOU balance for this transaction");yield this.setTxOptionalFields(t,f,e,i,"create");let p=yield this.txExecutor.checkCreate(f,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!p.success)return this.txUiService.setError(`${p.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Create check successfully!":"Check created successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in createCheck:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}cashCheck(){return z(this,null,function*(){yield this.withPerf("cashCheck",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a,l]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplCache.getAccountObjectsWithType(this.currentWallet().address,!0,"check"),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),c=yield this.xrplService.getCheckByCheckId(t,this.checkIdField(),"validated");if(c){if(console.log("checkObject: ",c),c.Expiration&&(yield this.xrplService.getCurrentRippleTime(t))>=c.Expiration)return this.txUiService.setError("Transaction or object has expired.")}else return this.txUiService.setError(`No check found with Check ID ${this.checkIdField}`);if(this.currencyFieldDropDownValue()!==Re.XRP_CURRENCY){console.debug(`checkObjects for ${e.classicAddress}:`,s.result);let f=this.getIssuerForCheck(s.result.account_objects,this.checkIdField());console.log("Issuer:",f),f&&this.selectedIssuer.set(f)}let d=this.currencyFieldDropDownValue()===Re.XRP_CURRENCY?Zu.xrpToDrops(this.amountField()):{value:this.amountField(),currency:this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue()),issuer:this.selectedIssuer()},u={TransactionType:"CheckCash",Account:e.classicAddress,Amount:d,CheckID:this.checkIdField(),Fee:a,LastLedgerSequence:l+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,u,e,i,"cash");let h=yield this.txExecutor.checkCash(u,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!h.success)return this.txUiService.setError(`${h.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Create cash successfully!":"Check cashed successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in createCheck:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}cancelCheck(){return z(this,null,function*(){yield this.withPerf("cancelCheck",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getLastLedgerIndex(t),this.xrplCache.getFee(this.xrplService,!1)]),a={TransactionType:"CheckCancel",Account:e.classicAddress,CheckID:this.checkIdField(),Fee:s,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,a,e,i,"cancelCheck");let l=yield this.txExecutor.checkCancel(a,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!l.success)return this.txUiService.setError(`${l.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Cancel check successfully!":"Check cancelled successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in cancelCheck:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getExistingChecks(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Check"&&r.Account===e).map(r=>{let o=r.SendMax,s="0",a="";return typeof o=="string"?s=String(Zu.dropsToXrp(o)):o?.value&&(s=o.value,a=this.utilsService.normalizeCurrencyCode(o.currency)),{id:r.index,index:r.index,amount:`${s} ${a}`,destination:r.Destination,sendMax:o,expiration:r.Expiration,destinationTag:r.DestinationTag,sourceTag:r.SourceTag,invoiceId:r.InvoiceID}}).sort((r,o)=>r.destination.localeCompare(o.destination));this.existingChecks.set(i),this.utilsService.logObjects("existingChecks",i)}getCashableChecks(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Check"&&r.Destination===e).map(r=>{let o=r.SendMax,s="0";return typeof o=="string"?s=String(Zu.dropsToXrp(o)):o?.value&&(s=`${o.value} ${this.utilsService.normalizeCurrencyCode(o.currency)}`),{id:r.index,index:r.index,amount:s,sender:r.Account,sendMax:o}}).sort((r,o)=>r.sender.localeCompare(o.sender));this.cashableChecks.set(i),this.utilsService.logObjects("cashableChecks",i)}getCancelableChecks(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Check"&&r.Account===e).map(r=>{let o=r.SendMax,s="0";return typeof o=="string"?s=String(Zu.dropsToXrp(o)):o?.value&&(s=`${o.value} ${this.utilsService.normalizeCurrencyCode(o.currency)}`),{id:r.index,index:r.index,amount:s,destination:r.Destination,sendMax:o}}).sort((r,o)=>r.destination.localeCompare(o.destination));this.cancellableChecks.set(i),this.utilsService.logObjects("cancellableChecks",i)}get availableCurrencies(){return["XRP",...Object.keys(this.knownTrustLinesIssuers()).filter(t=>t&&t!=="XRP"&&t!=="MPT").sort((t,e)=>t.localeCompare(e))]}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(o==="create"){if(this.expirationTimeField&&this.expirationTimeField()!=""){let s=this.utilsService.toRippleTime(this.expirationTimeField());this.utilsService.setExpiration(e,Number(s))}this.txUiService.invoiceIdField()&&this.utilsService.setInvoiceIdField(e,this.txUiService.invoiceIdField()),this.txUiService.sourceTagField()&&this.utilsService.setSourceTagField(e,this.txUiService.sourceTagField()),this.destinationTagField()&&Number.parseInt(this.destinationTagField())>0&&this.utilsService.setDestinationTag(e,this.destinationTagField())}if(this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getExistingChecks(s,e.classicAddress),this.getCashableChecks(s,e.classicAddress),this.getCancelableChecks(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&Zu.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}addToDateTimeField(t,e,i){let r=t();if(!r){let a=new Date;r=this.formatDateTimeLocal(a)}let o=new Date(r);o.setSeconds(o.getSeconds()+i);let s=this.formatDateTimeLocal(o);e.set(s)}formatDateTimeLocal(t){let e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${e}-${i}-${r}T${o}:${s}:${a}`}addCheckToExpiration(t){this.addToDateTimeField(this.expirationTimeField,this.expirationTimeField,t)}setCheckExpirationToNow(){let t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");this.expirationTimeField.set(`${e}-${i}-${r}T${o}:${s}:${a}`)}populateDefaultDateTime(){this.setCheckExpirationToNow()}copyCheckId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Check ID copied!")})}formatIOUXrpAmountUI(t){if(!t)return"Unknown";if(typeof t=="string"&&t.split(" ").length===1)return`${t} XRP`;if(t.split(" ").length===2){let e=t.split(" ");return`${e[0]} ${e[1]}`}if(typeof t=="object"){let{currency:e,issuer:i,value:r}=t;return`${r} ${e} (issuer: ${i})`}return"Unknown"}formatIOUXrpAmountOutstanding(t){if(!t)return"Unknown";if(typeof t=="string"&&/^[0-9]+$/.test(t))return`${Zu.dropsToXrp(t)} XRP`;if(typeof t=="object"){let{currency:e,value:i}=t;return`${i} ${this.utilsService.decodeIfNeeded(e)}`}return`${t} XRP`}formatInvoiceId(t){return this.utilsService.formatInvoiceId(t||"")}formatXrplTimestamp(t){return this.utilsService.convertXRPLTime(t)}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}loadKnownIssuers(){let t=this.storageService.getKnownIssuers("knownIssuers");t&&(this.knownTrustLinesIssuers.set(t),this.updateCurrencies())}clearFields(t=!1){this.amountField.set(""),this.selectedDestinationAddress.set(""),this.destinationSearchQuery.set(""),this.destinationTagField.set(""),this.sourceTagField.set(""),this.invoiceIdField.set(""),this.expirationTimeField.set(""),this.checkExpirationTime.set("seconds"),this.currencyFieldDropDownValue.set("XRP"),this.selectedIssuer.set(""),this.checkIdField.set(""),this.checkIdSearchQuery.set(""),this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.txUiService.clearAllOptionsAndMessages()}resetCheckIdDropDown(){this.checkIdField.set(""),this.checkIdSearchQuery.set("")}onCurrencyChange(t){this.trustlineCurrency.selectCurrency(t,this.currentWallet().address),this.currencyChangeTrigger.update(e=>e+1)}onIssuerChange(t){this.trustlineCurrency.selectIssuer(t)}refreshStoredIssuers(){let t=[],e=this.knownTrustLinesIssuers();for(let i in e)if(i!=="XRP")for(let r of e[i])t.push({name:i,address:r});t.sort((i,r)=>i.name.localeCompare(r.name)),this.storedIssuers.set(t)}updateCurrencies(){let i=Object.keys(this.knownTrustLinesIssuers).filter(r=>r!=="XRP").sort((r,o)=>r.localeCompare(o));this.currencies.set(i),i.length>0?(!this.currencyFieldDropDownValue()||!i.includes(this.currencyFieldDropDownValue()))&&(this.currencyFieldDropDownValue.set(i[0]),Promise.resolve().then(()=>{this.currencyFieldDropDownValue()&&this.onCurrencyChange(this.currencyFieldDropDownValue())})):(this.currencyFieldDropDownValue.set(""),this.issuerFields.set(""),this.issuers.set([]))}getIssuerForCheck(t,e){return t.find(r=>r.index===e)?.SendMax?.issuer||null}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-checks"]],features:[Lt],decls:40,vars:24,consts:[["theForm","ngForm"],["itemTemplate",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],[1,"menu-btn",3,"click"],["name","heroCurrencyDollar","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"green-button-submenu"],["name","heroCurrencyDollar","size","27",1,"text-red-600"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View Check on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[2,"color","#555","font-size","0.88em","display","flex","align-items","center","gap","8px"],[2,"font-size","0.95em"],[2,"color","#555","font-size","0.88em"],["title","Copy Check ID",1,"copy-btn",2,"background","none","border","none","cursor","pointer","padding","4px","opacity","0.7","margin-left","auto",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-group"],["for","currencyCodeCreate"],[1,"form-hint"],["placeholder","Search currency code...","emptyMessage","No currencies available",3,"valueChange","items","value","showShortAddress"],["for","amount"],["type","text","name","amountField","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["for","destinationTag"],["type","text","name","destinationTagField",3,"ngModelChange","ngModel"],["for","sourceTag"],["type","text","name","sourceTagField",3,"ngModelChange","ngModel"],["for","invoiceId"],["type","text","name","invoiceIdField",3,"ngModelChange","ngModel"],["for","credentialExpiration"],[1,"expiration-input-group"],["type","datetime-local","name","expirationDate","step","1",1,"expiration-input",3,"ngModelChange","focus","ngModel"],[1,"expiration-buttons"],["type","button",1,"btn-small","btn-primary-blue",3,"click"],[1,"flex","items-center","gap-2"],[1,"text-yellow-500","font-bold"],[1,"text-xs","text-gray-500"],["for","issuer"],["placeholder","Search or select issuer...","emptyMessage","No issuers found",3,"valueChange","items","value"],["for","currencyBalance"],["type","text","name","currencyBalanceField","readonly","",3,"ngModelChange","ngModel"],["for","currencyCodeCash"],["for","selectCheck"],["placeholder","Search by amount, address, or Check ID...","emptyMessage","No checks available",3,"valueChange","items","value"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",2),ee(1,"app-navbar"),m(2,"main",3)(3,"div",4)(4,"div",5)(5,"app-wallet-panel",6),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",7)(7,"div",8)(8,"button",9),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",10),w(10," Create Check "),g(),m(11,"button",11),X("click",function(){return U(r),j(i.setTab("cash"))}),ee(12,"ng-icon",12),w(13," Cash Check "),g(),m(14,"button",11),X("click",function(){return U(r),j(i.setTab("cancel"))}),ee(15,"ng-icon",13),w(16," Cancel Check "),g()(),Q(17,PXe,9,0,"div"),Q(18,LXe,9,0,"div"),Q(19,RXe,9,0,"div"),Q(20,JXe,10,3,"div",14),Q(21,eYe,3,1,"div",15),m(22,"form",16,0)(24,"div",17)(25,"div"),Q(26,oYe,64,11)(27,dYe,16,5),Q(28,uYe,7,2,"div",18),ee(29,"app-transaction-options",19),m(30,"div",20),Q(31,hYe,3,4,"button",21)(32,fYe,3,4,"button",22)(33,pYe,3,4,"button",23),m(34,"button",24),ct(35,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(36,"Clear Fields"),g()()(),m(37,"div",25)(38,"input",26),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(39,"app-transaction-preview"),g()()()()()()()}if(e&2){let r,o;_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="cash"),_(3),Ue("active",i.activeTab()==="cancel"),_(3),J(i.activeTab()==="create"?17:-1),_(),J(i.activeTab()==="cash"?18:-1),_(),J(i.activeTab()==="cancel"?19:-1),_(),J((r=i.infoData())?20:-1,r),_(),J(i.txUiService.warningMessage?21:-1),_(4),oe("@tabTransition",i.activeTab()),_(),J((o=i.activeTab())==="create"?26:o==="cash"?27:-1),_(2),J(i.activeTab()==="cash"||i.activeTab()==="cancel"?28:-1),_(),oe("showWhenTab",Ei(23,IXe))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="create"?31:i.activeTab()==="cash"?32:i.activeTab()==="cancel"?33:-1),_(3),oe("disabled",i.txUiService.spinner()||!mt(35,21,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki,$r,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var vfe=_i(Ki());var mYe=["dropdownTemplate"],gYe=["dropdownOrigin"],yYe=["ticketDropdownInput"],vYe=["ticketDropdownTemplate"],_Ye=()=>["create","delete"];function bYe(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",26),ee(3,"ng-icon",27),g(),m(4,"div")(5,"h2",28),w(6,"Create Ticket"),g(),m(7,"p",29),w(8,"Create a ticket for the selected account"),g()()()())}function wYe(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",30),ee(3,"ng-icon",31),g(),m(4,"div")(5,"h2",28),w(6,"Delete Ticket"),g(),m(7,"p",29),w(8,"Delete a ticket for the selected account"),g()()()())}function SYe(n,t){if(n&1&&(m(0,"div",13)(1,"div",32),ee(2,"ng-icon",33)(3,"div",34),g()()),n&2){let e=E();_(3),oe("innerHTML",e.infoData(),pn)}}function CYe(n,t){if(n&1&&(m(0,"div",14),ee(1,"ng-icon",35)(2,"div",36),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function xYe(n,t){if(n&1){let e=ge();m(0,"div",17)(1,"div",37)(2,"label"),w(3,"Number of Tickets to create"),g(),m(4,"p",38),w(5,"Number of Tickets to create for the selected account."),g(),m(6,"input",39),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.ticketCountField,r)||(o.ticketCountField=r),j(r)}),g()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.ticketCountField)}}function kYe(n,t){if(n&1){let e=ge();m(0,"div",47)(1,"span",50),w(2),g(),m(3,"button",51),X("click",function(){let r=U(e).$implicit,o=E(3);return j(o.toggleTicketSelection(r))}),ee(4,"ng-icon",52),g()()}if(n&2){let e=t.$implicit;_(2),Ee(e)}}function MYe(n,t){if(n&1){let e=ge();m(0,"div",45)(1,"div",46),yn(2,kYe,5,1,"div",47,pc),g(),m(4,"div",48)(5,"button",49),X("click",function(){U(e);let r=E(2);return j(r.clearAllSelections())}),w(6,"Clear all"),g()()()}if(n&2){let e=E(2);_(2),vn(e.selectedTicketSequences())}}function TYe(n,t){if(n&1){let e=ge();m(0,"label",61),X("mouseenter",function(){let r=U(e).$index,o=E(3);return j(o.highlightedTicketIndex.set(r))}),m(1,"input",62),X("change",function(){let r=U(e).$implicit,o=E(3);return j(o.toggleTicketSelection(r))}),g(),m(2,"span",63),w(3),g()()}if(n&2){let e=t.$implicit,i=t.$index,r=E(3);Ue("highlighted",r.highlightedTicketIndex()===i),_(),oe("checked",r.selectedTicketSequences().includes(r.convertToString(e))),_(2),je(" ",e," ")}}function EYe(n,t){n&1&&(m(0,"div",60),w(1,"No tickets match your search"),g())}function AYe(n,t){if(n&1){let e=ge();m(0,"div",53),X("click",function(r){return U(e),j(r.stopPropagation())}),m(1,"div",54)(2,"div",55)(3,"label",56)(4,"input",57),X("change",function(){U(e);let r=E(2);return j(r.toggleSelectAll())}),g(),m(5,"span"),w(6,"Select All"),g()(),m(7,"button",58),X("click",function(){U(e);let r=E(2);return j(r.clearAllSelections())}),w(8,"Clear"),g()(),yn(9,TYe,4,4,"label",59,pc,!1,EYe,2,0,"div",60),g()()}if(n&2){let e=E(2);_(4),oe("checked",e.allTicketsSelected()),_(3),In("opacity",e.selectedTicketSequences().length===0?.5:1),oe("disabled",e.selectedTicketSequences().length===0),_(2),vn(e.filteredTickets())}}function DYe(n,t){if(n&1){let e=ge();m(0,"div",40)(1,"div",37)(2,"label"),w(3,"Select Tickets to Delete"),g(),m(4,"p",38),w(5,"Select available tickets to delete for the selected account."),g(),m(6,"div",41),X("clickOutside",function(){U(e);let r=E();return j(r.closeTicketDropdown())}),m(7,"input",42,1),X("input",function(r){U(e);let o=E();return j(o.onTicketSearchInput(r))})("focus",function(){U(e);let r=E();return j(r.openTicketDropdown())})("keydown",function(r){U(e);let o=E();return j(o.onTicketKeyDown(r))}),g(),m(9,"button",43),X("click",function(){U(e);let r=E();return j(r.toggleTicketDropdown())}),ee(10,"lucide-icon",44),g()()()(),Q(11,MYe,7,0,"div",45),nn(12,AYe,12,5,"ng-template",null,2,vr)}if(n&2){let e=E();_(7),oe("value",e.ticketSearchQuery())("placeholder",e.selectedTicketSequences().length>0?e.selectedTicketSequences().length+" ticket(s) selected":"Search tickets by sequence...")("value",e.ticketSearchQuery()),_(4),J(e.selectedTicketSequences().length>0?11:-1)}}function IYe(n,t){if(n&1){let e=ge();m(0,"button",64),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.createTicket())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create Ticket")}}function FYe(n,t){if(n&1){let e=ge();m(0,"button",65),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.deleteTicket())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Delete Ticket")}}var U8=class n extends li{dropdownTemplate;dropdownOrigin;ticketDropdownInput;ticketDropdownTemplate;ticketOverlayRef=null;overlay=N(Xu);viewContainerRef=N(Dr);destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");ticketSearchQuery=P("");selectedTicketSequences=P([]);isTicketDropdownOpen=P(!1);highlightedTicketIndex=P(-1);activeTab=P("create");wallets=P([]);currentWallet=P({});selectedSingleTicket=P("");selectedTickets=P([]);multiSelectMode=P(!1);selectedTicket=P("");ticketArray=P([]);ticketCountField=P("");deleteTicketSequence=P("");walletTicketCount=P(0);destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||"Selected wallet",i=this.walletTicketCount(),r=this.activeTab()==="create"?"available Tickets for use.":"Tickets that can be deleted.";return`<code>${e}</code> wallet has <strong>${i}</strong> ${r}`});hasWallets=_e(()=>this.wallets().length>0);filteredTickets=_e(()=>{let t=this.ticketSearchQuery().trim(),e=this.txUiService.ticketArray();return t?e.filter(i=>i.includes(t)):e});convertToString(t){return t.toString()}allTicketsSelected=_e(()=>{let t=this.selectedTicketSequences(),e=this.txUiService.ticketArray().length;return t.length===e&&e>0});hasSelectedTickets=_e(()=>this.selectedTicketSequences().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),this.clearFields(),yield this.getTickets(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByWalletAddress(t,e){return e.address}trackByAddress(t,e){return e.address}onWalletSelected(t){this.selectWallet(t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.txUiService.clearAllOptionsAndMessages(),this.hasWallets()&&(yield this.getTickets())})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getTickets(t=!1){return z(this,null,function*(){yield this.withPerf("getTickets",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=this.xrplService.filterAccountObjectsByTypes(o,["Ticket"]);this.utilsService.logObjects("ticketObjects",s);let a=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(a.length>0)return this.txUiService.setError(a.join(`
\u2022 `));this.walletTicketCount.set(s.result.account_objects.length),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getTickets:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createTicket(){return z(this,null,function*(){yield this.withPerf("createTicket",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),a={TransactionType:"TicketCreate",Account:e.classicAddress,TicketCount:parseInt(this.ticketCountField()),Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,a,e,"");let l=yield this.txExecutor.ticketCreate(a,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!l.success)return this.txUiService.setError(`${l.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Ticket creation successfully!":"Created ticket successfully!",yield this.refreshAfterTx(t,e,null,!0)}catch(t){console.error("Error in createTicket:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}deleteTicket(){return z(this,null,function*(){yield this.withPerf("deleteTicket",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),[a]=yield Promise.all([yield this.xrplService.getAccountObjects(t,e.classicAddress,"validated","ticket")]),l=this.selectedTicketSequences();if(!l.length||this.walletTicketCount()===0){this.txUiService.setWarning(`Ticket <code>${this.deleteTicketSequence}</code> does not exist on this account.`);return}let c=l.length,d=this.txUiService.isSimulateEnabled();this.txUiService.showSpinnerWithDelay(d?`Simulating deletion of ${c} ticket(s)...`:`Deleting ${c} ticket(s)...`,200);let u=0,h=[],f=[];for(let p=0;p<l.length;p++){let y=l[p],v=d?`Simulating ticket ${p+1}/${c}...`:`Deleting ticket ${p+1}/${c}...`;this.txUiService.updateSpinnerMessage(v);let b=a.result.account_objects.some(L=>L.TicketSequence===Number(y)),S=yield this.xrplService.getLastLedgerIndex(t);if(!b){console.warn(`Ticket ${y} does not exist for account ${e.classicAddress}`),h.push(y);continue}let x={TransactionType:"AccountSet",Account:e.classicAddress,TicketSequence:Number(y),Sequence:0,Fee:o,LastLedgerSequence:S+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,x,e,y);let k=yield this.txExecutor.ticketDelete(x,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds(),suppressIndividualFeedback:!0,customSpinnerMessage:v});if(k.success)u++,f.push(k.hash);else{this.txUiService.setError(`${k.error}`);return}}if(u>0&&(f.forEach(p=>this.txUiService.addTxHashSignal(p)),this.utilsService.setSuccess(this.utilsService.result),this.txUiService.successMessage=d?`Simulated deletion of ${u} ticket(s) successfully!`:`${u} ticket(s) deleted successfully!`),h.length){let p=h.map(v=>`<code>${v}</code>`).join(", "),y=h.length>1?"s":"";this.txUiService.setWarning(`Ticket${y} ${p} do${y?"":"es"} not exist on this account.`)}else this.txUiService.clearWarning();yield this.refreshAfterTx(t,e,null,!0),this.clearAllSelections()}catch(t){console.error("Error in deleteTicket:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0),a=this.xrplService.filterAccountObjectsByTypes(s,["Ticket"]);this.walletTicketCount.set(a.result.account_objects.length),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&i&&this.addNewDestinationFromUser(i),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}updateDeleteTicketSequence(){this.multiSelectMode()?this.deleteTicketSequence.set(this.selectedTickets().join(",")):this.deleteTicketSequence=this.selectedSingleTicket||""}clearDeleteTicketSequence(){this.multiSelectMode||(this.deleteTicketSequence.set(""),this.selectedSingleTicket.set(""))}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&vfe.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(){this.clearAllSelections(),this.txUiService.clearAllOptionsAndMessages()}openTicketDropdown(){if(this.ticketOverlayRef?.hasAttached())return;let t=this.overlay.position().flexibleConnectedTo(this.ticketDropdownInput).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:4},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-4}]);this.ticketOverlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",positionStrategy:t,scrollStrategy:this.overlay.scrollStrategies.reposition(),width:this.ticketDropdownInput.nativeElement.getBoundingClientRect().width}),this.ticketOverlayRef&&(this.ticketOverlayRef.attach(new Lc(this.ticketDropdownTemplate,this.viewContainerRef)),this.ticketOverlayRef.backdropClick().subscribe(()=>this.closeTicketDropdown())),this.highlightedTicketIndex.set(-1)}closeTicketDropdown(){this.ticketOverlayRef?.dispose(),this.ticketOverlayRef=null,this.isTicketDropdownOpen.set(!1)}toggleTicketDropdown(){this.ticketOverlayRef?.hasAttached()?this.closeTicketDropdown():this.openTicketDropdown()}toggleTicketSelection(t){this.selectedTicketSequences.update(e=>e.includes(t)?e.filter(i=>i!==t):[...e,t])}toggleSelectAll(){this.allTicketsSelected()?this.selectedTicketSequences.set([]):this.selectedTicketSequences.set([...this.txUiService.ticketArray()])}clearAllSelections(){this.selectedTicketSequences.set([])}onTicketSearchInput(t){let e=t.target.value;this.ticketSearchQuery.set(e)}onTicketKeyDown(t){let e=this.filteredTickets();if(e.length===0)return;let i=this.highlightedTicketIndex();if(t.key==="ArrowDown")t.preventDefault(),i=i<e.length-1?i+1:i;else if(t.key==="ArrowUp")t.preventDefault(),i=i>=0?i-1:e.length-1;else if(t.key==="Enter"&&i>=0){t.preventDefault(),this.toggleTicketSelection(e[i]);return}else if(t.key==="Escape"){this.closeTicketDropdown();return}else return;this.highlightedTicketIndex.set(i),setTimeout(()=>{document.querySelector(".ticket-item.highlighted")?.scrollIntoView({block:"nearest",behavior:"smooth"})})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-tickets"]],viewQuery:function(e,i){if(e&1&&(Et(mYe,5),Et(gYe,5),Et(yYe,5),Et(vYe,5)),e&2){let r;_t(r=bt())&&(i.dropdownTemplate=r.first),_t(r=bt())&&(i.dropdownOrigin=r.first),_t(r=bt())&&(i.ticketDropdownInput=r.first),_t(r=bt())&&(i.ticketDropdownTemplate=r.first)}},features:[Lt],decls:34,vars:22,consts:[["theForm","ngForm"],["ticketDropdownInput",""],["ticketDropdownTemplate",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn",3,"click"],["name","heroTicket","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-panel"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroTicket","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel-content"],["name","heroInformationCircle","size","20",1,"text-blue-600","info-icon"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-group"],[1,"form-hint"],["type","text","name","ticketCountField","placeholder","Total max tickets, per account, is 250",3,"ngModelChange","ngModel"],[1,"form-row",2,"margin-bottom","1.2em"],[1,"combobox-container",3,"clickOutside"],["type","text","autocomplete","off",1,"combobox-input",3,"input","focus","keydown","value","placeholder"],["type","button",1,"combobox-toggle",3,"click"],["name","chevron-down","size","18"],[1,"ticket-container"],[1,"ticket-list"],[1,"ticket-item"],[1,"ticket-footer"],["type","button",1,"clear-btn",3,"click"],[1,"ticket-number"],["type","button","aria-label","Remove ticket",1,"ticket-remove",3,"click"],["name","heroXCircle","size","16","color","red"],[1,"combobox-wrapper",3,"click"],[1,"combobox-dropdown-overlay","ticket-dropdown",2,"max-height","340px","overflow-y","auto","padding","8px 0"],[1,"dropdown-header",2,"display","flex","justify-content","space-between","align-items","center","padding","8px 16px","border-bottom","1px solid #e5e7eb","background","#f9fafb"],[1,"checkbox-label",2,"display","flex","align-items","center","gap","8px","font-weight","600","color","#374151","cursor","pointer"],["type","checkbox",2,"width","16px","height","16px",3,"change","checked"],[1,"clear-btn",2,"color","#dc2626","font-size","0.875rem","font-weight","500","background","none","border","none","cursor","pointer","opacity","0.8",3,"click","disabled"],[1,"combobox-item","ticket-item",2,"display","flex","align-items","center","gap","10px","padding","10px 16px","cursor","pointer","user-select","none",3,"highlighted"],[1,"combobox-empty",2,"padding","16px","text-align","center","color","#6b7280"],[1,"combobox-item","ticket-item",2,"display","flex","align-items","center","gap","10px","padding","10px 16px","cursor","pointer","user-select","none",3,"mouseenter"],["type","checkbox",2,"width","16px","height","16px","cursor","pointer",3,"change","checked"],[1,"ticket-sequence",2,"font-family","monospace","font-size","0.95em","color","#1f2937"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",3),ee(1,"app-navbar"),m(2,"main",4)(3,"div",5)(4,"div",6)(5,"app-wallet-panel",7),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",8)(7,"div",9)(8,"button",10),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",11),w(10," Create Ticket "),g(),m(11,"button",10),X("click",function(){return U(r),j(i.setTab("delete"))}),ee(12,"ng-icon",12),w(13," Delete Tickets "),g()(),Q(14,bYe,9,0,"div"),Q(15,wYe,9,0,"div"),Q(16,SYe,4,1,"div",13),Q(17,CYe,3,1,"div",14),m(18,"form",15,0)(20,"div",16)(21,"div"),Q(22,xYe,7,1,"div",17),Q(23,DYe,14,4),ee(24,"app-transaction-options",18),m(25,"div",19),Q(26,IYe,3,4,"button",20),Q(27,FYe,3,4,"button",21),m(28,"button",22),ct(29,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(30,"Clear Fields"),g()(),m(31,"div",23)(32,"input",24),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(33,"app-transaction-preview"),g()()()()()()()()}e&2&&(_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="delete"),_(3),J(i.activeTab()==="create"?14:-1),_(),J(i.activeTab()==="delete"?15:-1),_(),J(i.infoData()?16:-1),_(),J(i.txUiService.warningMessage?17:-1),_(4),oe("@tabTransition",i.activeTab()),_(),J(i.activeTab()==="create"?22:-1),_(),J(i.activeTab()==="delete"&&i.walletTicketCount()>0?23:-1),_(),oe("showWhenTab",Ei(21,_Ye))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="create"?26:-1),_(),J(i.activeTab()==="delete"?27:-1),_(),oe("disabled",!mt(29,19,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime))},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,zi],styles:[".ticket-dropdown[_ngcontent-%COMP%]{background:#fff;border:1px solid #d1d5db;border-radius:8px;box-shadow:0 10px 25px -5px #0000001a,0 4px 6px -2px #0000000d;font-size:.95rem}.ticket-item[_ngcontent-%COMP%]{transition:background-color .15s ease}.ticket-item[_ngcontent-%COMP%]:hover, .ticket-item.highlighted[_ngcontent-%COMP%]{background-color:#f3f4f6!important}.ticket-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{accent-color:#3b82f6;border-radius:4px}.combobox-input[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:-2px}.selected-count-badge[_ngcontent-%COMP%]{position:absolute;right:40px;top:50%;transform:translateY(-65%);background:#e0f2fe;color:#0c4a6e;font-size:.75rem;font-weight:600;padding:2px 8px;border-radius:12px;pointer-events:none}.selected-tickets-chips[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.ticket-container[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:20px;padding:12px;border:1px solid #e5e7eb;border-radius:8px;background:#fafafa}.ticket-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.ticket-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;border:1px solid #e2e8f0;background:#fff;border-radius:6px;transition:background .15s ease}.ticket-item[_ngcontent-%COMP%]:hover{background:#f8fafc}.ticket-number[_ngcontent-%COMP%]{font-weight:500;color:#1e293b;font-size:.95rem}.ticket-remove[_ngcontent-%COMP%]{border:none;background:transparent;padding:2px;cursor:pointer;border-radius:4px}.ticket-remove[_ngcontent-%COMP%]:hover   ng-icon[_ngcontent-%COMP%]{stroke:#dc2626}.ticket-footer[_ngcontent-%COMP%]{margin-top:12px;display:flex;justify-content:space-between;align-items:center}.ticket-count[_ngcontent-%COMP%]{color:#0c4a6e;font-size:.9rem}.clear-btn[_ngcontent-%COMP%]{padding:4px 10px;border-radius:6px;font-size:.85rem;border:none;background:#ef4444;color:#fff;cursor:pointer;transition:background .15s ease}.clear-btn[_ngcontent-%COMP%]:hover{background:#dc2626}"],data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var Eo=_i(Ki());var B1=_i(Ki());var yv=class n{constructor(t,e,i,r){this.storage=t;this.xrplService=e;this.utils=i;this.walletManagerService=r;this.weWant=this.createSideState(),this.weSpend=this.createSideState(),this.loadKnownIssuersFromStorage()}knownTrustLinesIssuers={XRP:[]};weWant;weSpend;walletAddress="";balanceCache=new Map;createSideState(){return{currency$:new bi(""),issuer$:new bi(""),issuers$:new bi([]),balance$:new bi("0")}}loadKnownIssuersFromStorage(){let t=this.storage.getKnownIssuers("knownIssuers");t&&(this.knownTrustLinesIssuers=t)}setWalletAddress(t){this.walletAddress=t,this.balanceCache.clear()}getAvailableCurrencies(t=!1){let e=Object.keys(this.knownTrustLinesIssuers);return t||(e=e.filter(i=>i!=="XRP")),e.sort((i,r)=>i.localeCompare(r))}selectWeWantCurrency(t,e){this.weWant.currency$.next(t),this.loadIssuersForSide(t,this.weWant),this.updateBalanceForSide(this.weWant,e)}selectWeWantIssuer(t,e){this.weWant.issuer$.next(t),this.updateBalanceForSide(this.weWant,e)}selectWeSpendCurrency(t,e){this.weSpend.currency$.next(t),this.loadIssuersForSide(t,this.weSpend),this.updateBalanceForSide(this.weSpend,e)}selectWeSpendIssuer(t,e){this.weSpend.issuer$.next(t),this.updateBalanceForSide(this.weSpend,e)}loadIssuersForSide(t,e){return z(this,null,function*(){if(!t||t==="XRP"){e.issuers$.next([]),e.issuer$.next("");return}let r=(this.knownTrustLinesIssuers[t]||[]).map(o=>({name:this.getNiceName(o,t),address:o})).sort((o,s)=>o.name.localeCompare(s.name));e.issuers$.next(r),r.length>0&&!e.issuer$.value&&e.issuer$.next(r[0].address)})}getNiceName(t,e){let i=this.walletManagerService.getWallets()?.find(o=>o.address===t);if(i?.name)return i.name;let r=this.storage.get("customDestinations");if(r)try{let s=JSON.parse(r).find(a=>a.address===t);if(s?.name)return s.name}catch{}return`${e} Issuer`}updateBalanceForSide(t,e){return z(this,null,function*(){let i=t.currency$.value,r=t.issuer$.value;if(!this.walletAddress||!i||i==="XRP"||!r){t.balance$.next(i==="XRP"?e.balance:"0");return}let o=`${this.walletAddress}_${i}`,s=this.balanceCache.get(o);if(s&&Date.now()-s.timestamp<8e3){let a=this.extractBalance(s.data,i,r);t.balance$.next(a);return}try{let a=yield this.xrplService.getClient(),l=yield this.utils.getWalletFromAddress(this.walletAddress),c=yield this.xrplService.getTokenBalance(a,l.classicAddress,"validated","");this.balanceCache.set(o,{data:c,timestamp:Date.now()});let d=this.extractBalance(c,i,r);t.balance$.next(d)}catch(a){console.warn("Failed to load balance",a),t.balance$.next("0")}})}extractBalance(t,e,i){let r=t.result,o=this.utils.normalizeCurrencyCode(e);if(r.obligations?.[o])return`-${this.utils.formatTokenBalance(r.obligations[o],18)}`;if(r.assets?.[i]){let s=r.assets[i].find(a=>this.utils.normalizeCurrencyCode(a.currency)===o);if(s)return this.utils.formatTokenBalance(s.value,18)}if(r.balances?.[i]){let s=r.balances[i].find(a=>this.utils.normalizeCurrencyCode(a.currency)===o);if(s)return this.utils.formatTokenBalance(s.value,18)}return"0"}refreshBothBalances(t){return z(this,null,function*(){yield Promise.all([this.updateBalanceForSide(this.weWant,t),this.updateBalanceForSide(this.weSpend,t)])})}getIssuersForCurrency(t){return!t||t==="XRP"?[]:this.knownTrustLinesIssuers[t]||[]}reset(){this.weWant.currency$.next(""),this.weWant.issuer$.next(""),this.weWant.issuers$.next([]),this.weWant.balance$.next("0"),this.weSpend.currency$.next(""),this.weSpend.issuer$.next(""),this.weSpend.issuers$.next([]),this.weSpend.balance$.next("0")}static \u0275fac=function(e){return new(e||n)(Ye(rn),Ye(Sr),Ye(Gt),Ye(un))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var PYe=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Vj=Math.ceil,Nc=Math.floor,El="[BigNumber Error] ",_fe=El+"Number primitive has more than 15 significant digits: ",Id=1e14,Di=14,Uj=9007199254740991,jj=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f0=1e7,Fs=1e9;function bfe(n){var t,e,i,r=S.prototype={constructor:S,toString:null,valueOf:null},o=new S(1),s=20,a=4,l=-7,c=21,d=-1e7,u=1e7,h=!1,f=1,p=0,y={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},v="0123456789abcdefghijklmnopqrstuvwxyz",b=!0;function S(O,R){var G,Z,K,C,A,I,T,M,F=this;if(!(F instanceof S))return new S(O,R);if(R==null){if(O&&O._isBigNumber===!0){F.s=O.s,!O.c||O.e>u?F.c=F.e=null:O.e<d?F.c=[F.e=0]:(F.e=O.e,F.c=O.c.slice());return}if((I=typeof O=="number")&&O*0==0){if(F.s=1/O<0?(O=-O,-1):1,O===~~O){for(C=0,A=O;A>=10;A/=10,C++);C>u?F.c=F.e=null:(F.e=C,F.c=[O]);return}M=String(O)}else{if(!PYe.test(M=String(O)))return i(F,M,I);F.s=M.charCodeAt(0)==45?(M=M.slice(1),-1):1}(C=M.indexOf("."))>-1&&(M=M.replace(".","")),(A=M.search(/e/i))>0?(C<0&&(C=A),C+=+M.slice(A+1),M=M.substring(0,A)):C<0&&(C=M.length)}else{if(To(R,2,v.length,"Base"),R==10&&b)return F=new S(O),D(F,s+F.e+1,a);if(M=String(O),I=typeof O=="number"){if(O*0!=0)return i(F,M,I,R);if(F.s=1/O<0?(M=M.slice(1),-1):1,S.DEBUG&&M.replace(/^0\.0*|\./,"").length>15)throw Error(_fe+O)}else F.s=M.charCodeAt(0)===45?(M=M.slice(1),-1):1;for(G=v.slice(0,R),C=A=0,T=M.length;A<T;A++)if(G.indexOf(Z=M.charAt(A))<0){if(Z=="."){if(A>C){C=T;continue}}else if(!K&&(M==M.toUpperCase()&&(M=M.toLowerCase())||M==M.toLowerCase()&&(M=M.toUpperCase()))){K=!0,A=-1,C=0;continue}return i(F,String(O),I,R)}I=!1,M=e(M,R,10,F.s),(C=M.indexOf("."))>-1?M=M.replace(".",""):C=M.length}for(A=0;M.charCodeAt(A)===48;A++);for(T=M.length;M.charCodeAt(--T)===48;);if(M=M.slice(A,++T)){if(T-=A,I&&S.DEBUG&&T>15&&(O>Uj||O!==Nc(O)))throw Error(_fe+F.s*O);if((C=C-A-1)>u)F.c=F.e=null;else if(C<d)F.c=[F.e=0];else{if(F.e=C,F.c=[],A=(C+1)%Di,C<0&&(A+=Di),A<T){for(A&&F.c.push(+M.slice(0,A)),T-=Di;A<T;)F.c.push(+M.slice(A,A+=Di));A=Di-(M=M.slice(A)).length}else A-=T;for(;A--;M+="0");F.c.push(+M)}}else F.c=[F.e=0]}S.clone=bfe,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(O){var R,G;if(O!=null)if(typeof O=="object"){if(O.hasOwnProperty(R="DECIMAL_PLACES")&&(G=O[R],To(G,0,Fs,R),s=G),O.hasOwnProperty(R="ROUNDING_MODE")&&(G=O[R],To(G,0,8,R),a=G),O.hasOwnProperty(R="EXPONENTIAL_AT")&&(G=O[R],G&&G.pop?(To(G[0],-Fs,0,R),To(G[1],0,Fs,R),l=G[0],c=G[1]):(To(G,-Fs,Fs,R),l=-(c=G<0?-G:G))),O.hasOwnProperty(R="RANGE"))if(G=O[R],G&&G.pop)To(G[0],-Fs,-1,R),To(G[1],1,Fs,R),d=G[0],u=G[1];else if(To(G,-Fs,Fs,R),G)d=-(u=G<0?-G:G);else throw Error(El+R+" cannot be zero: "+G);if(O.hasOwnProperty(R="CRYPTO"))if(G=O[R],G===!!G)if(G)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))h=G;else throw h=!G,Error(El+"crypto unavailable");else h=G;else throw Error(El+R+" not true or false: "+G);if(O.hasOwnProperty(R="MODULO_MODE")&&(G=O[R],To(G,0,9,R),f=G),O.hasOwnProperty(R="POW_PRECISION")&&(G=O[R],To(G,0,Fs,R),p=G),O.hasOwnProperty(R="FORMAT"))if(G=O[R],typeof G=="object")y=G;else throw Error(El+R+" not an object: "+G);if(O.hasOwnProperty(R="ALPHABET"))if(G=O[R],typeof G=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(G))b=G.slice(0,10)=="0123456789",v=G;else throw Error(El+R+" invalid: "+G)}else throw Error(El+"Object expected: "+O);return{DECIMAL_PLACES:s,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[d,u],CRYPTO:h,MODULO_MODE:f,POW_PRECISION:p,FORMAT:y,ALPHABET:v}},S.isBigNumber=function(O){if(!O||O._isBigNumber!==!0)return!1;if(!S.DEBUG)return!0;var R,G,Z=O.c,K=O.e,C=O.s;e:if({}.toString.call(Z)=="[object Array]"){if((C===1||C===-1)&&K>=-Fs&&K<=Fs&&K===Nc(K)){if(Z[0]===0){if(K===0&&Z.length===1)return!0;break e}if(R=(K+1)%Di,R<1&&(R+=Di),String(Z[0]).length==R){for(R=0;R<Z.length;R++)if(G=Z[R],G<0||G>=Id||G!==Nc(G))break e;if(G!==0)return!0}}}else if(Z===null&&K===null&&(C===null||C===1||C===-1))return!0;throw Error(El+"Invalid BigNumber: "+O)},S.maximum=S.max=function(){return k(arguments,-1)},S.minimum=S.min=function(){return k(arguments,1)},S.random=(function(){var O=9007199254740992,R=Math.random()*O&2097151?function(){return Nc(Math.random()*O)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(G){var Z,K,C,A,I,T=0,M=[],F=new S(o);if(G==null?G=s:To(G,0,Fs),A=Vj(G/Di),h)if(crypto.getRandomValues){for(Z=crypto.getRandomValues(new Uint32Array(A*=2));T<A;)I=Z[T]*131072+(Z[T+1]>>>11),I>=9e15?(K=crypto.getRandomValues(new Uint32Array(2)),Z[T]=K[0],Z[T+1]=K[1]):(M.push(I%1e14),T+=2);T=A/2}else if(crypto.randomBytes){for(Z=crypto.randomBytes(A*=7);T<A;)I=(Z[T]&31)*281474976710656+Z[T+1]*1099511627776+Z[T+2]*4294967296+Z[T+3]*16777216+(Z[T+4]<<16)+(Z[T+5]<<8)+Z[T+6],I>=9e15?crypto.randomBytes(7).copy(Z,T):(M.push(I%1e14),T+=7);T=A/7}else throw h=!1,Error(El+"crypto unavailable");if(!h)for(;T<A;)I=R(),I<9e15&&(M[T++]=I%1e14);for(A=M[--T],G%=Di,A&&G&&(I=jj[Di-G],M[T]=Nc(A/I)*I);M[T]===0;M.pop(),T--);if(T<0)M=[C=0];else{for(C=-1;M[0]===0;M.splice(0,1),C-=Di);for(T=1,I=M[0];I>=10;I/=10,T++);T<Di&&(C-=Di-T)}return F.e=C,F.c=M,F}})(),S.sum=function(){for(var O=1,R=arguments,G=new S(R[0]);O<R.length;)G=G.plus(R[O++]);return G},e=(function(){var O="0123456789";function R(G,Z,K,C){for(var A,I=[0],T,M=0,F=G.length;M<F;){for(T=I.length;T--;I[T]*=Z);for(I[0]+=C.indexOf(G.charAt(M++)),A=0;A<I.length;A++)I[A]>K-1&&(I[A+1]==null&&(I[A+1]=0),I[A+1]+=I[A]/K|0,I[A]%=K)}return I.reverse()}return function(G,Z,K,C,A){var I,T,M,F,q,$,te,se,ue=G.indexOf("."),Se=s,Ie=a;for(ue>=0&&(F=p,p=0,G=G.replace(".",""),se=new S(Z),$=se.pow(G.length-ue),p=F,se.c=R(uf(Oc($.c),$.e,"0"),10,K,O),se.e=se.c.length),te=R(G,Z,K,A?(I=v,O):(I=O,v)),M=F=te.length;te[--F]==0;te.pop());if(!te[0])return I.charAt(0);if(ue<0?--M:($.c=te,$.e=M,$.s=C,$=t($,se,Se,Ie,K),te=$.c,q=$.r,M=$.e),T=M+Se+1,ue=te[T],F=K/2,q=q||T<0||te[T+1]!=null,q=Ie<4?(ue!=null||q)&&(Ie==0||Ie==($.s<0?3:2)):ue>F||ue==F&&(Ie==4||q||Ie==6&&te[T-1]&1||Ie==($.s<0?8:7)),T<1||!te[0])G=q?uf(I.charAt(1),-Se,I.charAt(0)):I.charAt(0);else{if(te.length=T,q)for(--K;++te[--T]>K;)te[T]=0,T||(++M,te=[1].concat(te));for(F=te.length;!te[--F];);for(ue=0,G="";ue<=F;G+=I.charAt(te[ue++]));G=uf(G,M,I.charAt(0))}return G}})(),t=(function(){function O(Z,K,C){var A,I,T,M,F=0,q=Z.length,$=K%f0,te=K/f0|0;for(Z=Z.slice();q--;)T=Z[q]%f0,M=Z[q]/f0|0,A=te*T+M*$,I=$*T+A%f0*f0+F,F=(I/C|0)+(A/f0|0)+te*M,Z[q]=I%C;return F&&(Z=[F].concat(Z)),Z}function R(Z,K,C,A){var I,T;if(C!=A)T=C>A?1:-1;else for(I=T=0;I<C;I++)if(Z[I]!=K[I]){T=Z[I]>K[I]?1:-1;break}return T}function G(Z,K,C,A){for(var I=0;C--;)Z[C]-=I,I=Z[C]<K[C]?1:0,Z[C]=I*A+Z[C]-K[C];for(;!Z[0]&&Z.length>1;Z.splice(0,1));}return function(Z,K,C,A,I){var T,M,F,q,$,te,se,ue,Se,Ie,Be,ce,pe,re,ae,fe,De,be=Z.s==K.s?1:-1,Ae=Z.c,Ce=K.c;if(!Ae||!Ae[0]||!Ce||!Ce[0])return new S(!Z.s||!K.s||(Ae?Ce&&Ae[0]==Ce[0]:!Ce)?NaN:Ae&&Ae[0]==0||!Ce?be*0:be/0);for(ue=new S(be),Se=ue.c=[],M=Z.e-K.e,be=C+M+1,I||(I=Id,M=Bc(Z.e/Di)-Bc(K.e/Di),be=be/Di|0),F=0;Ce[F]==(Ae[F]||0);F++);if(Ce[F]>(Ae[F]||0)&&M--,be<0)Se.push(1),q=!0;else{for(re=Ae.length,fe=Ce.length,F=0,be+=2,$=Nc(I/(Ce[0]+1)),$>1&&(Ce=O(Ce,$,I),Ae=O(Ae,$,I),fe=Ce.length,re=Ae.length),pe=fe,Ie=Ae.slice(0,fe),Be=Ie.length;Be<fe;Ie[Be++]=0);De=Ce.slice(),De=[0].concat(De),ae=Ce[0],Ce[1]>=I/2&&ae++;do{if($=0,T=R(Ce,Ie,fe,Be),T<0){if(ce=Ie[0],fe!=Be&&(ce=ce*I+(Ie[1]||0)),$=Nc(ce/ae),$>1)for($>=I&&($=I-1),te=O(Ce,$,I),se=te.length,Be=Ie.length;R(te,Ie,se,Be)==1;)$--,G(te,fe<se?De:Ce,se,I),se=te.length,T=1;else $==0&&(T=$=1),te=Ce.slice(),se=te.length;if(se<Be&&(te=[0].concat(te)),G(Ie,te,Be,I),Be=Ie.length,T==-1)for(;R(Ce,Ie,fe,Be)<1;)$++,G(Ie,fe<Be?De:Ce,Be,I),Be=Ie.length}else T===0&&($++,Ie=[0]);Se[F++]=$,Ie[0]?Ie[Be++]=Ae[pe]||0:(Ie=[Ae[pe]],Be=1)}while((pe++<re||Ie[0]!=null)&&be--);q=Ie[0]!=null,Se[0]||Se.splice(0,1)}if(I==Id){for(F=1,be=Se[0];be>=10;be/=10,F++);D(ue,C+(ue.e=F+M*Di-1)+1,A,q)}else ue.e=M,ue.r=+q;return ue}})();function x(O,R,G,Z){var K,C,A,I,T;if(G==null?G=a:To(G,0,8),!O.c)return O.toString();if(K=O.c[0],A=O.e,R==null)T=Oc(O.c),T=Z==1||Z==2&&(A<=l||A>=c)?H8(T,A):uf(T,A,"0");else if(O=D(new S(O),R,G),C=O.e,T=Oc(O.c),I=T.length,Z==1||Z==2&&(R<=C||C<=l)){for(;I<R;T+="0",I++);T=H8(T,C)}else if(R-=A+(Z===2&&C>A),T=uf(T,C,"0"),C+1>I){if(--R>0)for(T+=".";R--;T+="0");}else if(R+=C-I,R>0)for(C+1==I&&(T+=".");R--;T+="0");return O.s<0&&K?"-"+T:T}function k(O,R){for(var G,Z,K=1,C=new S(O[0]);K<O.length;K++)Z=new S(O[K]),(!Z.s||(G=N1(C,Z))===R||G===0&&C.s===R)&&(C=Z);return C}function L(O,R,G){for(var Z=1,K=R.length;!R[--K];R.pop());for(K=R[0];K>=10;K/=10,Z++);return(G=Z+G*Di-1)>u?O.c=O.e=null:G<d?O.c=[O.e=0]:(O.e=G,O.c=R),O}i=(function(){var O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,R=/^([^.]+)\.$/,G=/^\.([^.]+)$/,Z=/^-?(Infinity|NaN)$/,K=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(C,A,I,T){var M,F=I?A:A.replace(K,"");if(Z.test(F))C.s=isNaN(F)?null:F<0?-1:1;else{if(!I&&(F=F.replace(O,function(q,$,te){return M=(te=te.toLowerCase())=="x"?16:te=="b"?2:8,!T||T==M?$:q}),T&&(M=T,F=F.replace(R,"$1").replace(G,"0.$1")),A!=F))return new S(F,M);if(S.DEBUG)throw Error(El+"Not a"+(T?" base "+T:"")+" number: "+A);C.s=null}C.c=C.e=null}})();function D(O,R,G,Z){var K,C,A,I,T,M,F,q=O.c,$=jj;if(q){e:{for(K=1,I=q[0];I>=10;I/=10,K++);if(C=R-K,C<0)C+=Di,A=R,T=q[M=0],F=Nc(T/$[K-A-1]%10);else if(M=Vj((C+1)/Di),M>=q.length)if(Z){for(;q.length<=M;q.push(0));T=F=0,K=1,C%=Di,A=C-Di+1}else break e;else{for(T=I=q[M],K=1;I>=10;I/=10,K++);C%=Di,A=C-Di+K,F=A<0?0:Nc(T/$[K-A-1]%10)}if(Z=Z||R<0||q[M+1]!=null||(A<0?T:T%$[K-A-1]),Z=G<4?(F||Z)&&(G==0||G==(O.s<0?3:2)):F>5||F==5&&(G==4||Z||G==6&&(C>0?A>0?T/$[K-A]:0:q[M-1])%10&1||G==(O.s<0?8:7)),R<1||!q[0])return q.length=0,Z?(R-=O.e+1,q[0]=$[(Di-R%Di)%Di],O.e=-R||0):q[0]=O.e=0,O;if(C==0?(q.length=M,I=1,M--):(q.length=M+1,I=$[Di-C],q[M]=A>0?Nc(T/$[K-A]%$[A])*I:0),Z)for(;;)if(M==0){for(C=1,A=q[0];A>=10;A/=10,C++);for(A=q[0]+=I,I=1;A>=10;A/=10,I++);C!=I&&(O.e++,q[0]==Id&&(q[0]=1));break}else{if(q[M]+=I,q[M]!=Id)break;q[M--]=0,I=1}for(C=q.length;q[--C]===0;q.pop());}O.e>u?O.c=O.e=null:O.e<d&&(O.c=[O.e=0])}return O}function V(O){var R,G=O.e;return G===null?O.toString():(R=Oc(O.c),R=G<=l||G>=c?H8(R,G):uf(R,G,"0"),O.s<0?"-"+R:R)}return r.absoluteValue=r.abs=function(){var O=new S(this);return O.s<0&&(O.s=1),O},r.comparedTo=function(O,R){return N1(this,new S(O,R))},r.decimalPlaces=r.dp=function(O,R){var G,Z,K,C=this;if(O!=null)return To(O,0,Fs),R==null?R=a:To(R,0,8),D(new S(C),O+C.e+1,R);if(!(G=C.c))return null;if(Z=((K=G.length-1)-Bc(this.e/Di))*Di,K=G[K])for(;K%10==0;K/=10,Z--);return Z<0&&(Z=0),Z},r.dividedBy=r.div=function(O,R){return t(this,new S(O,R),s,a)},r.dividedToIntegerBy=r.idiv=function(O,R){return t(this,new S(O,R),0,1)},r.exponentiatedBy=r.pow=function(O,R){var G,Z,K,C,A,I,T,M,F,q=this;if(O=new S(O),O.c&&!O.isInteger())throw Error(El+"Exponent not an integer: "+V(O));if(R!=null&&(R=new S(R)),I=O.e>14,!q.c||!q.c[0]||q.c[0]==1&&!q.e&&q.c.length==1||!O.c||!O.c[0])return F=new S(Math.pow(+V(q),I?O.s*(2-j8(O)):+V(O))),R?F.mod(R):F;if(T=O.s<0,R){if(R.c?!R.c[0]:!R.s)return new S(NaN);Z=!T&&q.isInteger()&&R.isInteger(),Z&&(q=q.mod(R))}else{if(O.e>9&&(q.e>0||q.e<-1||(q.e==0?q.c[0]>1||I&&q.c[1]>=24e7:q.c[0]<8e13||I&&q.c[0]<=9999975e7)))return C=q.s<0&&j8(O)?-0:0,q.e>-1&&(C=1/C),new S(T?1/C:C);p&&(C=Vj(p/Di+2))}for(I?(G=new S(.5),T&&(O.s=1),M=j8(O)):(K=Math.abs(+V(O)),M=K%2),F=new S(o);;){if(M){if(F=F.times(q),!F.c)break;C?F.c.length>C&&(F.c.length=C):Z&&(F=F.mod(R))}if(K){if(K=Nc(K/2),K===0)break;M=K%2}else if(O=O.times(G),D(O,O.e+1,1),O.e>14)M=j8(O);else{if(K=+V(O),K===0)break;M=K%2}q=q.times(q),C?q.c&&q.c.length>C&&(q.c.length=C):Z&&(q=q.mod(R))}return Z?F:(T&&(F=o.div(F)),R?F.mod(R):C?D(F,p,a,A):F)},r.integerValue=function(O){var R=new S(this);return O==null?O=a:To(O,0,8),D(R,R.e+1,O)},r.isEqualTo=r.eq=function(O,R){return N1(this,new S(O,R))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(O,R){return N1(this,new S(O,R))>0},r.isGreaterThanOrEqualTo=r.gte=function(O,R){return(R=N1(this,new S(O,R)))===1||R===0},r.isInteger=function(){return!!this.c&&Bc(this.e/Di)>this.c.length-2},r.isLessThan=r.lt=function(O,R){return N1(this,new S(O,R))<0},r.isLessThanOrEqualTo=r.lte=function(O,R){return(R=N1(this,new S(O,R)))===-1||R===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(O,R){var G,Z,K,C,A=this,I=A.s;if(O=new S(O,R),R=O.s,!I||!R)return new S(NaN);if(I!=R)return O.s=-R,A.plus(O);var T=A.e/Di,M=O.e/Di,F=A.c,q=O.c;if(!T||!M){if(!F||!q)return F?(O.s=-R,O):new S(q?A:NaN);if(!F[0]||!q[0])return q[0]?(O.s=-R,O):new S(F[0]?A:a==3?-0:0)}if(T=Bc(T),M=Bc(M),F=F.slice(),I=T-M){for((C=I<0)?(I=-I,K=F):(M=T,K=q),K.reverse(),R=I;R--;K.push(0));K.reverse()}else for(Z=(C=(I=F.length)<(R=q.length))?I:R,I=R=0;R<Z;R++)if(F[R]!=q[R]){C=F[R]<q[R];break}if(C&&(K=F,F=q,q=K,O.s=-O.s),R=(Z=q.length)-(G=F.length),R>0)for(;R--;F[G++]=0);for(R=Id-1;Z>I;){if(F[--Z]<q[Z]){for(G=Z;G&&!F[--G];F[G]=R);--F[G],F[Z]+=Id}F[Z]-=q[Z]}for(;F[0]==0;F.splice(0,1),--M);return F[0]?L(O,F,M):(O.s=a==3?-1:1,O.c=[O.e=0],O)},r.modulo=r.mod=function(O,R){var G,Z,K=this;return O=new S(O,R),!K.c||!O.s||O.c&&!O.c[0]?new S(NaN):!O.c||K.c&&!K.c[0]?new S(K):(f==9?(Z=O.s,O.s=1,G=t(K,O,0,3),O.s=Z,G.s*=Z):G=t(K,O,0,f),O=K.minus(G.times(O)),!O.c[0]&&f==1&&(O.s=K.s),O)},r.multipliedBy=r.times=function(O,R){var G,Z,K,C,A,I,T,M,F,q,$,te,se,ue,Se,Ie=this,Be=Ie.c,ce=(O=new S(O,R)).c;if(!Be||!ce||!Be[0]||!ce[0])return!Ie.s||!O.s||Be&&!Be[0]&&!ce||ce&&!ce[0]&&!Be?O.c=O.e=O.s=null:(O.s*=Ie.s,!Be||!ce?O.c=O.e=null:(O.c=[0],O.e=0)),O;for(Z=Bc(Ie.e/Di)+Bc(O.e/Di),O.s*=Ie.s,T=Be.length,q=ce.length,T<q&&(se=Be,Be=ce,ce=se,K=T,T=q,q=K),K=T+q,se=[];K--;se.push(0));for(ue=Id,Se=f0,K=q;--K>=0;){for(G=0,$=ce[K]%Se,te=ce[K]/Se|0,A=T,C=K+A;C>K;)M=Be[--A]%Se,F=Be[A]/Se|0,I=te*M+F*$,M=$*M+I%Se*Se+se[C]+G,G=(M/ue|0)+(I/Se|0)+te*F,se[C--]=M%ue;se[C]=G}return G?++Z:se.splice(0,1),L(O,se,Z)},r.negated=function(){var O=new S(this);return O.s=-O.s||null,O},r.plus=function(O,R){var G,Z=this,K=Z.s;if(O=new S(O,R),R=O.s,!K||!R)return new S(NaN);if(K!=R)return O.s=-R,Z.minus(O);var C=Z.e/Di,A=O.e/Di,I=Z.c,T=O.c;if(!C||!A){if(!I||!T)return new S(K/0);if(!I[0]||!T[0])return T[0]?O:new S(I[0]?Z:K*0)}if(C=Bc(C),A=Bc(A),I=I.slice(),K=C-A){for(K>0?(A=C,G=T):(K=-K,G=I),G.reverse();K--;G.push(0));G.reverse()}for(K=I.length,R=T.length,K-R<0&&(G=T,T=I,I=G,R=K),K=0;R;)K=(I[--R]=I[R]+T[R]+K)/Id|0,I[R]=Id===I[R]?0:I[R]%Id;return K&&(I=[K].concat(I),++A),L(O,I,A)},r.precision=r.sd=function(O,R){var G,Z,K,C=this;if(O!=null&&O!==!!O)return To(O,1,Fs),R==null?R=a:To(R,0,8),D(new S(C),O,R);if(!(G=C.c))return null;if(K=G.length-1,Z=K*Di+1,K=G[K]){for(;K%10==0;K/=10,Z--);for(K=G[0];K>=10;K/=10,Z++);}return O&&C.e+1>Z&&(Z=C.e+1),Z},r.shiftedBy=function(O){return To(O,-Uj,Uj),this.times("1e"+O)},r.squareRoot=r.sqrt=function(){var O,R,G,Z,K,C=this,A=C.c,I=C.s,T=C.e,M=s+4,F=new S("0.5");if(I!==1||!A||!A[0])return new S(!I||I<0&&(!A||A[0])?NaN:A?C:1/0);if(I=Math.sqrt(+V(C)),I==0||I==1/0?(R=Oc(A),(R.length+T)%2==0&&(R+="0"),I=Math.sqrt(+R),T=Bc((T+1)/2)-(T<0||T%2),I==1/0?R="5e"+T:(R=I.toExponential(),R=R.slice(0,R.indexOf("e")+1)+T),G=new S(R)):G=new S(I+""),G.c[0]){for(T=G.e,I=T+M,I<3&&(I=0);;)if(K=G,G=F.times(K.plus(t(C,K,M,1))),Oc(K.c).slice(0,I)===(R=Oc(G.c)).slice(0,I))if(G.e<T&&--I,R=R.slice(I-3,I+1),R=="9999"||!Z&&R=="4999"){if(!Z&&(D(K,K.e+s+2,0),K.times(K).eq(C))){G=K;break}M+=4,I+=4,Z=1}else{(!+R||!+R.slice(1)&&R.charAt(0)=="5")&&(D(G,G.e+s+2,1),O=!G.times(G).eq(C));break}}return D(G,G.e+s+1,a,O)},r.toExponential=function(O,R){return O!=null&&(To(O,0,Fs),O++),x(this,O,R,1)},r.toFixed=function(O,R){return O!=null&&(To(O,0,Fs),O=O+this.e+1),x(this,O,R)},r.toFormat=function(O,R,G){var Z,K=this;if(G==null)O!=null&&R&&typeof R=="object"?(G=R,R=null):O&&typeof O=="object"?(G=O,O=R=null):G=y;else if(typeof G!="object")throw Error(El+"Argument not an object: "+G);if(Z=K.toFixed(O,R),K.c){var C,A=Z.split("."),I=+G.groupSize,T=+G.secondaryGroupSize,M=G.groupSeparator||"",F=A[0],q=A[1],$=K.s<0,te=$?F.slice(1):F,se=te.length;if(T&&(C=I,I=T,T=C,se-=C),I>0&&se>0){for(C=se%I||I,F=te.substr(0,C);C<se;C+=I)F+=M+te.substr(C,I);T>0&&(F+=M+te.slice(C)),$&&(F="-"+F)}Z=q?F+(G.decimalSeparator||"")+((T=+G.fractionGroupSize)?q.replace(new RegExp("\\d{"+T+"}\\B","g"),"$&"+(G.fractionGroupSeparator||"")):q):F}return(G.prefix||"")+Z+(G.suffix||"")},r.toFraction=function(O){var R,G,Z,K,C,A,I,T,M,F,q,$,te=this,se=te.c;if(O!=null&&(I=new S(O),!I.isInteger()&&(I.c||I.s!==1)||I.lt(o)))throw Error(El+"Argument "+(I.isInteger()?"out of range: ":"not an integer: ")+V(I));if(!se)return new S(te);for(R=new S(o),M=G=new S(o),Z=T=new S(o),$=Oc(se),C=R.e=$.length-te.e-1,R.c[0]=jj[(A=C%Di)<0?Di+A:A],O=!O||I.comparedTo(R)>0?C>0?R:M:I,A=u,u=1/0,I=new S($),T.c[0]=0;F=t(I,R,0,1),K=G.plus(F.times(Z)),K.comparedTo(O)!=1;)G=Z,Z=K,M=T.plus(F.times(K=M)),T=K,R=I.minus(F.times(K=R)),I=K;return K=t(O.minus(G),Z,0,1),T=T.plus(K.times(M)),G=G.plus(K.times(Z)),T.s=M.s=te.s,C=C*2,q=t(M,Z,C,a).minus(te).abs().comparedTo(t(T,G,C,a).minus(te).abs())<1?[M,Z]:[T,G],u=A,q},r.toNumber=function(){return+V(this)},r.toPrecision=function(O,R){return O!=null&&To(O,1,Fs),x(this,O,R,2)},r.toString=function(O){var R,G=this,Z=G.s,K=G.e;return K===null?Z?(R="Infinity",Z<0&&(R="-"+R)):R="NaN":(O==null?R=K<=l||K>=c?H8(Oc(G.c),K):uf(Oc(G.c),K,"0"):O===10&&b?(G=D(new S(G),s+K+1,a),R=uf(Oc(G.c),G.e,"0")):(To(O,2,v.length,"Base"),R=e(uf(Oc(G.c),K,"0"),10,O,Z,!0)),Z<0&&G.c[0]&&(R="-"+R)),R},r.valueOf=r.toJSON=function(){return V(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,n!=null&&S.set(n),S}function Bc(n){var t=n|0;return n>0||n===t?t:t-1}function Oc(n){for(var t,e,i=1,r=n.length,o=n[0]+"";i<r;){for(t=n[i++]+"",e=Di-t.length;e--;t="0"+t);o+=t}for(r=o.length;o.charCodeAt(--r)===48;);return o.slice(0,r+1||1)}function N1(n,t){var e,i,r=n.c,o=t.c,s=n.s,a=t.s,l=n.e,c=t.e;if(!s||!a)return null;if(e=r&&!r[0],i=o&&!o[0],e||i)return e?i?0:-a:s;if(s!=a)return s;if(e=s<0,i=l==c,!r||!o)return i?0:!r^e?1:-1;if(!i)return l>c^e?1:-1;for(a=(l=r.length)<(c=o.length)?l:c,s=0;s<a;s++)if(r[s]!=o[s])return r[s]>o[s]^e?1:-1;return l==c?0:l>c^e?1:-1}function To(n,t,e,i){if(n<t||n>e||n!==Nc(n))throw Error(El+(i||"Argument")+(typeof n=="number"?n<t||n>e?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function j8(n){var t=n.c.length-1;return Bc(n.e/Di)==t&&n.c[t]%2!=0}function H8(n,t){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(t<0?"e":"e+")+t}function uf(n,t,e){var i,r;if(t<0){for(r=e+".";++t;r+=e);n=r+n}else if(i=n.length,++t>i){for(r=e,t-=i;--t;r+=e);n+=r}else t<i&&(n=n.slice(0,t)+"."+n.slice(t));return n}var LYe=bfe(),pr=LYe;var RYe=["offerDropdownInput"],OYe=["offerDropdownTemplate"],NYe=()=>["createOffer","cancelOffer"],BYe=(n,t)=>t.index,VYe=(n,t)=>t.key,wfe=(n,t)=>t.Sequence;function UYe(n,t){n&1&&(m(0,"div")(1,"div",23)(2,"div",24),ee(3,"ng-icon",25),g(),m(4,"div")(5,"h2",26),w(6,"Create Offer"),g(),m(7,"p",27),w(8,"Create Offer on the XRPL DEX."),g()()()())}function jYe(n,t){n&1&&(m(0,"div")(1,"div",23)(2,"div",24),ee(3,"ng-icon",25),g(),m(4,"div")(5,"h2",26),w(6,"Get Order Book"),g(),m(7,"p",27),w(8,"Get order book on the XRPL Dex for the currency pair."),g()()()())}function HYe(n,t){n&1&&(m(0,"div")(1,"div",23)(2,"div",28),ee(3,"ng-icon",29),g(),m(4,"div")(5,"h2",26),w(6,"Cancel Offer"),g(),m(7,"p",27),w(8,"Cancel offer on the XRPL DEX."),g()()()())}function WYe(n,t){if(n&1&&w(0),n&2){let e=E();je(" Order Book Stats: ",e.pair," ")}}function zYe(n,t){n&1&&w(0," Outstanding Offers ")}function qYe(n,t){n&1&&w(0," Existing Offers ")}function $Ye(n,t){n&1&&w(0," Existing Offers ")}function KYe(n,t){n&1&&w(0," Cancellable Offers ")}function GYe(n,t){if(n&1&&(Q(0,zYe,1,0)(1,qYe,1,0)(2,$Ye,1,0)(3,KYe,1,0),w(4)),n&2){let e,i=E(),r=E();J((e=r.activeTab())==="createOffer"?0:e==="getOffers"?1:e==="getOrderBook"?2:e==="cancelOffer"?3:-1),_(4),je(" (",i.offerCount,") ")}}function XYe(n,t){n&1&&w(0," has no outstanding offers. ")}function YYe(n,t){n&1&&w(0," created. ")}function ZYe(n,t){n&1&&w(0," on the DEX. ")}function QYe(n,t){n&1&&w(0," on the DEX. ")}function JYe(n,t){n&1&&w(0," that can be cancelled. ")}function eZe(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3),Q(4,YYe,1,0)(5,ZYe,1,0)(6,QYe,1,0)(7,JYe,1,0)),n&2){let e,i=E(),r=E();_(2),Ee(i.offerCount),_(),je(" outstanding offer",i.offerCount===1?"":"s"," "),_(),J((e=r.activeTab())==="createOffer"?4:e==="getOffers"?5:e==="getOrderBook"?6:e==="cancelOffer"?7:-1)}}function tZe(n,t){if(n&1&&w(0),n&2){let e=E(2);je(" Order Book Stats: ",e.pair," ")}}function nZe(n,t){n&1&&w(0," Outstanding Offers ")}function iZe(n,t){n&1&&w(0," Existing Offers ")}function rZe(n,t){n&1&&w(0," Existing Offers ")}function oZe(n,t){n&1&&w(0," Cancellable Offers ")}function sZe(n,t){if(n&1&&(Q(0,nZe,1,0)(1,iZe,1,0)(2,rZe,1,0)(3,oZe,1,0),w(4)),n&2){let e,i=E(2),r=E();J((e=r.activeTab())==="createOffer"?0:e==="getOffers"?1:e==="getOrderBook"?2:e==="cancelOffer"?3:-1),_(4),je(" (",i.offerCount,") ")}}function aZe(n,t){if(n&1&&(m(0,"ul",40)(1,"li")(2,"strong"),w(3,"Pair:"),g(),w(4),g(),m(5,"li")(6,"strong"),w(7,"VWAP:"),g(),w(8),g(),m(9,"li")(10,"strong"),w(11,"Simple Avg:"),g(),w(12),g(),m(13,"li")(14,"strong"),w(15,"Best Rate:"),g(),w(16),g(),m(17,"li")(18,"strong"),w(19,"Spread:"),g(),w(20),g(),m(21,"li")(22,"strong"),w(23,"Depth (30% slippage):"),g(),w(24),g(),m(25,"li")(26,"strong"),w(27,"Execution (15 input):"),g(),w(28),g(),m(29,"li")(30,"strong"),w(31,"Volatility:"),g(),w(32),g(),m(33,"li")(34,"strong"),w(35,"Liquidity Ratio:"),g(),w(36),g()()),n&2){let e=E(3);_(4),je(" ",e.pair),_(4),ei(" ",e.stats.vwap," ",e.pair),_(4),ei(" ",e.stats.simpleAvg," ",e.pair),_(4),ei(" ",e.stats.bestRate," ",e.pair),_(4),ei(" ",e.stats.spread," (",e.stats.spreadPercent,"%)"),_(4),je(" ",e.stats.depth),_(4),je(" ",e.stats.execution),_(4),je(" ",e.stats.volatility),_(4),je(" ",e.stats.liquidityRatio)}}function lZe(n,t){if(n&1&&(m(0,"div",44)(1,"span"),w(2,"Flags:"),g(),w(3),g()),n&2){let e=E().$implicit;_(3),je(" ",e.flags.join(", "))}}function cZe(n,t){if(n&1){let e=ge();m(0,"li",41)(1,"app-tooltip-link",42)(2,"div",43),w(3),g(),m(4,"div",44)(5,"span"),w(6,"Offer Index:"),g(),m(7,"code",45),w(8),g()(),Q(9,lZe,4,1,"div",44),g(),m(10,"button",46),X("click",function(r){let o=U(e).$implicit;return E(5).copyAndToast(o.index,"Offer Index"),j(r.stopPropagation())}),lt(),m(11,"svg",47),ee(12,"rect",48)(13,"path",49),g()()()}if(n&2){let e=t.$implicit,i=E(5);_(),oe("href",i.txUiService.explorerUrl()+"offer/"+e.index),_(2),ei("",e.takerGets," \u2192 ",e.takerPays),_(5),Ee(e.index),_(),J(e.flags.length?9:-1)}}function dZe(n,t){if(n&1&&(m(0,"ul",40),yn(1,cZe,14,5,"li",41,BYe),g()),n&2){let e=E(3);_(),vn(e.offersToShow)}}function uZe(n,t){if(n&1&&(m(0,"div",39),Q(1,aZe,37,13,"ul",40)(2,dZe,3,0,"ul",40),g()),n&2){let e=E(2);_(),J(e.isOrderBookTab?1:2)}}function hZe(n,t){if(n&1){let e=ge();m(0,"div",35),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",36)(2,"span"),Q(3,tZe,1,1)(4,sZe,5,2),g(),lt(),m(5,"svg",37),ee(6,"path",38),g()(),Q(7,uZe,3,1,"div",39),g()}if(n&2){let e=E(),i=E();_(3),J(e.isOrderBookTab?3:4),_(2),In("transform",i.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(i.infoPanelExpanded()?7:-1)}}function fZe(n,t){if(n&1&&(m(0,"div",14)(1,"div",30)(2,"div",31)(3,"span"),Q(4,WYe,1,1)(5,GYe,5,2),g(),m(6,"div",32),ee(7,"ng-icon",33),m(8,"code"),w(9),g(),Q(10,XYe,1,0)(11,eZe,8,3),g(),Q(12,hZe,8,4,"div",34),g()()()),n&2){let e=t;_(4),J(e.isOrderBookTab?4:5),_(5),Ee(e.walletName),_(),J(e.offerCount===0?10:11),_(2),J(e.offerCount>0||e.isOrderBookTab?12:-1)}}function pZe(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",50)(2,"div",51),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function mZe(n,t){n&1&&(m(0,"span",65),w(1,"XRP"),g())}function gZe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function yZe(n,t){if(n&1&&(m(0,"div",64),Q(1,mZe,2,0,"span",65)(2,gZe,2,1,"span"),m(3,"span",66),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function vZe(n,t){n&1&&(m(0,"span",65),w(1,"XRP"),g())}function _Ze(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function bZe(n,t){if(n&1&&(m(0,"div",64),Q(1,vZe,2,0,"span",65)(2,_Ze,2,1,"span"),m(3,"span",66),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function wZe(n,t){if(n&1&&(m(0,"div",67)(1,"span",68),w(2),g(),m(3,"span",66),w(4),g()()),n&2){let e=t.$implicit;_(2),Ee(e.display),_(2),Ee(e.secondary)}}function SZe(n,t){if(n&1&&(m(0,"div",67)(1,"span",68),w(2),g(),m(3,"span",66),w(4),g()()),n&2){let e=t.$implicit;_(2),Ee(e.display),_(2),Ee(e.secondary)}}function CZe(n,t){if(n&1){let e=ge();m(0,"div",52)(1,"div",53)(2,"label"),w(3,"Amount"),g(),m(4,"input",69),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.weWantAmount,r)||(o.weWantAmount=r),j(r)}),X("ngModelChange",function(){U(e);let r=E(2);return j(r.onWeWantAmountChange())}),g()(),m(5,"div",53)(6,"label"),w(7,"Amount"),g(),m(8,"input",70),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.weSpendAmount,r)||(o.weSpendAmount=r),j(r)}),X("ngModelChange",function(){U(e);let r=E(2);return j(r.onWeSpendAmountChange())}),g()()(),m(9,"div",52)(10,"div",53)(11,"label"),w(12,"Currency Balance"),g(),ee(13,"input",71),ct(14,"async"),g(),m(15,"div",53)(16,"label"),w(17,"Currency Balance"),g(),ee(18,"input",72),ct(19,"async"),g()()}if(n&2){let e=E(2);_(4),Oe("ngModel",e.weWantAmount),_(4),Oe("ngModel",e.weSpendAmount),_(5),oe("value",mt(14,4,e.weWantBalance$)??"0"),_(5),oe("value",mt(19,6,e.weSpendBalance$)??"0")}}function xZe(n,t){if(n&1){let e=ge();m(0,"div",82),X("click",function(){let r=U(e).$implicit,o=E(3);return j(o.toggleFlag(r.key))}),m(1,"div",83),ee(2,"input",84),lt(),m(3,"svg",85),ee(4,"path",86),g(),dn(),m(5,"span",87),w(6),g()(),m(7,"div",88),w(8),g(),m(9,"div",89),w(10),g()()}if(n&2){let e=t.$implicit,i=E(3);Ue("enabled",i.flags[e.key]),_(2),oe("id",e.key)("name",e.key)("checked",i.flags[e.key]),_(4),Ee(e.title),_(2),ei("",i.FLAG_VALUES[e.key]," ",e.key),_(2),Ee(e.desc)}}function kZe(n,t){if(n&1&&(m(0,"div",73),ee(1,"lucide-icon",74),m(2,"span",75),w(3,"Offer Flags"),g()(),m(4,"div",76),yn(5,xZe,11,9,"div",77,VYe),m(7,"div",78)(8,"div",79)(9,"span",80),w(10,"Total Flags Value:"),g(),m(11,"span",81),w(12),g()()()()),n&2){let e=E(2);_(5),vn(e.offerFlagsConfig),_(7),ei("",e.totalFlagsValue()," (",e.totalFlagsHex(),")")}}function MZe(n,t){if(n&1){let e=ge();m(0,"div",52)(1,"div",53)(2,"span",54)(3,"label",55),w(4,"Taker Gets - Buy Side"),g()()(),m(5,"div",53)(6,"span",56)(7,"label",57),w(8,"Taker Pays - Sell Side"),g()()()(),m(9,"div",52)(10,"div",53)(11,"label",58),w(12,"Currency Code"),g(),m(13,"p",59),w(14,"The token you want to receive or deposit/withdraw."),g(),m(15,"app-select-search-dropdown",60),X("valueChange",function(r){U(e);let o=E();return j(o.onWeWantCurrencySelected(r))}),nn(16,yZe,5,2,"ng-template",null,1,vr),g()(),m(18,"div",53)(19,"label",61),w(20,"Currency Code"),g(),m(21,"p",59),w(22,"The token you want to spend or deposit/withdraw."),g(),m(23,"app-select-search-dropdown",60),X("valueChange",function(r){U(e);let o=E();return j(o.onWeSpendCurrencySelected(r))}),nn(24,bZe,5,2,"ng-template",null,1,vr),g()()(),m(26,"div",52)(27,"div",53)(28,"label",62),w(29,"Issuer"),g(),m(30,"p",59),w(31,"The XRPL account that issues the token you want to receive."),g(),m(32,"app-select-search-dropdown",63),X("valueChange",function(r){U(e);let o=E();return j(o.onWeWantIssuerSelected(r))}),nn(33,wZe,5,2,"ng-template",null,1,vr),g()(),m(35,"div",53)(36,"label",62),w(37,"Issuer"),g(),m(38,"p",59),w(39,"The XRPL account that issues the token you want to receive."),g(),m(40,"app-select-search-dropdown",63),X("valueChange",function(r){U(e);let o=E();return j(o.onWeSpendIssuerSelected(r))}),nn(41,SZe,5,2,"ng-template",null,1,vr),g()()(),Q(43,CZe,20,8),Q(44,kZe,13,2)}if(n&2){let e=E();_(15),oe("items",e.weWantCurrencyItems())("value",e.selectedWeWantCurrencyItem())("showShortAddress",!1),_(8),oe("items",e.weSpendCurrencyItems())("value",e.selectedWeSpendCurrencyItem())("showShortAddress",!1),_(9),oe("items",e.weWantIssuerItems())("value",e.selectedWeWantIssuerItem())("showShortAddress",!0),_(8),oe("items",e.weSpendIssuerItems())("value",e.selectedWeSpendIssuerItem())("showShortAddress",!0),_(3),J(e.activeTab()==="createOffer"?43:-1),_(),J(e.activeTab()==="createOffer"?44:-1)}}function TZe(n,t){if(n&1){let e=ge();m(0,"div",97)(1,"span",100),w(2),g(),m(3,"button",101),X("click",function(){let r=U(e).$implicit,o=E(3);return j(o.toggleOfferSelection(r))}),ee(4,"ng-icon",102),g()()}if(n&2){let e=t.$implicit,i=E(3);_(2),Ee(i.formatOfferDisplay(e))}}function EZe(n,t){if(n&1){let e=ge();m(0,"div",95)(1,"div",96),yn(2,TZe,5,1,"div",97,wfe),g(),m(4,"div",98)(5,"button",99),X("click",function(){U(e);let r=E(2);return j(r.clearAllOfferSelections())}),w(6,"Clear all"),g()()()}if(n&2){let e=E(2);_(2),vn(e.selectedOffers())}}function AZe(n,t){if(n&1){let e=ge();m(0,"label",111),X("mouseenter",function(){let r=U(e).$index,o=E(3);return j(o.highlightedOfferIndex.set(r))}),m(1,"input",112),X("change",function(){let r=U(e).$implicit,o=E(3);return j(o.toggleOfferSelection(r))}),g(),m(2,"span",113),w(3),g()()}if(n&2){let e=t.$implicit,i=t.$index,r=E(3);Ue("highlighted",r.highlightedOfferIndex()===i),_(),oe("checked",r.selectedOfferSequences().includes(e.Sequence)),_(2),je(" ",r.formatOfferDisplay(e)," ")}}function DZe(n,t){n&1&&(m(0,"div",110),w(1,"No offers match your search"),g())}function IZe(n,t){if(n&1){let e=ge();m(0,"div",103),X("click",function(r){return U(e),j(r.stopPropagation())}),m(1,"div",104)(2,"div",105)(3,"label",106)(4,"input",107),X("change",function(){U(e);let r=E(2);return j(r.toggleSelectAllOffers())}),g(),m(5,"span"),w(6,"Select All"),g()(),m(7,"button",108),X("click",function(){U(e);let r=E(2);return j(r.clearAllOfferSelections())}),w(8,"Clear"),g()(),yn(9,AZe,4,4,"label",109,wfe,!1,DZe,2,0,"div",110),g()()}if(n&2){let e=E(2);_(4),oe("checked",e.allOffersSelected()),_(3),In("opacity",e.selectedOfferSequences().length===0?.5:1),oe("disabled",e.selectedOfferSequences().length===0),_(2),vn(e.filteredOffers())}}function FZe(n,t){if(n&1){let e=ge();m(0,"div",90)(1,"div",53)(2,"label"),w(3,"Select Offers to cancel"),g(),m(4,"p",59),w(5,"Select existing offers to cancel for the selected account."),g(),m(6,"div",91),X("clickOutside",function(){U(e);let r=E();return j(r.closeOfferDropdown())}),m(7,"input",92,2),X("input",function(r){U(e);let o=E();return j(o.onOfferSearchInput(r))})("focus",function(){U(e);let r=E();return j(r.openOfferDropdown())})("keydown",function(r){U(e);let o=E();return j(o.onOfferKeyDown(r))}),g(),m(9,"button",93),X("click",function(){U(e);let r=E();return j(r.toggleOfferDropdown())}),ee(10,"lucide-icon",94),g()()()(),Q(11,EZe,7,0,"div",95),nn(12,IZe,12,5,"ng-template",null,3,vr)}if(n&2){let e=E();_(7),oe("value",e.offerSearchQuery())("placeholder",e.selectedOfferSequences().length>0?e.selectedOfferSequences().length+" offer(s) selected":"Search offers by sequence..."),_(4),J(e.selectedOffers().length>0?11:-1)}}function PZe(n,t){if(n&1){let e=ge();m(0,"button",114),X("click",function(){U(e);let r=E();return j(r.createOffer())}),w(1),g(),m(2,"button",114),X("click",function(){U(e);let r=E();return j(r.invertOrder())}),w(3),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Create Offer"),_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Invert Order")}}function LZe(n,t){if(n&1){let e=ge();m(0,"button",115),X("click",function(){U(e);let r=E();return j(r.getOrderBook())}),w(1),g(),m(2,"button",114),X("click",function(){U(e);let r=E();return j(r.invertOrder())}),w(3),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Get Orderbook"),_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Invert Order")}}function RZe(n,t){if(n&1){let e=ge();m(0,"button",116),X("click",function(){U(e);let r=E();return j(r.cancelOffer())}),w(1),g(),m(2,"button",117),X("click",function(){U(e);let r=E();return j(r.clearFields())}),w(3,"Clear Fields"),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Cancel Offer")}}var W8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);offerCurrency=N(yv);offerOverlayRef=null;overlay=N(Xu);viewContainerRef=N(Dr);offerDropdownInput;offerDropdownTemplate;cdr;highlightedOfferIndex=P(-1);offerSearchQuery=P("");selectedOfferSequences=P([]);isOfferDropdownOpen=P(!1);weWantIssuers$;weSpendIssuers$;weWantBalance$;weSpendBalance$;destroy$=new Xe;ammInfoTrigger=new Xe;typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("createOffer");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");currencyFieldDropDownValue=P("XRP");selectedWalletIndex=P(0);currencyChangeTrigger=P(0);holderField=P("");insufficientLiquidityWarning=P(!1);lpTokenBalanceField=P("0");tradingFeeField=P("0.1");withdrawlLpTokenFromPoolField=P("");signers=[{account:"",seed:"",weight:1}];weWantCurrency=P("");weSpendCurrency=P("XRP");availableCurrencies=[];weWantIssuer=P("");weSpendIssuer=P("");weWantAmount=P("");weSpendAmount=P("");isMarketOrder=P(!1);isFillOrKill=P(!1);isPassive=P(!0);knownIssuers=P({XRP:[]});knownTrustLinesIssuers=P({XRP:[]});existingOffers=P([]);existingSellOffers=P([]);existingBuyOffers=P([]);existingSellOffersCollapsed=P(!0);amountTimeout=P(null);weWantIssuersTrigger=P(0);weSpendIssuersTrigger=P(0);destinationSearch$=new Xe;offerSequenceField=P("");offersArray=P([]);selectedTickets=[];selectedSingleTicket=P("");multiSelectMode=P(!1);slippage=P(.2357);totalFlagsValue=P(0);totalFlagsHex=P("0x0");displayExistingOffers=P(!0);orderBookStats=P(null);orderBookPair=P("");flagValues={tfPassive:65536,tfImmediateOrCancel:131072,tfFillOrKill:262144};FLAG_VALUES=Eo.OfferCreateFlags;flags={tfPassive:!1,tfImmediateOrCancel:!1,tfFillOrKill:!1};offerFlagsConfig=[{key:"tfPassive",title:"Passive",desc:"The offer does not consume offers that exactly match it, and instead becomes an Offer object in the ledger. It still consumes offers that cross it."},{key:"tfFillOrKill",title:"Fill Or Kill",desc:"Only try to match existing offers in the ledger, and only do so if the entire TakerPays quantity can be obtained."},{key:"tfImmediateOrCancel",title:"Immediate Or Cancel",desc:"The offer never becomes a ledger object: it only tries to match existing offers in the ledger."}];selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase();return t===""?this.destinations():this.destinations().filter(e=>e.address!==this.currentWallet().address).filter(e=>e.address.toLowerCase().includes(t)||(e.name??"").toLowerCase().includes(t))});filteredOffers=_e(()=>{let t=this.offerSearchQuery().trim().toLowerCase(),e=this.existingOffers();return t?e.filter(i=>i.Sequence.toString().includes(t)||this.formatOfferDisplay(i).toLowerCase().includes(t)):e});formatOfferDisplay(t){return`${t.Sequence}: Taker Gets: ${t.TakerGets} \u2192 Taker Pays: ${t.TakerPays}`}storedIssuers=_e(()=>{let t=this.knownTrustLinesIssuers(),e=[];for(let i in t)if(i!=="XRP")for(let r of t[i])e.push({name:i,address:r});return e.sort((i,r)=>i.name.localeCompare(r.name))});weWantCurrencyItems=_e(()=>{let t=this.weWantCurrency();return this.offerCurrency.getAvailableCurrencies(!0).map(e=>({id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":(()=>{let i=this.offerCurrency.getIssuersForCurrency(e).length;return i===0?"No issuers":`${i} issuer${i!==1?"s":""}`})(),isCurrentCode:e===t}))});selectedWeWantCurrencyItem=_e(()=>{let t=this.weWantCurrency();return t&&this.weWantCurrencyItems().find(e=>e.id===t)||null});weSpendCurrencyItems=_e(()=>{let t=this.weSpendCurrency();return this.offerCurrency.getAvailableCurrencies(!0).map(e=>({id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":(()=>{let i=this.offerCurrency.getIssuersForCurrency(e).length;return i===0?"No issuers":`${i} issuer${i!==1?"s":""}`})(),isCurrentCode:e===t}))});selectedWeSpendCurrencyItem=_e(()=>{let t=this.weSpendCurrency();return t&&this.weSpendCurrencyItems().find(e=>e.id===t)||null});weWantIssuerItems=_e(()=>{this.weWantIssuersTrigger();let t=this.weWantIssuer();return(this.offerCurrency.weWant.issuers$.value||[]).map((i,r)=>({id:i.address,display:i.name||`Issuer ${r+1}`,secondary:`${i.address.slice(0,8)}...${i.address.slice(-6)}`,isCurrentToken:i.address===t}))});selectedWeWantIssuerItem=_e(()=>{let t=this.weWantIssuer();return t&&this.weWantIssuerItems().find(e=>e.id===t)||null});weSpendIssuerItems=_e(()=>{this.weSpendIssuersTrigger();let t=this.weSpendIssuer();return(this.offerCurrency.weSpend.issuers$.value||[]).map((i,r)=>({id:i.address,display:i.name||`Issuer ${r+1}`,secondary:`${i.address.slice(0,8)}...${i.address.slice(-6)}`,isCurrentToken:i.address===t}))});selectedWeSpendIssuerItem=_e(()=>{let t=this.weSpendIssuer();return t&&this.weSpendIssuerItems().find(e=>e.id===t)||null});infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=this.existingOffers().length,r={walletName:e,offerCount:i,isOrderBookTab:!1,offersToShow:this.existingOffers().map(o=>({index:o.TxHash,takerGets:o.TakerGets,takerPays:o.TakerPays,flags:this.decodeOfferFlags(o.Flags)}))};if(this.activeTab()==="getOrderBook"){let o=this.orderBookStats(),s=this.orderBookPair();if(o&&s)return Ge(le({},r),{isOrderBookTab:!0,pair:s,stats:o})}return r});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.cdr=N(vi),this.txUiService.clearAllOptionsAndMessages(),this.weWantIssuers$=this.offerCurrency.weWant.issuers$,this.weSpendIssuers$=this.offerCurrency.weSpend.issuers$,this.weWantBalance$=this.offerCurrency.weWant.balance$,this.weSpendBalance$=this.offerCurrency.weSpend.balance$,this.availableCurrencies=this.offerCurrency.getAvailableCurrencies(!0)}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.currencyFieldDropDownValue.set("XRP"),this.offerCurrency.weWant.issuers$.pipe(fn(this.destroy$)).subscribe(t=>{this.weWantIssuersTrigger.update(i=>i+1);let e=t[0]?.address??"";this.offerCurrency.selectWeWantIssuer(e,this.currentWallet())}),this.offerCurrency.weSpend.issuers$.pipe(fn(this.destroy$)).subscribe(t=>{this.weSpendIssuersTrigger.update(i=>i+1);let e=t[0]?.address??"";this.offerCurrency.selectWeSpendIssuer(e,this.currentWallet())}),this.offerCurrency.weWant.currency$.pipe(fn(this.destroy$)).subscribe(t=>{this.weWantCurrency.set(t)}),this.offerCurrency.weWant.issuer$.pipe(fn(this.destroy$)).subscribe(t=>{this.weWantIssuer.set(t)}),this.offerCurrency.weSpend.currency$.pipe(fn(this.destroy$)).subscribe(t=>{this.weSpendCurrency.set(t)}),this.offerCurrency.weSpend.issuer$.pipe(fn(this.destroy$)).subscribe(t=>{this.weSpendIssuer.set(t)}),this.weSpendCurrency.set("XRP"),this.offerCurrency.selectWeSpendCurrency("XRP",this.currentWallet()),this.offerCurrency.selectWeSpendIssuer("",this.currentWallet())}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];if(i){this.clearFields(),this.selectWallet(i),this.offerCurrency.setWalletAddress(i.address);let r=this.offerCurrency.getAvailableCurrencies(!0),o=r.includes("BOB")?"BOB":r[0]||"XRP";this.offerCurrency.selectWeWantCurrency(o,i),this.offerCurrency.selectWeSpendCurrency("XRP",i)}}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];if(e){this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.clearFields(),this.offerCurrency.setWalletAddress(e.address);let i=this.offerCurrency.getAvailableCurrencies(!0),r=i.includes("BOB")?"BOB":i[0]||"XRP";this.offerCurrency.selectWeWantCurrency(r,e),this.offerCurrency.selectWeSpendCurrency("XRP",e),yield this.getOffers(!1,!0)}}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t),this.offerCurrency.setWalletAddress(t.address);let e=this.offerCurrency.getAvailableCurrencies(!0),i=e.includes("BOB")?"BOB":e[0]||"XRP";this.offerCurrency.selectWeWantCurrency(i,t),this.offerCurrency.selectWeSpendCurrency("XRP",t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();let t=this.amountTimeout();t&&clearTimeout(t)}trackByOfferIndex(t,e){return e.OfferIndex}toggleExistingSellOffers(){this.existingSellOffersCollapsed.set(!this.existingSellOffersCollapsed)}toggleExistingOffers(){this.displayExistingOffers.set(!this.displayExistingOffers)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.clearFields(),this.hasWallets()&&(this.activeTab()==="getOrderBook"?yield this.getOrderBook():yield this.getOffers(!0,!0))})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getOffers(t=!1,e=!1){return z(this,null,function*(){yield this.withPerf("getOffers",()=>z(this,null,function*(){e&&this.txUiService.clearAllOptionsAndMessages();try{let[i,r]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:o,accountObjects:s},a]=yield Promise.all([this.xrplCache.getAccountData(r.classicAddress,t),this.xrplService.getAccountOffers(i,r.classicAddress,"validated","")]);this.getExistingOffers(s,r.classicAddress),this.refreshUiState(r,o,s)}catch(i){console.error("Error in getOffers:",i),this.txUiService.setError(`${i.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getOrderBook(){return z(this,null,function*(){yield this.withPerf("getOrderBook",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:i,accountObjects:r}=yield this.xrplCache.getAccountData(e.classicAddress,!1),o=this.weWantCurrency()==="XRP"?{currency:"XRP",value:this.weWantAmount()}:{currency:this.utilsService.encodeIfNeeded(this.weWantCurrency()),issuer:this.weWantIssuer(),value:this.weWantAmount()},s=this.weSpendCurrency()==="XRP"?{currency:"XRP",value:this.weSpendAmount()}:{currency:this.utilsService.encodeIfNeeded(this.weSpendCurrency()),issuer:this.weSpendIssuer(),value:this.weSpendAmount()},a=this.utilsService.decodeIfNeeded(o.currency),l=this.utilsService.decodeIfNeeded(s.currency),c=s.currency===Re.XRP_CURRENCY?"buy":"sell",[d,u,h]=yield Promise.all([t.request({command:"book_offers",taker:e.classicAddress,ledger_index:"current",taker_gets:o,taker_pays:s}),t.request({command:"book_offers",taker:e.classicAddress,ledger_index:"current",taker_gets:s,taker_pays:o}),t.request(this.createAmmRequest(s,o)).catch(x=>(console.warn("No AMM pool found for this pair:",x),null))]);this.utilsService.logObjects("orderBook",d),this.utilsService.logObjects("counterOrderBook",u),this.utilsService.logObjects("ammData",h?h.result:"");let f=[...d.result.offers];if(h?.result?.amm){let x=h.result.amm,k=this.isTokenAmount(o)?{currency:o.currency,issuer:o.issuer,value:typeof x.amount2=="string"?String(Eo.dropsToXrp(x.amount2)):x.amount2.value}:typeof x.amount2=="string"?x.amount2:x.amount2.value,L=this.isTokenAmount(s)?{currency:s.currency,issuer:s.issuer,value:typeof x.amount=="string"?String(Eo.dropsToXrp(x.amount)):x.amount.value}:typeof x.amount=="string"?x.amount:x.amount.value,D={Account:x.account||"AMM_POOL",Flags:0,LedgerEntryType:"Offer",Sequence:0,TakerGets:k,TakerPays:L,isAMM:!0,rate:new pr(typeof x.amount2=="string"?Eo.dropsToXrp(x.amount2):x.amount2.value).dividedBy(typeof x.amount=="string"?Eo.dropsToXrp(x.amount):x.amount.value),BookDirectory:"0",BookNode:"0",OwnerNode:"0",PreviousTxnID:"0",PreviousTxnLgrSeq:0};f.unshift(D)}let p=this.computeBidAskSpread(c==="sell"?u.result.offers:f,c==="sell"?f:u.result.offers),y=this.computeLiquidityRatio(c==="sell"?u.result.offers:f,c==="sell"?f:u.result.offers,c==="sell"),v=this.computeAverageExchangeRateBothWays(f,5),b=`${a}/${l}`,S=`${l}/${a}`;if(f.length>0||h?.result?.amm){this.populateStatsFields(v,o,s,p,y,c);let x=[{key:"VWAP",value:`${v.forward.vwap.toFixed(8)} ${b}`},{key:"Simple Average",value:`${v.forward.simpleAvg.toFixed(8)} ${b}`},{key:"Best Rate",value:`${v.forward.bestRate.toFixed(8)} ${b}`},{key:"Worst Rate",value:`${v.forward.worstRate.toFixed(8)} ${b}`},{key:"1 XRP per Token",value:`${v.inverse.vwap.toFixed(8)} ${S}`},{key:"1 XRP per Token (Best Rate)",value:`${v.inverse.bestRate.toFixed(8)} ${S}`},{key:"Depth (30% slippage)",value:`${v.forward.depthDOG.toFixed(2)} ${a} for ${v.forward.depthXRP.toFixed(2)} ${l}`},{key:`Execution (5 ${l})`,value:v.forward.insufficientLiquidity?`Insufficient liquidity: ${v.forward.executionDOG.toFixed(2)} ${a} for ${v.forward.executionXRP.toFixed(2)} ${l}, Avg Rate: ${v.forward.executionPrice.toFixed(8)} ${b}`:`Receive ${v.forward.executionDOG.toFixed(2)} ${a}, Avg Rate: ${v.forward.executionPrice.toFixed(8)} ${b}`},{key:"Price Volatility",value:`Mean ${v.forward.simpleAvg.toFixed(8)} ${b}, StdDev ${v.forward.volatility.toFixed(8)} (${v.forward.volatilityPercent.toFixed(2)}%)`},{key:"Spread",value:c==="buy"?`${p.spread.toFixed(8)} ${b} (${p.spreadPercent.toFixed(2)}%)`:`${p.spread.toFixed(8)} ${S} (${p.spreadPercent.toFixed(2)}%)`},{key:"Liquidity Ratio",value:`${y.ratio.toFixed(2)} (${b} vs ${S})`}]}this.orderBookPair.set(b),this.orderBookStats.set({vwap:v.forward.vwap.toFixed(8),simpleAvg:v.forward.simpleAvg.toFixed(8),bestRate:v.forward.bestRate.toFixed(8),spread:p.spread.toFixed(8),spreadPercent:p.spreadPercent.toFixed(2),liquidityRatio:y.ratio.toFixed(2),depth:`${v.forward.depthDOG.toFixed(2)} ${a} for ${v.forward.depthXRP.toFixed(2)} ${l}`,execution:v.forward.insufficientLiquidity?`Insufficient liquidity: ${v.forward.executionDOG.toFixed(2)} ${a} for ${v.forward.executionXRP.toFixed(2)} ${l}`:`Receive ${v.forward.executionDOG.toFixed(2)} ${a} for 15 ${l}`,volatility:`${v.forward.volatility.toFixed(8)} (${v.forward.volatilityPercent.toFixed(2)}%)`}),this.clearFields()}catch(t){console.error("Error in getOrderBook:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createOffer(){return z(this,null,function*(){yield this.withPerf("createOffer",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),t.getXrpBalance(e.classicAddress),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplService.getXrplServerInfo(t,"current","")]);this.utilsService.logAccountInfoObjects(i,null),this.utilsService.logObjects("trustLines",s.result),this.utilsService.logObjects("serverInfo",a),this.utilsService.logObjects("fee",r);let l,c;this.weWantIssuer()===Re.XRP_CURRENCY||this.weWantIssuer()===""?(l=this.weSpendIssuer(),c=this.weSpendCurrency()):(l=this.weWantIssuer(),c=this.weWantCurrency()),this.utilsService.logObjects("issuerAddr",l),this.utilsService.logObjects("issuerCur",c);let d=s.result.lines.filter(T=>{let M=T.currency.length>3?this.utilsService.decodeCurrencyCode(T.currency):T.currency;return parseFloat(T.limit)>0&&parseFloat(T.balance)>=0&&T.account===l&&(c?M===c:!0)});console.debug(`Active trust lines for ${e.classicAddress}:`,d);let u=this.xrplService.getXrpReserveRequirements(i,a);console.log(`Initial XRP Balance ${o} (drops): ${Eo.xrpToDrops(o)}`);let h=this.weWantCurrency()===Re.XRP_CURRENCY?{currency:Re.XRP_CURRENCY,value:this.weWantAmount()}:{currency:this.weWantCurrency(),issuer:this.weWantIssuer(),value:this.weWantAmount()},f=this.weSpendCurrency()===Re.XRP_CURRENCY?{amount:this.weSpendAmount()}:{currency:this.weSpendCurrency(),issuer:this.weSpendIssuer(),value:this.weSpendAmount()};if(this.weSpendCurrency()===Re.XRP_CURRENCY){if(!this.weSpendAmount())throw new Error("weSpendAmount() is required for XRP");f={amount:this.weSpendAmount()}}else{if(!this.weSpendAmount()||!this.weSpendIssuer())throw new Error("weSpendAmount() and weSpendIssuerField are required for token");f={currency:this.utilsService.encodeIfNeeded(this.weSpendCurrency()),value:this.weSpendAmount(),issuer:this.weSpendIssuer()}}h.currency=this.utilsService.encodeIfNeeded(h.currency);let p=f.currency?"sell":"buy";this.utilsService.logObjects("offerType",p),console.log(`weSpendAmount():  ${this.weSpendAmount()} weWantAmount(): ${this.weWantAmount()} `);let y=new pr(this.weSpendAmount()).dividedBy(this.weWantAmount()),v=this.calculateEffectiveRate(y,u,p),b=[{key:"Proposed Rate",value:`1 ${h.currency} = ${y.toFixed(8)} ${f.currency||Re.XRP_CURRENCY}`},{key:"Effective Rate",value:`1 ${h.currency} = ${v.toFixed(8)} ${f.currency||Re.XRP_CURRENCY}`}];v.gt(y)&&b.push({key:"Note",value:"Effective rate is worse than proposed due to XRP reserve requirements"});let[S,x]=yield Promise.all([t.request({command:"book_offers",taker:e.address,taker_gets:h,taker_pays:f.currency?f:{currency:Re.XRP_CURRENCY,value:this.weSpendAmount()},ledger_index:"current"}),t.request({command:"book_offers",taker:e.address,taker_gets:f.currency?f:{currency:Re.XRP_CURRENCY,value:this.weSpendAmount()},taker_pays:h,ledger_index:"current"})]),k=.05,L=S.result.offers,D=new pr(0),V=new pr(this.weWantAmount()),O=null,R=[];if(L.length>0)for(let T of L){let M=new pr(T.quality??"0");if((!O||M.lt(O))&&(O=M),M.lte(y.times(1+k))){let F=y.minus(M).dividedBy(M);if(R=[{key:"Best Rate",value:`1 ${h.currency} = ${O?.toFixed(6)||"0"} ${f.currency||Re.XRP_CURRENCY}`},{key:"Proposed Rate",value:`1 ${h.currency} = ${y.toFixed(6)} ${f.currency||Re.XRP_CURRENCY}`},{key:"Slippage",value:`${F.times(100).toFixed(2)}%`}],F.gt(k)&&R.push({key:"Warning",value:`Slippage ${F.times(100).toFixed(2)}% exceeds ${k*100}%`}),D=D.plus(new pr(T.owner_funds||(typeof T.TakerGets=="object"&&"value"in T.TakerGets?T.TakerGets.value:T.TakerGets))),D.gte(V))break}}if(D.eq(0)){let T=new pr(this.weWantAmount()).dividedBy(this.weSpendAmount()),M=x.result.offers,F=new pr(0),q=f.currency||Re.XRP_CURRENCY;if(q===Re.XRP_CURRENCY&&(q="drops of XRP"),M.length>0){for(let $ of M)if(typeof $.quality<"u"&&Number($.quality)<=v.toNumber()){let te=new pr($.quality),se=y.minus(te).dividedBy(te);R=[{key:"Best Rate",value:`1 ${f.currency||Re.XRP_CURRENCY} = ${te.toFixed(6)} ${h.currency}`},{key:"Proposed Rate",value:`1 ${f.currency||Re.XRP_CURRENCY} = ${y.toFixed(6)} ${h.currency}`},{key:"Slippage",value:`${se.times(100).toFixed(2)}%`}],se.gt(k)&&R.push({key:"Warning",value:`Slippage ${se.times(100).toFixed(2)}% exceeds ${k*100}%`}),F=F.plus(new pr($.owner_funds||"0"))}else break;F.gt(0)&&R.push({key:"Order Book Position",value:`Offer placed below at least ${F.toFixed(2)} ${q}`})}M.length||R.push({key:"Order Book Position",value:"No similar offers; this would be the first"})}let G,Z;if(this.weWantCurrency()===Re.XRP_CURRENCY){if(!this.weWantAmount())throw new Error("weWantAmount() is required for XRP");G=Eo.xrpToDrops(this.weWantAmount())}else{if(!this.weWantAmount()||!this.weWantIssuer())throw new Error("weWantAmount() and weWantIssuerField are required for token");G={currency:this.utilsService.encodeIfNeeded(this.weWantCurrency()),issuer:this.weWantIssuer(),value:this.weWantAmount()}}if(this.weSpendCurrency()===Re.XRP_CURRENCY){if(!this.weSpendAmount())throw new Error("weSpendAmount() is required for XRP");Z=Eo.xrpToDrops(this.weSpendAmount())}else{if(!this.weSpendAmount()||!this.weSpendIssuer())throw new Error("weSpendAmount() and weSpendIssuerField are required for token");Z={currency:this.utilsService.encodeIfNeeded(this.weSpendCurrency()),issuer:this.weSpendIssuer(),value:this.weSpendAmount()}}let K=0;this.isMarketOrder()?K|=B1.OfferCreateFlags.tfImmediateOrCancel:this.isFillOrKill()?K|=B1.OfferCreateFlags.tfFillOrKill:K|=B1.OfferCreateFlags.tfPassive;let C=yield this.xrplService.getLastLedgerIndex(t),A={TransactionType:"OfferCreate",Account:e.classicAddress,TakerGets:Z,TakerPays:G,Flags:K,LastLedgerSequence:C+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,A,e,i,"createOffer");let I=yield this.txExecutor.createOffer(A,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!I.success)return this.txUiService.setError(`${I.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Offer creation successfully!":"Offer created successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in createPffer:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}cancelOffer(){return z(this,null,function*(){yield this.withPerf("cancelOffer",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();let t=this.offerSequenceField().split(",").map(e=>e.trim()).filter(e=>e!=="");try{let[e,i]=yield Promise.all([this.xrplService.getClient(),this.getWallet()]),[r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(e,i.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(e),this.xrplService.getLastLedgerIndex(e),this.xrplService.getXrplServerInfo(e,"current","")]);this.utilsService.logAccountInfoObjects(r,null),this.utilsService.logLedgerObjects(o,s,a);let l=0,c=this.offerSequenceField().length,d=this.txUiService.isSimulateEnabled();this.txUiService.showSpinnerWithDelay(d?`Simulating deletion of ${c} offers(s)...`:`Deleting ${c} offers(s)...`,200);let u=[],h=[];for(let f=0;f<t.length;f++){let p=t[f],y=d?`Simulating offer ${f+1}/${c}...`:`Cancel offer ${f+1}/${c}...`;this.txUiService.updateSpinnerMessage(y);let v=yield this.xrplService.getLastLedgerIndex(e),b={TransactionType:"OfferCancel",Account:i.classicAddress,OfferSequence:Number(p),LastLedgerSequence:v+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(e,b,i,r,"cancelOffer");let S=yield this.txExecutor.offerCancel(b,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds(),suppressIndividualFeedback:!0,customSpinnerMessage:y});if(S.success)l++,h.push(S.hash);else{this.txUiService.setError(`${S.error}`);return}}if(l>0&&(h.forEach(f=>this.txUiService.addTxHashSignal(f)),this.utilsService.setSuccess(this.utilsService.result),this.txUiService.successMessage=d?`Simulated cancel of ${l} offer(s) successfully!`:`${l} offer(s) cancelled successfully!`),u.length){let f=u.map(y=>`<code>${y}</code>`).join(", "),p=u.length>1?"s":"";this.txUiService.setWarning(`Offer${p} ${f} do${p?"":"es"} not exist on this account.`)}else this.txUiService.clearWarning();this.txUiService.isSimulateEnabled()||(yield this.refreshAfterTx(e,i,null,!0))}catch(e){console.error("Error in cancelOFfer:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}decodeOfferFlags(t){let e=[];return(t&65536)!==0&&e.push("tfPassive"),(t&131072)!==0&&e.push("tfImmediateOrCancel"),(t&262144)!==0&&e.push("tfFillOrKill"),(t&524288)!==0&&e.push("tfSell"),e.length?e:["None"]}getExistingOffers(t,e){let i=(t.result.account_objects??[]).filter(o=>o.LedgerEntryType==="Offer"&&o.Account===e);this.offersArray.set(i.map(o=>o.Sequence));let r=i.map(o=>{let s=null,a=o.TakerGets,l="0",c="",d="",u=null,h=o.TakerPays,f="0",p="",y="";return typeof a=="string"?(l=String(Eo.dropsToXrp(a)),s=l.trim()):a?.value&&(l=a.value,d=a.issuer,c=this.utilsService.normalizeCurrencyCode(a.currency),s=`${l} ${c} ${d}`),typeof h=="string"?(f=String(Eo.dropsToXrp(h)),u=f.trim()):h?.value&&(f=h.value,y=h.issuer,p=this.utilsService.normalizeCurrencyCode(h.currency),u=`${f} ${p} ${y}`),{LedgerEntryType:o.LedgerEntryType,Account:o.Account,TakerGets:s,TakerPays:u,Flags:o.Flags,BookDirectory:o.BookDirectory,TxHash:o.index,Sequence:o.Sequence}});return this.existingOffers.set(r),this.utilsService.logObjects("mapped",r),this.utilsService.logObjects("existingOffers",this.existingOffers()),this.utilsService.logObjects("offersArray (sequences)",this.offersArray()),this.existingOffers()}invertOrder(){let t=this.weWantCurrency(),e=this.weWantIssuer(),i=this.weWantAmount();this.weWantCurrency.set(this.weSpendCurrency()),this.weSpendCurrency.set(t),this.weWantIssuer.set(this.weSpendIssuer()),this.weSpendIssuer.set(e),this.onWeWantCurrencyChange(),this.onWeSpendCurrencyChange(),this.weSpendAmount.set(i||""),this.weSpendAmount()&&this.updateTokenBalanceAndExchange()}computeBidAskSpread(t,e){let i=0;if(t.length>0){let c=t[0].TakerGets.value?parseFloat(t[0].TakerGets.value):parseFloat(t[0].TakerGets)/1e6,d=t[0].TakerPays.value?parseFloat(t[0].TakerPays.value):parseFloat(t[0].TakerPays)/1e6;i=c/d}let r=0;if(e.length>0){let c=e[0].TakerGets.value?parseFloat(e[0].TakerGets.value):parseFloat(e[0].TakerGets)/1e6,d=e[0].TakerPays.value?parseFloat(e[0].TakerPays.value):parseFloat(e[0].TakerPays)/1e6;r=c/d}let o=r>0?1/r:0,s=i>0&&r>0?Math.abs(i-o):0,a=i>0&&r>0?(i+o)/2:0,l=a>0?s/a*100:0;return{spread:s,spreadPercent:l,bestTokenXrp:i,bestXrpToken:r}}computeLiquidityRatio(t,e,i=!0){let r=0;t.length>0&&(r=t.reduce((a,l)=>a+(typeof l.TakerGets=="object"&&"value"in l.TakerGets&&l.TakerGets.value?parseFloat(l.TakerGets.value):parseFloat(typeof l.TakerGets=="string"?l.TakerGets:"")/1e6),0));let o=0;e.length>0&&(o=e.reduce((a,l)=>a+(typeof l.TakerGets=="object"&&"value"in l.TakerGets&&l.TakerGets.value?parseFloat(l.TakerGets.value):parseFloat(typeof l.TakerGets=="string"?l.TakerGets:"")/1e6),0));let s=i?o>0?r/o:0:r>0?o/r:0;return{tokenVolume:r,xrpVolume:o,ratio:s}}computeAverageExchangeRateBothWays(t,e=15){let i=0,r=0,o=[],s=[],a=1/0;t.forEach(x=>{let k=typeof x.TakerGets=="string"?parseFloat(x.TakerGets)/1e6:parseFloat(x.TakerGets.value),L=typeof x.TakerPays=="string"?parseFloat(x.TakerPays)/1e6:parseFloat(x.TakerPays.value);k>0&&L>0&&(i+=L,r+=k,o.push(k/L),s.push(L/k),a=Math.min(a,L/k))});let c=a*1.05,d=0,u=0;t.forEach(x=>{let k=typeof x.TakerGets=="string"?parseFloat(x.TakerGets)/1e6:parseFloat(x.TakerGets.value),L=typeof x.TakerPays=="string"?parseFloat(x.TakerPays)/1e6:parseFloat(x.TakerPays.value);L/k<=c&&(d+=k,u+=L)});let h=0,f=0,p=e,y=!1;for(let x of t){let k=typeof x.TakerGets=="string"?parseFloat(x.TakerGets)/1e6:parseFloat(x.TakerGets.value),L=typeof x.TakerPays=="string"?parseFloat(x.TakerPays)/1e6:parseFloat(x.TakerPays.value),D=Math.min(p,L);if(D>0&&(h+=D/L*k,f+=D,p-=D),p<=0)break}p>0&&(y=!0);let v=o.length>0?o.reduce((x,k)=>x+k,0)/o.length:0,b=o.length>0?o.reduce((x,k)=>x+Math.pow(k-v,2),0)/o.length:0,S=Math.sqrt(b);return{forward:{vwap:i>0?r/i:0,simpleAvg:v,bestRate:o.length>0?Math.max(...o):0,worstRate:o.length>0?Math.min(...o):0,depthDOG:d,depthXRP:u,executionPrice:f>0?h/f:0,executionDOG:h,executionXRP:f,insufficientLiquidity:y,volatility:S,volatilityPercent:v>0?S/v*100:0},inverse:{vwap:r>0?i/r:0,simpleAvg:s.length>0?s.reduce((x,k)=>x+k,0)/s.length:0,bestRate:s.length>0?Math.max(...s):0,worstRate:s.length>0?Math.min(...s):0}}}calculateEffectiveRate(t,e,i){let r=new pr(t),s=new pr(e.ownerReserve).dividedBy(new pr(10).pow(6)).dividedBy(r),a=i==="buy"?new pr(1).plus(s):new pr(1).minus(s);return r.multipliedBy(a)}populateStatsFields(t,e,i,r,o,s){let a=document.getElementById("orderBookDirectionField");a&&(a.value=`${e.currency}/${i.currency}`);let l=document.getElementById("vwapField");l&&(l.value=t.forward.vwap.toFixed(8));let c=document.getElementById("simpleAverageField");c&&(c.value=t.forward.simpleAvg.toFixed(8));let d=document.getElementById("bestRateField");d&&(d.value=t.forward.bestRate.toFixed(8));let u=document.getElementById("worstRateField");u&&(u.value=t.forward.worstRate.toFixed(8));let h=document.getElementById("depthField");h&&(h.value=`${t.forward.depthDOG.toFixed(2)} ${e.currency} for ${t.forward.depthXRP.toFixed(2)} ${i.currency}`);let f=document.getElementById("liquidityField"),p=document.getElementById("averageRateField");t.forward.insufficientLiquidity?(f&&(f.value=`15 ${i.currency}: Insufficient liquidity (only ${t.forward.executionDOG.toFixed(2)} ${e.currency} for ${t.forward.executionXRP.toFixed(2)} ${i.currency} available)`),p&&(p.value=`${t.forward.executionPrice.toFixed(8)} ${e.currency}/${i.currency}`)):(f&&(f.value=`15 ${i.currency} for ${t.forward.executionDOG.toFixed(2)} ${e.currency}`),p&&(p.value=`${t.forward.executionPrice.toFixed(8)} ${e.currency}/${i.currency}`));let y=document.getElementById("liquidityRatioField");y&&(y.value=`${o.ratio.toFixed(2)} (${e.currency}/${i.currency} vs ${i.currency}/${e.currency})`);let v=document.getElementById("priceVolatilityField");v&&(v.value=`${t.forward.simpleAvg.toFixed(8)} ${e.currency}/${i.currency}`);let b=document.getElementById("stdDeviationField");b&&(b.value=`${t.forward.volatility.toFixed(8)} (${t.forward.volatilityPercent.toFixed(2)}%)`);let S=document.getElementById("spreadField");s==="buy"?S&&(S.value=`${r.spread.toFixed(8)} ${e.currency}/${i.currency} (${r.spreadPercent.toFixed(2)}%)`):S&&(S.value=`${r.spread.toFixed(8)} ${i.currency}/${e.currency} (${r.spreadPercent.toFixed(2)}%)`)}createAmmRequest(t,e){return{command:"amm_info",asset:this.isTokenAmount(t)?{currency:t.currency,issuer:t.issuer}:{currency:"XRP"},asset2:this.isTokenAmount(e)?{currency:e.currency,issuer:e.issuer}:{currency:"XRP"}}}isTokenAmount(t){return t.currency!=="XRP"}formatCurrencyAmount(t){return typeof t=="string"?`${Eo.dropsToXrp(t)} XRP`:"issuer"in t?`${t.value} ${t.currency} (${t.issuer})`:`${t.value} XRP`}normalizeAmount=t=>typeof t=="string"?/^\d+$/.test(t)?Eo.dropsToXrp(t):t:t.value;calculateRate(t,e){let i=this.normalizeAmount(t),r=this.normalizeAmount(e);return new pr(r).dividedBy(i).toFixed(15)}updateTokenBalanceAndExchangeReverse(){return z(this,null,function*(){console.log("Entering updateTokenBalanceAndExchangeReverse");let t=Date.now();if(this.txUiService.clearMessages(),this.txUiService.updateSpinnerMessage(""),!this.weWantAmount()||parseFloat(this.weWantAmount())<=0){this.weSpendAmount.set("0");return}this.txUiService.spinner.set(!0),this.txUiService.showSpinnerWithDelay("Calculating required amount...",500);try{let e=yield this.xrplService.getClient(),i=yield this.utilsService.getWalletFromAddress(this.currentWallet().address),r=this.weWantCurrency()==="XRP"?{currency:"XRP",value:this.weWantAmount()}:{currency:this.weWantCurrency().length>3?this.utilsService.encodeCurrencyCode(this.weWantCurrency()):this.weWantCurrency(),issuer:this.weWantIssuer(),value:this.weWantAmount()},o=this.weSpendCurrency()==="XRP"?{currency:"XRP",value:"0"}:{currency:this.weSpendCurrency().length>3?this.utilsService.encodeCurrencyCode(this.weSpendCurrency()):this.weSpendCurrency(),issuer:this.weSpendIssuer(),value:"0"},[s,a]=yield Promise.all([e.request({command:"book_offers",taker_gets:r,taker_pays:o,limit:400,ledger_index:"current",taker:i.classicAddress}),e.request({command:"amm_info",asset:this.weSpendCurrency()==="XRP"?{currency:"XRP"}:{currency:o.currency,issuer:o.issuer},asset2:this.weWantCurrency()==="XRP"?{currency:"XRP"}:{currency:r.currency,issuer:o.issuer}}).catch(()=>null)]),l=[...s.result.offers];if(a?.result?.amm){let u=a.result.amm,h=x=>typeof x=="string"?x:x.value,f=h(u.amount),p=h(u.amount2),y,v;this.weWantCurrency()==="XRP"?(y=typeof u.amount2=="string"?Eo.dropsToXrp(p):p,v=typeof u.amount=="string"?Eo.dropsToXrp(f):f):(y=typeof u.amount=="string"?Eo.dropsToXrp(f):f,v=typeof u.amount2=="string"?Eo.dropsToXrp(p):p);let b=new pr(v).dividedBy(y),S={TakerGets:y,TakerPays:v,isAMM:!0,rate:b};l.push(S)}l.sort((u,h)=>{let f=new pr(this.normalizeAmount(u.TakerPays)).dividedBy(this.normalizeAmount(u.TakerGets)),p=new pr(this.normalizeAmount(h.TakerPays)).dividedBy(this.normalizeAmount(h.TakerGets));return f.minus(p).toNumber()});let c=new pr(this.weWantAmount()),d=new pr(0);for(let u of l){if(c.lte(0))break;let h=new pr(this.normalizeAmount(u.TakerGets)),f=new pr(this.normalizeAmount(u.TakerPays));if(h.isZero())continue;let p=f.dividedBy(h),y=pr.min(c,h),v=y.multipliedBy(p);d=d.plus(v),c=c.minus(y)}this.weSpendAmount.set(d.toFixed(8)),this.insufficientLiquidityWarning.set(c.gt(0))}catch(e){console.error("Error in updateTokenBalanceAndExchangeReverse:",e),this.txUiService.setError(`${e.message||"Unknown error"}`),this.weSpendAmount.set("0")}finally{this.txUiService.spinner.set(!1);let e=(Date.now()-t).toString();console.log(`Leaving updateTokenBalanceAndExchangeReverse in ${e}ms`)}})}updateTokenBalanceAndExchange(){return z(this,null,function*(){console.log("Entering updateTokenBalanceAndExchange");let t=Date.now();if(this.txUiService.clearMessages(),this.txUiService.updateSpinnerMessage(""),!this.weSpendAmount()||parseFloat(this.weSpendAmount())<=0){this.weWantAmount.set("0");return}this.txUiService.spinner.set(!0),this.txUiService.showSpinnerWithDelay("Calculating best rate...",500);try{let e=yield this.xrplService.getClient(),i=yield this.utilsService.getWalletFromAddress(this.currentWallet().address),r=this.weWantCurrency()==="XRP"?{currency:"XRP",value:"0"}:{currency:this.weWantCurrency().length>3?this.utilsService.encodeCurrencyCode(this.weWantCurrency()):this.weWantCurrency(),issuer:this.weWantIssuer(),value:"0"},o=this.weSpendCurrency()==="XRP"?{currency:"XRP",value:this.weSpendAmount()}:{currency:this.weSpendCurrency().length>3?this.utilsService.encodeCurrencyCode(this.weSpendCurrency()):this.weSpendCurrency(),issuer:this.weSpendIssuer(),value:this.weSpendAmount()},[s,a]=yield Promise.all([e.request({command:"book_offers",taker_gets:r,taker_pays:o,limit:400,ledger_index:"current",taker:i.classicAddress}),e.request({command:"amm_info",asset:"currency"in o&&o.currency!=="XRP"?o:{currency:"XRP"},asset2:"currency"in r&&r.currency!=="XRP"?r:{currency:"XRP"}}).catch(()=>null)]),l=[...s.result.offers];if(a?.result?.amm){let u=a.result.amm,h=S=>typeof S=="string"?S:S.value,f=h(u.amount),p=h(u.amount2),y=typeof u.amount=="string"?f:p,v=typeof u.amount=="string"?p:f;typeof u.amount=="string"&&(y=Eo.dropsToXrp(y)),typeof u.amount2=="string"&&(y=Eo.dropsToXrp(y));let b={TakerGets:typeof u.amount=="string"?{currency:r.currency,issuer:r.issuer,value:v}:f,TakerPays:typeof u.amount=="string"?p:{currency:"XRP",value:y},isAMM:!0,rate:new pr(v).dividedBy(y)};l.push(b)}l.sort((u,h)=>{let f=new pr(this.normalizeAmount(u.TakerGets)).dividedBy(this.normalizeAmount(u.TakerPays)),p=new pr(this.normalizeAmount(h.TakerGets)).dividedBy(this.normalizeAmount(h.TakerPays));return f.minus(p).toNumber()});let c=new pr(this.weSpendAmount()),d=new pr(0);for(let u of l){if(c.lte(0))break;let h=new pr(this.normalizeAmount(u.TakerPays)),f=new pr(this.normalizeAmount(u.TakerGets));if(h.isZero())continue;let p=pr.min(c,h),y=p.multipliedBy(f).dividedBy(h);d=d.plus(y),c=c.minus(p)}this.weWantAmount.set(d.toFixed(8)),this.insufficientLiquidityWarning.set(c.gt(0))}catch(e){console.error("Error in updateTokenBalanceAndExchange:",e),this.txUiService.setError(`${e.message||"Unknown error"}`),this.weWantAmount.set("0")}finally{this.txUiService.spinner.set(!1);let e=(Date.now()-t).toString();console.log(`Leaving updateTokenBalanceAndExchange in ${e}ms`)}})}onWeSpendAmountChange(){clearTimeout(this.amountTimeout()),this.amountTimeout.set(setTimeout(()=>{this.updateTokenBalanceAndExchange()},400))}onWeWantAmountChange(){clearTimeout(this.amountTimeout()),this.amountTimeout.set(setTimeout(()=>{this.updateTokenBalanceAndExchangeReverse()},400))}toggleFlag(t){this.flags[t]=!this.flags[t],this.updateFlagTotal()}updateFlagTotal(){let t=0;this.flags.tfPassive&&(t|=this.flagValues.tfPassive),this.flags.tfImmediateOrCancel&&(t|=this.flagValues.tfImmediateOrCancel),this.flags.tfFillOrKill&&(t|=this.flagValues.tfFillOrKill),this.totalFlagsValue.set(t),this.totalFlagsHex.set("0x"+t.toString(16).toUpperCase().padStart(8,"0"))}getFlagsValue(t){let e=0;return t.tfPassive&&(e|=B1.OfferCreateFlags.tfPassive),t.tfImmediateOrCancel&&(e|=B1.OfferCreateFlags.tfImmediateOrCancel),t.tfFillOrKill&&(e|=B1.OfferCreateFlags.tfFillOrKill),e}updateDeleteTicketSequence(){this.multiSelectMode()?this.offerSequenceField.set(this.selectedTickets.join(",")):this.offerSequenceField.set(this.selectedSingleTicket()||"")}clearCancelOfferSequence(){this.multiSelectMode()||(this.offerSequenceField.set(""),this.selectedSingleTicket.set(""))}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(o==="createOffer"||o==="cancelOffer"){if(this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())}})}clearFields(){this.weSpendAmount.set(""),this.weWantAmount.set(""),this.isMarketOrder.set(!1),this.isPassive.set(!1),this.isFillOrKill.set(!1)}onOrderTypeChange(t){switch(this.isPassive.set(!1),this.isMarketOrder.set(!1),this.isFillOrKill.set(!1),t){case"passive":this.isPassive.set(!0);break;case"marketOrder":this.isMarketOrder.set(!0);break;case"fillOrKill":this.isFillOrKill.set(!0);break}}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),yield this.offerCurrency.refreshBothBalances(this.currentWallet()),this.getExistingOffers(s,e.classicAddress),yield this.getOffers(!0,!1),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}toXRPLCurrency(t,e){return t==="XRP"?{currency:"XRP"}:{currency:t,issuer:e}}toCurrency(t,e){return t==="XRP"?{currency:"XRP"}:{currency:t,issuer:e}}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}addNewDestinationFromUser(t){t&&Eo.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}setSlippage(t){this.slippage.set(t),this.updateTokenBalanceAndExchange()}copyOfferHash(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Offer Hash copied!")})}onWeWantIssuerSelected(t){let e=t?.id||"";this.weWantIssuer.set(e),this.offerCurrency.selectWeWantIssuer(e,this.currentWallet()),this.ammInfoTrigger.next()}onWeSpendIssuerSelected(t){let e=t?.id||"";this.weSpendIssuer.set(e),this.offerCurrency.selectWeSpendIssuer(e,this.currentWallet()),this.ammInfoTrigger.next()}onWeWantCurrencySelected(t){let e=t?.id||"XRP";this.weWantCurrency.set(e),this.offerCurrency.selectWeWantCurrency(e,this.currentWallet()),this.ammInfoTrigger.next()}onWeSpendCurrencySelected(t){let e=t?.id||"XRP";this.weSpendCurrency.set(e),this.offerCurrency.selectWeSpendCurrency(e,this.currentWallet()),this.ammInfoTrigger.next()}onWeWantCurrencyChange(){return z(this,null,function*(){this.offerCurrency.selectWeWantCurrency(this.weWantCurrency(),this.currentWallet()),this.ammInfoTrigger.next()})}onWeSpendCurrencyChange(){return z(this,null,function*(){this.offerCurrency.selectWeSpendCurrency(this.weSpendCurrency(),this.currentWallet()),this.ammInfoTrigger.next()})}get safeWarningMessage(){return this.txUiService.warningMessage?.replace(/</g,"&lt;").replace(/>/g,"&gt;")}openOfferDropdown(){if(this.offerOverlayRef?.hasAttached())return;this.offerDropdownInput?.nativeElement||(console.warn("offerDropdownInput not ready"),this.cdr.detectChanges());let t=this.offerDropdownInput?.nativeElement;if(!t)return;if(!this.offerDropdownTemplate){console.warn("offerDropdownTemplate not available yet");return}let e=this.overlay.position().flexibleConnectedTo(t).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:4},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-4}]);this.offerOverlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",positionStrategy:e,scrollStrategy:this.overlay.scrollStrategies.reposition(),width:t.getBoundingClientRect().width}),this.offerOverlayRef.attach(new Lc(this.offerDropdownTemplate,this.viewContainerRef)),this.offerOverlayRef.backdropClick().subscribe(()=>this.closeOfferDropdown()),this.highlightedOfferIndex.set(-1)}closeOfferDropdown(){this.offerOverlayRef?.dispose(),this.offerOverlayRef=null,this.isOfferDropdownOpen.set(!1)}toggleOfferDropdown(){this.offerOverlayRef?.hasAttached()?this.closeOfferDropdown():this.openOfferDropdown()}convertToString(t){return t.toString()}toggleOfferSelection(t){let e=t.Sequence;this.selectedOfferSequences.update(i=>i.includes(e)?i.filter(r=>r!==e):[...i,e])}toggleSelectAllOffers(){this.allOffersSelected()?this.selectedOfferSequences.set([]):this.selectedOfferSequences.set(this.existingOffers().map(t=>t.Sequence))}allOffersSelected=_e(()=>{let t=this.selectedOfferSequences(),e=this.existingOffers().length;return t.length===e&&e>0});selectedOffers=_e(()=>{let t=this.selectedOfferSequences();return this.existingOffers().filter(e=>t.includes(e.Sequence))});clearAllOfferSelections(){this.selectedOfferSequences.set([])}onOfferSearchInput(t){let e=t.target.value;this.offerSearchQuery.set(e)}clearAllSelections(){this.selectedOfferSequences.set([])}onOffersSearchInput(t){let e=t.target.value;this.offerSearchQuery.set(e)}onOfferKeyDown(t){let e=this.filteredOffers();if(e.length===0)return;let i=this.highlightedOfferIndex();if(t.key==="ArrowDown")t.preventDefault(),i=i<e.length-1?i+1:i;else if(t.key==="ArrowUp")t.preventDefault(),i=i>=0?i-1:e.length-1;else if(t.key==="Enter"&&i>=0){t.preventDefault(),this.toggleOfferSelection(e[i]);return}else if(t.key==="Escape"){this.closeOfferDropdown();return}else return;this.highlightedOfferIndex.set(i),setTimeout(()=>{document.querySelector(".offer-item.highlighted")?.scrollIntoView({block:"nearest",behavior:"smooth"})})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-offer"]],viewQuery:function(e,i){if(e&1&&(Et(RYe,5,Kt),Et(OYe,5)),e&2){let r;_t(r=bt())&&(i.offerDropdownInput=r.first),_t(r=bt())&&(i.offerDropdownTemplate=r.first)}},features:[Lt],decls:37,vars:21,consts:[["theForm","ngForm"],["itemTemplate",""],["offerDropdownInput",""],["offerDropdownTemplate",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn",3,"click"],["name","heroCurrencyDollar","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroCurrencyDollar","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin-top","12px","font-size","0.9em","line-height","1.7"],[2,"padding-left","22px","margin","0"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View Offer on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[2,"color","#555","font-size","0.88em"],[2,"font-size","0.95em"],["title","Copy Offer Index",1,"copy-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-row"],[1,"form-group"],["tooltip-data","Taker Gets.",1,"tooltip"],["for","weWantCurrencyField"],["tooltip-data","Taker Pays.",1,"tooltip"],["for","weSpendCurrencyField"],["for","weWantCurrency"],[1,"form-hint"],["placeholder","Search currency code...","emptyMessage","No currencies available",3,"valueChange","items","value","showShortAddress"],["for","weSpendCurrency"],["for","weWantIssuer"],["placeholder","Search issuer address or name...","emptyMessage","No issuers available for this currency",3,"valueChange","items","value","showShortAddress"],[1,"flex","items-center","gap-2"],[1,"text-yellow-500","font-bold"],[1,"text-xs","text-gray-500"],[1,"flex","flex-col"],[1,"font-medium"],["type","text","name","weWantAmountField","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["type","text","name","weSpendAmount","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["type","text","readonly","","name","weWantTokenBalanceField",3,"value"],["type","text","readonly","","name","weSpendTokenBalanceField",3,"value"],[1,"token-flags-header",2,"margin-top","0.8em","margin-bottom","0.5em"],["name","flag","size","20"],[1,"token-flags-title"],[1,"form-row-account-flags"],[1,"flag-item-account-flags",3,"enabled"],[1,"flag-item-account-flags"],[1,"flags-total"],[1,"total-label"],[1,"total-value"],[1,"flag-item-account-flags",3,"click"],[1,"flag-header-account"],["type","checkbox",1,"flag-checkbox",3,"id","name","checked"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"flag-icon"],["d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0L3 7m1.582 2H12"],[1,"flag-title-account-flags"],[1,"flag-value"],[1,"flag-desc"],[1,"form-row",2,"margin-bottom","1.2em"],[1,"combobox-container",3,"clickOutside"],["type","text","autocomplete","off",1,"combobox-input",3,"input","focus","keydown","value","placeholder"],["type","button",1,"combobox-toggle",3,"click"],["name","chevron-down","size","18"],[1,"offer-container"],[1,"offer-list"],[1,"offer-item"],[1,"offer-footer"],["type","button",1,"clear-btn",3,"click"],[1,"offer-sequence"],["type","button","aria-label","Remove offer",1,"offer-remove",3,"click"],["name","heroXCircle","size","16","color","red"],[1,"combobox-wrapper",3,"click"],[1,"combobox-dropdown-overlay","offer-dropdown",2,"max-height","340px","overflow-y","auto","padding","8px 0"],[1,"dropdown-header",2,"display","flex","justify-content","space-between","align-items","center","padding","8px 16px","border-bottom","1px solid #e5e7eb","background","#f9fafb"],[1,"checkbox-label",2,"display","flex","align-items","center","gap","8px","font-weight","600","color","#374151","cursor","pointer"],["type","checkbox",2,"width","16px","height","16px",3,"change","checked"],[1,"clear-btn",2,"color","#dc2626","font-size","0.875rem","font-weight","500","background","none","border","none","cursor","pointer","opacity","0.8",3,"click","disabled"],[1,"combobox-item","offer-item",2,"display","flex","align-items","center","gap","10px","padding","10px 16px","cursor","pointer","user-select","none",3,"highlighted"],[1,"combobox-empty",2,"padding","16px","text-align","center","color","#6b7280"],[1,"combobox-item","offer-item",2,"display","flex","align-items","center","gap","10px","padding","10px 16px","cursor","pointer","user-select","none",3,"mouseenter"],["type","checkbox",2,"width","16px","height","16px","cursor","pointer",3,"change","checked"],[1,"offer-sequence",2,"font-family","monospace","font-size","0.95em","color","#1f2937"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",4),ee(1,"app-navbar"),m(2,"main",5)(3,"div",6)(4,"div",7)(5,"app-wallet-panel",8),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",9)(7,"div",10)(8,"button",11),X("click",function(){return U(r),j(i.setTab("createOffer"))}),ee(9,"ng-icon",12),w(10," Create Offer "),g(),m(11,"button",11),X("click",function(){return U(r),j(i.setTab("getOrderBook"))}),ee(12,"ng-icon",12),w(13," Get Order Book "),g(),m(14,"button",11),X("click",function(){return U(r),j(i.setTab("cancelOffer"))}),ee(15,"ng-icon",13),w(16," Cancel Offer "),g()(),Q(17,UYe,9,0,"div"),Q(18,jYe,9,0,"div"),Q(19,HYe,9,0,"div"),Q(20,fZe,13,4,"div",14),Q(21,pZe,3,1,"div",15),m(22,"form",16,0)(24,"div")(25,"div",17)(26,"div",18),Q(27,MZe,45,14),Q(28,FZe,14,3),g()(),ee(29,"app-transaction-options",19),m(30,"div",20),Q(31,PZe,4,4)(32,LZe,4,4)(33,RZe,4,2),g(),m(34,"div",21)(35,"input",22),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(36,"app-transaction-preview"),g()()()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="createOffer"),_(3),Ue("active",i.activeTab()==="getOrderBook"),_(3),Ue("active",i.activeTab()==="cancelOffer"),_(3),J(i.activeTab()==="createOffer"?17:-1),_(),J(i.activeTab()==="getOrderBook"?18:-1),_(),J(i.activeTab()==="cancelOffer"?19:-1),_(),J((r=i.infoData())?20:-1,r),_(),J(i.txUiService.warningMessage?21:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()!=="cancelOffer"?27:-1),_(),J(i.activeTab()==="cancelOffer"&&i.existingOffers().length>0?28:-1),_(),oe("showWhenTab",Ei(20,NYe))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="createOffer"?31:i.activeTab()==="getOrderBook"?32:i.activeTab()==="cancelOffer"?33:-1),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,$r,Bi,zi],styles:[".offer-dropdown[_ngcontent-%COMP%]{background:#fff;border:1px solid #d1d5db;border-radius:8px;box-shadow:0 10px 25px -5px #0000001a,0 4px 6px -2px #0000000d;font-size:.95rem}.offer-item[_ngcontent-%COMP%]{transition:background-color .15s ease}.offer-item[_ngcontent-%COMP%]:hover, .offer-item.highlighted[_ngcontent-%COMP%]{background-color:#f3f4f6!important}.offer-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{accent-color:#3b82f6;border-radius:4px}.combobox-input[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:-2px}.selected-count-badge[_ngcontent-%COMP%]{position:absolute;right:40px;top:50%;transform:translateY(-65%);background:#e0f2fe;color:#0c4a6e;font-size:.75rem;font-weight:600;padding:2px 8px;border-radius:12px;pointer-events:none}.selected-offers-chips[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.offer-container[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:20px;padding:12px;border:1px solid #e5e7eb;border-radius:8px;background:#fafafa}.offer-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.offer-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;border:1px solid #e2e8f0;background:#fff;border-radius:6px;transition:background .15s ease}.offer-item[_ngcontent-%COMP%]:hover{background:#f8fafc}.offer-number[_ngcontent-%COMP%]{font-weight:500;color:#1e293b;font-size:.95rem}.offer-remove[_ngcontent-%COMP%]{border:none;background:transparent;padding:2px;cursor:pointer;border-radius:4px}.offer-remove[_ngcontent-%COMP%]:hover   ng-icon[_ngcontent-%COMP%]{stroke:#dc2626}.offer-footer[_ngcontent-%COMP%]{margin-top:12px;display:flex;justify-content:space-between;align-items:center}.offer-count[_ngcontent-%COMP%]{color:#0c4a6e;font-size:.9rem}.clear-btn[_ngcontent-%COMP%]{padding:4px 10px;border-radius:6px;font-size:.85rem;border:none;background:#ef4444;color:#fff;cursor:pointer;transition:background .15s ease}.clear-btn[_ngcontent-%COMP%]:hover{background:#dc2626}"],data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var Fd=_i(Ki());var OZe=()=>["create","burn","updateNFTMetadata"],NZe=(n,t)=>t.id;function BZe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",28),ee(3,"ng-icon",29),g(),m(4,"div")(5,"h2",30),w(6,"Create NFT"),g(),m(7,"p",31),w(8,"Create NFT for the selected account."),g()()()())}function VZe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",32),ee(3,"ng-icon",33),g(),m(4,"div")(5,"h2",30),w(6,"Burn NFT"),g(),m(7,"p",31),w(8,"Burn NFT for the selected account."),g()()()())}function UZe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",34),ee(3,"ng-icon",35),g(),m(4,"div")(5,"h2",30),w(6,"Modify NFT Meta Data"),g(),m(7,"p",31),w(8,"Modify NFT Meta Data for the selected NFT"),g()()()())}function jZe(n,t){n&1&&w(0," has no NFTs. ")}function HZe(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3)),n&2){let e=E();_(2),Ee(e.nftCount),_(),je(" NFT",e.nftCount===1?"":"s",". ")}}function WZe(n,t){if(n&1&&(m(0,"div",40),ee(1,"span",42),w(2," on XRPL Win"),g()),n&2){let e=E();_(),oe("innerHTML",e.links,pn)}}function zZe(n,t){n&1&&w(0," Available NFTs ")}function qZe(n,t){n&1&&w(0," Burnable NFTs ")}function $Ze(n,t){n&1&&w(0," NFTs with Modifiable Metadata ")}function KZe(n,t){if(n&1&&(m(0,"span",51),w(1),g()),n&2){let e=E().$implicit;_(),ei("URI: ",e.uri.slice(0,12),"...",e.uri.slice(-10))}}function GZe(n,t){n&1&&(m(0,"span",51),w(1,"URI: N/A"),g())}function XZe(n,t){if(n&1){let e=ge();m(0,"li",48)(1,"app-tooltip-link",49)(2,"div",50),Q(3,KZe,2,2,"span",51)(4,GZe,2,0,"span",51),g(),m(5,"div",52)(6,"div"),w(7),g()()(),m(8,"button",53),X("click",function(r){let o=U(e).$implicit;return E(4).copyAndToast(o.id,"NFT ID"),j(r.stopPropagation())}),lt(),m(9,"svg",54),ee(10,"rect",55)(11,"path",56),g()()()}if(n&2){let e=t.$implicit,i=E(4);_(),oe("href",i.txUiService.explorerUrl()+"nft/"+e.id),_(2),J(e.uri?3:4),_(4),je("Flags: ",e.flags.length?e.flags:"None")}}function YZe(n,t){if(n&1&&(m(0,"ul",47),yn(1,XZe,12,3,"li",48,NZe),g()),n&2){let e=E(2);_(),vn(e.nftsToShow)}}function ZZe(n,t){if(n&1){let e=ge();m(0,"div",43),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",44)(2,"span"),Q(3,zZe,1,0)(4,qZe,1,0)(5,$Ze,1,0),w(6),g(),lt(),m(7,"svg",45),ee(8,"path",46),g()(),Q(9,YZe,3,0,"ul",47),g()}if(n&2){let e,i=E(),r=E();_(3),J((e=i.activeTab)==="create"?3:e==="burn"?4:e==="updateNFTMetadata"?5:-1),_(3),je(" (",i.nftCount,") "),_(),In("transform",r.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(r.infoPanelExpanded()?9:-1)}}function QZe(n,t){if(n&1&&(m(0,"div",13)(1,"div",36)(2,"div",37)(3,"div",38),ee(4,"ng-icon",39),m(5,"code"),w(6),g(),Q(7,jZe,1,0)(8,HZe,4,2),Q(9,WZe,3,1,"div",40),g(),Q(10,ZZe,10,5,"div",41),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.nftCount===0?7:8),_(2),J(e.links?9:-1),_(),J(e.nftCount>0?10:-1)}}function JZe(n,t){if(n&1&&(m(0,"div",14),ee(1,"ng-icon",57)(2,"div",58),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function eQe(n,t){if(n&1){let e=ge();m(0,"div",59)(1,"div",60)(2,"label"),w(3,"Taxon"),g(),m(4,"p",61),w(5," Indicates the taxon associated with this token. The taxon is generally a value chosen by the minter of the token "),ee(6,"br"),w(7," and a given taxon may be used for multiple tokens. "),g(),m(8,"input",62),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.taxonField,r)||(o.taxonField=r),j(r)}),g()()(),m(9,"div",59)(10,"div",60)(11,"label"),w(12,"Transfer Fee"),g(),m(13,"p",61),w(14," Specifies the fee charged by the issuer for secondary sales of the Token, if such sales are allowed. "),ee(15,"br"),w(16," Valid values for this field are between 0 and 50000 inclusive, allowing transfer rates between 0.000% and 50.000% in increments of 0.001%. "),g(),m(17,"input",63),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.transferFeeField,r)||(o.transferFeeField=r),j(r)}),g()()(),m(18,"div",59)(19,"div",60)(20,"label"),w(21,"URI"),g(),m(22,"p",61),w(23," URI that points to the data and/or metadata associated with the NFT. "),ee(24,"br"),w(25," The URI is NOT checked for validity, but the field is limited to a maximum length of 256 bytes. "),g(),m(26,"input",64),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.initialURIField,r)||(o.initialURIField=r),j(r)}),g()()(),m(27,"div",59)(28,"div",60)(29,"label"),w(30,"Amount"),g(),m(31,"p",61),w(32,"Indicates the amount expected for the Token."),g(),m(33,"input",65),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()(),m(34,"div",59)(35,"div",60)(36,"label"),w(37,"Nft Token Minter (opt)"),g(),m(38,"p",61),w(39," Indicates the account that should be the issuer of this token. This value is optional and should only be specified if the account "),ee(40,"br"),w(41," executing the transaction is not the `Issuer` of the `NFToken` object. "),g(),m(42,"input",66),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.nfTokenMinterAddress,r)||(o.nfTokenMinterAddress=r),j(r)}),g()()()}if(n&2){let e=E();_(8),Oe("ngModel",e.taxonField),_(9),Oe("ngModel",e.transferFeeField),_(9),Oe("ngModel",e.initialURIField),_(7),Oe("ngModel",e.amountField),_(9),Oe("ngModel",e.nfTokenMinterAddress)}}function tQe(n,t){if(n&1){let e=ge();m(0,"div",60)(1,"label"),w(2,"Select NFT"),g(),m(3,"p",61),w(4),g(),m(5,"app-select-search-dropdown",67),X("valueChange",function(r){U(e);let o=E();return j(o.onNftSelected(r))}),g()(),m(6,"div",68)(7,"div",60)(8,"label"),w(9,"Nft Token Id"),g(),m(10,"p",61),w(11,"NFT Token ID generated when the NFT was created."),g(),m(12,"input",69),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.nftIdField,r)||(o.nftIdField=r),j(r)}),g()()()}if(n&2){let e=E();_(4),je("Select an existing NFT to ",e.activeTab()==="burn"?"burn":"update","."),_(),oe("items",e.nftItems())("value",e.selectedNftItem()),_(7),Oe("ngModel",e.nftIdField)}}function nQe(n,t){if(n&1){let e=ge();m(0,"div",59)(1,"div",60)(2,"label"),w(3,"URI"),g(),m(4,"p",61),w(5,"URI that points to the data and/or metadata associated with the NFT. The URI is NOT checked for validity, but the field is limited to a maximum length of 256 bytes."),g(),m(6,"input",64),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.initialURIField,r)||(o.initialURIField=r),j(r)}),g()()(),m(7,"div",59)(8,"div",60)(9,"label"),w(10,"Owner"),g(),m(11,"p",61),w(12,"The NFT owner that created the NFT."),g(),m(13,"input",70),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.nftOwnerAddress,r)||(o.nftOwnerAddress=r),j(r)}),g()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.initialURIField),_(7),Oe("ngModel",e.nftOwnerAddress)}}function iQe(n,t){if(n&1){let e=ge();m(0,"div",78),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("burnableNft"))}),m(1,"div",79),ee(2,"input",80),lt(),m(3,"svg",81),ee(4,"path",82),g(),dn(),m(5,"span",83),w(6,"Burnable"),g()(),m(7,"div",84),w(8,"0x00000001 tfBurnable"),g(),m(9,"div",85),w(10,"The minted token may be burned by the issuer even if the issuer does not currently hold the token. The current holder of the token may always burn it."),g()()}if(n&2){let e=E(2);Ue("enabled",e.nftFlags.burnableNft),_(2),oe("checked",e.nftFlags.burnableNft)}}function rQe(n,t){if(n&1){let e=ge();m(0,"div",78),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("onlyXrpNft"))}),m(1,"div",86),ee(2,"input",87),lt(),m(3,"svg",81),ee(4,"path",82),g(),dn(),m(5,"span",83),w(6,"OnlyXRP"),g()(),m(7,"div",84),w(8,"0x00000002 tfOnlyXRP"),g(),m(9,"div",85),w(10,"Indicates that the token may only be offered or sold for XRP."),g()()}if(n&2){let e=E(2);Ue("enabled",e.nftFlags.onlyXrpNft),_(2),oe("checked",e.nftFlags.onlyXrpNft)}}function oQe(n,t){if(n&1){let e=ge();m(0,"div",88),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("trustLine"))}),m(1,"div",86),ee(2,"input",87),lt(),m(3,"svg",81),ee(4,"path",82),g(),dn(),m(5,"span",83),w(6,"TrustLine"),g()(),m(7,"div",84),w(8,"0x00000004 tfTrustLine"),g(),m(9,"div",85),w(10,"indicates that the issuer wants a trustline to be automatically created"),g()()}if(n&2){let e=E(2);Ue("enabled",e.nftFlags.trustLine),_(2),oe("checked",e.nftFlags.trustLine)}}function sQe(n,t){if(n&1){let e=ge();m(0,"div",88),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("transferableNft"))}),m(1,"div",86),ee(2,"input",87),lt(),m(3,"svg",81),ee(4,"path",82),g(),dn(),m(5,"span",83),w(6,"Transferable"),g()(),m(7,"div",84),w(8,"0x00000008 tfTransferable"),g(),m(9,"div",85),w(10,"Indicates that this NFT can be transferred. This flag has no effect if the token is being transferred from the issuer or to the issuer."),g()()}if(n&2){let e=E(2);Ue("enabled",e.nftFlags.transferableNft),_(2),oe("checked",e.nftFlags.transferableNft)}}function aQe(n,t){if(n&1){let e=ge();m(0,"div",88),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("mutableNft"))}),m(1,"div",86),ee(2,"input",87),lt(),m(3,"svg",81),ee(4,"path",82),g(),dn(),m(5,"span",83),w(6,"Mutable"),g()(),m(7,"div",84),w(8,"0x00000010 tfMutable"),g(),m(9,"div",85),w(10,"Indicates that this NFT's URI can be modified."),g()()}if(n&2){let e=E(2);Ue("enabled",e.nftFlags.mutableNft),_(2),oe("checked",e.nftFlags.mutableNft)}}function lQe(n,t){if(n&1&&(m(0,"div",77)(1,"span",89),w(2,"Total Flags Value:"),g(),m(3,"span",90),w(4),g()()),n&2){let e=E(2);_(4),ei("",e.totalFlagsValue()," (",e.totalFlagsHex(),")")}}function cQe(n,t){if(n&1&&(m(0,"div",18)(1,"div",71)(2,"div",72),ee(3,"lucide-icon",73),m(4,"span",74),w(5,"NFT Flags"),g()(),Q(6,iQe,11,3,"div",75),Q(7,rQe,11,3,"div",75),Q(8,oQe,11,3,"div",76),Q(9,sQe,11,3,"div",76),Q(10,aQe,11,3,"div",76),Q(11,lQe,5,2,"div",77),g()()),n&2){let e=E();_(6),J(e.activeTab()==="create"?6:-1),_(),J(e.activeTab()==="create"?7:-1),_(),J(e.activeTab()==="create"?8:-1),_(),J(e.activeTab()==="create"?9:-1),_(),J(e.activeTab()==="create"?10:-1),_(),J(e.activeTab()==="create"?11:-1)}}function dQe(n,t){if(n&1){let e=ge();m(0,"button",91),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.mintNFT())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create NFT")}}function uQe(n,t){if(n&1){let e=ge();m(0,"button",92),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.burnNFT())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Burn NFT")}}function hQe(n,t){if(n&1){let e=ge();m(0,"button",93),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.updateNFTMetadata())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Modify NFT Meta Data")}}var z8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("create");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");sourceTagField=P("");invoiceIdField=P("");currencyFieldDropDownValue=P("XRP");checkExpirationTime=P("seconds");issuerFields=P("");expirationTimeField=P("");ticketSequence=P("");checkIdField=P("");outstandingChecks=P("");mptIssuanceIdField=P("");isMptEnabled=P(!1);selectedWalletIndex=P(0);isTicketEnabled=P(!1);existingMpts=P([]);existingIOUs=P([]);existingMptsCollapsed=P(!0);outstandingIOUCollapsed=P(!0);metaDataField=P("");tokenCountField=P("");assetScaleField=P("");isdepositAuthAddress=P(!1);isMptFlagModeEnabled=P(!1);transferFeeField=P("");totalFlagsValue=P(0);totalFlagsHex=P("0x0");currencyBalanceField=P("0");gatewayBalance=P("0");knownTrustLinesIssuers=P({XRP:[]});issuerToRemove=P("");currencies=P([]);userAddedCurrencyFieldDropDownValue=P([]);userAddedissuerFields=P("");allKnownIssuers=P([]);storedIssuers=P([]);selectedIssuer=P("");newCurrency=P("");newIssuer=P("");tokenToRemove=P("");showTrustlineOptions=P(!1);issuers=P([]);lastCurrency=P("");lastIssuer=P("");trustlineFlags=le({},Re.TRUSTLINE.FLAGS);trustlineFlagList=Re.TRUSTLINE.FLAG_LIST;flagMap=Re.TRUSTLINE.FLAG_MAP;ledgerFlagMap=Re.TRUSTLINE.LEDGER_FLAG_MAP;showManageTokens=P(!1);encryptionType=P("");accountTrustlines=P([]);isUpdateMetaData=P(!1);isUpdateNFTMetaData=P(!1);isBatchModeEnabled=P(!1);isNftFlagModeEnabled=P(!1);isSubmitSignedTransactionEnabled=P(!1);isDestinationEnabled=P(!1);signedTransactionField=P("");isAuthorizedNFTokenMinter=P(!1);isNFTokenMinterEnabled=P(!1);nfTokenMinterAddress=P("");tickSize=P("");isMessageKey=P(!1);destinationFields=P("");newDestination=P("");tokenBalance=P("0");currencyIssuers=[];domain=P("");memo=P("");taxonField=P("");burnableNft=P(void 0);onlyXrpNft=P(void 0);transferableNft=P(void 0);mutableNft=P(void 0);batchMode="allOrNothing";minterAddressField=P("");issuerAddressField=P("");expirationField=P("");expirationTimeUnit=P("seconds");initialURIField=P("https://ipfs.io/ipfs/bafybeigjro2d2tc43bgv7e4sxqg7f5jga7kjizbk7nnmmyhmq35dtz6deq");nftIdField=P("");nftIndexField=P("");nftCountField=P("");nftFlagValues={burnableNft:1,onlyXrpNft:2,trustLine:4,transferableNft:8,mutableNft:16};nftFlags={burnableNft:!1,onlyXrpNft:!1,trustLine:!1,transferableNft:!1,mutableNft:!1};flags={asfRequireDest:!1,asfRequireAuth:!1,asfDisallowXRP:!1,asfDisableMaster:!1,asfNoFreeze:!1,asfGlobalFreeze:!1,asfDefaultRipple:!1,asfDepositAuth:!1,asfAllowTrustLineClawback:!1,asfDisallowIncomingNFTokenOffer:!1,asfDisallowIncomingCheck:!1,asfDisallowIncomingPayChan:!1,asfDisallowIncomingTrustline:!1,asfAllowTrustLineLocking:!1};existingNfts=P([]);existingNftsCollapsed=P(!0);nftOwnerAddress=P("");selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});hasWallets=_e(()=>this.wallets().length>0);infoData=_e(()=>{let t=this.currentWallet();if(!t.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=this.txUiService.explorerUrl(),r=t.address,o=this.existingNfts(),s=o.length,a=s>0?`<a href="${i}account/${r}/nfts" target="_blank" rel="noopener noreferrer" class="xrpl-win-link">View NFTs</a>`:"",l=this.infoPanelExpanded()?o.map(c=>({id:c.NFTokenID,uri:c.URI,taxon:c.Taxon,sequence:c.Sequence,transferFee:c.TransferFee,flags:this.decodeNftFlagsForUi(c.Flags||0)})):[];return{walletName:e,activeTab:this.activeTab(),nftCount:s,nftsToShow:l,links:a}});nftItems=_e(()=>this.existingNfts().map(t=>({id:t.NFTokenID,display:t.URI?`NFT \u2022 ${t.URI}`:"NFT \u2022 No URI",secondary:t.NFTokenID.slice(0,12)+"..."+t.NFTokenID.slice(-10),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1})));selectedNftItem=_e(()=>{let t=this.nftIdField();return t&&this.nftItems().find(e=>e.id===t)||null});onNftSelected(t){this.nftIdField.set(t?.id||"")}timeUnitItems=_e(()=>[{id:"seconds",display:"Seconds"},{id:"minutes",display:"Minutes"},{id:"hours",display:"Hours"},{id:"days",display:"Days"}]);selectedTimeUnitItem=_e(()=>{let t=this.expirationTimeUnit();return this.timeUnitItems().find(e=>e.id===t)||null});constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.clearFields(!0),this.selectWallet(i))}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.clearFields(!0),yield this.getNFT(!0))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.existingNfts.set([]),this.nftIdField.set(""),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleExistingNfts(){this.existingNftsCollapsed.set(!this.existingNftsCollapsed)}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.resetFlags(),this.clearFields(!0),this.hasWallets()&&(yield this.getNFT(!0))})}toggleFlags(){}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getNFT(t=!1){return z(this,null,function*(){yield this.withPerf("getNFT",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.xrplService.getAccountNFTs(e,i.classicAddress,"validated","").catch(()=>({result:{account_nfts:[]}})),a=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(a.length>0)return this.txUiService.setError(a.join(`
\u2022 `));this.getExistingNfts(s,this.currentWallet().address),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getNFT:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}mintNFT(){return z(this,null,function*(){yield this.withPerf("mintNFT",()=>z(this,null,function*(){if(this.txUiService.clearAllOptionsAndMessages(),this.flags.asfNoFreeze&&this.flags.asfGlobalFreeze)return this.txUiService.setError("Cannot enable both NoFreeze and GlobalFreeze");let t=this.getFlagsValue(this.nftFlags);try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(e,i.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(e),this.xrplService.getLastLedgerIndex(e),this.xrplService.getXrplServerInfo(e,"current","")]),l={TransactionType:"NFTokenMint",Account:i.classicAddress,Flags:t,NFTokenTaxon:parseInt(this.taxonField(),0),Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(e,l,i,r,"mint");let c=yield this.txExecutor.mintNft(l,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated NFT mint successfully!":"Minted NFT executed successfully!",yield this.refreshAfterTx(e,i,null,!1)}catch(e){console.error("Error in mintNFT:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}burnNFT(){return z(this,null,function*(){yield this.withPerf("burnNFT",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),a=this.utilsService.parseAndValidateNFTokenIDs(this.nftIdField());if(!a)return this.txUiService.setError("Invalid NFT Id");if(a.length>1)return this.txUiService.setError("Use Batch Mode to burn multiple NFT's at once.");let l={TransactionType:"NFTokenBurn",Account:e.classicAddress,NFTokenID:this.nftIdField(),Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,l,e,i,"burn");let c=yield this.txExecutor.burnNft(l,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Burned NFT successfully!":"Burned NFT executed successfully!",yield this.refreshAfterTx(t,e,null,!1),this.nftIdField.set("")}catch(t){console.error("Error in burnNFT:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}updateNFTMetadata(){return z(this,null,function*(){yield this.withPerf("updateNFTMetadata",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current",""),this.xrplService.getAccountNFTs(t,e.classicAddress,"validated","").catch(()=>({result:{account_nfts:[]}}))]);this.utilsService.logAccountInfoObjects(i,null),this.utilsService.logLedgerObjects(r,o,s),this.utilsService.logObjects("nftInfo",a);let l={TransactionType:"NFTokenModify",Account:e.classicAddress,NFTokenID:this.nftIdField(),URI:Fd.convertStringToHex(this.initialURIField()),Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,l,e,i,"updateMetaData");let c=yield this.txExecutor.updateNftMetaData(l,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Update NFT Meta Data successfully!":"Updated NFT Meta Data successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in updateNFTMetadata:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getExistingNfts(t,e){let r=(Array.isArray(t)?t:t?.result?.account_nfts??[]).flatMap(o=>o&&Array.isArray(o.NFTokens)?o.NFTokens.map(s=>{let a=s?.NFToken??s??{};return this.normalizeNft(o,a)}):o&&(o.NFTokenID||o.nft_serial||o.Issuer)?[this.normalizeNft(null,o)]:[]);return this.existingNfts.set(r),this.utilsService.logObjects("existingNfts",this.existingNfts()),this.existingNfts()}normalizeNft(t,e){let i=(...h)=>{for(let f of h){if(e?.[f]!==void 0)return e[f];if(t?.[f]!==void 0)return t[f]}},r=i("NFTokenID","NFTokenId")??"N/A",o=i("Flags")??0,s=i("Issuer")??"N/A",a=i("NFTokenTaxon","NFTaxon","Taxon")??"N/A",l=i("TransferFee")??"N/A",c=i("Sequence","nft_serial")??"N/A",d=i("URI")??i("uri")??"N/A",u=d&&d!=="N/A"?this.utilsService.decodeHex(d):null;return{LedgerEntryType:t?.LedgerEntryType??e?.LedgerEntryType??"N/A",PageIndex:t?.index??t?.PageIndex??"N/A",NFTokenID:r,Flags:o,Issuer:s,Taxon:a,TransferFee:l,Sequence:c,URI_hex:d,URI:u}}toggleFlag(t){this.nftFlags[t]=!this.nftFlags[t],this.updateFlagTotal()}updateFlagTotal(){let t=0;this.nftFlags.burnableNft&&(t|=this.nftFlagValues.burnableNft),this.nftFlags.onlyXrpNft&&(t|=this.nftFlagValues.onlyXrpNft),this.nftFlags.transferableNft&&(t|=this.nftFlagValues.transferableNft),this.nftFlags.mutableNft&&(t|=this.nftFlagValues.mutableNft),this.nftFlags.trustLine&&(t|=this.nftFlagValues.trustLine),this.totalFlagsValue.set(t),this.totalFlagsHex.set("0x"+t.toString(16).toUpperCase().padStart(8,"0"))}decodeNftFlags(t){if(!t)return[];let e=[];return t&1&&e.push("tfBurnable"),t&2&&e.push("tfOnlyXRP"),t&4&&e.push("tfTrustLine"),t&8&&e.push("tfTransferable"),t&16&&e.push("tfMutable"),e}getFlagsValue(t){let e=0;return t.burnableNft&&(e|=Fd.NFTokenMintFlags.tfBurnable),t.onlyXrpNft&&(e|=Fd.NFTokenMintFlags.tfOnlyXRP),t.transferableNft&&(e|=Fd.NFTokenMintFlags.tfTransferable),t.mutableNft&&(e|=Fd.NFTokenMintFlags.tfMutable),t.trustLine&&(e|=Fd.NFTokenMintFlags.tfTrustLine),e}resetFlags(){this.nftFlags.burnableNft=!1,this.nftFlags.onlyXrpNft=!1,this.nftFlags.transferableNft=!1,this.nftFlags.mutableNft=!1,this.nftFlags.trustLine=!1}decodeNftFlagsForUi(t){let e=[{value:1,name:"burnableNft"},{value:2,name:"onlyXrpNft"},{value:4,name:"trustLine"},{value:8,name:"transferableNft"},{value:16,name:"mutableNft"}],i=[];for(let r of e)(t&r.value)===r.value&&i.push(r.name);return i.length>0?i.join(", "):"None"}setBatchFlags(){let t=0;return this.batchMode==="allOrNothing"&&(t|=Re.BATCH_FLAGS.ALL_OR_NOTHING),this.batchMode==="onlyOne"&&(t|=Re.BATCH_FLAGS.ONLY_ONE),this.batchMode==="untilFailure"&&(t|=Re.BATCH_FLAGS.UNTIL_FAILURE),this.batchMode==="independent"&&(t|=Re.BATCH_FLAGS.INDEPENDENT),console.log("Batch flags "+t),t}get availableCurrencies(){return Object.keys(this.knownTrustLinesIssuers()).filter(t=>t!=="XRP").sort((t,e)=>t.localeCompare(e))}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(this.txUiService.isTicket()){let a=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(a){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(a))))throw new Error(`Ticket ${a} not found`);this.utilsService.setTicketSequence(e,a,!0)}}let s=()=>{if(this.expirationField()){let a=this.utilsService.addTime(this.expirationField(),"hours");return this.utilsService.setExpiration(e,a),!0}return!1};if(this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),o==="mint"){if(this.initialURIField()&&this.utilsService.setURI(e,this.initialURIField()),this.transferFeeField()?.trim()&&this.utilsService.setTransferFee(e,this.transferFeeField()),this.nfTokenMinterAddress()){if(!Fd.isValidAddress(this.nfTokenMinterAddress()))throw new Error("Invalid AuthorizedNFTokenMinter account");this.utilsService.setIssuerAddress(e,this.nfTokenMinterAddress())}let a=s(),l=this.selectedDestinationAddress()||this.typedDestination();l&&(this.utilsService.setDestination(e,l),a=!0),a&&this.amountField&&this.utilsService.setAmount(e,this.amountField)}})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0),a=yield this.xrplService.getAccountNFTs(t,e.classicAddress,"validated","").catch(()=>({result:{account_nfts:[]}}));this.getExistingNfts(a,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}setBatchMode(t){this.batchMode=t,this.toggleFlags()}onBurnToggle(t,e){let i=(this.nftIdField()||"").split(",").map(r=>r.trim()).filter(Boolean);if(t)i.includes(e)||i.push(e);else{let r=i.indexOf(e);r!==-1&&i.splice(r,1)}this.nftIdField.set(i.join(", "))}updateNftTextField(t,e){let i=(this.nftIdField()||"").split(",").map(r=>r.trim()).filter(Boolean);e&&!i.includes(t)?i.push(t):e||(i=i.filter(r=>r!==t)),this.nftIdField.set(i.join(", "))}addNewDestinationFromUser(t){t&&Fd.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}copyNFTokenID(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("MPT Issuance ID copied!")})}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll(/</g,"&lt;").replaceAll(/>/g,"&gt;")}clearFields(t){t&&(this.isBatchModeEnabled.set(!1),this.isNftFlagModeEnabled.set(!1),this.isNftFlagModeEnabled.set(!1)),this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.expirationTimeUnit.set("seconds"),this.amountField.set(""),this.minterAddressField.set(""),this.issuerAddressField.set(""),this.expirationField.set(""),this.nftIdField.set(""),this.nftIndexField.set(""),this.nftCountField.set(""),this.ticketSequence.set(""),this.txUiService.clearAllOptionsAndMessages()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-nft-create"]],features:[Lt],decls:42,vars:26,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"menu-btn",3,"click"],["name","heroArrowPath","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[1,"tab-content-container","flags-container",2,"min-width","450px"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"white-button-submenu"],["name","heroArrowPath","size","20","color","green",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[2,"margin-top","8px","font-size","0.9em"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[3,"innerHTML"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View NFT on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[1,"ml-2","text-xs","text-gray-600"],[2,"color","#555","font-size","0.88em","display","flex","flex-direction","column","gap","4px"],["title","Copy NFT ID",1,"copy-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-row"],[1,"form-group"],[1,"form-hint"],["type","text","name","taxonField","placeholder","",3,"ngModelChange","ngModel"],["type","text","name","transferFeeField","placeholder","",3,"ngModelChange","ngModel"],["type","text","name","initialURIField","placeholder","",3,"ngModelChange","ngModel"],["type","text","name","amountField","placeholder","",3,"ngModelChange","ngModel"],["type","text","name","nfTokenMinterAddress","placeholder","",3,"ngModelChange","ngModel"],["placeholder","Search by ID or URI...","emptyMessage","No NFTs found",3,"valueChange","items","value"],[1,"form-row",2,"margin-top","0.8em"],["type","text","name","nftIdField","placeholder","",3,"ngModelChange","ngModel"],["type","text","name","nftOwnerAddress","placeholder","",3,"ngModelChange","ngModel"],[1,"flags-wrapper"],[1,"token-flags-header"],["name","flag","size","20"],[1,"token-flags-title"],[1,"flag-item-account-flags",3,"enabled"],[1,"flag-item",3,"enabled"],[1,"flags-total"],[1,"flag-item-account-flags",3,"click"],[1,"flag-header-account"],["type","checkbox","id","canLock","name","canLock",1,"flag-checkbox",3,"checked"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"flag-icon"],["d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0L3 7m1.582 2H12"],[1,"flag-title"],[1,"flag-value"],[1,"flag-desc"],[1,"flag-header"],["type","checkbox","disabled","",1,"flag-checkbox",3,"checked"],[1,"flag-item",3,"click"],[1,"total-label"],[1,"total-value"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6)(7,"div",7)(8,"button",8),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",9),w(10," Create NFT "),g(),m(11,"button",8),X("click",function(){return U(r),j(i.setTab("burn"))}),ee(12,"ng-icon",10),w(13," Burn NFT "),g(),m(14,"button",11),X("click",function(){return U(r),j(i.setTab("updateNFTMetadata"))}),ee(15,"ng-icon",12),w(16," Modify NFT Meta Data "),g()(),Q(17,BZe,9,0,"div"),Q(18,VZe,9,0,"div"),Q(19,UZe,9,0,"div"),Q(20,QZe,11,4,"div",13),Q(21,JZe,3,1,"div",14),m(22,"form",15,0)(24,"div")(25,"div",16)(26,"div",17),Q(27,eQe,43,5),Q(28,tQe,13,4),Q(29,nQe,14,2),g(),Q(30,cQe,12,6,"div",18),g(),ee(31,"app-transaction-options",19),m(32,"div",20),Q(33,dQe,3,4,"button",21)(34,uQe,3,4,"button",22)(35,hQe,3,4,"button",23),m(36,"button",24),ct(37,"async"),X("click",function(){return U(r),j(i.clearFields(!0))}),w(38,"Clear Fields"),g()()()(),m(39,"div",25)(40,"input",26),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(41,"app-transaction-preview"),g()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="burn"),_(3),Ue("active",i.activeTab()==="updateNFTMetadata"),_(3),J(i.activeTab()==="create"?17:-1),_(),J(i.activeTab()==="burn"?18:-1),_(),J(i.activeTab()==="updateNFTMetadata"?19:-1),_(),J((r=i.infoData())?20:-1,r),_(),J(i.txUiService.warningMessage?21:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()==="create"?27:-1),_(),J(i.activeTab()==="burn"||i.activeTab()==="updateNFTMetadata"?28:-1),_(),J(i.activeTab()==="updateNFTMetadata"?29:-1),_(),J(i.activeTab()==="create"?30:-1),_(),oe("showWhenTab",Ei(25,OZe))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="create"?33:i.activeTab()==="burn"?34:i.activeTab()==="updateNFTMetadata"?35:-1),_(3),oe("disabled",!mt(37,23,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,$r,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var bo=_i(Ki());var fQe=()=>["createAMM","depositToAMM","withdrawlTokenFromAMM","clawbackFromAMM","swapViaAMM","deleteAMM"],pQe=(n,t)=>t.OfferIndex;function mQe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",28),ee(3,"ng-icon",29),g(),m(4,"div")(5,"h2",30),w(6,"Create AMM"),g(),m(7,"p",31),w(8,"Create an AMM on the XRPL."),g()()()())}function gQe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",28),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",30),w(6,"Deposit to AMM"),g(),m(7,"p",31),w(8,"Deposit assets to an AMM for the currency pair."),g()()()())}function yQe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",28),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",30),w(6,"Withdrawl Token from AMM"),g(),m(7,"p",31),w(8,"Withdrawl token from an AMM for the currency pair.."),g()()()())}function vQe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",28),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",30),w(6,"Clawback Token from AMM"),g(),m(7,"p",31),w(8,"Clawback token issued from an AMM."),g()()()())}function _Qe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",28),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",30),w(6,"Swap Tokens Via AMM"),g(),m(7,"p",31),w(8,"Swap tokens on an AMM."),g()()()())}function bQe(n,t){n&1&&(m(0,"div")(1,"div",27)(2,"div",28),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",30),w(6,"Delete AMM"),g(),m(7,"p",31),w(8,"Delete AMM from the XRPL."),g()()()())}function wQe(n,t){if(n&1&&(m(0,"div",13),ee(1,"ng-icon",33)(2,"div",34),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function SQe(n,t){if(n&1&&(m(0,"span",42),w(1),g()),n&2){let e=E().$implicit;_(),je(" LedgerEntryType: ",e.LedgerEntryType," ")}}function CQe(n,t){n&1&&(m(0,"span",43),w(1," LedgerEntryType: Not set "),g())}function xQe(n,t){if(n&1&&(m(0,"span",42),w(1),g()),n&2){let e=E().$implicit;_(),je(" NFTokenID: ",e.NFTokenID," ")}}function kQe(n,t){n&1&&(m(0,"span",43),w(1," NFTokenID: Not set "),g())}function MQe(n,t){}function TQe(n,t){n&1&&(m(0,"span",43),w(1," Flags: Not set "),g())}function EQe(n,t){if(n&1&&(m(0,"span",45),w(1),g()),n&2){let e=E().$implicit;_(),je(" Is Sell Offer: ",e.IsSellOffer," ")}}function AQe(n,t){n&1&&(m(0,"span",46),w(1," Is Sell Offer: Not set "),g())}function DQe(n,t){if(n&1&&(m(0,"span",45),w(1),g()),n&2){let e=E().$implicit;_(),je(" Offer Index: ",e.OfferIndex," ")}}function IQe(n,t){n&1&&(m(0,"span",46),w(1," Offer Index: Not set "),g())}function FQe(n,t){if(n&1&&(m(0,"span",45),w(1),g()),n&2){let e=E().$implicit;_(),je(" Amount: ",e.AmountXRP," XRP")}}function PQe(n,t){n&1&&(m(0,"span",46),w(1," XRP Amount: Not set "),g())}function LQe(n,t){if(n&1&&(m(0,"span",45),w(1),g()),n&2){let e=E().$implicit;_(),je(" Owner: ",e.Owner)}}function RQe(n,t){n&1&&(m(0,"span",46),w(1," Owner: Not set "),g())}function OQe(n,t){if(n&1&&(m(0,"div",40)(1,"div",41),Q(2,SQe,2,1,"span",42)(3,CQe,2,0,"span",43),Q(4,xQe,2,1,"span",42)(5,kQe,2,0,"span",43),Q(6,MQe,0,0)(7,TQe,2,0,"span",43),ee(8,"div",44),Q(9,EQe,2,1,"span",45)(10,AQe,2,0,"span",46),Q(11,DQe,2,1,"span",45)(12,IQe,2,0,"span",46),Q(13,FQe,2,1,"span",45)(14,PQe,2,0,"span",46),Q(15,LQe,2,1,"span",45)(16,RQe,2,0,"span",46),g()()),n&2){let e=t.$implicit;_(2),J(e.LedgerEntryType?2:3),_(2),J(e.NFTokenID?4:5),_(2),J(e.Flags!==void 0&&e.Flags!==0?6:7),_(3),J(e.IsSellOffer?9:10),_(2),J(e.OfferIndex?11:12),_(2),J(e.AmountXRP?13:14),_(2),J(e.Owner?15:16)}}function NQe(n,t){if(n&1&&(m(0,"div",39),yn(1,OQe,17,7,"div",40,pQe),g()),n&2){let e=E(2);_(),vn(e.existingOffers)}}function BQe(n,t){if(n&1){let e=ge();m(0,"div",14)(1,"div",35),X("click",function(){U(e);let r=E();return j(r.toggleExistingSellOffers())}),m(2,"h3",36),ee(3,"ng-icon",37),w(4),g()(),m(5,"div",38),Q(6,NQe,3,0,"div",39),g()()}if(n&2){let e=E();_(4),je(" Existing Sell Offers (",e.existingOffers.length,") "),_(),In("max-height",e.existingSellOffersCollapsed()?"0":e.existingOffers.length*80+20+"px")("overflow","hidden")("transition","max-height 0.3s ease"),_(),J(e.existingSellOffersCollapsed()?-1:6)}}function VQe(n,t){n&1&&(m(0,"span",65),w(1,"XRP"),g())}function UQe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function jQe(n,t){if(n&1&&(m(0,"div",64),Q(1,VQe,2,0,"span",65)(2,UQe,2,1,"span"),m(3,"span",66),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function HQe(n,t){n&1&&(m(0,"span",65),w(1,"XRP"),g())}function WQe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function zQe(n,t){if(n&1&&(m(0,"div",64),Q(1,HQe,2,0,"span",65)(2,WQe,2,1,"span"),m(3,"span",66),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function qQe(n,t){if(n&1&&(m(0,"div",67)(1,"span",68),w(2),g(),m(3,"span",66),w(4),g()()),n&2){let e=t.$implicit;_(2),Ee(e.display),_(2),Ee(e.secondary)}}function $Qe(n,t){if(n&1){let e=ge();m(0,"div",47)(1,"label"),w(2,"Trading Fee"),g(),m(3,"input",70),Ne("ngModelChange",function(r){U(e);let o=E(3);return Ve(o.tradingFeeField,r)||(o.tradingFeeField=r),j(r)}),g()()}if(n&2){let e=E(3);_(3),Oe("ngModel",e.tradingFeeField)}}function KQe(n,t){if(n&1){let e=ge();m(0,"div",47)(1,"label"),w(2,"Holder"),g(),m(3,"input",71),Ne("ngModelChange",function(r){U(e);let o=E(3);return Ve(o.holderField,r)||(o.holderField=r),j(r)}),g()()}if(n&2){let e=E(3);_(3),Oe("ngModel",e.holderField)}}function GQe(n,t){if(n&1&&(m(0,"div",18),Q(1,$Qe,4,1,"div",47),m(2,"div",47)(3,"label"),w(4,"LP Token Balance"),g(),ee(5,"input",69),g(),Q(6,KQe,4,1,"div",47),g()),n&2){let e=E(2);_(),J(e.activeTab()==="createAMM"?1:-1),_(4),oe("value",e.lpTokenBalance()??"0"),_(),J(e.activeTab()==="clawbackFromAMM"?6:-1)}}function XQe(n,t){if(n&1&&(m(0,"div",47)(1,"label"),w(2,"LP Token Balance"),g(),ee(3,"input",69),g()),n&2){let e=E(3);_(3),oe("value",e.lpTokenBalance()??"0")}}function YQe(n,t){if(n&1){let e=ge();m(0,"div",47)(1,"label"),w(2,"Withdrawl LP Token"),g(),m(3,"input",72),Ne("ngModelChange",function(r){U(e);let o=E(3);return Ve(o.withdrawlLpTokenFromPoolField,r)||(o.withdrawlLpTokenFromPoolField=r),j(r)}),g()()}if(n&2){let e=E(3);_(3),Oe("ngModel",e.withdrawlLpTokenFromPoolField)}}function ZQe(n,t){if(n&1&&(m(0,"div",18),Q(1,XQe,4,1,"div",47),Q(2,YQe,4,1,"div",47),g()),n&2){let e=E(2);_(),J(e.activeTab()==="depositToAMM"||e.activeTab()==="withdrawlTokenFromAMM"?1:-1),_(),J(e.activeTab()==="withdrawlTokenFromAMM"?2:-1)}}function QQe(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",47)(2,"span",48)(3,"label",49),w(4,"Asset 1 - First Pool Assets"),g()()(),m(5,"div",47)(6,"span",50)(7,"label",51),w(8,"Asset 2 - Second Pool Assets"),g()()()(),m(9,"div",18)(10,"div",47)(11,"label",52),w(12,"Currency Code"),g(),m(13,"p",53),w(14,"The token you want to receive or deposit/withdraw."),g(),m(15,"app-select-search-dropdown",54),X("valueChange",function(r){U(e);let o=E();return j(o.onWeWantCurrencySelected(r))}),nn(16,jQe,5,2,"ng-template",null,1,vr),g()(),m(18,"div",47)(19,"label",55),w(20,"Currency Code"),g(),m(21,"p",53),w(22,"The token you want to spend or deposit/withdraw."),g(),m(23,"app-select-search-dropdown",54),X("valueChange",function(r){U(e);let o=E();return j(o.onWeSpendCurrencySelected(r))}),nn(24,zQe,5,2,"ng-template",null,1,vr),g()()(),m(26,"div",18)(27,"div",47)(28,"label",56),w(29,"Issuer"),g(),m(30,"p",53),w(31,"The XRPL account that issues the token you want to receive."),g(),m(32,"app-select-search-dropdown",57),X("valueChange",function(r){U(e);let o=E();return j(o.onWeWantIssuerSelected(r))}),nn(33,qQe,5,2,"ng-template",null,1,vr),g()(),ee(35,"div",47),g(),m(36,"div",18)(37,"div",47)(38,"label"),w(39,"Amount"),g(),m(40,"input",58),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.weWantAmount,r)||(o.weWantAmount=r),j(r)}),g()(),m(41,"div",47)(42,"label"),w(43,"Amount"),g(),m(44,"input",59),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.weSpendAmount,r)||(o.weSpendAmount=r),j(r)}),g()()(),m(45,"div",18)(46,"div",47)(47,"label"),w(48,"Currency Balance"),g(),ee(49,"input",60),ct(50,"async"),g(),m(51,"div",47)(52,"label"),w(53,"Currency Balance"),g(),ee(54,"input",61),ct(55,"async"),g()(),m(56,"div",18)(57,"div",47)(58,"label"),w(59,"Total Assets in Pool 1"),g(),ee(60,"input",62),g(),m(61,"div",47)(62,"label"),w(63,"Total Assets in Pool 2"),g(),ee(64,"input",63),g()(),Q(65,GQe,7,3,"div",18),Q(66,ZQe,3,2,"div",18)}if(n&2){let e=E();_(15),oe("items",e.weWantCurrencyItems())("value",e.selectedWeWantCurrencyItem())("showShortAddress",!1),_(8),oe("items",e.weSpendCurrencyItems())("value",e.selectedWeSpendCurrencyItem())("showShortAddress",!1),_(9),oe("items",e.weWantIssuerItems())("value",e.selectedWeWantIssuerItem())("showShortAddress",!0),_(8),Oe("ngModel",e.weWantAmount),_(4),Oe("ngModel",e.weSpendAmount),_(5),oe("value",mt(50,17,e.weWantBalance$)??"0"),_(5),oe("value",mt(55,19,e.weSpendBalance$)??"0"),_(6),oe("value",e.assetPool1Balance()??"0"),_(4),oe("value",e.assetPool2Balance()??"0"),_(),J(e.activeTab()==="createAMM"||e.activeTab()==="clawbackFromAMM"?65:-1),_(),J(e.activeTab()==="depositToAMM"||e.activeTab()==="withdrawlTokenFromAMM"?66:-1)}}function JQe(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",47)(2,"label",73),w(3,"Destination"),g(),m(4,"p",53),w(5,"The unique address of the account receiving the payment."),g(),m(6,"app-select-search-dropdown",74),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()(),m(7,"div",47)(8,"label"),w(9,"Destination Tag"),g(),m(10,"input",75),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.destinationTagField,r)||(o.destinationTagField=r),j(r)}),g()()()}if(n&2){let e=E();_(6),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(4),Oe("ngModel",e.destinationTagField)}}function eJe(n,t){if(n&1){let e=ge();m(0,"div",76)(1,"tr")(2,"td",78)(3,"span",79)(4,"label"),w(5,"Deposit Option(s)"),g()()(),m(6,"td",80)(7,"span",81)(8,"input",82),X("change",function(){U(e);let r=E(2);return j(r.selectDepositOption("bothPools"))}),g(),m(9,"label",83),w(10,"Both Pools"),g()(),m(11,"span",84)(12,"input",85),X("change",function(){U(e);let r=E(2);return j(r.selectDepositOption("firstPoolOnly"))}),g(),m(13,"label",86),w(14,"First Pool Only"),g()(),m(15,"span",87)(16,"input",88),X("change",function(){U(e);let r=E(2);return j(r.selectDepositOption("secondPoolOnly"))}),g(),m(17,"label",89),w(18,"Second Pool Only"),g()()()()()}if(n&2){let e=E(2);_(8),oe("checked",e.depositOptions().bothPools),_(4),oe("checked",e.depositOptions().firstPoolOnly),_(4),oe("checked",e.depositOptions().secondPoolOnly)}}function tJe(n,t){if(n&1){let e=ge();m(0,"div",77)(1,"tr")(2,"td",78)(3,"span",90)(4,"label"),w(5,"Withdrawal Options"),g()()(),m(6,"td",80)(7,"span",91)(8,"input",92),X("change",function(){U(e);let r=E(2);return j(r.selectWithdrawOption("bothPools"))}),g(),m(9,"label",93),w(10,"Both Pools"),g()(),m(11,"span",94)(12,"input",95),X("change",function(){U(e);let r=E(2);return j(r.selectWithdrawOption("firstPoolOnly"))}),g(),m(13,"label",96),w(14,"First Pool Only"),g()(),m(15,"span",97)(16,"input",98),X("change",function(){U(e);let r=E(2);return j(r.selectWithdrawOption("secondPoolOnly"))}),g(),m(17,"label",99),w(18,"Second Pool Only"),g()()()()()}if(n&2){let e=E(2);_(8),oe("checked",e.withdrawOptions().bothPools),_(4),oe("checked",e.withdrawOptions().firstPoolOnly),_(4),oe("checked",e.withdrawOptions().secondPoolOnly)}}function nJe(n,t){if(n&1&&Q(0,eJe,19,3,"div",76)(1,tJe,19,3,"div",77),n&2){let e=E();J(e.activeTab()==="depositToAMM"?0:e.activeTab()==="withdrawlTokenFromAMM"?1:-1)}}function iJe(n,t){if(n&1){let e=ge();m(0,"button",100),X("click",function(){U(e);let r=E();return j(r.createAMM())}),w(1),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Create AMM")}}function rJe(n,t){if(n&1){let e=ge();m(0,"button",101),X("click",function(){U(e);let r=E();return j(r.depositToAMM())}),w(1),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Deposit Tokens to AMM")}}function oJe(n,t){if(n&1){let e=ge();m(0,"button",101),X("click",function(){U(e);let r=E();return j(r.withdrawlTokenFromAMM())}),w(1),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Withdreawl Token from AMM")}}function sJe(n,t){if(n&1){let e=ge();m(0,"button",102),X("click",function(){U(e);let r=E();return j(r.clawbackFromAMM())}),w(1),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Clawaback Token from AMM")}}function aJe(n,t){if(n&1){let e=ge();m(0,"button",101),X("click",function(){U(e);let r=E();return j(r.swapViaAMM())}),w(1),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Swap Token via AMM")}}function lJe(n,t){if(n&1){let e=ge();m(0,"button",102),X("click",function(){U(e);let r=E();return j(r.deleteAMM())}),w(1),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Delete AMM")}}var q8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);offerCurrency=N(yv);weWantIssuers$;weSpendIssuers$;weWantBalance$;weSpendBalance$;destroy$=new Xe;ammInfoTrigger=new Xe;typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("createAMM");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");currencyFieldDropDownValue=P("XRP");selectedWalletIndex=P(0);currencyChangeTrigger=P(0);holderField=P("");insufficientLiquidityWarning=P(!1);lpTokenBalanceField=P("0");tradingFeeField=P("0.1");withdrawlLpTokenFromPoolField=P("");assetPool1Balance=P("0");assetPool2Balance=P("0");lpTokenBalance=P("0");signers=[{account:"",seed:"",weight:1}];weWantCurrency=P("");weSpendCurrency=P("XRP");availableCurrencies=[];weWantIssuer=P("");weSpendIssuer=P("");weWantAmount=P("");weSpendAmount=P("");isMarketOrder=P(!1);isFillOrKill=P(!1);isPassive=P(!0);knownIssuers=P({XRP:[]});knownTrustLinesIssuers=P({XRP:[]});existingOffers=[];existingSellOffers=[];existingBuyOffers=[];existingSellOffersCollapsed=P(!0);withdrawOptions=P({bothPools:!0,firstPoolOnly:!1,secondPoolOnly:!1});depositOptions=P({bothPools:!0,firstPoolOnly:!1,secondPoolOnly:!1});amountTimeout=P(null);weWantIssuersTrigger=P(0);weSpendIssuersTrigger=P(0);selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase();return t===""?this.destinations():this.destinations().filter(e=>e.address!==this.currentWallet().address).filter(e=>e.address.toLowerCase().includes(t)||(e.name??"").toLowerCase().includes(t))});storedIssuers=_e(()=>{let t=this.knownTrustLinesIssuers(),e=[];for(let i in t)if(i!=="XRP")for(let r of t[i])e.push({name:i,address:r});return e.sort((i,r)=>i.name.localeCompare(r.name))});weWantCurrencyItems=_e(()=>{let t=this.weWantCurrency();return this.offerCurrency.getAvailableCurrencies(!0).map(e=>({id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":(()=>{let i=this.offerCurrency.getIssuersForCurrency(e).length;return i===0?"No issuers":`${i} issuer${i!==1?"s":""}`})(),isCurrentCode:e===t}))});selectedWeWantCurrencyItem=_e(()=>{let t=this.weWantCurrency();return t&&this.weWantCurrencyItems().find(e=>e.id===t)||null});weSpendCurrencyItems=_e(()=>[{id:"XRP",display:"XRP",secondary:"Native currency",isCurrentCode:!0}]);selectedWeSpendCurrencyItem=_e(()=>({id:"XRP",display:"XRP",secondary:"",isCurrentCode:!0}));weWantIssuerItems=_e(()=>{this.weWantIssuersTrigger();let t=this.weWantIssuer();return(this.offerCurrency.weWant.issuers$.value||[]).map((i,r)=>({id:i.address,display:i.name||`Issuer ${r+1}`,secondary:`${i.address.slice(0,8)}...${i.address.slice(-6)}`,isCurrentToken:i.address===t}))});selectedWeWantIssuerItem=_e(()=>{let t=this.weWantIssuer();return t&&this.weWantIssuerItems().find(e=>e.id===t)||null});weSpendIssuerItems=_e(()=>{this.weSpendIssuersTrigger();let t=this.weSpendIssuer();return(this.offerCurrency.weSpend.issuers$.value||[]).map((i,r)=>({id:i.address,display:i.name||`Issuer ${r+1}`,secondary:`${i.address.slice(0,8)}...${i.address.slice(-6)}`,isCurrentToken:i.address===t}))});selectedWeSpendIssuerItem=_e(()=>{let t=this.weSpendIssuer();return t&&this.weSpendIssuerItems().find(e=>e.id===t)||null});infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=this.txUiService.explorerUrl(),r=t.address;return""});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages(),this.weWantIssuers$=this.offerCurrency.weWant.issuers$,this.weSpendIssuers$=this.offerCurrency.weSpend.issuers$,this.weWantBalance$=this.offerCurrency.weWant.balance$,this.weSpendBalance$=this.offerCurrency.weSpend.balance$,this.availableCurrencies=this.offerCurrency.getAvailableCurrencies(!0)}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.currencyFieldDropDownValue.set("XRP"),this.offerCurrency.weWant.issuers$.pipe(fn(this.destroy$)).subscribe(t=>{this.weWantIssuersTrigger.update(i=>i+1);let e=t[0]?.address??"";this.offerCurrency.selectWeWantIssuer(e,this.currentWallet())}),this.offerCurrency.weSpend.issuers$.pipe(fn(this.destroy$)).subscribe(t=>{this.weSpendIssuersTrigger.update(i=>i+1);let e=t[0]?.address??"";this.offerCurrency.selectWeSpendIssuer(e,this.currentWallet())}),this.offerCurrency.weWant.currency$.pipe(fn(this.destroy$)).subscribe(t=>{this.weWantCurrency.set(t)}),this.offerCurrency.weWant.issuer$.pipe(fn(this.destroy$)).subscribe(t=>{this.weWantIssuer.set(t)}),this.offerCurrency.weSpend.currency$.pipe(fn(this.destroy$)).subscribe(t=>{this.weSpendCurrency.set(t)}),this.offerCurrency.weSpend.issuer$.pipe(fn(this.destroy$)).subscribe(t=>{this.weSpendIssuer.set(t)}),this.weSpendCurrency.set("XRP"),this.offerCurrency.selectWeSpendCurrency("XRP",this.currentWallet()),this.offerCurrency.selectWeSpendIssuer("",this.currentWallet())}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];if(i){this.clearFields(),this.selectWallet(i),this.offerCurrency.setWalletAddress(i.address);let r=this.offerCurrency.getAvailableCurrencies(!0),o=r.includes("BOB")?"BOB":r[0]||"XRP";this.offerCurrency.selectWeWantCurrency(o,i),this.offerCurrency.selectWeSpendCurrency("XRP",i)}}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];if(e){this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.clearFields(),this.offerCurrency.setWalletAddress(e.address);let i=this.offerCurrency.getAvailableCurrencies(!0),r=i.includes("BOB")?"BOB":i[0]||"XRP";this.offerCurrency.selectWeWantCurrency(r,e),this.offerCurrency.selectWeSpendCurrency("XRP",e),yield this.getAMMPoolInfo(!1,!0)}}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t),this.offerCurrency.setWalletAddress(t.address);let e=this.offerCurrency.getAvailableCurrencies(!0),i=e.includes("BOB")?"BOB":e[0]||"XRP";this.offerCurrency.selectWeWantCurrency(i,t),this.offerCurrency.selectWeSpendCurrency("XRP",t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();let t=this.amountTimeout();t&&clearTimeout(t)}trackByOfferIndex(t,e){return e.OfferIndex}toggleExistingSellOffers(){this.existingSellOffersCollapsed.set(!this.existingSellOffersCollapsed)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.clearFields(),this.hasWallets()&&(yield this.getAMMPoolInfo(!0,!0))})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getAMMPoolInfo(t=!1,e=!1){return z(this,null,function*(){yield this.withPerf("getAMMPoolInfo",()=>z(this,null,function*(){e&&this.txUiService.clearAllOptionsAndMessages();try{let[i,r]=yield Promise.all([this.getClient(),this.getWallet()]),o=this.toXRPLCurrency(this.utilsService.encodeIfNeeded(this.weWantCurrency()),this.weWantIssuer()),s=this.toXRPLCurrency(this.utilsService.encodeIfNeeded(this.weSpendCurrency()),this.weSpendIssuer()),[{accountInfo:a,accountObjects:l},c,d]=yield Promise.all([this.xrplCache.getAccountData(r.classicAddress,t),this.xrplService.getAMMInfo(i,o,s,r.classicAddress,"validated"),this.checkAmmParticipation(i,r.classicAddress,o,s,!0)]),u=c?.result?.amm;if(!u)this.assetPool1Balance.set("0"),this.assetPool2Balance.set("0"),this.lpTokenBalance.set("0");else{let h=f=>{let p=typeof f=="string"?bo.dropsToXrp(f):f.value;return this.utilsService.formatTokenBalance(p,18)};this.assetPool1Balance.set(h(u.amount)),this.assetPool2Balance.set(h(u.amount2)),this.lpTokenBalance.set(this.utilsService.formatTokenBalance(u.lp_token.value,18)),this.tradingFeeField.set(`${u.trading_fee/1e4}`)}this.refreshUiState(r,a,l)}catch(i){console.error("Error in getAMMPoolInfo:",i),this.txUiService.setError(`${i.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createAMM(){return z(this,null,function*(){yield this.withPerf("createAMM",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.xrplService.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t)]),a=this.utilsService.encodeIfNeeded(this.weWantCurrency()),l=this.utilsService.encodeIfNeeded(this.weSpendCurrency()),c=this.toXRPLCurrency(this.utilsService.encodeIfNeeded(this.weWantCurrency()),this.weWantIssuer()),d=this.toXRPLCurrency(this.utilsService.encodeIfNeeded(this.weSpendCurrency()),this.weSpendIssuer());this.utilsService.logObjects("we_want_currency",a),this.utilsService.logObjects("we_spend_currency",l),this.utilsService.logAssets("asset",c),this.utilsService.logAssets("asset2",d);let u=this.weWantCurrency()==="XRP"?bo.xrpToDrops(this.weWantAmount()):{currency:a,issuer:this.weWantIssuer(),value:this.weWantAmount()},h=this.weSpendCurrency()==="XRP"?bo.xrpToDrops(this.weSpendAmount()):{currency:l,issuer:this.weSpendIssuer(),value:this.weSpendAmount()};this.utilsService.logAssets(u,h);let f=this.utilsService.validateAmmCreateBalances(i.result.account_data.Balance,r.result.account_objects,u,h);if(f)return this.txUiService.setError(f);let p=bo.dropsToXrp(i.result.account_data.Balance);console.log("initialXrpBalance: ",p);let y=this.weSpendCurrency()==="XRP",v=Math.round(Number(this.tradingFeeField())*1e3);if(v<0||v>1e3)return this.txUiService.setError("Trading fee must be between 0% and 1%.");let b={TransactionType:"AMMCreate",Account:e.classicAddress,Amount:y?h:u,Amount2:y?u:h,TradingFee:v,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,b,e,i,"createAmm");let S=yield this.txExecutor.createAMM(b,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!S.success)return this.txUiService.setError(`${S.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated AMM Create successfully!":"AMM created successfully!",this.txUiService.isSimulateEnabled()||(yield this.refreshAfterTx(t,e,null,!1))}catch(t){console.error("Error in createAMM:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}depositToAMM(){return z(this,null,function*(){yield this.withPerf("depositToAMM",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.xrplService.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t)]),a=this.utilsService.encodeIfNeeded(this.weWantCurrency()),l=this.utilsService.encodeIfNeeded(this.weSpendCurrency());this.depositOptions().firstPoolOnly&&this.weSpendAmount.set("0"),this.depositOptions().secondPoolOnly&&this.weWantAmount.set("0");let c=this.weWantCurrency()==="XRP"?bo.xrpToDrops(this.weWantAmount()):{currency:a,issuer:this.weWantIssuer(),value:this.weWantAmount()},d=this.weSpendCurrency()==="XRP"?bo.xrpToDrops(this.weSpendAmount()):{currency:l,issuer:this.weSpendIssuer(),value:this.weSpendAmount()},u=this.utilsService.validateAmmDepositBalances(i.result.account_data.Balance,r.result.account_objects,c,d);if(u)return this.txUiService.setError(u);let h={currency:"XRP"},f={currency:a,issuer:typeof c=="string"?"":c.issuer??""},p;this.depositOptions().bothPools?p={TransactionType:"AMMDeposit",Account:e.classicAddress,Asset:h,Asset2:f,Amount:typeof d=="string"?d:{currency:d.currency,issuer:d.issuer,value:d.value},Amount2:typeof c=="string"?c:{currency:c.currency,issuer:c.issuer,value:c.value},Flags:bo.AMMDepositFlags.tfTwoAsset,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME}:this.depositOptions().firstPoolOnly?p={TransactionType:"AMMDeposit",Account:e.classicAddress,Asset:h,Asset2:f,Amount:typeof c=="string"?c:{currency:c.currency,issuer:c.issuer,value:c.value},Flags:bo.AMMDepositFlags.tfSingleAsset,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME}:p={TransactionType:"AMMDeposit",Account:e.classicAddress,Asset:h,Asset2:f,Amount:typeof d=="string"?d:{currency:d.currency,issuer:d.issuer,value:d.value},Flags:bo.AMMDepositFlags.tfSingleAsset,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME},yield this.setTxOptionalFields(t,p,e,i,"depositToAmm");let y=yield this.txExecutor.depositToAMM(p,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!y.success)return this.txUiService.setError(`${y.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated AMM Deposit successfully!":"AMM Deposit successfully!",this.txUiService.isSimulateEnabled()||(yield this.refreshAfterTx(t,e,null,!1))}catch(t){console.error("Error in depositToAMM:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}withdrawlTokenFromAMM(){return z(this,null,function*(){yield this.withPerf("withdrawlTokenFromAMM",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.xrplService.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t)]),a=this.utilsService.encodeIfNeeded(this.weWantCurrency()),l=this.utilsService.encodeIfNeeded(this.weSpendCurrency()),c=this.withdrawOptions();c.bothPools?(this.weSpendAmount.set("0"),this.weWantAmount.set("0")):(c.firstPoolOnly&&this.weSpendAmount.set("0"),c.secondPoolOnly&&this.weWantAmount.set("0"));let d=this.weWantCurrency()==="XRP"?bo.xrpToDrops(this.weWantAmount()):{currency:a,issuer:this.weWantIssuer(),value:this.weWantAmount()},u=this.weSpendCurrency()==="XRP"?bo.xrpToDrops(this.weSpendAmount()):{currency:l,issuer:this.weSpendIssuer(),value:this.weSpendAmount()},h=this.toXRPLCurrency(this.utilsService.encodeIfNeeded(this.weWantCurrency()),this.weWantIssuer()),f=this.toXRPLCurrency(this.utilsService.encodeIfNeeded(this.weSpendCurrency()),this.weSpendIssuer()),p=yield this.checkAmmParticipation(t,e.classicAddress,h,f,!1),y=this.utilsService.validateAmmWithdrawBalances(i.result.account_data.Balance,r.result.account_objects,this.withdrawlLpTokenFromPoolField(),p);if(y)return this.txUiService.setError(y);if(!p?.lpTokens?.[0])return this.txUiService.setError("No LP token found for this AMM pool");let v=p.lpTokens[0].issuer,b=p.lpTokens[0].currency,S=p.lpTokens[0].balance;if(Number.parseFloat(this.withdrawlLpTokenFromPoolField())>Number.parseFloat(S))return this.txUiService.setError(`Insufficient LP token balance. Available: ${S}`);let x={currency:"XRP"},k={currency:a,issuer:typeof d=="string"?"":d.issuer??""},L=this.utilsService.removeCommaFromAmount(this.withdrawlLpTokenFromPoolField()),D={currency:b,issuer:v,value:L},V;if(this.withdrawOptions().bothPools)V={TransactionType:"AMMWithdraw",Account:e.classicAddress,Asset:x,Asset2:k,LPTokenIn:D,Flags:bo.AMMWithdrawFlags.tfLPToken,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};else if(this.withdrawOptions().firstPoolOnly){let R={currency:a,issuer:typeof d=="string"?"":d.issuer??"",value:this.weWantAmount()};V={TransactionType:"AMMWithdraw",Account:e.classicAddress,Asset:x,Asset2:k,Amount:R,Flags:bo.AMMWithdrawFlags.tfSingleAsset,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME}}else V={TransactionType:"AMMWithdraw",Account:e.classicAddress,Asset:x,Asset2:k,Amount:bo.xrpToDrops(this.weSpendAmount()),Flags:bo.AMMWithdrawFlags.tfSingleAsset,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,V,e,i,"withdrawlFromAmm");let O=yield this.txExecutor.withdrawlFromAMM(V,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!O.success)return this.txUiService.setError(`${O.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated AMM Withdraw successfully!":"AMM Withdraw successfully!",this.txUiService.isSimulateEnabled()||(this.withdrawlLpTokenFromPoolField.set(""),yield this.refreshAfterTx(t,e,null,!1))}catch(t){console.error("Error in withdrawlTokenFromAMM:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}clawbackFromAMM(){return z(this,null,function*(){yield this.withPerf("clawbackFromAMM",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.xrplService.getClient(),this.getWallet()]),[i,r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),l={currency:this.weSpendCurrency()==="XRP"?"XRP":this.utilsService.encodeIfNeeded(this.weSpendCurrency()),issuer:this.weSpendCurrency()!=="XRP"?this.weSpendIssuer():""},c={currency:this.weWantCurrency()==="XRP"?"XRP":this.utilsService.encodeIfNeeded(this.weWantCurrency()),issuer:this.weWantCurrency()!=="XRP"?this.weWantIssuer():""},d=yield this.checkAmmParticipation(t,e.classicAddress,l,c);if(this.utilsService.logObjects("participation:",d),!d?.lpTokens?.[0])return this.txUiService.setError("No LP token found for this AMM pool");let u=d.lpTokens[0],h=parseFloat(u.balance);if(parseFloat(this.lpTokenBalanceField())>h)return this.txUiService.setError(`Insufficient LP token balance. Available: ${h}`);let p={currency:u.currency,issuer:u.issuer,value:this.lpTokenBalanceField()},y={TransactionType:"AMMClawback",Account:e.classicAddress,Asset:l,Asset2:c,Amount:p,Holder:this.holderField(),LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME,Fee:o};yield this.setTxOptionalFields(t,y,e,i,"clawbackFromAmm");let v=yield this.txExecutor.clawbackFromAMM(y,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!v.success)return this.txUiService.setError(`${v.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated AMM Clawback successfully!":"AMM Clawback successful!",this.txUiService.isSimulateEnabled()||(this.withdrawlLpTokenFromPoolField.set(""),yield this.refreshAfterTx(t,e,null,!1))}catch(t){console.error("Error in clawbackFromAMM:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}swapViaAMM(){return z(this,null,function*(){yield this.withPerf("swapViaAMM",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.xrplService.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),a=this.toXRPLCurrency(this.utilsService.encodeIfNeeded(this.weWantCurrency()),"r9DZiCr2eejjRUqqTnTahL5UpLfku9Fe9D"),l=this.toXRPLCurrency(this.utilsService.encodeIfNeeded(this.weSpendCurrency()),"r9DZiCr2eejjRUqqTnTahL5UpLfku9Fe9D"),c=this.weWantCurrency()==="XRP"?bo.xrpToDrops(this.weWantAmount().toString()):{currency:a.currency,issuer:a.issuer,value:this.weWantAmount().toString()},d={TransactionType:"Payment",Account:e.classicAddress,Destination:e.classicAddress,Amount:c,SendMax:this.weSpendCurrency()==="XRP"?bo.xrpToDrops(this.weSpendAmount().toString()):{currency:l.currency,issuer:l.issuer,value:"10"},Fee:r,Flags:131072,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,i,"swamViaAMM");let u=yield this.txExecutor.swapViaAMM(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Swap via AMM successfully!":"Swap via AMM successful!",this.txUiService.isSimulateEnabled()||(this.withdrawlLpTokenFromPoolField.set(""),yield this.refreshAfterTx(t,e,null,!1))}catch(t){console.error("Error in swapViaAMM:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}deleteAMM(){return z(this,null,function*(){yield this.withPerf("deleteAMM",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.xrplService.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),a=this.toCurrency(this.utilsService.encodeIfNeeded(this.weWantCurrency()),this.weWantIssuer()),l=this.toCurrency(this.utilsService.encodeIfNeeded(this.weSpendCurrency()),this.weSpendIssuer()),c={TransactionType:"AMMDelete",Account:e.classicAddress,Asset:a,Asset2:l,Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,c,e,i,"deleteAMM");let d=yield this.txExecutor.deleteAMM(c,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!d.success)return this.txUiService.setError(`${d.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated AMM delete successfully!":"Deleted AMM successfully!",this.txUiService.isSimulateEnabled()||(this.withdrawlLpTokenFromPoolField.set(""),yield this.refreshAfterTx(t,e,null,!1))}catch(t){console.error("Error in deleteAMM:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if((o==="createAmm"||o==="swamViaAMM"||o==="depositToAmm"||o==="withdrawlFromAmm"||o==="clawbackFromAmm")&&this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}o==="swamViaAMM"&&this.destinationTagField()&&Number.parseInt(this.destinationTagField())>0&&this.utilsService.setDestinationTag(e,this.destinationTagField()),this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),yield this.offerCurrency.refreshBothBalances(this.currentWallet()),yield this.getAMMPoolInfo(!0,!1),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}clearFields(){this.weSpendAmount.set(""),this.weWantAmount.set("")}checkAmmParticipation(t,e,i,r,o=!1){return z(this,null,function*(){let s={isAmmPool:!1,isLiquidityProvider:!1,ammInfo:void 0,lpTokens:[]};try{let a=yield this.xrplService.getAMMInfo(t,i,r,e,"validated");if(a.result&&a.result.amm){if(this.utilsService.logObjects("checkAmmParticipation",a),s.isAmmPool=!0,s.ammInfo=a.result.amm,s.lpTokens.push({issuer:a.result.amm.account,currency:a.result.amm.lp_token.currency,balance:a.result.amm.lp_token.value}),o){this.lpTokenBalance.set(a.result.amm.lp_token.value);let l=c=>{let d=typeof c=="string"?bo.dropsToXrp(c):c.value;return this.utilsService.formatTokenBalance(d,18)};this.assetPool1Balance.set(l(s.ammInfo.amount)),this.assetPool2Balance.set(l(s.ammInfo.amount2))}}else o&&(this.lpTokenBalance.set("0"),this.assetPool1Balance.set("0"),this.assetPool2Balance.set("0"))}catch(a){console.warn("Not an AMM account:",a)}return s})}selectDepositOption(t){this.depositOptions.set({bothPools:t==="bothPools",firstPoolOnly:t==="firstPoolOnly",secondPoolOnly:t==="secondPoolOnly"})}selectWithdrawOption(t){this.withdrawOptions.set({bothPools:t==="bothPools",firstPoolOnly:t==="firstPoolOnly",secondPoolOnly:t==="secondPoolOnly"})}toXRPLCurrency(t,e){return t==="XRP"?{currency:"XRP"}:{currency:t,issuer:e}}toCurrency(t,e){return t==="XRP"?{currency:"XRP"}:{currency:t,issuer:e}}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}addNewDestinationFromUser(t){t&&bo.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}updateInfoMessage(){let t=this.currentWallet().name||"selected",e=this.existingOffers.length,i;if(e===0)i=`<code>${t}</code> wallet has no NFTs or NFT offers.`;else{let r=[];if(e>0){let a=e===1?"NFT":"NFTs";r.push(`${e} ${a}`)}let o;if(r.length===1)o=r[0];else{let a=r.pop();o=`${r.join(", ")} and ${a}`}i=`<code>${t}</code> wallet has <strong>${o}</strong>.`;let s=`${this.txUiService.explorerUrl()}account/${this.currentWallet().address}/objects`;i+=`<br><a href="${s}" target="_blank" rel="noopener noreferrer" class="xrpl-win-link">View AMM on XRPL Win</a>`}this.txUiService.setInfoMessage(i)}onWeWantIssuerSelected(t){let e=t?.id||"";this.weWantIssuer.set(e),this.offerCurrency.selectWeWantIssuer(e,this.currentWallet()),this.ammInfoTrigger.next()}onWeSpendIssuerSelected(t){let e=t?.id||"";this.weSpendIssuer.set(e),this.offerCurrency.selectWeSpendIssuer(e,this.currentWallet()),this.ammInfoTrigger.next()}onWeWantCurrencySelected(t){let e=t?.id||"XRP";this.weWantCurrency.set(e),this.offerCurrency.selectWeWantCurrency(e,this.currentWallet()),this.ammInfoTrigger.next()}onWeSpendCurrencySelected(t){let e=t?.id||"XRP";this.weSpendCurrency.set(e),this.offerCurrency.selectWeSpendCurrency(e,this.currentWallet()),this.ammInfoTrigger.next()}onWeWantCurrencyChange(){return z(this,null,function*(){this.offerCurrency.selectWeWantCurrency(this.weWantCurrency(),this.currentWallet()),this.ammInfoTrigger.next()})}onWeSpendCurrencyChange(){return z(this,null,function*(){this.offerCurrency.selectWeSpendCurrency(this.weSpendCurrency(),this.currentWallet()),this.ammInfoTrigger.next()})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-amm"]],features:[Lt],decls:55,vars:31,consts:[["theForm","ngForm"],["itemTemplate",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],["name","heroCurrencyDollar","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"warning-panel"],[1,"outstanding-checks-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[1,"form-row"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],["name","heroCurrencyDollar","size","27",1,"text-red-600"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"panel-header",2,"cursor","pointer","user-select","none",3,"click"],[1,"panel-title",2,"margin","0","font-size","0.8rem","display","flex","align-items","center","gap","0.5rem"],["name","heroQueueList","size","20",1,"text-red-600"],[1,"checks-list-container"],[1,"checks-list"],[1,"check-card"],[1,"check-extras"],[1,"badge","badge-expire"],[1,"badge","badge-expire-not-set"],[1,"line-break"],[1,"badge","badge-tag"],[1,"badge","badge-tag-not-set"],[1,"form-group"],["tooltip-data","Asset 1.",1,"tooltip"],["for","weWantCurrencyField"],["tooltip-data","Asset 2.",1,"tooltip"],["for","weSpendCurrencyField"],["for","weWantCurrency"],[1,"form-hint"],["placeholder","Search currency code...","emptyMessage","No currencies available",3,"valueChange","items","value","showShortAddress"],["for","weSpendCurrency"],["for","weWantIssuer"],["placeholder","Search issuer address or name...","emptyMessage","No issuers available for this currency",3,"valueChange","items","value","showShortAddress"],["type","text","name","weWantAmountField","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["type","text","name","weSpendAmount","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["type","text","readonly","","name","weWantTokenBalanceField",3,"value"],["type","text","readonly","","name","weSpendTokenBalanceField",3,"value"],["type","text","readonly","","name","assetPool1Balance",3,"value"],["type","text","readonly","","name","assetPool2Balance",3,"value"],[1,"flex","items-center","gap-2"],[1,"text-yellow-500","font-bold"],[1,"text-xs","text-gray-500"],[1,"flex","flex-col"],[1,"font-medium"],["type","text","readonly","","name","lpTokenBalanceField",3,"value"],["type","text","name","tradingFeeField","placeholder","e.g. 500 is 0.05%",3,"ngModelChange","ngModel"],["type","text","name","holderField","placeholder","",3,"ngModelChange","ngModel"],["type","text","name","withdrawlLpTokenFromPoolField","placeholder","",3,"ngModelChange","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["type","text","name","destinationTagField",3,"ngModelChange","ngModel"],[2,"margin-top","0.8em","padding","0px"],[2,"margin-top","0.8em"],[2,"padding","0px"],["tooltip-data","Select deposit option(s) for the AMM pool",1,"tooltip"],[2,"display","flex","gap","10px","flex-wrap","wrap"],["tooltip-data","Deposit currency into both pools.",1,"tooltip"],["type","checkbox","id","isDepositIntoBothPools",3,"change","checked"],["for","isDepositIntoBothPools"],["tooltip-data","Deposit currency into the first pool only.",1,"tooltip"],["type","checkbox","id","isDepositIntoFirstPoolOnly",3,"change","checked"],["for","isDepositIntoFirstPoolOnly"],["tooltip-data","Deposit currency into the second pool only.",1,"tooltip"],["type","checkbox","id","isDepositIntoSecondPoolOnly",3,"change","checked"],["for","isDepositIntoSecondPoolOnly"],["tooltip-data","Select withdrawal option(s) for the AMM pool",1,"tooltip"],["tooltip-data","Withdraw currency from both pools.",1,"tooltip"],["type","checkbox","id","isWithdrawFromBothPools",3,"change","checked"],["for","isWithdrawFromBothPools"],["tooltip-data","Withdraw currency from the first pool only.",1,"tooltip"],["type","checkbox","id","isWithdrawFromFirstPoolOnly",3,"change","checked"],["for","isWithdrawFromFirstPoolOnly"],["tooltip-data","Withdraw currency from the second pool only.",1,"tooltip"],["type","checkbox","id","isWithdrawFromSecondPoolOnly",3,"change","checked"],["for","isWithdrawFromSecondPoolOnly"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",2),ee(1,"app-navbar"),m(2,"main",3)(3,"div",4)(4,"div",5)(5,"app-wallet-panel",6),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",7)(7,"div",8)(8,"button",9),X("click",function(){return U(r),j(i.setTab("createAMM"))}),ee(9,"ng-icon",10),w(10," Create AMM "),g(),m(11,"button",9),X("click",function(){return U(r),j(i.setTab("depositToAMM"))}),ee(12,"ng-icon",11),w(13," Deposit to AMM "),g(),m(14,"button",9),X("click",function(){return U(r),j(i.setTab("withdrawlTokenFromAMM"))}),ee(15,"ng-icon",11),w(16," Withdrawl from AMM "),g(),m(17,"button",9),X("click",function(){return U(r),j(i.setTab("clawbackFromAMM"))}),ee(18,"ng-icon",11),w(19," Clawback from AMM "),g(),m(20,"button",9),X("click",function(){return U(r),j(i.setTab("swapViaAMM"))}),ee(21,"ng-icon",11),w(22," Swap via AMM "),g(),m(23,"button",9),X("click",function(){return U(r),j(i.setTab("deleteAMM"))}),ee(24,"ng-icon",12),w(25," Delete AMM "),g()(),Q(26,mQe,9,0,"div"),Q(27,gQe,9,0,"div"),Q(28,yQe,9,0,"div"),Q(29,vQe,9,0,"div"),Q(30,_Qe,9,0,"div"),Q(31,bQe,9,0,"div"),Q(32,wQe,3,1,"div",13),Q(33,BQe,7,8,"div",14),m(34,"form",15,0)(36,"div")(37,"div",16)(38,"div",17),Q(39,QQe,67,21),Q(40,JQe,11,3,"div",18),Q(41,nJe,2,1),g()(),ee(42,"app-transaction-options",19),m(43,"div",20),Q(44,iJe,2,2,"button",21)(45,rJe,2,2,"button",22)(46,oJe,2,2,"button",22)(47,sJe,2,2,"button",23)(48,aJe,2,2,"button",22)(49,lJe,2,2,"button",23),m(50,"button",24),X("click",function(){return U(r),j(i.clearFields())}),w(51,"Clear Fields"),g()(),m(52,"div",25)(53,"input",26),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(54,"app-transaction-preview"),g()()()()()()()}e&2&&(_(8),Ue("active",i.activeTab()==="createAMM"),_(3),Ue("active",i.activeTab()==="depositToAMM"),_(3),Ue("active",i.activeTab()==="withdrawlTokenFromAMM"),_(3),Ue("active",i.activeTab()==="clawbackFromAMM"),_(3),Ue("active",i.activeTab()==="swapViaAMM"),_(3),Ue("active",i.activeTab()==="deleteAMM"),_(3),J(i.activeTab()==="createAMM"?26:-1),_(),J(i.activeTab()==="depositToAMM"?27:-1),_(),J(i.activeTab()==="withdrawlTokenFromAMM"?28:-1),_(),J(i.activeTab()==="clawbackFromAMM"?29:-1),_(),J(i.activeTab()==="swapViaAMM"?30:-1),_(),J(i.activeTab()==="deleteAMM"?31:-1),_(),J(i.txUiService.warningMessage?32:-1),_(),J(i.existingOffers.length>0?33:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()==="createAMM"||i.activeTab()==="depositToAMM"||i.activeTab()==="withdrawlTokenFromAMM"||i.activeTab()==="clawbackFromAMM"||i.activeTab()==="swapViaAMM"||i.activeTab()==="deleteAMM"?39:-1),_(),J(i.activeTab()==="swapViaAMM"?40:-1),_(),J(i.activeTab()==="depositToAMM"||i.activeTab()==="withdrawlTokenFromAMM"?41:-1),_(),oe("showWhenTab",Ei(30,fQe))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="createAMM"?44:i.activeTab()==="depositToAMM"?45:i.activeTab()==="withdrawlTokenFromAMM"?46:i.activeTab()==="clawbackFromAMM"?47:i.activeTab()==="swapViaAMM"?48:i.activeTab()==="deleteAMM"?49:-1),_(9),Oe("ngModel",i.executionTime))},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var CS=_i(Ki());var cJe=()=>["setTrustline","removeTrustline","issueCurrency","clawbackTokens"],dJe=(n,t)=>t.currency+t.issuer;function uJe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",30),ee(3,"ng-icon",31),g(),m(4,"div")(5,"h2",32),w(6,"Set Trustline"),g(),m(7,"p",33),w(8,"Set a trustline to another XRPL address"),g()()()())}function hJe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",34),ee(3,"ng-icon",35),g(),m(4,"div")(5,"h2",32),w(6,"Remove Trustline"),g(),m(7,"p",33),w(8,"Remove trustline to another XRPL address"),g()()()())}function fJe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",36),ee(3,"ng-icon",37),g(),m(4,"div")(5,"h2",32),w(6,"Issue Currency"),g(),m(7,"p",33),w(8,"Issue currency to another XRPL address"),g()()()())}function pJe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",34),ee(3,"ng-icon",35),g(),m(4,"div")(5,"h2",32),w(6,"Clawback Tokens"),g(),m(7,"p",33),w(8,"Clawback tokens from another XRPL address"),g()()()())}function mJe(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",30),ee(3,"ng-icon",38),g(),m(4,"div")(5,"h2",32),w(6,"Add/Remove Issuers"),g(),m(7,"p",33),w(8,"Add issuers and tokens from external sources."),g()()()())}function gJe(n,t){n&1&&w(0," has no trustlines. ")}function yJe(n,t){n&1&&w(0," available to set. ")}function vJe(n,t){n&1&&w(0," that can be removed. ")}function _Je(n,t){n&1&&w(0," available for issuing tokens. ")}function bJe(n,t){n&1&&w(0," that support clawback. ")}function wJe(n,t){n&1&&w(0," configured. ")}function SJe(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3),Q(4,yJe,1,0)(5,vJe,1,0)(6,_Je,1,0)(7,bJe,1,0)(8,wJe,1,0)),n&2){let e,i=E();_(2),Ee(i.trustlineCount),_(),je(" trustline",i.trustlineCount===1?"":"s"," "),_(),J((e=i.activeTab)==="setTrustline"?4:e==="removeTrustline"?5:e==="issueCurrency"?6:e==="clawbackTokens"?7:e==="addNewIssuers"?8:-1)}}function CJe(n,t){if(n&1&&(m(0,"div",44),ee(1,"span",46),w(2," on XRPL Win"),g()),n&2){let e=E();_(),oe("innerHTML",e.links,pn)}}function xJe(n,t){n&1&&w(0," Available Trustlines ")}function kJe(n,t){n&1&&w(0," Removable Trustlines ")}function MJe(n,t){n&1&&w(0," Issuable Trustlines ")}function TJe(n,t){n&1&&w(0," Clawback-Enabled Trustlines ")}function EJe(n,t){n&1&&w(0," Configured Trustlines ")}function AJe(n,t){if(n&1&&(m(0,"span",55),w(1),g()),n&2){let e=E().$implicit;_(),je(" ",e.balance," held ")}}function DJe(n,t){if(n&1&&(m(0,"div"),w(1),g()),n&2){let e=E().$implicit;_(),je("Flags: ",e.flags.join(", "))}}function IJe(n,t){if(n&1){let e=ge();m(0,"li",52)(1,"app-tooltip-link",53)(2,"div",54)(3,"strong"),w(4),g(),Q(5,AJe,2,1,"span",55),g(),m(6,"div",56)(7,"div"),w(8,"Issuer: "),m(9,"code"),w(10),g()(),m(11,"div"),w(12),g(),Q(13,DJe,2,1,"div"),g()(),m(14,"button",57),X("click",function(r){let o=U(e).$implicit;return E(5).copyAndToast(o.issuer,"Issuer Address"),j(r.stopPropagation())}),lt(),m(15,"svg",58),ee(16,"rect",59)(17,"path",60),g()()()}if(n&2){let e=t.$implicit,i=E(5);_(),oe("href",i.txUiService.explorerUrl()+"account/"+e.issuer+"/tokens"),_(3),Ee(e.currency),_(),J(e.balance!=="0"?5:-1),_(5),ei("",e.issuer.slice(0,10),"...",e.issuer.slice(-8)),_(2),ei("Limit: ",e.limit," \u2022 Balance: ",e.balance),_(),J(e.flags.length>0?13:-1)}}function FJe(n,t){if(n&1&&(m(0,"ul",51),yn(1,IJe,18,8,"li",52,dJe),g()),n&2){let e=E(2);_(),vn(e.trustlinesToShow)}}function PJe(n,t){if(n&1){let e=ge();m(0,"div",47),X("click",function(){U(e);let r=E(3);return j(r.toggleInfoPanel())}),m(1,"div",48)(2,"span"),Q(3,xJe,1,0)(4,kJe,1,0)(5,MJe,1,0)(6,TJe,1,0)(7,EJe,1,0),w(8),g(),lt(),m(9,"svg",49),ee(10,"path",50),g()(),Q(11,FJe,3,0,"ul",51),g()}if(n&2){let e,i=E(),r=E(2);_(3),J((e=i.activeTab)==="setTrustline"?3:e==="removeTrustline"?4:e==="issueCurrency"?5:e==="clawbackTokens"?6:e==="addNewIssuers"?7:-1),_(5),je(" (",i.trustlineCount,") "),_(),In("transform",r.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(r.infoPanelExpanded()?11:-1)}}function LJe(n,t){if(n&1&&(m(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",42),ee(4,"ng-icon",43),m(5,"code"),w(6),g(),Q(7,gJe,1,0)(8,SJe,9,3),Q(9,CJe,3,1,"div",44),g(),Q(10,PJe,12,5,"div",45),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.trustlineCount===0?7:8),_(2),J(e.links?9:-1),_(),J(e.trustlineCount>0?10:-1)}}function RJe(n,t){if(n&1&&Q(0,LJe,11,4,"div",39),n&2){let e,i=E();J((e=i.infoData())?0:-1,e)}}function OJe(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",61)(2,"div",62),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function NJe(n,t){n&1&&(m(0,"span",72),w(1,"XRP"),g())}function BJe(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function VJe(n,t){if(n&1&&(m(0,"div",71),Q(1,NJe,2,0,"span",72)(2,BJe,2,1,"span"),m(3,"span",73),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function UJe(n,t){if(n&1){let e=ge();m(0,"div",19)(1,"div",63)(2,"label",64),w(3,"Currency Code"),g(),m(4,"p",65),w(5,"Issued asset combined with the issuer to uniquely define a token."),g(),m(6,"app-select-search-dropdown",66),X("valueChange",function(r){U(e);let o=E();return j(o.onCurrencySelected(r))}),nn(7,VJe,5,2,"ng-template",null,1,vr),g()(),m(9,"div",63)(10,"label",67),w(11,"Issuer"),g(),m(12,"p",65),w(13,"The XRPL account that issues and controls this currency."),g(),m(14,"app-select-search-dropdown",68),X("valueChange",function(r){U(e);let o=E();return j(o.onIssuerSelected(r))}),g()()(),m(15,"div",19)(16,"div",63)(17,"label"),w(18,"Amount"),g(),m(19,"p",65),w(20,"Amount of currency to use in the transaction."),g(),m(21,"input",69),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()(),m(22,"div",63)(23,"label"),w(24,"Currency Balance"),g(),m(25,"p",65),w(26,"Total currency balance held by this account."),g(),m(27,"input",70),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.currencyBalanceField,r)||(o.currencyBalanceField=r),j(r)}),g()()()}if(n&2){let e=E();_(6),oe("items",e.currencyItems())("value",e.selectedCurrencyItem())("showShortAddress",!1),_(8),oe("items",e.issuerItems())("value",e.selectedIssuerItem()),_(7),Oe("ngModel",e.amountField),_(6),Oe("ngModel",e.currencyBalanceField)}}function jJe(n,t){n&1&&(m(0,"p",65),w(1,"The unique address of the account receiving the payment."),g())}function HJe(n,t){n&1&&(m(0,"p",65),w(1,"Tokens will be clawback from this address."),g())}function WJe(n,t){if(n&1){let e=ge();m(0,"div",63)(1,"label"),w(2,"Destination Tag"),g(),m(3,"p",65),w(4,"Arbitrary tag that identifies the reason for the payment."),g(),m(5,"input",76),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.destinationTagField,r)||(o.destinationTagField=r),j(r)}),g()()}if(n&2){let e=E(2);_(5),Oe("ngModel",e.destinationTagField)}}function zJe(n,t){if(n&1){let e=ge();m(0,"div",19)(1,"div",63)(2,"label",74),w(3,"Destination"),g(),Q(4,jJe,2,0,"p",65)(5,HJe,2,0,"p",65),m(6,"app-select-search-dropdown",75),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()(),Q(7,WJe,6,1,"div",63),g()}if(n&2){let e=E();_(4),J(e.activeTab()==="issueCurrency"?4:5),_(2),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(),J(e.activeTab()==="issueCurrency"?7:-1)}}function qJe(n,t){n&1&&(m(0,"span",72),w(1,"XRP"),g())}function $Je(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function KJe(n,t){if(n&1&&(m(0,"div",71),Q(1,qJe,2,0,"span",72)(2,$Je,2,1,"span"),m(3,"span",73),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function GJe(n,t){if(n&1){let e=ge();m(0,"div",19)(1,"div",63)(2,"label"),w(3,"Add Currency Code"),g(),m(4,"p",65),w(5,"Add a unique currency code to this application."),g(),m(6,"input",77),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.newCurrency,r)||(o.newCurrency=r),j(r)}),g()(),m(7,"div",63)(8,"label"),w(9,"Add Issuer Address"),g(),m(10,"p",65),w(11,"Add a unique issuer address to this application."),g(),m(12,"input",78),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.newIssuer,r)||(o.newIssuer=r),j(r)}),g()()(),m(13,"div",19)(14,"button",79),X("click",function(){U(e);let r=E();return j(r.addNewCurrencyIssuer())}),w(15),g()(),m(16,"div",19)(17,"div",63)(18,"label"),w(19,"Select Currency"),g(),m(20,"p",65),w(21,"Remove a unique currency code to this application."),g(),m(22,"app-select-search-dropdown",80),X("valueChange",function(r){U(e);let o=E();return j(o.onCurrencySelected(r))}),nn(23,KJe,5,2,"ng-template",null,1,vr),g()(),m(25,"div",63)(26,"label"),w(27,"Select Issuer"),g(),m(28,"p",65),w(29,"Remove a unique issuer address from this application."),g(),m(30,"app-select-search-dropdown",81),X("valueChange",function(r){U(e);let o=E();return j(o.onIssuerSelected(r))}),g()()(),m(31,"div",19)(32,"button",82),X("click",function(){U(e);let r=E();return j(r.removeCurrentCurrencyIssuer())}),w(33),g()()}if(n&2){let e=E();_(6),Oe("ngModel",e.newCurrency),_(6),Oe("ngModel",e.newIssuer),_(2),oe("disabled",!e.isAddValid()||e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Adding...":"Add Currency/Issuer"),_(7),oe("items",e.currencyItems())("value",e.selectedCurrencyItem())("showShortAddress",!1),_(8),oe("items",e.issuerItems())("value",e.selectedIssuerItem()),_(2),oe("disabled",!e.isRemoveValid()||e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Removing...":"Remove Selected Issuer")}}function XJe(n,t){if(n&1){let e=ge();m(0,"div",90),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("tfSetfAuth"))}),m(1,"div",91),ee(2,"input",92),lt(),m(3,"svg",93),ee(4,"path",94)(5,"circle",95),g(),dn(),m(6,"span",96),w(7,"SetfAuth"),g()(),m(8,"div",97),w(9,"0x00010000"),g(),m(10,"div",98),w(11,"Authorize the other party to hold currency issued by this account. (No effect unless using the "),m(12,"code"),w(13,"asfRequireAuth"),g(),w(14," AccountSet flag.) Cannot be unset."),g()(),m(15,"div",90),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("tfSetNoRipple"))}),m(16,"div",91),ee(17,"input",92),lt(),m(18,"svg",93),ee(19,"path",99),g(),dn(),m(20,"span",96),w(21,"SetNoRipple"),g()(),m(22,"div",97),w(23,"0x00020000"),g(),m(24,"div",98),w(25,"Enable the No Ripple flag, which blocks rippling between two trust lines of the same currency if this flag is enabled on both."),g()(),m(26,"div",90),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("tfSetFreeze"))}),m(27,"div",91),ee(28,"input",92),lt(),m(29,"svg",93),ee(30,"path",100),g(),dn(),m(31,"span",96),w(32,"SetFreeze"),g()(),m(33,"div",97),w(34,"0x00100000"),g(),m(35,"div",98),w(36,"Freeze the trustline (prevent transfers)."),g()(),m(37,"div",90),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("tfSetDeepFreeze"))}),m(38,"div",91),ee(39,"input",92),lt(),m(40,"svg",93),ee(41,"path",101),g(),dn(),m(42,"span",96),w(43,"SetDeepFreeze"),g()(),m(44,"div",97),w(45,"0x00400000"),g(),m(46,"div",98),w(47,"Deep-Freeze (block sending & receiving). Requires freeze first."),g()()}if(n&2){let e=E(2);Ue("enabled",e.flags.tfSetfAuth),_(2),oe("checked",e.flags.tfSetfAuth),_(13),Ue("enabled",e.flags.tfSetNoRipple),_(2),oe("checked",e.flags.tfSetNoRipple),_(9),Ue("enabled",e.flags.tfSetFreeze),_(2),oe("checked",e.flags.tfSetFreeze),_(9),Ue("enabled",e.flags.tfSetDeepFreeze),_(2),oe("checked",e.flags.tfSetDeepFreeze)}}function YJe(n,t){n&1&&(m(0,"span",105),w(1,"(Required)"),g())}function ZJe(n,t){n&1&&(m(0,"span",105),w(1,"(Required)"),g())}function QJe(n,t){n&1&&(m(0,"span",105),w(1,"(Required)"),g())}function JJe(n,t){if(n&1&&(m(0,"div",102)(1,"div",91),ee(2,"input",103),lt(),m(3,"svg",93),ee(4,"path",104),g(),dn(),m(5,"span",96),w(6,"ClearNoRipple"),g(),Q(7,YJe,2,0,"span",105),g(),m(8,"div",97),w(9,"0x00040000"),g(),m(10,"div",98),w(11,"Required to remove trustline when NoRipple is enabled."),g()(),m(12,"div",102)(13,"div",91),ee(14,"input",103),lt(),m(15,"svg",93),ee(16,"path",100),g(),dn(),m(17,"span",96),w(18,"ClearFreeze"),g(),Q(19,ZJe,2,0,"span",105),g(),m(20,"div",97),w(21,"0x00200000"),g(),m(22,"div",98),w(23,"Required to remove a frozen trustline."),g()(),m(24,"div",102)(25,"div",91),ee(26,"input",103),lt(),m(27,"svg",93),ee(28,"path",101),g(),dn(),m(29,"span",96),w(30,"ClearDeepFreeze"),g(),Q(31,QJe,2,0,"span",105),g(),m(32,"div",97),w(33,"0x00800000"),g(),m(34,"div",98),w(35,"Required to remove a deep-frozen trustline."),g()(),m(36,"div",106)(37,"strong"),w(38,"Note:"),g(),w(39," Setting limit to 0 removes ability to hold balance. The trustline remains in the ledger (normal XRPL behavior). This app hides zero-limit lines."),g()),n&2){let e=E(2);Ue("enabled",e.flags.tfClearNoRipple),_(2),oe("checked",e.flags.tfClearNoRipple)("disabled",!0),_(5),J(e.flags.tfClearNoRipple?7:-1),_(5),Ue("enabled",e.flags.tfClearFreeze),_(2),oe("checked",e.flags.tfClearFreeze)("disabled",!0),_(5),J(e.flags.tfClearFreeze?19:-1),_(5),Ue("enabled",e.flags.tfClearDeepFreeze),_(2),oe("checked",e.flags.tfClearDeepFreeze)("disabled",!0),_(5),J(e.flags.tfClearDeepFreeze?31:-1)}}function eet(n,t){if(n&1&&(m(0,"div",20)(1,"div",83)(2,"div",84),ee(3,"lucide-icon",85),m(4,"span",86),w(5,"Trustline Flags"),g()(),Q(6,XJe,48,12),Q(7,JJe,40,15),m(8,"div",87)(9,"span",88),w(10,"Total Flags Value:"),g(),m(11,"span",89),w(12),g()()()()),n&2){let e=E();_(6),J(e.activeTab()==="setTrustline"?6:-1),_(),J(e.activeTab()==="removeTrustline"?7:-1),_(5),ei("",e.totalFlagsValue()," (",e.totalFlagsHex(),")")}}function tet(n,t){if(n&1){let e=ge();m(0,"button",79),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.setTrustLine())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Set Trustline")}}function net(n,t){if(n&1){let e=ge();m(0,"button",82),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.removeTrustline())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Remove Trustline")}}function iet(n,t){if(n&1){let e=ge();m(0,"button",107),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.issueCurrency())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Issue Currency")}}function ret(n,t){if(n&1){let e=ge();m(0,"button",82),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.clawbackTokens())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Clawback Tokens")}}function oet(n,t){if(n&1){let e=ge();m(0,"button",108),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.clearFields(!0))}),w(2,"Clear Fields"),g()}if(n&2){let e=E();oe("disabled",!mt(1,1,e.walletManagerService.hasWallets$))}}var $8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("setTrustline");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");sourceTagField=P("");invoiceIdField=P("");currencyFieldDropDownValue=P("XRP");checkExpirationTime=P("seconds");issuerFields=P("");expirationTimeField=P("");ticketSequence=P("");checkIdField=P("");outstandingChecks=P("");mptIssuanceIdField=P("");isMptEnabled=P(!1);currencyBalanceField=P("0");gatewayBalance=P("0");issuerToRemove=P("");currencies=P([]);userAddedCurrencyFieldDropDownValue=P([]);userAddedissuerFields=P("");selectedIssuer=P("");newCurrency=P("");newIssuer=P("");tokenToRemove=P("");selectedWalletIndex=P(0);issuers=P([]);lastCurrency=P("");lastIssuer=P("");cancellableChecks=P([]);cashableChecks=P([]);existingChecks=P([]);outstandingChecksCollapsed=P(!0);currencyChangeTrigger=P(0);showTrustlineOptions=P(!1);existingMptsCollapsed=P(!0);outstandingIOUCollapsed=P(!0);trustlineFlags=le({},Re.TRUSTLINE.FLAGS);trustlineFlagList=Re.TRUSTLINE.FLAG_LIST;flagMap=Re.TRUSTLINE.FLAG_MAP;ledgerFlagMap=Re.TRUSTLINE.LEDGER_FLAG_MAP;accountTrustlines=P([]);existingMpts=P([]);existingIOUs=P([]);flags={tfSetfAuth:!1,tfSetNoRipple:!1,tfClearNoRipple:!1,tfSetFreeze:!1,tfClearFreeze:!1,tfSetDeepFreeze:!1,tfClearDeepFreeze:!1};totalFlagsValue=P(0);totalFlagsHex=P("0x0");flagValues={tfSetfAuth:65536,tfSetNoRipple:131072,tfClearNoRipple:262144,tfSetFreeze:1048576,tfClearFreeze:2097152,tfSetDeepFreeze:4194304,tfClearDeepFreeze:8388608};selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});currencyItems=_e(()=>{let t=this.currencyFieldDropDownValue();return this.availableCurrencies.map(e=>({id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":(()=>{let i=this.trustlineCurrency.getIssuersForCurrency(e).length;return i===0?"No issuers":`${i} issuer${i!==1?"s":""}`})(),isCurrentAccount:!1,isCurrentCode:e===t,isCurrentToken:!1}))});selectedCurrencyItem=_e(()=>{let t=this.currencyFieldDropDownValue();return t&&this.currencyItems().find(e=>e.id===t)||null});onCurrencySelected(t){let e=t?.id||"XRP";this.currencyFieldDropDownValue.set(e),this.onCurrencyChange(e)}destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});issuerItems=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return this.issuers().map((e,i)=>({id:e.address,display:e.name||`Issuer ${i+1}`,secondary:e.address.slice(0,7)+"..."+e.address.slice(-7),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:e.address===t}))});selectedIssuerAddress=_e(()=>this.trustlineCurrency.getSelectedIssuer());selectedIssuerItem=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return t&&this.issuerItems().find(e=>e.id===t)||null});onIssuerSelected(t){let e=t?.id||"";this.trustlineCurrency.selectIssuer(e),this.onIssuerChange(e)}infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=this.txUiService.explorerUrl(),r=t.address,o=this.existingIOUs(),s=o.length,a=s>0?`<a href="${i}account/${r}/tokens" target="_blank" rel="noopener noreferrer" class="xrpl-win-link">View tokens</a>`:"",l=this.infoPanelExpanded()?o.map(c=>{let d=c.Balance.value,u=c.HighLimit?.issuer===r?c.HighLimit.value:c.LowLimit?.value,h=c.HighLimit?.issuer===r?c.LowLimit.issuer:c.HighLimit?.issuer,f=Object.entries(Re.TRUSTLINE.LEDGER_FLAG_MAP).filter(([p,y])=>c.Flags&y).map(([p])=>p.replace("lsf","").replace(/([A-Z])/g," $1").trim());return{currency:c.Balance.currency,issuer:h,balance:d,limit:u,flags:f}}):[];return{walletName:e,activeTab:this.activeTab(),trustlineCount:s,trustlinesToShow:l,links:a}});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.currencyFieldDropDownValue.set("XRP"),this.trustlineCurrency.currencies$.subscribe(t=>{this.currencies.set(t),t.length>0&&!this.currencyFieldDropDownValue()&&(this.currencyFieldDropDownValue.set(t[0]),this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address))}),this.trustlineCurrency.issuers$.subscribe(t=>{this.issuers.set(t)}),this.trustlineCurrency.selectedIssuer$.subscribe(t=>{this.issuerFields.set(t)}),this.trustlineCurrency.balance$.subscribe(t=>{this.currencyBalanceField.set(t)})}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.clearFields(!0),this.selectWallet(i))}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.clearFields(!0),yield this.getTrustlinesForAccount(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleExistingMpts(){this.existingMptsCollapsed.set(!this.existingMptsCollapsed())}toggleOutstandingIOU(){this.outstandingIOUCollapsed.set(!this.outstandingIOUCollapsed())}onFlagChange(t){this.trustlineFlags[t]&&Re.TRUSTLINE.CONFLICTS[t]?.forEach(e=>{this.trustlineFlags[e]=!1})}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}setTab(t){return z(this,null,function*(){if(this.activeTab.set(t),this.destinationSearchQuery.set(""),this.activeTab()==="removeTrustline"){if(this.currentWallet().address)try{let[e]=yield Promise.all([this.getClient()]),i=yield this.xrplService.getAccountObjects(e,this.currentWallet().address,"validated","");this.setRemoveFlagsBasedOnExistingTrustline(i)}catch{this.flags.tfClearNoRipple=!0,this.flags.tfClearFreeze=!0,this.flags.tfClearDeepFreeze=!1,this.updateFlagTotal()}}else this.flags.tfClearNoRipple=!1,this.flags.tfClearFreeze=!1,this.flags.tfClearDeepFreeze=!1,this.updateFlagTotal();this.activeTab()==="removeTrustline"&&this.amountField.set("0"),this.clearFields(!0),this.hasWallets()&&(yield this.getTrustlinesForAccount(!0))})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getTrustlinesForAccount(t=!1){return z(this,null,function*(){yield this.withPerf("getChecks",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.getExistingMpts(o,i.classicAddress),this.getExistingIOUs(o,i.classicAddress),this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.issuerFields()!==""&&this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getTrustlinesForAccount:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setTrustLine(){return z(this,null,function*(){yield this.withPerf("setTrustLine",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplService.getXrplServerInfo(t,"current","")]);if(this.trustlineFlags.tfSetNoRipple&&this.trustlineFlags.tfClearNoRipple)return this.txUiService.setError("Cannot set both tfSetNoRipple and tfClearNoRipple");if(this.trustlineFlags.tfSetFreeze&&this.trustlineFlags.tfClearFreeze)return this.txUiService.setError("Cannot set both tfSetFreeze and tfClearFreeze");let l=this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue());if(!/^[A-Z0-9]{3}$|^[0-9A-Fa-f]{40}$/.test(l))throw new Error("Invalid currency code. Must be a 3-character code (e.g., USDC) or 40-character hex.");let c={TransactionType:"TrustSet",Account:e.classicAddress,LimitAmount:{currency:l,issuer:this.issuerFields(),value:this.amountField()},Flags:this.totalFlagsValue(),Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,c,e,i);let d=yield this.txExecutor.setTrustline(c,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!d.success)return this.txUiService.setError(`${d.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Trustline set successfully!":"Trustline set successfully!",this.onCurrencyChange(this.currencyFieldDropDownValue()),yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in setTrustLine:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}removeTrustline(){return z(this,null,function*(){yield this.withPerf("removeTrustline",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getXrplServerInfo(t,"current",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t)]);if(this.trustlineFlags.tfSetNoRipple&&this.trustlineFlags.tfClearNoRipple)return this.txUiService.setError("Cannot set both tfSetNoRipple and tfClearNoRipple");if(this.trustlineFlags.tfSetFreeze&&this.trustlineFlags.tfClearFreeze)return this.txUiService.setError("Cannot set both tfSetFreeze and tfClearFreeze");let a=yield this.xrplService.getAccountLines(t,e.classicAddress,"validated","");this.utilsService.logObjects("trustLines",a);let l=a.result.lines.find(f=>{let p=this.utilsService.decodeIfNeeded(f.currency);return f.account===this.issuerFields&&p===this.currencyFieldDropDownValue()});if(!l){this.txUiService.setError(`No trust line found for ${this.currencyFieldDropDownValue()} to issuer ${this.issuerFields}`);return}let c=this.canRemoveTrustline(l);if(!c.canRemove)return this.txUiService.setError(`Cannot remove trustline ${l.currency}/${l.account}: ${c.reasons}`);let d=this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue()),u={TransactionType:"TrustSet",Account:e.classicAddress,LimitAmount:{currency:d,issuer:this.issuerFields(),value:"0"},Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};u.Flags=this.totalFlagsValue(),yield this.setTxOptionalFields(t,u,e,i);let h=yield this.txExecutor.removeTrustline(u,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!h.success)return this.txUiService.setError(`${h.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Trustline removal successfully!":"Trustline removed successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in removeTrustline:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}issueCurrency(){return z(this,null,function*(){yield this.withPerf("issueCurrency",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplService.getXrplServerInfo(t,"current","")]),l=this.selectedDestinationAddress()||this.typedDestination(),c=this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue()),d={TransactionType:"Payment",Account:e.classicAddress,Destination:l,Amount:{currency:c,value:this.amountField(),issuer:this.issuerFields()},Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,i);let u=yield this.txExecutor.issueCurrency(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Issued currency successfully!":"Simulated Issued currency successfully!",this.onCurrencyChange(this.currencyFieldDropDownValue()),yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in issueCurrency:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}clawbackTokens(){return z(this,null,function*(){yield this.withPerf("clawbackTokens",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[r,o,s,a,l,c]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplService.getXrplServerInfo(t,"current",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t)]),d=this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue());if(!/^[A-Z0-9]{3}$|^[0-9A-Fa-f]{40}$/.test(d))throw new Error("Invalid currency code. Must be a 3-character code (e.g., USDC) or 40-character hex.");let u={TransactionType:"Clawback",Account:e.classicAddress,Amount:{currency:d,issuer:i,value:this.amountField()},Fee:l,LastLedgerSequence:c+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,u,e,r);let h=yield this.txExecutor.clawbackTokens(u,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!h.success)return this.txUiService.setError(`${h.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Clawback tokens successfully!":"Simulated Escrow cancel successfully!",this.onCurrencyChange(this.currencyFieldDropDownValue()),yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in clawbackTokens:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getExistingMpts(t,e){let i=(t.result.account_objects??[]).filter(r=>{if(r.LedgerEntryType!=="MPToken")return!0;let o=r.MPTAmount||r.OutstandingAmount||"0";return parseFloat(o)>0}).filter(r=>(r.LedgerEntryType==="MPTokenIssuance"||r.LedgerEntryType==="MPToken")&&(r.Account===e||r.Issuer===e)).map(r=>({LedgerEntryType:r.LedgerEntryType,id:r.index,mpt_issuance_id:r.mpt_issuance_id,TransferFee:r.TransferFee,OutstandingAmount:r.OutstandingAmount,MaximumAmount:r.MaximumAmount,MPTokenMetadata:r.MPTokenMetadata,Issuer:r.Issuer,Flags:r.Flags,AssetScale:r.AssetScale})).sort((r,o)=>{let s=r.Sequence??Number.MAX_SAFE_INTEGER,a=o.Sequence??Number.MAX_SAFE_INTEGER;return s-a});this.existingIOUs.set(i),this.utilsService.logObjects("existingMpts - filtered",i)}getExistingIOUs(t,e){let i=(t.result.account_objects??[]).filter(r=>{if(r.LedgerEntryType!=="RippleState")return!1;let o=r.Balance?.value??"0",s=r.LowLimit?.issuer===e?r.LowLimit?.value:r.HighLimit?.value,a=r.LowLimit?.issuer===e?r.HighLimit?.value:r.LowLimit?.value;return!(parseFloat(o)===0&&(s==="0"||s===0)&&(a==="0"||a===0))}).map(r=>{let o=r.Balance?.value??"0",s=this.utilsService.normalizeCurrencyCode(r.Balance?.currency),l=r.HighLimit.issuer===e?r.LowLimit.issuer:r.HighLimit.issuer;return{LedgerEntryType:"RippleState",Balance:{currency:s,value:o},HighLimit:{issuer:l}}}).sort((r,o)=>r.HighLimit.issuer.localeCompare(o.HighLimit.issuer));this.existingIOUs.set(i),this.utilsService.logObjects("existingIOUs - filtered",i)}get availableCurrencies(){return this.trustlineCurrency.getCurrencies()}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}this.destinationTagField()&&Number.parseInt(this.destinationTagField())>0&&this.utilsService.setDestinationTag(e,this.destinationTagField()),this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getExistingIOUs(s,e.classicAddress),this.getExistingMpts(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}updateTrustLineFlagsInUI(t,e){Object.keys(this.flags).forEach(c=>this.flags[c]=!1);let i=this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue()),r=e.classicAddress||e.address,o=t.result.account_objects.find(c=>c.LedgerEntryType==="RippleState"&&c.Balance?.currency===i&&(c.LowLimit?.issuer===r||c.HighLimit?.issuer===r)&&(c.LowLimit?.issuer===this.issuerFields()||c.HighLimit?.issuer===this.issuerFields()));if(!o){this.activeTab()!=="removeTrustline"&&this.clearFlagsValue();return}let s=o.Flags??0,a=o.LowLimit?.issuer===r,l=Re.TRUSTLINE.LEDGER_FLAG_MAP;this.activeTab()==="removeTrustline"?(s&l.lsfNoRipple&&(this.flags.tfClearNoRipple=!0),(a?s&l.lsfLowFreeze:s&l.lsfHighFreeze)&&(this.flags.tfClearFreeze=!0)):(this.flags.tfSetfAuth=a?!!(s&l.lsfLowAuth):!!(s&l.lsfHighAuth),this.flags.tfSetNoRipple=!!(s&l.lsfNoRipple),this.flags.tfSetFreeze=a?!!(s&l.lsfLowFreeze):!!(s&l.lsfHighFreeze)),this.updateFlagTotal()}setRemoveFlagsBasedOnExistingTrustline(t){if(this.flags.tfClearNoRipple=!1,this.flags.tfClearFreeze=!1,this.flags.tfClearDeepFreeze=!1,this.flags.tfSetfAuth=!1,!this.currencyFieldDropDownValue()||!this.issuerFields||!this.currentWallet().address)return;let e=this.utilsService.encodeIfNeeded(this.currencyFieldDropDownValue()),i=this.currentWallet().classicAddress||this.currentWallet().address,r=t.result.account_objects.find(l=>l.LedgerEntryType==="RippleState"&&l.Balance?.currency===e&&(l.LowLimit?.issuer===i||l.HighLimit?.issuer===i)&&(l.LowLimit?.issuer===this.issuerFields()||l.HighLimit?.issuer===this.issuerFields()));if(!r)return;let o=r.Flags??0,s=r.LowLimit?.issuer===i,a=Re.TRUSTLINE.LEDGER_FLAG_MAP;o&a.lsfNoRipple&&(this.flags.tfClearNoRipple=!0),(s?o&a.lsfLowFreeze:o&a.lsfHighFreeze)&&(this.flags.tfClearFreeze=!0),this.updateFlagTotal()}toggleFlag(t){this.flags[t]=!this.flags[t],this.updateFlagTotal()}updateFlagTotal(){let t=0;this.flags.tfSetfAuth&&(t|=this.flagValues.tfSetfAuth),this.flags.tfSetNoRipple&&(t|=this.flagValues.tfSetNoRipple),this.flags.tfClearNoRipple&&(t|=this.flagValues.tfClearNoRipple),this.flags.tfSetFreeze&&(t|=this.flagValues.tfSetFreeze),this.flags.tfClearFreeze&&(t|=this.flagValues.tfClearFreeze),this.flags.tfSetDeepFreeze&&(t|=this.flagValues.tfSetDeepFreeze),this.flags.tfClearDeepFreeze&&(t|=this.flagValues.tfClearDeepFreeze),this.totalFlagsValue.set(t),this.totalFlagsHex.set("0x"+t.toString(16).toUpperCase().padStart(8,"0"))}clearFlagsValue(){this.activeTab()!=="removeTrustline"&&(this.flags={tfSetfAuth:!1,tfSetNoRipple:!1,tfClearNoRipple:!1,tfSetFreeze:!1,tfClearFreeze:!1,tfSetDeepFreeze:!1,tfClearDeepFreeze:!1},this.totalFlagsValue.set(0),this.totalFlagsHex.set("0x0"))}clearFields(t){t&&(this.amountField.set(""),this.destinationTagField.set(""),this.newCurrency.set(""),this.newIssuer.set(""),this.clearFlagsValue()),this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.ticketSequence.set("")}addNewDestinationFromUser(t){t&&CS.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}copyMptId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("MPT Issuance ID copied!")})}copyCheckId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Check ID copied!")})}copyIOUIssuanceAddress(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("IOU Token Issuer copied!")})}updateInfoMessage(){let t={setTrustline:"trustline that can be set",removeTrustline:"trustline that can be removed",issueCurrency:"trustline that can be used to issue currencies",clawbackTokens:"trustline that supports clawback"},e=this.existingIOUs.length,i=t[this.activeTab()]||"trustline",r=this.currentWallet.name||"selected",o;if(e===0)o=`<code>${r}</code> wallet has no ${i}.`;else{o=`<code>${r}</code> wallet has <strong>${e}</strong> ${e===1?"trustline":"trustlines"}${i.includes("trustline")?"":` ${i}`}.`;let a=`${this.txUiService.explorerUrl}account/${this.currentWallet().address}/tokens`;o+=`<br><a href="${a}" target="_blank" rel="noopener noreferrer" class="xrpl-win-link">View tokens on XRPL Win</a>`}this.txUiService.setInfoMessage(o)}decodeMptFlagsForUi(t){let e=[{value:2,name:"canLock"},{value:4,name:"isRequireAuth"},{value:8,name:"canEscrow"},{value:10,name:"canTrade"},{value:20,name:"canTransfer"},{value:40,name:"canClawback"}],i=[];for(let r of e)(t&r.value)===r.value&&i.push(r.name);return i.length>0?i.join(", "):"None"}formatIOUXrpAmountUI(t){if(!t)return"Unknown";if(typeof t=="string"&&t.split(" ").length===1)return`${t} XRP`;if(t.split(" ").length===2){let e=t.split(" ");return`${e[0]} ${e[1]}`}if(typeof t=="object"){let{currency:e,issuer:i,value:r}=t;return`${r} ${e} (issuer: ${i})`}return"Unknown"}formatIOUXrpAmountOutstanding(t){if(!t)return"Unknown";if(typeof t=="string"&&/^[0-9]+$/.test(t))return`${CS.dropsToXrp(t)} XRP`;if(typeof t=="object"){let{currency:e,value:i}=t;return`${i} ${this.utilsService.decodeIfNeeded(e)}`}return`${t} XRP`}formatInvoiceId(t){return this.utilsService.formatInvoiceId(t||"")}formatXrplTimestamp(t){return this.utilsService.convertXRPLTime(t)}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}onCurrencyChange(t){this.trustlineCurrency.selectCurrency(t,this.currentWallet().address),this.currencyChangeTrigger.update(e=>e+1)}onIssuerChange(t){this.trustlineCurrency.selectIssuer(t)}isAddValid(){let t=this.newCurrency()?.trim(),e=this.newIssuer()?.trim();return!t||!e||!this.utilsService.isValidCurrencyCode(t)||!CS.isValidAddress(e)?!1:!this.trustlineCurrency.getIssuersForCurrency(t).includes(e)}isRemoveValid(){let t=this.currencyFieldDropDownValue(),e=this.trustlineCurrency.getSelectedIssuer();return!!t&&t!=="XRP"&&!!e}addNewCurrencyIssuer(){let t=this.newCurrency()?.trim(),e=this.newIssuer()?.trim();if(!this.isAddValid()){this.txUiService.setError("Invalid currency code or issuer address, or already exists");return}this.trustlineCurrency.addToken(t,e),this.currencyFieldDropDownValue.set(t),this.onCurrencyChange(t),this.newCurrency.set(""),this.newIssuer.set(""),this.toastService.success("Currency/Issuer added successfully")}removeCurrentCurrencyIssuer(){let t=this.currencyFieldDropDownValue(),e=this.trustlineCurrency.getSelectedIssuer();if(!this.isRemoveValid()){this.txUiService.setError("No valid currency or issuer selected to remove");return}if(this.trustlineCurrency.removeToken(t,e),this.toastService.success("Currency/Issuer removed successfully"),this.trustlineCurrency.getIssuersForCurrency(t).length===0){let r=this.trustlineCurrency.getCurrencies();r.length>0?(this.currencyFieldDropDownValue.set(r[0]),this.onCurrencyChange(r[0])):this.currencyFieldDropDownValue.set("")}}canRemoveTrustline(t){let e=[];return parseFloat(t.balance)!==0&&e.push(`Balance is ${t.balance} (must be 0)`),t.no_ripple&&!this.flags.tfClearNoRipple&&e.push("NoRipple flag is set"),t.freeze&&e.push("Freeze flag is set"),t.authorized&&e.push("Authorized flag is set (issuer must unauthorize before deletion)"),t.peer_authorized&&e.push("Peer authorized is still enabled"),{canRemove:e.length===0,reasons:e}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-trustlines"]],features:[Lt],decls:49,vars:30,consts:[["theForm","ngForm"],["itemTemplate",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroAdjustmentsVertical","size","20",1,"text-red-600"],[1,"menu-btn",3,"click"],["name","heroTrash","size","20",1,"text-red-600"],["name","heroCurrencyDollar","size","20",1,"text-red-600"],["name","heroPlusCircle","size","20",1,"text-red-600"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[1,"form-row"],[1,"tab-content-container","flags-container",2,"min-width","570px"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroAdjustmentsVertical","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"green-button-submenu"],["name","heroCurrencyDollar","size","27",1,"text-red-600"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"info-message-wrapper"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[2,"margin-top","8px","font-size","0.9em"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[3,"innerHTML"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View issuer tokens on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[1,"ml-2","px-2","py-0.5","text-xs","rounded-full","bg-green-100","text-green-800"],[2,"color","#555","font-size","0.88em","display","flex","flex-direction","column","gap","4px"],["title","Copy Issuer Address",1,"copy-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-group"],["for","currencyCodeCash"],[1,"form-hint"],["placeholder","Search currency code...","emptyMessage","No currencies available",3,"valueChange","items","value","showShortAddress"],["for","issuer"],["placeholder","Search or select issuer...","emptyMessage","No issuers found",3,"valueChange","items","value"],["type","text","name","amountField","placeholder","e.g. 10.5",3,"ngModelChange","ngModel"],["type","text","name","currencyBalanceField","readonly","","placeholder","",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2"],[1,"text-yellow-500","font-bold"],[1,"text-xs","text-gray-500"],["for","destination"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["type","text","name","destinationTagField",3,"ngModelChange","ngModel"],["type","text","name","newCurrency","placeholder","e.g. USDC, EUR, BTC",1,"input-field",3,"ngModelChange","ngModel"],["type","text","name","newIssuer","placeholder","r...",1,"input-field",3,"ngModelChange","ngModel"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["placeholder","Search currency code...","emptyMessage","No saved currencies",3,"valueChange","items","value","showShortAddress"],["placeholder","Select issuer to remove...","emptyMessage","No issuers for this currency",3,"valueChange","items","value"],["type","button",1,"btn-primary-red",3,"click","disabled"],[1,"flags-wrapper"],[1,"token-flags-header"],["name","flag","size","20"],[1,"token-flags-title"],[1,"flags-total",2,"margin-top","20px","padding","12px","background","rgba(0, 0, 0, 0.05)","border-radius","8px"],[1,"total-label"],[1,"total-value"],[1,"flag-item-account-flags",3,"click"],[1,"flag-header-account"],["type","checkbox",1,"flag-checkbox",3,"checked"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"flag-icon"],["d","M9 12l2 2 4-4"],["cx","12","cy","12","r","10"],[1,"flag-title"],[1,"flag-value"],[1,"flag-desc"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],["d","M12 2v20M2 12h20"],["d","M12 2v20M2 12h20M5 5l14 14M5 19l14-14"],[1,"flag-item-account-flags"],["type","checkbox",1,"flag-checkbox",3,"checked","disabled"],["d","M18 6L6 18M6 6l12 12"],[1,"required-hint"],[1,"info-box",2,"margin-top","16px","font-size","0.9em","opacity","0.9"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",2),ee(1,"app-navbar"),m(2,"main",3)(3,"div",4)(4,"div",5)(5,"app-wallet-panel",6),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",7)(7,"div",8)(8,"button",9),X("click",function(){return U(r),j(i.setTab("setTrustline"))}),ee(9,"ng-icon",10),w(10," Set Trustline "),g(),m(11,"button",11),X("click",function(){return U(r),j(i.setTab("removeTrustline"))}),ee(12,"ng-icon",12),w(13," Remove Trustline "),g(),m(14,"button",11),X("click",function(){return U(r),j(i.setTab("issueCurrency"))}),ee(15,"ng-icon",13),w(16," Issue Currency "),g(),m(17,"button",11),X("click",function(){return U(r),j(i.setTab("clawbackTokens"))}),ee(18,"ng-icon",12),w(19," Clawback Currency "),g(),m(20,"button",11),X("click",function(){return U(r),j(i.setTab("addNewIssuers"))}),ee(21,"ng-icon",14),w(22," Add/Remove Issuers "),g()(),Q(23,uJe,9,0,"div"),Q(24,hJe,9,0,"div"),Q(25,fJe,9,0,"div"),Q(26,pJe,9,0,"div"),Q(27,mJe,9,0,"div"),Q(28,RJe,1,1),Q(29,OJe,3,1,"div",15),m(30,"form",16,0)(32,"div")(33,"div",17)(34,"div",18),Q(35,UJe,28,7),Q(36,zJe,8,4,"div",19),Q(37,GJe,34,11),g(),Q(38,eet,13,4,"div",20),g(),ee(39,"app-transaction-options",21),m(40,"div",22),Q(41,tet,3,4,"button",23)(42,net,3,4,"button",24)(43,iet,3,4,"button",25)(44,ret,3,4,"button",24),Q(45,oet,3,3,"button",26),g(),m(46,"div",27)(47,"input",28),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(48,"app-transaction-preview"),g()()()()()()()}e&2&&(_(8),Ue("active",i.activeTab()==="setTrustline"),_(3),Ue("active",i.activeTab()==="removeTrustline"),_(3),Ue("active",i.activeTab()==="issueCurrency"),_(3),Ue("active",i.activeTab()==="clawbackTokens"),_(3),Ue("active",i.activeTab()==="addNewIssuers"),_(3),J(i.activeTab()==="setTrustline"?23:-1),_(),J(i.activeTab()==="removeTrustline"?24:-1),_(),J(i.activeTab()==="issueCurrency"?25:-1),_(),J(i.activeTab()==="clawbackTokens"?26:-1),_(),J(i.activeTab()==="addNewIssuers"?27:-1),_(),J(i.activeTab()!=="addNewIssuers"?28:-1),_(),J(i.txUiService.warningMessage?29:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()==="setTrustline"||i.activeTab()==="removeTrustline"||i.activeTab()==="issueCurrency"||i.activeTab()==="clawbackTokens"?35:-1),_(),J(i.activeTab()==="issueCurrency"||i.activeTab()==="clawbackTokens"?36:-1),_(),J(i.activeTab()==="addNewIssuers"?37:-1),_(),J(i.activeTab()==="setTrustline"||i.activeTab()==="removeTrustline"?38:-1),_(),oe("showWhenTab",Ei(29,cJe))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="setTrustline"?41:i.activeTab()==="removeTrustline"?42:i.activeTab()==="issueCurrency"?43:i.activeTab()==="clawbackTokens"?44:-1),_(4),J(i.activeTab()!=="addNewIssuers"?45:-1),_(2),Oe("ngModel",i.executionTime))},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,$r,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var G8=_i(Ki());function set(n,t){n&1&&(m(0,"div")(1,"div",19)(2,"div",20),ee(3,"ng-icon",21),g(),m(4,"div")(5,"h2",22),w(6,"Delete Wallet"),g(),m(7,"p",23),w(8,"Delete currenlty selected wallet"),g()()()())}function aet(n,t){n&1&&(m(0,"div",7),ee(1,"ng-icon",24)(2,"div",25),g()),n&2&&(_(2),oe("innerHTML",t.message,pn))}function cet(n,t){if(n&1&&(m(0,"div",8),ee(1,"ng-icon",26)(2,"div",27),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function det(n,t){if(n&1){let e=ge();m(0,"div",28)(1,"label",29),w(2,"Destination"),g(),m(3,"p",30),w(4,"Destination account to send remaining XRP to."),g(),m(5,"app-select-search-dropdown",31),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()(),m(6,"div",28)(7,"label",32),w(8,"Destination Tag (opt)"),g(),m(9,"p",30),w(10,"Destination tag needed if sending to an account on an exchange."),g(),m(11,"input",33),X("ngModelChange",function(r){U(e);let o=E();return j(o.txUiService.destinationTagField.set(r))}),g()()}if(n&2){let e=E();_(5),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(6),oe("ngModel",e.txUiService.destinationTagField())}}function uet(n,t){if(n&1){let e=ge();m(0,"app-tooltip-link",14)(1,"button",34),ct(2,"async"),X("click",function(){U(e);let r=E();return j(r.deleteAccount())}),w(3),g()()}if(n&2){let e=E();oe("tooltipText",e.deleteWalletTooltip),_(),oe("disabled",e.txUiService.spinner()||!mt(2,3,e.walletManagerService.hasWallets$)||e.deleteBlockers().length>0),_(2),Ee(e.txUiService.spinner()?"Processing...":"Cannot Delete Wallet")}}function het(n,t){if(n&1){let e=ge();m(0,"button",35),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.deleteAccount())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Delete Wallet")}}var K8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);txExecutor=N(ai);accountInfo=P(null);serverInfo=P(null);accountObjects=P(null);blockingObjects=P(null);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("deleteAccount");wallets=P([]);currentWallet=P({});selectedWalletIndex=P(0);destinationItems=_e(()=>{let t=this.currentWallet().address;return[...this.wallets().map(i=>({address:i.address,name:i.name??`Wallet ${i.address.slice(0,8)}`})),...this.customDestinations()].map(i=>({id:i.address,display:i.name||"Unknown Wallet",secondary:i.address,isCurrentAccount:i.address===t,isCurrentCode:!1,isCurrentToken:!1}))});selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});hasWallets=_e(()=>this.wallets().length>0);infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||"Selected wallet",i=this.accountInfo()?.result?.account_data,r=this.accountInfo()?.result?.account_flags,o=this.serverInfo()?.result?.info?.validated_ledger,a=this.blockingObjects()?.result?.account_objects?.length;if(!i)return{walletName:e,message:`<code>${e}</code> wallet can be deleted.`};let l=!!i.RegularKey,c=!!r?.enableSignerList,d=Number(i.OwnerCount||0),u=Number(i.TicketCount||0),h=Array.isArray(i.Hooks)&&i.Hooks.length>0,f=Number(i.PreviousTxnLgrSeq??0),p=Number(o?.seq??0),y=d+a,v=[];if(l&&v.push("This account has a Regular Key configured."),c&&v.push("This account has a Signer List configured."),y>0&&v.push(`This account has <strong>${y}</strong> owner object${y==1?"":"s"} (trust lines, offers, escrows, checks, etc.).`),u>0&&v.push(`This account has <strong>${u}</strong> allocated Ticket${u==1?"":"s"}. All tickets must be used or canceled.`),h&&v.push("This account has one or more Hooks installed. All Hooks must be removed first."),f>0&&p>0){let V=p-f,O=256;if(V<O){let R=O-V,G=Math.ceil(R*4/60);v.push(`This account made a recent transaction. You must wait <strong>${R} more ledgers</strong> (~ ${G} minute${G!==1?"s":""}) before deletion is allowed.`)}}let b=`<code>${e}</code> wallet `;v.length===0?b+="<strong>can be deleted</strong>. There are no blocking configurations on this account.<br><br>":(b+="has the following configuration that <strong>prevents deletion</strong>:<ul>",v.forEach(V=>b+=`<li>${V}</li>`),b+="</ul>"),b+=`<strong>Requirements for successful account deletion:</strong><ul>
    <li>All owner objects must be deleted first (trust lines, offers, escrows, checks, NFTs, etc.)</li>
    <li>All Tickets must be used or canceled (TicketCount must be 0)</li>
    <li>All Hooks must be removed (if any are installed)</li>
    <li>The account must send all remaining XRP to another account</li>
    <li>The account must have no Regular Key configured</li>
    <li>The account must have no active Signer List</li>
  </ul>`;let S=Number(G8.dropsToXrp(String(i.Balance))),x=Number(this.serverInfo()?.result?.info?.validated_ledger?.base_fee_xrp??"0.000001"),k=Number(this.serverInfo()?.result?.info?.validated_ledger?.reserve_inc_xrp??2),L=x+d*k,D=L+.2;return S<D&&(b+=`<br><strong>Warning:</strong> Insufficient balance. Account needs at least <strong>${D.toFixed(6)} XRP</strong> (${L.toFixed(6)} reserve + 2 XRP deletion fee).`),{walletName:e,message:b}});deleteBlockers=_e(()=>{let t=[],e=this.accountInfo()?.result?.account_data,i=this.accountInfo()?.result?.account_flags;if(!e)return t;let r=!!e.RegularKey,o=!!i?.enableSignerList,s=Number(e.OwnerCount||0),a=Number(e.TicketCount||0),l=Array.isArray(e.Hooks)&&e.Hooks.length>0;r&&t.push("Regular Key set"),o&&t.push("Signer List active"),s>0&&t.push(`${s} owner objects`),a>0&&t.push(`${a} tickets allocated`),l&&t.push("Hooks installed");let c=Number(e.PreviousTxnLgrSeq??0),d=Number(this.serverInfo()?.result?.info?.validated_ledger?.seq??0);return c>0&&d>0&&d-c<256&&t.push(`Waiting ${256-(d-c)} ledgers`),t});canDelete=_e(()=>this.deleteBlockers().length===0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.selectWallet(i),this.selectedWalletIndex.set(e))}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),this.clearInputFields(),yield this.getAccountDetails(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}onWalletSelected(t){this.selectWallet(t);let e=this.wallets().findIndex(i=>i.address===t.address);e!==-1&&this.selectedWalletIndex.set(e)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.txUiService.clearAllOptionsAndMessages(),yield this.getAccountDetails()})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getAccountDetails(t=!1){return z(this,null,function*(){yield this.withPerf("getAccountDetails",()=>z(this,null,function*(){try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:r,accountObjects:o},s,a]=yield Promise.all([this.xrplCache.getAccountData(i.classicAddress,t),this.xrplCache.getServerInfo(this.xrplService),this.xrplService.checkAccountObjectsForDeletion(e,i.classicAddress)]),l=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(l.length>0)return this.txUiService.setError(l.join(`
\u2022 `));this.accountInfo.set(r),this.accountObjects.set(o),this.serverInfo.set(s),this.blockingObjects.set(a),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getAccountDetails:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}deleteAccount(){return z(this,null,function*(){yield this.withPerf("deleteAccount",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[r,o,s,a]=yield Promise.all([this.xrplCache.getAccountInfo(e.classicAddress,!1),this.xrplService.checkAccountObjectsForDeletion(t,e.classicAddress),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),l=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:r,accountObjects:o,currentLedger:s,serverInfo:a},destination:{address:i},sequence:{sequenceId:r.result.account_data.Sequence.toString()}}),c=yield this.validationService.validate("AccountDelete",{inputs:l,client:t,accountInfo:r,accountObjects:o,currentLedger:s,serverInfo:a});if(c.length>0)return this.txUiService.setError(c.join(`
\u2022 `));let d={TransactionType:"AccountDelete",Account:e.classicAddress,Destination:i,Sequence:r.result.account_data.Sequence,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,r);let u=yield this.txExecutor.accountDelete(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.isSimulateEnabled()?this.txUiService.successMessage="Simulated Account delete successfully!":(this.txUiService.successMessage="Account deleted successfully!",this.deleteWalletAfterDeleteTx(this.selectedWalletIndex()),yield this.refreshAfterTx(t,i))}catch(t){console.error("Error in deleteAccount:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}deleteWalletAfterDeleteTx(t){if(this.walletManagerService.deleteWallet(t),this.selectedWalletIndex()>=this.wallets().length){this.selectedWalletIndex.set(Math.max(0,this.wallets().length-1));let e=this.wallets()[this.selectedWalletIndex()];this.currentWallet.set(e?le({},e):{})}}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}this.txUiService.destinationTagField()&&this.utilsService.setDestinationTag(e,this.txUiService.destinationTagField()),this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e){return z(this,null,function*(){yield this.refreshWallets(t,[e]),this.addNewDestinationFromUser(e??""),this.getAccountDetails(!0)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){!t||!G8.isValidAddress(t)||this.destinationItems().some(i=>i.id===t)||(this.customDestinations.update(i=>[...i,{name:`Custom ${i.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())))}get deleteWalletTooltip(){if(this.txUiService.spinner())return"Transaction in progress\u2026";let t=this.deleteBlockers()||[];return t.length?t.map(e=>this.stripHtml(e)).join(` 
 `):""}stripHtml(t){return t.replaceAll(/<\/?[^>]+(>|$)/g,"")}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(){this.clearInputFields(),this.txUiService.clearAllOptionsAndMessages()}clearInputFields(){this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.txUiService.destinationTagField.set("")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-delete-account"]],features:[Lt],decls:26,vars:13,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel",2,"padding-top","2em"],[1,"info-panel"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[3,"activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],[3,"tooltipText"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-7.7px"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-group"],["for","destination"],[1,"form-hint"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["for","destinationTagField"],["type","text","placeholder","e.g. 123456","name","destinationTagField",3,"ngModelChange","ngModel"],[1,"btn-primary-red",2,"width","425px",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6),Q(7,set,9,0,"div"),Q(8,aet,3,1,"div",7),Q(9,cet,3,1,"div",8),m(10,"form",9,0)(12,"div",10)(13,"div")(14,"div",11),Q(15,det,12,3),g(),ee(16,"app-transaction-options",12),m(17,"div",13),Q(18,uet,4,5,"app-tooltip-link",14)(19,het,3,4,"button",15),m(20,"button",16),ct(21,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(22,"Clear Fields"),g()()(),m(23,"div",17)(24,"input",18),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(25,"app-transaction-preview"),g()()()()()()()}if(e&2){let r;_(7),J(i.activeTab()==="deleteAccount"?7:-1),_(),J((r=i.infoData())?8:-1,r),_(),J(i.txUiService.warningMessage?9:-1),_(4),oe("@tabTransition",i.activeTab()),_(2),J(i.activeTab()==="deleteAccount"?15:-1),_(),oe("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(!i.canDelete()||i.txUiService.spinner()?18:19),_(2),oe("disabled",!mt(21,11,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki,$r,Bi,zi],styles:[".info-panel[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;padding:.75rem 1rem;background:#ebf8ff;border-radius:.375rem;font-size:.9375rem;margin-bottom:1rem}.info-panel[_ngcontent-%COMP%]   .text-blue-600[_ngcontent-%COMP%]{flex-shrink:0}"],data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var V1=_i(Ki());var fet=()=>["modifyMultiSigners","modifyRegularKey","modifyMetaData","modifyDepositAuth","modifyAccountFlags"],pet=(n,t)=>t.key,met=(n,t)=>t.account;function get(n,t){n&1&&(m(0,"div")(1,"div",24)(2,"div",25),ee(3,"ng-icon",26),g(),m(4,"div")(5,"h2",27),w(6,"Modify Account Flags"),g(),m(7,"p",28),w(8,"Set or Clear account level flags."),g()()()())}function yet(n,t){n&1&&(m(0,"div")(1,"div",24)(2,"div",25),ee(3,"ng-icon",26),g(),m(4,"div")(5,"h2",27),w(6,"Modify Account Meta Data"),g(),m(7,"p",28),w(8,"Modify the account meta data."),g()()()())}function vet(n,t){n&1&&(m(0,"div")(1,"div",24)(2,"div",25),ee(3,"ng-icon",26),g(),m(4,"div")(5,"h2",27),w(6,"Modify Account Depostit Auth"),g(),m(7,"p",28),w(8,"Modify the account Depostit Authorization Addresses"),g()()()())}function _et(n,t){n&1&&(m(0,"div")(1,"div",24)(2,"div",29),ee(3,"ng-icon",11),g(),m(4,"div")(5,"h2",27),w(6,"Add Multi Sign"),g(),m(7,"p",28),w(8,"Add Multi Signers for signing transactions."),g()()()())}function bet(n,t){n&1&&(m(0,"div")(1,"div",24)(2,"div",29),ee(3,"ng-icon",11),g(),m(4,"div")(5,"h2",27),w(6,"Add Regular Key Address"),g(),m(7,"p",28),w(8,"Add Regular Key address for signing transactions."),g()()()())}function wet(n,t){n&1&&w(0," wallet has no special account configuration. All flags are in default state. ")}function Cet(n,t){n&1&&w(0," wallet has the following account configuration: ")}function xet(n,t){if(n&1&&(m(0,"li",40),w(1),g()),n&2){let e=t.$implicit;_(),Ee(e)}}function ket(n,t){if(n&1&&(m(0,"li",41),w(1," Irreversible flags enabled: "),m(2,"strong"),w(3),g(),m(4,"em",42),w(5," These cannot be disabled once set. "),g()()),n&2){let e=E(3);_(3),Ee(e.irreversibleFlags.join(", "))}}function Met(n,t){if(n&1&&(m(0,"ul",39),yn(1,xet,2,1,"li",40,pc),Q(3,ket,6,1,"li",41),g()),n&2){let e=E(2);_(),vn(e.configItems),_(2),J(e.hasIrreversible?3:-1)}}function Tet(n,t){if(n&1){let e=ge();m(0,"div",35),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",36)(2,"span"),w(3),g(),lt(),m(4,"svg",37),ee(5,"path",38),g()(),Q(6,Met,4,1,"ul",39),g()}if(n&2){let e=E(),i=E();_(3),je("Account Configuration Details (",e.configItems.length+e.irreversibleFlags.length,")"),_(),In("transform",i.infoPanelExpanded()?"rotate(180deg)":"rotate(0deg)"),_(2),J(i.infoPanelExpanded()?6:-1)}}function Eet(n,t){if(n&1&&(m(0,"div",12)(1,"div",30)(2,"div",31)(3,"div",32),ee(4,"ng-icon",33),m(5,"code"),w(6),g(),Q(7,wet,1,0)(8,Cet,1,0),g(),Q(9,Tet,7,4,"div",34),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.hasSpecialConfig?8:7),_(2),J(e.hasSpecialConfig?9:-1)}}function Aet(n,t){if(n&1&&(m(0,"div",13),ee(1,"ng-icon",43)(2,"div",44),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function Det(n,t){if(n&1){let e=ge();m(0,"div",61),X("click",function(){let r=U(e).$implicit,o=E(2);return j(o.toggleFlag(r.key))}),m(1,"div",62),ee(2,"input",63),lt(),m(3,"svg",64),ee(4,"path",65),g(),dn(),m(5,"span",66),w(6),g()(),m(7,"div",67),w(8),g(),m(9,"div",68),w(10),g()()}if(n&2){let e=t.$implicit,i=E(2);Ue("enabled",i.flags[e.key]),_(2),oe("id",e.key)("name",e.key)("checked",i.flags[e.key]),_(4),Ee(e.title),_(2),ei("",i.FLAG_VALUES[e.key]," ",e.key),_(2),Ee(e.desc)}}function Iet(n,t){if(n&1){let e=ge();m(0,"div",17)(1,"div",45)(2,"span",46)(3,"label",47),w(4,"Configuration Templates:"),g()(),m(5,"span",46)(6,"input",48),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.configurationType,r)||(o.configurationType=r),j(r)}),X("ngModelChange",function(){U(e);let r=E();return j(r.onConfigurationChange())}),g(),m(7,"label",47),w(8,"Holder"),g(),m(9,"input",49),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.configurationType,r)||(o.configurationType=r),j(r)}),X("ngModelChange",function(){U(e);let r=E();return j(r.onConfigurationChange())}),g(),m(10,"label",50),w(11,"Exchanger"),g(),m(12,"input",51),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.configurationType,r)||(o.configurationType=r),j(r)}),X("ngModelChange",function(){U(e);let r=E();return j(r.onConfigurationChange())}),g(),m(13,"label",52),w(14,"Issuer"),g()()(),m(15,"div",53),ee(16,"lucide-icon",54),m(17,"span",46),w(18,"Account Flags"),g()(),m(19,"div",55),yn(20,Det,11,9,"div",56,pet),m(22,"div",57)(23,"div",58)(24,"span",59),w(25,"Total Flags Value:"),g(),m(26,"span",60),w(27),g()()()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.configurationType),_(3),Oe("ngModel",e.configurationType),_(3),Oe("ngModel",e.configurationType),_(8),vn(e.accountFlagsConfig),_(7),ei("",e.totalFlagsValue()," (",e.totalFlagsHex(),")")}}function Fet(n,t){if(n&1){let e=ge();m(0,"button",84),X("click",function(){U(e);let r=E().$index,o=E(2);return j(o.removeDepositAuthAddresses(r))}),ee(1,"lucide-icon",85),g()}}function Pet(n,t){if(n&1){let e=ge();m(0,"fieldset",73)(1,"legend",77),w(2),g(),m(3,"div",78)(4,"div",75)(5,"label",79),w(6,"Account"),g(),m(7,"p",80),w(8,"Addresses used for deposit authorization."),g(),m(9,"input",81),Ne("ngModelChange",function(r){let o=U(e).$implicit;return Ve(o.account,r)||(o.account=r),j(r)}),g()(),m(10,"div",82),Q(11,Fet,2,0,"button",83),g()()()}if(n&2){let e=t.$implicit,i=t.$index,r=E(2);_(2),je("Deposit Auth Address ",i+1),_(3),oe("for",sa("depositAuthField",i)),_(4),oe("id",sa("depositAuthField",i))("name",sa("depositAuthField",i)),Oe("ngModel",e.account),_(2),J(r.txUiService.depositAuthAddresses().length>1?11:-1)}}function Let(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",69),ee(2,"ng-icon",70),m(3,"span",71),w(4,"Deposit Authorization Configuration"),g()(),m(5,"div",72),yn(6,Pet,12,9,"fieldset",73,met),g(),m(8,"div",74)(9,"div",75)(10,"button",76),X("click",function(){U(e);let r=E();return j(r.addDepositAuthAddresses())}),w(11,"Add Signer"),g()()()()}if(n&2){let e=E();_(6),vn(e.txUiService.depositAuthAddresses())}}function Ret(n,t){if(n&1&&(m(0,"div",93),ee(1,"img",97),g()),n&2){let e=E(2);_(),oe("src",e.avatarUrl(),La)}}function Oet(n,t){if(n&1){let e=ge();m(0,"div",78)(1,"div",75)(2,"label"),w(3,"Set NFT Minter Address"),g(),m(4,"p",80),w(5,"Authorizes another account to mint NFTs for this account."),g(),m(6,"input",86),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.nfTokenMinterAddress,r)||(o.txUiService.nfTokenMinterAddress=r),j(r)}),g()()(),m(7,"div",21)(8,"button",87),X("click",function(){U(e);let r=E();return j(r.setNftMinterAddress("Y"))}),w(9),g(),m(10,"button",88),X("click",function(){U(e);let r=E();return j(r.setNftMinterAddress("N"))}),w(11),g()(),m(12,"div",78)(13,"div",75)(14,"label"),w(15,"Transfer Rate"),g(),m(16,"p",80),w(17,"Transfer fee for issued currencies (1.0 = no fee)."),g(),m(18,"input",89),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.transferRate,r)||(o.txUiService.transferRate=r),j(r)}),g()(),m(19,"div",75)(20,"label"),w(21,"Tick Size"),g(),m(22,"p",80),w(23,"Decimal precision used when trading issued currencies (3\u201315)."),g(),m(24,"input",90),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.tickSize,r)||(o.txUiService.tickSize=r),j(r)}),g()()(),m(25,"div",78)(26,"div",75)(27,"label"),w(28,"Email"),g(),m(29,"p",80),w(30,"Email hash used for avatar services."),g(),m(31,"input",91),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.userEmail,r)||(o.txUiService.userEmail=r),j(r)}),X("ngModelChange",function(r){U(e);let o=E();return j(o.updateAvatarUrlFromEmail(r))}),g()(),m(32,"div",75)(33,"label"),w(34,"Avatar URL"),g(),m(35,"p",80),w(36,"URL to avatar location."),g(),m(37,"input",92),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.avatarUrl,r)||(o.txUiService.avatarUrl=r),j(r)}),g()()(),Q(38,Ret,2,1,"div",93),m(39,"div",78)(40,"div",75)(41,"label"),w(42,"Domain"),g(),m(43,"p",80),w(44,"Domain name for this account."),g(),m(45,"input",94),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.domain,r)||(o.txUiService.domain=r),j(r)}),g()()(),m(46,"div")(47,"div",95)(48,"div",61),X("click",function(){U(e);let r=E();return j(r.toggleMessageKey())}),m(49,"div",62),ee(50,"input",96),lt(),m(51,"svg",64),ee(52,"path",65),g(),dn(),m(53,"span",66),w(54,"Save Message Key"),g()(),m(55,"div",68),w(56,"Public key for sending encrypted messages to this account."),g()()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.txUiService.nfTokenMinterAddress),_(2),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Set NFT Minter"),_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Remove NFT Minter"),_(7),Oe("ngModel",e.txUiService.transferRate),_(6),Oe("ngModel",e.txUiService.tickSize),_(7),Oe("ngModel",e.txUiService.userEmail),_(6),Oe("ngModel",e.txUiService.avatarUrl),_(),J(e.avatarUrl()?38:-1),_(7),Oe("ngModel",e.txUiService.domain),_(3),Ue("enabled",e.txUiService.isMessageKey()),_(2),oe("checked",e.txUiService.isMessageKey())}}function Net(n,t){if(n&1){let e=ge();m(0,"button",106),X("click",function(){U(e);let r=E().$index,o=E(2);return j(o.removeSigner(r))}),ee(1,"lucide-icon",85),g()}}function Bet(n,t){if(n&1){let e=ge();m(0,"fieldset",98)(1,"legend",77),w(2),g(),m(3,"div",78)(4,"div",75)(5,"label",79),w(6,"Account"),g(),m(7,"p",80),w(8,"Addresses used for multi signing."),g(),m(9,"input",81),Ne("ngModelChange",function(r){let o=U(e).$implicit;return Ve(o.Account,r)||(o.Account=r),j(r)}),g()(),m(10,"div",75)(11,"label",79),w(12,"Seed"),g(),m(13,"p",80),w(14,"Seed of the correspinging addresses."),g(),m(15,"input",101),Ne("ngModelChange",function(r){let o=U(e).$implicit;return Ve(o.seed,r)||(o.seed=r),j(r)}),g()(),m(16,"div",102)(17,"label",79),w(18,"Weight"),g(),m(19,"p",80),w(20,"Sign Wgt."),g(),m(21,"input",103),Ne("ngModelChange",function(r){let o=U(e).$implicit;return Ve(o.SignerWeight,r)||(o.SignerWeight=r),j(r)}),g()(),m(22,"div",104),Q(23,Net,2,0,"button",105),g()()()}if(n&2){let e=t.$implicit,i=t.$index,r=E(2);_(2),je("Signer ",i+1),_(3),oe("for",sa("signerAccountField",i)),_(4),oe("id",sa("signerAccountField",i))("name",sa("signerAccountField",i)),Oe("ngModel",e.Account),_(2),oe("for",sa("signerSeedField",i)),_(4),oe("id",sa("signerSeedField",i))("name",sa("signerSeedField",i)),Oe("ngModel",e.seed),_(2),oe("for",sa("signerWeightField",i)),_(4),oe("id",sa("signerWeightField",i))("name",sa("signerWeightField",i)),Oe("ngModel",e.SignerWeight),_(2),J(r.txUiService.signers().length>1?23:-1)}}function Vet(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",69),ee(2,"ng-icon",70),m(3,"span",71),w(4,"Multi-Sign Configuration"),g()(),m(5,"div",72),yn(6,Bet,24,23,"fieldset",98,SF),g(),m(8,"div",74)(9,"div",75)(10,"button",76),X("click",function(){U(e);let r=E();return j(r.addSigner())}),w(11,"Add Signer"),g()(),m(12,"div",75)(13,"label",99),w(14,"Signer Quorum"),g(),m(15,"p",80),w(16,"A target number for the signer weights."),g(),m(17,"input",100),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.signerQuorum,r)||(o.txUiService.signerQuorum=r),j(r)}),X("ngModelChange",function(){U(e);let r=E();return j(r.validateQuorum())}),g()()()()}if(n&2){let e=E();_(6),vn(e.txUiService.signers()),_(11),Oe("ngModel",e.txUiService.signerQuorum)}}function Uet(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"div",69),ee(2,"ng-icon",107),m(3,"span",71),w(4,"Regular Key Configuration"),g()(),m(5,"div",72)(6,"div",78)(7,"div",75)(8,"label",108),w(9,"Account"),g(),m(10,"p",80),w(11,"The regular key pair to be assigned to the account."),g(),m(12,"input",109),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.regularKeyAddress,r)||(o.txUiService.regularKeyAddress=r),j(r)}),g()(),m(13,"div",75)(14,"label"),w(15,"Seed"),g(),m(16,"p",80),w(17,"The seed for the regular key account."),g(),m(18,"input",110),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.txUiService.regularKeySeed,r)||(o.txUiService.regularKeySeed=r),j(r)}),g()()()()()}if(n&2){let e=E();_(12),Oe("ngModel",e.txUiService.regularKeyAddress),_(6),Oe("ngModel",e.txUiService.regularKeySeed)}}function jet(n,t){if(n&1){let e=ge();m(0,"div",20)(1,"button",87),X("click",function(){U(e);let r=E();return j(r.setMultiSign("Y"))}),w(2),g(),m(3,"button",88),X("click",function(){U(e);let r=E();return j(r.setMultiSign("N"))}),w(4),g()()}if(n&2){let e=E();_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Set Multi-Sign"),_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Remove Multi-Sign")}}function Het(n,t){if(n&1){let e=ge();m(0,"div",21)(1,"button",87),X("click",function(){U(e);let r=E();return j(r.setRegularKey("Y"))}),w(2),g(),m(3,"button",88),X("click",function(){U(e);let r=E();return j(r.setRegularKey("N"))}),w(4),g()()}if(n&2){let e=E();_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Set Regular Key"),_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Remove Regular Key")}}function Wet(n,t){if(n&1){let e=ge();m(0,"div",21)(1,"button",87),X("click",function(){U(e);let r=E();return j(r.updateMetaData())}),w(2),g()()}if(n&2){let e=E();_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Modify Account Meta Data")}}function zet(n,t){if(n&1){let e=ge();m(0,"div",21)(1,"button",87),X("click",function(){U(e);let r=E();return j(r.setDepositAuthAccounts("Y"))}),w(2),g(),m(3,"button",88),X("click",function(){U(e);let r=E();return j(r.setDepositAuthAccounts("N"))}),w(4),g()()}if(n&2){let e=E();_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Set Deposit Authorization"),_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Remove Deposit Authorization")}}function qet(n,t){if(n&1){let e=ge();m(0,"div",21)(1,"button",87),X("click",function(){U(e);let r=E();return j(r.updateFlags())}),w(2),g()()}if(n&2){let e=E();_(),oe("disabled",e.txUiService.spinner()),_(),Ee(e.txUiService.spinner()?"Processing...":"Modify Account Flags")}}var X8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);xrplTransactions=N(Yu);customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("modifyAccountFlags");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);totalFlagsValue=P(0);totalFlagsHex=P("0x0");accountInfo;configurationType=P(null);isHolderConfiguration=P(!1);isExchangerConfiguration=P(!1);isIssuerConfiguration=P(!1);hasSignerList=P(!1);FLAG_VALUES=V1.AccountSetAsfFlags;flags={asfRequireDest:!1,asfRequireAuth:!1,asfDisallowXRP:!1,asfDisableMaster:!1,asfNoFreeze:!1,asfGlobalFreeze:!1,asfDefaultRipple:!1,asfDepositAuth:!1,asfAuthorizedNFTokenMinter:!1,asfDisallowIncomingNFTokenOffer:!1,asfDisallowIncomingCheck:!1,asfDisallowIncomingPayChan:!1,asfDisallowIncomingTrustline:!1,asfAllowTrustLineClawback:!1,asfAllowTrustLineLocking:!1};accountFlagsConfig=[{key:"asfRequireDest",title:"Require Destination Tag",desc:"Require a destination tag to send transactions to this account."},{key:"asfRequireAuth",title:"Require Trust Line Auth",desc:"Require authorization for users to hold balances issued by this address can only be enabled if the address has no trust lines connected to it."},{key:"asfDisallowXRP",title:"Disallow XRP",desc:"XRP should not be sent to this account."},{key:"asfDisableMaster",title:"Disable Master Key",desc:"Disallow use of the master key pair. Can only be enabled if the account has configured another way to sign transactions, such as a Regular Key or a Signer List."},{key:"asfNoFreeze",title:"No Freeze",desc:"Permanently give up the ability to freeze individual trust lines or disable Global Freeze. This flag can never be disabled after being enabled."},{key:"asfGlobalFreeze",title:"Global Freeze",desc:"Freeze all assets issued by this account."},{key:"asfDefaultRipple",title:"Default Ripple",desc:"Enable rippling on this account's trust lines by default."},{key:"asfDepositAuth",title:"Deposit Authorization",desc:"Enable Deposit Authorization on this account."},{key:"asfAuthorizedNFTokenMinter",title:"Authorized NFToken Minter",desc:"Allow another account to mint and burn tokens on behalf of this account."},{key:"asfDisallowIncomingNFTokenOffer",title:"Disallow Incoming NFToken Offer",desc:"Disallow other accounts from creating incoming NFTOffers."},{key:"asfDisallowIncomingCheck",title:"Disallow Incoming Check",desc:"Disallow other accounts from creating incoming Checks."},{key:"asfDisallowIncomingPayChan",title:"Disallow Incoming Payment Channel",desc:"Disallow other accounts from creating incoming PayChannels."},{key:"asfDisallowIncomingTrustline",title:"Disallow Incoming Trustline",desc:"Disallow other accounts from creating incoming Trustlines."},{key:"asfAllowTrustLineClawback",title:"Allow TrustLine Clawback",desc:"Permanently gain the ability to claw back issued IOUs."},{key:"asfAllowTrustLineLocking",title:"Allow TrustLine Locking",desc:"Issuers allow their IOUs to be used as escrow amounts."}];avatarUrl=_e(()=>{let t=this.txUiService.userEmail();if(t&&t.includes("@"))return`https://api.dicebear.com/7.x/shapes/svg?seed=${encodeURIComponent(t.trim().toLowerCase())}`;if(t)return`https://api.dicebear.com/7.x/identicon/svg?seed=${t}`;let e=localStorage.getItem("avatarUrl");return e||""});infoData=_e(()=>{if(!this.currentWallet().address)return null;let t=this.currentWallet().name||"selected",e=this.accountInfo?.result?.account_flags,i=[],r=!!this.accountInfo?.result?.account_data?.RegularKey;if(e?.disableMasterKey?(this.hasSignerList()&&i.push("Multi-signing enabled"),r&&i.push("Regular Key configured"),i.push("Master key permanently disabled")):(this.hasSignerList()&&i.push("Multi-signing configured"),r&&i.push("Regular Key configured"),i.push("Master key enabled")),this.txUiService.depositAuthEnabled()){let a=this.txUiService.depositAuthAddresses().filter(l=>l.account).length;a>0?i.push(`Deposit Authorization enabled (${a} preauthorized account${a>1?"s":""})`):i.push("Deposit Authorization enabled")}let s=[];return e?.noFreeze&&s.push("No Freeze"),e?.allowTrustLineClawback&&s.push("Clawback"),{walletName:t,hasSpecialConfig:i.length>0||s.length>0,configItems:i,irreversibleFlags:s,hasIrreversible:s.length>0}});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),yield this.getAccountDetails(!0))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.hasWallets()&&(yield this.getAccountDetails(!0))})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}validateQuorum(){let t=this.txUiService.signers().reduce((e,i)=>e+(i.SignerWeight||0),0);this.txUiService.signerQuorum()>t&&this.txUiService.signerQuorum.set(t)}onConfigurationChange(){this.resetFlags();let t=this.configurationType()||"";({holder:()=>this.setHolder(),exchanger:()=>this.setExchanger(),issuer:()=>this.setIssuer()})[t]?.(),this.updateFlagTotal(),console.log("Configuration changed to:",this.configurationType())}toggleConfigurationTemplate(){}addSigner(){this.txUiService.addSignersSignal({account:"",seed:"",weight:1})}removeSigner(t){this.txUiService.removeSignerSignal(t)}addDepositAuthAddresses(){this.txUiService.addDepositAuthAddressesSignal({account:"",seed:"",weight:1})}removeDepositAuthAddresses(t){this.txUiService.removeDepositAuthAddressesSignal(t)}onNoFreezeChange(){this.flags.asfNoFreeze&&alert("Prevent Freezing Trust Lines (No Freeze) cannot be unset!")}onClawbackChange(){this.flags.asfAllowTrustLineClawback&&alert("Trust Line Clawback cannot be unset!")}getAccountDetails(t=!1){return z(this,null,function*(){yield this.withPerf("getAccountDetails",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages(),this.configurationType.set(null);try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t);this.accountInfo=r;let s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));Re.FLAGS.forEach(a=>{let l=Re.FLAGMAP[a.name];if(l){let c=!!r.result.account_flags?.[l],d=a.name;this.flags[d]=c}}),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getAccountDetails:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}updateFlags(){return z(this,null,function*(){yield this.withPerf("updateFlags",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t),this.xrplCache.getServerInfo(this.xrplService)]),{setFlags:l,clearFlags:c}=this.utilsService.getFlagUpdates(i.result.account_flags);this.txUiService.showSpinnerWithDelay(this.txUiService.isSimulateEnabled()?"Simulating Flag Modifications (no changes will be made)...":"Submitting Flag Modifications to Ledger...",200);let d=[];for(let f of l){let p=yield this.handleFlagTx(t,e,i,o,s,a,"SetFlag",f,this.txUiService.memoField());d.push(p),this.txUiService.addTxHashSignal(p.hash),this.txUiService.addTxResultSignal(p.result)}for(let f of c){let p=yield this.handleFlagTx(t,e,i,o,s,a,"ClearFlag",f,this.txUiService.memoField());d.push(p),this.txUiService.addTxHashSignal(p.hash),this.txUiService.addTxResultSignal(p.result)}let u=d.filter(f=>f.success),h=d.filter(f=>!f.success);u.length>0&&(this.txUiService.successMessage=`${u.length} Flag Transaction(s) Succeeded.`,this.txUiService.successMessage+=" [ "+this.getFlagNames(u)+" ]",this.txUiService.isSuccess=!0,u.forEach(f=>f.hash&&this.txUiService.txHashes.push(f.hash))),h.length>0&&(this.txUiService.errorMessage=`${h.length} Flag Transaction(s) Failed.`,this.txUiService.errorMessage+=" [ "+this.getFlagNames(h)+" ]",this.txUiService.isError=!0,h.forEach(f=>f.hash&&this.txUiService.txErrorHashes.push(f.hash))),this.txUiService.isSimulateEnabled()||(yield this.refreshAfterTx(t,e,null,!1))}catch(t){console.error("Error in updateFlags:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}updateMetaData(){return z(this,null,function*(){yield this.withPerf("updateMetaData",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),a={TransactionType:"AccountSet",Account:e.classicAddress,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,a,e,i);let l=[];if(this.txUiService.tickSize()&&l.push(()=>this.utilsService.setTickSize(a,parseInt(this.txUiService.tickSize()))),this.txUiService.transferRate()&&l.push(()=>this.utilsService.setTransferRate(a,parseFloat(this.txUiService.transferRate()))),this.txUiService.isMessageKey()&&e.publicKey&&l.push(()=>this.utilsService.setMessageKey(a,e.publicKey)),this.txUiService.userEmail()&&l.push(()=>this.utilsService.setEmailHash(a,this.txUiService.userEmail())),this.txUiService.domain&&this.txUiService.domain().trim()!==""&&l.push(()=>this.utilsService.setDomain(a,this.txUiService.domain())),l.length===0){this.txUiService.setWarning("No meta data fields selected for modification.");return}l.forEach(d=>d());let c=yield this.txExecutor.updateMetaData(a,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);this.txUiService.isUpdateMetaData.set(!0),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Meta Data update successfully!":"Updated Meta Data successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in updateMetaData:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setDepositAuthAccounts(t){return z(this,null,function*(){yield this.withPerf("setDepositAuthAccounts",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();let e=this.createDepsoitAuthEntries(),i=this.formatDepositAuthEntries(e);if(!i.length)return this.txUiService.setError("Deposit Auth address list is empty");try{let[r,o]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:s,accountObjects:a},l,c]=yield Promise.all([this.xrplCache.getAccountData(o.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(r)]);for(let p of i){let y=a.result.account_objects.some(v=>v.Authorize===p.SignerEntry.Account);if(t==="Y"&&y)return this.txUiService.setError(`Preauthorization already exists for ${p.SignerEntry.Account} (tecDUPLICATE). Use Unauthorize to remove`);if(t==="N"&&!y)return this.txUiService.setError(`No preauthorization exists for ${p.SignerEntry.Account} to unauthorize`)}let d=i.length,u=this.txUiService.isSimulateEnabled();this.txUiService.showSpinnerWithDelay(u?`Simulating deletion of ${d} ticket(s)...`:`Deleting ${d} ticket(s)...`,200);let h=0,f=[];for(let p=0;p<i.length;p++){let y=i[p],v=u?`Simulating ticket ${p+1}/${d}...`:`Deleting ticket ${p+1}/${d}...`;this.txUiService.updateSpinnerMessage(v);let b=yield this.xrplService.getLastLedgerIndex(r),S={TransactionType:"DepositPreauth",Account:o.classicAddress,[t==="Y"?"Authorize":"Unauthorize"]:y.SignerEntry.Account,Fee:l,LastLedgerSequence:b+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(r,S,o,s);let x=yield this.txExecutor.setDepositAuth(S,o,r,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds(),suppressIndividualFeedback:!0,customSpinnerMessage:v});if(x.success)h++,f.push(x.hash);else{this.txUiService.setError(`${x.error}`);return}}h>0&&(f.forEach(p=>this.txUiService.addTxHashSignal(p)),this.utilsService.setSuccess(this.utilsService.result),this.txUiService.successMessage=u?`Simulated ${h} deposit authorizations successfully!`:`${h} deposit authorizations processed successfully!`),yield this.refreshAfterTx(r,o,null,!0)}catch(r){console.error("Error in setDepositAuthAccounts:",r),this.txUiService.setError(`${r.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setMultiSign(t){return z(this,null,function*(){yield this.withPerf("enableMultiSignFlag",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:r,accountObjects:o},s,a]=yield Promise.all([this.xrplCache.getAccountData(i.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(e)]),l=this.createSignerEntries(),c=this.formatSignerEntries(l),d={TransactionType:"SignerListSet",Account:i.classicAddress,SignerQuorum:0,Fee:s};yield this.setTxOptionalFields(e,d,i,r),d.LastLedgerSequence=a+Re.LAST_LEDGER_ADD_TIME,console.debug("enableMultiSignFlag:",t);let u="Remove";if(t==="Y"){if(d.SignerEntries=c,Number(this.txUiService.signerQuorum())<=0)return this.txUiService.setError("Signer Quorum must be greater than 0.");d.SignerQuorum=Number(this.txUiService.signerQuorum()),u="Set"}let h=yield this.txExecutor.setMultiSign(d,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!h.success)return this.txUiService.setError(`${h.error}`);t==="Y"?(this.txUiService.successMessage="Set Multi Sign successfully!",this.storageService.set(i.classicAddress+"signerEntries",l)):(this.txUiService.successMessage="Removed Multi Sign successfully!",this.storageService.removeValue(i.classicAddress+"signerEntries"),this.txUiService.signerQuorum.set(0)),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?`Simulated ${u} Multi Sign successfully!`:`${u} Multi Sign successfully successfully!`,yield this.refreshAfterTx(e,i,null,!1)}catch(e){console.error("Error in setMultiSign:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setRegularKey(t){return z(this,null,function*(){yield this.withPerf("setRegularKey",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:r,accountObjects:o},s,a]=yield Promise.all([this.xrplCache.getAccountData(i.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(e)]);if(this.txUiService.regularKeyAddress()===""||this.txUiService.regularKeyAddress()==="No RegularKey configured for account"||this.txUiService.regularKeySeed()==="")return this.txUiService.setError("Regular Key address and seed must be present");let l={TransactionType:"SetRegularKey",Account:i.classicAddress,Fee:s,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};t==="Y"&&(l.RegularKey=this.txUiService.regularKeyAddress()),yield this.setTxOptionalFields(e,l,i,r);let c=yield this.txExecutor.setRegularKey(l,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);if(!this.txUiService.isSimulateEnabled()){let d=i.classicAddress+"regularKey",u=i.classicAddress+"regularKeySeed";t==="Y"?(this.storageService.set(d,this.txUiService.regularKeyAddress()),this.storageService.set(u,this.txUiService.regularKeySeed())):(this.storageService.removeValue(d),this.storageService.removeValue(u))}this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?`Simulated ${t==="Y"?"Set Regular Key":"Regular Key removal"} successfully!`:`${t==="Y"?"Set Regular Key":"Regular Key removal"} successfully!`,yield this.refreshAfterTx(e,i,null,!1)}catch(e){console.error("Error in setRegularKey:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setNftMinterAddress(t){return z(this,null,function*(){yield this.withPerf("setNftMinterAddress",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:r,accountObjects:o},s,a]=yield Promise.all([this.xrplCache.getAccountData(i.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(e)]),l={TransactionType:"AccountSet",Account:i.classicAddress,Fee:s,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};t==="Y"?(l.NFTokenMinter=this.txUiService.nfTokenMinterAddress(),l.SetFlag=V1.AccountSetAsfFlags.asfAuthorizedNFTokenMinter):l.ClearFlag=V1.AccountSetAsfFlags.asfAuthorizedNFTokenMinter,yield this.setTxOptionalFields(e,l,i,r);let c=yield this.txExecutor.setNftMinterAddress(l,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);this.txUiService.successMessage=`${t==="Y"?"Set NFT Minter Address":"NFT Minter Address removal"} successfully!`,yield this.refreshAfterTx(e,i,null,!1)}catch(e){console.error("Error in setNftMinterAddress:",e),this.txUiService.setError(`${e.message||"Unknown error"}`)}finally{this.txUiService.spinner.set(!1)}}))})}handleFlagTx(t,e,i,r,o,s,a,l,c){return z(this,null,function*(){try{let d=yield this.submitFlagTransaction(t,e,i,r,o,s,a==="SetFlag"?{SetFlag:l}:{ClearFlag:l},c),u=this.utilsService.getFlagName(l),h=d?.success===!0,f=d?.message,p=typeof f=="object"&&"result"in f?f.result:f,y;try{if(typeof p=="object"&&p)y=p.hash??p.tx_json?.hash;else if(typeof p=="string"){let v=JSON.parse(p);y=v.hash??v.tx_json?.hash}}catch{y=void 0}return{flagType:a,flagName:u,hash:y,success:h,result:p,error:h?void 0:JSON.stringify(p)}}catch(d){return{flagType:a,flagName:this.utilsService.getFlagName(l),success:!1,error:d.message||"Unknown error"}}})}submitFlagTransaction(t,e,i,r,o,s,a,l){return z(this,null,function*(){console.log("Entering submitFlagTransaction");let c=Date.now();if(a.SetFlag){let d=Array.from(Re.FLAGS.values()).find(u=>u.value===a.SetFlag);this.txUiService.updateSpinnerMessage(`Submitting ${d?d.label:"Flag"} set flag to the Ledger...`)}if(a.ClearFlag){let d=Array.from(Re.FLAGS.values()).find(u=>u.value===a.ClearFlag);this.txUiService.updateSpinnerMessage(`Submitting ${d?d.label:"Flag"} clear flag to the Ledger...`)}try{let d="",u=!1;this.txUiService.isRegularKeyAddress()&&!this.txUiService.useMultiSign()&&(console.log("Using Regular Key Seed for transaction signing"),d=yield this.utilsService.getWallet(this.txUiService.regularKeySeed()),u=!0);let h=Ge(le({TransactionType:"AccountSet",Account:e.classicAddress},a),{Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME});yield this.setTxOptionalFields(t,h,e,i);let f,p=h;if(this.txUiService.isSimulateEnabled())f=yield this.xrplTransactions.simulateTransaction(t,h);else{let y=null;if(this.txUiService.useMultiSign()){let v=this.utilsService.getMultiSignAddress(this.txUiService.multiSignAddress());if(v.length===0)return this.txUiService.setError("No signer addresses provided for multi-signing");let b=this.utilsService.getMultiSignSeeds(this.txUiService.multiSignSeeds());if(b.length===0)return this.txUiService.setError("No signer seeds provided for multi-signing");try{let S=yield this.utilsService.handleMultiSignTransaction({client:t,wallet:e,tx:h,signerAddresses:v,signerSeeds:b,fee:r});if(y=S.signedTx,h.Signers=S.signers,console.debug("Payment with Signers:",h),console.debug("SignedTx:",y),!y)return this.txUiService.setError("No valid signature collected for multisign transaction");let x=String((v.length+1)*Number(yield this.xrplService.calculateTransactionFee(t)));console.debug(`multiSignFee: ${x}`),h.Fee=x;let k=V1.decode(y.tx_blob);console.debug("Decoded Final Tx:",k)}catch(S){return{success:!1,message:`${S.message}`}}}else{let v=yield t.autofill(h);console.debug("preparedTx:",v),u?(console.log("Using RegularKey to sign transaction"),y=d.sign(v)):y=e.sign(v)}if(this.utilsService.isInsufficientXrpBalance1(s,i,"0",e.classicAddress,h,r))return{success:!1,message:"Insufficient XRP to complete transaction"};if(!y)return{success:!1,message:"Failed to sign transaction."};p=V1.decode(y.tx_blob),this.txUiService.addTxSignal(p),f=yield t.submitAndWait(y.tx_blob)}return f.result.meta.TransactionResult!="tesSUCCESS"?{success:!1,message:f}:{success:!0,message:f}}catch(d){return{success:!1,message:`ERROR submitting flag: ${d.message}`}}finally{console.log(`Leaving submitFlagTransaction in ${Date.now()-c}ms`)}})}updateAvatarUrlFromEmail(t){if(!t||!t.includes("@")){this.txUiService.avatarUrl.set("");return}let e=encodeURIComponent(t.trim().toLowerCase());this.txUiService.avatarUrl.set(`https://api.dicebear.com/7.x/shapes/svg?seed=${e}`)}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r);let o=e?.result?.account_data.NFTokenMinter;this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:s,signerQuorum:a}=this.utilsService.checkForSignerAccounts(i),l=s?.length>0;if(this.hasSignerList.set(l),this.txUiService.signerQuorum.set(a),s?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(l),l){let f=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(f)}let d=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(d.regularKeyAddress),this.txUiService.regularKeySeed.set(d.regularKeySeed);let u=this.utilsService.findDepositPreauthObjects(i),h=u?.length>0;this.setDepositAuthProperties(h,u),this.setNfTokenMinterProperties(o),this.refreshUiAccountMetaData(e?.result?.account_data)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.txUiService.signers.set([{Account:"",seed:"",SignerWeight:1}]),this.storageService.removeValue("signerEntries")}setDepositAuthProperties(t,e){t?(console.debug("preAuthAccounts:",e),this.txUiService.depositAuthAddresses.set(e.map(i=>({account:i}))),this.txUiService.isdepositAuthAddress.set(!0),this.txUiService.depositAuthEnabled.set(!0)):(this.txUiService.depositAuthAddresses.set([{account:""}]),this.txUiService.isdepositAuthAddress.set(!1),this.txUiService.depositAuthEnabled.set(!1))}setNfTokenMinterProperties(t){t?(this.txUiService.isAuthorizedNFTokenMinter.set(!1),this.txUiService.isNFTokenMinterEnabled.set(!0),this.txUiService.nfTokenMinterAddress.set(t)):(this.txUiService.isAuthorizedNFTokenMinter.set(!1),this.txUiService.isNFTokenMinterEnabled.set(!1),this.txUiService.nfTokenMinterAddress.set(""))}refreshUiAccountMetaData(t){this.clearUiIAccountMetaData();let{TickSize:e,TransferRate:i,Domain:r,MessageKey:o,EmailHash:s}=t;e||i||r||o||s?(this.txUiService.isUpdateMetaData.set(!0),this.refreshUiIAccountMetaData(t)):(this.txUiService.isUpdateMetaData.set(!1),s||(this.txUiService.userEmail.set(""),this.txUiService.avatarUrl.set("")))}refreshUiIAccountMetaData(t){return z(this,null,function*(){let{TickSize:e,TransferRate:i,Domain:r,MessageKey:o,EmailHash:s}=t;this.txUiService.tickSize.set(e||""),this.txUiService.transferRate.set(i?((i/1e9-1)*100).toFixed(3):""),this.txUiService.domain.set(r?this.utilsService.decodeHex(r):""),this.txUiService.isMessageKey.set(!!o),this.txUiService.userEmail.set(s||"")})}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}resetFlags(){Object.keys(this.flags).forEach(t=>this.flags[t]=!1),["domainField","transferRateField","tickSizeField"].forEach(t=>{let e=document.getElementById(t);e&&(e.value="")})}setHolder(){this.flags.asfRequireDest=!1,this.flags.asfRequireAuth=!1,this.flags.asfDisallowXRP=!1,this.flags.asfDisableMaster=!1,this.flags.asfNoFreeze=!1,this.flags.asfGlobalFreeze=!1,this.flags.asfDefaultRipple=!1,this.flags.asfDepositAuth=!1,this.flags.asfAllowTrustLineClawback=!1,this.flags.asfDisallowIncomingNFTokenOffer=!1,this.flags.asfDisallowIncomingCheck=!1,this.flags.asfDisallowIncomingPayChan=!1,this.flags.asfDisallowIncomingTrustline=!1}setExchanger(){this.flags.asfRequireDest=!0,this.flags.asfRequireAuth=!1,this.flags.asfDisallowXRP=!1,this.flags.asfDisableMaster=!1,this.flags.asfNoFreeze=!1,this.flags.asfGlobalFreeze=!1,this.flags.asfDefaultRipple=!0,this.flags.asfDepositAuth=!1,this.flags.asfAuthorizedNFTokenMinter=!1,this.flags.asfDisallowIncomingNFTokenOffer=!0,this.flags.asfDisallowIncomingCheck=!1,this.flags.asfDisallowIncomingPayChan=!0,this.flags.asfDisallowIncomingTrustline=!1,this.flags.asfAllowTrustLineClawback=!1,this.flags.asfAllowTrustLineLocking=!1}setIssuer(){this.flags.asfRequireDest=!1,this.flags.asfRequireAuth=!1,this.flags.asfDisallowXRP=!1,this.flags.asfDisableMaster=!1,this.flags.asfNoFreeze=!1,this.flags.asfGlobalFreeze=!1,this.flags.asfDefaultRipple=!0,this.flags.asfDepositAuth=!1,this.flags.asfAuthorizedNFTokenMinter=!1,this.flags.asfDisallowIncomingNFTokenOffer=!0,this.flags.asfDisallowIncomingCheck=!0,this.flags.asfDisallowIncomingPayChan=!0,this.flags.asfDisallowIncomingTrustline=!1,this.flags.asfAllowTrustLineClawback=!0,this.flags.asfAllowTrustLineLocking=!1}getFlagNames(t){return t.map(e=>e.flagName.replace(/^asf/,"").replace(/([A-Z])/g," $1").replace(/\bN F T\b/g,"NFT").replace(/\bI O U\b/g,"IOU").replace(/\bX R P\b/g,"XRP").trim()).join(" - ")}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll(/</g,"&lt;").replaceAll(/>/g,"&gt;")}formatSignerEntries(t){return t.map(e=>({SignerEntry:{Account:e.Account,SignerWeight:e.SignerWeight}}))}formatDepositAuthEntries(t){return t.map(e=>({SignerEntry:{Account:e.Account}}))}createSignerEntries(){return this.txUiService.signers().filter(t=>t.Account&&t.SignerWeight>0).map(t=>({Account:t.Account,SignerWeight:Number(t.SignerWeight),seed:t.seed}))}createDepsoitAuthEntries(){return this.txUiService.depositAuthAddresses().filter(t=>t.account).map(t=>({Account:t.account}))}clearUiIAccountMetaData(){this.txUiService.tickSize.set(""),this.txUiService.transferRate.set(""),this.txUiService.domain.set(""),this.txUiService.isMessageKey.set(!1)}toggleMessageKey(){this.txUiService.isMessageKey()?this.txUiService.isMessageKey.set(!1):this.txUiService.isMessageKey.set(!0)}toggleFlag(t){this.flags[t]=!this.flags[t],this.updateFlagTotal()}updateFlagTotal(){let t=0;Object.keys(this.flags).forEach(e=>{this.flags[e]&&(t|=1<<this.FLAG_VALUES[e])}),this.totalFlagsValue.set(t),this.totalFlagsHex.set("0x"+t.toString(16).toUpperCase().padStart(8,"0"))}clearFlagsValue(){this.flags={asfRequireDest:!1,asfRequireAuth:!1,asfDisallowXRP:!1,asfDisableMaster:!1,asfNoFreeze:!1,asfGlobalFreeze:!1,asfDefaultRipple:!1,asfDepositAuth:!1,asfAuthorizedNFTokenMinter:!1,asfDisallowIncomingNFTokenOffer:!1,asfDisallowIncomingCheck:!1,asfDisallowIncomingPayChan:!1,asfDisallowIncomingTrustline:!1,asfAllowTrustLineClawback:!1,asfAllowTrustLineLocking:!1},this.totalFlagsValue.set(0),this.totalFlagsHex.set("0x0")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-account-configurator"]],features:[Lt],decls:49,vars:30,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroArrowPath","size","20",1,"text-red-600"],[1,"menu-btn",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[1,"flags-wrapper"],[1,"multisign-section"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row",2,"margin-top","0"],[1,"button-row"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"white-button-submenu"],["name","heroArrowPath","size","20","color","green",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"green-button-submenu"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","8px"],[2,"margin-top","16px","padding-top","12px","border-top","1px solid #bae6fd","font-weight","600","color","#dc2626"],[2,"display","block","font-size","0.88em","font-weight","normal","margin-top","4px","color","#b91c1c"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[2,"padding-bottom","0.3em"],[1,"token-flags-title"],["for","isHolderConfiguration"],["type","radio","id","isHolderConfiguration","name","configurationType","value","holder",3,"ngModelChange","ngModel"],["type","radio","id","isExchangerConfiguration","name","configurationType","value","exchanger",3,"ngModelChange","ngModel"],["for","isExchangerConfiguration"],["type","radio","id","isIssuerConfiguration","name","configurationType","value","issuer",3,"ngModelChange","ngModel"],["for","isIssuerConfiguration"],[1,"token-flags-header"],["name","flag","size","20"],[1,"form-row-account-flags"],[1,"flag-item-account-flags",3,"enabled"],[1,"flag-item-account-flags"],[1,"flags-total"],[1,"total-label"],[1,"total-value"],[1,"flag-item-account-flags",3,"click"],[1,"flag-header-account"],["type","checkbox",1,"flag-checkbox",3,"id","name","checked"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"flag-icon"],["d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0L3 7m1.582 2H12"],[1,"flag-title-account-flags"],[1,"flag-value"],[1,"flag-desc"],[1,"section-header"],["name","heroUserGroup","size","20",1,"text-red-600"],[1,"section-title"],[1,"signers-list"],[1,"signer-fieldset-dep-auth"],[1,"form-row","actions-row"],[1,"form-group"],["type","button",1,"btn-primary-blue",3,"click"],[1,"signer-legend"],[1,"form-row"],[3,"for"],[1,"form-hint"],["type","text","placeholder","r...",1,"input-monospace",3,"ngModelChange","id","ngModel","name"],[1,"form-group","remove-group-dep-auth"],["type","button","title","Remove this deposit auth address",1,"btn-danger","btn-sm"],["type","button","title","Remove this deposit auth address",1,"btn-danger","btn-sm",3,"click"],["name","trash-2","size","16"],["type","text","name","nfTokenMinterAddress",3,"ngModelChange","ngModel"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"],["type","text","name","transferRate",3,"ngModelChange","ngModel"],["type","text","name","tickSize",3,"ngModelChange","ngModel"],["type","email","name","userEmail","placeholder","Enter email",3,"ngModelChange","ngModel"],["type","text","name","avatarUrl","readonly","",3,"ngModelChange","ngModel"],[1,"avatar-preview"],["type","text","name","domain",3,"ngModelChange","ngModel"],[1,"form-row-account-flags",2,"margin-top","0.5em","margin-bottom","0.5em"],["type","checkbox","id","isMessageKey","name","isMessageKey",1,"flag-checkbox",3,"checked"],["alt","Avatar Preview",3,"src"],[1,"signer-fieldset"],["for","signerQuorumField"],["type","number","id","signerQuorumField","name","signerQuorumField","min","1",1,"input-number",3,"ngModelChange","ngModel"],["type","text","placeholder","s...",1,"input-monospace",3,"ngModelChange","id","ngModel","name"],[1,"form-group","weight-group"],["type","number","min","1",1,"input-number",3,"ngModelChange","id","ngModel","name"],[1,"form-group","remove-group"],["type","button","title","Remove this signer",1,"btn-danger","btn-sm"],["type","button","title","Remove this signer",1,"btn-danger","btn-sm",3,"click"],["name","heroKey","size","20",1,"text-red-600"],["for","regularKeyAddress"],["type","text","name","regularKeyAddress","placeholder","No Regular Key configured for account",3,"ngModelChange","ngModel"],["type","text","name","regularKeySeed",3,"ngModelChange","ngModel"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6)(7,"div",7)(8,"button",8),X("click",function(){return U(r),j(i.setTab("modifyAccountFlags"))}),ee(9,"ng-icon",9),w(10,"Modify Account Flags"),g(),m(11,"button",10),X("click",function(){return U(r),j(i.setTab("modifyMetaData"))}),ee(12,"ng-icon",9),w(13," Modify Account Meta Data "),g(),m(14,"button",10),X("click",function(){return U(r),j(i.setTab("modifyDepositAuth"))}),ee(15,"ng-icon",9),w(16," Modify Deposit Authorization "),g(),m(17,"button",10),X("click",function(){return U(r),j(i.setTab("modifyMultiSigners"))}),ee(18,"ng-icon",11),w(19," Add Multi Signer Accounts "),g(),m(20,"button",10),X("click",function(){return U(r),j(i.setTab("modifyRegularKey"))}),ee(21,"ng-icon",11),w(22," Add Regular Key Account "),g()(),Q(23,get,9,0,"div"),Q(24,yet,9,0,"div"),Q(25,vet,9,0,"div"),Q(26,_et,9,0,"div"),Q(27,bet,9,0,"div"),Q(28,Eet,10,3,"div",12),Q(29,Aet,3,1,"div",13),m(30,"form",14,0)(32,"div")(33,"div",15)(34,"div",16),Q(35,Iet,28,5,"div",17),Q(36,Let,12,0,"div",18),Q(37,Oet,57,14),Q(38,Vet,18,1,"div",18),Q(39,Uet,19,2,"div",18),ee(40,"app-transaction-options",19),Q(41,jet,5,4,"div",20)(42,Het,5,4,"div",21)(43,Wet,3,2,"div",21)(44,zet,5,4,"div",21)(45,qet,3,2,"div",21),m(46,"div",22)(47,"input",23),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(48,"app-transaction-preview"),g()()()()()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="modifyAccountFlags"),_(3),Ue("active",i.activeTab()==="modifyMetaData"),_(3),Ue("active",i.activeTab()==="modifyDepositAuth"),_(3),Ue("active",i.activeTab()==="modifyMultiSigners"),_(3),Ue("active",i.activeTab()==="modifyRegularKey"),_(3),J(i.activeTab()==="modifyAccountFlags"?23:-1),_(),J(i.activeTab()==="modifyMetaData"?24:-1),_(),J(i.activeTab()==="modifyDepositAuth"?25:-1),_(),J(i.activeTab()==="modifyMultiSigners"?26:-1),_(),J(i.activeTab()==="modifyRegularKey"?27:-1),_(),J((r=i.infoData())?28:-1,r),_(),J(i.txUiService.warningMessage?29:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()==="modifyAccountFlags"?35:-1),_(),J(i.activeTab()==="modifyDepositAuth"?36:-1),_(),J(i.activeTab()==="modifyMetaData"?37:-1),_(),J(i.activeTab()==="modifyMultiSigners"?38:-1),_(),J(i.activeTab()==="modifyRegularKey"?39:-1),_(),oe("showWhenTab",Ei(29,fet))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(),J(i.activeTab()==="modifyMultiSigners"?41:i.activeTab()==="modifyRegularKey"?42:i.activeTab()==="modifyMetaData"?43:i.activeTab()==="modifyDepositAuth"?44:i.activeTab()==="modifyAccountFlags"?45:-1),_(6),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,M1,ij,$n,Ci,oj,Wn,di,ii,En,xr,Mn,si,oi,ki,mi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var Z8=_i(Ki()),Hj=_i(Ki());var $et=()=>["create","delete","accept"];function Ket(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",30),ee(3,"ng-icon",31),g(),m(4,"div")(5,"h2",32),w(6,"Create Credentials"),g(),m(7,"p",33),w(8,"Create Credentials to another XRPL adress"),g()()()())}function Get(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",34),ee(3,"lucide-icon",35),g(),m(4,"div")(5,"h2",32),w(6,"Accept Credentials"),g(),m(7,"p",33),w(8,"Accept Credentials from another XRPL adress"),g()()()())}function Xet(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",36),ee(3,"lucide-icon",37),g(),m(4,"div")(5,"h2",32),w(6,"Verify Credentials"),g(),m(7,"p",33),w(8,"Verify Credentials have been accepted by another XRPL adress"),g()()()())}function Yet(n,t){n&1&&(m(0,"div")(1,"div",29)(2,"div",38),ee(3,"ng-icon",39),g(),m(4,"div")(5,"h2",32),w(6,"Delete Credentials"),g(),m(7,"p",33),w(8,"Delete Credentials to another XRPL adress"),g()()()())}function Zet(n,t){n&1&&w(0," has not issued any credentials yet. ")}function Qet(n,t){n&1&&w(0," \u2014 all accepted! ")}function Jet(n,t){if(n&1&&(w(0," :"),ee(1,"br"),m(2,"span",45),w(3),g(),ee(4,"br"),m(5,"span",45),w(6,"\u2022 "),m(7,"strong"),w(8),g()()),n&2){let e=E(3);_(3),je("\u2022 ",e.acceptedIssued.length," accepted"),_(5),je("",e.pendingIssued.length," pending acceptance")}}function ett(n,t){if(n&1&&(w(0," has issued "),m(1,"strong"),w(2),g(),w(3),Q(4,Qet,1,0)(5,Jet,9,2)),n&2){let e=E(2);_(2),Ee(e.issuedByMe.length),_(),je(" credential",e.issuedByMe.length===1?"":"s"," "),_(),J(e.pendingIssued.length===0?4:5)}}function ttt(n,t){if(n&1&&Q(0,Zet,1,0)(1,ett,6,3),n&2){let e=E();J(e.issuedByMe.length===0?0:1)}}function ntt(n,t){n&1&&w(0," has no credentials issued to it. ")}function itt(n,t){n&1&&w(0," has no pending credentials to accept \u2014 all accepted! ")}function rtt(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3)),n&2){let e=E(2);_(2),Ee(e.pendingToAccept.length),_(),je(" pending credential",e.pendingToAccept.length===1?"":"s"," to accept: ")}}function ott(n,t){if(n&1&&Q(0,ntt,1,0)(1,itt,1,0)(2,rtt,4,2),n&2){let e=E();J(e.issuedToMe.length===0?0:e.pendingToAccept.length===0?1:2)}}function stt(n,t){n&1&&w(0," has no credentials to delete. ")}function att(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3)),n&2){let e=E(2);_(2),Ee(e.issuedByMe.length),_(),je(" issued credential",e.issuedByMe.length===1?"":"s"," that can be deleted: ")}}function ltt(n,t){if(n&1&&Q(0,stt,1,0)(1,att,4,2),n&2){let e=E();J(e.issuedByMe.length===0?0:1)}}function ctt(n,t){n&1&&w(0," is not involved in any credentials. ")}function dtt(n,t){if(n&1&&(m(0,"span",45),w(1),g(),ee(2,"br")),n&2){let e=E(3);_(),ei("\u2022 ",e.pendingToAccept.length," pending to accept \u2022 ",e.acceptedByMe.length," accepted")}}function utt(n,t){if(n&1&&(m(0,"span",45),w(1),g()),n&2){let e=E(3);_(),ei("\u2022 ",e.pendingIssued.length," issued & pending \u2022 ",e.acceptedIssued.length," accepted")}}function htt(n,t){if(n&1&&(w(0," is involved in "),m(1,"strong"),w(2),g(),w(3),ee(4,"br"),Q(5,dtt,3,2),Q(6,utt,2,2,"span",45)),n&2){let e=E(2);_(2),Ee(e.issuedToMe.length+e.issuedByMe.length),_(),je(" credential",e.issuedToMe.length+e.issuedByMe.length===1?"":"s",": "),_(2),J(e.issuedToMe.length>0?5:-1),_(),J(e.issuedByMe.length>0?6:-1)}}function ftt(n,t){if(n&1&&Q(0,ctt,1,0)(1,htt,7,4),n&2){let e=E();J(e.issuedToMe.length+e.issuedByMe.length===0?0:1)}}function ptt(n,t){if(n&1&&(w(0," \u2014 "),m(1,"strong"),w(2),g()),n&2){let e=E(2);_(2),je("",e.pendingToAccept.length+e.pendingIssued.length," pending")}}function mtt(n,t){n&1&&w(0," \u2014 all accepted ")}function gtt(n,t){n&1&&(lt(),m(0,"svg",54),ee(1,"path",58),g())}function ytt(n,t){n&1&&(lt(),m(0,"svg",55),ee(1,"path",59),g())}function vtt(n,t){if(n&1&&(m(0,"li",51)(1,"app-tooltip-link",52)(2,"div",53),Q(3,gtt,2,0,":svg:svg",54)(4,ytt,2,0,":svg:svg",55),w(5),m(6,"span",56),w(7),g()(),m(8,"div",57),w(9),g()()()),n&2){let e,i=t.$implicit,r=E(4);_(),oe("href",r.txUiService.explorerUrl()+"entry/"+i.index),_(2),J(r.isCredentialAccepted(i)?3:4),_(2),je(" ",i.CredentialType||"Credential"," "),_(2),je(" (",i.Issuer===r.currentWallet().address?"you issued":"issued to you",") "),_(2),w3("Index: ",i.index.slice(0,8)+"..."+i.index.slice(-6)," ",i.Issuer===r.currentWallet().address?"Subject":"Issuer",": ",((e=i.Issuer===r.currentWallet().address?i.Subject:i.Issuer)==null?null:e.slice(0,8))+"..."+((e=i.Issuer===r.currentWallet().address?i.Subject:i.Issuer)==null?null:e.slice(-6)))}}function _tt(n,t){if(n&1&&(m(0,"ul",50),yn(1,vtt,10,7,"li",51,bF().trackByCredentialIndex,!0),g()),n&2){let e=E(2);_(),vn(e.credentialsToShow)}}function btt(n,t){if(n&1){let e=ge();m(0,"div",46),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",47)(2,"span"),w(3),Q(4,ptt,3,1)(5,mtt,1,0),g(),lt(),m(6,"svg",48),ee(7,"path",49),g()(),Q(8,_tt,3,0,"ul",50),g()}if(n&2){let e=E(),i=E();_(3),je(" Credentials (",e.credentialsToShow.length,") "),_(),J(e.pendingToAccept.length+e.pendingIssued.length>0?4:5),_(2),In("transform",i.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(i.infoPanelExpanded()?8:-1)}}function wtt(n,t){if(n&1&&(m(0,"div",14)(1,"div",40)(2,"div",41)(3,"div",42),ee(4,"ng-icon",43),m(5,"code"),w(6),g(),Q(7,ttt,2,1)(8,ott,3,1)(9,ltt,2,1)(10,ftt,2,1),g(),Q(11,btt,9,5,"div",44),g()()()),n&2){let e,i=t;_(6),Ee(i.walletName),_(),J((e=i.mode)==="create"?7:e==="accept"?8:e==="delete"?9:e==="verify"?10:-1),_(4),J(i.credentialsToShow.length>0?11:-1)}}function Stt(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",60)(2,"div",61),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function Ctt(n,t){if(n&1){let e=ge();m(0,"div",18)(1,"label",62),w(2,"Select Credential"),g(),m(3,"p",63),w(4,"Select an existing credential attached to the current wallet."),g(),m(5,"app-select-search-dropdown",64),X("valueChange",function(r){U(e);let o=E();return j(o.onCredentialSelected(r))}),g()()}if(n&2){let e=E();_(5),oe("items",e.credentialItems())("value",e.selectedCredentialItem())}}function xtt(n,t){if(n&1){let e=ge();m(0,"div",19)(1,"div",18)(2,"label",65),w(3,"Subject"),g(),m(4,"p",63),w(5,"The subject of the credential."),g(),m(6,"app-select-search-dropdown",66),X("valueChange",function(r){U(e);let o=E();return j(o.onDestinationSelected(r))}),g()(),m(7,"div",18)(8,"label",67),w(9,"Credential Expiration"),g(),m(10,"p",63),w(11,"Credential expiration."),g(),m(12,"div",68)(13,"input",69),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.credential().subject.expirationDate,r)||(o.credential().subject.expirationDate=r),j(r)}),X("focus",function(){U(e);let r=E();return j(r.populateDefaultDateTime())}),g(),m(14,"div",70)(15,"button",71),X("click",function(){U(e);let r=E();return j(r.setCredentialExpirationToNow())}),w(16,"Now"),g(),m(17,"button",71),X("click",function(){U(e);let r=E();return j(r.addCredentialToExpiration(10))}),w(18,"+10s"),g(),m(19,"button",71),X("click",function(){U(e);let r=E();return j(r.addCredentialToExpiration(30))}),w(20,"+30s"),g(),m(21,"button",71),X("click",function(){U(e);let r=E();return j(r.addCredentialToExpiration(60))}),w(22,"+1min"),g(),m(23,"button",71),X("click",function(){U(e);let r=E();return j(r.addCredentialToExpiration(300))}),w(24,"+5min"),g()()()()()}if(n&2){let e=E();_(6),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(7),Oe("ngModel",e.credential().subject.expirationDate)}}function ktt(n,t){if(n&1){let e=ge();m(0,"div",19)(1,"div",18)(2,"label",72),w(3,"Credential Type"),g(),m(4,"p",63),w(5,"A hex-encoded value to identify the type of credential from the issuer."),g(),m(6,"input",73),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.credential().credential_type,r)||(o.credential().credential_type=r),j(r)}),g()(),m(7,"div",18)(8,"label",74),w(9,"URI"),g(),m(10,"p",63),w(11,"Additional data about the credential (i.e. a link to the VC document)."),g(),m(12,"input",75),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.credential().uri,r)||(o.credential().uri=r),j(r)}),g()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.credential().credential_type),_(6),Oe("ngModel",e.credential().uri)}}function Mtt(n,t){if(n&1){let e=ge();m(0,"div",19)(1,"div",18)(2,"label",72),w(3,"Credential Type"),g(),m(4,"p",63),w(5,"A hex-encoded value to identify the type of credential from the issuer."),g(),m(6,"input",76),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.credentialType,r)||(o.credentialType=r),j(r)}),g()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.credentialType)}}function Ttt(n,t){if(n&1){let e=ge();m(0,"div",19)(1,"div",18)(2,"label",77),w(3,"Credential ID"),g(),m(4,"p",63),w(5,"Ledger hash containing the credential."),g(),m(6,"input",78),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.credentialID,r)||(o.credentialID=r),j(r)}),g()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.credentialID)}}function Ett(n,t){if(n&1){let e=ge();m(0,"button",79),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.createCredential())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create Credential")}}function Att(n,t){if(n&1){let e=ge();m(0,"button",80),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.acceptCredentials())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Accept Credential")}}function Dtt(n,t){if(n&1){let e=ge();m(0,"button",81),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.deleteCredentials())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Delete Credential")}}function Itt(n,t){if(n&1){let e=ge();m(0,"button",82),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.verifyCredential(!1))}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Verify Credential")}}var Y8=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);typedDestination=P("");credentialIdSearchQuery=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");highlightedIndex=P(-1);highlightedCredentialIdIndex=P(-1);activeTab=P("create");wallets=P([]);currentWallet=P({});existingCredentials=P([]);subjectCredentials=P([]);filteredExisting=_e(()=>this.filterCredentials(this.existingCredentials(),this.credentialIdSearchTerm()));filteredSubject=_e(()=>this.filterCredentials(this.subjectCredentials(),this.credentialIdSearchTerm()));credentialIdSearchTerm=P("");credentialID=P("");credentialType=P("");selectedCredentials=P(null);infoPanelExpanded=P(!1);decodeCache=new Map;subject=P("");credential=P({version:"1.0",credential_type:"KYCCredential",issuer:"",subject:{full_name:"",destinationAddress:"",dob:"",country:"",id_type:"",id_number:"",expirationDate:""},verification:{method:"",verified_at:"",verifier:""},hash:"",uri:"ipfs://bafybeiexamplehash"});destinationItems=_e(()=>{let t=this.currentWallet().address;return[...this.wallets().map(i=>({address:i.address,name:i.name??`Wallet ${i.address.slice(0,8)}`})),...this.customDestinations()].map(i=>({id:i.address,display:i.name||"Unknown Wallet",secondary:i.address,isCurrentAccount:i.address===t,isCurrentCode:!1,isCurrentToken:!1}))});selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});onDestinationSelected(t){this.selectedDestinationAddress.set(t?.id||"")}credentialItems=_e(()=>(this.activeTab()==="accept"?this.subjectCredentials():this.existingCredentials()).map(e=>({id:e.index,display:e.CredentialType||"Unknown Type",secondary:e.index.slice(0,12)+"..."+e.index.slice(-10),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1,pending:!this.isCredentialAccepted(e)&&this.activeTab()==="accept"})));selectedCredentialItem=_e(()=>{let t=this.credentialID();return t&&this.credentialItems().find(e=>e.id===t)||null});onCredentialSelected(t){if(!t){this.credentialID.set(""),this.credentialType.set("");return}let e=[...this.existingCredentials(),...this.subjectCredentials()].find(i=>i.index===t.id);e&&(this.selectedCredentials.set(e),this.credentialID.set(e.index),this.credentialType.set(e.CredentialType||""))}infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||"Selected wallet",i=this.existingCredentials(),r=this.subjectCredentials(),o=r.filter(d=>!this.isCredentialAccepted(d)),s=r.filter(d=>this.isCredentialAccepted(d)),a=i.filter(d=>!this.isCredentialAccepted(d)),l=i.filter(d=>this.isCredentialAccepted(d)),c=[];switch(this.activeTab()){case"create":c=[...a,...l];break;case"accept":c=o.length?o:s;break;case"delete":c=i;break;case"verify":c=[...o,...a,...s,...l];break;default:c=i}return{walletName:e,mode:this.activeTab(),issuedByMe:i,issuedToMe:r,pendingIssued:a,acceptedIssued:l,pendingToAccept:o,acceptedByMe:s,credentialsToShow:c}});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.populateDefaultDateTime()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),yield this.getCredentialsForAccount(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByCredentialIndex(t,e){return e.index}trackByWalletAddress(t,e){return e.address}trackByTicket(t,e){return e}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.resetCredentialIdDropDown(),this.txUiService.clearAllOptionsAndMessages(),this.populateDefaultDateTime(),yield this.getAllCredentialsForAccount()})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getAllCredentialsForAccount(){return z(this,null,function*(){yield this.withPerf("getAllCredentials",()=>z(this,null,function*(){let t=yield this.getWallet(),e=yield this.xrplCache.getAccountObjects(t.classicAddress,!1);this.parseCredentials(e,t.classicAddress)}))})}getCredentialsForAccount(t=!1){return z(this,null,function*(){yield this.withPerf("getCredentialsForAccount",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.parseCredentials(o,i.classicAddress),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getCredentialsForAccount:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createCredential(){return z(this,null,function*(){yield this.withPerf("createCredential",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[r,o,s]=yield Promise.all([this.xrplCache.getAccountInfo(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]);console.debug("expirationDate:",this.credential().subject.expirationDate);let a=this.utilsService.toRippleTime(this.credential().subject.expirationDate||"");console.debug("expirationRipple:",a);let l=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:r,fee:o,currentLedger:s},credentials:{credentialType:this.credential().credential_type,subject:i,date:a}}),c=yield this.validationService.validate("CredentialCreate",{inputs:l,client:t,accountInfo:r});if(c.length>0)return this.txUiService.setError(c.join(`
\u2022 `));let d={TransactionType:"CredentialCreate",Account:e.classicAddress,CredentialType:Buffer.from(this.credential().credential_type||"defaultCredentialType","utf8").toString("hex"),Subject:i,Expiration:a,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,r,"createCredential");let u=yield this.txExecutor.createCredential(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Setting Credential successfully!":"Created credential successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in createCredential:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}deleteCredentials(){return z(this,null,function*(){yield this.withPerf("createCredential",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),a=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:i,accountObjects:r,fee:o,currentLedger:s},credentials:{credentialId:this.credentialID()}}),l=yield this.validationService.validate("CredentialDelete",{inputs:a,client:t,accountInfo:i});if(l.length>0)return this.txUiService.setError(l.join(`
\u2022 `));let c=r.result.account_objects.find(h=>h.LedgerEntryType==="Credential"&&h.index===this.credentialID());if(!c){this.txUiService.setError("Credential not found.");return}let d={TransactionType:"CredentialDelete",Account:e.classicAddress,CredentialType:c?.CredentialType,Subject:c?.Subject,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,i,"deleteCredentials");let u=yield this.txExecutor.deleteCredential(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Credential delete successfully!":"Credential removed successfully!",yield this.refreshAfterTx(t,e,null,!1),this.resetCredentialIdDropDown()}catch(t){console.error("Error in deleteCredentials:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}acceptCredentials(){return z(this,null,function*(){yield this.withPerf("acceptCredentials",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getLastLedgerIndex(t),this.xrplCache.getFee(this.xrplService,!1)]),a=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:i},credentials:{credentialId:this.credentialID()}}),l=yield this.validationService.validate("CredentialAccept",{inputs:a,client:t,accountInfo:i});if(l.length>0)return this.txUiService.setError(l.join(`
\u2022 `));let c=r.result.account_objects.find(h=>h.LedgerEntryType==="Credential"&&h.Subject===e.classicAddress);if(!c){this.txUiService.setError("Credential not found.");return}console.debug(`credentialFound for ${e.classicAddress} ${c}`),console.debug("credentialFound:",c);let d={TransactionType:"CredentialAccept",Account:e.classicAddress,Issuer:c?.Issuer,CredentialType:c?.CredentialType,Fee:s,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,i,"acceptCredentials");let u=yield this.txExecutor.acceptCredential(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated accepting credential successfully!":"Credential accepted successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in acceptCredentials:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}verifyCredential(t){return z(this,null,function*(){yield this.withPerf("verifyCredential",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),r=yield this.xrplCache.getAccountInfo(i.classicAddress,!1),o=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:r},credentials:{credentialId:this.credentialID()}}),s=yield this.validationService.validate("CredentialVerify",{inputs:o,client:e,accountInfo:r});if(s.length>0)return this.txUiService.isSuccess=!1,this.txUiService.setError(s.join(`
\u2022 `));if(!this.selectedCredentials()){this.txUiService.setError("No credential selected.");return}let l="",c=this.selectedCredentials()?.CredentialType??"";if(t?l=c.toUpperCase():(l=Z8.convertStringToHex(c).toUpperCase(),console.info(`Raw credential_type ${c} Encoded credential_type as hex: ${l}`)),l.length%2!==0||!Re.CREDENTIAL_REGEX.test(l)){this.txUiService.setError("Credential type must be 128 characters as hexadecimal.");return}let u={command:"ledger_entry",credential:{subject:this.selectedCredentials()?.Subject??"",issuer:i.classicAddress,credential_type:l},ledger_index:"validated"};console.info("Looking up credential...",u),this.txUiService.setTxSignal(u);let h;try{h=yield e.request(u)}catch(p){if(p.data?.error==="entryNotFound"){console.info("Credential was not found"),this.txUiService.setTxResultSignal(p.data),this.txUiService.setError("Credential not found.");return}else{this.txUiService.setTxResultSignal(h),this.txUiService.setError(`Failed to check credential: ${p.message||"Unknown error"}`);return}}this.txUiService.setTxResultSignal(h.result);let f=h.result.node;if(console.info("Found credential:",f),!(f.Flags&Re.LSF_ACCEPTED)){console.info("Credential is not accepted."),this.txUiService.setTxResultSignal(h.result),this.txUiService.setError("Credential is not accepted.");return}if(f.Expiration){let p=(0,Hj.rippleTimeToISOTime)(f.Expiration);console.info(`Credential has expiration: ${p}`),console.info("Looking up validated ledger to check for expiration.");let y;try{y=yield e.request({command:"ledger",ledger_index:"validated"})}catch(b){this.txUiService.setError(`Failed to check credential: ${b.message||"Unknown error"}`);return}let v=(0,Hj.rippleTimeToISOTime)(y.result.ledger.close_time);if(console.info(`Most recent validated ledger is: ${v}`),new Date(v)>new Date(p)){console.info("Credential is expired."),this.txUiService.setError("Credential is expired.");return}this.txUiService.setTxResultSignal(y.result)}return console.info("Credential is verified."),this.txUiService.setSuccess(this.txUiService.result),this.txUiService.successMessage="Credential is verified.",!0}catch(e){console.error("Error in verifyCredential:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}decodeutf8Hex(t){if(!t)return"N/A";if(this.decodeCache.has(t))return this.decodeCache.get(t);try{let e=Buffer.from(t,"hex").toString("utf8")||"N/A";return this.decodeCache.set(t,e),e}catch{return this.decodeCache.set(t,"Invalid Hex"),"Invalid Hex"}}getExistingCredentials(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Credential"&&r.Issuer===e).map(r=>({index:r.index,CredentialType:r.CredentialType?this.decodeutf8Hex(r.CredentialType):"Unknown Type",Expiration:r.Expiration?this.utilsService.fromRippleTime(r.Expiration).est:"N/A",Issuer:r.Issuer,Subject:r.Subject,URI:this.decodeutf8Hex(r.URI),Flags:this.utilsService.getCredentialStatus(r.Flags)})).sort((r,o)=>r.Expiration.localeCompare(o.Expiration));this.existingCredentials.set(i),this.utilsService.logObjects("existingCredentials",i)}getSubjectCredentials(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Credential"&&r.Subject===e).map(r=>({index:r.index,CredentialType:r.CredentialType?this.decodeutf8Hex(r.CredentialType):"Unknown Type",Expiration:r.Expiration?this.utilsService.fromRippleTime(r.Expiration).est:"N/A",Issuer:r.Issuer,Subject:r.Subject,URI:this.decodeutf8Hex(r.URI),Flags:this.utilsService.getCredentialStatus(r.Flags)})).sort((r,o)=>r.Expiration.localeCompare(o.Expiration));this.subjectCredentials.set(i),this.utilsService.logObjects("subjectCredentials",i)}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(o==="createCredential"&&this.credential().uri&&this.utilsService.setURI(e,this.credential().uri),this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getExistingCredentials(s,e.classicAddress),this.getSubjectCredentials(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}parseCredentials(t,e){let i=t.result.account_objects??[],r=i.filter(s=>s.LedgerEntryType==="Credential"&&s.Issuer===e).map(s=>this.mapCredential(s)).sort((s,a)=>(s.Expiration||"").localeCompare(a.Expiration||"")),o=i.filter(s=>s.LedgerEntryType==="Credential"&&s.Subject===e).map(s=>this.mapCredential(s)).sort((s,a)=>(s.Expiration||"").localeCompare(a.Expiration||""));this.existingCredentials.set(r),this.subjectCredentials.set(o)}mapCredential(t){return{index:t.index,CredentialType:t.CredentialType?this.decodeutf8Hex(t.CredentialType):"Unknown Type",Expiration:t.Expiration?this.utilsService.fromRippleTime(t.Expiration).est:"N/A",Issuer:t.Issuer,Subject:t.Subject,URI:this.decodeutf8Hex(t.URI),Flags:this.utilsService.getCredentialStatus(t.Flags)}}filterCredentials(t,e){if(!e)return t;let i=e.toLowerCase();return t.filter(r=>[r.CredentialType,r.Issuer,r.Subject,r.index].some(o=>o?.toLowerCase().includes(i)))}addNewDestinationFromUser(t){!t||!Z8.isValidAddress(t)||this.destinationItems().some(i=>i.id===t)||(this.customDestinations.update(i=>[...i,{name:`Custom ${i.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}addToDateTimeField(t,e,i){let r=t();if(!r){let a=new Date;r=this.formatDateTimeLocal(a)}let o=new Date(r);o.setSeconds(o.getSeconds()+i);let s=this.formatDateTimeLocal(o);e.set(s)}formatDateTimeLocal(t){let e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${e}-${i}-${r}T${o}:${s}:${a}`}addCredentialToExpiration(t){let e=this.credential().subject.expirationDate;e||(e=this.formatDateTimeLocal(new Date));let i=new Date(e);i.setSeconds(i.getSeconds()+t);let r=this.formatDateTimeLocal(i);this.credential.update(o=>Ge(le({},o),{subject:Ge(le({},o.subject),{expirationDate:r})}))}setCredentialExpirationToNow(){let t=new Date,e=this.formatDateTimeLocal(t);this.credential.update(i=>Ge(le({},i),{subject:Ge(le({},i.subject),{expirationDate:e})}))}populateDefaultDateTime(){this.setCredentialExpirationToNow()}copyCredentialId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Credential Id copied!")})}isCredentialAccepted(t){return typeof t.Flags=="number"?(t.Flags&Re.LSF_ACCEPTED)!==0:typeof t.Flags=="object"?!!t.Flags.lsfAccepted:t.Flags==="Credential accepted"}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}resetCredentialIdDropDown(){this.selectedCredentials.set(null),this.credentialID.set(""),this.credentialType.set("")}clearFields(){this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.resetCredentialIdDropDown(),this.txUiService.clearAllOptionsAndMessages()}onCredentialIdInput(t){let e=t.target.value;this.credentialIdSearchQuery.set(e)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-credentials"]],features:[Lt],decls:47,vars:30,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],["name","copy-plus","size","20",2,"padding-top","5px"],[1,"menu-btn",3,"click"],["name","shield-ellipsis","size","23",2,"padding-top","5px"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-group"],[1,"form-row"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-primary-orange",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"green-button-submenu"],["name","copy-plus","size","27",2,"padding-top","5px"],[1,"orange-button-submenu"],["name","shield-ellipsis","size","27",2,"padding-top","5px"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[2,"margin-left","24px"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View Credential on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","#16a34a","stroke-width","3.5",2,"margin-right","6px","vertical-align","-2px"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","#dc2626","stroke-width","3.5",2,"margin-right","6px","vertical-align","-2px"],[2,"color","#888","font-size","0.9em"],[2,"color","#555","font-size","0.88em","margin-left","20px"],["d","M20 6 9 17l-5-5"],["d","M18 6 6 18M6 6l12 12"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],["for","selectCredential"],[1,"form-hint"],["placeholder","Search by type, issuer, or ID...","emptyMessage","No credentials found",3,"valueChange","items","value"],["for","destinationSubject"],["placeholder","Enter or select destination address","emptyMessage","No wallets available",3,"valueChange","items","value"],["for","credentialExpiration"],[1,"expiration-input-group"],["type","datetime-local","name","expirationDate","step","1",1,"expiration-input",3,"ngModelChange","focus","ngModel"],[1,"expiration-buttons"],["type","button",1,"btn-small","btn-primary-blue",3,"click"],["for","credentialType"],["type","text","name","credential_type",3,"ngModelChange","ngModel"],["for","uri"],["type","text","name","uri",3,"ngModelChange","ngModel"],["type","text","name","credentialType",3,"ngModelChange","ngModel"],["for","credentialId"],["type","text","id","credentialID","name","credentialID",3,"ngModelChange","ngModel"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"],["type","button",1,"btn-primary-orange",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6)(7,"div",7)(8,"button",8),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",9),w(10," Create Credentials "),g(),m(11,"button",8),X("click",function(){return U(r),j(i.setTab("accept"))}),ee(12,"lucide-icon",10),w(13," Accept Credentials "),g(),m(14,"button",11),X("click",function(){return U(r),j(i.setTab("verify"))}),ee(15,"lucide-icon",12),w(16," Verify Credentials "),g(),m(17,"button",11),X("click",function(){return U(r),j(i.setTab("delete"))}),ee(18,"ng-icon",13),w(19," Delete Credentials "),g()(),Q(20,Ket,9,0,"div"),Q(21,Get,9,0,"div"),Q(22,Xet,9,0,"div"),Q(23,Yet,9,0,"div"),Q(24,wtt,12,3,"div",14),Q(25,Stt,3,1,"div",15),m(26,"form",16,0)(28,"div",17)(29,"div"),Q(30,Ctt,6,2,"div",18),Q(31,xtt,25,3,"div",19),Q(32,ktt,13,2,"div",19),Q(33,Mtt,7,1,"div",19),Q(34,Ttt,7,1,"div",19),ee(35,"app-transaction-options",20),m(36,"div",21),Q(37,Ett,3,4,"button",22)(38,Att,3,4,"button",23)(39,Dtt,3,4,"button",24)(40,Itt,3,4,"button",25),m(41,"button",26),ct(42,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(43,"Clear Fields"),g()()(),m(44,"div",27)(45,"input",28),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(46,"app-transaction-preview"),g()()()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="accept"),_(3),Ue("active",i.activeTab()==="verify"),_(3),Ue("active",i.activeTab()==="delete"),_(3),J(i.activeTab()==="create"?20:-1),_(),J(i.activeTab()==="accept"?21:-1),_(),J(i.activeTab()==="verify"?22:-1),_(),J(i.activeTab()==="delete"?23:-1),_(),J((r=i.infoData())?24:-1,r),_(),J(i.txUiService.warningMessage?25:-1),_(4),oe("@tabTransition",i.activeTab()),_(),J(i.activeTab()!=="create"?30:-1),_(),J(i.activeTab()==="create"?31:-1),_(),J(i.activeTab()==="create"?32:-1),_(),J(i.activeTab()==="verify"?33:-1),_(),J(i.activeTab()!=="create"&&(i.activeTab()==="delete"||i.activeTab()==="verify"||i.activeTab()==="accept")?34:-1),_(),oe("showWhenTab",Ei(29,$et))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="create"?37:i.activeTab()==="accept"?38:i.activeTab()==="delete"?39:i.activeTab()==="verify"?40:-1),_(4),oe("disabled",!mt(42,27,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,$r,Bi,zi],styles:['.credential-selector[_ngcontent-%COMP%]{position:relative}.credential-dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #e0e0e0;border-radius:12px;max-height:380px;overflow-y:auto;z-index:9999;margin-top:4px;box-shadow:0 10px 30px #00000026}.credential-selector[_ngcontent-%COMP%]   .hover-bg-light[_ngcontent-%COMP%]:hover{background-color:#f5f5f5!important}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%]{background:transparent!important}.credential-dropdown-menu[_ngcontent-%COMP%]{z-index:999999!important}.hover-bg-light[_ngcontent-%COMP%]:hover{background-color:#f8f9fa!important}.info-panel[_ngcontent-%COMP%]{background:#f0f9ff;border:1px solid #bae6fd;border-radius:10px;padding:14px 16px;margin:16px 0;cursor:pointer;transition:all .25s ease;-webkit-user-select:none;user-select:none}.info-panel[_ngcontent-%COMP%]:hover{background:#e0f2fe;border-color:#0ea5e9}.info-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:600;color:#0369a1;font-size:.95em}.info-panel.collapsed[_ngcontent-%COMP%]   .credential-list[_ngcontent-%COMP%]{display:none}.info-panel.expanded[_ngcontent-%COMP%]{box-shadow:0 4px 12px #00000014}.credential-info-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{contain:layout style paint}.credential-link[_ngcontent-%COMP%]{position:relative;padding:4px 0;border-radius:6px;transition:background .2s}.credential-link[_ngcontent-%COMP%]:hover{background:#0000000d}.credential-link[_ngcontent-%COMP%]:after{position:absolute;bottom:100%;left:50%;transform:translate(-50%);margin-bottom:8px;padding:8px 12px;background:#1f2937;color:#fff;font-size:.8rem;font-weight:500;border-radius:6px;white-space:nowrap;opacity:0;visibility:hidden;transition:opacity .2s,visibility .2s;z-index:10;pointer-events:none;box-shadow:0 4px 12px #0000004d}.credential-link[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:100%;left:50%;transform:translate(-50%);margin-bottom:2px;border:6px solid transparent;border-top-color:#1f2937;opacity:0;visibility:hidden;transition:opacity .2s,visibility .2s;z-index:10}.credential-link[_ngcontent-%COMP%]:hover:after, .credential-link[_ngcontent-%COMP%]:hover:before{opacity:1;visibility:visible}.allow-tooltip[_ngcontent-%COMP%]{overflow:visible!important;position:relative}'],data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var pD=_i(Ki());var zj=[],kfe=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,e=0;t<n.length;t++)(t%2?kfe:zj).push(e=e+n[t])})();function Ftt(n){if(n<768)return!1;for(let t=0,e=zj.length;;){let i=t+e>>1;if(n<zj[i])e=i;else if(n>=kfe[i])t=i+1;else return!0;if(t==e)return!1}}function Sfe(n){return n>=127462&&n<=127487}var Cfe=8205;function Mfe(n,t,e=!0,i=!0){return(e?Tfe:Ptt)(n,t,i)}function Tfe(n,t,e){if(t==n.length)return t;t&&Efe(n.charCodeAt(t))&&Afe(n.charCodeAt(t-1))&&t--;let i=Wj(n,t);for(t+=xfe(i);t<n.length;){let r=Wj(n,t);if(i==Cfe||r==Cfe||e&&Ftt(r))t+=xfe(r),i=r;else if(Sfe(r)){let o=0,s=t-2;for(;s>=0&&Sfe(Wj(n,s));)o++,s-=2;if(o%2==0)break;t+=2}else break}return t}function Ptt(n,t,e){for(;t>0;){let i=Tfe(n,t-2,e);if(i<t)return i;t--}return 0}function Wj(n,t){let e=n.charCodeAt(t);if(!Afe(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return Efe(i)?(e-55296<<10)+(i-56320)+65536:e}function Efe(n){return n>=56320&&n<57344}function Afe(n){return n>=55296&&n<56320}function xfe(n){return n<65536?1:2}var cr=class n{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,i){[t,e]=Sv(this,t,e);let r=[];return this.decompose(0,t,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(e,this.length,r,1),_v.from(r,this.length-(e-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=Sv(this,t,e);let i=[];return this.decompose(t,e,i,0),_v.from(i,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),r=new H1(this),o=new H1(t);for(let s=e,a=e;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(t=1){return new H1(this,t)}iterRange(t,e=this.length){return new nA(this,t,e)}iterLines(t,e){let i;if(t==null)i=this.iter();else{e==null&&(e=this.lines+1);let r=this.line(t).from;i=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new iA(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?n.empty:t.length<=32?new Ql(t):_v.from(Ql.split(t,[]))}},Ql=class n extends cr{constructor(t,e=Ltt(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((e?i:a)>=t)return new Kj(r,a,i,s);r=a+1,i++}}decompose(t,e,i,r){let o=t<=0&&e>=this.length?this:new n(Dfe(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(r&1){let s=i.pop(),a=tA(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new n(a,s.length+o.length));else{let l=a.length>>1;i.push(new n(a.slice(0,l)),new n(a.slice(l)))}}else i.push(o)}replace(t,e,i){if(!(i instanceof n))return super.replace(t,e,i);[t,e]=Sv(this,t,e);let r=tA(this.text,tA(i.text,Dfe(this.text,0,t)),e),o=this.length+i.length-(e-t);return r.length<=32?new n(r,o):_v.from(n.split(r,[]),o)}sliceString(t,e=this.length,i=`
`){[t,e]=Sv(this,t,e);let r="";for(let o=0,s=0;o<=e&&s<this.text.length;s++){let a=this.text[s],l=o+a.length;o>t&&s&&(r+=i),t<l&&e>o&&(r+=a.slice(Math.max(0,t-o),e-o)),o=l+1}return r}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let i=[],r=-1;for(let o of t)i.push(o),r+=o.length+1,i.length==32&&(e.push(new n(i,r)),i=[],r=-1);return r>-1&&e.push(new n(i,r)),e}},_v=class n extends cr{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,e,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,l=i+s.lines-1;if((e?l:a)>=t)return s.lineInner(t,e,i,r);r=a+1,i=l+1}}decompose(t,e,i,r){for(let o=0,s=0;s<=e&&o<this.children.length;o++){let a=this.children[o],l=s+a.length;if(t<=l&&e>=s){let c=r&((s<=t?1:0)|(l>=e?2:0));s>=t&&l<=e&&!c?i.push(a):a.decompose(t-s,e-s,i,c)}s=l+1}}replace(t,e,i){if([t,e]=Sv(this,t,e),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(t>=o&&e<=a){let l=s.replace(t-o,e-o,i),c=this.lines-s.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let d=this.children.slice();return d[r]=l,new n(d,this.length-(e-t)+i.length)}return super.replace(o,a,l)}o=a+1}return super.replace(t,e,i)}sliceString(t,e=this.length,i=`
`){[t,e]=Sv(this,t,e);let r="";for(let o=0,s=0;o<this.children.length&&s<=e;o++){let a=this.children[o],l=s+a.length;s>t&&o&&(r+=i),t<l&&e>s&&(r+=a.sliceString(t-s,e-s,i)),s=l+1}return r}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof n))return 0;let i=0,[r,o,s,a]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=e,o+=e){if(r==s||o==a)return i;let l=this.children[r],c=t.children[o];if(l!=c)return i+l.scanIdentical(c,e);i+=l.length+1}}static from(t,e=t.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of t)i+=f.lines;if(i<32){let f=[];for(let p of t)p.flatten(f);return new Ql(f,e)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],l=0,c=-1,d=[];function u(f){let p;if(f.lines>o&&f instanceof n)for(let y of f.children)u(y);else f.lines>s&&(l>s||!l)?(h(),a.push(f)):f instanceof Ql&&l&&(p=d[d.length-1])instanceof Ql&&f.lines+p.lines<=32?(l+=f.lines,c+=f.length+1,d[d.length-1]=new Ql(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,c+=f.length+1,d.push(f))}function h(){l!=0&&(a.push(d.length==1?d[0]:n.from(d,c)),c=-1,l=d.length=0)}for(let f of t)u(f);return h(),a.length==1?a[0]:new n(a,e)}};cr.empty=new Ql([""],0);function Ltt(n){let t=-1;for(let e of n)t+=e.length+1;return t}function tA(n,t,e=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],l=r+a.length;l>=e&&(l>i&&(a=a.slice(0,i-r)),r<e&&(a=a.slice(e-r)),s?(t[t.length-1]+=a,s=!1):t.push(a)),r=l+1}return t}function Dfe(n,t,e){return tA(n,[""],t,e)}var H1=class{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof Ql?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof Ql?r.text.length:r.children.length;if(s==(e>0?a:0)){if(i==0)return this.done=!0,this.value="",this;e>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(e>0?0:1)){if(this.offsets[i]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(r instanceof Ql){let l=r.text[s+(e<0?-1:0)];if(this.offsets[i]+=e,l.length>Math.max(0,t))return this.value=t==0?l:e>0?l.slice(t):l.slice(0,l.length-t),this;t-=l.length}else{let l=r.children[s+(e<0?-1:0)];t>l.length?(t-=l.length,this.offsets[i]+=e):(e<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(e>0?1:(l instanceof Ql?l.text.length:l.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}},nA=class{constructor(t,e,i){this.value="",this.done=!1,this.cursor=new H1(t,e>i?-1:1),this.pos=e>i?t.length:0,this.from=Math.min(e,i),this.to=Math.max(e,i)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let i=e<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*e,this.value=r.length<=i?r:e<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},iA=class{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:i,value:r}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(cr.prototype[Symbol.iterator]=function(){return this.iter()},H1.prototype[Symbol.iterator]=nA.prototype[Symbol.iterator]=iA.prototype[Symbol.iterator]=function(){return this});var Kj=class{constructor(t,e,i,r){this.from=t,this.to=e,this.number=i,this.text=r}get length(){return this.to-this.from}};function Sv(n,t,e){return t=Math.max(0,Math.min(n.length,t)),[t,Math.max(t,Math.min(n.length,e))]}function vs(n,t,e=!0,i=!0){return Mfe(n,t,e,i)}function Rtt(n){return n>=56320&&n<57344}function Ott(n){return n>=55296&&n<56320}function Nfe(n,t){let e=n.charCodeAt(t);if(!Ott(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return Rtt(i)?(e-55296<<10)+(i-56320)+65536:e}function Bfe(n){return n<65536?1:2}var Gj=/\r\n?|\n/,tl=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(tl||(tl={})),m0=class n{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e+1];t+=i<0?this.sections[e]:i}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,i=0,r=0;e<this.sections.length;){let o=this.sections[e++],s=this.sections[e++];s<0?(t(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(t,e=!1){Xj(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let i=this.sections[e++],r=this.sections[e++];r<0?t.push(i,r):t.push(r,i)}return new n(t)}composeDesc(t){return this.empty?t:t.empty?this:Vfe(this,t)}mapDesc(t,e=!1){return t.empty?this:Yj(this,t,e)}mapPos(t,e=-1,i=tl.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++],c=r+a;if(l<0){if(c>t)return o+(t-r);o+=a}else{if(i!=tl.Simple&&c>=t&&(i==tl.TrackDel&&r<t&&c>t||i==tl.TrackBefore&&r<t||i==tl.TrackAfter&&c>t))return null;if(c>t||c==t&&e<0&&!a)return t==r||e<0?o:o+l;o+=l}r=c}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return o}touchesRange(t,e=t){for(let i=0,r=0;i<this.sections.length&&r<=e;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=e&&a>=t)return r<t&&a>e?"cover":!0;r=a}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let i=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+i+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new n(t)}static create(t){return new n(t)}},Al=class n extends m0{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Xj(this,(e,i,r,o,s)=>t=t.replace(r,r+(i-e),s),!1),t}mapDesc(t,e=!1){return Yj(this,t,e,!0)}invert(t){let e=this.sections.slice(),i=[];for(let r=0,o=0;r<e.length;r+=2){let s=e[r],a=e[r+1];if(a>=0){e[r]=a,e[r+1]=s;let l=r>>1;for(;i.length<l;)i.push(cr.empty);i.push(s?t.slice(o,o+s):cr.empty)}o+=s}return new n(e,i)}compose(t){return this.empty?t:t.empty?this:Vfe(this,t,!0)}map(t,e=!1){return t.empty?this:Yj(this,t,e,!0)}iterChanges(t,e=!1){Xj(this,t,e)}get desc(){return m0.create(this.sections)}filter(t){let e=[],i=[],r=[],o=new W1(this);e:for(let s=0,a=0;;){let l=s==t.length?1e9:t[s++];for(;a<l||a==l&&o.len==0;){if(o.done)break e;let d=Math.min(o.len,l-a);Sa(r,d,-1);let u=o.ins==-1?-1:o.off==0?o.ins:0;Sa(e,d,u),u>0&&p0(i,e,o.text),o.forward(d),a+=d}let c=t[s++];for(;a<c;){if(o.done)break e;let d=Math.min(o.len,c-a);Sa(e,d,-1),Sa(r,d,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(d),a+=d}}return{changes:new n(e,i),filtered:m0.create(r)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e],r=this.sections[e+1];r<0?t.push(i):r==0?t.push([i]):t.push([i].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,i){let r=[],o=[],s=0,a=null;function l(d=!1){if(!d&&!r.length)return;s<e&&Sa(r,e-s,-1);let u=new n(r,o);a=a?a.compose(u.map(a)):u,r=[],o=[],s=0}function c(d){if(Array.isArray(d))for(let u of d)c(u);else if(d instanceof n){if(d.length!=e)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${e})`);l(),a=a?a.compose(d.map(a)):d}else{let{from:u,to:h=u,insert:f}=d;if(u>h||u<0||h>e)throw new RangeError(`Invalid change range ${u} to ${h} (in doc of length ${e})`);let p=f?typeof f=="string"?cr.of(f.split(i||Gj)):f:cr.empty,y=p.length;if(u==h&&y==0)return;u<s&&l(),u>s&&Sa(r,u-s,-1),Sa(r,h-u,y),p0(o,r,p),s=h}}return c(t),l(!a),a}static empty(t){return new n(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],i=[];for(let r=0;r<t.length;r++){let o=t[r];if(typeof o=="number")e.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)e.push(o[0],0);else{for(;i.length<r;)i.push(cr.empty);i[r]=cr.of(o.slice(1)),e.push(o[0],i[r].length)}}}return new n(e,i)}static createSet(t,e){return new n(t,e)}};function Sa(n,t,e,i=!1){if(t==0&&e<=0)return;let r=n.length-2;r>=0&&e<=0&&e==n[r+1]?n[r]+=t:r>=0&&t==0&&n[r]==0?n[r+1]+=e:i?(n[r]+=t,n[r+1]+=e):n.push(t,e)}function p0(n,t,e){if(e.length==0)return;let i=t.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(e);else{for(;n.length<i;)n.push(cr.empty);n.push(e)}}function Xj(n,t,e){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],l=n.sections[s++];if(l<0)r+=a,o+=a;else{let c=r,d=o,u=cr.empty;for(;c+=a,d+=l,l&&i&&(u=u.append(i[s-2>>1])),!(e||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],l=n.sections[s++];t(r,c,o,d,u),r=c,o=d}}}function Yj(n,t,e,i=!1){let r=[],o=i?[]:null,s=new W1(n),a=new W1(t);for(let l=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let c=Math.min(s.len,a.len);Sa(r,c,-1),s.forward(c),a.forward(c)}else if(a.ins>=0&&(s.ins<0||l==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!e))){let c=a.len;for(Sa(r,a.ins,-1);c;){let d=Math.min(s.len,c);s.ins>=0&&l<s.i&&s.len<=d&&(Sa(r,0,s.ins),o&&p0(o,r,s.text),l=s.i),s.forward(d),c-=d}a.next()}else if(s.ins>=0){let c=0,d=s.len;for(;d;)if(a.ins==-1){let u=Math.min(d,a.len);c+=u,d-=u,a.forward(u)}else if(a.ins==0&&a.len<d)d-=a.len,a.next();else break;Sa(r,c,l<s.i?s.ins:0),o&&l<s.i&&p0(o,r,s.text),l=s.i,s.forward(s.len-d)}else{if(s.done&&a.done)return o?Al.createSet(r,o):m0.create(r);throw new Error("Mismatched change set lengths")}}}function Vfe(n,t,e=!1){let i=[],r=e?[]:null,o=new W1(n),s=new W1(t);for(let a=!1;;){if(o.done&&s.done)return r?Al.createSet(i,r):m0.create(i);if(o.ins==0)Sa(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)Sa(i,0,s.ins,a),r&&p0(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,s.len),c=i.length;if(o.ins==-1){let d=s.ins==-1?-1:s.off?0:s.ins;Sa(i,l,d,a),r&&d&&p0(r,i,s.text)}else s.ins==-1?(Sa(i,o.off?0:o.len,l,a),r&&p0(r,i,o.textBit(l))):(Sa(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&p0(r,i,s.text));a=(o.ins>l||s.ins>=0&&s.len>l)&&(a||i.length>c),o.forward2(l),s.forward(l)}}}}var W1=class{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?cr.empty:t[e]}textBit(t){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length&&!t?cr.empty:e[i].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}},vv=class n{constructor(t,e,i){this.from=t,this.to=e,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let i,r;return this.empty?i=r=t.mapPos(this.from,e):(i=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new n(i,r,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return Dt.range(t,e);let i=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return Dt.range(this.anchor,i)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Dt.range(t.anchor,t.head)}static create(t,e,i){return new n(t,e,i)}},Dt=class n{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:n.create(this.ranges.map(i=>i.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new n([this.main],0)}addRange(t,e=!0){return n.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let i=this.ranges.slice();return i[e]=t,n.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new n(t.ranges.map(e=>vv.fromJSON(e)),t.main)}static single(t,e=t){return new n([n.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<t.length;r++){let o=t[r];if(o.empty?o.from<=i:o.from<i)return n.normalized(t.slice(),e);i=o.to}return new n(t,e)}static cursor(t,e=0,i,r){return vv.create(t,t,(e==0?0:e<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(t,e,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return e<t?vv.create(e,t,48|o):vv.create(t,e,(e>t?8:0)|o)}static normalized(t,e=0){let i=t[e];t.sort((r,o)=>r.from-o.from),e=t.indexOf(i);for(let r=1;r<t.length;r++){let o=t[r],s=t[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,l=Math.max(o.to,s.to);r<=e&&e--,t.splice(--r,2,o.anchor>o.head?n.range(l,a):n.range(a,l))}}return new n(t,e)}};function Ufe(n,t){for(let e of n.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}var oH=0,on=class n{constructor(t,e,i,r,o){this.combine=t,this.compareInput=e,this.compare=i,this.isStatic=r,this.id=oH++,this.default=t([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(t={}){return new n(t.combine||(e=>e),t.compareInput||((e,i)=>e===i),t.compare||(t.combine?(e,i)=>e===i:sH),!!t.static,t.enables)}of(t){return new bv([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new bv(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new bv(t,this,2,e)}from(t,e){return e||(e=i=>i),this.compute([t],i=>e(i.field(t)))}};function sH(n,t){return n==t||n.length==t.length&&n.every((e,i)=>e===t[i])}var bv=class{constructor(t,e,i,r){this.dependencies=t,this.facet=e,this.type=i,this.value=r,this.id=oH++}dynamicSlot(t){var e;let i=this.value,r=this.facet.compareInput,o=this.id,s=t[o]>>1,a=this.type==2,l=!1,c=!1,d=[];for(let u of this.dependencies)u=="doc"?l=!0:u=="selection"?c=!0:(((e=t[u.id])!==null&&e!==void 0?e:1)&1)==0&&d.push(t[u.id]);return{create(u){return u.values[s]=i(u),1},update(u,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||Zj(u,d)){let f=i(u);if(a?!Ife(f,u.values[s],r):!r(f,u.values[s]))return u.values[s]=f,1}return 0},reconfigure:(u,h)=>{let f,p=h.config.address[o];if(p!=null){let y=sA(h,p);if(this.dependencies.every(v=>v instanceof on?h.facet(v)===u.facet(v):v instanceof nl?h.field(v,!1)==u.field(v,!1):!0)||(a?Ife(f=i(u),y,r):r(f=i(u),y)))return u.values[s]=y,0}else f=i(u);return u.values[s]=f,1}}}};function Ife(n,t,e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!e(n[i],t[i]))return!1;return!0}function Zj(n,t){let e=!1;for(let i of t)kS(n,i)&1&&(e=!0);return e}function Ntt(n,t,e){let i=e.map(l=>n[l.id]),r=e.map(l=>l.type),o=i.filter(l=>!(l&1)),s=n[t.id]>>1;function a(l){let c=[];for(let d=0;d<i.length;d++){let u=sA(l,i[d]);if(r[d]==2)for(let h of u)c.push(h);else c.push(u)}return t.combine(c)}return{create(l){for(let c of i)kS(l,c);return l.values[s]=a(l),1},update(l,c){if(!Zj(l,o))return 0;let d=a(l);return t.compare(d,l.values[s])?0:(l.values[s]=d,1)},reconfigure(l,c){let d=Zj(l,i),u=c.config.facets[t.id],h=c.facet(t);if(u&&!d&&sH(e,u))return l.values[s]=h,0;let f=a(l);return t.compare(f,h)?(l.values[s]=h,0):(l.values[s]=f,1)}}}var Q8=on.define({static:!0}),nl=class n{constructor(t,e,i,r,o){this.id=t,this.createF=e,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(t){let e=new n(oH++,t.create,t.update,t.compare||((i,r)=>i===r),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(Q8).find(i=>i.field==this);return(e?.create||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:i=>(i.values[e]=this.create(i),1),update:(i,r)=>{let o=i.values[e],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[e]=s,1)},reconfigure:(i,r)=>{let o=i.facet(Q8),s=r.facet(Q8),a;return(a=o.find(l=>l.field==this))&&a!=s.find(l=>l.field==this)?(i.values[e]=a.create(i),1):r.config.address[this.id]!=null?(i.values[e]=r.field(this),0):(i.values[e]=this.create(i),1)}}}init(t){return[this,Q8.of({field:this,create:t})]}get extension(){return this}},U1={lowest:4,low:3,default:2,high:1,highest:0};function xS(n){return t=>new rA(t,n)}var AS={highest:xS(U1.highest),high:xS(U1.high),default:xS(U1.default),low:xS(U1.low),lowest:xS(U1.lowest)},rA=class{constructor(t,e){this.inner=t,this.prec=e}},Cv=class n{of(t){return new MS(this,t)}reconfigure(t){return n.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}},MS=class{constructor(t,e){this.compartment=t,this.inner=e}},oA=class n{constructor(t,e,i,r,o,s){for(this.base=t,this.compartments=e,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,i){let r=[],o=Object.create(null),s=new Map;for(let h of Btt(t,e,s))h instanceof nl?r.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of r)a[h.id]=c.length<<1,c.push(f=>h.slot(f));let d=i?.config.facets;for(let h in o){let f=o[h],p=f[0].facet,y=d&&d[h]||[];if(f.every(v=>v.type==0))if(a[p.id]=l.length<<1|1,sH(y,f))l.push(i.facet(p));else{let v=p.combine(f.map(b=>b.value));l.push(i&&p.compare(v,i.facet(p))?i.facet(p):v)}else{for(let v of f)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(b=>v.dynamicSlot(b)));a[p.id]=c.length<<1,c.push(v=>Ntt(v,p,f))}}let u=c.map(h=>h(a));return new n(t,s,u,a,l,o)}};function Btt(n,t,e){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let l=r.get(s);if(l!=null){if(l<=a)return;let c=i[l].indexOf(s);c>-1&&i[l].splice(c,1),s instanceof MS&&e.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let c of s)o(c,a);else if(s instanceof MS){if(e.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(s.compartment)||s.inner;e.set(s.compartment,c),o(c,a)}else if(s instanceof rA)o(s.inner,s.prec);else if(s instanceof nl)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof bv)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,U1.default);else{let c=s.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,a)}}return o(n,U1.default),i.reduce((s,a)=>s.concat(a))}function kS(n,t){if(t&1)return 2;let e=t>>1,i=n.status[e];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[e]=4;let r=n.computeSlot(n,n.config.dynamicSlots[e]);return n.status[e]=2|r}function sA(n,t){return t&1?n.config.staticValues[t>>1]:n.values[t>>1]}var Ffe=on.define(),qj=on.define({combine:n=>n.some(t=>t),static:!0}),jfe=on.define({combine:n=>n.length?n[0]:void 0,static:!0}),Hfe=on.define(),Wfe=on.define(),zfe=on.define(),Pfe=on.define({combine:n=>n.length?n[0]:!1}),Qu=class{constructor(t,e){this.type=t,this.value=e}static define(){return new Qj}},Qj=class{of(t){return new Qu(this,t)}},Jj=class{constructor(t){this.map=t}of(t){return new wo(this,t)}},wo=(()=>{class n{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new n(this.type,i)}is(e){return this.type==e}static define(e={}){return new Jj(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let r=[];for(let o of e){let s=o.map(i);s&&r.push(s)}return r}}return n.reconfigure=n.define(),n.appendConfig=n.define(),n})(),hf=(()=>{class n{constructor(e,i,r,o,s,a){this.startState=e,this.changes=i,this.selection=r,this.effects=o,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,r&&Ufe(r,i.newLength),s.some(l=>l.type==n.time)||(this.annotations=s.concat(n.time.of(Date.now())))}static create(e,i,r,o,s,a){return new n(e,i,r,o,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(n.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}return n.time=Qu.define(),n.userEvent=Qu.define(),n.addToHistory=Qu.define(),n.remote=Qu.define(),n})();function Vtt(n,t){let e=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==t.length||t[r]>=n[i]))o=n[i++],s=n[i++];else if(r<t.length)o=t[r++],s=t[r++];else return e;!e.length||e[e.length-1]<o?e.push(o,s):e[e.length-1]<s&&(e[e.length-1]=s)}}function qfe(n,t,e){var i;let r,o,s;return e?(r=t.changes,o=Al.empty(t.changes.length),s=n.changes.compose(t.changes)):(r=t.changes.map(n.changes),o=n.changes.mapDesc(t.changes,!0),s=n.changes.compose(r)),{changes:s,selection:t.selection?t.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:wo.mapEffects(n.effects,r).concat(wo.mapEffects(t.effects,o)),annotations:n.annotations.length?n.annotations.concat(t.annotations):t.annotations,scrollIntoView:n.scrollIntoView||t.scrollIntoView}}function eH(n,t,e){let i=t.selection,r=wv(t.annotations);return t.userEvent&&(r=r.concat(hf.userEvent.of(t.userEvent))),{changes:t.changes instanceof Al?t.changes:Al.of(t.changes||[],e,n.facet(jfe)),selection:i&&(i instanceof Dt?i:Dt.single(i.anchor,i.head)),effects:wv(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function $fe(n,t,e){let i=eH(n,t.length?t[0]:{},n.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let o=1;o<t.length;o++){t[o].filter===!1&&(e=!1);let s=!!t[o].sequential;i=qfe(i,eH(n,t[o],s?i.changes.newLength:n.doc.length),s)}let r=hf.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return jtt(e?Utt(r):r)}function Utt(n){let t=n.startState,e=!0;for(let r of t.facet(Hfe)){let o=r(n);if(o===!1){e=!1;break}Array.isArray(o)&&(e=e===!0?o:Vtt(e,o))}if(e!==!0){let r,o;if(e===!1)o=n.changes.invertedDesc,r=Al.empty(t.doc.length);else{let s=n.changes.filter(e);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=hf.create(t,r,n.selection&&n.selection.map(o),wo.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=t.facet(Wfe);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof hf?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof hf?n=o[0]:n=$fe(t,wv(o),!1)}return n}function jtt(n){let t=n.startState,e=t.facet(zfe),i=n;for(let r=e.length-1;r>=0;r--){let o=e[r](n);o&&Object.keys(o).length&&(i=qfe(i,eH(t,o,n.changes.newLength),!0))}return i==n?n:hf.create(t,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}var Htt=[];function wv(n){return n==null?Htt:Array.isArray(n)?n:[n]}var Pd=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Pd||(Pd={})),Wtt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,tH;try{tH=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ztt(n){if(tH)return tH.test(n);for(let t=0;t<n.length;t++){let e=n[t];if(/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Wtt.test(e)))return!0}return!1}function qtt(n){return t=>{if(!/\S/.test(t))return Pd.Space;if(ztt(t))return Pd.Word;for(let e=0;e<n.length;e++)if(t.indexOf(n[e])>-1)return Pd.Word;return Pd.Other}}var Jl=(()=>{class n{constructor(e,i,r,o,s,a){this.config=e,this.doc=i,this.selection=r,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)kS(this,l<<1);this.computeSlot=null}field(e,i=!0){let r=this.config.address[e.id];if(r==null){if(i)throw new RangeError("Field is not present in this state");return}return kS(this,r),sA(this,r)}update(...e){return $fe(this,e,!0)}applyTransaction(e){let i=this.config,{base:r,compartments:o}=i;for(let l of e.effects)l.is(Cv.reconfigure)?(i&&(o=new Map,i.compartments.forEach((c,d)=>o.set(d,c)),i=null),o.set(l.value.compartment,l.value.extension)):l.is(wo.reconfigure)?(i=null,r=l.value):l.is(wo.appendConfig)&&(i=null,r=wv(r).concat(l.value));let s;i?s=e.startState.values.slice():(i=oA.resolve(r,o,this),s=new n(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(c,d)=>d.reconfigure(c,this),null).values);let a=e.startState.facet(qj)?e.newSelection:e.newSelection.asSingle();new n(i,e.newDoc,a,s,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:Dt.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,r=e(i.ranges[0]),o=this.changes(r.changes),s=[r.range],a=wv(r.effects);for(let l=1;l<i.ranges.length;l++){let c=e(i.ranges[l]),d=this.changes(c.changes),u=d.map(o);for(let f=0;f<l;f++)s[f]=s[f].map(u);let h=o.mapDesc(d,!0);s.push(c.range.map(h)),o=o.compose(u),a=wo.mapEffects(a,u).concat(wo.mapEffects(wv(c.effects),h))}return{changes:o,selection:Dt.create(s,i.mainIndex),effects:a}}changes(e=[]){return e instanceof Al?e:Al.of(e,this.doc.length,this.facet(n.lineSeparator))}toText(e){return cr.of(e.split(this.facet(n.lineSeparator)||Gj))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(kS(this,i),sA(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let o=e[r];o instanceof nl&&this.config.address[o.id]!=null&&(i[r]=o.spec.toJSON(this.field(e[r]),this))}return i}static fromJSON(e,i={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let a=r[s],l=e[s];o.push(a.init(c=>a.spec.fromJSON(l,c)))}}return n.create({doc:e.doc,selection:Dt.fromJSON(e.selection),extensions:i.extensions?o.concat([i.extensions]):o})}static create(e={}){let i=oA.resolve(e.extensions||[],new Map),r=e.doc instanceof cr?e.doc:cr.of((e.doc||"").split(i.staticFacet(n.lineSeparator)||Gj)),o=e.selection?e.selection instanceof Dt?e.selection:Dt.single(e.selection.anchor,e.selection.head):Dt.single(0);return Ufe(o,r.length),i.staticFacet(qj)||(o=o.asSingle()),new n(i,r,o,i.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||`
`}get readOnly(){return this.facet(Pfe)}phrase(e,...i){for(let r of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(r,o)=>{if(o=="$")return"$";let s=+(o||1);return!s||s>i.length?r:i[s-1]})),e}languageDataAt(e,i,r=-1){let o=[];for(let s of this.facet(Ffe))for(let a of s(this,i,r))Object.prototype.hasOwnProperty.call(a,e)&&o.push(a[e]);return o}charCategorizer(e){return qtt(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:r,length:o}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-r,l=e-r;for(;a>0;){let c=vs(i,a,!1);if(s(i.slice(c,a))!=Pd.Word)break;a=c}for(;l<o;){let c=vs(i,l);if(s(i.slice(l,c))!=Pd.Word)break;l=c}return a==l?null:Dt.range(a+r,l+r)}}return n.allowMultipleSelections=qj,n.tabSize=on.define({combine:t=>t.length?t[0]:4}),n.lineSeparator=jfe,n.readOnly=Pfe,n.phrases=on.define({compare(t,e){let i=Object.keys(t),r=Object.keys(e);return i.length==r.length&&i.every(o=>t[o]==e[o])}}),n.languageData=Ffe,n.changeFilter=Hfe,n.transactionFilter=Wfe,n.transactionExtender=zfe,n})();Cv.reconfigure=wo.define();function z1(n,t,e={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(e,o))i[o]=e[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in t)i[r]===void 0&&(i[r]=t[r]);return i}var Ju=class{eq(t){return this==t}range(t,e=t){return TS.create(t,e,this)}};Ju.prototype.startSide=Ju.prototype.endSide=0;Ju.prototype.point=!1;Ju.prototype.mapMode=tl.TrackDel;var TS=class n{constructor(t,e,i){this.from=t,this.to=e,this.value=i}static create(t,e,i){return new n(t,e,i)}};function nH(n,t){return n.from-t.from||n.value.startSide-t.value.startSide}var iH=class n{constructor(t,e,i,r){this.from=t,this.to=e,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let l=s+a>>1,c=o[l]-t||(i?this.value[l].endSide:this.value[l].startSide)-e;if(l==s)return c>=0?s:a;c>=0?a=l:s=l+1}}between(t,e,i,r){for(let o=this.findIndex(e,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+t,this.to[o]+t,this.value[o])===!1)return!1}map(t,e){let i=[],r=[],o=[],s=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],d=this.from[l]+t,u=this.to[l]+t,h,f;if(d==u){let p=e.mapPos(d,c.startSide,c.mapMode);if(p==null||(h=f=p,c.startSide!=c.endSide&&(f=e.mapPos(d,c.endSide),f<h)))continue}else if(h=e.mapPos(d,c.startSide),f=e.mapPos(u,c.endSide),h>f||h==f&&c.startSide>0&&c.endSide<=0)continue;(f-h||c.endSide-c.startSide)<0||(s<0&&(s=h),c.point&&(a=Math.max(a,f-h)),i.push(c),r.push(h-s),o.push(f-s))}return{mapped:i.length?new n(r,o,i,a):null,pos:s}}},Zr=(()=>{class n{constructor(e,i,r,o){this.chunkPos=e,this.chunk=i,this.nextLayer=r,this.maxPoint=o}static create(e,i,r,o){return new n(e,i,r,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:r=!1,filterFrom:o=0,filterTo:s=this.length}=e,a=e.filter;if(i.length==0&&!a)return this;if(r&&(i=i.slice().sort(nH)),this.isEmpty)return i.length?n.of(i):this;let l=new aA(this,null,-1).goto(0),c=0,d=[],u=new ff;for(;l.value||c<i.length;)if(c<i.length&&(l.from-i[c].from||l.startSide-i[c].value.startSide)>=0){let h=i[c++];u.addInner(h.from,h.to,h.value)||d.push(h)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(c==i.length||this.chunkEnd(l.chunkIndex)<i[c].from)&&(!a||o>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||o>l.to||s<l.from||a(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||d.push(TS.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!d.length?n.empty:this.nextLayer.update({add:d,filter:a,filterFrom:o,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],r=[],o=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],c=this.chunk[a],d=e.touchesRange(l,l+c.length);if(d===!1)o=Math.max(o,c.maxPoint),i.push(c),r.push(e.mapPos(l));else if(d===!0){let{mapped:u,pos:h}=c.map(l,e);u&&(o=Math.max(o,u.maxPoint),i.push(u),r.push(h))}}let s=this.nextLayer.map(e);return i.length==0?s:new n(r,i,s||n.empty,o)}between(e,i,r){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let s=this.chunkPos[o],a=this.chunk[o];if(i>=s&&e<=s+a.length&&a.between(s,e-s,i-s,r)===!1)return}this.nextLayer.between(e,i,r)}}iter(e=0){return ES.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return ES.from(e).goto(i)}static compare(e,i,r,o,s=-1){let a=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=i.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),c=Lfe(a,l,r),d=new j1(a,c,s),u=new j1(l,c,s);r.iterGaps((h,f,p)=>Rfe(d,h,u,f,p,o)),r.empty&&r.length==0&&Rfe(d,0,u,0,0,o)}static eq(e,i,r=0,o){o==null&&(o=999999999);let s=e.filter(u=>!u.isEmpty&&i.indexOf(u)<0),a=i.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let l=Lfe(s,a),c=new j1(s,l,0).goto(r),d=new j1(a,l,0).goto(r);for(;;){if(c.to!=d.to||!rH(c.active,d.active)||c.point&&(!d.point||!c.point.eq(d.point)))return!1;if(c.to>o)return!0;c.next(),d.next()}}static spans(e,i,r,o,s=-1){let a=new j1(e,null,s).goto(i),l=i,c=a.openStart;for(;;){let d=Math.min(a.to,r);if(a.point){let u=a.activeForPoint(a.to),h=a.pointFrom<i?u.length+1:a.point.startSide<0?u.length:Math.min(u.length,c);o.point(l,d,a.point,u,h,a.pointRank),c=Math.min(a.openEnd(d),u.length)}else d>l&&(o.span(l,d,a.active,c),c=a.openEnd(d));if(a.to>r)return c+(a.point&&a.to>r?1:0);l=a.to,a.next()}}static of(e,i=!1){let r=new ff;for(let o of e instanceof TS?[e]:i?$tt(e):e)r.add(o.from,o.to,o.value);return r.finish()}static join(e){if(!e.length)return n.empty;let i=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let o=e[r];o!=n.empty;o=o.nextLayer)i=new n(o.chunkPos,o.chunk,i,Math.max(o.maxPoint,i.maxPoint));return i}}return n.empty=new n([],[],null,-1),n})();function $tt(n){if(n.length>1)for(let t=n[0],e=1;e<n.length;e++){let i=n[e];if(nH(t,i)>0)return n.slice().sort(nH);t=i}return n}Zr.empty.nextLayer=Zr.empty;var ff=class n{finishChunk(t){this.chunks.push(new iH(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new n)).add(t,e,i)}addInner(t,e,i){let r=t-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(Zr.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=Zr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}};function Lfe(n,t,e){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of t)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(e?e.mapPos(a):a)==o.chunkPos[s]&&!e?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}var aA=class{constructor(t,e,i,r=0){this.layer=t,this.skip=e,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}},ES=class n{constructor(t){this.heap=t}static from(t,e=null,i=-1){let r=[];for(let o=0;o<t.length;o++)for(let s=t[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new aA(s,e,i,o));return r.length==1?r[0]:new n(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)$j(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)$j(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),$j(this.heap,0)}}};function $j(n,t){for(let e=n[t];;){let i=(t<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),e.compare(r)<0)break;n[i]=e,n[t]=r,t=i}}var j1=class{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ES.from(t,e,i)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){J8(this.active,t),J8(this.activeTo,t),J8(this.activeRank,t),this.minActive=Ofe(this.active,this.activeTo)}addActive(t){let e=0,{value:i,to:r,rank:o}=this.cursor;for(;e<this.activeRank.length&&(o-this.activeRank[e]||r-this.activeTo[e])>0;)e++;eA(this.active,e,i),eA(this.activeTo,e,r),eA(this.activeRank,e,o),t&&eA(t,e,this.cursor.from),this.minActive=Ofe(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>t){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&J8(i,r)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<t;r--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&e.push(this.active[i]);return e.reverse()}openEnd(t){let e=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)e++;return e}};function Rfe(n,t,e,i,r,o){n.goto(t),e.goto(i);let s=i+r,a=i,l=i-t;for(;;){let c=n.to+l-e.to,d=c||n.endSide-e.endSide,u=d<0?n.to+l:e.to,h=Math.min(u,s);if(n.point||e.point?n.point&&e.point&&(n.point==e.point||n.point.eq(e.point))&&rH(n.activeForPoint(n.to),e.activeForPoint(e.to))||o.comparePoint(a,h,n.point,e.point):h>a&&!rH(n.active,e.active)&&o.compareRange(a,h,n.active,e.active),u>s)break;(c||n.openEnd!=e.openEnd)&&o.boundChange&&o.boundChange(u),a=u,d<=0&&n.next(),d>=0&&e.next()}}function rH(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!=t[e]&&!n[e].eq(t[e]))return!1;return!0}function J8(n,t){for(let e=t,i=n.length-1;e<i;e++)n[e]=n[e+1];n.pop()}function eA(n,t,e){for(let i=n.length-1;i>=t;i--)n[i+1]=n[i];n[t]=e}function Ofe(n,t){let e=-1,i=1e9;for(let r=0;r<t.length;r++)(t[r]-i||n[r].endSide-n[e].endSide)<0&&(e=r,i=t[r]);return e}function q1(n,t,e=n.length){let i=0;for(let r=0;r<e&&r<n.length;)n.charCodeAt(r)==9?(i+=t-i%t,r++):(i++,r=vs(n,r));return i}function Kfe(n,t,e,i){for(let r=0,o=0;;){if(o>=t)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?e-o%e:1,r=vs(n,r)}return i===!0?-1:n.length}var Gfe=typeof Symbol>"u"?"__\u037C":Symbol.for("\u037C"),aH=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Xfe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},Vc=class{constructor(t,e){this.rules=[];let{finish:i}=e||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,l,c){let d=[],u=/^@(\w+)\b/.exec(s[0]),h=u&&u[1]=="keyframes";if(u&&a==null)return l.push(s[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))o(f.split(/,\s*/).map(y=>s.map(v=>y.replace(/&/,v))).reduce((y,v)=>y.concat(v)),p,l);else if(p&&typeof p=="object"){if(!u)throw new RangeError("The value of a property ("+f+") should be a primitive value.");o(r(f),p,d,h)}else p!=null&&d.push(f.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+p+";")}(d.length||h)&&l.push((i&&!u&&!c?s.map(i):s).join(", ")+" {"+d.join(" ")+"}")}for(let s in t)o(r(s),t[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Xfe[Gfe]||1;return Xfe[Gfe]=t+1,"\u037C"+t.toString(36)}static mount(t,e,i){let r=t[aH],o=i&&i.nonce;r?o&&r.setNonce(o):r=new lH(t,o),r.mount(Array.isArray(e)?e:[e],t)}},Yfe=new Map,lH=class{constructor(t,e){let i=t.ownerDocument||t,r=i.defaultView;if(!t.head&&t.adoptedStyleSheets&&r.CSSStyleSheet){let o=Yfe.get(i);if(o)return t[aH]=o;this.sheet=new r.CSSStyleSheet,Yfe.set(i,this)}else this.styleTag=i.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[aH]=this}mount(t,e){let i=this.sheet,r=0,o=0;for(let s=0;s<t.length;s++){let a=t[s],l=this.modules.indexOf(a);if(l<o&&l>-1&&(this.modules.splice(l,1),o--,l=-1),l==-1){if(this.modules.splice(o++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;o<l;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let s="";for(let l=0;l<this.modules.length;l++)s+=this.modules[l].getRules()+`
`;this.styleTag.textContent=s;let a=e.head||e;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}};var pf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},xv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ktt=typeof navigator<"u"&&/Mac/.test(navigator.platform),Gtt=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(os=0;os<10;os++)pf[48+os]=pf[96+os]=String(os);var os;for(os=1;os<=24;os++)pf[os+111]="F"+os;var os;for(os=65;os<=90;os++)pf[os]=String.fromCharCode(os+32),xv[os]=String.fromCharCode(os);var os;for(lA in pf)xv.hasOwnProperty(lA)||(xv[lA]=pf[lA]);var lA;function Zfe(n){var t=Ktt&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Gtt&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?xv:pf)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function ec(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}t++}for(;t<arguments.length;t++)Qfe(n,arguments[t]);return n}function Qfe(n,t){if(typeof t=="string")n.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)n.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)Qfe(n,t[e]);else throw new RangeError("Unsupported child node: "+t)}var il=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},_H=typeof document<"u"?document:{documentElement:{style:{}}},bH=/Edge\/(\d+)/.exec(il.userAgent),Rpe=/MSIE \d/.test(il.userAgent),wH=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(il.userAgent),VA=!!(Rpe||wH||bH),Jfe=!VA&&/gecko\/(\d+)/i.test(il.userAgent),cH=!VA&&/Chrome\/(\d+)/.exec(il.userAgent),epe="webkitFontSmoothing"in _H.documentElement.style,SH=!VA&&/Apple Computer/.test(il.vendor),tpe=SH&&(/Mobile\/\w+/.test(il.userAgent)||il.maxTouchPoints>2),Xt={mac:tpe||/Mac/.test(il.platform),windows:/Win/.test(il.platform),linux:/Linux|X11/.test(il.platform),ie:VA,ie_version:Rpe?_H.documentMode||6:wH?+wH[1]:bH?+bH[1]:0,gecko:Jfe,gecko_version:Jfe?+(/Firefox\/(\d+)/.exec(il.userAgent)||[0,0])[1]:0,chrome:!!cH,chrome_version:cH?+cH[1]:0,ios:tpe,android:/Android\b/.test(il.userAgent),webkit:epe,webkit_version:epe?+(/\bAppleWebKit\/(\d+)/.exec(il.userAgent)||[0,0])[1]:0,safari:SH,safari_version:SH?+(/\bVersion\/(\d+(\.\d+)?)/.exec(il.userAgent)||[0,0])[1]:0,tabSize:_H.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function oW(n,t){for(let e in n)e=="class"&&t.class?t.class+=" "+n.class:e=="style"&&t.style?t.style+=";"+n.style:t[e]=n[e];return t}var wA=Object.create(null);function sW(n,t,e){if(n==t)return!0;n||(n=wA),t||(t=wA);let i=Object.keys(n),r=Object.keys(t);if(i.length-(e&&i.indexOf(e)>-1?1:0)!=r.length-(e&&r.indexOf(e)>-1?1:0))return!1;for(let o of i)if(o!=e&&(r.indexOf(o)==-1||n[o]!==t[o]))return!1;return!0}function Xtt(n,t){for(let e=n.attributes.length-1;e>=0;e--){let i=n.attributes[e].name;t[i]==null&&n.removeAttribute(i)}for(let e in t){let i=t[e];e=="style"?n.style.cssText=i:n.getAttribute(e)!=i&&n.setAttribute(e,i)}}function npe(n,t,e){let i=!1;if(t)for(let r in t)e&&r in e||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(e)for(let r in e)t&&t[r]==e[r]||(i=!0,r=="style"?n.style.cssText=e[r]:n.setAttribute(r,e[r]));return i}function Ytt(n){let t=Object.create(null);for(let e=0;e<n.attributes.length;e++){let i=n.attributes[e];t[i.name]=i.value}return t}var gf=class{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}},Fl=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Fl||(Fl={})),Vr=class extends Ju{constructor(t,e,i,r){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(t){return new jS(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),i=!!t.block;return e+=i&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new G1(t,e,e,i,t.widget||null,!1)}static replace(t){let e=!!t.block,i,r;if(t.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=Ope(t,e);i=(o?e?-3e8:-1:5e8)-1,r=(s?e?2e8:1:-6e8)+1}return new G1(t,i,r,e,t.widget||null,!0)}static line(t){return new HS(t)}static set(t,e=!1){return Zr.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};Vr.none=Zr.empty;var jS=class n extends Vr{constructor(t){let{start:e,end:i}=Ope(t);super(e?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.attrs=t.class&&t.attributes?oW(t.attributes,{class:t.class}):t.class?{class:t.class}:t.attributes||wA}eq(t){return this==t||t instanceof n&&this.tagName==t.tagName&&sW(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}};jS.prototype.point=!1;var HS=class n extends Vr{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof n&&this.spec.class==t.spec.class&&sW(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}};HS.prototype.mapMode=tl.TrackBefore;HS.prototype.point=!0;var G1=class n extends Vr{constructor(t,e,i,r,o,s){super(e,i,o,t),this.block=r,this.isReplace=s,this.mapMode=r?e<=0?tl.TrackBefore:tl.TrackAfter:tl.TrackDel}get type(){return this.startSide!=this.endSide?Fl.WidgetRange:this.startSide<=0?Fl.WidgetBefore:Fl.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof n&&Ztt(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}};G1.prototype.point=!0;function Ope(n,t=!1){let{inclusiveStart:e,inclusiveEnd:i}=n;return e==null&&(e=n.inclusive),i==null&&(i=n.inclusive),{start:e??t,end:i??t}}function Ztt(n,t){return n==t||!!(n&&t&&n.compare(t))}function Av(n,t,e,i=0){let r=e.length-1;r>=0&&e[r]+i>=n?e[r]=Math.max(e[r],t):e.push(n,t)}var SA=class n extends Ju{constructor(t,e){super(),this.tagName=t,this.attributes=e}eq(t){return t==this||t instanceof n&&this.tagName==t.tagName&&sW(this.attributes,t.attributes)}static create(t){return new n(t.tagName,t.attributes||wA)}static set(t,e=!1){return Zr.of(t,e)}};SA.prototype.startSide=SA.prototype.endSide=-1;function WS(n){let t;return n.nodeType==11?t=n.getSelection?n:n.ownerDocument:t=n,t.getSelection()}function CH(n,t){return t?n==t||n.contains(t.nodeType!=1?t.parentNode:t):!1}function vA(n,t){if(!t.anchorNode)return!1;try{return CH(n,t.anchorNode)}catch{return!1}}function _A(n){return n.nodeType==3?zS(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function PS(n,t,e,i){return e?ipe(n,t,e,i,-1)||ipe(n,t,e,i,1):!1}function _0(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t}function CA(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function ipe(n,t,e,i,r){for(;;){if(n==e&&t==i)return!0;if(t==(r<0?0:yf(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;t=_0(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[t+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;t=r<0?yf(n):0}else return!1}}function yf(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function xA(n,t){let e=t?n.left:n.right;return{left:e,right:e,top:n.top,bottom:n.bottom}}function Qtt(n){let t=n.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Npe(n,t){let e=t.width/n.offsetWidth,i=t.height/n.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-n.offsetWidth)<1)&&(e=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-n.offsetHeight)<1)&&(i=1),{scaleX:e,scaleY:i}}function Jtt(n,t,e,i,r,o,s,a){let l=n.ownerDocument,c=l.defaultView||window;for(let d=n,u=!1;d&&!u;)if(d.nodeType==1){let h,f=d==l.body,p=1,y=1;if(f)h=Qtt(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(u=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let S=d.getBoundingClientRect();({scaleX:p,scaleY:y}=Npe(d,S)),h={left:S.left,right:S.left+d.clientWidth*p,top:S.top,bottom:S.top+d.clientHeight*y}}let v=0,b=0;if(r=="nearest")t.top<h.top?(b=t.top-(h.top+s),e>0&&t.bottom>h.bottom+b&&(b=t.bottom-h.bottom+s)):t.bottom>h.bottom&&(b=t.bottom-h.bottom+s,e<0&&t.top-b<h.top&&(b=t.top-(h.top+s)));else{let S=t.bottom-t.top,x=h.bottom-h.top;b=(r=="center"&&S<=x?t.top+S/2-x/2:r=="start"||r=="center"&&e<0?t.top-s:t.bottom-x+s)-h.top}if(i=="nearest"?t.left<h.left?(v=t.left-(h.left+o),e>0&&t.right>h.right+v&&(v=t.right-h.right+o)):t.right>h.right&&(v=t.right-h.right+o,e<0&&t.left<h.left+v&&(v=t.left-(h.left+o))):v=(i=="center"?t.left+(t.right-t.left)/2-(h.right-h.left)/2:i=="start"==a?t.left-o:t.right-(h.right-h.left)+o)-h.left,v||b)if(f)c.scrollBy(v,b);else{let S=0,x=0;if(b){let k=d.scrollTop;d.scrollTop+=b/y,x=(d.scrollTop-k)*y}if(v){let k=d.scrollLeft;d.scrollLeft+=v/p,S=(d.scrollLeft-k)*p}t={left:t.left-S,top:t.top-x,right:t.right-S,bottom:t.bottom-x},S&&Math.abs(S-v)<1&&(i="nearest"),x&&Math.abs(x-b)<1&&(r="nearest")}if(f)break;(t.top<h.top||t.bottom>h.bottom||t.left<h.left||t.right>h.right)&&(t={left:Math.max(t.left,h.left),right:Math.min(t.right,h.right),top:Math.max(t.top,h.top),bottom:Math.min(t.bottom,h.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function ent(n){let t=n.ownerDocument,e,i;for(let r=n.parentNode;r&&!(r==t.body||e&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:e,y:i}}var xH=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:i}=t;this.set(e,Math.min(t.anchorOffset,e?yf(e):0),i,Math.min(t.focusOffset,i?yf(i):0))}set(t,e,i,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=i,this.focusOffset=r}},$1=null;Xt.safari&&Xt.safari_version>=26&&($1=!1);function Bpe(n){if(n.setActive)return n.setActive();if($1)return n.focus($1);let t=[];for(let e=n;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(n.focus($1==null?{get preventScroll(){return $1={preventScroll:!0},!0}}:void 0),!$1){$1=!1;for(let e=0;e<t.length;){let i=t[e++],r=t[e++],o=t[e++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}var rpe;function zS(n,t,e=t){let i=rpe||(rpe=document.createRange());return i.setEnd(n,e),i.setStart(n,t),i}function Dv(n,t,e,i){let r={key:t,code:t,keyCode:e,which:e,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function tnt(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function nnt(n,t){let e=t.focusNode,i=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=i)return!1;for(i=Math.min(i,yf(e));;)if(i){if(e.nodeType!=1)return!1;let r=e.childNodes[i-1];r.contentEditable=="false"?i--:(e=r,i=yf(e))}else{if(e==n)return!0;i=_0(e),e=e.parentNode}}function Vpe(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Upe(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i>0)return{node:e,offset:i};if(e.nodeType==1&&i>0){if(e.contentEditable=="false")return null;e=e.childNodes[i-1],i=yf(e)}else if(e.parentNode&&!CA(e))i=_0(e),e=e.parentNode;else return null}}function jpe(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i<e.nodeValue.length)return{node:e,offset:i};if(e.nodeType==1&&i<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[i],i=0}else if(e.parentNode&&!CA(e))i=_0(e)+1,e=e.parentNode;else return null}}var th=class n{constructor(t,e,i=!0){this.node=t,this.offset=e,this.precise=i}static before(t,e){return new n(t.parentNode,_0(t),e)}static after(t,e){return new n(t.parentNode,_0(t)+1,e)}},go=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(go||(go={})),X1=go.LTR,aW=go.RTL;function Hpe(n){let t=[];for(let e=0;e<n.length;e++)t.push(1<<+n[e]);return t}var int=Hpe("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),rnt=Hpe("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),kH=Object.create(null),eh=[];for(let n of["()","[]","{}"]){let t=n.charCodeAt(0),e=n.charCodeAt(1);kH[t]=e,kH[e]=-t}function Wpe(n){return n<=247?int[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?rnt[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}var ont=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,Rd=class{get dir(){return this.level%2?aW:X1}constructor(t,e,i){this.from=t,this.to=e,this.level=i}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,i,r){let o=-1;for(let s=0;s<t.length;s++){let a=t[s];if(a.from<=e&&a.to>=e){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<e:a.to>e:t[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}};function zpe(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++){let i=n[e],r=t[e];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!zpe(i.inner,r.inner))return!1}return!0}var Qr=[];function snt(n,t,e,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:t,a=o<i.length?i[o].from:e,l=o?256:r;for(let c=s,d=l,u=l;c<a;c++){let h=Wpe(n.charCodeAt(c));h==512?h=d:h==8&&u==4&&(h=16),Qr[c]=h==4?2:h,h&7&&(u=h),d=h}for(let c=s,d=l,u=l;c<a;c++){let h=Qr[c];if(h==128)c<a-1&&d==Qr[c+1]&&d&24?h=Qr[c]=d:Qr[c]=256;else if(h==64){let f=c+1;for(;f<a&&Qr[f]==64;)f++;let p=c&&d==8||f<e&&Qr[f]==8?u==1?1:8:256;for(let y=c;y<f;y++)Qr[y]=p;c=f-1}else h==8&&u==1&&(Qr[c]=1);d=h,h&7&&(u=h)}}}function ant(n,t,e,i,r){let o=r==1?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:t,d=s<i.length?i[s].from:e;for(let u=c,h,f,p;u<d;u++)if(f=kH[h=n.charCodeAt(u)])if(f<0){for(let y=a-3;y>=0;y-=3)if(eh[y+1]==-f){let v=eh[y+2],b=v&2?r:v&4?v&1?o:r:0;b&&(Qr[u]=Qr[eh[y]]=b),a=y;break}}else{if(eh.length==189)break;eh[a++]=u,eh[a++]=h,eh[a++]=l}else if((p=Qr[u])==2||p==1){let y=p==r;l=y?0:1;for(let v=a-3;v>=0;v-=3){let b=eh[v+2];if(b&2)break;if(y)eh[v+2]|=2;else{if(b&4)break;eh[v+2]|=4}}}}}function lnt(n,t,e,i){for(let r=0,o=i;r<=e.length;r++){let s=r?e[r-1].to:n,a=r<e.length?e[r].from:t;for(let l=s;l<a;){let c=Qr[l];if(c==256){let d=l+1;for(;;)if(d==a){if(r==e.length)break;d=e[r++].to,a=r<e.length?e[r].from:t}else if(Qr[d]==256)d++;else break;let u=o==1,h=(d<t?Qr[d]:i)==1,f=u==h?u?1:2:i;for(let p=d,y=r,v=y?e[y-1].to:n;p>l;)p==v&&(p=e[--y].from,v=y?e[y-1].to:n),Qr[--p]=f;l=d}else o=c,l++}}}function MH(n,t,e,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=t,c=0;l<e;){let d=!0,u=!1;if(c==o.length||l<o[c].from){let y=Qr[l];y!=a&&(d=!1,u=y==16)}let h=!d&&a==1?[]:null,f=d?i:i+1,p=l;e:for(;;)if(c<o.length&&p==o[c].from){if(u)break e;let y=o[c];if(!d)for(let v=y.to,b=c+1;;){if(v==e)break e;if(b<o.length&&o[b].from==v)v=o[b++].to;else{if(Qr[v]==a)break e;break}}if(c++,h)h.push(y);else{y.from>l&&s.push(new Rd(l,y.from,f));let v=y.direction==X1!=!(f%2);TH(n,v?i+1:i,r,y.inner,y.from,y.to,s),l=y.to}p=y.to}else{if(p==e||(d?Qr[p]!=a:Qr[p]==a))break;p++}h?MH(n,l,p,i+1,r,h,s):l<p&&s.push(new Rd(l,p,f)),l=p}else for(let l=e,c=o.length;l>t;){let d=!0,u=!1;if(!c||l>o[c-1].to){let y=Qr[l-1];y!=a&&(d=!1,u=y==16)}let h=!d&&a==1?[]:null,f=d?i:i+1,p=l;e:for(;;)if(c&&p==o[c-1].to){if(u)break e;let y=o[--c];if(!d)for(let v=y.from,b=c;;){if(v==t)break e;if(b&&o[b-1].to==v)v=o[--b].from;else{if(Qr[v-1]==a)break e;break}}if(h)h.push(y);else{y.to<l&&s.push(new Rd(y.to,l,f));let v=y.direction==X1!=!(f%2);TH(n,v?i+1:i,r,y.inner,y.from,y.to,s),l=y.from}p=y.from}else{if(p==t||(d?Qr[p-1]!=a:Qr[p-1]==a))break;p--}h?MH(n,p,l,i+1,r,h,s):p<l&&s.push(new Rd(p,l,f)),l=p}}function TH(n,t,e,i,r,o,s){let a=t%2?2:1;snt(n,r,o,i,a),ant(n,r,o,i,a),lnt(r,o,i,a),MH(n,r,o,t,e,i,s)}function cnt(n,t,e){if(!n)return[new Rd(0,0,t==aW?1:0)];if(t==X1&&!e.length&&!ont.test(n))return qpe(n.length);if(e.length)for(;n.length>Qr.length;)Qr[Qr.length]=256;let i=[],r=t==X1?0:1;return TH(n,r,r,e,0,n.length,i),i}function qpe(n){return[new Rd(0,n,0)]}var $pe="";function dnt(n,t,e,i,r){var o;let s=i.head-n.from,a=Rd.find(t,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),l=t[a],c=l.side(r,e);if(s==c){let h=a+=r?1:-1;if(h<0||h>=t.length)return null;l=t[a=h],s=l.side(!r,e),c=l.side(r,e)}let d=vs(n.text,s,l.forward(r,e));(d<l.from||d>l.to)&&(d=c),$pe=n.text.slice(Math.min(s,d),Math.max(s,d));let u=a==(r?t.length-1:0)?null:t[a+(r?1:-1)];return u&&d==c&&u.level+(r?0:1)<l.level?Dt.cursor(u.side(!r,e)+n.from,u.forward(r,e)?1:-1,u.level):Dt.cursor(d+n.from,l.forward(r,e)?-1:1,l.level)}function unt(n,t,e){for(let i=t;i<e;i++){let r=Wpe(n.charCodeAt(i));if(r==1)return X1;if(r==2||r==4)return aW}return X1}var Kpe=on.define(),Gpe=on.define(),Xpe=on.define(),Ype=on.define(),dH=on.define(),Zpe=on.define(),Qpe=on.define(),lW=on.define(),cW=on.define(),ope=on.define({combine:n=>n.some(t=>t)}),hnt=on.define({combine:n=>n.some(t=>t)}),Jpe=on.define(),LS=class n{constructor(t,e="nearest",i="nearest",r=5,o=5,s=!1){this.range=t,this.y=e,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(t){return t.empty?this:new n(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new n(Dt.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},cA=wo.define({map:(n,t)=>n.map(t)}),e0e=wo.define();function Il(n,t,e){let i=n.facet(Ype);i.length?i[0](t):window.onerror&&window.onerror(String(t),e,void 0,void 0,t)||(e?console.error(e+":",t):console.error(t))}var mf=on.define({combine:n=>n.length?n[0]:!0}),fnt=0,kv=on.define({combine(n){return n.filter((t,e)=>{for(let i=0;i<e;i++)if(n[i].plugin==t.plugin)return!1;return!0})}}),nc=class n{constructor(t,e,i,r,o){this.id=t,this.create=e,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(kv.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(kv.of({plugin:this,arg:t}))}static define(t,e){let{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=e||{};return new n(fnt++,t,i,r,a=>{let l=[];return s&&l.push(qS.of(c=>{let d=c.plugin(a);return d?s(d):Vr.none})),o&&l.push(o(a)),l})}static fromClass(t,e){return n.define((i,r)=>new t(i,r),e)}},RS=class{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(i){if(Il(e.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(e){Il(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(i){Il(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},spe=on.define(),EH=on.define(),qS=on.define(),t0e=on.define(),n0e=on.define(),$S=on.define(),i0e=on.define();function ape(n,t){let e=n.state.facet(i0e);if(!e.length)return e;let i=e.map(o=>o instanceof Function?o(n):o),r=[];return Zr.spans(i,t.from,t.to,{point(){},span(o,s,a,l){let c=o-t.from,d=s-t.from,u=r;for(let h=a.length-1;h>=0;h--,l--){let f=a[h].spec.bidiIsolate,p;if(f==null&&(f=unt(t.text,c,d)),l>0&&u.length&&(p=u[u.length-1]).to==c&&p.direction==f)p.to=d,u=p.inner;else{let y={from:c,to:d,direction:f,inner:[]};u.push(y),u=y.inner}}}}),r}var r0e=on.define();function dW(n){let t=0,e=0,i=0,r=0;for(let o of n.state.facet(r0e)){let s=o(n);s&&(s.left!=null&&(t=Math.max(t,s.left)),s.right!=null&&(e=Math.max(e,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:t,right:e,top:i,bottom:r}}var DS=on.define(),Od=class n{constructor(t,e,i,r){this.fromA=t,this.toA=e,this.fromB=i,this.toB=r}join(t){return new n(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,i=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),t.splice(e-1,1)}}return t.splice(e,0,i),t}static extendWithRanges(t,e){if(e.length==0)return t;let i=[];for(let r=0,o=0,s=0;;){let a=r<t.length?t[r].fromB:1e9,l=o<e.length?e[o]:1e9,c=Math.min(a,l);if(c==1e9)break;let d=c+s,u=c,h=d;for(;;)if(o<e.length&&e[o]<=u){let f=e[o+1];o+=2,u=Math.max(u,f);for(let p=r;p<t.length&&t[p].fromB<=u;p++)s=t[p].toA-t[p].toB;h=Math.max(h,f+s)}else if(r<t.length&&t[r].fromB<=u){let f=t[r++];u=Math.max(u,f.toB),h=Math.max(h,f.toA),s=f.toA-f.toB}else break;i.push(new n(d,h,c,u))}return i}},kA=class n{constructor(t,e,i){this.view=t,this.state=e,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=Al.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,l)=>r.push(new Od(o,s,a,l))),this.changedRanges=r}static create(t,e,i){return new n(t,e,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},pnt=[],Ko=class{constructor(t,e,i=0){this.dom=t,this.length=e,this.flags=i,this.parent=null,t.cmTile=this}get breakAfter(){return this.flags&1}get children(){return pnt}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(t){if(this.flags|=2,this.flags&4){this.flags&=-5;let e=this.domAttrs;e&&Xtt(this.dom,e)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(t){this.dom=t,t.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t,e=this.posAtStart){let i=e;for(let r of this.children){if(r==t)return i;i+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}covers(t){return!0}coordsIn(t,e){return null}domPosFor(t,e){let i=_0(this.dom),r=this.length?t>0:e>0;return new th(this.parent.dom,i+(r?1:0),t==0||t==this.length)}markDirty(t){this.flags&=-3,t&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let t=this;t;t=t.parent)if(t instanceof Fv)return t;return null}static get(t){return t.cmTile}},Iv=class extends Ko{constructor(t){super(t,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(t){this.children.push(t),t.parent=this}sync(t){if(this.flags&2)return;super.sync(t);let e=this.dom,i=null,r,o=t?.node==e?t:null,s=0;for(let a of this.children){if(a.sync(t),s+=a.length+a.breakAfter,r=i?i.nextSibling:e.firstChild,o&&r!=a.dom&&(o.written=!0),a.dom.parentNode==e)for(;r&&r!=a.dom;)r=lpe(r);else e.insertBefore(a.dom,r);i=a.dom}for(r=i?i.nextSibling:e.firstChild,o&&r&&(o.written=!0);r;)r=lpe(r);this.length=s}};function lpe(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}var Fv=class extends Iv{constructor(t,e){super(e),this.view=t}owns(t){for(;t;t=t.parent)if(t==this)return!0;return!1}isBlock(){return!0}nearest(t){for(;;){if(!t)return null;let e=Ko.get(t);if(e&&this.owns(e))return e;t=t.parentNode}}blockTiles(t){for(let e=[],i=this,r=0,o=0;;)if(r==i.children.length){if(!e.length)return;i=i.parent,i.breakAfter&&o++,r=e.pop()}else{let s=i.children[r++];if(s instanceof y0)e.push(r),i=s,r=0;else{let a=o+s.length,l=t(s,o);if(l!==void 0)return l;o=a+s.breakAfter}}}resolveBlock(t,e){let i,r=-1,o,s=-1;if(this.blockTiles((a,l)=>{let c=l+a.length;if(t>=l&&t<=c){if(a.isWidget()&&e>=-1&&e<=1){if(a.flags&32)return!0;a.flags&16&&(i=void 0)}(l<t||t==c&&(e<-1?a.length:a.covers(1)))&&(!i||!a.isWidget()&&i.isWidget())&&(i=a,r=t-l),(c>t||t==l&&(e>1?a.length:a.covers(-1)))&&(!o||!a.isWidget()&&o.isWidget())&&(o=a,s=t-l)}}),!i&&!o)throw new Error("No tile at position "+t);return i&&e<0||!o?{tile:i,offset:r}:{tile:o,offset:s}}},y0=class n extends Iv{constructor(t,e){super(t),this.wrapper=e}isBlock(){return!0}covers(t){return this.children.length?t<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(t,e){let i=new n(e||document.createElement(t.tagName),t);return e||(i.flags|=4),i}},Pv=class n extends Iv{constructor(t,e){super(t),this.attrs=e}isLine(){return!0}static start(t,e,i){let r=new n(e||document.createElement("div"),t);return(!e||!i)&&(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(t,e,i){let r=null,o=-1,s=null,a=-1;function l(d,u){for(let h=0,f=0;h<d.children.length&&f<=u;h++){let p=d.children[h],y=f+p.length;y>=u&&(p.isComposite()?l(p,u-f):(!s||s.isHidden&&(e>0||i&&gnt(s,p)))&&(y>u||p.flags&32)?(s=p,a=u-f):(f<u||p.flags&16&&!p.isHidden)&&(r=p,o=u-f)),f=y}}l(this,t);let c=(e<0?r:s)||r||s;return c?{tile:c,offset:c==r?o:a}:null}coordsIn(t,e){let i=this.resolveInline(t,e,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),e):mnt(this)}domIn(t,e){let i=this.resolveInline(t,e);if(i){let{tile:r,offset:o}=i;if(this.dom.contains(r.dom))return r.isText()?new th(r.dom,Math.min(r.dom.nodeValue.length,o)):r.domPosFor(o,r.flags&16?1:r.flags&32?-1:e);let s=i.tile.parent,a=!1;for(let l of s.children){if(a)return new th(l.dom,0);l==i.tile&&(a=!0)}}return new th(this.dom,0)}};function mnt(n){let t=n.dom.lastChild;if(!t)return n.dom.getBoundingClientRect();let e=_A(t);return e[e.length-1]||null}function gnt(n,t){let e=n.coordsIn(0,1),i=t.coordsIn(0,1);return e&&i&&i.top<e.bottom}var Dl=class n extends Iv{constructor(t,e){super(t),this.mark=e}get domAttrs(){return this.mark.attrs}static of(t,e){let i=new n(e||document.createElement(t.tagName),t);return e||(i.flags|=4),i}},K1=class n extends Ko{constructor(t,e){super(t,e.length),this.text=e}sync(t){this.flags&2||(super.sync(t),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(t,e){let i=this.dom.nodeValue.length;t>i&&(t=i);let r=t,o=t,s=0;t==0&&e<0||t==i&&e>=0?Xt.chrome||Xt.gecko||(t?(r--,s=1):o<i&&(o++,s=-1)):e<0?r--:o<i&&o++;let a=zS(this.dom,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:e>=0)?0:a.length-1];return Xt.safari&&!s&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),s?xA(l,s<0):l||null}static of(t,e){let i=new n(e||document.createTextNode(t),t);return e||(i.flags|=2),i}},Lv=class n extends Ko{constructor(t,e,i,r){super(t,e,r),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(t){return this.flags&48?!1:(this.flags&(t<0?64:128))>0}coordsIn(t,e){return this.coordsInWidget(t,e,!1)}coordsInWidget(t,e,i){let r=this.widget.coordsAt(this.dom,t,e);if(r)return r;if(i)return xA(this.dom.getBoundingClientRect(),this.length?t==0:e<=0);{let o=this.dom.getClientRects(),s=null;if(!o.length)return null;let a=this.flags&16?!0:this.flags&32?!1:t>0;for(let l=a?o.length-1:0;s=o[l],!(t>0?l==0:l==o.length-1||s.top<s.bottom);l+=a?-1:1);return xA(s,!a)}}get overrideDOMText(){if(!this.length)return cr.empty;let{root:t}=this;if(!t)return cr.empty;let e=this.posAtStart;return t.view.state.doc.slice(e,e+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(t,e,i,r,o){return o||(o=t.toDOM(e),t.editable||(o.contentEditable="false")),new n(o,i,t,r)}},Rv=class extends Ko{constructor(t){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),super(e,0,t)}get isHidden(){return!1}get overrideDOMText(){return cr.empty}coordsIn(t){return this.dom.getBoundingClientRect()}},AH=class{constructor(t){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=t}advance(t,e,i){let{tile:r,index:o,beforeBreak:s,parents:a}=this;for(;t||e>0;)if(r.isComposite())if(s){if(!t)break;i&&i.break(),t--,s=!1}else if(o==r.children.length){if(!t&&!a.length)break;i&&i.leave(r),s=!!r.breakAfter,{tile:r,index:o}=a.pop(),o++}else{let l=r.children[o],c=l.breakAfter;(e>0?l.length<=t:l.length<t)&&(!i||i.skip(l,0,l.length)!==!1||!l.isComposite)?(s=!!c,o++,t-=l.length):(a.push({tile:r,index:o}),r=l,o=0,i&&l.isComposite()&&i.enter(l))}else if(o==r.length)s=!!r.breakAfter,{tile:r,index:o}=a.pop(),o++;else if(t){let l=Math.min(t,r.length-o);i&&i.skip(r,o,o+l),t-=l,o+=l}else break;return this.tile=r,this.index=o,this.beforeBreak=s,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}},DH=class{constructor(t,e,i,r){this.from=t,this.to=e,this.wrapper=i,this.rank=r}},IH=class{constructor(t,e,i){this.cache=t,this.root=e,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(t,e,i,r){var o;this.flushBuffer();let s=this.ensureMarks(e,i),a=s.lastChild;if(a&&a.isText()&&!(a.flags&8)){this.cache.reused.set(a,2);let l=s.children[s.children.length-1]=new K1(a.dom,a.text+t);l.parent=s}else s.append(r||K1.of(t,(o=this.cache.find(K1))===null||o===void 0?void 0:o.dom));this.pos+=t.length,this.afterWidget=null}addComposition(t,e){let i=this.curLine;i.dom!=e.line.dom&&(i.setDOM(this.cache.reused.has(e.line)?uH(e.line.dom):e.line.dom),this.cache.reused.set(e.line,2));let r=i;for(let s=e.marks.length-1;s>=0;s--){let a=e.marks[s],l=r.lastChild;if(l instanceof Dl&&l.mark.eq(a.mark))l.dom!=a.dom&&l.setDOM(uH(a.dom)),r=l;else{if(this.cache.reused.get(a)){let d=Ko.get(a.dom);d&&d.setDOM(uH(a.dom))}let c=Dl.of(a.mark,a.dom);r.append(c),r=c}this.cache.reused.set(a,2)}let o=new K1(t.text,t.text.nodeValue);o.flags|=8,r.append(o)}addInlineWidget(t,e,i){let r=this.afterWidget&&t.flags&48&&(this.afterWidget.flags&48)==(t.flags&48);r||this.flushBuffer();let o=this.ensureMarks(e,i);!r&&!(t.flags&16)&&o.append(this.getBuffer(1)),o.append(t),this.pos+=t.length,this.afterWidget=t}addMark(t,e,i){this.flushBuffer(),this.ensureMarks(e,i).append(t),this.pos+=t.length,this.afterWidget=null}addBlockWidget(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}continueWidget(t){let e=this.afterWidget||this.lastBlock;e.length+=t,this.pos+=t}addLineStart(t,e){var i;t||(t=o0e);let r=Pv.start(t,e||((i=this.cache.find(Pv))===null||i===void 0?void 0:i.dom),!!e);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(t){this.blockPosCovered()||this.addLineStart(t)}ensureLine(t){this.curLine||this.addLineStart(t)}ensureMarks(t,e){var i;let r=this.curLine;for(let o=t.length-1;o>=0;o--){let s=t[o],a;if(e>0&&(a=r.lastChild)&&a instanceof Dl&&a.mark.eq(s))r=a,e--;else{let l=Dl.of(s,(i=this.cache.find(Dl,c=>c.mark.eq(s)))===null||i===void 0?void 0:i.dom);r.append(l),r=l,e=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let t=this.curLine.lastChild;(!t||!cpe(this.curLine,!1)||t.dom.nodeName!="BR"&&t.isWidget()&&!(Xt.ios&&cpe(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(hH,0,32)||new Lv(hH.toDOM(),0,hH,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let t=this.wrappers.length-1;t>=0;t--)this.wrappers[t].to<this.pos&&this.wrappers.splice(t,1);for(let t=this.blockWrappers;t.value&&t.from<=this.pos;t.next())if(t.to>=this.pos){let e=new DH(t.from,t.to,t.value,t.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-e.rank||this.wrappers[i-1].to-e.to)<0;)i--;this.wrappers.splice(i,0,e)}this.wrapperPos=this.pos}getBlockPos(){var t;this.updateBlockWrappers();let e=this.root;for(let i of this.wrappers){let r=e.lastChild;if(i.from<this.pos&&r instanceof y0&&r.wrapper.eq(i.wrapper))e=r;else{let o=y0.of(i.wrapper,(t=this.cache.find(y0,s=>s.wrapper.eq(i.wrapper)))===null||t===void 0?void 0:t.dom);e.append(o),e=o}}return e}blockPosCovered(){let t=this.lastBlock;return t!=null&&!t.breakAfter&&(!t.isWidget()||(t.flags&160)>0)}getBuffer(t){let e=2|(t<0?16:32),i=this.cache.find(Rv,void 0,1);return i&&(i.flags=e),i||new Rv(e)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}},FH=class{constructor(t){this.skipCount=0,this.text="",this.textOff=0,this.cursor=t.iter()}skip(t){this.textOff+t<=this.text.length?this.textOff+=t:(this.skipCount+=t-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(t){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:s}=this.cursor.next(this.skipCount);if(this.skipCount=0,s)throw new Error("Ran out of text content when drawing inline views");this.text=r;let a=this.textOff=Math.min(t,r.length);return o?null:r.slice(0,a)}let e=Math.min(this.text.length,this.textOff+t),i=this.text.slice(this.textOff,e);return this.textOff=e,i}},MA=[Lv,Pv,K1,Dl,Rv,y0,Fv];for(let n=0;n<MA.length;n++)MA[n].bucket=n;var PH=class{constructor(t){this.view=t,this.buckets=MA.map(()=>[]),this.index=MA.map(()=>0),this.reused=new Map}add(t){let e=t.constructor.bucket,i=this.buckets[e];i.length<6?i.push(t):i[this.index[e]=(this.index[e]+1)%6]=t}find(t,e,i=2){let r=t.bucket,o=this.buckets[r],s=this.index[r];for(let a=o.length-1;a>=0;a--){let l=(a+s)%o.length,c=o[l];if((!e||e(c))&&!this.reused.has(c))return o.splice(l,1),l<s&&this.index[r]--,this.reused.set(c,i),c}return null}findWidget(t,e,i){let r=this.buckets[0];if(r.length)for(let o=0,s=0;;o++){if(o==r.length){if(s)return null;s=1,o=0}let a=r[o];if(!this.reused.has(a)&&(s==0?a.widget.compare(t):a.widget.constructor==t.constructor&&t.updateDOM(a.dom,this.view)))return r.splice(o,1),o<this.index[0]&&this.index[0]--,this.reused.set(a,1),a.length=e,a.flags=a.flags&-498|i,a}}reuse(t){return this.reused.set(t,1),t}maybeReuse(t,e=2){if(!this.reused.has(t))return this.reused.set(t,e),t.dom}},LH=class{constructor(t,e,i,r,o){this.view=t,this.decorations=r,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new PH(t),this.text=new FH(t.state.doc),this.builder=new IH(this.cache,new Fv(t,t.contentDOM),Zr.iter(i)),this.cache.reused.set(e,2),this.old=new AH(e)}run(t,e){let i=e&&this.getCompositionContext(e.text);for(let r=0,o=0,s=0;;){let a=s<t.length?t[s++]:null,l=a?a.fromA:this.old.root.length;if(l>r){let c=l-r;this.preserve(c,!s,!a),r=l,o+=c}if(!a)break;this.forward(a.fromA,a.toA),e&&a.fromA<=e.range.fromA&&a.toA>=e.range.toA?(this.emit(o,e.range.fromB),this.builder.addComposition(e,i),this.emit(e.range.toB,a.toB)):this.emit(o,a.toB),o=a.toB,r=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(t,e,i){let r=_nt(this.old),o=this.openMarks;this.old.advance(t,i?1:-1,{skip:(s,a,l)=>{if(s.isWidget())if(this.openWidget)this.builder.continueWidget(l-a);else{let c=l>0||a<s.length?Lv.of(s.widget,this.view,l-a,s.flags&496,this.cache.maybeReuse(s)):this.cache.reuse(s);c.flags&256?(c.flags&=-2,this.builder.addBlockWidget(c)):(this.builder.ensureLine(null),this.builder.addInlineWidget(c,r,o),o=r.length)}else if(s.isText())this.builder.ensureLine(null),!a&&l==s.length?this.builder.addText(s.text,r,o,this.cache.reuse(s)):(this.cache.add(s),this.builder.addText(s.text.slice(a,l),r,o)),o=r.length;else if(s.isLine())s.flags&=-2,this.cache.reused.set(s,1),this.builder.addLine(s);else if(s instanceof Rv)this.cache.add(s);else if(s instanceof Dl)this.builder.ensureLine(null),this.builder.addMark(s,r,o),this.cache.reused.set(s,1),o=r.length;else return!1;this.openWidget=!1},enter:s=>{s.isLine()?this.builder.addLineStart(s.attrs,this.cache.maybeReuse(s)):(this.cache.add(s),s instanceof Dl&&r.unshift(s.mark)),this.openWidget=!1},leave:s=>{s.isLine()?r.length&&(r.length=o=0):s instanceof Dl&&(r.shift(),o=Math.min(o,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(t)}emit(t,e){let i=null,r=this.builder,o=0,s=Zr.spans(this.decorations,t,e,{point:(a,l,c,d,u,h)=>{if(c instanceof G1){if(this.disallowBlockEffectsFor[h]){if(c.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=d.length,u>d.length)r.continueWidget(l-a);else{let f=c.widget||(c.block?dpe.block:dpe.inline),p=ynt(c),y=this.cache.findWidget(f,l-a,p)||Lv.of(f,this.view,l-a,p);c.block?(c.startSide>0&&r.addLineStartIfNotCovered(i),r.addBlockWidget(y)):(r.ensureLine(i),r.addInlineWidget(y,d,u))}i=null}else i=vnt(i,c);l>a&&this.text.skip(l-a)},span:(a,l,c,d)=>{for(let u=a;u<l;){let h=this.text.next(Math.min(512,l-u));h==null?(r.addLineStartIfNotCovered(i),r.addBreak(),u++):(r.ensureLine(i),r.addText(h,c,d),u+=h.length),i=null}}});r.addLineStartIfNotCovered(i),this.openWidget=s>o,this.openMarks=s}forward(t,e){this.old.advance(e-t,1,{skip:(i,r,o)=>{(i.isText()||o==i.length)&&this.cache.add(i)},enter:i=>this.cache.add(i),leave:()=>{},break:()=>{}})}getCompositionContext(t){let e=[],i=null;for(let r=t.parentNode;;r=r.parentNode){let o=Ko.get(r);if(r==this.view.contentDOM)break;o instanceof Dl?e.push(o):o?.isLine()?i=o:r.nodeName=="DIV"&&!i&&r!=this.view.contentDOM?i=new Pv(r,o0e):e.push(Dl.of(new jS({tagName:r.nodeName.toLowerCase(),attributes:Ytt(r)}),r))}return{line:i,marks:e}}};function cpe(n,t){let e=i=>{for(let r of i.children)if((t?r.isText():r.length)||e(r))return!0;return!1};return e(n)}function ynt(n){let t=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(t|=256),t}var o0e={class:"cm-line"};function vnt(n,t){let e=t.spec.attributes,i=t.spec.class;return!e&&!i||(n||(n={class:"cm-line"}),e&&oW(e,n),i&&(n.class+=" "+i)),n}function _nt(n){let t=[];for(let e=n.parents.length;e>1;e--){let i=e==n.parents.length?n.tile:n.parents[e].tile;i instanceof Dl&&t.push(i.mark)}return t}function uH(n){let t=Ko.get(n);return t&&t.setDOM(n.cloneNode()),n}var dpe=(()=>{class n extends gf{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}return n.inline=new n("span"),n.block=new n("div"),n})(),hH=new class extends gf{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}},TA=class{constructor(t){this.view=t,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Vr.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Fv(t,t.contentDOM),this.updateInner([new Od(0,0,0,t.state.doc.length)],null)}update(t){var e;let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:u})=>u<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?r=this.domChanged.newSel.head:!Tnt(t.changes,this.hasComposition)&&!t.selectionSet&&(r=t.state.selection.main.head));let o=r>-1?wnt(this.view,t.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:d,to:u}=this.hasComposition;i=new Od(d,u,t.changes.mapPos(d,-1),t.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Xt.ie||Xt.chrome)&&!o&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.blockWrappers;this.updateDeco();let l=xnt(s,this.decorations,t.changes);l.length&&(i=Od.extendWithRanges(i,l));let c=knt(a,this.blockWrappers,t.changes);return c.length&&(i=Od.extendWithRanges(i,c)),o&&!i.some(d=>d.fromA<=o.range.fromA&&d.toA>=o.range.toA)&&(i=o.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,o),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(e||t.length){let s=this.tile,a=new LH(this.view,s,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(t,e),RH(s,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Xt.chrome||Xt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||i.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof OS&&r.push(o.dom);i.updateGaps(r)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let i of e.effects)i.is(e0e)&&(this.editContextFormatting=i.value)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,r=this.view.root.activeElement,o=r==i,s=!o&&!(this.view.state.facet(mf)||i.tabIndex>-1)&&vA(i,this.view.observer.selectionRange)&&!(r&&i.contains(r));if(!(o||e||s))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c,d;if(l.empty?d=c=this.inlineDOMNearPos(l.anchor,l.assoc||1):(d=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),c=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),Xt.gecko&&l.empty&&!this.hasComposition&&bnt(c)){let h=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(h,c.node.childNodes[c.offset]||null)),c=d=new th(h,0),a=!0}let u=this.view.observer.selectionRange;(a||!u.focusNode||(!PS(c.node,c.offset,u.anchorNode,u.anchorOffset)||!PS(d.node,d.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{Xt.android&&Xt.chrome&&i.contains(u.focusNode)&&Mnt(u.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let h=WS(this.view.root);if(h)if(l.empty){if(Xt.gecko){let f=Snt(c.node,c.offset);if(f&&f!=3){let p=(f==1?Upe:jpe)(c.node,c.offset);p&&(c=new th(p.node,p.offset))}}h.collapse(c.node,c.offset),l.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=l.bidiLevel)}else if(h.extend){h.collapse(c.node,c.offset);try{h.extend(d.node,d.offset)}catch{}}else{let f=document.createRange();l.anchor>l.head&&([c,d]=[d,c]),f.setEnd(d.node,d.offset),f.setStart(c.node,c.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==i&&(i.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(c,d)),this.impreciseAnchor=c.precise?null:new th(u.anchorNode,u.anchorOffset),this.impreciseHead=d.precise?null:new th(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&PS(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,i=WS(t.root),{anchorNode:r,anchorOffset:o}=t.observer.selectionRange;if(!i||!e.empty||!e.assoc||!i.modify)return;let s=this.lineAt(e.head,e.assoc);if(!s)return;let a=s.posAtStart;if(e.head==a||e.head==a+s.length)return;let l=this.coordsAt(e.head,-1),c=this.coordsAt(e.head,1);if(!l||!c||l.bottom>c.top)return;let d=this.domAtPos(e.head+e.assoc,e.assoc);i.collapse(d.node,d.offset),i.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let u=t.observer.selectionRange;t.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=e.from&&i.collapse(r,o)}posFromDOM(t,e){let i=this.tile.nearest(t);if(!i)return this.tile.dom.compareDocumentPosition(t)&2?0:this.view.state.doc.length;let r=i.posAtStart;if(i.isComposite()){let o;if(t==i.dom)o=i.dom.childNodes[e];else{let s=yf(t)==0?0:e==0?-1:1;for(;;){let a=t.parentNode;if(a==i.dom)break;s==0&&a.firstChild!=a.lastChild&&(t==a.firstChild?s=-1:s=1),t=a}s<0?o=t:o=t.nextSibling}if(o==i.dom.firstChild)return r;for(;o&&!Ko.get(o);)o=o.nextSibling;if(!o)return r+i.length;for(let s=0,a=r;;s++){let l=i.children[s];if(l.dom==o)return a;a+=l.length+l.breakAfter}}else return i.isText()?t==i.dom?r+e:r+(e?i.length:0):r}domAtPos(t,e){let{tile:i,offset:r}=this.tile.resolveBlock(t,e);return i.isWidget()?i.domPosFor(t,e):i.domIn(r,e)}inlineDOMNearPos(t,e){let i,r=-1,o=!1,s,a=-1,l=!1;return this.tile.blockTiles((c,d)=>{if(c.isWidget()){if(c.flags&32&&d>=t)return!0;c.flags&16&&(o=!0)}else{let u=d+c.length;if(d<=t&&(i=c,r=t-d,o=u<t),u>=t&&!s&&(s=c,a=t-d,l=d>t),d>t&&s)return!0}}),!i&&!s?this.domAtPos(t,e):(o&&s?i=null:l&&i&&(s=null),i&&e<0||!s?i.domIn(r,e):s.domIn(a,e))}coordsAt(t,e){let{tile:i,offset:r}=this.tile.resolveBlock(t,e);return i.isWidget()?i.widget instanceof OS?null:i.coordsInWidget(r,e,!0):i.coordsIn(r,e)}lineAt(t,e){let{tile:i}=this.tile.resolveBlock(t,e);return i.isLine()?i:null}coordsForChar(t){let{tile:e,offset:i}=this.tile.resolveBlock(t,1);if(!e.isLine())return null;function r(o,s){if(o.isComposite())for(let a of o.children){if(a.length>=s){let l=r(a,s);if(l)return l}if(s-=a.length,s<0)break}else if(o.isText()&&s<o.length){let a=vs(o.text,s);if(a==s)return null;let l=zS(o.dom,s,a).getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(c==l.length-1||d.top<d.bottom&&d.left<d.right)return d}}return null}return r(e,i)}measureVisibleLineHeights(t){let e=[],{from:i,to:r}=t,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==go.LTR,c=0,d=(u,h,f)=>{for(let p=0;p<u.children.length&&!(h>r);p++){let y=u.children[p],v=h+y.length,b=y.dom.getBoundingClientRect(),{height:S}=b;if(f&&!p&&(c+=b.top-f.top),y instanceof y0)v>i&&d(y,h,b);else if(h>=i&&(c>0&&e.push(-c),e.push(S+c),c=0,s)){let x=y.dom.lastChild,k=x?_A(x):[];if(k.length){let L=k[k.length-1],D=l?L.right-b.left:b.right-L.left;D>a&&(a=D,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=v)}}f&&p==u.children.length-1&&(c+=f.bottom-b.bottom),h=v+y.breakAfter}};return d(this.tile,0,null),e}textDirectionAt(t){let{tile:e}=this.tile.resolveBlock(t,1);return getComputedStyle(e.dom).direction=="rtl"?go.RTL:go.LTR}measureTextSize(){let t=this.tile.blockTiles(s=>{if(s.isLine()&&s.children.length&&s.length<=20){let a=0,l;for(let c of s.children){if(!c.isText()||/[^ -~]/.test(c.text))return;let d=_A(c.dom);if(d.length!=1)return;a+=d[0].width,l=d[0].height}if(a)return{lineHeight:s.dom.getBoundingClientRect().height,charWidth:a/s.length,textHeight:l}}});if(t)return t;let e=document.createElement("div"),i,r,o;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(e);let s=_A(e.firstChild)[0];i=e.getBoundingClientRect().height,r=s&&s.width?s.width/27:7,o=s&&s.height?s.height:i,e.remove()}),{lineHeight:i,charWidth:r,textHeight:o}}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let i=0,r=0;;r++){let o=r==e.viewports.length?null:e.viewports[r],s=o?o.from-1:this.view.state.doc.length;if(s>i){let a=(e.lineBlockAt(s).bottom-e.lineBlockAt(i).top)/this.view.scaleY;t.push(Vr.replace({widget:new OS(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return Vr.set(t)}updateDeco(){let t=1,e=this.view.state.facet(qS).map(o=>(this.dynamicDecorationMap[t++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(n0e).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[t++]=i,e.push(Zr.join(r))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;this.blockWrappers=this.view.state.facet(t0e).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(t){if(t.isSnapshot){let c=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=c.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let c of this.view.state.facet(Jpe))try{if(c(this.view,t.range,t))return!0}catch(d){Il(this.view.state,d,"scroll handler")}let{range:e}=t,i=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),r;if(!i)return;!e.empty&&(r=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=dW(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;Jtt(this.view.scrollDOM,s,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,a),-a),Math.max(Math.min(t.yMargin,l),-l),this.view.textDirection==go.LTR)}lineHasWidget(t){let e=i=>i.isWidget()||i.children.some(e);return e(this.tile.resolveBlock(t,1).tile)}destroy(){RH(this.tile)}};function RH(n,t){let e=t?.get(n);if(e!=1){e==null&&n.destroy();for(let i of n.children)RH(i,t)}}function bnt(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function s0e(n,t){let e=n.observer.selectionRange;if(!e.focusNode)return null;let i=Upe(e.focusNode,e.focusOffset),r=jpe(e.focusNode,e.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=Ko.get(r.node);if(!a||a.isText()&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let l=Ko.get(i.node);!l||l.isText()&&l.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=t-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function wnt(n,t,e){let i=s0e(n,e);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let l=t.invertedDesc;return{range:new Od(l.mapPos(o),l.mapPos(s),o,s),text:r}}function Snt(n,t){return n.nodeType!=1?0:(t&&n.childNodes[t-1].contentEditable=="false"?1:0)|(t<n.childNodes.length&&n.childNodes[t].contentEditable=="false"?2:0)}var Cnt=class{constructor(){this.changes=[]}compareRange(t,e){Av(t,e,this.changes)}comparePoint(t,e){Av(t,e,this.changes)}boundChange(t){Av(t,t,this.changes)}};function xnt(n,t,e){let i=new Cnt;return Zr.compare(n,t,e,i),i.changes}var OH=class{constructor(){this.changes=[]}compareRange(t,e){Av(t,e,this.changes)}comparePoint(){}boundChange(t){Av(t,t,this.changes)}};function knt(n,t,e){let i=new OH;return Zr.compare(n,t,e,i),i.changes}function Mnt(n,t){for(let e=n;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function Tnt(n,t){let e=!1;return t&&n.iterChangedRanges((i,r)=>{i<t.to&&r>t.from&&(e=!0)}),e}var OS=class extends gf{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}};function Ent(n,t,e=1){let i=n.charCategorizer(t),r=n.doc.lineAt(t),o=t-r.from;if(r.length==0)return Dt.cursor(t);o==0?e=1:o==r.length&&(e=-1);let s=o,a=o;e<0?s=vs(r.text,o,!1):a=vs(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let c=vs(r.text,s,!1);if(i(r.text.slice(c,s))!=l)break;s=c}for(;a<r.length;){let c=vs(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return Dt.range(s+r.from,a+r.from)}function Ant(n,t,e,i,r){let o=Math.round((i-t.left)*n.defaultCharacterWidth);if(n.lineWrapping&&e.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((r-e.top-(n.defaultLineHeight-a)*.5)/a);o+=l*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(e.from,e.to);return e.from+Kfe(s,o,n.state.tabSize)}function Dnt(n,t,e){let i=n.lineBlockAt(t);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>t)break;if(!(o.to<t)){if(o.from<t&&o.to>t)return o;(!r||o.type==Fl.Text&&(r.type!=o.type||(e<0?o.from<t:o.to>t)))&&(r=o)}}return r||i}return i}function Int(n,t,e,i){let r=Dnt(n,t.head,t.assoc||-1),o=!i||r.type!=Fl.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),l=n.posAtCoords({x:e==(a==go.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(l!=null)return Dt.cursor(l,e?-1:1)}return Dt.cursor(e?r.to:r.from,e?-1:1)}function upe(n,t,e,i){let r=n.state.doc.lineAt(t.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=t,l=null;;){let c=dnt(r,o,s,a,e),d=$pe;if(!c){if(r.number==(e?n.state.doc.lines:1))return a;d=`
`,r=n.state.doc.line(r.number+(e?1:-1)),o=n.bidiSpans(r),c=n.visualLineSide(r,!e)}if(l){if(!l(d))return a}else{if(!i)return c;l=i(d)}a=c}}function Fnt(n,t,e){let i=n.state.charCategorizer(t),r=i(e);return o=>{let s=i(o);return r==Pd.Space&&(r=s),r==s}}function Pnt(n,t,e,i){let r=t.head,o=e?1:-1;if(r==(e?n.state.doc.length:0))return Dt.cursor(r,t.assoc);let s=t.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(r,t.assoc||-1),d=n.documentTop;if(c)s==null&&(s=c.left-l.left),a=o<0?c.top:c.bottom;else{let f=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(l.right-l.left,n.defaultCharacterWidth*(r-f.from))),a=(o<0?f.top:f.bottom)+d}let u=l.left+s,h=i??n.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*o,y=NH(n,{x:u,y:p},!1,o);return Dt.cursor(y.pos,y.assoc,void 0,s)}}function NS(n,t,e){for(;;){let i=0;for(let r of n)r.between(t-1,t+1,(o,s,a)=>{if(t>o&&t<s){let l=i||e||(t-o<s-t?-1:1);t=l<0?o:s,i=l}});if(!i)return t}}function a0e(n,t){let e=null;for(let i=0;i<t.ranges.length;i++){let r=t.ranges[i],o=null;if(r.empty){let s=NS(n,r.from,0);s!=r.from&&(o=Dt.cursor(s,-1))}else{let s=NS(n,r.from,-1),a=NS(n,r.to,1);(s!=r.from||a!=r.to)&&(o=Dt.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(e||(e=t.ranges.slice()),e[i]=o)}return e?Dt.create(e,t.mainIndex):t}function fH(n,t,e){let i=NS(n.state.facet($S).map(r=>r(n)),e.from,t.head>e.from?-1:1);return i==e.from?e:Dt.cursor(i,i<e.from?1:-1)}var jc=class{constructor(t,e){this.pos=t,this.assoc=e}};function NH(n,t,e,i){let r=n.contentDOM.getBoundingClientRect(),o=r.top+n.viewState.paddingTop,{x:s,y:a}=t,l=a-o,c;for(;;){if(l<0)return new jc(0,1);if(l>n.viewState.docHeight)return new jc(n.state.doc.length,-1);if(c=n.elementAtHeight(l),i==null)break;if(c.type==Fl.Text){let h=n.docView.coordsAt(i<0?c.from:c.to,i);if(h&&(i<0?h.top<=l+o:h.bottom>=l+o))break}let u=n.viewState.heightOracle.textHeight/2;l=i>0?c.bottom+u:c.top-u}if(n.viewport.from>=c.to||n.viewport.to<=c.from){if(e)return null;if(c.type==Fl.Text){let u=Ant(n,r,c,s,a);return new jc(u,u==c.from?1:-1)}}if(c.type!=Fl.Text)return l<(c.top+c.bottom)/2?new jc(c.from,1):new jc(c.to,-1);let d=n.docView.lineAt(c.from,2);return(!d||d.length!=c.length)&&(d=n.docView.lineAt(c.from,-2)),l0e(n,d,c.from,s,a)}function l0e(n,t,e,i,r){let o=-1,s=null,a=1e9,l=1e9,c=r,d=r,u=(h,f)=>{for(let p=0;p<h.length;p++){let y=h[p];if(y.top==y.bottom)continue;let v=y.left>i?y.left-i:y.right<i?i-y.right:0,b=y.top>r?y.top-r:y.bottom<r?r-y.bottom:0;y.top<=d&&y.bottom>=c&&(c=Math.min(y.top,c),d=Math.max(y.bottom,d),b=0),(o<0||(b-l||v-a)<0)&&(o>=0&&l&&a<v&&s.top<=d-2&&s.bottom>=c+2?l=0:(o=f,a=v,l=b,s=y))}};if(t.isText()){for(let f=0;f<t.length;){let p=vs(t.text,f);if(u(zS(t.dom,f,p).getClientRects(),f),!a&&!l)break;f=p}return i>(s.left+s.right)/2==(hpe(n,o+e)==go.LTR)?new jc(e+vs(t.text,o),-1):new jc(e+o,1)}else{if(!t.length)return new jc(e,1);for(let y=0;y<t.children.length;y++){let v=t.children[y];if(v.flags&48)continue;let b=(v.dom.nodeType==1?v.dom:zS(v.dom,0,v.length)).getClientRects();if(u(b,y),!a&&!l)break}let h=t.children[o],f=t.posBefore(h,e);return h.isComposite()||h.isText()?l0e(n,h,f,Math.max(s.left,Math.min(s.right,i)),r):i>(s.left+s.right)/2==(hpe(n,o+e)==go.LTR)?new jc(f+h.length,-1):new jc(f,1)}}function hpe(n,t){let e=n.state.doc.lineAt(t);return n.bidiSpans(e)[Rd.find(n.bidiSpans(e),t-e.from,-1,1)].dir}var IS="\uFFFF",BH=class{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Jl.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=IS}readRange(t,e){if(!t)return this;let i=t.parentNode;for(let r=t;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=Ko.get(r),a=r.nextSibling;if(a==e){s?.breakAfter&&!a&&this.lineBreak();break}let l=Ko.get(a);(s&&l?s.breakAfter:(s?s.breakAfter:CA(r))||CA(a)&&(r.nodeName!="BR"||s?.isWidget())&&this.text.length>o)&&!Rnt(a,e)&&this.lineBreak(),r=a}return this.findPointBefore(i,e),this}readTextNode(t){let e=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(e))&&(o=a.index,s=a[0].length),this.append(e.slice(i,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let l of this.points)l.node==t&&l.pos>this.text.length&&(l.pos-=s-1);i=o+s}}readNode(t){let e=Ko.get(t),i=e&&e.overrideDOMText;if(i!=null){this.findPointInside(t,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointInside(t,e){for(let i of this.points)(t.nodeType==3?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+(Lnt(t,i.node,i.offset)?e:0))}};function Lnt(n,t,e){for(;;){if(!t||e<yf(t))return!1;if(t==n)return!0;e=_0(t)+1,t=t.parentNode}}function Rnt(n,t){let e;for(;!(n==t||!n);n=n.nextSibling){let i=Ko.get(n);if(!i?.isWidget())return!1;i&&(e||(e=[])).push(i)}if(e)for(let i of e){let r=i.overrideDOMText;if(r?.length)return!1}return!0}var EA=class{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}},VH=class{constructor(t,e,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:o,impreciseAnchor:s}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=c0e(t.docView.tile,e,i,0))){let a=o||s?[]:Nnt(t),l=new BH(a,t.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Bnt(a,this.bounds.from)}else{let a=t.observer.selectionRange,l=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!CH(t.contentDOM,a.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(a.focusNode,a.focusOffset),c=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!CH(t.contentDOM,a.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(a.anchorNode,a.anchorOffset),d=t.viewport;if((Xt.ios||Xt.chrome)&&t.state.selection.main.empty&&l!=c&&(d.from>0||d.to<t.state.doc.length)){let u=Math.min(l,c),h=Math.max(l,c),f=d.from-u,p=d.to-h;(f==0||f==1||u==0)&&(p==0||p==-1||h==t.state.doc.length)&&(l=0,c=t.state.doc.length)}t.inputState.composing>-1&&t.state.selection.ranges.length>1?this.newSel=t.state.selection.replaceRange(Dt.range(c,l)):this.newSel=Dt.single(c,l)}}};function c0e(n,t,e,i){if(n.isComposite()){let r=-1,o=-1,s=-1,a=-1;for(let l=0,c=i,d=i;l<n.children.length;l++){let u=n.children[l],h=c+u.length;if(c<t&&h>e)return c0e(u,t,e,c);if(h>=t&&r==-1&&(r=l,o=c),c>e&&u.dom.parentNode==n.dom){s=l,a=d;break}d=h,c=h+u.breakAfter}return{from:o,to:a<0?i+n.length:a,startDOM:(r?n.children[r-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:s<n.children.length&&s>=0?n.children[s].dom:null}}else return n.isText()?{from:i,to:i+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function d0e(n,t){let e,{newSel:i}=t,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(t.bounds){let{from:s,to:a}=t.bounds,l=r.from,c=null;(o===8||Xt.android&&t.text.length<a-s)&&(l=r.to,c="end");let d=u0e(n.state.doc.sliceString(s,a,IS),t.text,l-s,c);d&&(Xt.chrome&&o==13&&d.toB==d.from+2&&t.text.slice(d.from,d.toB)==IS+IS&&d.toB--,e={from:s+d.from,to:s+d.toA,insert:cr.of(t.text.slice(d.from,d.toB).split(IS))})}else i&&(!n.hasFocus&&n.state.facet(mf)||i.main.eq(r))&&(i=null);if(!e&&!i)return!1;if(!e&&t.typeOver&&!r.empty&&i&&i.main.empty?e={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(Xt.mac||Xt.android)&&e&&e.from==e.to&&e.from==r.head-1&&/^\. ?$/.test(e.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&e.insert.length==2&&(i=Dt.single(i.main.anchor-1,i.main.head-1)),e={from:e.from,to:e.to,insert:cr.of([e.insert.toString().replace("."," ")])}):e&&e.from>=r.from&&e.to<=r.to&&(e.from!=r.from||e.to!=r.to)&&r.to-r.from-(e.to-e.from)<=4?e={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,e.from).append(e.insert).append(n.state.doc.slice(e.to,r.to))}:n.state.doc.lineAt(r.from).to<r.to&&n.docView.lineHasWidget(r.to)&&n.inputState.insertingTextAt>Date.now()-50?e={from:r.from,to:r.to,insert:n.state.toText(n.inputState.insertingText)}:Xt.chrome&&e&&e.from==e.to&&e.from==r.head&&e.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Dt.single(i.main.anchor-1,i.main.head-1)),e={from:r.from,to:r.to,insert:cr.of([" "])}),e)return uW(n,e,i,o);if(i&&!i.main.eq(r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=a0e(n.state.facet($S).map(l=>l(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function uW(n,t,e,i=-1){if(Xt.ios&&n.inputState.flushIOSKey(t))return!0;let r=n.state.selection.main;if(Xt.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&n.state.sliceDoc(t.from,r.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&Dv(n.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&t.insert.length==0||i==8&&t.insert.length<t.to-t.from&&t.to>r.head)&&Dv(n.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&Dv(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=Ont(n,t,e));return n.state.facet(Zpe).some(l=>l(n,t.from,t.to,o,a))||n.dispatch(a()),!0}function Ont(n,t,e){let i,r=n.state,o=r.selection.main,s=-1;if(t.from==t.to&&t.from<o.from||t.from>o.to){let l=t.from<o.from?-1:1,c=l<0?o.from:o.to,d=NS(r.facet($S).map(u=>u(n)),c,l);t.from==d&&(s=d)}if(s>-1)i={changes:t,selection:Dt.cursor(t.from+t.insert.length,-1)};else if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let l=o.from<t.from?r.sliceDoc(o.from,t.from):"",c=o.to>t.to?r.sliceDoc(t.to,o.to):"";i=r.replaceSelection(n.state.toText(l+t.insert.sliceString(0,void 0,n.state.lineBreak)+c))}else{let l=r.changes(t),c=e&&e.main.to<=l.newLength?e.main:void 0;if(r.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&t.to<=o.to+10&&t.to>=o.to-10){let d=n.state.sliceDoc(t.from,t.to),u,h=e&&s0e(n,e.main.head);if(h){let p=t.insert.length-(t.to-t.from);u={from:h.from,to:h.to-p}}else u=n.state.doc.lineAt(o.head);let f=o.to-t.to;i=r.changeByRange(p=>{if(p.from==o.from&&p.to==o.to)return{changes:l,range:c||p.map(l)};let y=p.to-f,v=y-d.length;if(n.state.sliceDoc(v,y)!=d||y>=u.from&&v<=u.to)return{range:p};let b=r.changes({from:v,to:y,insert:t.insert}),S=p.to-o.to;return{changes:b,range:c?Dt.range(Math.max(0,c.anchor+S),Math.max(0,c.head+S)):p.map(b)}})}else i={changes:l,selection:c&&r.selection.replaceRange(c)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function u0e(n,t,e,i){let r=Math.min(n.length,t.length),o=0;for(;o<r&&n.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&n.length==t.length)return null;let s=n.length,a=t.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if(i=="end"){let l=Math.max(0,o-Math.min(s,a));e-=s+l-o}if(s<o&&n.length<t.length){let l=e<=o&&e>=s?o-e:0;o-=l,a=o+(a-s),s=o}else if(a<o){let l=e<=o&&e>=a?o-e:0;o-=l,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function Nnt(n){let t=[];if(n.root.activeElement!=n.contentDOM)return t;let{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return e&&(t.push(new EA(e,i)),(r!=e||o!=i)&&t.push(new EA(r,o))),t}function Bnt(n,t){if(n.length==0)return null;let e=n[0].pos,i=n.length==2?n[1].pos:e;return e>-1&&i>-1?Dt.single(e+t,i+t):null}var UH=class{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,Xt.safari&&t.contentDOM.addEventListener("input",()=>null),Xt.gecko&&Qnt(t.contentDOM.ownerDocument)}handleEvent(t){!qnt(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,e){let i=this.handlers[t];if(i){for(let r of i.observers)r(this.view,e);for(let r of i.handlers){if(e.defaultPrevented)break;if(r(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=Vnt(t),i=this.handlers,r=this.view.contentDOM;for(let o in e)if(o!="scroll"){let s=!e[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!e[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&f0e.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),Xt.android&&Xt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return Xt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=h0e.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||Unt.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,Dv(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!/^key/.test(t.type)||t.synthetic?!1:this.composing>0?!0:Xt.safari&&!Xt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function fpe(n,t){return(e,i)=>{try{return t.call(n,i,e)}catch(r){Il(e.state,r)}}}function Vnt(n){let t=Object.create(null);function e(i){return t[i]||(t[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let l=o[a];l&&e(a).handlers.push(fpe(i.value,l))}if(s)for(let a in s){let l=s[a];l&&e(a).observers.push(fpe(i.value,l))}}for(let i in Nd)e(i).handlers.push(Nd[i]);for(let i in Hc)e(i).observers.push(Hc[i]);return t}var h0e=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Unt="dthko",f0e=[16,17,18,20,91,92,224,225],dA=6;function uA(n){return Math.max(0,n)*.7+8}function jnt(n,t){return Math.max(Math.abs(n.clientX-t.clientX),Math.abs(n.clientY-t.clientY))}var jH=class{constructor(t,e,i,r){this.view=t,this.startEvent=e,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=ent(t.contentDOM),this.atoms=t.state.facet($S).map(s=>s(t));let o=t.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Jl.allowMultipleSelections)&&Hnt(t,e),this.dragging=znt(t,e)&&g0e(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&jnt(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=dW(this.view);t.clientX-l.left<=r+dA?e=-uA(r-t.clientX):t.clientX+l.right>=s-dA&&(e=uA(t.clientX-s)),t.clientY-l.top<=o+dA?i=-uA(o-t.clientY):t.clientY+l.bottom>=a-dA&&(i=uA(t.clientY-a)),this.setScrollSpeed(e,i)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}select(t){let{view:e}=this,i=a0e(this.atoms,this.style.get(t,this.extend,this.multiple));(this.mustSelect||!i.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}};function Hnt(n,t){let e=n.state.facet(Kpe);return e.length?e[0](t):Xt.mac?t.metaKey:t.ctrlKey}function Wnt(n,t){let e=n.state.facet(Gpe);return e.length?e[0](t):Xt.mac?!t.altKey:!t.ctrlKey}function znt(n,t){let{main:e}=n.state.selection;if(e.empty)return!1;let i=WS(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=t.clientX&&s.right>=t.clientX&&s.top<=t.clientY&&s.bottom>=t.clientY)return!0}return!1}function qnt(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,i;e!=n.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(i=Ko.get(e))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(t))return!1;return!0}var Nd=Object.create(null),Hc=Object.create(null),p0e=Xt.ie&&Xt.ie_version<15||Xt.ios&&Xt.webkit_version<604;function $nt(n){let t=n.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{n.focus(),e.remove(),m0e(n,e.value)},50)}function UA(n,t,e){for(let i of n.facet(t))e=i(e,n);return e}function m0e(n,t){t=UA(n.state,lW,t);let{state:e}=n,i,r=1,o=e.toText(t),s=o.lines==e.selection.ranges.length;if(HH!=null&&e.selection.ranges.every(l=>l.empty)&&HH==o.toString()){let l=-1;i=e.changeByRange(c=>{let d=e.doc.lineAt(c.from);if(d.from==l)return{range:c};l=d.from;let u=e.toText((s?o.line(r++).text:t)+e.lineBreak);return{changes:{from:d.from,insert:u},range:Dt.cursor(c.from+u.length)}})}else s?i=e.changeByRange(l=>{let c=o.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:Dt.cursor(l.from+c.length)}}):i=e.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Hc.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Nd.keydown=(n,t)=>(n.inputState.setSelectionOrigin("select"),t.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Hc.touchstart=(n,t)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Hc.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Nd.mousedown=(n,t)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let i of n.state.facet(Xpe))if(e=i(n,t),e)break;if(!e&&t.button==0&&(e=Gnt(n,t)),e){let i=!n.hasFocus;n.inputState.startMouseSelection(new jH(n,t,e,i)),i&&n.observer.ignore(()=>{Bpe(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(t),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function ppe(n,t,e,i){if(i==1)return Dt.cursor(t,e);if(i==2)return Ent(n.state,t,e);{let r=n.docView.lineAt(t,e),o=n.state.doc.lineAt(r?r.posAtEnd:t),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,Dt.range(s,a)}}var Knt=Xt.ie&&Xt.ie_version<=11,mpe=null,gpe=0,ype=0;function g0e(n){if(!Knt)return n.detail;let t=mpe,e=ype;return mpe=n,ype=Date.now(),gpe=!t||e>Date.now()-400&&Math.abs(t.clientX-n.clientX)<2&&Math.abs(t.clientY-n.clientY)<2?(gpe+1)%3:1}function Gnt(n,t){let e=n.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),i=g0e(t),r=n.state.selection;return{update(o){o.docChanged&&(e.pos=o.changes.mapPos(e.pos),r=r.map(o.changes))},get(o,s,a){let l=n.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),c,d=ppe(n,l.pos,l.assoc,i);if(e.pos!=l.pos&&!s){let u=ppe(n,e.pos,e.assoc,i),h=Math.min(u.from,d.from),f=Math.max(u.to,d.to);d=h<d.from?Dt.range(h,f):Dt.range(f,h)}return s?r.replaceRange(r.main.extend(d.from,d.to)):a&&i==1&&r.ranges.length>1&&(c=Xnt(r,l.pos))?c:a?r.addRange(d):Dt.create([d])}}}function Xnt(n,t){for(let e=0;e<n.ranges.length;e++){let{from:i,to:r}=n.ranges[e];if(i<=t&&r>=t)return Dt.create(n.ranges.slice(0,e).concat(n.ranges.slice(e+1)),n.mainIndex==e?0:n.mainIndex-(n.mainIndex>e?1:0))}return null}Nd.dragstart=(n,t)=>{let{selection:{main:e}}=n.state;if(t.target.draggable){let r=n.docView.tile.nearest(t.target);if(r&&r.isWidget()){let o=r.posAtStart,s=o+r.length;(o>=e.to||s<=e.from)&&(e=Dt.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",UA(n.state,cW,n.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};Nd.dragend=n=>(n.inputState.draggedContent=null,!1);function vpe(n,t,e,i){if(e=UA(n.state,lW,e),!e)return;let r=n.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&Wnt(n,t)?{from:o.from,to:o.to}:null,a={from:r,insert:e},l=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Nd.drop=(n,t)=>{if(!t.dataTransfer)return!1;if(n.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let i=Array(e.length),r=0,o=()=>{++r==e.length&&vpe(n,t,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<e.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(e[s])}return!0}else{let i=t.dataTransfer.getData("Text");if(i)return vpe(n,t,i,!0),!0}return!1};Nd.paste=(n,t)=>{if(n.state.readOnly)return!0;n.observer.flush();let e=p0e?null:t.clipboardData;return e?(m0e(n,e.getData("text/plain")||e.getData("text/uri-list")),!0):($nt(n),!1)};function Ynt(n,t){let e=n.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function Znt(n){let t=[],e=[],i=!1;for(let r of n.selection.ranges)r.empty||(t.push(n.sliceDoc(r.from,r.to)),e.push(r));if(!t.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(t.push(s.text),e.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:UA(n,cW,t.join(n.lineBreak)),ranges:e,linewise:i}}var HH=null;Nd.copy=Nd.cut=(n,t)=>{let{text:e,ranges:i,linewise:r}=Znt(n.state);if(!e&&!r)return!1;HH=r?e:null,t.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=p0e?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",e),!0):(Ynt(n,e),!1)};var y0e=Qu.define();function v0e(n,t){let e=[];for(let i of n.facet(Qpe)){let r=i(n,t);r&&e.push(r)}return e.length?n.update({effects:e,annotations:y0e.of(!0)}):null}function _0e(n){setTimeout(()=>{let t=n.hasFocus;if(t!=n.inputState.notifiedFocused){let e=v0e(n.state,t);e?n.dispatch(e):n.update([])}},10)}Hc.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),_0e(n)};Hc.blur=n=>{n.observer.clearSelectionRange(),_0e(n)};Hc.compositionstart=Hc.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Hc.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Xt.chrome&&Xt.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Hc.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Nd.beforeinput=(n,t)=>{var e,i;if((t.inputType=="insertText"||t.inputType=="insertCompositionText")&&(n.inputState.insertingText=t.data,n.inputState.insertingTextAt=Date.now()),t.inputType=="insertReplacementText"&&n.observer.editContext){let o=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),s=t.getTargetRanges();if(o&&s.length){let a=s[0],l=n.posAtDOM(a.startContainer,a.startOffset),c=n.posAtDOM(a.endContainer,a.endOffset);return uW(n,{from:l,to:c,insert:n.state.toText(o)},null),!0}}let r;if(Xt.chrome&&Xt.android&&(r=h0e.find(o=>o.inputType==t.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Xt.ios&&t.inputType=="deleteContentForward"&&n.observer.flushSoon(),Xt.safari&&t.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Hc.compositionend(n,t),20),!1};var _pe=new Set;function Qnt(n){_pe.has(n)||(_pe.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}var bpe=["pre-wrap","normal","pre-line","break-spaces"],Ov=!1;function wpe(){Ov=!1}var WH=class{constructor(t){this.lineWrapping=t,this.doc=cr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return bpe.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let i=0;i<t.length;i++){let r=t[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(e=!0,this.heightSamples[Math.floor(r*10)]=!0)}return e}refresh(t,e,i,r,o,s){let a=bpe.indexOf(t)>-1,l=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=e,this.charWidth=i,this.textHeight=r,this.lineLength=o,l){this.heightSamples={};for(let c=0;c<s.length;c++){let d=s[c];d<0?c++:this.heightSamples[Math.floor(d*10)]=!0}}return l}},zH=class{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}},Ld=class n{constructor(t,e,i,r,o){this.from=t,this.length=e,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Fl.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof G1?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new n(this.from,this.length+t.length,this.top,this.height+t.height,e)}},ao=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(ao||(ao={})),bA=.001,tc=class n{constructor(t,e,i=2){this.length=t,this.height=e,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>bA&&(Ov=!0),this.height=t)}replace(t,e,i){return n.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:d,toB:u}=r[a],h=o.lineAt(l,ao.ByPosNoHeight,i.setDoc(e),0,0),f=h.to>=c?h:o.lineAt(c,ao.ByPosNoHeight,i,0,0);for(u+=f.to-c,c=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,d=r[a-1].fromB,a--,l<h.from&&(h=o.lineAt(l,ao.ByPosNoHeight,i,0,0));d+=h.from-l,l=h.from;let p=$H.build(i.setDoc(s),t,d,u);o=AA(o,o.replace(l,c,p))}return o.updateHeight(i,0)}static empty(){return new Uc(0,0,0)}static of(t){if(t.length==1)return t[0];let e=0,i=t.length,r=0,o=0;for(;;)if(e==i)if(r>o*2){let a=t[e-1];a.break?t.splice(--e,1,a.left,null,a.right):t.splice(--e,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=t[i];a.break?t.splice(i,1,a.left,null,a.right):t.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=t[e++];a&&(r+=a.size)}else{let a=t[--i];a&&(o+=a.size)}let s=0;return t[e-1]==null?(s=1,e--):t[e]==null&&(s=1,i++),new qH(n.of(t.slice(0,e)),s,n.of(t.slice(i)))}};function AA(n,t){return n==t?n:(n.constructor!=t.constructor&&(Ov=!0),t)}tc.prototype.size=1;var Jnt=Vr.replace({}),DA=class extends tc{constructor(t,e,i){super(t,e),this.deco=i,this.spaceAbove=0}mainBlock(t,e){return new Ld(e,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(t,e,i,r){return this.spaceAbove&&t<i+this.spaceAbove?new Ld(r,0,i,this.spaceAbove,Jnt):this.mainBlock(i,r)}lineAt(t,e,i,r,o){let s=this.mainBlock(r,o);return this.spaceAbove?this.blockAt(0,i,r,o).join(s):s}forEachLine(t,e,i,r,o,s){t<=o+this.length&&e>=o&&s(this.lineAt(0,ao.ByPos,i,r,o))}setMeasuredHeight(t){let e=t.heights[t.index++];e<0?(this.spaceAbove=-e,e=t.heights[t.index++]):this.spaceAbove=0,this.setHeight(e)}updateHeight(t,e=0,i=!1,r){return r&&r.from<=e&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}},Uc=class n extends DA{constructor(t,e,i){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(t,e){return new Ld(e,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(t,e,i){let r=i[0];return i.length==1&&(r instanceof n||r instanceof v0&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof v0?r=new n(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):tc.of(i)}updateHeight(t,e=0,i=!1,r){return r&&r.from<=e&&r.more?this.setMeasuredHeight(r):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},v0=class n extends tc{constructor(t){super(t,0)}heightMetrics(t,e){let i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s,a=0;if(t.lineWrapping){let l=Math.min(this.height,t.lineHeight*o);s=l/o,this.length>o+1&&(a=(this.height-l)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(t,e,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:l}=this.heightMetrics(e,r);if(e.lineWrapping){let c=r+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-i)/this.height))*this.length)),d=e.doc.lineAt(c),u=a+d.length*l,h=Math.max(i,t-u/2);return new Ld(d.from,d.length,h,u,0)}else{let c=Math.max(0,Math.min(s-o,Math.floor((t-i)/a))),{from:d,length:u}=e.doc.line(o+c);return new Ld(d,u,i+a*c,a,0)}}lineAt(t,e,i,r,o){if(e==ao.ByHeight)return this.blockAt(t,i,r,o);if(e==ao.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(t);return new Ld(f,p-f,0,0,0)}let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(i,o),c=i.doc.lineAt(t),d=a+c.length*l,u=c.number-s,h=r+a*u+l*(c.from-o-u);return new Ld(c.from,c.length,Math.max(r,Math.min(h,r+this.height-d)),d,0)}forEachLine(t,e,i,r,o,s){t=Math.max(t,o),e=Math.min(e,o+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,o);for(let d=t,u=r;d<=e;){let h=i.doc.lineAt(d);if(d==t){let p=h.number-a;u+=l*p+c*(t-o-p)}let f=l+c*h.length;s(new Ld(h.from,h.length,u,f,0)),u+=f,d=h.to+1}}replace(t,e,i){let r=this.length-e;if(r>0){let o=i[i.length-1];o instanceof n?i[i.length-1]=new n(o.length+r):i.push(null,new n(r-1))}if(t>0){let o=i[0];o instanceof n?i[0]=new n(t+o.length):i.unshift(new n(t-1),null)}return tc.of(i)}decomposeLeft(t,e){e.push(new n(t-1),null)}decomposeRight(t,e){e.push(null,new n(this.length-t-1))}updateHeight(t,e=0,i=!1,r){let o=e+this.length;if(r&&r.from<=e+this.length&&r.more){let s=[],a=Math.max(e,r.from),l=-1;for(r.from>e&&s.push(new n(r.from-e-1).updateHeight(t,e));a<=o&&r.more;){let d=t.doc.lineAt(a).length;s.length&&s.push(null);let u=r.heights[r.index++],h=0;u<0&&(h=-u,u=r.heights[r.index++]),l==-1?l=u:Math.abs(u-l)>=bA&&(l=-2);let f=new Uc(d,u,h);f.outdated=!1,s.push(f),a+=d+1}a<=o&&s.push(null,new n(o-a).updateHeight(t,a));let c=tc.of(s);return(l<0||Math.abs(c.height-this.height)>=bA||Math.abs(l-this.heightMetrics(t,e).perLine)>=bA)&&(Ov=!0),AA(this,c)}else(i||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},qH=class extends tc{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return this.flags&1}blockAt(t,e,i,r){let o=i+this.left.height;return t<o?this.left.blockAt(t,e,i,r):this.right.blockAt(t,e,o,r+this.left.length+this.break)}lineAt(t,e,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,l=e==ao.ByHeight?t<s:t<a,c=l?this.left.lineAt(t,e,i,r,o):this.right.lineAt(t,e,i,s,a);if(this.break||(l?c.to<a:c.from>a))return c;let d=e==ao.ByPosNoHeight?ao.ByPosNoHeight:ao.ByPos;return l?c.join(this.right.lineAt(a,d,i,s,a)):this.left.lineAt(a,d,i,r,o).join(c)}forEachLine(t,e,i,r,o,s){let a=r+this.left.height,l=o+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,e,i,r,o,s),e>=l&&this.right.forEachLine(t,e,i,a,l,s);else{let c=this.lineAt(l,ao.ByPos,i,r,o);t<c.from&&this.left.forEachLine(t,c.from-1,i,r,o,s),c.to>=t&&c.from<=e&&s(c),e>c.to&&this.right.forEachLine(c.to+1,e,i,a,l,s)}}replace(t,e,i){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,i));let o=[];t>0&&this.decomposeLeft(t,o);let s=o.length;for(let a of i)o.push(a);if(t>0&&Spe(o,s-1),e<this.length){let a=o.length;this.decomposeRight(e,o),Spe(o,a)}return tc.of(o)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(i++,t>=i&&e.push(null)),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,r=i+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?tc.of(this.break?[t,null,e]:[t,e]):(this.left=AA(this.left,t),this.right=AA(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,i=!1,r){let{left:o,right:s}=this,a=e+o.length+this.break,l=null;return r&&r.from<=e+o.length&&r.more?l=o=o.updateHeight(t,e,i,r):o.updateHeight(t,e,i),r&&r.from<=a+s.length&&r.more?l=s=s.updateHeight(t,a,i,r):s.updateHeight(t,a,i),l?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function Spe(n,t){let e,i;n[t]==null&&(e=n[t-1])instanceof v0&&(i=n[t+1])instanceof v0&&n.splice(t-1,3,new v0(e.length+1+i.length))}var eit=5,$H=class n{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let i=Math.min(e,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Uc?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Uc(i-this.pos,-1,0)),this.writtenTo=i,e>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=e-t;i.block?this.addBlock(new DA(s,r,i)):(s||o||r>=eit)&&this.addLineDeco(r,o,s)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Uc(this.pos-t,-1,0)),this.writtenTo=this.pos}blankContent(t,e){let i=new v0(e-t);return this.oracle.doc.lineAt(t).to==e&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Uc)return t;let e=new Uc(0,-1,0);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,t),r.breaks+=e,this.writtenTo=this.pos=this.pos+i}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof Uc)&&!this.isCovered?this.nodes.push(new Uc(0,-1,0)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=t;for(let r of this.nodes)r instanceof Uc&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(t,e,i,r){let o=new n(i,t);return Zr.spans(e,i,r,o,0),o.finish(i)}};function tit(n,t,e){let i=new KH;return Zr.compare(n,t,e,i,0),i.changes}var KH=class{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,r){(t<e||i&&i.heightRelevant||r&&r.heightRelevant)&&Av(t,e,this.changes,5)}};function nit(n,t){let e=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,e.left),s=Math.min(r.innerWidth,e.right),a=Math.max(0,e.top),l=Math.min(r.innerHeight,e.bottom);for(let c=n.parentNode;c&&c!=i.body;)if(c.nodeType==1){let d=c,u=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&u.overflow!="visible"){let h=d.getBoundingClientRect();o=Math.max(o,h.left),s=Math.min(s,h.right),a=Math.max(a,h.top),l=Math.min(c==n.parentNode?r.innerHeight:l,h.bottom)}c=u.position=="absolute"||u.position=="fixed"?d.offsetParent:d.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-e.left,right:Math.max(o,s)-e.left,top:a-(e.top+t),bottom:Math.max(a,l)-(e.top+t)}}function iit(n){let t=n.getBoundingClientRect(),e=n.ownerDocument.defaultView||window;return t.left<e.innerWidth&&t.right>0&&t.top<e.innerHeight&&t.bottom>0}function rit(n,t){let e=n.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}var BS=class{constructor(t,e,i,r){this.from=t,this.to=e,this.size=i,this.displaySize=r}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(t,e){return Vr.replace({widget:new GH(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}},GH=class extends gf{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}},IA=class{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Cpe,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=go.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(EH).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new WH(e),this.stateDeco=t.facet(qS).filter(i=>typeof i!="function"),this.heightMap=tc.empty().applyChanges(this.stateDeco,cr.empty,this.heightOracle.setDoc(t.doc),[new Od(0,0,0,t.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Vr.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let i=0;i<=1;i++){let r=i?e.head:e.anchor;if(!t.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);t.push(new Mv(o,s))}}return this.viewports=t.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?Cpe:new XH(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(FS(t,this.scaler))})}update(t,e=null){this.state=t.state;let i=this.stateDeco;this.stateDeco=this.state.facet(qS).filter(d=>typeof d!="function");let r=t.changedRanges,o=Od.extendWithRanges(r,tit(i,this.stateDeco,t?t.changes:Al.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);wpe(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||Ov)&&(t.flags|=2),a?(this.scrollAnchorPos=t.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let l=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<l.from||e.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,e));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,t.flags|=this.updateForViewport(),(c||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(hnt)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,i=window.getComputedStyle(e),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?go.RTL:go.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=e.getBoundingClientRect(),l=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,d=0;if(a.width&&a.height){let{scaleX:k,scaleY:L}=Npe(e,a);(k>.005&&Math.abs(this.scaleX-k)>.005||L>.005&&Math.abs(this.scaleY-L)>.005)&&(this.scaleX=k,this.scaleY=L,c|=16,s=l=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=h)&&(this.paddingTop=u,this.paddingBottom=h,c|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,c|=16);let f=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=Vpe(t.scrollDOM);let p=(this.printing?rit:nit)(e,this.paddingTop),y=p.top-this.pixelViewport.top,v=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(l=!0)),!this.inView&&!this.scrollTarget&&!iit(t.dom))return 0;let S=a.width;if((this.contentDOMWidth!=S||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=t.scrollDOM.clientHeight,c|=16),l){let k=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(s=!0),s||r.lineWrapping&&Math.abs(S-this.contentDOMWidth)>r.charWidth){let{lineHeight:L,charWidth:D,textHeight:V}=t.docView.measureTextSize();s=L>0&&r.refresh(o,L,D,V,Math.max(5,S/D),k),s&&(t.docView.minWidth=0,c|=16)}y>0&&v>0?d=Math.max(y,v):y<0&&v<0&&(d=Math.min(y,v)),wpe();for(let L of this.viewports){let D=L.from==this.viewport.from?k:t.docView.measureVisibleLineHeights(L);this.heightMap=(s?tc.empty().applyChanges(this.stateDeco,cr.empty,this.heightOracle,[new Od(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new zH(L.from,D))}Ov&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,t)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,l=new Mv(r.lineAt(s-i*1e3,ao.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,ao.ByHeight,o,0,0).to);if(e){let{head:c}=e.range;if(c<l.from||c>l.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=r.lineAt(c,ao.ByPos,o,0,0),h;e.y=="center"?h=(u.top+u.bottom)/2-d/2:e.y=="start"||e.y=="nearest"&&c<l.from?h=u.top:h=u.bottom-d,l=new Mv(r.lineAt(h-1e3/2,ao.ByHeight,o,0,0).from,r.lineAt(h+d+1e3/2,ao.ByHeight,o,0,0).to)}}return l}mapViewport(t,e){let i=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new Mv(this.heightMap.lineAt(i,ao.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,ao.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,ao.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(e,ao.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(t==0||r<=s-Math.max(10,Math.min(-i,250)))&&(e==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let i=[];for(let r of t)e.touchesRange(r.from,r.to)||i.push(new BS(e.mapPos(r.from),e.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(t,e){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=go.LTR&&!i)return[];let a=[],l=(d,u,h,f)=>{if(u-d<o)return;let p=this.state.selection.main,y=[p.from];p.empty||y.push(p.to);for(let b of y)if(b>d&&b<u){l(d,b-10,h,f),l(b+10,u,h,f);return}let v=sit(t,b=>b.from>=h.from&&b.to<=h.to&&Math.abs(b.from-d)<o&&Math.abs(b.to-u)<o&&!y.some(S=>b.from<S&&b.to>S));if(!v){if(u<h.to&&e&&i&&e.visibleRanges.some(x=>x.from<=u&&x.to>=u)){let x=e.moveToLineBoundary(Dt.cursor(u),!1,!0).head;x>d&&(u=x)}let b=this.gapSize(h,d,u,f),S=i||b<2e6?b:2e6;v=new BS(d,u,b,S)}a.push(v)},c=d=>{if(d.length<s||d.type!=Fl.Text)return;let u=oit(d.from,d.to,this.stateDeco);if(u.total<s)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(i){let y=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,b;if(h!=null){let S=fA(u,h),x=((this.visibleBottom-this.visibleTop)/2+y)/d.height;v=S-x,b=S+x}else v=(this.visibleTop-d.top-y)/d.height,b=(this.visibleBottom-d.top+y)/d.height;f=hA(u,v),p=hA(u,b)}else{let y=u.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,b=0;if(y>2e6)for(let D of t)D.from>=d.from&&D.from<d.to&&D.size!=D.displaySize&&D.from*this.heightOracle.charWidth+b<this.pixelViewport.left&&(b=D.size-D.displaySize);let S=this.pixelViewport.left+b,x=this.pixelViewport.right+b,k,L;if(h!=null){let D=fA(u,h),V=((x-S)/2+v)/y;k=D-V,L=D+V}else k=(S-v)/y,L=(x+v)/y;f=hA(u,k),p=hA(u,L)}f>d.from&&l(d.from,f,d,u),p<d.to&&l(p,d.to,d,u)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(c):c(d);return a}gapSize(t,e,i,r){let o=fA(r,i)-fA(r,e);return this.heightOracle.lineWrapping?t.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(t){BS.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Vr.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];Zr.spans(e,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,t&&t.mapPos(s.from,-1)==a.from&&t.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||FS(this.heightMap.lineAt(t,ao.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||FS(this.heightMap.lineAt(this.scaler.fromDOM(t),ao.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return FS(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},Mv=class{constructor(t,e){this.from=t,this.to=e}};function oit(n,t,e){let i=[],r=n,o=0;return Zr.spans(e,n,t,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<t&&(i.push({from:r,to:t}),o+=t-r),{total:o,ranges:i}}function hA({total:n,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let i=Math.floor(n*e);for(let r=0;;r++){let{from:o,to:s}=t[r],a=s-o;if(i<=a)return o+i;i-=a}}function fA(n,t){let e=0;for(let{from:i,to:r}of n.ranges){if(t<=r){e+=t-i;break}e+=r-i}return e/n.total}function sit(n,t){for(let e of n)if(t(e))return e}var Cpe={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}},XH=class n{constructor(t,e,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:l})=>{let c=e.lineAt(a,ao.ByPos,t,0,0).top,d=e.lineAt(l,ao.ByPos,t,0,0).bottom;return r+=d-c,{from:a,to:l,top:c,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(e.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(t){for(let e=0,i=0,r=0;;e++){let o=e<this.viewports.length?this.viewports[e]:null;if(!o||t<o.top)return r+(t-i)*this.scale;if(t<=o.bottom)return o.domTop+(t-o.top);i=o.bottom,r=o.domBottom}}fromDOM(t){for(let e=0,i=0,r=0;;e++){let o=e<this.viewports.length?this.viewports[e]:null;if(!o||t<o.domTop)return i+(t-r)/this.scale;if(t<=o.domBottom)return o.top+(t-o.domTop);i=o.bottom,r=o.domBottom}}eq(t){return t instanceof n?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,i)=>e.from==t.viewports[i].from&&e.to==t.viewports[i].to):!1}};function FS(n,t){if(t.scale==1)return n;let e=t.toDOM(n.top),i=t.toDOM(n.bottom);return new Ld(n.from,n.length,e,i-e,Array.isArray(n._content)?n._content.map(r=>FS(r,t)):n._content)}var pA=on.define({combine:n=>n.join(" ")}),pH=on.define({combine:n=>n.indexOf(!0)>-1}),YH=Vc.newName(),b0e=Vc.newName(),w0e=Vc.newName(),S0e={"&light":"."+b0e,"&dark":"."+w0e};function ZH(n,t,e){return new Vc(t,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!e||!e[r])throw new RangeError(`Unsupported selector: ${r}`);return e[r]}):n+" "+i}})}var ait=ZH("."+YH,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},S0e),lit={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},mH=Xt.ie&&Xt.ie_version<=11,QH=class{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new xH,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let i of e)this.queue.push(i);(Xt.ie&&Xt.ie_version<=11||Xt.ios&&t.composing)&&e.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Xt.android&&t.constructor.EDIT_CONTEXT!==!1&&!(Xt.chrome&&Xt.chrome_version<126)&&(this.editContext=new JH(t),t.state.facet(mf)&&(t.contentDOM.editContext=this.editContext.editContext)),mH&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,i)=>e!=t[i]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(mf)?i.root.activeElement!=this.dom:!vA(this.dom,r))return;let o=r.anchorNode&&i.docView.tile.nearest(r.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(Xt.ie&&Xt.ie_version<=11||Xt.android&&Xt.chrome)&&!i.state.selection.main.empty&&r.focusNode&&PS(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=WS(t.root);if(!e)return!1;let i=Xt.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&cit(this.view,e)||e;if(!i||this.selectionRange.eq(i))return!1;let r=vA(this.dom,i);return r&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&nnt(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(i.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=e)i.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,lit),mH&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),mH&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Dv(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,i=-1,r=!1;for(let o of t){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),e==-1?{from:e,to:i}=s:(e=Math.min(s.from,e),i=Math.max(s.to,i)))}return{from:e,to:i,typeOver:r}}readChange(){let{from:t,to:e,typeOver:i}=this.processRecords(),r=this.selectionChanged&&vA(this.dom,this.selectionRange);if(t<0&&!r)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new VH(this.view,t,e,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let i=this.view.state,r=d0e(this.view,e);return this.view.state==i&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(t){let e=this.view.docView.tile.nearest(t.target);if(!e||e.isWidget())return null;if(e.markDirty(t.type=="attributes"),t.type=="childList"){let i=xpe(e,t.previousSibling||t.target.previousSibling,-1),r=xpe(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(mf)!=t.state.facet(mf)&&(t.view.contentDOM.editContext=t.state.facet(mf)?this.editContext.editContext:null))}destroy(){var t,e,i;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function xpe(n,t,e){for(;t;){let i=Ko.get(t);if(i&&i.parent==n)return i;let r=t.parentNode;t=r!=n.dom?r:e>0?t.nextSibling:t.previousSibling}return null}function kpe(n,t){let e=t.startContainer,i=t.startOffset,r=t.endContainer,o=t.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor,1);return PS(s.node,s.offset,r,o)&&([e,i,r,o]=[r,o,e,i]),{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:o}}function cit(n,t){if(t.getComposedRanges){let r=t.getComposedRanges(n.root)[0];if(r)return kpe(n,r)}let e=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),e=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),e?kpe(n,e):null}var JH=class{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=i=>{let r=t.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c=l-a>i.text.length;a==this.from&&o<this.from?a=o:l==this.to&&o>this.to&&(l=o);let d=u0e(t.state.sliceDoc(a,l),i.text,(c?r.from:r.to)-a,c?"end":null);if(!d){let h=Dt.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(r)||t.dispatch({selection:h,userEvent:"select"});return}let u={from:d.from+a,to:d.toA+a,insert:cr.of(i.text.slice(d.from,d.toB).split(`
`))};if((Xt.mac||Xt.android)&&u.from==s-1&&/^\. ?$/.test(i.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:a,to:l,insert:cr.of([i.text.replace("."," ")])}),this.pendingContextChange=u,!t.state.readOnly){let h=this.to-this.from+(u.to-u.from+u.insert.length);uW(t,u,Dt.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)),u.from<u.to&&!u.insert.length&&t.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(e.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(e.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let l=t.coordsForChar(s);o=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||o||new DOMRect,r.push(o)}e.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let l=this.toEditorPos(o.rangeStart),c=this.toEditorPos(o.rangeEnd);if(l<c){let d=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(Vr.mark({attributes:{style:d}}).range(l,c))}}}t.dispatch({effects:e0e.of(Vr.set(r))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(t.state)}};for(let i in this.handlers)e.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=WS(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,i=!1,r=this.pendingContextChange;return t.changes.iterChanges((o,s,a,l,c)=>{if(i)return;let d=c.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(c)){r=this.pendingContextChange=null,e+=d,this.to+=d;return}else r=null,this.revertPending(t.state);if(o+=e,s+=e,s<=this.from)this.from+=d,this.to+=d;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),c.toString()),this.to+=d}e+=d}),r&&!i&&this.revertPending(t.state),!i}update(t){let e=this.pendingContextChange,i=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(i.from,i.to)&&t.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),r=this.toContextPos(e.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let i=this.composing;return i&&i.drifted?i.editorBase+(t-i.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}},lo=(()=>{class n{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var i;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(o=>o.forEach(s=>r(s,this)))||(o=>this.update(o)),this.dispatch=this.dispatch.bind(this),this._root=e.root||tnt(e.parent)||document,this.viewState=new IA(e.state||Jl.create(e)),e.scrollTo&&e.scrollTo.is(cA)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(kv).map(o=>new RS(o));for(let o of this.plugins)o.update(this);this.observer=new QH(this),this.inputState=new UH(this),this.inputState.ensureHandlers(this.plugins),this.docView=new TA(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((i=document.fonts)===null||i===void 0)&&i.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let i=e.length==1&&e[0]instanceof hf?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,r=!1,o,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,l=0,c=null;e.some(f=>f.annotation(y0e))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,c=v0e(s,a),c||(l=1));let d=this.observer.delayedAndroidKey,u=null;if(d?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Jl.phrases)!=this.state.facet(Jl.phrases))return this.setState(s);o=kA.create(this,s,e),o.flags|=l;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;h=new LS(p.empty?p:Dt.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(cA)&&(h=p.value.clip(this.state))}this.viewState.update(o,h),this.bidiCache=FA.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),i=this.docView.update(o),this.state.facet(DS)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(pA)!=o.state.facet(pA)&&(this.viewState.mustMeasureContent=!0),(i||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!o.empty)for(let f of this.state.facet(dH))try{f(o)}catch(p){Il(this.state,p,"update listener")}(c||u)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),u&&!d0e(this,u)&&d.force&&Dv(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new IA(e),this.plugins=e.facet(kv).map(r=>new RS(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new TA(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(kv),r=e.state.facet(kv);if(i!=r){let o=[];for(let s of r){let a=i.indexOf(s);if(a<0)o.push(new RS(s));else{let l=this.plugins[a];l.mustUpdate=e,o.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this);i!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let i=e.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(r){Il(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,r=this.scrollDOM,o=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(a<0)if(Vpe(r))s=-1,a=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(o);s=p.from,a=p.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];c&4||([this.measureRequests,d]=[d,this.measureRequests]);let u=d.map(p=>{try{return p.read(this)}catch(y){return Il(this.state,y),Mpe}}),h=kA.create(this,this.state,[]),f=!1;h.flags|=c,i?i.flags|=c:i=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let p=0;p<d.length;p++)if(u[p]!=Mpe)try{let y=d[p];y.write&&y.write(u[p],this)}catch(y){Il(this.state,y)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let y=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(y>1||y<-1){o=o+y,r.scrollTop=o/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let l of this.state.facet(dH))l(i)}get themeClasses(){return YH+" "+(this.state.facet(pH)?w0e:b0e)+" "+this.state.facet(pA)}updateAttrs(){let e=Tpe(this,spe,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(mf)?"true":"false",class:"cm-content",style:`${Xt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),Tpe(this,EH,i);let r=this.observer.ignore(()=>{let o=npe(this.contentDOM,this.contentAttrs,i),s=npe(this.dom,this.editorAttrs,e);return o||s});return this.editorAttrs=e,this.contentAttrs=i,r}showAnnouncements(e){let i=!0;for(let r of e)for(let o of r.effects)if(o.is(n.announce)){i&&(this.announceDOM.textContent=""),i=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(DS);let e=this.state.facet(n.cspNonce);Vc.mount(this.root,this.styleModules.concat(ait).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.plugin!=e)&&this.pluginMap.set(e,i=this.plugins.find(r=>r.plugin==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,r){return fH(this,e,upe(this,e,i,r))}moveByGroup(e,i){return fH(this,e,upe(this,e,i,r=>Fnt(this,e.head,r)))}visualLineSide(e,i){let r=this.bidiSpans(e),o=this.textDirectionAt(e.from),s=r[i?r.length-1:0];return Dt.cursor(s.side(i,o)+e.from,s.forward(!i,o)?1:-1)}moveToLineBoundary(e,i,r=!0){return Int(this,e,i,r)}moveVertically(e,i,r){return fH(this,e,Pnt(this,e,i,r))}domAtPos(e,i=1){return this.docView.domAtPos(e,i)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){this.readMeasured();let r=NH(this,e,i);return r&&r.pos}posAndSideAtCoords(e,i=!0){return this.readMeasured(),NH(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let r=this.docView.coordsAt(e,i);if(!r||r.left==r.right)return r;let o=this.state.doc.lineAt(e),s=this.bidiSpans(o),a=s[Rd.find(s,e-o.from,-1,i)];return xA(r,a.dir==go.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ope)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>dit)return qpe(e.length);let i=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==i&&(s.fresh||zpe(s.isolates,r=ape(this,e))))return s.order;r||(r=ape(this,e));let o=cnt(e.text,i,r);return this.bidiCache.push(new FA(e.from,e.to,i,r,!0,o)),o}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Xt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Bpe(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return cA.of(new LS(typeof e=="number"?Dt.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:i}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return cA.of(new LS(Dt.cursor(r.from),"start","start",r.top-e,i,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return nc.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return nc.define(()=>({}),{eventObservers:e})}static theme(e,i){let r=Vc.newName(),o=[pA.of(r),DS.of(ZH(`.${r}`,e))];return i&&i.dark&&o.push(pH.of(!0)),o}static baseTheme(e){return AS.lowest(DS.of(ZH("."+YH,e,S0e)))}static findFromDOM(e){var i;let r=e.querySelector(".cm-content"),o=r&&Ko.get(r)||Ko.get(e);return((i=o?.root)===null||i===void 0?void 0:i.view)||null}}return n.styleModule=DS,n.inputHandler=Zpe,n.clipboardInputFilter=lW,n.clipboardOutputFilter=cW,n.scrollHandler=Jpe,n.focusChangeEffect=Qpe,n.perLineTextDirection=ope,n.exceptionSink=Ype,n.updateListener=dH,n.editable=mf,n.mouseSelectionStyle=Xpe,n.dragMovesSelection=Gpe,n.clickAddsSelectionRange=Kpe,n.decorations=qS,n.blockWrappers=t0e,n.outerDecorations=n0e,n.atomicRanges=$S,n.bidiIsolatedRanges=i0e,n.scrollMargins=r0e,n.darkTheme=pH,n.cspNonce=on.define({combine:t=>t.length?t[0]:""}),n.contentAttributes=EH,n.editorAttributes=spe,n.lineWrapping=n.contentAttributes.of({class:"cm-lineWrapping"}),n.announce=wo.define(),n})(),dit=4096,Mpe={},FA=class n{constructor(t,e,i,r,o,s){this.from=t,this.to=e,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(t,e){if(e.empty&&!t.some(o=>o.fresh))return t;let i=[],r=t.length?t[t.length-1].dir:go.LTR;for(let o=Math.max(0,t.length-10);o<t.length;o++){let s=t[o];s.dir==r&&!e.touchesRange(s.from,s.to)&&i.push(new n(e.mapPos(s.from,1),e.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}};function Tpe(n,t,e){for(let i=n.state.facet(t),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&oW(s,e)}return e}var uit=Xt.mac?"mac":Xt.windows?"win":Xt.linux?"linux":"key";function hit(n,t){let e=n.split(/-(?!$)/),i=e[e.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let l=0;l<e.length-1;++l){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))t=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function mA(n,t,e){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e!==!1&&t.shiftKey&&(n="Shift-"+n),n}var fit=AS.default(lo.domEventHandlers({keydown(n,t){return yit(pit(t.state),n,t,"editor")}})),hW=on.define({enables:fit}),Epe=new WeakMap;function pit(n){let t=n.facet(hW),e=Epe.get(t);return e||Epe.set(t,e=git(t.reduce((i,r)=>i.concat(r),[]))),e}var g0=null,mit=4e3;function git(n,t=uit){let e=Object.create(null),i=Object.create(null),r=(s,a)=>{let l=i[s];if(l==null)i[s]=a;else if(l!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,l,c,d)=>{var u,h;let f=e[s]||(e[s]=Object.create(null)),p=a.split(/ (?!$)/).map(b=>hit(b,t));for(let b=1;b<p.length;b++){let S=p.slice(0,b).join(" ");r(S,!0),f[S]||(f[S]={preventDefault:!0,stopPropagation:!1,run:[x=>{let k=g0={view:x,prefix:S,scope:s};return setTimeout(()=>{g0==k&&(g0=null)},mit),!0}]})}let y=p.join(" ");r(y,!1);let v=f[y]||(f[y]={preventDefault:!1,stopPropagation:!1,run:((h=(u=f._any)===null||u===void 0?void 0:u.run)===null||h===void 0?void 0:h.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),d&&(v.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let c of a){let d=e[c]||(e[c]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=s;for(let h in d)d[h].run.push(f=>u(f,eW))}let l=s[t]||s.key;if(l)for(let c of a)o(c,l,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(c,"Shift-"+l,s.shift,s.preventDefault,s.stopPropagation)}return e}var eW=null;function yit(n,t,e,i){eW=t;let r=Zfe(t),o=Nfe(r,0),s=Bfe(o)==r.length&&r!=" ",a="",l=!1,c=!1,d=!1;g0&&g0.view==e&&g0.scope==i&&(a=g0.prefix+" ",f0e.indexOf(t.keyCode)<0&&(c=!0,g0=null));let u=new Set,h=v=>{if(v){for(let b of v.run)if(!u.has(b)&&(u.add(b),b(e)))return v.stopPropagation&&(d=!0),!0;v.preventDefault&&(v.stopPropagation&&(d=!0),c=!0)}return!1},f=n[i],p,y;return f&&(h(f[a+mA(r,t,!s)])?l=!0:s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(Xt.windows&&t.ctrlKey&&t.altKey)&&!(Xt.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&(p=pf[t.keyCode])&&p!=r?(h(f[a+mA(p,t,!0)])||t.shiftKey&&(y=xv[t.keyCode])!=r&&y!=p&&h(f[a+mA(y,t,!1)]))&&(l=!0):s&&t.shiftKey&&h(f[a+mA(r,t,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),c&&(l=!0),l&&d&&t.stopPropagation(),eW=null,l}var gqt=/x/.unicode!=null?"gu":"g";var gA="-10000px",PA=class{constructor(t,e,i,r){this.facet=e,this.createTooltipView=i,this.removeTooltipView=r,this.input=t.state.facet(e),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(t,e){var i;let r=t.state.facet(this.facet),o=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(t);return!1}let s=[],a=e?[]:null;for(let l=0;l<o.length;l++){let c=o[l],d=-1;if(c){for(let u=0;u<this.tooltips.length;u++){let h=this.tooltips[u];h&&h.create==c.create&&(d=u)}if(d<0)s[l]=this.createTooltipView(c,l?s[l-1]:null),a&&(a[l]=!!c.above);else{let u=s[l]=this.tooltipViews[d];a&&(a[l]=e[d]),u.update&&u.update(t)}}}for(let l of this.tooltipViews)s.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return e&&(a.forEach((l,c)=>e[c]=l),e.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}};function vit(n){let t=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}var gH=on.define({combine:n=>{var t,e,i;return{position:Xt.ios?"absolute":((t=n.find(r=>r.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=n.find(r=>r.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||vit}}}),Ape=new WeakMap,C0e=nc.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=n.state.facet(gH);this.position=t.position,this.parent=t.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new PA(n,jA,(e,i)=>this.createTooltip(e,i),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(n,this.above);t&&this.observeIntersection();let e=t||n.geometryChanged,i=n.state.facet(gH);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;e=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(n,t){let e=n.create(this.view),i=t?t.dom:null;if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",e.dom.appendChild(r)}return e.dom.style.position=this.position,e.dom.style.top=gA,e.dom.style.left="0px",this.container.insertBefore(e.dom,i),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var n,t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,t=1,e=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Xt.safari){let s=o.getBoundingClientRect();e=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}else e=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(e||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,t=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:t}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=dW(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(gH).tooltipSpace(this.view),scaleX:n,scaleY:t,makeAbsolute:e}}writeMeasure(n){var t;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:e,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:d}=c,u=n.pos[a],h=n.size[a];if(!u||l.clip!==!1&&(u.bottom<=Math.max(e.top,i.top)||u.top>=Math.min(e.bottom,i.bottom)||u.right<Math.max(e.left,i.left)-.1||u.left>Math.min(e.right,i.right)+.1)){d.style.top=gA;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,y=h.right-h.left,v=(t=Ape.get(c))!==null&&t!==void 0?t:h.bottom-h.top,b=c.offset||bit,S=this.view.textDirection==go.LTR,x=h.width>i.right-i.left?S?i.left:i.right-h.width:S?Math.max(i.left,Math.min(u.left-(f?14:0)+b.x,i.right-y)):Math.min(Math.max(i.left,u.left-y+(f?14:0)-b.x),i.right-y),k=this.above[a];!l.strictSide&&(k?u.top-v-p-b.y<i.top:u.bottom+v+p+b.y>i.bottom)&&k==i.bottom-u.bottom>u.top-i.top&&(k=this.above[a]=!k);let L=(k?u.top-i.top:i.bottom-u.bottom)-p;if(L<v&&c.resize!==!1){if(L<this.view.defaultLineHeight){d.style.top=gA;continue}Ape.set(c,v),d.style.height=(v=L)/o+"px"}else d.style.height&&(d.style.height="");let D=k?u.top-v-p-b.y:u.bottom+p+b.y,V=x+y;if(c.overlap!==!0)for(let O of s)O.left<V&&O.right>x&&O.top<D+v&&O.bottom>D&&(D=k?O.top-v-2-p:O.bottom+p+2);if(this.position=="absolute"?(d.style.top=(D-n.parent.top)/o+"px",Dpe(d,(x-n.parent.left)/r)):(d.style.top=D/o+"px",Dpe(d,x/r)),f){let O=u.left+(S?b.x:-b.x)-(x+14-7);f.style.left=O/r+"px"}c.overlap!==!0&&s.push({left:x,top:D,right:V,bottom:D+v}),d.classList.toggle("cm-tooltip-above",k),d.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=gA}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Dpe(n,t){let e=parseInt(n.style.left,10);(isNaN(e)||Math.abs(t-e)>1)&&(n.style.left=t+"px")}var _it=lo.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),bit={x:0,y:0},jA=on.define({enables:[C0e,_it]}),LA=on.define({combine:n=>n.reduce((t,e)=>t.concat(e),[])}),RA=class n{static create(t){return new n(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new PA(t,LA,(e,i)=>this.createHostedView(e,i),e=>e.dom.remove())}createHostedView(t,e){let i=t.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)(t=e.destroy)===null||t===void 0||t.call(e)}passProp(t){let e;for(let i of this.manager.tooltipViews){let r=i[t];if(r!==void 0){if(e===void 0)e=r;else if(e!==r)return}}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}},wit=jA.compute([LA],n=>{let t=n.facet(LA);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var i;return(i=e.end)!==null&&i!==void 0?i:e.pos})),create:RA.create,above:t[0].above,arrow:t.some(e=>e.arrow)}}),tW=class{constructor(t,e,i,r,o){this.view=t,this.source=e,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,i=t.docView.tile.nearest(e.target);if(!i)return;let r,o=1;if(i.isWidget())r=i.posAtStart;else{if(r=t.posAtCoords(e),r==null)return;let a=t.coordsAtPos(r);if(!a||e.y<a.top||e.y>a.bottom||e.x<a.left-t.defaultCharacterWidth||e.x>a.right+t.defaultCharacterWidth)return;let l=t.bidiSpans(t.state.doc.lineAt(r)).find(d=>d.from<=r&&d.to>=r),c=l&&l.dir==go.RTL?-1:1;o=e.x<a.left?-c:c}let s=this.source(t,r,o);if(s?.then){let a=this.pending={pos:r};s.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Il(t.state,l,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let t=this.view.plugin(C0e),e=t?t.manager.tooltips.findIndex(i=>i.create==RA.create):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,i;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!Sit(o.dom,t)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(e=r[0])===null||e===void 0?void 0:e.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!Cit(this.view,s,a,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:i}=this;i&&i.dom.contains(t.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=i=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}},yA=4;function Sit(n,t){let{left:e,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return t.clientX>=e-yA&&t.clientX<=i+yA&&t.clientY>=r-yA&&t.clientY<=o+yA}function Cit(n,t,e,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let l=n.posAtCoords({x:i,y:r},!1);return l>=t&&l<=e}function x0e(n,t={}){let e=wo.define(),i=nl.define({create(){return[]},update(r,o){if(r.length&&(t.hideOnChange&&(o.docChanged||o.selection)?r=[]:t.hideOn&&(r=r.filter(s=>!t.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let l=o.changes.mapPos(a.pos,-1,tl.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=o.changes.mapPos(c.end)),s.push(c)}}r=s}for(let s of o.effects)s.is(e)&&(r=s.value),s.is(xit)&&(r=[]);return r},provide:r=>LA.from(r)});return{active:i,extension:[i,nc.define(r=>new tW(r,n,i,e,t.hoverTime||300)),wit]}}var xit=wo.define();var Ipe=on.define({combine(n){let t,e;for(let i of n)t=t||i.topContainer,e=e||i.bottomContainer;return{topContainer:t,bottomContainer:e}}});var kit=nc.fromClass(class{constructor(n){this.input=n.state.facet(OA),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(n));let t=n.state.facet(Ipe);this.top=new Tv(n,!0,t.topContainer),this.bottom=new Tv(n,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(n){let t=n.state.facet(Ipe);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Tv(n.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Tv(n.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=n.state.facet(OA);if(e!=this.input){let i=e.filter(l=>l),r=[],o=[],s=[],a=[];for(let l of i){let c=this.specs.indexOf(l),d;c<0?(d=l(n.view),a.push(d)):(d=this.panels[c],d.update&&d.update(n)),r.push(d),(d.top?o:s).push(d)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>lo.scrollMargins.of(t=>{let e=t.plugin(n);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})}),Tv=class{constructor(t,e,i){this.view=t,this.top=e,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=Fpe(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=Fpe(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}};function Fpe(n){let t=n.nextSibling;return n.remove(),t}var OA=on.define({enables:kit});var Wc=class extends Ju{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}};Wc.prototype.elementClass="";Wc.prototype.toDOM=void 0;Wc.prototype.mapMode=tl.TrackBefore;Wc.prototype.startSide=Wc.prototype.endSide=-1;Wc.prototype.point=!0;var yH=on.define(),Mit=on.define(),Tit={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Zr.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},VS=on.define();function fW(n){return[k0e(),VS.of(le(le({},Tit),n))]}var nW=on.define({combine:n=>n.some(t=>t)});function k0e(n){let t=[Eit];return n&&n.fixed===!1&&t.push(nW.of(!0)),t}var Eit=nc.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(VS).map(t=>new NA(n,t)),this.fixed=!n.state.facet(nW);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let t=this.prevViewport,e=n.view.viewport,i=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(i<(e.to-e.from)*.8)}if(n.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(nW)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let t=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let e=Zr.iter(this.view.state.facet(yH),this.view.viewport.from),i=[],r=this.gutters.map(o=>new rW(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==Fl.Text&&s){iW(e,i,a.from);for(let l of r)l.line(this.view,a,i);s=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(o.type==Fl.Text){iW(e,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let t=n.startState.facet(VS),e=n.state.facet(VS),i=n.docChanged||n.heightChanged||n.viewportChanged||!Zr.eq(n.startState.facet(yH),n.state.facet(yH),n.view.viewport.from,n.view.viewport.to);if(t==e)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of e){let s=t.indexOf(o);s<0?r.push(new NA(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>lo.scrollMargins.of(t=>{let e=t.plugin(n);if(!e||e.gutters.length==0||!e.fixed)return null;let i=e.dom.offsetWidth*t.scaleX,r=e.domAfter?e.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==go.LTR?{left:i,right:r}:{right:i,left:r}})});function Ppe(n){return Array.isArray(n)?n:[n]}function iW(n,t,e){for(;n.value&&n.from<=e;)n.from==e&&t.push(n.value),n.next()}var rW=class{constructor(t,e,i){this.gutter=t,this.height=i,this.i=0,this.cursor=Zr.iter(t.markers,e.from)}addElement(t,e,i){let{gutter:r}=this,o=(e.top-this.height)/t.scaleY,s=e.height/t.scaleY;if(this.i==r.elements.length){let a=new BA(t,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(t,s,o,i);this.height=e.bottom,this.i++}line(t,e,i){let r=[];iW(this.cursor,r,e.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(t,e,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(t,e,r)}widget(t,e){let i=this.gutter.config.widgetMarker(t,e.widget,e),r=i?[i]:null;for(let o of t.state.facet(Mit)){let s=o(t,e.widget,e);s&&(r||(r=[])).push(s)}r&&this.addElement(t,e,r)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}},NA=class{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in e.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let l=o.getBoundingClientRect();s=(l.top+l.bottom)/2}else s=r.clientY;let a=t.lineBlockAtHeight(s-t.documentTop);e.domEventHandlers[i](t,a,r)&&r.preventDefault()});this.markers=Ppe(e.markers(t)),e.initialSpacer&&(this.spacer=new BA(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Ppe(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],t);r!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[r])}let i=t.view.viewport;return!Zr.eq(this.markers,e,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}},BA=class{constructor(t,e,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,i,r)}update(t,e,i,r){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Ait(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,e){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,l=o<e.length?e[o++]:null,c=!1;if(l){let d=l.elementClass;d&&(i+=" "+d);for(let u=s;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;s<a;){let d=this.markers[s++];if(d.toDOM){d.destroy(r);let u=r.nextSibling;r.remove(),r=u}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(t),r)),c&&s++}this.dom.className=i,this.markers=e}destroy(){this.setMarkers(null,[])}};function Ait(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].compare(t[e]))return!1;return!0}var Dit=on.define(),Iit=on.define(),Ev=on.define({combine(n){return z1(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let i=Object.assign({},t);for(let r in e){let o=i[r],s=e[r];i[r]=o?(a,l,c)=>o(a,l,c)||s(a,l,c):s}return i}})}}),US=class extends Wc{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}};function vH(n,t){return n.state.facet(Ev).formatNumber(t,n.state)}var Fit=VS.compute([Ev],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(Dit)},lineMarker(t,e,i){return i.some(r=>r.toDOM)?null:new US(vH(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,i)=>{for(let r of t.state.facet(Iit)){let o=r(t,e,i);if(o)return o}return null},lineMarkerChange:t=>t.startState.facet(Ev)!=t.state.facet(Ev),initialSpacer(t){return new US(vH(t,Lpe(t.state.doc.lines)))},updateSpacer(t,e){let i=vH(e.view,Lpe(e.view.state.doc.lines));return i==t.number?t:new US(i)},domEventHandlers:n.facet(Ev).domEventHandlers,side:"before"}));function M0e(n={}){return[Ev.of(n),k0e(),Fit]}function Lpe(n){let t=9;for(;t<n;)t=t*10+9;return t}var Pit=0,KS=class{constructor(t,e){this.from=t,this.to=e}},Mi=class{constructor(t={}){this.id=Pit++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=Ca.match(t)),e=>{let i=t(e);return i===void 0?null:[this,i]}}};Mi.closedBy=new Mi({deserialize:n=>n.split(" ")});Mi.openedBy=new Mi({deserialize:n=>n.split(" ")});Mi.group=new Mi({deserialize:n=>n.split(" ")});Mi.isolate=new Mi({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Mi.contextHash=new Mi({perNode:!0});Mi.lookAhead=new Mi({perNode:!0});Mi.mounted=new Mi({perNode:!0});var Nv=class{constructor(t,e,i){this.tree=t,this.overlay=e,this.parser=i}static get(t){return t&&t.props&&t.props[Mi.mounted.id]}},Lit=Object.create(null),Ca=class n{constructor(t,e,i,r=0){this.name=t,this.props=e,this.id=i,this.flags=r}static define(t){let e=t.props&&t.props.length?Object.create(null):Lit,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new n(t.name||"",e,t.id,i);if(t.props){for(let o of t.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[o[0].id]=o[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(Mi.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let r of i.split(" "))e[r]=t[i];return i=>{for(let r=i.prop(Mi.group),o=-1;o<(r?r.length:0);o++){let s=e[o<0?i.name:r[o]];if(s)return s}}}};Ca.none=new Ca("",Object.create(null),0,8);var GS=class n{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let r=null;for(let o of t){let s=o(i);if(s){r||(r=Object.assign({},i.props));let a=s[1],l=s[0];l.combine&&l.id in r&&(a=l.combine(r[l.id],a)),r[l.id]=a}}e.push(r?new Ca(i.name,r,i.id,i.flags):i)}return new n(e)}},HA=new WeakMap,T0e=new WeakMap,_s=(function(n){return n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",n})(_s||{}),Go=class n{constructor(t,e,i,r,o){if(this.type=t,this.children=e,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let t=Nv.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let r=i.toString();r&&(e&&(e+=","),e+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new ZS(this.topNode,t)}cursorAt(t,e=0,i=0){let r=HA.get(this)||this.topNode,o=new ZS(r);return o.moveTo(t,e),HA.set(this,o._tree),o}get topNode(){return new nh(this,0,0,null)}resolve(t,e=0){let i=XS(HA.get(this)||this.topNode,t,e,!1);return HA.set(this,i),i}resolveInner(t,e=0){let i=XS(T0e.get(this)||this.topNode,t,e,!0);return T0e.set(this,i),i}resolveStack(t,e=0){return Rit(this,t,e)}iterate(t){let{enter:e,leave:i,from:r=0,to:o=this.length}=t,s=t.mode||0,a=(s&_s.IncludeAnonymous)>0;for(let l=this.cursor(s|_s.IncludeAnonymous);;){let c=!1;if(l.from<=o&&l.to>=r&&(!a&&l.type.isAnonymous||e(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:bW(Ca.none,this.children,this.positions,0,this.children.length,0,this.length,(e,i,r)=>new n(this.type,e,i,r,this.propValues),t.makeTree||((e,i,r)=>new n(Ca.none,e,i,r)))}static build(t){return Oit(t)}};Go.empty=new Go(Ca.none,[],[],0);var pW=class n{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new n(this.buffer,this.index)}},b0=class n{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return Ca.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],r=this.set.types[e],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),t+=4,i==t)return o;let s=[];for(;t<i;)s.push(this.childString(t)),t=this.buffer[t+3];return o+"("+s.join(",")+")"}findChild(t,e,i,r,o){let{buffer:s}=this,a=-1;for(let l=t;l!=e&&!(D0e(o,r,s[l+1],s[l+2])&&(a=l,i>0));l=s[l+3]);return a}slice(t,e,i){let r=this.buffer,o=new Uint16Array(e-t),s=0;for(let a=t,l=0;a<e;){o[l++]=r[a++],o[l++]=r[a++]-i;let c=o[l++]=r[a++]-i;o[l++]=r[a++]-t,s=Math.max(s,c)}return new n(o,s,this.set)}};function D0e(n,t,e,i){switch(n){case-2:return e<t;case-1:return i>=t&&e<t;case 0:return e<t&&i>t;case 1:return e<=t&&i>t;case 2:return i>t;case 4:return!0}}function XS(n,t,e,i){for(var r;n.from==n.to||(e<1?n.from>=t:n.from>t)||(e>-1?n.to<=t:n.to<t);){let s=!i&&n instanceof nh&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:_s.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof nh&&s.index<0&&((r=a.enter(t,e,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(t,e,o);if(!s)return n;n=s}}var zA=class{cursor(t=0){return new ZS(this,t)}getChild(t,e=null,i=null){let r=E0e(this,t,e,i);return r.length?r[0]:null}getChildren(t,e=null,i=null){return E0e(this,t,e,i)}resolve(t,e=0){return XS(this,t,e,!1)}resolveInner(t,e=0){return XS(this,t,e,!0)}matchContext(t){return mW(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),i=this;for(;e;){let r=e.lastChild;if(!r||r.to!=e.to)break;r.type.isError&&r.from==r.to?(i=e,e=r.prevSibling):e=r}return i}get node(){return this}get next(){return this.parent}},nh=class n extends zA{constructor(t,e,i,r){super(),this._tree=t,this.from=e,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,r,o=0){for(let s=this;;){for(let{children:a,positions:l}=s._tree,c=e>0?a.length:-1;t!=c;t+=e){let d=a[t],u=l[t]+s.from;if(D0e(r,i,u,u+d.length)){if(d instanceof b0){if(o&_s.ExcludeBuffers)continue;let h=d.findChild(0,d.buffer.length,e,i-u,r);if(h>-1)return new YS(new gW(s,d,t,u),null,h)}else if(o&_s.IncludeAnonymous||!d.type.isAnonymous||_W(d)){let h;if(!(o&_s.IgnoreMounts)&&(h=Nv.get(d))&&!h.overlay)return new n(h.tree,u,t,s);let f=new n(d,u,t,s);return o&_s.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(e<0?d.children.length-1:0,e,i,r)}}}if(o&_s.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?t=s.index+e:t=e<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,e,i=0){let r;if(!(i&_s.IgnoreOverlays)&&(r=Nv.get(this._tree))&&r.overlay){let o=t-this.from;for(let{from:s,to:a}of r.overlay)if((e>0?s<=o:s<o)&&(e<0?a>=o:a>o))return new n(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function E0e(n,t,e,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(e!=null){for(let s=!1;!s;)if(s=r.type.is(e),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(t)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function mW(n,t,e=t.length-1){for(let i=n;e>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[e]&&t[e]!=i.name)return!1;e--}}return!0}var gW=class{constructor(t,e,i,r){this.parent=t,this.buffer=e,this.index=i,this.start=r}},YS=class n extends zA{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){super(),this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.context.start,i);return o<0?null:new n(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,e,i=0){if(i&_s.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return o<0?null:new n(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new n(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new n(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];t.push(i.slice(r,o,s)),e.push(0)}return new Go(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function I0e(n){if(!n.length)return null;let t=0,e=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>e.from||s.to<e.to)&&(e=s,t=o)}let i=e instanceof nh&&e.index<0?null:e.parent,r=n.slice();return i?r[t]=i:r.splice(t,1),new yW(r,e)}var yW=class{constructor(t,e){this.heads=t,this.node=e}get next(){return I0e(this.heads)}};function Rit(n,t,e){let i=n.resolveInner(t,e),r=null;for(let o=i instanceof nh?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(t,e)),o=s}else{let s=Nv.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=t&&s.overlay[s.overlay.length-1].to>=t){let a=new nh(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(XS(a,t,e,!1))}}return r?I0e(r):i}var ZS=class{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof nh)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:i,buffer:r}=this.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=i+r.buffer[t+1],this.to=i+r.buffer[t+2],!0}yield(t){return t?t instanceof nh?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?i&_s.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&_s.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&_s.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(e.findChild(r,this.index,-1,0,4))}else{let r=e.buffer[this.index+3];if(r<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:e,parent:i}=r)}else({index:e,_parent:i}=this._tree);for(;i;{index:e,_parent:i}=i)if(e>-1)for(let o=e+t,s=t<0?-1:i._tree.children.length;o!=s;o+=t){let a=i._tree.children[o];if(this.mode&_s.IncludeAnonymous||a instanceof b0||!a.type.isAnonymous||_W(a))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=t;s;s=s._parent)if(s.index==r){if(r==this.index)return s;e=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)e=new YS(this.buffer,e,this.stack[r]);return this.bufferNode=new YS(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&e&&e(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(t){if(!this.buffer)return mW(this.node.parent,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let r=t.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return mW(this._tree,t,r);let s=i[e.buffer[this.stack[o]]];if(!s.isAnonymous){if(t[r]&&t[r]!=s.name)return!1;r--}}return!0}};function _W(n){return n.children.some(t=>t instanceof b0||!t.type.isAnonymous||_W(t))}function Oit(n){var t;let{buffer:e,nodeSet:i,maxBufferLength:r=1024,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(e)?new pW(e,e.length):e,l=i.types,c=0,d=0;function u(L,D,V,O,R,G){let{id:Z,start:K,end:C,size:A}=a,I=d,T=c;if(A<0)if(a.next(),A==-1){let te=o[Z];V.push(te),O.push(K-L);return}else if(A==-3){c=Z;return}else if(A==-4){d=Z;return}else throw new RangeError(`Unrecognized record size: ${A}`);let M=l[Z],F,q,$=K-L;if(C-K<=r&&(q=v(a.pos-D,R))){let te=new Uint16Array(q.size-q.skip),se=a.pos-q.size,ue=te.length;for(;a.pos>se;)ue=b(q.start,te,ue);F=new b0(te,C-q.start,i),$=q.start-L}else{let te=a.pos-A;a.next();let se=[],ue=[],Se=Z>=s?Z:-1,Ie=0,Be=C;for(;a.pos>te;)Se>=0&&a.id==Se&&a.size>=0?(a.end<=Be-r&&(p(se,ue,K,Ie,a.end,Be,Se,I,T),Ie=se.length,Be=a.end),a.next()):G>2500?h(K,te,se,ue):u(K,te,se,ue,Se,G+1);if(Se>=0&&Ie>0&&Ie<se.length&&p(se,ue,K,Ie,K,Be,Se,I,T),se.reverse(),ue.reverse(),Se>-1&&Ie>0){let ce=f(M,T);F=bW(M,se,ue,0,se.length,0,C-K,ce,ce)}else F=y(M,se,ue,C-K,I-C,T)}V.push(F),O.push($)}function h(L,D,V,O){let R=[],G=0,Z=-1;for(;a.pos>D;){let{id:K,start:C,end:A,size:I}=a;if(I>4)a.next();else{if(Z>-1&&C<Z)break;Z<0&&(Z=A-r),R.push(K,C,A),G++,a.next()}}if(G){let K=new Uint16Array(G*4),C=R[R.length-2];for(let A=R.length-3,I=0;A>=0;A-=3)K[I++]=R[A],K[I++]=R[A+1]-C,K[I++]=R[A+2]-C,K[I++]=I;V.push(new b0(K,R[2]-C,i)),O.push(C-L)}}function f(L,D){return(V,O,R)=>{let G=0,Z=V.length-1,K,C;if(Z>=0&&(K=V[Z])instanceof Go){if(!Z&&K.type==L&&K.length==R)return K;(C=K.prop(Mi.lookAhead))&&(G=O[Z]+K.length+C)}return y(L,V,O,R,G,D)}}function p(L,D,V,O,R,G,Z,K,C){let A=[],I=[];for(;L.length>O;)A.push(L.pop()),I.push(D.pop()+V-R);L.push(y(i.types[Z],A,I,G-R,K-G,C)),D.push(R-V)}function y(L,D,V,O,R,G,Z){if(G){let K=[Mi.contextHash,G];Z=Z?[K].concat(Z):[K]}if(R>25){let K=[Mi.lookAhead,R];Z=Z?[K].concat(Z):[K]}return new Go(L,D,V,O,Z)}function v(L,D){let V=a.fork(),O=0,R=0,G=0,Z=V.end-r,K={size:0,start:0,skip:0};e:for(let C=V.pos-L;V.pos>C;){let A=V.size;if(V.id==D&&A>=0){K.size=O,K.start=R,K.skip=G,G+=4,O+=4,V.next();continue}let I=V.pos-A;if(A<0||I<C||V.start<Z)break;let T=V.id>=s?4:0,M=V.start;for(V.next();V.pos>I;){if(V.size<0)if(V.size==-3||V.size==-4)T+=4;else break e;else V.id>=s&&(T+=4);V.next()}R=M,O+=A,G+=T}return(D<0||O==L)&&(K.size=O,K.start=R,K.skip=G),K.size>4?K:void 0}function b(L,D,V){let{id:O,start:R,end:G,size:Z}=a;if(a.next(),Z>=0&&O<s){let K=V;if(Z>4){let C=a.pos-(Z-4);for(;a.pos>C;)V=b(L,D,V)}D[--V]=K,D[--V]=G-L,D[--V]=R-L,D[--V]=O}else Z==-3?c=O:Z==-4&&(d=O);return V}let S=[],x=[];for(;a.pos>0;)u(n.start||0,n.bufferStart||0,S,x,-1,0);let k=(t=n.length)!==null&&t!==void 0?t:S.length?x[0]+S[0].length:0;return new Go(l[n.topID],S.reverse(),x.reverse(),k)}var A0e=new WeakMap;function WA(n,t){if(!n.isAnonymous||t instanceof b0||t.type!=n)return 1;let e=A0e.get(t);if(e==null){e=1;for(let i of t.children){if(i.type!=n||!(i instanceof Go)){e=1;break}e+=WA(n,i)}A0e.set(t,e)}return e}function bW(n,t,e,i,r,o,s,a,l){let c=0;for(let p=i;p<r;p++)c+=WA(n,t[p]);let d=Math.ceil(c*1.5/8),u=[],h=[];function f(p,y,v,b,S){for(let x=v;x<b;){let k=x,L=y[x],D=WA(n,p[x]);for(x++;x<b;x++){let V=WA(n,p[x]);if(D+V>=d)break;D+=V}if(x==k+1){if(D>d){let V=p[k];f(V.children,V.positions,0,V.children.length,y[k]+S);continue}u.push(p[k])}else{let V=y[x-1]+p[x-1].length-L;u.push(bW(n,p,y,k,x,L,V,null,l))}h.push(L+S-o)}}return f(t,e,i,r,0),(a||l)(u,h,s)}var Y1=class n{constructor(t,e,i,r,o=!1,s=!1){this.from=t,this.to=e,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],i=!1){let r=[new n(0,t.length,t,0,!1,i)];for(let o of e)o.to>t.length&&r.push(o);return r}static applyChanges(t,e,i=128){if(!e.length)return t;let r=[],o=1,s=t.length?t[0]:null;for(let a=0,l=0,c=0;;a++){let d=a<e.length?e[a]:null,u=d?d.fromA:1e9;if(u-l>=i)for(;s&&s.from<u;){let h=s;if(l>=h.from||u<=h.to||c){let f=Math.max(h.from,l)-c,p=Math.min(h.to,u)-c;h=f>=p?null:new n(f,p,h.tree,h.offset+c,a>0,!!d)}if(h&&r.push(h),s.to>u)break;s=o<t.length?t[o++]:null}if(!d)break;l=d.toA,c=d.toA-d.toB}return r}},Bv=class{startParse(t,e,i){return typeof t=="string"&&(t=new vW(t)),i=i?i.length?i.map(r=>new KS(r.from,r.to)):[new KS(0,0)]:[new KS(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let r=this.startParse(t,e,i);for(;;){let o=r.advance();if(o)return o}}},vW=class{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}};var Cqt=new Mi({perNode:!0});var Nit=0,Bd=class n{constructor(t,e,i,r){this.name=t,this.set=e,this.base=i,this.modified=r,this.id=Nit++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i=typeof t=="string"?t:"?";if(t instanceof n&&(e=t),e?.base)throw new Error("Can not derive from a modified tag");let r=new n(i,[],null,[]);if(r.set.push(r),e)for(let o of e.set)r.set.push(o);return r}static defineModifier(t){let e=new GA(t);return i=>i.modified.indexOf(e)>-1?i:GA.get(i.base||i,i.modified.concat(e).sort((r,o)=>r.id-o.id))}},Bit=0,GA=class n{constructor(t){this.name=t,this.instances=[],this.id=Bit++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(a=>a.base==t&&Vit(e,a.modified));if(i)return i;let r=[],o=new Bd(t.name,r,t,e);for(let a of e)a.instances.push(o);let s=Uit(e);for(let a of t.set)if(!a.modified.length)for(let l of s)r.push(n.get(a,l));return o}};function Vit(n,t){return n.length==t.length&&n.every((e,i)=>e==t[i])}function Uit(n){let t=[[]];for(let e=0;e<n.length;e++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(n[e]));return t.sort((e,i)=>i.length-e.length)}function XA(n){let t=Object.create(null);for(let e in n){let i=n[e];Array.isArray(i)||(i=[i]);for(let r of e.split(" "))if(r){let o=[],s=2,a=r;for(let u=0;;){if(a=="..."&&u>0&&u+3==r.length){s=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),u+=h[0].length,u==r.length)break;let f=r[u++];if(u==r.length&&f=="!"){s=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(u)}let l=o.length-1,c=o[l];if(!c)throw new RangeError("Invalid path: "+r);let d=new Q1(i,s,l>0?o.slice(0,l):null);t[c]=d.sort(t[c])}}return L0e.add(t)}var L0e=new Mi({combine(n,t){let e,i,r;for(;n||t;){if(!n||t&&n.depth>=t.depth?(r=t,t=t.next):(r=n,n=n.next),e&&e.mode==r.mode&&!r.context&&!e.context)continue;let o=new Q1(r.tags,r.mode,r.context);e?e.next=o:i=o,e=o}return i}}),Q1=class{constructor(t,e,i,r){this.tags=t,this.mode=e,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}};Q1.empty=new Q1([],2,null);function xW(n,t){let e=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))e[o.tag.id]=o.class;else for(let s of o.tag)e[s.id]=o.class;let{scope:i,all:r=null}=t||{};return{style:o=>{let s=r;for(let a of o)for(let l of a.set){let c=e[l.id];if(c){s=s?s+" "+c:c;break}}return s},scope:i}}function jit(n,t){let e=null;for(let i of n){let r=i.style(t);r&&(e=e?e+" "+r:r)}return e}function R0e(n,t,e,i=0,r=n.length){let o=new SW(i,Array.isArray(t)?t:[t],e);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}var SW=class{constructor(t,e,i){this.at=t,this.highlighters=e,this.span=i,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,i,r,o){let{type:s,from:a,to:l}=t;if(a>=i||l<=e)return;s.isTop&&(o=this.highlighters.filter(f=>!f.scope||f.scope(s)));let c=r,d=Hit(t)||Q1.empty,u=jit(o,d.tags);if(u&&(c&&(c+=" "),c+=u,d.mode==1&&(r+=(r?" ":"")+u)),this.startSpan(Math.max(e,a),c),d.opaque)return;let h=t.tree&&t.tree.prop(Mi.mounted);if(h&&h.overlay){let f=t.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),y=t.firstChild();for(let v=0,b=a;;v++){let S=v<h.overlay.length?h.overlay[v]:null,x=S?S.from+a:l,k=Math.max(e,b),L=Math.min(i,x);if(k<L&&y)for(;t.from<L&&(this.highlightRange(t,k,L,r,o),this.startSpan(Math.min(L,t.to),c),!(t.to>=x||!t.nextSibling())););if(!S||x>i)break;b=S.to+a,b>e&&(this.highlightRange(f.cursor(),Math.max(e,S.from+a),Math.min(i,b),"",p),this.startSpan(Math.min(i,b),c))}y&&t.parent()}else if(t.firstChild()){h&&(r="");do if(!(t.to<=e)){if(t.from>=i)break;this.highlightRange(t,e,i,r,o),this.startSpan(Math.min(i,t.to),c)}while(t.nextSibling());t.parent()}}};function Hit(n){let t=n.type.prop(L0e);for(;t&&t.context&&!n.matchContext(t.context);)t=t.next;return t||null}var It=Bd.define,qA=It(),w0=It(),F0e=It(w0),P0e=It(w0),S0=It(),$A=It(S0),wW=It(S0),oh=It(),Z1=It(oh),ih=It(),rh=It(),CW=It(),QS=It(CW),KA=It(),Pe={comment:qA,lineComment:It(qA),blockComment:It(qA),docComment:It(qA),name:w0,variableName:It(w0),typeName:F0e,tagName:It(F0e),propertyName:P0e,attributeName:It(P0e),className:It(w0),labelName:It(w0),namespace:It(w0),macroName:It(w0),literal:S0,string:$A,docString:It($A),character:It($A),attributeValue:It($A),number:wW,integer:It(wW),float:It(wW),bool:It(S0),regexp:It(S0),escape:It(S0),color:It(S0),url:It(S0),keyword:ih,self:It(ih),null:It(ih),atom:It(ih),unit:It(ih),modifier:It(ih),operatorKeyword:It(ih),controlKeyword:It(ih),definitionKeyword:It(ih),moduleKeyword:It(ih),operator:rh,derefOperator:It(rh),arithmeticOperator:It(rh),logicOperator:It(rh),bitwiseOperator:It(rh),compareOperator:It(rh),updateOperator:It(rh),definitionOperator:It(rh),typeOperator:It(rh),controlOperator:It(rh),punctuation:CW,separator:It(CW),bracket:QS,angleBracket:It(QS),squareBracket:It(QS),paren:It(QS),brace:It(QS),content:oh,heading:Z1,heading1:It(Z1),heading2:It(Z1),heading3:It(Z1),heading4:It(Z1),heading5:It(Z1),heading6:It(Z1),contentSeparator:It(oh),list:It(oh),quote:It(oh),emphasis:It(oh),strong:It(oh),link:It(oh),monospace:It(oh),strikethrough:It(oh),inserted:It(),deleted:It(),changed:It(),invalid:It(),meta:KA,documentMeta:It(KA),annotation:It(KA),processingInstruction:It(KA),definition:Bd.defineModifier("definition"),constant:Bd.defineModifier("constant"),function:Bd.defineModifier("function"),standard:Bd.defineModifier("standard"),local:Bd.defineModifier("local"),special:Bd.defineModifier("special")};for(let n in Pe){let t=Pe[n];t instanceof Bd&&(t.name=n)}var Mqt=xW([{tag:Pe.link,class:"tok-link"},{tag:Pe.heading,class:"tok-heading"},{tag:Pe.emphasis,class:"tok-emphasis"},{tag:Pe.strong,class:"tok-strong"},{tag:Pe.keyword,class:"tok-keyword"},{tag:Pe.atom,class:"tok-atom"},{tag:Pe.bool,class:"tok-bool"},{tag:Pe.url,class:"tok-url"},{tag:Pe.labelName,class:"tok-labelName"},{tag:Pe.inserted,class:"tok-inserted"},{tag:Pe.deleted,class:"tok-deleted"},{tag:Pe.literal,class:"tok-literal"},{tag:Pe.string,class:"tok-string"},{tag:Pe.number,class:"tok-number"},{tag:[Pe.regexp,Pe.escape,Pe.special(Pe.string)],class:"tok-string2"},{tag:Pe.variableName,class:"tok-variableName"},{tag:Pe.local(Pe.variableName),class:"tok-variableName tok-local"},{tag:Pe.definition(Pe.variableName),class:"tok-variableName tok-definition"},{tag:Pe.special(Pe.variableName),class:"tok-variableName2"},{tag:Pe.definition(Pe.propertyName),class:"tok-propertyName tok-definition"},{tag:Pe.typeName,class:"tok-typeName"},{tag:Pe.namespace,class:"tok-namespace"},{tag:Pe.className,class:"tok-className"},{tag:Pe.macroName,class:"tok-macroName"},{tag:Pe.propertyName,class:"tok-propertyName"},{tag:Pe.operator,class:"tok-operator"},{tag:Pe.comment,class:"tok-comment"},{tag:Pe.meta,class:"tok-meta"},{tag:Pe.invalid,class:"tok-invalid"},{tag:Pe.punctuation,class:"tok-punctuation"}]);var kW,Vv=new Mi;function Wit(n){return on.define({combine:n?t=>t.concat(n):void 0})}var zit=new Mi,sh=(()=>{class n{constructor(e,i,r=[],o=""){this.data=e,this.name=o,Jl.prototype.hasOwnProperty("tree")||Object.defineProperty(Jl.prototype,"tree",{get(){return Vd(this)}}),this.parser=i,this.extension=[Uv.of(this),Jl.languageData.of((s,a,l)=>{let c=O0e(s,a,l),d=c.type.prop(Vv);if(!d)return[];let u=s.facet(d),h=c.type.prop(zit);if(h){let f=c.resolve(a-c.from,l);for(let p of h)if(p.test(f,s)){let y=s.facet(p.facet);return p.type=="replace"?y:y.concat(u)}}return u})].concat(r)}isActiveAt(e,i,r=-1){return O0e(e,i,r).type.prop(Vv)==this.data}findRegions(e){let i=e.facet(Uv);if(i?.data==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let r=[],o=(s,a)=>{if(s.prop(Vv)==this.data){r.push({from:a,to:a+s.length});return}let l=s.prop(Mi.mounted);if(l){if(l.tree.prop(Vv)==this.data){if(l.overlay)for(let c of l.overlay)r.push({from:c.from+a,to:c.to+a});else r.push({from:a,to:a+s.length});return}else if(l.overlay){let c=r.length;if(o(l.tree,l.overlay[0].from+a),r.length>c)return}}for(let c=0;c<s.children.length;c++){let d=s.children[c];d instanceof Go&&o(d,s.positions[c]+a)}};return o(Vd(e),0),r}get allowsNesting(){return!0}}return n.setState=wo.define(),n})();function O0e(n,t,e){let i=n.facet(Uv),r=Vd(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(t,e,_s.ExcludeBuffers))o.type.isTop&&(r=o);return r}var YA=class n extends sh{constructor(t,e,i){super(t,e,[],i),this.parser=e}static define(t){let e=Wit(t.languageData);return new n(e,t.parser.configure({props:[Vv.add(i=>i.isTop?e:void 0)]}),t.name)}configure(t,e){return new n(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}};function Vd(n){let t=n.field(sh.state,!1);return t?t.tree:Go.empty}var AW=class{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let i=this.cursorPos-this.string.length;return t<i||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-i,e-i)}},JS=null,DW=class n{constructor(t,e,i=[],r,o,s,a,l){this.parser=t,this.state=e,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,e,i){return new n(t,e,[],Go.empty,0,i,[],null)}startParse(){return this.parser.startParse(new AW(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=Go.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof t=="number"){let r=Date.now()+t;t=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Y1.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Y1.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=JS;JS=this;try{return t()}finally{JS=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=N0e(t,e.from,e.to);return t}changes(t,e){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!t.empty){let l=[];if(t.iterChangedRanges((c,d,u,h)=>l.push({fromA:c,toA:d,fromB:u,toB:h})),i=Y1.applyChanges(i,l),r=Go.empty,o=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let d=t.mapPos(c.from,1),u=t.mapPos(c.to,-1);d<u&&a.push({from:d,to:u})}}}return new n(this.parser,e,i,r,o,s,a,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<t.to&&o>t.from&&(this.fragments=N0e(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends Bv{createParse(e,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let l=JS;if(l){for(let c of r)l.tempSkipped.push(c);t&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,t]):t)}return this.parsedPos=s,new Go(Ca.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return JS}};function N0e(n,t,e){return Y1.applyChanges(n,[{fromA:t,toA:e,fromB:t,toB:e}])}var eC=class n{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,i)||e.takeTree(),new n(e)}static init(t){let e=Math.min(3e3,t.doc.length),i=DW.create(t.facet(Uv).parser,t,{from:0,to:e});return i.work(20,e)||i.takeTree(),new n(i)}};sh.state=nl.define({create:eC.init,update(n,t){for(let e of t.effects)if(e.is(sh.setState))return e.value;return t.startState.facet(Uv)!=t.state.facet(Uv)?eC.init(t.state):n.apply(t)}});var j0e=n=>{let t=setTimeout(()=>n(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(j0e=n=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(n,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});var MW=typeof navigator<"u"&&(!((kW=navigator.scheduling)===null||kW===void 0)&&kW.isInputPending)?()=>navigator.scheduling.isInputPending():null,qit=nc.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(sh.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(sh.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=j0e(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(sh.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,t&&!MW?Math.max(25,t.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,l=o.context.work(()=>MW&&MW()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-e,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:sh.setState.of(new eC(o.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>Il(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Uv=on.define({combine(n){return n.length?n[0]:null},enables:n=>[sh.state,qit,lo.contentAttributes.compute([n],t=>{let e=t.facet(n);return e&&e.name?{"data-language":e.name}:{}})]}),ZA=class{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}};var $it=on.define(),QA=on.define({combine:n=>{if(!n.length)return"  ";let t=n[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return t}});function tC(n){let t=n.facet(QA);return t.charCodeAt(0)==9?n.tabSize*t.length:t.length}function nC(n,t){let e="",i=n.tabSize,r=n.facet(QA)[0];if(r=="	"){for(;t>=i;)e+="	",t-=i;r=" "}for(let o=0;o<t;o++)e+=r;return e}function OW(n,t){n instanceof Jl&&(n=new J1(n));for(let i of n.state.facet($it)){let r=i(n,t);if(r!==void 0)return r}let e=Vd(n.state);return e.length>=t?Kit(n,e,t):null}var J1=class{constructor(t,e={}){this.state=t,this.options=e,this.unit=tC(t)}lineAt(t,e=1){let i=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==t?{text:"",from:t}:(e<0?r<t:r<=t)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(t,e);return i.slice(t-r,Math.min(i.length,t+100-r))}column(t,e=1){let{text:i,from:r}=this.lineAt(t,e),o=this.countColumn(i,t-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(t,e=t.length){return q1(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:i,from:r}=this.lineAt(t,e),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},NW=new Mi;function Kit(n,t,e){let i=t.resolveStack(e),r=t.resolveInner(e,-1).resolve(e,0).enterUnfinishedNodesBefore(e);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return H0e(i,n,e)}function H0e(n,t,e){for(let i=n;i;i=i.next){let r=Xit(i.node);if(r)return r(IW.create(t,e,i))}return 0}function Git(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function Xit(n){let t=n.type.prop(NW);if(t)return t;let e=n.firstChild,i;if(e&&(i=e.type.prop(Mi.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>Jit(s,!0,1,void 0,o&&!Git(s)?r.from:void 0)}return n.parent==null?Yit:null}function Yit(){return 0}var IW=class n extends J1{constructor(t,e,i){super(t.state,t.options),this.base=t,this.pos=e,this.context=i}get node(){return this.context.node}static create(t,e,i){return new n(t,e,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let i=t.resolve(e.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Zit(i,t))break;e=this.state.doc.lineAt(i.from)}return this.lineIndent(e.from)}continue(){return H0e(this.context.next,this.base,this.pos)}};function Zit(n,t){for(let e=t;e;e=e.parent)if(n==e)return!0;return!1}function Qit(n){let t=n.node,e=t.childAfter(t.from),i=t.lastChild;if(!e)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(e.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=e.to;;){let l=t.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=s)return null;let c=/^ */.exec(o.text.slice(e.to-o.from))[0].length;return{from:e.from,to:e.to+c}}a=l.to}}function Jit(n,t,e,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,l=t?Qit(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*e)}function BW({except:n,units:t=1}={}){return e=>{let i=n&&n.test(e.textAfter);return e.baseIndent+(i?0:t*e.unit)}}var W0e=new Mi;function z0e(n){let t=n.firstChild,e=n.lastChild;return t&&t.to<e.from?{from:t.to,to:e.type.isError?n.to:e.from}:null}var jv=class n{constructor(t,e){this.specs=t;let i;function r(a){let l=Vc.newName();return(i||(i=Object.create(null)))["."+l]=a,l}let o=typeof e.all=="string"?e.all:e.all?r(e.all):void 0,s=e.scope;this.scope=s instanceof sh?a=>a.prop(Vv)==s.data:s?a=>a==s:void 0,this.style=xW(t.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new Vc(i):null,this.themeType=e.themeType}static define(t,e){return new n(t,e||{})}},FW=on.define(),q0e=on.define({combine(n){return n.length?[n[0]]:null}});function TW(n){let t=n.facet(FW);return t.length?t:n.facet(q0e)}function $0e(n,t){let e=[ert],i;return n instanceof jv&&(n.module&&e.push(lo.styleModule.of(n.module)),i=n.themeType),t?.fallback?e.push(q0e.of(n)):i?e.push(FW.computeN([lo.darkTheme],r=>r.facet(lo.darkTheme)==(i=="dark")?[n]:[])):e.push(FW.of(n)),e}var PW=class{constructor(t){this.markCache=Object.create(null),this.tree=Vd(t.state),this.decorations=this.buildDeco(t,TW(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=Vd(t.state),i=TW(t.state),r=i!=TW(t.startState),{viewport:o}=t.view,s=t.changes.mapPos(this.decoratedTo,1);e.length<o.to&&!r&&e.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=s):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,i),this.decoratedTo=o.to)}buildDeco(t,e){if(!e||!this.tree.length)return Vr.none;let i=new ff;for(let{from:r,to:o}of t.visibleRanges)R0e(this.tree,e,(s,a,l)=>{i.add(s,a,this.markCache[l]||(this.markCache[l]=Vr.mark({class:l})))},r,o);return i.finish()}},ert=AS.high(nc.fromClass(PW,{decorations:n=>n.decorations})),Lqt=jv.define([{tag:Pe.meta,color:"#404740"},{tag:Pe.link,textDecoration:"underline"},{tag:Pe.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Pe.emphasis,fontStyle:"italic"},{tag:Pe.strong,fontWeight:"bold"},{tag:Pe.strikethrough,textDecoration:"line-through"},{tag:Pe.keyword,color:"#708"},{tag:[Pe.atom,Pe.bool,Pe.url,Pe.contentSeparator,Pe.labelName],color:"#219"},{tag:[Pe.literal,Pe.inserted],color:"#164"},{tag:[Pe.string,Pe.deleted],color:"#a11"},{tag:[Pe.regexp,Pe.escape,Pe.special(Pe.string)],color:"#e40"},{tag:Pe.definition(Pe.variableName),color:"#00f"},{tag:Pe.local(Pe.variableName),color:"#30a"},{tag:[Pe.typeName,Pe.namespace],color:"#085"},{tag:Pe.className,color:"#167"},{tag:[Pe.special(Pe.variableName),Pe.macroName],color:"#256"},{tag:Pe.definition(Pe.propertyName),color:"#00c"},{tag:Pe.comment,color:"#940"},{tag:Pe.invalid,color:"#f00"}]);var trt=1e4,nrt="()[]{}";var irt=new Mi;function LW(n,t,e){let i=n.prop(t<0?Mi.openedBy:Mi.closedBy);if(i)return i;if(n.name.length==1){let r=e.indexOf(n.name);if(r>-1&&r%2==(t<0?1:0))return[e[r+t]]}return null}function RW(n){let t=n.type.prop(irt);return t?t(n.node):n}function eg(n,t,e,i={}){let r=i.maxScanDistance||trt,o=i.brackets||nrt,s=Vd(n),a=s.resolveInner(t,e);for(let l=a;l;l=l.parent){let c=LW(l.type,e,o);if(c&&l.from<l.to){let d=RW(l);if(d&&(e>0?t>=d.from&&t<d.to:t>d.from&&t<=d.to))return rrt(n,t,e,l,d,c,o)}}return ort(n,t,e,s,a.type,r,o)}function rrt(n,t,e,i,r,o,s){let a=i.parent,l={from:r.from,to:r.to},c=0,d=a?.cursor();if(d&&(e<0?d.childBefore(i.from):d.childAfter(i.to)))do if(e<0?d.to<=i.from:d.from>=i.to){if(c==0&&o.indexOf(d.type.name)>-1&&d.from<d.to){let u=RW(d);return{start:l,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(LW(d.type,e,s))c++;else if(LW(d.type,-e,s)){if(c==0){let u=RW(d);return{start:l,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(e<0?d.prevSibling():d.nextSibling());return{start:l,matched:!1}}function ort(n,t,e,i,r,o,s){let a=e<0?n.sliceDoc(t-1,t):n.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=e>0)return null;let c={from:e<0?t-1:t,to:e>0?t+1:t},d=n.doc.iterRange(t,e>0?n.doc.length:0),u=0;for(let h=0;!d.next().done&&h<=o;){let f=d.value;e<0&&(h+=f.length);let p=t+h*e;for(let y=e>0?0:f.length-1,v=e>0?f.length:-1;y!=v;y+=e){let b=s.indexOf(f[y]);if(!(b<0||i.resolveInner(p+y,1).type!=r))if(b%2==0==e>0)u++;else{if(u==1)return{start:c,end:{from:p+y,to:p+y+1},matched:b>>1==l>>1};u--}}e>0&&(h+=f.length)}return d.done?{start:c,matched:!1}:null}var srt=Object.create(null),B0e=[Ca.none];var V0e=[],U0e=Object.create(null),art=Object.create(null);for(let[n,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])art[n]=lrt(srt,t);function EW(n,t){V0e.indexOf(n)>-1||(V0e.push(n),console.warn(t))}function lrt(n,t){let e=[];for(let a of t.split(" ")){let l=[];for(let c of a.split(".")){let d=n[c]||Pe[c];d?typeof d=="function"?l.length?l=l.map(d):EW(c,`Modifier ${c} used at start of tag`):l.length?EW(c,`Tag ${c} used as modifier`):l=Array.isArray(d)?d:[d]:EW(c,`Unknown highlighting tag ${c}`)}for(let c of l)e.push(c)}if(!e.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+e.map(a=>a.id),o=U0e[r];if(o)return o.id;let s=U0e[r]=Ca.define({id:B0e.length,name:i,props:[XA({[i]:e})]});return B0e.push(s),s.id}var Rqt={rtl:Vr.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:go.RTL}),ltr:Vr.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:go.LTR}),auto:Vr.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var crt=n=>{let{state:t}=n,e=t.doc.lineAt(t.selection.main.from),i=HW(n.state,e.from);return i.line?drt(n):i.block?hrt(n):!1};function jW(n,t){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let r=n(t,e);return r?(i(e.update(r)),!0):!1}}var drt=jW(mrt,0);var urt=jW(tme,0);var hrt=jW((n,t)=>tme(n,t,prt(t)),0);function HW(n,t){let e=n.languageDataAt("commentTokens",t,1);return e.length?e[0]:{}}var iC=50;function frt(n,{open:t,close:e},i,r){let o=n.sliceDoc(i-iC,i),s=n.sliceDoc(r,r+iC),a=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(s)[0].length,c=o.length-a;if(o.slice(c-t.length,c)==t&&s.slice(l,l+e.length)==e)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let d,u;r-i<=2*iC?d=u=n.sliceDoc(i,r):(d=n.sliceDoc(i,i+iC),u=n.sliceDoc(r-iC,r));let h=/^\s*/.exec(d)[0].length,f=/\s*$/.exec(u)[0].length,p=u.length-f-e.length;return d.slice(h,h+t.length)==t&&u.slice(p,p+e.length)==e?{open:{pos:i+h+t.length,margin:/\s/.test(d.charAt(h+t.length))?1:0},close:{pos:r-f-e.length,margin:/\s/.test(u.charAt(p-1))?1:0}}:null}function prt(n){let t=[];for(let e of n.selection.ranges){let i=n.doc.lineAt(e.from),r=e.to<=i.to?i:n.doc.lineAt(e.to);r.from>i.from&&r.from==e.to&&(r=e.to==i.to+1?i:n.doc.lineAt(e.to-1));let o=t.length-1;o>=0&&t[o].to>i.from?t[o].to=r.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return t}function tme(n,t,e=t.selection.ranges){let i=e.map(o=>HW(t,o.from).block);if(!i.every(o=>o))return null;let r=e.map((o,s)=>frt(t,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:t.changes(e.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let l=i[s],{open:c,close:d}=a;o.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:d.pos-d.margin,to:d.pos+l.close.length})}return{changes:o}}return null}function mrt(n,t,e=t.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of e){let a=i.length,l=1e9,c=HW(t,o).line;if(c){for(let d=o;d<=s;){let u=t.doc.lineAt(d);if(u.from>r&&(o==s||s>u.from)){r=u.from;let h=/^\s*/.exec(u.text)[0].length,f=h==u.length,p=u.text.slice(h,h+c.length)==c?h:-1;h<u.text.length&&h<l&&(l=h),i.push({line:u,comment:p,token:c,indent:h,empty:f,single:!1})}d=u.to+1}if(l<1e9)for(let d=a;d<i.length;d++)i[d].indent<i[d].line.text.length&&(i[d].indent=l);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:l,indent:c,empty:d,single:u}of i)(u||!d)&&o.push({from:a.from+c,insert:l+" "});let s=t.changes(o);return{changes:s,selection:t.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:l}of i)if(a>=0){let c=s.from+a,d=c+l.length;s.text[d-s.from]==" "&&d++,o.push({from:c,to:d})}return{changes:o}}return null}function Hv(n,t){return Dt.create(n.ranges.map(t),n.mainIndex)}function Ud(n,t){return n.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function jd({state:n,dispatch:t},e){let i=Hv(n.selection,e);return i.eq(n.selection,!0)?!1:(t(Ud(n,i)),!0)}function eD(n,t){return Dt.cursor(t?n.to:n.from)}function nme(n,t){return jd(n,e=>e.empty?n.moveByChar(e,t):eD(e,t))}function xa(n){return n.textDirectionAt(n.state.selection.main.head)==go.LTR}var ime=n=>nme(n,!xa(n)),rme=n=>nme(n,xa(n));function ome(n,t){return jd(n,e=>e.empty?n.moveByGroup(e,t):eD(e,t))}var grt=n=>ome(n,!xa(n)),yrt=n=>ome(n,xa(n));var Wqt=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function vrt(n,t,e){if(t.type.prop(e))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(t.from,t.to)))||t.firstChild}function tD(n,t,e){let i=Vd(n).resolveInner(t.head),r=e?Mi.closedBy:Mi.openedBy;for(let l=t.head;;){let c=e?i.childAfter(l):i.childBefore(l);if(!c)break;vrt(n,c,r)?i=c:l=e?c.to:c.from}let o=i.type.prop(r),s,a;return o&&(s=e?eg(n,i.from,1):eg(n,i.to,-1))&&s.matched?a=e?s.end.to:s.end.from:a=e?i.to:i.from,Dt.cursor(a,e?-1:1)}var _rt=n=>jd(n,t=>tD(n.state,t,!xa(n))),brt=n=>jd(n,t=>tD(n.state,t,xa(n)));function sme(n,t){return jd(n,e=>{if(!e.empty)return eD(e,t);let i=n.moveVertically(e,t);return i.head!=e.head?i:n.moveToLineBoundary(e,t)})}var ame=n=>sme(n,!1),lme=n=>sme(n,!0);function cme(n){let t=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,e=0,i=0,r;if(t){for(let o of n.state.facet(lo.scrollMargins)){let s=o(n);s?.top&&(e=Math.max(s?.top,e)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-e-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:e,marginBottom:i,selfScroll:t,height:Math.max(n.defaultLineHeight,r-5)}}function dme(n,t){let e=cme(n),{state:i}=n,r=Hv(i.selection,s=>s.empty?n.moveVertically(s,t,e.height):eD(s,t));if(r.eq(i.selection))return!1;let o;if(e.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+e.marginTop,c=a.bottom-e.marginBottom;s&&s.top>l&&s.bottom<c&&(o=lo.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-l}))}return n.dispatch(Ud(i,r),{effects:o}),!0}var K0e=n=>dme(n,!1),VW=n=>dme(n,!0);function C0(n,t,e){let i=n.lineBlockAt(t.head),r=n.moveToLineBoundary(t,e);if(r.head==t.head&&r.head!=(e?i.to:i.from)&&(r=n.moveToLineBoundary(t,e,!1)),!e&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&t.head!=i.from+o&&(r=Dt.cursor(i.from+o))}return r}var wrt=n=>jd(n,t=>C0(n,t,!0)),Srt=n=>jd(n,t=>C0(n,t,!1)),Crt=n=>jd(n,t=>C0(n,t,!xa(n))),xrt=n=>jd(n,t=>C0(n,t,xa(n))),krt=n=>jd(n,t=>Dt.cursor(n.lineBlockAt(t.head).from,1)),Mrt=n=>jd(n,t=>Dt.cursor(n.lineBlockAt(t.head).to,-1));function Trt(n,t,e){let i=!1,r=Hv(n.selection,o=>{let s=eg(n,o.head,-1)||eg(n,o.head,1)||o.head>0&&eg(n,o.head-1,1)||o.head<n.doc.length&&eg(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return e?Dt.range(o.anchor,a):Dt.cursor(a)});return i?(t(Ud(n,r)),!0):!1}var Ert=({state:n,dispatch:t})=>Trt(n,t,!1);function zc(n,t){let e=Hv(n.state.selection,i=>{let r=t(i);return Dt.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return e.eq(n.state.selection)?!1:(n.dispatch(Ud(n.state,e)),!0)}function ume(n,t){return zc(n,e=>n.moveByChar(e,t))}var hme=n=>ume(n,!xa(n)),fme=n=>ume(n,xa(n));function pme(n,t){return zc(n,e=>n.moveByGroup(e,t))}var Art=n=>pme(n,!xa(n)),Drt=n=>pme(n,xa(n));var Irt=n=>zc(n,t=>tD(n.state,t,!xa(n))),Frt=n=>zc(n,t=>tD(n.state,t,xa(n)));function mme(n,t){return zc(n,e=>n.moveVertically(e,t))}var gme=n=>mme(n,!1),yme=n=>mme(n,!0);function vme(n,t){return zc(n,e=>n.moveVertically(e,t,cme(n).height))}var G0e=n=>vme(n,!1),X0e=n=>vme(n,!0),Prt=n=>zc(n,t=>C0(n,t,!0)),Lrt=n=>zc(n,t=>C0(n,t,!1)),Rrt=n=>zc(n,t=>C0(n,t,!xa(n))),Ort=n=>zc(n,t=>C0(n,t,xa(n))),Nrt=n=>zc(n,t=>Dt.cursor(n.lineBlockAt(t.head).from)),Brt=n=>zc(n,t=>Dt.cursor(n.lineBlockAt(t.head).to)),Y0e=({state:n,dispatch:t})=>(t(Ud(n,{anchor:0})),!0),Z0e=({state:n,dispatch:t})=>(t(Ud(n,{anchor:n.doc.length})),!0),Q0e=({state:n,dispatch:t})=>(t(Ud(n,{anchor:n.selection.main.anchor,head:0})),!0),J0e=({state:n,dispatch:t})=>(t(Ud(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),Vrt=({state:n,dispatch:t})=>(t(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),Urt=({state:n,dispatch:t})=>{let e=nD(n).map(({from:i,to:r})=>Dt.range(i,Math.min(r+1,n.doc.length)));return t(n.update({selection:Dt.create(e),userEvent:"select"})),!0},jrt=({state:n,dispatch:t})=>{let e=Hv(n.selection,i=>{let r=Vd(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return Dt.range(a.to,a.from)}return i});return e.eq(n.selection)?!1:(t(Ud(n,e)),!0)};function _me(n,t){let{state:e}=n,i=e.selection,r=e.selection.ranges.slice();for(let o of e.selection.ranges){let s=e.doc.lineAt(o.head);if(t?s.to<n.state.doc.length:s.from>0)for(let a=o;;){let l=n.moveVertically(a,t);if(l.head<s.from||l.head>s.to){r.some(c=>c.head==l.head)||r.push(l);break}else{if(l.head==a.head)break;a=l}}}return r.length==i.ranges.length?!1:(n.dispatch(Ud(e,Dt.create(r,r.length-1))),!0)}var Hrt=n=>_me(n,!1),Wrt=n=>_me(n,!0),zrt=({state:n,dispatch:t})=>{let e=n.selection,i=null;return e.ranges.length>1?i=Dt.create([e.main]):e.main.empty||(i=Dt.create([Dt.cursor(e.main.head)])),i?(t(Ud(n,i)),!0):!1};function rC(n,t){if(n.state.readOnly)return!1;let e="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let l=t(o);l<s?(e="delete.backward",l=JA(n,l,!1)):l>s&&(e="delete.forward",l=JA(n,l,!0)),s=Math.min(s,l),a=Math.max(a,l)}else s=JA(n,s,!1),a=JA(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:Dt.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?lo.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function JA(n,t,e){if(n instanceof lo)for(let i of n.state.facet(lo.atomicRanges).map(r=>r(n)))i.between(t,t,(r,o)=>{r<t&&o>t&&(t=e?o:r)});return t}var bme=(n,t,e)=>rC(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,l;if(e&&!t&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let c=q1(a,o.tabSize),d=c%tC(o)||tC(o);for(let u=0;u<d&&a[a.length-1-u]==" ";u++)r--;l=r}else l=vs(s.text,r-s.from,t,t)+s.from,l==r&&s.number!=(t?o.doc.lines:1)?l+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(s.text.slice(l-s.from,r-s.from))&&(l=vs(s.text,l-s.from,!1,!1)+s.from);return l}),UW=n=>bme(n,!1,!0);var wme=n=>bme(n,!0,!1),Sme=(n,t)=>rC(n,e=>{let i=e.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(t?o.to:o.from)){i==e.head&&o.number!=(t?r.doc.lines:1)&&(i+=t?1:-1);break}let l=vs(o.text,i-o.from,t)+o.from,c=o.text.slice(Math.min(i,l)-o.from,Math.max(i,l)-o.from),d=s(c);if(a!=null&&d!=a)break;(c!=" "||i!=e.head)&&(a=d),i=l}return i}),Cme=n=>Sme(n,!1),qrt=n=>Sme(n,!0);var $rt=n=>rC(n,t=>{let e=n.lineBlockAt(t.head).to;return t.head<e?e:Math.min(n.state.doc.length,t.head+1)});var Krt=n=>rC(n,t=>{let e=n.moveToLineBoundary(t,!1).head;return t.head>e?e:Math.max(0,t.head-1)}),Grt=n=>rC(n,t=>{let e=n.moveToLineBoundary(t,!0).head;return t.head<e?e:Math.min(n.state.doc.length,t.head+1)});var Xrt=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:cr.of(["",""])},range:Dt.cursor(i.from)}));return t(n.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},Yrt=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:vs(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:vs(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:Dt.cursor(a)}});return e.changes.empty?!1:(t(n.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function nD(n){let t=[],e=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),e>=r.number){let s=t[t.length-1];s.to=o.to,s.ranges.push(i)}else t.push({from:r.from,to:o.to,ranges:[i]});e=o.number+1}return t}function xme(n,t,e){if(n.readOnly)return!1;let i=[],r=[];for(let o of nD(n)){if(e?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(e?o.to+1:o.from-1),a=s.length+1;if(e){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let l of o.ranges)r.push(Dt.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let l of o.ranges)r.push(Dt.range(l.anchor-a,l.head-a))}}return i.length?(t(n.update({changes:i,scrollIntoView:!0,selection:Dt.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}var Zrt=({state:n,dispatch:t})=>xme(n,t,!1),Qrt=({state:n,dispatch:t})=>xme(n,t,!0);function kme(n,t,e){if(n.readOnly)return!1;let i=[];for(let r of nD(n))e?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return t(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var Jrt=({state:n,dispatch:t})=>kme(n,t,!1),eot=({state:n,dispatch:t})=>kme(n,t,!0),tot=n=>{if(n.state.readOnly)return!1;let{state:t}=n,e=t.changes(nD(t).map(({from:r,to:o})=>(r>0?r--:o<t.doc.length&&o++,{from:r,to:o}))),i=Hv(t.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(e);return n.dispatch({changes:e,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function not(n,t){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=Vd(n).resolveInner(t),i=e.childBefore(t),r=e.childAfter(t),o;return i&&r&&i.to<=t&&r.from>=t&&(o=i.type.prop(Mi.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}var eme=Mme(!1),iot=Mme(!0);function Mme(n){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(r=>{let{from:o,to:s}=r,a=t.doc.lineAt(o),l=!n&&o==s&&not(t,o);n&&(o=s=(s<=a.to?a:t.doc.lineAt(s)).to);let c=new J1(t,{simulateBreak:o,simulateDoubleBreak:!!l}),d=OW(c,o);for(d==null&&(d=q1(/^\s*/.exec(t.doc.lineAt(o).text)[0],t.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;l?{from:o,to:s}=l:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let u=["",nC(t,d)];return l&&u.push(nC(t,c.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:cr.of(u)},range:Dt.cursor(o+1+u[1].length)}});return e(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function WW(n,t){let e=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>e&&(i.empty||i.to>a.from)&&(t(a,r,i),e=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:Dt.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}var rot=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=Object.create(null),i=new J1(n,{overrideIndentation:o=>{let s=e[o];return s??-1}}),r=WW(n,(o,s,a)=>{let l=OW(i,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let c=/^\s*/.exec(o.text)[0],d=nC(n,l);(c!=d||a.from<o.from+c.length)&&(e[o.from]=l,s.push({from:o.from,to:o.from+c.length,insert:d}))});return r.changes.empty||t(n.update(r,{userEvent:"indent"})),!0},Tme=({state:n,dispatch:t})=>n.readOnly?!1:(t(n.update(WW(n,(e,i)=>{i.push({from:e.from,insert:n.facet(QA)})}),{userEvent:"input.indent"})),!0),Eme=({state:n,dispatch:t})=>n.readOnly?!1:(t(n.update(WW(n,(e,i)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let o=q1(r,n.tabSize),s=0,a=nC(n,Math.max(0,o-tC(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:e.from+s,to:e.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),oot=n=>(n.setTabFocusMode(),!0);var sot=[{key:"Ctrl-b",run:ime,shift:hme,preventDefault:!0},{key:"Ctrl-f",run:rme,shift:fme},{key:"Ctrl-p",run:ame,shift:gme},{key:"Ctrl-n",run:lme,shift:yme},{key:"Ctrl-a",run:krt,shift:Nrt},{key:"Ctrl-e",run:Mrt,shift:Brt},{key:"Ctrl-d",run:wme},{key:"Ctrl-h",run:UW},{key:"Ctrl-k",run:$rt},{key:"Ctrl-Alt-h",run:Cme},{key:"Ctrl-o",run:Xrt},{key:"Ctrl-t",run:Yrt},{key:"Ctrl-v",run:VW}],aot=[{key:"ArrowLeft",run:ime,shift:hme,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:grt,shift:Art,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Crt,shift:Rrt,preventDefault:!0},{key:"ArrowRight",run:rme,shift:fme,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:yrt,shift:Drt,preventDefault:!0},{mac:"Cmd-ArrowRight",run:xrt,shift:Ort,preventDefault:!0},{key:"ArrowUp",run:ame,shift:gme,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Y0e,shift:Q0e},{mac:"Ctrl-ArrowUp",run:K0e,shift:G0e},{key:"ArrowDown",run:lme,shift:yme,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Z0e,shift:J0e},{mac:"Ctrl-ArrowDown",run:VW,shift:X0e},{key:"PageUp",run:K0e,shift:G0e},{key:"PageDown",run:VW,shift:X0e},{key:"Home",run:Srt,shift:Lrt,preventDefault:!0},{key:"Mod-Home",run:Y0e,shift:Q0e},{key:"End",run:wrt,shift:Prt,preventDefault:!0},{key:"Mod-End",run:Z0e,shift:J0e},{key:"Enter",run:eme,shift:eme},{key:"Mod-a",run:Vrt},{key:"Backspace",run:UW,shift:UW,preventDefault:!0},{key:"Delete",run:wme,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Cme,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:qrt,preventDefault:!0},{mac:"Mod-Backspace",run:Krt,preventDefault:!0},{mac:"Mod-Delete",run:Grt,preventDefault:!0}].concat(sot.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Ame=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:_rt,shift:Irt},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:brt,shift:Frt},{key:"Alt-ArrowUp",run:Zrt},{key:"Shift-Alt-ArrowUp",run:Jrt},{key:"Alt-ArrowDown",run:Qrt},{key:"Shift-Alt-ArrowDown",run:eot},{key:"Mod-Alt-ArrowUp",run:Hrt},{key:"Mod-Alt-ArrowDown",run:Wrt},{key:"Escape",run:zrt},{key:"Mod-Enter",run:iot},{key:"Alt-l",mac:"Ctrl-l",run:Urt},{key:"Mod-i",run:jrt,preventDefault:!0},{key:"Mod-[",run:Eme},{key:"Mod-]",run:Tme},{key:"Mod-Alt-\\",run:rot},{key:"Shift-Mod-k",run:tot},{key:"Shift-Mod-\\",run:Ert},{key:"Mod-/",run:crt},{key:"Alt-A",run:urt},{key:"Ctrl-m",mac:"Shift-Alt-m",run:oot}].concat(aot),Dme={key:"Tab",run:Tme,shift:Eme};var qW=class n{constructor(t,e,i,r,o,s,a,l,c,d=0,u){this.p=t,this.stack=e,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=d,this.parent=u}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,i=0){let r=t.parser.context;return new n(t,[],e,i,i,0,[],0,r?new iD(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let i=t>>19,r=t&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let l=this.stack.length-(i-1)*3-(t&262144?6:0),c=l?this.stack[l-2]:this.p.ranges[0].from,d=this.reducePos-c;d>=2e3&&!(!((e=this.p.parser.nodeSet.types[r])===null||e===void 0)&&e.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=d));let u=l?this.stack[l-1]:0,h=this.bufferBase+this.buffer.length-u;if(r<o.minRepeatTerm||t&131072){let f=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,c,f,h+4,!0)}if(t&262144)this.state=this.stack[l];else{let f=this.stack[l-3];this.state=o.getGoto(f,r,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(r,c)}storeNode(t,e,i,r=4,o=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(e==i)return;if(s.buffer[a-2]>=e){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(t,e,i,r);else{let s=this.buffer.length;if(s>0&&(this.buffer[s-4]!=0||this.buffer[s-1]<0)){let a=!1;for(let l=s;l>0&&this.buffer[l-2]>i;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=t,this.buffer[s+1]=e,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(t,e,i,r){if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let o=t,{parser:s}=this.p;(r>this.pos||e<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(e,i),e<=s.maxNode&&this.buffer.push(e,i,r,4)}else this.pos=r,this.shiftContext(e,i),e<=this.p.parser.maxNode&&this.buffer.push(e,i,r,4)}apply(t,e,i,r){t&65536?this.reduce(t):this.shift(t,e,i,r)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(e,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),r=t.bufferBase+e;for(;t&&r==t.bufferBase;)t=t.parent;return new n(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new $W(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(i==0)return!1;if((i&65536)==0)return!0;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<e.length;o+=2)(s=e[o+1])!=this.state&&this.p.parser.hasAction(s,t)&&r.push(e[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<e.length;o+=2){let s=e[o+1];r.some((a,l)=>l&1&&a==s)||r.push(e[o],s)}e=r}let i=[];for(let r=0;r<e.length&&i.length<4;r+=2){let o=e[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(e[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if((e&65536)==0)return!1;if(!t.validAction(this.state,e)){let i=e>>19,r=e&65535,o=this.stack.length-i*3;if(o<0||t.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;e=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],i=(r,o)=>{if(!e.includes(r))return e.push(r),t.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let l=s&65535,c=this.stack.length-a*3;if(c>=0&&t.getGoto(this.stack[c],l,!1)>=0)return a<<19|65536|l}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new iD(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){return t<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=t,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},iD=class{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}},$W=class{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,i=t>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=r}},KW=class n{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new n(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new n(this.stack,this.pos,this.index)}};function oC(n,t=Uint16Array){if(typeof n!="string")return n;let e=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let l=s-32;if(l>=46&&(l-=46,a=!0),o+=l,a)break;o*=46}e?e[r++]=o:e=new t(o)}return e}var Wv=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},Ime=new Wv,GW=class{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Ime,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let i=this.range,r=this.rangeIndex,o=this.pos+t;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;e<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,i,r;if(e>=0&&e<this.chunk.length)i=this.pos+t,r=this.chunk.charCodeAt(e);else{let o=this.resolveOffset(t,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(t,e=0){let i=e?this.resolveOffset(e,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}acceptTokenTo(t,e){this.token.value=t,this.token.end=e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=Ime,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let i="";for(let r of this.ranges){if(r.from>=e)break;r.to>t&&(i+=this.input.read(Math.max(r.from,t),Math.min(r.to,e)))}return i}},x0=class{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:i}=e.p;Ome(this.data,t,e,this.id,i.data,i.tokenPrecTable)}};x0.prototype.contextual=x0.prototype.fallback=x0.prototype.extend=!1;var XW=class{constructor(t,e,i){this.precTable=e,this.elseToken=i,this.data=typeof t=="string"?oC(t):t}token(t,e){let i=t.pos,r=0;for(;;){let o=t.next<0,s=t.resolveOffset(1,1);if(Ome(this.data,t,e,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(o||r++,s==null)break;t.reset(s,t.token)}r&&(t.reset(i,t.token),t.acceptToken(this.elseToken,r))}};XW.prototype.contextual=x0.prototype.fallback=x0.prototype.extend=!1;function Ome(n,t,e,i,r,o){let s=0,a=1<<i,{dialect:l}=e.p.parser;e:for(;(a&n[s])!=0;){let c=n[s+1];for(let f=s+3;f<c;f+=2)if((n[f+1]&a)>0){let p=n[f];if(l.allows(p)&&(t.token.value==-1||t.token.value==p||cot(p,t.token.value,r,o))){t.acceptToken(p);break}}let d=t.next,u=0,h=n[s+2];if(t.next<0&&h>u&&n[c+h*3-3]==65535){s=n[c+h*3-1];continue e}for(;u<h;){let f=u+h>>1,p=c+f+(f<<1),y=n[p],v=n[p+1]||65536;if(d<y)h=f;else if(d>=v)u=f+1;else{s=n[p+2],t.advance();continue e}}break}}function Fme(n,t,e){for(let i=t,r;(r=n[i])!=65535;i++)if(r==e)return i-t;return-1}function cot(n,t,e,i){let r=Fme(e,i,t);return r<0||Fme(e,i,n)<r}var ic=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG),zW=null;function Pme(n,t,e){let i=n.cursor(_s.IncludeAnonymous);for(i.moveTo(t);;)if(!(e<0?i.childBefore(t):i.childAfter(t)))for(;;){if((e<0?i.to<t:i.from>t)&&!i.type.isError)return e<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(n.length,Math.max(i.from+1,t+25));if(e<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return e<0?0:n.length}}var YW=class{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?Pme(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?Pme(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let i=this.trees[e],r=this.index[e];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[e]+i.positions[r];if(s>t)return this.nextStart=s,null;if(o instanceof Go){if(s==t){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let l=o.prop(Mi.lookAhead);if(!l||a+l<this.fragment.to)return o}}this.index[e]++,s+o.length>=Math.max(this.safeFrom,t)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[e]++,this.nextStart=s+o.length}}},ZW=class{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(i=>new Wv)}getActions(t){let e=0,i=null,{parser:r}=t.p,{tokenizers:o}=r,s=r.stateSlot(t.state,3),a=t.curContext?t.curContext.hash:0,l=0;for(let c=0;c<o.length;c++){if((1<<c&s)==0)continue;let d=o[c],u=this.tokens[c];if(!(i&&!d.fallback)&&((d.contextual||u.start!=t.pos||u.mask!=s||u.context!=a)&&(this.updateCachedToken(u,d,t),u.mask=s,u.context=a),u.lookAhead>u.end+25&&(l=Math.max(u.lookAhead,l)),u.value!=0)){let h=e;if(u.extended>-1&&(e=this.addActions(t,u.extended,u.end,e)),e=this.addActions(t,u.value,u.end,e),!d.extend&&(i=u,e>h))break}}for(;this.actions.length>e;)this.actions.pop();return l&&t.setLookAhead(l),!i&&t.pos==this.stream.end&&(i=new Wv,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,e=this.addActions(t,i.value,i.end,e)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new Wv,{pos:i,p:r}=t;return e.start=i,e.end=Math.min(i+1,r.stream.end),e.value=i==r.stream.end?r.parser.eofTerm:0,e}updateCachedToken(t,e,i){let r=this.stream.clipPos(i.pos);if(e.token(this.stream.reset(r,t),i),t.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==t.value){let a=o.specializers[s](this.stream.read(t.start,t.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?t.value=a>>1:t.extended=a>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,e,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==t)return r;return this.actions[r++]=t,this.actions[r++]=e,this.actions[r++]=i,r}addActions(t,e,i,r){let{state:o}=t,{parser:s}=t.p,{data:a}=s;for(let l=0;l<2;l++)for(let c=s.stateSlot(o,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=vf(a,c+2);else{r==0&&a[c+1]==2&&(r=this.putAction(vf(a,c+2),e,i,r));break}a[c]==e&&(r=this.putAction(vf(a,c+1),e,i,r))}return r}},QW=class{constructor(t,e,i,r){this.parser=t,this.input=e,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new GW(e,r),this.tokens=new ZW(t,this.stream),this.topTerm=t.top[1];let{from:o}=r[0];this.stacks=[qW.start(this,t.top[0],o)],this.fragments=i.length&&this.stream.end-o>t.bufferLength*4?new YW(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&t.length==1){let[s]=t;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<t.length;s++){let a=t[s];for(;;){if(this.tokens.mainToken=null,a.pos>e)i.push(a);else{if(this.advanceStack(a,i,t))continue;{r||(r=[],o=[]),r.push(a);let l=this.tokens.getMainToken(a);o.push(l.value,l.end)}}break}}if(!i.length){let s=r&&dot(r);if(s)return ic&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw ic&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return ic&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,l)=>l.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>e)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let l=s+1;l<i.length;l++){let c=i[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)i.splice(l--,1);else{i.splice(s--,1);continue e}}}i.length>12&&(i.sort((s,a)=>a.score-s.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,i){let r=t.pos,{parser:o}=this,s=ic?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let c=t.curContext&&t.curContext.tracker.strict,d=c?t.curContext.hash:0;for(let u=this.fragments.nodeAt(r);u;){let h=this.parser.nodeSet.types[u.type.id]==u.type?o.getGoto(t.state,u.type.id):-1;if(h>-1&&u.length&&(!c||(u.prop(Mi.contextHash)||0)==d))return t.useNode(u,h),ic&&console.log(s+this.stackID(t)+` (via reuse of ${o.getName(u.type.id)})`),!0;if(!(u instanceof Go)||u.children.length==0||u.positions[0]>0)break;let f=u.children[0];if(f instanceof Go&&u.positions[0]==0)u=f;else break}}let a=o.stateSlot(t.state,4);if(a>0)return t.reduce(a),ic&&console.log(s+this.stackID(t)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let l=this.tokens.getActions(t);for(let c=0;c<l.length;){let d=l[c++],u=l[c++],h=l[c++],f=c==l.length||!i,p=f?t:t.split(),y=this.tokens.mainToken;if(p.apply(d,u,y?y.start:p.pos,h),ic&&console.log(s+this.stackID(p)+` (via ${(d&65536)==0?"shift":`reduce of ${o.getName(d&65535)}`} for ${o.getName(u)} @ ${r}${p==t?"":", split"})`),f)return!0;p.pos>r?e.push(p):i.push(p)}return!1}advanceFully(t,e){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return Lme(t,e),!0}}runRecovery(t,e,i){let r=null,o=!1;for(let s=0;s<t.length;s++){let a=t[s],l=e[s<<1],c=e[(s<<1)+1],d=ic?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),ic&&console.log(d+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let u=a.split(),h=d;for(let f=0;f<10&&u.forceReduce()&&(ic&&console.log(h+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));f++)ic&&(h=this.stackID(u)+" -> ");for(let f of a.recoverByInsert(l))ic&&console.log(d+this.stackID(f)+" (via recover-insert)"),this.advanceFully(f,i);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),ic&&console.log(d+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),Lme(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(t){return t.close(),Go.build({buffer:KW.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(zW||(zW=new WeakMap)).get(t);return e||zW.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}};function Lme(n,t){for(let e=0;e<t.length;e++){let i=t[e];if(i.pos==n.pos&&i.sameState(n)){t[e].score<n.score&&(t[e]=n);return}}t.push(n)}var JW=class{constructor(t,e,i){this.source=t,this.flags=e,this.disabled=i}allows(t){return!this.disabled||this.disabled[t]==0}};var rD=class n extends Bv{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let a=0;a<t.repeatNodeCount;a++)e.push("");let i=Object.keys(t.topRules).map(a=>t.topRules[a][1]),r=[];for(let a=0;a<e.length;a++)r.push([]);function o(a,l,c){r[a].push([l,l.deserialize(String(c))])}if(t.nodeProps)for(let a of t.nodeProps){let l=a[0];typeof l=="string"&&(l=Mi[l]);for(let c=1;c<a.length;){let d=a[c++];if(d>=0)o(d,l,a[c++]);else{let u=a[c+-d];for(let h=-d;h>0;h--)o(a[c++],l,u);c++}}}this.nodeSet=new GS(e.map((a,l)=>Ca.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:r[l],top:i.indexOf(l)>-1,error:l==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(l)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=1024;let s=oC(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(Rme),this.states=oC(t.states,Uint32Array),this.data=oC(t.stateData),this.goto=oC(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(a=>typeof a=="number"?new x0(s,a):a),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let r=new QW(this,t,e,i);for(let o of this.wrappers)r=o(r,t,e,i);return r}getGoto(t,e,i=!1){let r=this.goto;if(e>=r[0])return-1;for(let o=r[e+1];;){let s=r[o++],a=s&1,l=r[o++];if(a&&i)return l;for(let c=o+(s>>1);o<c;o++)if(r[o]==t)return l;if(a)return-1}}hasAction(t,e){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(t,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=vf(i,o+2)];else{if(i[o+1]==2)return vf(i,o+2);break}if(s==e||s==0)return vf(i,o+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,i=>i==e?!0:null)}allActions(t,e){let i=this.stateSlot(t,4),r=i?e(i):void 0;for(let o=this.stateSlot(t,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=vf(this.data,o+2);else break;r=e(vf(this.data,o+1))}return r}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=vf(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];e.some((o,s)=>s&1&&o==r)||e.push(this.data[i],r)}}return e}configure(t){let e=Object.assign(Object.create(n.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(i=>{let r=t.tokenizers.find(o=>o.from==i);return r?r.to:i})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=t.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return e.specializers[r]=Rme(s),s})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map(()=>!1);if(t)for(let o of t.split(" ")){let s=e.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<e.length;o++)if(!i[o])for(let s=this.dialects[e[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new JW(t,i,r)}static deserialize(t){return new n(t)}};function vf(n,t){return n[t]|n[t+1]<<16}function dot(n){let t=null;for(let e of n){let i=e.p.stoppedAt;(e.pos==e.p.stream.end||i!=null&&e.pos>i)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function Rme(n){if(n.external){let t=n.extend?1:0;return(e,i)=>n.external(e,i)<<1|t}return n.get}var uot=XA({String:Pe.string,Number:Pe.number,"True False":Pe.bool,PropertyName:Pe.propertyName,Null:Pe.null,", :":Pe.separator,"[ ]":Pe.squareBracket,"{ }":Pe.brace}),Nme=rD.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26A0 JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[uot],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var Bme=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(t){if(!(t instanceof SyntaxError))throw t;let e=hot(t,n.state.doc);return[{from:e,message:t.message,severity:"error",to:e}]}return[]};function hot(n,t){let e;return(e=n.message.match(/at position (\d+)/))?Math.min(+e[1],t.length):(e=n.message.match(/at line (\d+) column (\d+)/))?Math.min(t.line(+e[1]).from+ +e[2]-1,t.length):0}var fot=YA.define({name:"json",parser:Nme.configure({props:[NW.add({Object:BW({except:/^\s*\}/}),Array:BW({except:/^\s*\]/})}),W0e.add({"Object Array":z0e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Vme(){return new ZA(fot)}function zv(){return zv=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},zv.apply(null,arguments)}var oD=n=>{var{theme:t,settings:e={},styles:i=[]}=n,r={".cm-gutters":{}},o={};e.background&&(o.backgroundColor=e.background),e.backgroundImage&&(o.backgroundImage=e.backgroundImage),e.foreground&&(o.color=e.foreground),e.fontSize&&(o.fontSize=e.fontSize),(e.background||e.foreground)&&(r["&"]=o),e.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:e.fontFamily}),e.gutterBackground&&(r[".cm-gutters"].backgroundColor=e.gutterBackground),e.gutterForeground&&(r[".cm-gutters"].color=e.gutterForeground),e.gutterBorder&&(r[".cm-gutters"].borderRightColor=e.gutterBorder),e.caret&&(r[".cm-content"]={caretColor:e.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:e.caret});var s={};e.gutterActiveForeground&&(s.color=e.gutterActiveForeground),e.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:e.lineHighlight},s.backgroundColor=e.lineHighlight),r[".cm-activeLineGutter"]=s,e.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:e.selection+" !important"}),e.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:e.selectionMatch});var a=lo.theme(r,{dark:t==="dark"}),l=jv.define(i),c=[a,$0e(l)];return c};var pot={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},mot=[{tag:[Pe.keyword,Pe.operatorKeyword,Pe.modifier,Pe.color,Pe.constant(Pe.name),Pe.standard(Pe.name),Pe.standard(Pe.tagName),Pe.special(Pe.brace),Pe.atom,Pe.bool,Pe.special(Pe.variableName)],color:"#0000ff"},{tag:[Pe.moduleKeyword,Pe.controlKeyword],color:"#af00db"},{tag:[Pe.name,Pe.deleted,Pe.character,Pe.macroName,Pe.propertyName,Pe.variableName,Pe.labelName,Pe.definition(Pe.name)],color:"#0070c1"},{tag:Pe.heading,fontWeight:"bold",color:"#0070c1"},{tag:[Pe.typeName,Pe.className,Pe.tagName,Pe.number,Pe.changed,Pe.annotation,Pe.self,Pe.namespace],color:"#267f99"},{tag:[Pe.function(Pe.variableName),Pe.function(Pe.propertyName)],color:"#795e26"},{tag:[Pe.number],color:"#098658"},{tag:[Pe.operator,Pe.punctuation,Pe.separator,Pe.url,Pe.escape,Pe.regexp],color:"#383a42"},{tag:[Pe.regexp],color:"#af00db"},{tag:[Pe.special(Pe.string),Pe.processingInstruction,Pe.string,Pe.inserted],color:"#a31515"},{tag:[Pe.angleBracket],color:"#383a42"},{tag:Pe.strong,fontWeight:"bold"},{tag:Pe.emphasis,fontStyle:"italic"},{tag:Pe.strikethrough,textDecoration:"line-through"},{tag:[Pe.meta,Pe.comment],color:"#008000"},{tag:Pe.link,color:"#4078f2",textDecoration:"underline"},{tag:Pe.invalid,color:"#e45649"}];function got(n){var{theme:t="light",settings:e={},styles:i=[]}=n||{};return oD({theme:t,settings:zv({},pot,e),styles:[...mot,...i]})}var Ume=got();var yot={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},vot=[{tag:[Pe.keyword,Pe.operatorKeyword,Pe.modifier,Pe.color,Pe.constant(Pe.name),Pe.standard(Pe.name),Pe.standard(Pe.tagName),Pe.special(Pe.brace),Pe.atom,Pe.bool,Pe.special(Pe.variableName)],color:"#569cd6"},{tag:[Pe.controlKeyword,Pe.moduleKeyword],color:"#c586c0"},{tag:[Pe.name,Pe.deleted,Pe.character,Pe.macroName,Pe.propertyName,Pe.variableName,Pe.labelName,Pe.definition(Pe.name)],color:"#9cdcfe"},{tag:Pe.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[Pe.typeName,Pe.className,Pe.tagName,Pe.number,Pe.changed,Pe.annotation,Pe.self,Pe.namespace],color:"#4ec9b0"},{tag:[Pe.function(Pe.variableName),Pe.function(Pe.propertyName)],color:"#dcdcaa"},{tag:[Pe.number],color:"#b5cea8"},{tag:[Pe.operator,Pe.punctuation,Pe.separator,Pe.url,Pe.escape,Pe.regexp],color:"#d4d4d4"},{tag:[Pe.regexp],color:"#d16969"},{tag:[Pe.special(Pe.string),Pe.processingInstruction,Pe.string,Pe.inserted],color:"#ce9178"},{tag:[Pe.angleBracket],color:"#808080"},{tag:Pe.strong,fontWeight:"bold"},{tag:Pe.emphasis,fontStyle:"italic"},{tag:Pe.strikethrough,textDecoration:"line-through"},{tag:[Pe.meta,Pe.comment],color:"#6a9955"},{tag:Pe.link,color:"#6a9955",textDecoration:"underline"},{tag:Pe.invalid,color:"#ff0000"}];function _ot(n){var{theme:t="dark",settings:e={},styles:i=[]}=n||{};return oD({theme:t,settings:zv({},yot,e),styles:[...vot,...i]})}var d$t=_ot();var lD=class{constructor(t,e,i){this.from=t,this.to=e,this.diagnostic=i}},tg=class n{constructor(t,e,i){this.diagnostics=t,this.panel=e,this.selected=i}static init(t,e,i){let r=i.facet(ah).markerFilter;r&&(t=r(t,i));let o=t.slice().sort((f,p)=>f.from-p.from||f.to-p.to),s=new ff,a=[],l=0,c=i.doc.iter(),d=0,u=i.doc.length;for(let f=0;;){let p=f==o.length?null:o[f];if(!p&&!a.length)break;let y,v;if(a.length)y=l,v=a.reduce((x,k)=>Math.min(x,k.to),p&&p.from>y?p.from:1e8);else{if(y=p.from,y>u)break;v=p.to,a.push(p),f++}for(;f<o.length;){let x=o[f];if(x.from==y&&(x.to>x.from||x.to==y))a.push(x),f++,v=Math.min(x.to,v);else{v=Math.min(x.from,v);break}}v=Math.min(v,u);let b=!1;if(a.some(x=>x.from==y&&(x.to==v||v==u))&&(b=y==v,!b&&v-y<10)){let x=y-(d+c.value.length);x>0&&(c.next(x),d=y);for(let k=y;;){if(k>=v){b=!0;break}if(!c.lineBreak&&d+c.value.length>k)break;k=d+c.value.length,d+=c.value.length,c.next()}}let S=Yme(a);if(b)s.add(y,y,Vr.widget({widget:new ez(S),diagnostics:a.slice()}));else{let x=a.reduce((k,L)=>L.markClass?k+" "+L.markClass:k,"");s.add(y,v,Vr.mark({class:"cm-lintRange cm-lintRange-"+S+x,diagnostics:a.slice(),inclusiveEnd:a.some(k=>k.to>v)}))}if(l=v,l==u)break;for(let x=0;x<a.length;x++)a[x].to<=l&&a.splice(x--,1)}let h=s.finish();return new n(h,e,qv(h))}};function qv(n,t=null,e=0){let i=null;return n.between(e,1e9,(r,o,{spec:s})=>{if(!(t&&s.diagnostics.indexOf(t)<0))if(!i)i=new lD(r,o,t||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new lD(i.from,o,i.diagnostic)}}),i}function Wme(n,t){let e=t.pos,i=t.end||e,r=n.state.facet(ah).hideOn(n,e,i);if(r!=null)return r;let o=n.startState.doc.lineAt(t.pos);return!!(n.effects.some(s=>s.is(hD))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function bot(n,t){return n.field(Hd,!1)?t:t.concat(wo.appendConfig.of(Qme))}function wot(n,t){return{effects:bot(n,[hD.of(t)])}}var hD=wo.define(),zme=wo.define(),qme=wo.define(),Hd=nl.define({create(){return new tg(Vr.none,null,null)},update(n,t){if(t.docChanged&&n.diagnostics.size){let e=n.diagnostics.map(t.changes),i=null,r=n.panel;if(n.selected){let o=t.changes.mapPos(n.selected.from,1);i=qv(e,n.selected.diagnostic,o)||qv(e,null,o)}!e.size&&r&&t.state.facet(ah).autoPanel&&(r=null),n=new tg(e,r,i)}for(let e of t.effects)if(e.is(hD)){let i=t.state.facet(ah).autoPanel?e.value.length?dD.open:null:n.panel;n=tg.init(e.value,i,t.state)}else e.is(zme)?n=new tg(n.diagnostics,e.value?dD.open:null,n.selected):e.is(qme)&&(n=new tg(n.diagnostics,n.panel,e.value));return n},provide:n=>[OA.from(n,t=>t.panel),lo.decorations.from(n,t=>t.diagnostics)]});var Sot=Vr.mark({class:"cm-lintRange cm-lintRange-active"});function Cot(n,t,e){let{diagnostics:i}=n.state.field(Hd),r,o=-1,s=-1;i.between(t-(e<0?1:0),t+(e>0?1:0),(l,c,{spec:d})=>{if(t>=l&&t<=c&&(l==c||(t>l||e>0)&&(t<c||e<0)))return r=d.diagnostics,o=l,s=c,!1});let a=n.state.facet(ah).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:$me(n,r)}}}:null}function $me(n,t){return ec("ul",{class:"cm-tooltip-lint"},t.map(e=>Xme(n,e,!1)))}var jme=n=>{let t=n.state.field(Hd,!1);return!t||!t.panel?!1:(n.dispatch({effects:zme.of(!1)}),!0)};var xot=nc.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:t}=n.state.facet(ah);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:t}=this.view,{sources:e}=t.facet(ah);e.length&&kot(e.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==t.doc&&this.view.dispatch(wot(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{Il(this.view.state,i)})}}update(n){let t=n.state.facet(ah);(n.docChanged||t!=n.startState.facet(ah)||t.needsRefresh&&t.needsRefresh(n))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function kot(n,t,e){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?t(i):r=setTimeout(()=>t(i),200)},e)}var ah=on.define({combine(n){return le({sources:n.map(t=>t.source).filter(t=>t!=null)},z1(n.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Hme,tooltipFilter:Hme,needsRefresh:(t,e)=>t?e?i=>t(i)||e(i):t:e,hideOn:(t,e)=>t?e?(i,r,o)=>t(i,r,o)||e(i,r,o):t:e,autoPanel:(t,e)=>t||e}))}});function Hme(n,t){return n?t?(e,i)=>t(n(e,i),i):n:t}function Kme(n,t={}){return[ah.of({source:n,config:t}),xot,Qme]}function Gme(n){let t=[];if(n)e:for(let{name:e}of n){for(let i=0;i<e.length;i++){let r=e[i];if(/[a-zA-Z]/.test(r)&&!t.some(o=>o.toLowerCase()==r.toLowerCase())){t.push(r);continue e}}t.push("")}return t}function Xme(n,t,e){var i;let r=e?Gme(t.actions):[];return ec("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},ec("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(n):t.message),(i=t.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=qv(n.state.field(Hd).diagnostics,t);p&&o.apply(n,p.from,p.to)},{name:c}=o,d=r[s]?c.indexOf(r[s]):-1,u=d<0?c:[c.slice(0,d),ec("u",c.slice(d,d+1)),c.slice(d+1)],h=o.markClass?" "+o.markClass:"";return ec("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:l,onmousedown:l,"aria-label":` Action: ${c}${d<0?"":` (access key "${r[s]})"`}.`},u)}),t.source&&ec("div",{class:"cm-diagnosticSource"},t.source))}var ez=class extends gf{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return ec("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}},cD=class{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Xme(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},dD=class n{constructor(t){this.view=t,this.items=[];let e=r=>{if(r.keyCode==27)jme(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=Gme(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=qv(this.view.state.field(Hd).diagnostics,o);l&&o.actions[a].apply(t,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=ec("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:i}),this.dom=ec("div",{class:"cm-panel-lint"},this.list,ec("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>jme(this.view)},"\xD7")),this.update()}get selectedIndex(){let t=this.view.state.field(Hd).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(Hd),i=0,r=!1,o=null,s=new Set;for(t.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let d of c.diagnostics){if(s.has(d))continue;s.add(d);let u=-1,h;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==d){u=f;break}u<0?(h=new cD(this.view,d),this.items.splice(i,0,h),r=!0):(h=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),e&&h.diagnostic==e.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),o=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new cD(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function e(){let i=t;t=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;t!=i.dom;)e();t=i.dom.nextSibling}else this.list.insertBefore(i.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=this.view.state.field(Hd),i=qv(e.diagnostics,this.items[t].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:qme.of(i)})}static open(t){return new n(t)}};function aD(n,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(n)}</svg>')`}function sD(n){return aD(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var Mot=lo.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:sD("#d11")},".cm-lintRange-warning":{backgroundImage:sD("orange")},".cm-lintRange-info":{backgroundImage:sD("#999")},".cm-lintRange-hint":{backgroundImage:sD("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Tot(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Yme(n){let t="hint",e=1;for(let i of n){let r=Tot(i.severity);r>e&&(e=r,t=i.severity)}return t}var uD=class extends Wc{constructor(t){super(),this.diagnostics=t,this.severity=Yme(t)}toDOM(t){let e=document.createElement("div");e.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=t.state.facet(fD).tooltipFilter;return r&&(i=r(i,t.state)),i.length&&(e.onmouseover=()=>Aot(t,e,i)),e}};function Eot(n,t){let e=i=>{let r=t.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",e),n.state.field(Zme)&&n.dispatch({effects:nz.of(null)})}};window.addEventListener("mousemove",e)}function Aot(n,t,e){function i(){let s=n.elementAtHeight(t.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:nz.of({pos:s.from,above:!1,clip:!1,create(){return{dom:$me(n,e),getCoords:()=>t.getBoundingClientRect()}}})}),t.onmouseout=t.onmousemove=null,Eot(n,t)}let{hoverTime:r}=n.state.facet(fD),o=setTimeout(i,r);t.onmouseout=()=>{clearTimeout(o),t.onmouseout=t.onmousemove=null},t.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function Dot(n,t){let e=Object.create(null);for(let r of t){let o=n.lineAt(r.from);(e[o.from]||(e[o.from]=[])).push(r)}let i=[];for(let r in e)i.push(new uD(e[r]).range(+r));return Zr.of(i,!0)}var Iot=fW({class:"cm-gutter-lint",markers:n=>n.state.field(tz),widgetMarker:(n,t,e)=>{let i=[];return n.state.field(tz).between(e.from,e.to,(r,o,s)=>{r>e.from&&r<e.to&&i.push(...s.diagnostics)}),i.length?new uD(i):null}}),tz=nl.define({create(){return Zr.empty},update(n,t){n=n.map(t.changes);let e=t.state.facet(fD).markerFilter;for(let i of t.effects)if(i.is(hD)){let r=i.value;e&&(r=e(r||[],t.state)),n=Dot(t.state.doc,r.slice(0))}return n}}),nz=wo.define(),Zme=nl.define({create(){return null},update(n,t){return n&&t.docChanged&&(n=Wme(t,n)?null:Ge(le({},n),{pos:t.changes.mapPos(n.pos)})),t.effects.reduce((e,i)=>i.is(nz)?i.value:e,n)},provide:n=>jA.from(n)}),Fot=lo.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:aD('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:aD('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:aD('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Qme=[Hd,lo.decorations.compute([Hd],n=>{let{selected:t,panel:e}=n.field(Hd);return!t||!e||t.from==t.to?Vr.none:Vr.set([Sot.range(t.from,t.to)])}),x0e(Cot,{hideOn:Wme}),Mot],fD=on.define({combine(n){return z1(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function Jme(n={}){return[fD.of(n),tz,Iot,Fot,Zme]}var Pot=["editor"];function Lot(n,t){if(n&1&&(Ho(0,"div",2),lt(),Ho(1,"svg",3),Bs(2,"path",4)(3,"path",5),Qo(),dn(),Ho(4,"span"),w(5),Qo()()),n&2){let e=E();_(5),Ee(e.jsonError())}}var $v=class n{value="";valueChange=new vt;editorRef;view;languageConf=new Cv;jsonError=P("");ngAfterViewInit(){setTimeout(()=>{this.view=new lo({state:Jl.create({doc:this.value,extensions:[Ume,Vme(),Jme(),Kme(Bme()),M0e(),hW.of([...Ame,Dme]),this.languageConf.of([]),lo.theme({"&":{height:"100%"},".cm-scroller":{overflow:"auto"},".cm-content":{minHeight:"100%",paddingBottom:"50px"}}),lo.updateListener.of(t=>{if(t.docChanged){let e=t.state.doc.toString();this.valueChange.emit(e),this.validateJson(e)}})]}),parent:this.editorRef.nativeElement})},0)}validateJson(t){if(!t.trim()){this.jsonError.set("");return}try{JSON.parse(t),this.jsonError.set("")}catch(e){this.jsonError.set(e.message||"Invalid JSON")}}format(){let t=this.view.state.doc.toString();if(t.trim())try{let e=JSON.parse(t),i=JSON.stringify(e,null,2);this.view.dispatch({changes:{from:0,to:t.length,insert:i}}),this.jsonError.set("")}catch{this.jsonError.set("Invalid JSON \u2013 cannot format")}}ngOnDestroy(){this.view&&this.view.destroy()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-json-editor"]],viewQuery:function(e,i){if(e&1&&Et(Pot,5),e&2){let r;_t(r=bt())&&(i.editorRef=r.first)}},inputs:{value:"value"},outputs:{valueChange:"valueChange"},decls:3,vars:1,consts:[["editor",""],[1,"codemirror-editor"],[1,"json-error-banner"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor",1,"error-icon"],["d","M8 15A7 7 0 118 1a7 7 0 010 14zm0 1A8 8 0 108 0a8 8 0 000 16z"],["d","M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"]],template:function(e,i){e&1&&(Bs(0,"div",1,0),Q(2,Lot,6,1,"div",2)),e&2&&(_(2),J(i.jsonError()?2:-1))},styles:[".codemirror-editor[_ngcontent-%COMP%]{height:450px;border:1px solid #ddd;border-radius:6px;overflow:hidden}.text-danger[_ngcontent-%COMP%]{font-size:14px;padding-top:12px;padding-bottom:12px;color:#991b1b}.codemirror-container[_ngcontent-%COMP%]{height:450px;border:1px solid #444;border-radius:6px;overflow:hidden;display:flex;flex-direction:column}.json-error-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;border-color:#f87171;background:#fef2f2;color:#991b1b;padding:10px 14px;font-size:14px;border-top:1px solid #5f3b3e;border-radius:0 0 6px 6px}.error-icon[_ngcontent-%COMP%]{flex-shrink:0;color:#f28b82}.cm-custom-gutter[_ngcontent-%COMP%]{background-color:#1e1e1e}"]})};var Rot=["didDocumentEditor"],Oot=["uriEditor"],Not=["didDataEditor"],Bot=()=>["set","delete"];function Vot(n,t){n&1&&(m(0,"div")(1,"div",20)(2,"div",21),ee(3,"ng-icon",22),g(),m(4,"div")(5,"h2",23),w(6,"Set DID"),g(),m(7,"p",24),w(8,"Set DID for the selected account."),g()()()())}function Uot(n,t){n&1&&(m(0,"div")(1,"div",20)(2,"div",25),ee(3,"ng-icon",26),g(),m(4,"div")(5,"h2",23),w(6,"Delete DID"),g(),m(7,"p",24),w(8,"Delete DID for the selected account."),g()()()())}function jot(n,t){n&1&&w(0," has not created a DID yet. ")}function Hot(n,t){n&1&&(w(0," has a DID set. Only "),m(1,"strong"),w(2,"1"),g(),w(3," DID can exist per account. "))}function Wot(n,t){if(n&1&&Q(0,jot,1,0)(1,Hot,4,0),n&2){let e=E();J(e.didCount===0?0:1)}}function zot(n,t){n&1&&w(0," has no DID to delete. ")}function qot(n,t){n&1&&(w(0," has "),m(1,"strong"),w(2,"1"),g(),w(3," DID that can be deleted. "))}function $ot(n,t){if(n&1&&Q(0,zot,1,0)(1,qot,4,0),n&2){let e=E();J(e.didCount===0?0:1)}}function Kot(n,t){n&1&&(w(0," \u2014 "),m(1,"strong"),w(2,"ready for deletion"),g())}function Got(n,t){n&1&&w(0," \u2014 active. ")}function Xot(n,t){if(n&1&&(m(0,"div",39)(1,"strong"),w(2,"URI:"),g(),m(3,"span",42),w(4),g()()),n&2){let e=E(3);_(4),je(" ",e.existingDid[0].URI," ")}}function Yot(n,t){if(n&1){let e=ge();m(0,"div",43),X("click",function(r){U(e);let o=E(3),s=E();return r.stopPropagation(),r.preventDefault(),j(s.copyAndToast(o.existingDid[0].DIDDocument,"DID Document"))}),w(1,"Copy full DID Document (JSON)"),g()}}function Zot(n,t){if(n&1){let e=ge();ee(0,"br")(1,"br"),m(2,"div",43),X("click",function(r){U(e);let o=E(3),s=E();return r.stopPropagation(),r.preventDefault(),j(s.copyAndToast(o.existingDid[0].Data,"DID Data"))}),w(3,"Copy Data field (JSON)"),g()}}function Qot(n,t){if(n&1){let e=ge();ee(0,"br")(1,"br"),m(2,"div",43),X("click",function(r){U(e);let o=E(3),s=E();return r.stopPropagation(),r.preventDefault(),j(s.copyAndToast(o.existingDid[0].URI,"URI Data"))}),w(3,"Copy URI Field"),g()}}function Jot(n,t){if(n&1){let e=ge();ee(0,"br")(1,"br"),m(2,"div",43),X("click",function(r){U(e);let o=E(3),s=E();return r.stopPropagation(),r.preventDefault(),j(s.copyAndToast(o.existingDid[0].index,"Index"))}),w(3,"Copy Index"),g()}}function est(n,t){if(n&1){let e=ge();m(0,"div",35)(1,"app-tooltip-link",36)(2,"div",37),w(3,"DID Ledger Entry"),g(),m(4,"div",38)(5,"strong"),w(6,"Index:"),g(),w(7),g(),Q(8,Xot,5,1,"div",39),g(),m(9,"div",40),X("mouseenter",function(r){return U(e),j(r.stopPropagation())})("mouseleave",function(r){return U(e),j(r.stopPropagation())})("mousemove",function(r){return U(e),j(r.stopPropagation())}),Q(10,Yot,2,0,"div",41),Q(11,Zot,4,0),Q(12,Qot,4,0),Q(13,Jot,4,0),g()()}if(n&2){let e=E(2),i=E();_(),oe("href",i.txUiService.explorerUrl()+"entry/"+e.existingDid[0].index),_(6),je(" ",e.existingDid[0].index),_(),J(e.existingDid[0].URI&&e.existingDid[0].URI!=="N/A"?8:-1),_(2),J(e.existingDid[0].DIDDocument&&e.existingDid[0].DIDDocument!=="N/A"?10:-1),_(),J(e.existingDid[0].Data&&e.existingDid[0].Data!=="N/A"?11:-1),_(),J(e.existingDid[0].Data&&e.existingDid[0].Data!=="N/A"?12:-1),_(),J(e.existingDid[0].Data&&e.existingDid[0].index!=="N/A"?13:-1)}}function tst(n,t){if(n&1){let e=ge();m(0,"div",31),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",32)(2,"span"),w(3," DID Entry "),Q(4,Kot,3,0)(5,Got,1,0),g(),lt(),m(6,"svg",33),ee(7,"path",34),g()(),Q(8,est,14,7,"div",35),g()}if(n&2){let e=E(),i=E();_(4),J(e.mode==="delete"?4:5),_(2),In("transform",i.infoPanelExpanded()?"rotate(180deg)":"rotate(0deg)"),_(2),J(i.infoPanelExpanded()?8:-1)}}function nst(n,t){if(n&1&&(m(0,"div",14)(1,"div",27)(2,"div",28),ee(3,"ng-icon",29),m(4,"code"),w(5),g(),Q(6,Wot,2,1)(7,$ot,2,1),g(),Q(8,tst,9,4,"div",30),g()()),n&2){let e,i=t;_(5),Ee(i.walletName),_(),J((e=i.mode)==="set"?6:e==="delete"?7:-1),_(2),J(i.existingDid.length===1?8:-1)}}function ist(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",44)(2,"div",45),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function rst(n,t){n&1&&(m(0,"small",52)(1,"strong"),w(2,"Exceeded limit \u2013 transaction will fail"),g()())}function ost(n,t){if(n&1&&(m(0,"small",53),w(1),g()),n&2){let e=E(2);_(),je(" Approaching limit (",e.didDocumentDataByteLength()," bytes) ")}}function sst(n,t){n&1&&(m(0,"small",52)(1,"strong"),w(2,"Exceeded limit \u2013 transaction will fail"),g()())}function ast(n,t){if(n&1&&(m(0,"small",53),w(1),g()),n&2){let e=E(2);_(),je(" Approaching limit (",e.uriDataByteLength()," bytes) ")}}function lst(n,t){n&1&&(m(0,"div",57)(1,"small",59)(2,"strong"),w(3,"\u2713 DID JSON is valid and well-formed"),g()()())}function cst(n,t){n&1&&(m(0,"div",58)(1,"small",60)(2,"strong"),w(3,"\u26A0 Schema valid, but JSON has syntax errors:"),g(),ee(4,"br"),g()())}function dst(n,t){n&1&&(m(0,"small",52)(1,"strong"),w(2,"Exceeded limit \u2013 transaction will fail"),g()())}function ust(n,t){if(n&1&&(m(0,"small",53),w(1),g()),n&2){let e=E(2);_(),je(" Approaching limit (",e.didDataByteLength()," bytes) ")}}function hst(n,t){if(n&1){let e=ge();m(0,"div",46)(1,"div",47)(2,"label",48),w(3," DID Document "),m(4,"button",49),X("click",function(){U(e);let r=oa(12);return j(r.format())}),w(5,"Format DID Document"),g(),m(6,"div",50)(7,"small",51),w(8),g(),Q(9,rst,3,0,"small",52)(10,ost,2,1,"small",53),g()(),m(11,"app-json-editor",54,1),X("valueChange",function(r){U(e);let o=E();return j(o.onDidDocumentDataChange(r))}),g()()(),m(13,"div",46)(14,"div",47)(15,"label",48),w(16," URI Data "),m(17,"button",49),X("click",function(){U(e);let r=oa(25);return j(r.format())}),w(18,"Format URI Data"),g(),m(19,"div",50)(20,"small",51),w(21),g(),Q(22,sst,3,0,"small",52)(23,ast,2,1,"small",53),g()(),m(24,"app-json-editor",54,2),X("valueChange",function(r){U(e);let o=E();return j(o.onUriDataChange(r))}),g()()(),m(26,"div",46)(27,"div",47)(28,"label",48),w(29," DID Data "),ee(30,"br"),m(31,"span",55),w(32," DID Schema "),m(33,"a",56),w(34,"W3C"),g()(),m(35,"button",49),X("click",function(){U(e);let r=oa(45);return j(r.format())}),w(36,"Format DID Data"),g(),Q(37,lst,4,0,"div",57),Q(38,cst,5,0,"div",58),m(39,"div",50)(40,"small",51),w(41),g(),Q(42,dst,3,0,"small",52)(43,ust,2,1,"small",53),g()(),m(44,"app-json-editor",54,3),X("valueChange",function(r){U(e);let o=E();return j(o.onDidDataChange(r))}),g()()()}if(n&2){let e=E();_(8),je(" Metadata size: ",e.didDocumentDataByteLength()," / 256 bytes "),_(),J(e.didDocumentDataByteLength()>256?9:e.didDocumentDataByteLength()>200?10:-1),_(2),oe("value",e.didDocumentData()),_(10),je(" Metadata size: ",e.uriDataByteLength()," / 256 bytes "),_(),J(e.uriDataByteLength()>256?22:e.uriDataByteLength()>200?23:-1),_(2),oe("value",e.uriData()),_(13),J(e.validDidSchema()&&!e.hasJsonSyntaxError()?37:-1),_(),J(e.validDidSchema()&&e.hasJsonSyntaxError()?38:-1),_(3),je(" Metadata size: ",e.didDataByteLength()," / 256 bytes "),_(),J(e.didDataByteLength()>256?42:e.didDataByteLength()>200?43:-1),_(2),oe("value",e.didData())}}function fst(n,t){if(n&1){let e=ge();m(0,"app-tooltip-link",66),X("click",function(r){return U(e),j(r.preventDefault())}),m(1,"button",67),ct(2,"async"),X("click",function(){U(e);let r=E(2);return j(r.setDid())}),w(3),g()()}if(n&2){let e=E(2);oe("tooltipText",e.getCreateButtonTooltip()),_(),oe("disabled",e.txUiService.spinner()||!mt(2,3,e.walletManagerService.hasWallets$)||!e.allFieldsValid()),_(2),je(" ",e.txUiService.spinner()?"Processing...":"Set DID"," ")}}function pst(n,t){if(n&1){let e=ge();m(0,"button",68),ct(1,"async"),X("click",function(){U(e);let r=E(2);return j(r.deleteDid())}),w(2),g()}if(n&2){let e=E(2);oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Delete DID")}}function mst(n,t){if(n&1){let e=ge();ee(0,"app-transaction-options",61),m(1,"div",62),Q(2,fst,4,5,"app-tooltip-link",63),Q(3,pst,3,4,"button",64),m(4,"button",65),ct(5,"async"),X("click",function(){U(e);let r=E();return j(r.clearFields())}),w(6,"Clear Fields"),g()()}if(n&2){let e=E();oe("showWhenTab",Ei(9,Bot))("activeTab",e.activeTab)("multiSigningEnabled",e.txUiService.multiSigningEnabled)("regularKeySigningEnabled",e.txUiService.regularKeySigningEnabled),_(2),J(e.activeTab()==="set"?2:-1),_(),J(e.activeTab()==="delete"?3:-1),_(),oe("disabled",!mt(5,7,e.walletManagerService.hasWallets$))}}var mD=class n extends li{destroyRef=N(Zt);didDocumentEditor;uriEditor;didDataEditor;utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);activeTab=P("set");wallets=P([]);currentWallet=P({});credentialSearchTerm=P("");infoPanelExpanded=P(!1);createdDids=P(!1);existingDid=P([]);didDetails=P({id:"",verificationMethod:{id:"",type:"",controller:"",publicKeyBase58:""},authentication:{auth:""},service:{serviceId:"",serviceType:"",serviceEndpoint:""},hash:"",uri:JSON.stringify("ipfs://bafybeiexamplehash",null,"/t"),document:JSON.stringify("did:example:123#public-key-0",null,"/t"),data:`{
  "@context": "https://www.w3.org/ns/did/v1",
  "id": "did:xrpl:test:rJNo2iPnuDmXqqw31cobafG37k1GaMZ3Vc",
  "authentication": [
    "did:xrpl:test:rJNo2iPnuDmXqqw31cobafG37k1GaMZ3Vc#keys-1"
  ]
}`,destinationAddress:""});didData=P("");uriData=P("");didDocumentData=P("");infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||"Selected wallet",i=this.existingDid(),r=i.length,o=this.activeTab();return{walletName:e,mode:o,didCount:r,existingDid:i}});hasWallets=_e(()=>this.wallets().length>0);hasJsonSyntaxError=_e(()=>(this.didData(),!!this.didDataEditor?.jsonError()?.trim()));didDataByteLength=_e(()=>{let t=this.didData().trim();if(!t)return 0;try{let e=pD.convertStringToHex(t);return console.log("DID JSON -> Hex length:",e.length,"\u2192 Bytes:",e.length/2),e.length/2}catch(e){return console.error("Failed to convert DID JSON to hex:",e),0}});uriDataByteLength=_e(()=>{let t=this.uriData().trim();if(!t)return 0;try{let e=pD.convertStringToHex(t);return console.log("URI JSON -> Hex length:",e.length,"\u2192 Bytes:",e.length/2),e.length/2}catch(e){return console.error("Failed to convert URI JSON to hex:",e),0}});didDocumentDataByteLength=_e(()=>{let t=this.didDocumentData().trim();if(!t)return 0;try{let e=pD.convertStringToHex(t);return console.log("DID Document JSON -> Hex length:",e.length,"\u2192 Bytes:",e.length/2),e.length/2}catch(e){return console.error("Failed to convert DID Document JSON to hex:",e),0}});didDataIsValid=_e(()=>this.didDataByteLength()<=256);uriDataIsValid=_e(()=>this.uriDataByteLength()<=256);didDocumentDataIsValid=_e(()=>this.didDocumentDataByteLength()<=256);onDidDataChange(t){this.didData.set(t),this.didDetails.update(e=>Ge(le({},e),{data:t}))}onUriDataChange(t){this.uriData.set(t),this.didDetails.update(e=>Ge(le({},e),{uri:t}))}onDidDocumentDataChange(t){this.didDocumentData.set(t),this.didDetails.update(e=>Ge(le({},e),{document:t}))}getCreateButtonTooltip(){if(this.txUiService.spinner())return"Processing transaction...";if(!this.allFieldsValid()){let t=[];if(this.didDocumentDataIsValid()||t.push(`DID Document too large: ${this.didDocumentDataByteLength()} bytes (>256)`),this.uriDataIsValid()||t.push(`URI too large: ${this.uriDataByteLength()} bytes (>256)`),this.didDataIsValid()||t.push(`DID Data too large: ${this.didDataByteLength()} bytes (>256)`),this.hasJsonSyntaxError()){let e=this.didDataEditor?.jsonError()?.trim()||"Syntax error";t.push(`Invalid JSON in DID Data: ${e}`)}return`Cannot submit:
\u2022 `+t.join(`
\u2022 `)}return"Set DID on the XRPL"}allFieldsValid=_e(()=>this.didDocumentDataIsValid()&&this.uriDataIsValid()&&this.didDataIsValid()&&!this.hasJsonSyntaxError()&&this.validDidSchema());validDidSchema=_e(()=>this.didData().trim()===""||this.hasJsonSyntaxError()?!1:this.utilsService.validateAndConvertDidJson(this.didData(),pv).success);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.setupWalletSubscriptions(),this.didData.set(this.didDetails().data),this.uriData.set(this.didDetails().uri),this.didDocumentData.set(this.didDetails().document)}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearTxSignal(),this.txUiService.clearTxResultSignal(),this.hasWallets()&&(yield this.getDidForAccount(!1)))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address)}toggleCreatedDids(){this.createdDids.update(t=>!t)}copyDidIndex(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("DID Index copied!")})}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.txUiService.clearAllOptionsAndMessages(),this.hasWallets()&&(yield this.getDidForAccount())})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getDidForAccount(t=!1){return z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages(),yield this.withPerf("getDidForAccount",()=>z(this,null,function*(){try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.getExistingDid(o,i.classicAddress),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getDidForAccount:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setDid(){return z(this,null,function*(){yield this.withPerf("setDid",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o]=yield Promise.all([this.xrplCache.getAccountInfo(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),s=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:i,fee:r,currentLedger:o},did:{document:this.didDetails().document||void 0,uri:this.didDetails().uri||void 0,data:this.didDetails().data||void 0}}),a=yield this.validationService.validate("DIDSet",{inputs:s,client:t,accountInfo:i});if(a.length>0)return this.txUiService.setError(a.join(`
\u2022 `));let l={TransactionType:"DIDSet",Account:e.classicAddress,Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,l,e,i,"DIDSet");let c=yield this.txExecutor.setDid(l,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Set DID successfully":"Set DID successfully!",yield this.refreshAfterTx(t,e)}catch(t){console.error("Error in setDid:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}deleteDid(){return z(this,null,function*(){yield this.withPerf("deleteDid",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getLastLedgerIndex(t),this.xrplCache.getFee(this.xrplService,!1)]),a=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:i,fee:s,currentLedger:o}}),l=yield this.validationService.validate("DIDdelete",{inputs:a,client:t,accountInfo:i});if(l.length>0)return this.txUiService.setError(l.join(`
\u2022 `));if(!r.result.account_objects.find(h=>h.LedgerEntryType==="DID")){this.txUiService.setError("DID not found.");return}let d={TransactionType:"DIDDelete",Account:e.classicAddress,Fee:s,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,i,"deleteDID");let u=yield this.txExecutor.deleteDid(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated DID deletion successfully!":"DID deleted successfully!",yield this.refreshAfterTx(t,e)}catch(t){console.error("Error in deleteDid:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getExistingDid(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="DID").map(r=>({index:r.index,DIDDocument:r.DIDDocument?JSON.stringify(JSON.parse(Buffer.from(r.DIDDocument,"hex").toString("utf8")),null,2):"N/A",Data:r.Data?JSON.stringify(JSON.parse(Buffer.from(r.Data,"hex").toString("utf8")),null,2):"N/A",URI:r.URI?JSON.stringify(JSON.parse(Buffer.from(r.URI,"hex").toString("utf8")),null,2):"N/A"})).sort((r,o)=>r.index.localeCompare(o.index));this.existingDid.set(i),this.utilsService.logObjects("existingDid",i)}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(o==="DIDSet"){if(this.didDetails().document){let s=this.utilsService.jsonToHex({didData:this.didDetails().document});e.DIDDocument=s}if(this.didDetails().uri){let s=this.utilsService.jsonToHex({uri:this.didDetails().uri});e.URI=s}if(this.didDetails().data){let s=this.utilsService.validateAndConvertDidJson(this.didDetails().data,pv);if(!s.success)throw new Error(s.errors??"Invalid DID data");e.Data=s.hexData}}if(this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e){return z(this,null,function*(){let{accountInfo:i,accountObjects:r}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getExistingDid(r,e.classicAddress),yield this.refreshWallets(t,[e.classicAddress]),this.refreshUiState(e,i,r)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}formatXrplTimestamp(t){return this.utilsService.convertXRPLTime(t)}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}validateDidData(){if(this.didDetails().data){let t=this.utilsService.validateAndConvertDidJson(this.didDetails().data,pv);if(t.success)this.txUiService.clearAllOptionsAndMessages();else return this.txUiService.setError(`${t.errors}`)}}clearFields(){this.txUiService.clearAllOptionsAndMessages()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-did"]],viewQuery:function(e,i){if(e&1&&(Et(Rot,5),Et(Oot,5),Et(Not,5)),e&2){let r;_t(r=bt())&&(i.didDocumentEditor=r.first),_t(r=bt())&&(i.uriEditor=r.first),_t(r=bt())&&(i.didDataEditor=r.first)}},features:[Lt],decls:27,vars:12,consts:[["theForm","ngForm"],["didDocumentEditor",""],["uriEditor",""],["didDataEditor",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-panel"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin-top","14px","font-size","0.92em","line-height","1"],["tooltipText","View DID entry on XRPL Explorer",3,"href"],[2,"font-weight","500","color","#0c4a6e","cursor","pointer"],[2,"color","#555","margin-top","10px","word-break","break-all"],[2,"color","#555","margin-top","10px","margin-bottom","6px"],[2,"margin-top","12px","padding-top","8px","border-top","1px dashed #bae6fd",3,"mouseenter","mouseleave","mousemove"],[1,"copy-link"],[2,"font-family","monospace","background","#e0f2fe","padding","2px 6px","border-radius","4px","font-size","0.88em"],[1,"copy-link",3,"click"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-row"],[1,"form-group"],[1,"label-with-link"],["type","button",1,"btn-secondary","btn-xs","ml-2",2,"margin-left","1em",3,"click"],[1,"metadata-info"],[1,"text-muted"],[1,"text-danger","d-block"],[1,"text-warning","d-block"],[3,"valueChange","value"],[1,"label-meta"],["href","https://www.w3.org/TR/did-1.0/","target","_blank","rel","noopener noreferrer"],[1,"json-schema-success","mt-2"],[1,"json-schema-warning","mt-2"],[1,"text-success"],[1,"text-warning"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["href","#",1,"button-wrapper",3,"tooltipText"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],["href","#",1,"button-wrapper",3,"click","tooltipText"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",4),ee(1,"app-navbar"),m(2,"main",5)(3,"div",6)(4,"div",7)(5,"app-wallet-panel",8),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",9)(7,"div",10)(8,"button",11),X("click",function(){return U(r),j(i.setTab("set"))}),ee(9,"ng-icon",12),w(10," Set DID "),g(),m(11,"button",11),X("click",function(){return U(r),j(i.setTab("delete"))}),ee(12,"ng-icon",13),w(13," Delete DID "),g()(),Q(14,Vot,9,0,"div"),Q(15,Uot,9,0,"div"),Q(16,nst,9,3,"div",14),Q(17,ist,3,1,"div",15),m(18,"form",16,0)(20,"div",17)(21,"div"),Q(22,hst,46,11),Q(23,mst,7,10),g(),m(24,"div",18)(25,"input",19),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(26,"app-transaction-preview"),g()()()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="set"),_(3),Ue("active",i.activeTab()==="delete"),_(3),J(i.activeTab()==="set"?14:-1),_(),J(i.activeTab()==="delete"?15:-1),_(),J((r=i.infoData())?16:-1,r),_(),J(i.txUiService.warningMessage?17:-1),_(4),oe("@tabTransition",i.activeTab()),_(),J(i.activeTab()==="set"&&i.existingDid().length<=0?22:-1),_(),J(i.activeTab()==="set"&&i.existingDid().length<=0||i.activeTab()==="delete"?23:-1),_(2),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki,$r,$v,zi],styles:[".copy-link[_ngcontent-%COMP%]{color:#2563eb;font-size:.9em;cursor:pointer;text-decoration:underline;margin-top:8px;display:inline-block}.copy-link[_ngcontent-%COMP%]:hover{color:#1d4ed8}.json-schema-success[_ngcontent-%COMP%]{color:#10b981}.json-schema-warning[_ngcontent-%COMP%]{color:#f59e0b}.json-schema-error[_ngcontent-%COMP%]{color:#ef4444}"],data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var sC;function e1e(){if(sC==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>sC=!0}))}finally{sC=sC||!1}return sC}function k0(n){return e1e()?n:!!n.capture}var t1e=new $e("cdk-input-modality-detector-options"),n1e={ignoreKeys:[18,17,224,91,16]},i1e=650,iz={passive:!0,capture:!0},r1e=(()=>{class n{_platform=N(Pr);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new bi(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(i=>i===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=rs(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<i1e||(this._modality.next(R1(e)?"keyboard":"mouse"),this._mostRecentTarget=rs(e))};_onTouchstart=e=>{if(O1(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=rs(e)};constructor(){let e=N(Pt),i=N(gn),r=N(t1e,{optional:!0});if(this._options=le(le({},n1e),r),this.modalityDetected=this._modality.pipe(b_(1)),this.modalityChanged=this.modalityDetected.pipe(Zc()),this._platform.isBrowser){let o=N(xo).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[o.listen(i,"keydown",this._onKeydown,iz),o.listen(i,"mousedown",this._onMousedown,iz),o.listen(i,"touchstart",this._onTouchstart,iz)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aC=(function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n})(aC||{}),o1e=new $e("cdk-focus-monitor-default-options"),gD=k0({passive:!0,capture:!0}),Kv=(()=>{class n{_ngZone=N(Pt);_platform=N(Pr);_inputModalityDetector=N(r1e);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=N(gn);_stopInputModalityDetector=new Xe;constructor(){let e=N(o1e,{optional:!0});this._detectionMode=e?.detectionMode||aC.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let i=rs(e);for(let r=i;r;r=r.parentElement)e.type==="focus"?this._onFocus(e,r):this._onBlur(e,r)};monitor(e,i=!1){let r=gs(e);if(!this._platform.isBrowser||r.nodeType!==1)return Wt();let o=T1(r)||this._document,s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new Xe,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let i=gs(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let o=gs(e),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===aC.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===aC.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?i1e:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),o=rs(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,gD),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,gD)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(fn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,gD),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,gD),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rz=(()=>{class n{_elementRef=N(Kt);_focusMonitor=N(Kv);_monitorSubscription;_focusOrigin=null;cdkFocusChange=new vt;constructor(){}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]})}return n})();var lh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return n})();var s1e=new Set,ng,yD=(()=>{class n{_platform=N(Pr);_nonce=N(Hg,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):yst}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&gst(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gst(n,t){if(!s1e.has(n))try{ng||(ng=document.createElement("style"),t&&ng.setAttribute("nonce",t),ng.setAttribute("type","text/css"),document.head.appendChild(ng)),ng.sheet&&(ng.sheet.insertRule(`@media ${n} {body{ }}`,0),s1e.add(n))}catch(e){console.error(e)}}function yst(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var oz=(()=>{class n{_mediaMatcher=N(yD);_zone=N(Pt);_queries=new Map;_destroySubject=new Xe;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return a1e(c0(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=a1e(c0(e)).map(s=>this._registerQuery(s).observable),o=mh(r);return o=If(o.pipe(bs(1)),o.pipe(b_(1),V0(0))),o.pipe(Yt(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),o={observable:new jn(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Co(i),Yt(({matches:s})=>({query:e,matches:s})),fn(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a1e(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var vst=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[vst]})}return n})();var _st=(()=>{class n{_platform=N(Pr);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return wst(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=bst(Ast(e));if(i&&(l1e(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),o=l1e(e);return e.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Tst(e)?!1:r==="audio"?e.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return Est(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bst(n){try{return n.frameElement}catch{return null}}function wst(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function Sst(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function Cst(n){return kst(n)&&n.type=="hidden"}function xst(n){return Mst(n)&&n.hasAttribute("href")}function kst(n){return n.nodeName.toLowerCase()=="input"}function Mst(n){return n.nodeName.toLowerCase()=="a"}function u1e(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function l1e(n){if(!u1e(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function Tst(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function Est(n){return Cst(n)?!1:Sst(n)||xst(n)||n.hasAttribute("contenteditable")||u1e(n)}function Ast(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var az=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,e,i,r,o=!1,s){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._injector=s,o||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?Zo(t,{injector:this._injector}):setTimeout(t)}},h1e=(()=>{class n{_checker=N(_st);_ngZone=N(Pt);_document=N(gn);_injector=N(tn);constructor(){N(qo).load(lh)}create(e,i=!1){return new az(e,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lz=(()=>{class n{_elementRef=N(Kt);_focusTrapFactory=N(h1e);focusTrap;_previouslyFocusedElement=null;get enabled(){return this.focusTrap?.enabled||!1}set enabled(e){this.focusTrap&&(this.focusTrap.enabled=e)}autoCapture;constructor(){N(Pr).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(e){let i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=fS(),this.focusTrap?.focusInitialElementWhenReady()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[2,"cdkTrapFocus","enabled",Fn],autoCapture:[2,"cdkTrapFocusAutoCapture","autoCapture",Fn]},exportAs:["cdkTrapFocus"],features:[or]})}return n})(),f1e=new $e("liveAnnouncerElement",{providedIn:"root",factory:p1e});function p1e(){return null}var m1e=new $e("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Dst=0,cz=(()=>{class n{_ngZone=N(Pt);_defaultOptions=N(m1e,{optional:!0});_liveElement;_document=N(gn);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=N(f1e,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...i){let r=this._defaultOptions,o,s;return i.length===1&&typeof i[0]=="number"?s=i[0]:[o,s]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),s==null&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${Dst++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){let i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var M0=(function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n})(M0||{}),c1e="cdk-high-contrast-black-on-white",d1e="cdk-high-contrast-white-on-black",sz="cdk-high-contrast-active",_D=(()=>{class n{_platform=N(Pr);_hasCheckedHighContrastMode;_document=N(gn);_breakpointSubscription;constructor(){this._breakpointSubscription=N(oz).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return M0.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return M0.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return M0.BLACK_ON_WHITE}return M0.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(sz,c1e,d1e),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===M0.BLACK_ON_WHITE?e.add(sz,c1e):i===M0.WHITE_ON_BLACK&&e.add(sz,d1e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lC=(()=>{class n{constructor(){N(_D)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[vD]})}return n})();var Ist=200,bD=class{_letterKeyStream=new Xe;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Xe;selectedItem=this._selectedItem;constructor(t,e){let i=typeof e?.debounceInterval=="number"?e.debounceInterval:Ist;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Jr(e=>this._pressedLetters.push(e)),V0(t),rr(()=>this._pressedLetters.length>0),Yt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};var wD=class{_items;_activeItemIndex=P(-1);_activeItem=P(null);_wrap=!1;_typeaheadSubscription=qn.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,e){this._items=t,t instanceof im?this._itemChangesSubscription=t.changes.subscribe(i=>this._itemsChanged(i.toArray())):Wf(t)&&(this._effectRef=rd(()=>this._itemsChanged(t()),{injector:e}))}tabOut=new Xe;change=new Xe;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new bD(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem();this.updateActiveItem(t),this._activeItem()!==e&&this.change.next(this._activeItemIndex())}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||Tl(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),i=typeof t=="number"?t:e.indexOf(t),r=e[i];this._activeItem.set(r??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let i=1;i<=e.length;i++){let r=(this._activeItemIndex()+t*i+e.length)%e.length,o=e[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex()+t,t)}_setActiveItemByIndex(t,e){let i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(t+=e,!i[t])return;this.setActiveItem(t)}}_getItemsArray(){return Wf(this._items)?this._items():this._items instanceof im?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let e=this._activeItem();if(e){let i=t.indexOf(e);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}};var cC=class extends wD{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}};var v1e=" ";function hz(n,t,e){let i=TD(n,t);e=e.trim(),!i.some(r=>r.trim()===e)&&(i.push(e),n.setAttribute(t,i.join(v1e)))}function ED(n,t,e){let i=TD(n,t);e=e.trim();let r=i.filter(o=>o!==e);r.length?n.setAttribute(t,r.join(v1e)):n.removeAttribute(t)}function TD(n,t){return n.getAttribute(t)?.match(/\S+/g)??[]}var _1e="cdk-describedby-message",MD="cdk-describedby-host",uz=0,b1e=(()=>{class n{_platform=N(Pr);_document=N(gn);_messageRegistry=new Map;_messagesContainer=null;_id=`${uz++}`;constructor(){N(qo).load(lh),this._id=N(Kf)+"-"+uz++}describe(e,i,r){if(!this._canBeDescribed(e,i))return;let o=dz(i,r);typeof i!="string"?(y1e(i,this._id),this._messageRegistry.set(o,{messageElement:i,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(i,r),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,i,r){if(!i||!this._isElementNode(e))return;let o=dz(i,r);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),typeof i=="string"){let s=this._messageRegistry.get(o);s&&s.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${MD}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(MD);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){let r=this._document.createElement("div");y1e(r,this._id),r.textContent=e,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(dz(e,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<i.length;o++)i[o].remove();let r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){let i=TD(e,"aria-describedby").filter(r=>r.indexOf(_1e)!=0);e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){let r=this._messageRegistry.get(i);hz(e,"aria-describedby",r.messageElement.id),e.setAttribute(MD,this._id),r.referenceCount++}_removeMessageReference(e,i){let r=this._messageRegistry.get(i);r.referenceCount--,ED(e,"aria-describedby",r.messageElement.id),e.removeAttribute(MD)}_isElementDescribedByMessage(e,i){let r=TD(e,"aria-describedby"),o=this._messageRegistry.get(i),s=o&&o.messageElement.id;return!!s&&r.indexOf(s)!=-1}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&typeof i=="object")return!0;let r=i==null?"":`${i}`.trim(),o=e.getAttribute("aria-label");return r?!o||o.trim()!==r:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dz(n,t){return typeof n=="string"?`${t||""}/${n}`:n}function y1e(n,t){n.id||(n.id=`${_1e}-${t}-${uz++}`)}var Fst=new $e("MATERIAL_ANIMATIONS");var w1e=null;function fz(){return N(Fst,{optional:!0})?.animationsDisabled||N(Gf,{optional:!0})==="NoopAnimations"?"di-disabled":(w1e??=N(yD).matchMedia("(prefers-reduced-motion)").matches,w1e?"reduced-motion":"enabled")}function Ys(){return fz()!=="enabled"}var Yv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var Gi=(()=>{class n{constructor(){N(_D)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[d0,d0]})}return n})();var Pst=new $e("MAT_SORT_DEFAULT_OPTIONS"),S1e=(()=>{class n{_defaultOptions;_initializedStream=new Kd(1);sortables=new Map;_stateChanges=new Xe;active;start="asc";get direction(){return this._direction}set direction(e){this._direction=e}_direction="";disableClear;disabled=!1;sortChange=new vt;initialized=this._initializedStream;constructor(e){this._defaultOptions=e}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let i=e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,r=Lst(e.start||this.start,i),o=r.indexOf(this.direction)+1;return o>=r.length&&(o=0),r[o]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}static \u0275fac=function(i){return new(i||n)(ut(Pst,8))};static \u0275dir=qt({type:n,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",Fn],disabled:[2,"matSortDisabled","disabled",Fn]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[or]})}return n})();function Lst(n,t){let e=["asc","desc"];return n=="desc"&&e.reverse(),t||e.push(""),e}var pz=(()=>{class n{changes=new Xe;static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rst(n){return n||new pz}var Ost={provide:pz,deps:[[new Nl,new $f,pz]],useFactory:Rst};var AD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[Ost],imports:[Gi]})}return n})();function dC(n){return n!=null&&`${n}`!="false"}var mz=class{_box;_destroyed=new Xe;_resizeSubject=new Xe;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new jn(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(rr(e=>e.some(i=>i.target===t)),Lf({bufferSize:1,refCount:!0}),fn(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},C1e=(()=>{class n{_cleanupErrorListener;_observers=new Map;_ngZone=N(Pt);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(e,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new mz(r)),this._observers.get(r).observe(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nst=["notch"],Bst=["matFormFieldNotchedOutline",""],Vst=["*"],x1e=["iconPrefixContainer"],k1e=["textPrefixContainer"],M1e=["iconSuffixContainer"],T1e=["textSuffixContainer"],Ust=["textField"],jst=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Hst=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Wst(n,t){n&1&&ee(0,"span",21)}function zst(n,t){if(n&1&&(m(0,"label",20),Pi(1,1),Q(2,Wst,1,0,"span",21),g()),n&2){let e=E(2);oe("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),Tn("for",e._control.disableAutomaticLabeling?null:e._control.id),_(2),J(!e.hideRequiredMarker&&e._control.required?2:-1)}}function qst(n,t){if(n&1&&Q(0,zst,3,5,"label",20),n&2){let e=E();J(e._hasFloatingLabel()?0:-1)}}function $st(n,t){n&1&&ee(0,"div",7)}function Kst(n,t){}function Gst(n,t){if(n&1&&nn(0,Kst,0,0,"ng-template",13),n&2){E(2);let e=oa(1);oe("ngTemplateOutlet",e)}}function Xst(n,t){if(n&1&&(m(0,"div",9),Q(1,Gst,1,1,null,13),g()),n&2){let e=E();oe("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),_(),J(e._forceDisplayInfixLabel()?-1:1)}}function Yst(n,t){n&1&&(m(0,"div",10,2),Pi(2,2),g())}function Zst(n,t){n&1&&(m(0,"div",11,3),Pi(2,3),g())}function Qst(n,t){}function Jst(n,t){if(n&1&&nn(0,Qst,0,0,"ng-template",13),n&2){E();let e=oa(1);oe("ngTemplateOutlet",e)}}function eat(n,t){n&1&&(m(0,"div",14,4),Pi(2,4),g())}function tat(n,t){n&1&&(m(0,"div",15,5),Pi(2,5),g())}function nat(n,t){n&1&&ee(0,"div",16)}function iat(n,t){n&1&&(m(0,"div",18),Pi(1,6),g())}function rat(n,t){if(n&1&&(m(0,"mat-hint",22),w(1),g()),n&2){let e=E(2);oe("id",e._hintLabelId),_(),Ee(e.hintLabel)}}function oat(n,t){if(n&1&&(m(0,"div",19),Q(1,rat,2,2,"mat-hint",22),Pi(2,7),ee(3,"div",23),Pi(4,8),g()),n&2){let e=E();_(),J(e.hintLabel?1:-1)}}var E1e=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["mat-label"]]})}return n})(),sat=new $e("MatError");var A1e=(()=>{class n{align="start";id=N(Xs).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(mc("id",r.id),Tn("align",null),Ue("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"}})}return n})(),aat=new $e("MatPrefix");var lat=new $e("MatSuffix");var O1e=new $e("FloatingLabelParent"),D1e=(()=>{class n{_elementRef=N(Kt);get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=N(C1e);_ngZone=N(Pt);_parent=N(O1e);_resizeSubscription=new qn;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return cat(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&Ue("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();function cat(n){let t=n;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let i=e.scrollWidth;return e.remove(),i}var I1e="mdc-line-ripple--active",DD="mdc-line-ripple--deactivating",F1e=(()=>{class n{_elementRef=N(Kt);_cleanupTransitionEnd;constructor(){let e=N(Pt),i=N(dr);e.runOutsideAngular(()=>{this._cleanupTransitionEnd=i.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(DD),e.add(I1e)}deactivate(){this._elementRef.nativeElement.classList.add(DD)}_handleTransitionEnd=e=>{let i=this._elementRef.nativeElement.classList,r=i.contains(DD);e.propertyName==="opacity"&&r&&i.remove(I1e,DD)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),P1e=(()=>{class n{_elementRef=N(Kt);_ngZone=N(Pt);open=!1;_notch;ngAfterViewInit(){let e=this._elementRef.nativeElement,i=e.querySelector(".mdc-floating-label");i?(e.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):e.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){let i=this._notch.nativeElement;!this.open||!e?i.style.width="":i.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(e){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${e}px)`)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&Et(Nst,5),i&2){let o;_t(o=bt())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&Ue("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:Bst,ngContentSelectors:Vst,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(Hr(),Bs(0,"div",1),Ho(1,"div",2,0),Pi(3),Qo(),Bs(4,"div",3))},encapsulation:2,changeDetection:0})}return n})(),gz=(()=>{class n{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n})}return n})();var yz=new $e("MatFormField"),dat=new $e("MAT_FORM_FIELD_DEFAULT_OPTIONS"),L1e="fill",uat="auto",R1e="fixed",hat="translateY(-50%)",ID=(()=>{class n{_elementRef=N(Kt);_changeDetectorRef=N(vi);_platform=N(Pr);_idGenerator=N(Xs);_ngZone=N(Pt);_defaults=N(dat,{optional:!0});_currentDirection;_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=db("iconPrefixContainer");_textPrefixContainerSignal=db("textPrefixContainer");_iconSuffixContainerSignal=db("iconSuffixContainer");_textSuffixContainerSignal=db("textSuffixContainer");_prefixSuffixContainers=_e(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(e=>e?.nativeElement).filter(e=>e!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=AX(E1e);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=dC(e)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||uat}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(e){let i=e||this._defaults?.appearance||L1e;this._appearanceSignal.set(i)}_appearanceSignal=P(L1e);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||R1e}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||R1e}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}_destroyed=new Xe;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_outlineLabelOffsetResizeObserver=null;_animationsDisabled=Ys();constructor(){let e=this._defaults,i=N(ys);e&&(e.appearance&&(this.appearance=e.appearance),this._hideRequiredMarker=!!e?.hideRequiredMarker,e.color&&(this.color=e.color)),rd(()=>this._currentDirection=i.valueSignal()),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=_e(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let i=this._control,r="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(r+e.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(r+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(Co([void 0,void 0]),Yt(()=>[i.errorState,i.userAriaDescribedBy]),Pf(),rr(([[o,s],[a,l]])=>o!==a||s!==l)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(fn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Aa(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){let e=this._control.focused;e&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!e&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._elementRef.nativeElement.classList.toggle("mat-focused",e),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",e)}_syncOutlineLabelOffset(){A3({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let e of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(e,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:e=>this._writeOutlinedLabelStyles(e())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=_e(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let i=this._control?this._control.ngControl:null;return i&&i[e]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let o=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;o?e.push(o.id):this._hintLabel&&e.push(this._hintLabelId),s&&e.push(s.id)}else this._errorChildren&&e.push(...this._errorChildren.map(o=>o.id));let i=this._control.describedByIds,r;if(i){let o=this._describedByIds||e;r=e.concat(i.filter(s=>s&&!o.includes(s)))}else r=e;this._control.setDescribedByIds(r),this._describedByIds=e}}_getOutlinedLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let e=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,r=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,s=e?.getBoundingClientRect().width??0,a=i?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0,c=o?.getBoundingClientRect().width??0,d=this._currentDirection==="rtl"?"-1":"1",u=`${s+a}px`,f=`calc(${d} * (${u} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,p=`var(--mat-mdc-form-field-label-transform, ${hat} translateX(${f}))`,y=s+a+l+c;return[p,y]}_writeOutlinedLabelStyles(e){if(e!==null){let[i,r]=e;this._floatingLabel&&(this._floatingLabel.element.style.transform=i),r!==null&&this._notchedOutline?._setMaxWidth(r)}}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(i&1&&(CF(o,r._labelChild,E1e,5),Vs(o,gz,5),Vs(o,aat,5),Vs(o,lat,5),Vs(o,sat,5),Vs(o,A1e,5)),i&2){b3();let s;_t(s=bt())&&(r._formFieldControl=s.first),_t(s=bt())&&(r._prefixChildren=s),_t(s=bt())&&(r._suffixChildren=s),_t(s=bt())&&(r._errorChildren=s),_t(s=bt())&&(r._hintChildren=s)}},viewQuery:function(i,r){if(i&1&&(Kg(r._iconPrefixContainerSignal,x1e,5),Kg(r._textPrefixContainerSignal,k1e,5),Kg(r._iconSuffixContainerSignal,M1e,5),Kg(r._textSuffixContainerSignal,T1e,5),Et(Ust,5),Et(x1e,5),Et(k1e,5),Et(M1e,5),Et(T1e,5),Et(D1e,5),Et(P1e,5),Et(F1e,5)),i&2){b3(4);let o;_t(o=bt())&&(r._textField=o.first),_t(o=bt())&&(r._iconPrefixContainer=o.first),_t(o=bt())&&(r._textPrefixContainer=o.first),_t(o=bt())&&(r._iconSuffixContainer=o.first),_t(o=bt())&&(r._textSuffixContainer=o.first),_t(o=bt())&&(r._floatingLabel=o.first),_t(o=bt())&&(r._notchedOutline=o.first),_t(o=bt())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:38,hostBindings:function(i,r){i&2&&Ue("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Zi([{provide:yz,useExisting:n},{provide:O1e,useExisting:n}])],ngContentSelectors:Hst,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],["aria-atomic","true","aria-live","polite",1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let o=ge();Hr(jst),nn(0,qst,1,1,"ng-template",null,0,vr),m(2,"div",6,1),X("click",function(a){return U(o),j(r._control.onContainerClick(a))}),Q(4,$st,1,0,"div",7),m(5,"div",8),Q(6,Xst,2,2,"div",9),Q(7,Yst,3,0,"div",10),Q(8,Zst,3,0,"div",11),m(9,"div",12),Q(10,Jst,1,1,null,13),Pi(11),g(),Q(12,eat,3,0,"div",14),Q(13,tat,3,0,"div",15),g(),Q(14,nat,1,0,"div",16),g(),m(15,"div",17),Q(16,iat,2,0,"div",18)(17,oat,5,1,"div",19),g()}if(i&2){let o;_(2),Ue("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),_(2),J(!r._hasOutline()&&!r._control.disabled?4:-1),_(2),J(r._hasOutline()?6:-1),_(),J(r._hasIconPrefix?7:-1),_(),J(r._hasTextPrefix?8:-1),_(2),J(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),_(2),J(r._hasTextSuffix?12:-1),_(),J(r._hasIconSuffix?13:-1),_(),J(r._hasOutline()?-1:14),_(),Ue("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic");let s=r._getSubscriptMessageType();_(),J((o=s)==="error"?16:o==="hint"?17:-1)}},dependencies:[D1e,P1e,vb,F1e,A1e],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return n})();var uC=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Xe;constructor(t=!1,e,i=!0,r){this._multiple=t,this._emitChanges=i,this.compareWith=r,e&&e.length&&(t?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,i=new Set(t.map(o=>this._getConcreteValue(o)));t.forEach(o=>this._markSelected(o)),e.filter(o=>!i.has(this._getConcreteValue(o,i))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(t,i))return i;return t}else return t}};var qc=(function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n})(qc||{}),vz=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=qc.HIDDEN;constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},N1e=k0({passive:!0,capture:!0}),_z=class{_events=new Map;addHandler(t,e,i,r){let o=this._events.get(e);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,N1e)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let o=r.get(e);o&&(o.delete(i),o.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,N1e)))}_delegateEventHandler=t=>{let e=rs(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(t))})}},hC={enterDuration:225,exitDuration:150},fat=800,B1e=k0({passive:!0,capture:!0}),V1e=["mousedown","touchstart"],U1e=["mouseup","mouseleave","touchend","touchcancel"],pat=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),fC=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new _z;constructor(t,e,i,r,o){this._target=t,this._ngZone=e,this._platform=r,r.isBrowser&&(this._containerElement=gs(i)),o&&o.get(qo).load(pat)}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=le(le({},hC),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let s=i.radius||mat(t,e,r),a=t-r.left,l=e-r.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${l-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,y=new vz(this,d,i,p);d.style.transform="scale3d(1, 1, 1)",y.state=qc.FADING_IN,i.persistent||(this._mostRecentTransientRipple=y);let v=null;return!p&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>{v&&(v.fallbackTimer=null),clearTimeout(x),this._finishRippleTransition(y)},S=()=>this._destroyRipple(y),x=setTimeout(S,c+100);d.addEventListener("transitionend",b),d.addEventListener("transitioncancel",S),v={onTransitionEnd:b,onTransitionCancel:S,fallbackTimer:x}}),this._activeRipples.set(y,v),(p||!c)&&this._finishRippleTransition(y),y}fadeOutRipple(t){if(t.state===qc.FADING_OUT||t.state===qc.HIDDEN)return;let e=t.element,i=le(le({},hC),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=qc.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=gs(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,V1e.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{U1e.forEach(e=>{this._triggerElement.addEventListener(e,this,B1e)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===qc.FADING_IN?this._startFadeOutTransition(t):t.state===qc.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=qc.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=qc.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=R1(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+fat;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!O1(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===qc.VISIBLE||t.config.terminateOnPointerUp&&t.state===qc.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(V1e.forEach(e=>n._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(U1e.forEach(e=>t.removeEventListener(e,this,B1e)),this._pointerUpEventsRegistered=!1))}};function mat(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var bz=new $e("mat-ripple-global-options"),j1e=(()=>{class n{_elementRef=N(Kt);_animationsDisabled=Ys();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=N(Pt),i=N(Pr),r=N(bz,{optional:!0}),o=N(tn);this._globalOptions=r||{},this._rippleRenderer=new fC(this,e,this._elementRef,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:le(le(le({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,le(le({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,le(le({},this.rippleConfig),e))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Ue("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})();var H1e=(()=>{class n{_animationsDisabled=Ys();state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){i&2&&Ue("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationsDisabled)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-minimal-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-pseudo-checkbox-full-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-pseudo-checkbox-full-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-pseudo-checkbox-full-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-full-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-pseudo-checkbox-full-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-full-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return n})();var gat=["text"],yat=[[["mat-icon"]],"*"],vat=["mat-icon","*"];function _at(n,t){if(n&1&&ee(0,"mat-pseudo-checkbox",1),n&2){let e=E();oe("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function bat(n,t){if(n&1&&ee(0,"mat-pseudo-checkbox",3),n&2){let e=E();oe("disabled",e.disabled)}}function wat(n,t){if(n&1&&(m(0,"span",4),w(1),g()),n&2){let e=E();_(),je("(",e.group.label,")")}}var Sz=new $e("MAT_OPTION_PARENT_COMPONENT"),Cz=new $e("MatOptgroup");var wz=class{source;isUserInput;constructor(t,e=!1){this.source=t,this.isUserInput=e}},Zv=(()=>{class n{_element=N(Kt);_changeDetectorRef=N(vi);_parent=N(Sz,{optional:!0});group=N(Cz,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=N(Xs).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled()}set disabled(e){this._disabled.set(e)}_disabled=P(!1);get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new vt;_text;_stateChanges=new Xe;constructor(){let e=N(qo);e.load(Yv),e.load(lh),this._signalDisableRipple=!!this._parent&&Wf(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!Tl(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new wz(this,e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-option"]],viewQuery:function(i,r){if(i&1&&Et(gat,7),i&2){let o;_t(o=bt())&&(r._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){i&1&&X("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),i&2&&(mc("id",r.id),Tn("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Ue("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Fn]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:vat,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){i&1&&(Hr(yat),Q(0,_at,1,2,"mat-pseudo-checkbox",1),Pi(1),m(2,"span",2,0),Pi(4,1),g(),Q(5,bat,1,1,"mat-pseudo-checkbox",3),Q(6,wat,2,1,"span",4),ee(7,"div",5)),i&2&&(J(r.multiple?0:-1),_(5),J(!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),_(),J(r.group&&r.group._inert?6:-1),_(),oe("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[H1e,j1e],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mat-list-list-item-selected-container-color: var(--mat-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})();function W1e(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),o=0;for(let s=0;s<n+1;s++)i[s].group&&i[s].group===r[o]&&o++;return o}return 0}function z1e(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}var q1e=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FD=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(t,e,i,r,o){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,e)??!1;o!==t&&(this.errorState=o,this._stateChanges.next())}};var PD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[Gi,Gi]})}return n})();var $1e=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[Gi]})}return n})();var Qv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[PD,Gi,$1e,Zv]})}return n})();var ch=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[Gi,vD,ID,Gi]})}return n})();var Sat=["trigger"],Cat=["panel"],xat=[[["mat-select-trigger"]],"*"],kat=["mat-select-trigger","*"];function Mat(n,t){if(n&1&&(m(0,"span",4),w(1),g()),n&2){let e=E();_(),Ee(e.placeholder)}}function Tat(n,t){n&1&&Pi(0)}function Eat(n,t){if(n&1&&(m(0,"span",11),w(1),g()),n&2){let e=E(2);_(),Ee(e.triggerValue)}}function Aat(n,t){if(n&1&&(m(0,"span",5),Q(1,Tat,1,0)(2,Eat,2,1,"span",11),g()),n&2){let e=E();_(),J(e.customTrigger?1:2)}}function Dat(n,t){if(n&1){let e=ge();m(0,"div",12,1),X("keydown",function(r){U(e);let o=E();return j(o._handleKeydown(r))}),Pi(2,1),g()}if(n&2){let e=E();sl(sa("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme())),Ue("mat-select-panel-animations-enabled",!e._animationsDisabled),oe("ngClass",e.panelClass),Tn("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var K1e=new $e("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=N(tn);return()=>wa(n)}});function Iat(n){let t=N(tn);return()=>wa(t)}var Fat=new $e("MAT_SELECT_CONFIG"),Pat={provide:K1e,deps:[],useFactory:Iat},Lat=new $e("MatSelectTrigger"),xz=class{source;value;constructor(t,e){this.source=t,this.value=e}},G1e=(()=>{class n{_viewportRuler=N(Zl);_changeDetectorRef=N(vi);_elementRef=N(Kt);_dir=N(ys,{optional:!0});_idGenerator=N(Xs);_renderer=N(dr);_parentFormField=N(yz,{optional:!0});ngControl=N(a0,{self:!0,optional:!0});_liveAnnouncer=N(cz);_defaultOptions=N(Fat,{optional:!0});_animationsDisabled=Ys();_initialized=new Xe;_cleanupDetach;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let i=this.options.toArray()[e];if(i){let r=this.panel.nativeElement,o=W1e(e,this.options,this.optionGroups),s=i._getHostElement();e===0&&o===1?r.scrollTop=0:r.scrollTop=z1e(s.offsetTop,s.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new xz(this,e)}_scrollStrategyFactory=N(K1e);_panelOpen=!1;_compareWith=(e,i)=>e===i;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new Xe;_errorStateTracker;stateChanges=new Xe;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;get disableRipple(){return this._disableRipple()}set disableRipple(e){this._disableRipple.set(e)}_disableRipple=P(!1);tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(QE.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=B0(()=>{let e=this.options;return e?e.changes.pipe(Co(e),yo(()=>Aa(...e.map(i=>i.onSelectionChange)))):this._initialized.pipe(yo(()=>this.optionSelectionChanges))});openedChange=new vt;_openedStream=this.openedChange.pipe(rr(e=>e),Yt(()=>{}));_closedStream=this.openedChange.pipe(rr(e=>!e),Yt(()=>{}));selectionChange=new vt;valueChange=new vt;constructor(){let e=N(q1e),i=N(di,{optional:!0}),r=N(rj,{optional:!0}),o=N(new gc("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new FD(e,this.ngControl,r,i,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=o==null?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new uC(this.multiple),this.stateChanges.next(),this._viewportRuler.change().pipe(fn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(fn(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Co(null),fn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._cleanupDetach?.(),this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._cleanupDetach?.(),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._overlayDir.positionChange.pipe(bs(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()}),this._overlayDir.attachOverlay(),this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!0)))}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let i=`${this.id}-panel`;this._trackedModal&&ED(this._trackedModal,"aria-owns",i),hz(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;ED(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._exitAndDetach(),this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!1)))}_exitAndDetach(){if(this._animationsDisabled||!this.panel){this._detachOverlay();return}this._cleanupDetach?.(),this._cleanupDetach=()=>{i(),clearTimeout(r),this._cleanupDetach=void 0};let e=this.panel.nativeElement,i=this._renderer.listen(e,"animationend",o=>{o.animationName==="_mat-select-exit"&&(this._cleanupDetach?.(),this._detachOverlay())}),r=setTimeout(()=>{this._cleanupDetach?.(),this._detachOverlay()},200);e.classList.add("mat-select-panel-exit")}_detachOverlay(){this._overlayDir.detachOverlay(),this._changeDetectorRef.markForCheck()}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let i=e.keyCode,r=i===40||i===38||i===37||i===39,o=i===13||i===32,s=this._keyManager;if(!s.isTyping()&&o&&!Tl(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;s.onKeydown(e);let l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){let i=this._keyManager,r=e.keyCode,o=r===40||r===38,s=i.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(!s&&(r===13||r===32)&&i.activeItem&&!Tl(e))e.preventDefault(),i.activeItem._selectViaInteraction();else if(!s&&this._multiple&&r===65&&e.ctrlKey){e.preventDefault();let a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{let a=i.activeItemIndex;i.onKeydown(e),this._multiple&&o&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}}_handleOverlayKeydown(e){e.keyCode===27&&!Tl(e)&&(e.preventDefault(),this.close())}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return(r.value!=null||this.canSelectNullableOptions)&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof hv?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new cC(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=Aa(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(fn(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Aa(...this.options.map(i=>i._stateChanges)).pipe(fn(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){let r=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i;this.multiple?i=this.selected.map(r=>r.value):i=this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){e=i;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0&&!!this._overlayDir}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,i=e?e+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||"";return this.ariaLabelledby&&(e+=" "+this.ariaLabelledby),e||(e=this._valueId),e}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-select"]],contentQueries:function(i,r,o){if(i&1&&(Vs(o,Lat,5),Vs(o,Zv,5),Vs(o,Cz,5)),i&2){let s;_t(s=bt())&&(r.customTrigger=s.first),_t(s=bt())&&(r.options=s),_t(s=bt())&&(r.optionGroups=s)}},viewQuery:function(i,r){if(i&1&&(Et(Sat,5),Et(Cat,5),Et(D8,5)),i&2){let o;_t(o=bt())&&(r.trigger=o.first),_t(o=bt())&&(r.panel=o.first),_t(o=bt())&&(r._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:21,hostBindings:function(i,r){i&1&&X("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),i&2&&(Tn("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),Ue("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple)("mat-select-open",r.panelOpen))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Fn],disableRipple:[2,"disableRipple","disableRipple",Fn],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:xs(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Fn],placeholder:"placeholder",required:[2,"required","required",Fn],multiple:[2,"multiple","multiple",Fn],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Fn],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",xs],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",Fn]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[Zi([{provide:gz,useExisting:n},{provide:Sz,useExisting:n}]),or],ngContentSelectors:kat,decls:11,vars:9,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"detach","backdropClick","overlayKeydown","cdkConnectedOverlayDisableClose","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","cdkConnectedOverlayFlexibleDimensions"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,r){if(i&1){let o=ge();Hr(xat),m(0,"div",2,0),X("click",function(){return U(o),j(r.open())}),m(3,"div",3),Q(4,Mat,2,1,"span",4)(5,Aat,3,1,"span",5),g(),m(6,"div",6)(7,"div",7),lt(),m(8,"svg",8),ee(9,"path",9),g()()()(),nn(10,Dat,3,10,"ng-template",10),X("detach",function(){return U(o),j(r.close())})("backdropClick",function(){return U(o),j(r.close())})("overlayKeydown",function(a){return U(o),j(r._handleOverlayKeydown(a))})}if(i&2){let o=oa(1);_(3),Tn("id",r._valueId),_(),J(r.empty?4:5),_(6),oe("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||o)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)("cdkConnectedOverlayFlexibleDimensions",!0)}},dependencies:[hv,D8,Oa],styles:[`@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-select-open .mat-mdc-select-arrow{transform:rotate(180deg)}.mat-form-field-animations-enabled .mat-mdc-select-arrow{transition:transform 80ms linear}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:relative;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}
`],encapsulation:2,changeDetection:0})}return n})();var X1e=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[Pat],imports:[Mn,Qv,Gi,Yl,ch,Qv,Gi]})}return n})();var Rat={capture:!0},Oat=["focus","mousedown","mouseenter","touchstart"],kz="mat-ripple-loader-uninitialized",Mz="mat-ripple-loader-class-name",Y1e="mat-ripple-loader-centered",LD="mat-ripple-loader-disabled",Z1e=(()=>{class n{_document=N(gn);_animationsDisabled=Ys();_globalRippleOptions=N(bz,{optional:!0});_platform=N(Pr);_ngZone=N(Pt);_injector=N(tn);_eventCleanups;_hosts=new Map;constructor(){let e=N(xo).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Oat.map(i=>e.listen(this._document,i,this._onInteraction,Rat)))}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(e,i){e.setAttribute(kz,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(Mz))&&e.setAttribute(Mz,i.className||""),i.centered&&e.setAttribute(Y1e,""),i.disabled&&e.setAttribute(LD,"")}setDisabled(e,i){let r=this._hosts.get(e);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(e))):i?e.setAttribute(LD,""):e.removeAttribute(LD)}_onInteraction=e=>{let i=rs(e);if(i instanceof HTMLElement){let r=i.closest(`[${kz}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(Mz)),e.append(i);let r=this._globalRippleOptions,o=this._animationsDisabled?0:r?.animation?.enterDuration??hC.enterDuration,s=this._animationsDisabled?0:r?.animation?.exitDuration??hC.exitDuration,a={rippleDisabled:this._animationsDisabled||r?.disabled||e.hasAttribute(LD),rippleConfig:{centered:e.hasAttribute(Y1e),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},l=new fC(a,this._ngZone,i,this._platform,this._injector),c=!a.rippleDisabled;c&&l.setupTriggerEvents(e),this._hosts.set(e,{target:a,renderer:l,hasSetUpEvents:c}),e.removeAttribute(kz)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nat=["mat-icon-button",""],Bat=["*"],Vat=new $e("MAT_BUTTON_CONFIG");function Q1e(n){return n==null?void 0:xs(n)}var Tz=(()=>{class n{_elementRef=N(Kt);_ngZone=N(Pt);_animationsDisabled=Ys();_config=N(Vat,{optional:!0});_focusMonitor=N(Kv);_cleanupClick;_renderer=N(dr);_rippleLoader=N(Z1e);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(e){this.tabIndex=e}constructor(){N(qo).load(Yv);let e=this._elementRef.nativeElement;this._isAnchor=e.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(e,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(Tn("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),sl(r.color?"mat-"+r.color:""),Ue("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Fn],disabled:[2,"disabled","disabled",Fn],ariaDisabled:[2,"aria-disabled","ariaDisabled",Fn],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Fn],tabIndex:[2,"tabIndex","tabIndex",Q1e],_tabindex:[2,"tabindex","_tabindex",Q1e]}})}return n})(),T0=(()=>{class n extends Tz{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Lt],attrs:Nat,ngContentSelectors:Bat,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Hr(),Bs(0,"span",0),Pi(1),Bs(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();var Uat=["tooltip"],Ez=20;var Az=new $e("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let n=N(tn);return()=>wa(n,{scrollThrottle:Ez})}});function tge(n){let t=N(tn);return()=>wa(t,{scrollThrottle:Ez})}var Dz={provide:Az,deps:[],useFactory:tge};function nge(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var ige=new $e("mat-tooltip-default-options",{providedIn:"root",factory:nge});var J1e="tooltip-panel",ege=k0({passive:!0}),jat=8,Hat=8,Wat=24,zat=200,og=(()=>{class n{_elementRef=N(Kt);_ngZone=N(Pt);_platform=N(Pr);_ariaDescriber=N(b1e);_focusMonitor=N(Kv);_dir=N(ys);_injector=N(tn);_viewContainerRef=N(Dr);_animationsDisabled=Ys();_defaultOptions=N(ige,{optional:!0});_overlayRef;_tooltipInstance;_overlayPanelClass;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=rge;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=dC(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){let i=dC(e);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Pc(e)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Pc(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(e){let i=this._message;this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new Xe;_isDestroyed=!1;constructor(){let e=this._defaultOptions;e&&(this._showDelay=e.showDelay,this._hideDelay=e.hideDelay,e.position&&(this.position=e.position),e.positionAtOrigin&&(this.positionAtOrigin=e.positionAtOrigin),e.touchGestures&&(this.touchGestures=e.touchGestures),e.tooltipClass&&(this.tooltipClass=e.tooltipClass)),this._viewportMargin=jat}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(fn(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{e.removeEventListener(i,r,ege)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(i);this._detach(),this._portal=this._portal||new D1(this._tooltipComponent,this._viewContainerRef);let o=this._tooltipInstance=r.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe(fn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(e)}hide(e=this.hideDelay){let i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&s._origin instanceof Kt)return this._overlayRef;this._detach()}let i=this._injector.get(df).getAncestorScrollContainers(this._elementRef),r=`${this._cssClassPrefix}-${J1e}`,o=P1(this._injector,this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return o.positionChanges.pipe(fn(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=L1(this._injector,{direction:this._dir,positionStrategy:o,panelClass:this._overlayPanelClass?[...this._overlayPanelClass,r]:r,scrollStrategy:this._injector.get(Az)(),disableAnimations:this._animationsDisabled}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(fn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(fn(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(fn(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!Tl(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(fn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let i=e.getConfig().positionStrategy,r=this._getOrigin(),o=this._getOverlayPosition();i.withPositions([this._addOffset(le(le({},r.main),o.main)),this._addOffset(le(le({},r.fallback),o.fallback))])}_addOffset(e){let i=Hat,r=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-i:e.originY==="bottom"?e.offsetY=i:e.originX==="start"?e.offsetX=r?-i:i:e.originX==="end"&&(e.offsetX=r?i:-i),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",i=this.position,r;i=="above"||i=="below"?r={originX:"center",originY:i=="above"?"top":"bottom"}:i=="before"||i=="left"&&e||i=="right"&&!e?r={originX:"start",originY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(r={originX:"end",originY:"center"});let{x:o,y:s}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:o,originY:s}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",i=this.position,r;i=="above"?r={overlayX:"center",overlayY:"bottom"}:i=="below"?r={overlayX:"center",overlayY:"top"}:i=="before"||i=="left"&&e||i=="right"&&!e?r={overlayX:"end",overlayY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(r={overlayX:"start",overlayY:"center"});let{x:o,y:s}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),Zo(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return this.position==="above"||this.position==="below"?i==="top"?i="bottom":i==="bottom"&&(i="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){let{overlayY:i,originX:r,originY:o}=e,s;if(i==="center"?this._dir&&this._dir.value==="rtl"?s=r==="end"?"left":"right":s=r==="start"?"left":"right":s=i==="bottom"&&o==="top"?"above":"below",s!==this._currentPosition){let a=this._overlayRef;if(a){let l=`${this._cssClassPrefix}-${J1e}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let i;e.x!==void 0&&e.y!==void 0&&(i=e),this.show(void 0,i)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let i=e.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let o=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,r)},this._defaultOptions?.touchLongPressShowDelay??o)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",i=>{let r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let i=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,ege)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let i=this._injector.get(gn).elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let i=this._elementRef.nativeElement,r=i.style;(e==="on"||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(e==="on"||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._isDestroyed||Zo({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,r){i&2&&Ue("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return n})(),rge=(()=>{class n{_changeDetectorRef=N(vi);_elementRef=N(Kt);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled=Ys();_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new Xe;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>Wat&&e.width>=zat}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let i=this._tooltip.nativeElement,r=this._showAnimation,o=this._hideAnimation;if(i.classList.remove(e?o:r),i.classList.add(e?r:o),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let s=getComputedStyle(i);(s.getPropertyValue("animation-duration")==="0s"||s.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(i,r){if(i&1&&Et(Uat,7),i&2){let o;_t(o=bt())&&(r._tooltip=o.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,r){i&1&&X("mouseleave",function(s){return r._handleMouseLeave(s)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,r){if(i&1){let o=ge();m(0,"div",1,0),X("animationend",function(a){return U(o),j(r._handleAnimationEnd(a))}),m(2,"div",2),w(3),g()()}i&2&&(Ue("mdc-tooltip--multiline",r._isMultiline),oe("ngClass",r.tooltipClass),_(3),Ee(r.message))},dependencies:[Oa],styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mat-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mat-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mat-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mat-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mat-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mat-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return n})();var pC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[Dz],imports:[lC,Mn,Gi,Gi,Yl]})}return n})();var qat=["matButton",""],$at=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Kat=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var oge=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),Iz=(()=>{class n extends Tz{get appearance(){return this._appearance}set appearance(e){this.setAppearance(e||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let e=Gat(this._elementRef.nativeElement);e&&this.setAppearance(e)}setAppearance(e){if(e===this._appearance)return;let i=this._elementRef.nativeElement.classList,r=this._appearance?oge.get(this._appearance):null,o=oge.get(e);r&&i.remove(...r),i.add(...o),this._appearance=e}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[Lt],attrs:qat,ngContentSelectors:Kat,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Hr($at),Bs(0,"span",0),Pi(1),Ho(2,"span",1),Pi(3,1),Qo(),Pi(4,2),Bs(5,"span",2)(6,"span",3)),i&2&&Ue("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function Gat(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var Jv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[Gi,PD,Gi]})}return n})();function Yat(n,t){if(n&1&&(m(0,"mat-option",17),w(1),g()),n&2){let e=t.$implicit;oe("value",e),_(),je(" ",e," ")}}function Zat(n,t){if(n&1){let e=ge();m(0,"mat-form-field",14)(1,"mat-select",16,0),X("selectionChange",function(r){U(e);let o=E(2);return j(o._changePageSize(r.value))}),yn(3,Yat,2,2,"mat-option",17,pc),g(),m(5,"div",18),X("click",function(){U(e);let r=oa(2);return j(r.open())}),g()()}if(n&2){let e=E(2);oe("appearance",e._formFieldAppearance)("color",e.color),_(),oe("value",e.pageSize)("disabled",e.disabled),_3("aria-labelledby",e._pageSizeLabelId),oe("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),_(2),vn(e._displayedPageSizeOptions)}}function Qat(n,t){if(n&1&&(m(0,"div",15),w(1),g()),n&2){let e=E(2);_(),Ee(e.pageSize)}}function Jat(n,t){if(n&1&&(m(0,"div",3)(1,"div",13),w(2),g(),Q(3,Zat,6,7,"mat-form-field",14),Q(4,Qat,2,1,"div",15),g()),n&2){let e=E();_(),Tn("id",e._pageSizeLabelId),_(),je(" ",e._intl.itemsPerPageLabel," "),_(),J(e._displayedPageSizeOptions.length>1?3:-1),_(),J(e._displayedPageSizeOptions.length<=1?4:-1)}}function elt(n,t){if(n&1){let e=ge();m(0,"button",19),X("click",function(){U(e);let r=E();return j(r._buttonClicked(0,r._previousButtonsDisabled()))}),lt(),m(1,"svg",8),ee(2,"path",20),g()()}if(n&2){let e=E();oe("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("disabled",e._previousButtonsDisabled())("tabindex",e._previousButtonsDisabled()?-1:null),Tn("aria-label",e._intl.firstPageLabel)}}function tlt(n,t){if(n&1){let e=ge();m(0,"button",21),X("click",function(){U(e);let r=E();return j(r._buttonClicked(r.getNumberOfPages()-1,r._nextButtonsDisabled()))}),lt(),m(1,"svg",8),ee(2,"path",22),g()()}if(n&2){let e=E();oe("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("disabled",e._nextButtonsDisabled())("tabindex",e._nextButtonsDisabled()?-1:null),Tn("aria-label",e._intl.lastPageLabel)}}var RD=(()=>{class n{changes=new Xe;itemsPerPageLabel="Items per page:";nextPageLabel="Next page";previousPageLabel="Previous page";firstPageLabel="First page";lastPageLabel="Last page";getRangeLabel=(e,i,r)=>{if(r==0||i==0)return`0 of ${r}`;r=Math.max(r,0);let o=e*i,s=o<r?Math.min(o+i,r):o+i;return`${o+1} \u2013 ${s} of ${r}`};static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nlt(n){return n||new RD}var ilt={provide:RD,deps:[[new Nl,new $f,RD]],useFactory:nlt},rlt=50;var olt=new $e("MAT_PAGINATOR_DEFAULT_OPTIONS"),Fz=(()=>{class n{_intl=N(RD);_changeDetectorRef=N(vi);_formFieldAppearance;_pageSizeLabelId=N(Xs).getId("mat-paginator-page-size-label-");_intlChanges;_isInitialized=!1;_initializedStream=new Kd(1);color;get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}_pageIndex=0;get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}_length=0;get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}_pageSize;get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(i=>xs(i,0)),this._updateDisplayedPageSizeOptions()}_pageSizeOptions=[];hidePageSize=!1;showFirstLastButtons=!1;selectConfig={};disabled=!1;page=new vt;_displayedPageSizeOptions;initialized=this._initializedStream;constructor(){let e=this._intl,i=N(olt,{optional:!0});if(this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){let{pageSize:r,pageSizeOptions:o,hidePageSize:s,showFirstLastButtons:a}=i;r!=null&&(this._pageSize=r),o!=null&&(this._pageSizeOptions=o),s!=null&&(this.hidePageSize=s),a!=null&&(this.showFirstLastButtons=a)}this._formFieldAppearance=i?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){this.hasNextPage()&&this._navigate(this.pageIndex+1)}previousPage(){this.hasPreviousPage()&&this._navigate(this.pageIndex-1)}firstPage(){this.hasPreviousPage()&&this._navigate(0)}lastPage(){this.hasNextPage()&&this._navigate(this.getNumberOfPages()-1)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let e=this.getNumberOfPages()-1;return this.pageIndex<e&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){let i=this.pageIndex*this.pageSize,r=this.pageIndex;this.pageIndex=Math.floor(i/e)||0,this.pageSize=e,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:rlt),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,i)=>e-i),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}_navigate(e){let i=this.pageIndex;e!==i&&(this.pageIndex=e,this._emitPageEvent(i))}_buttonClicked(e,i){i||this._navigate(e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",xs],length:[2,"length","length",xs],pageSize:[2,"pageSize","pageSize",xs],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",Fn],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",Fn],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",Fn]},outputs:{page:"page"},exportAs:["matPaginator"],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(i,r){i&1&&(m(0,"div",1)(1,"div",2),Q(2,Jat,5,4,"div",3),m(3,"div",4)(4,"div",5),w(5),g(),Q(6,elt,3,5,"button",6),m(7,"button",7),X("click",function(){return r._buttonClicked(r.pageIndex-1,r._previousButtonsDisabled())}),lt(),m(8,"svg",8),ee(9,"path",9),g()(),dn(),m(10,"button",10),X("click",function(){return r._buttonClicked(r.pageIndex+1,r._nextButtonsDisabled())}),lt(),m(11,"svg",8),ee(12,"path",11),g()(),Q(13,tlt,3,5,"button",12),g()()()),i&2&&(_(2),J(r.hidePageSize?-1:2),_(3),je(" ",r._intl.getRangeLabel(r.pageIndex,r.pageSize,r.length)," "),_(),J(r.showFirstLastButtons?6:-1),_(),oe("matTooltip",r._intl.previousPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("disabled",r._previousButtonsDisabled())("tabindex",r._previousButtonsDisabled()?-1:null),Tn("aria-label",r._intl.previousPageLabel),_(3),oe("matTooltip",r._intl.nextPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("disabled",r._nextButtonsDisabled())("tabindex",r._nextButtonsDisabled()?-1:null),Tn("aria-label",r._intl.nextPageLabel),_(3),J(r.showFirstLastButtons?13:-1))},dependencies:[ID,G1e,Zv,T0,og],styles:[`.mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-sys-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-sys-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-sys-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-sys-body-small-tracking));--mat-form-field-container-height: var(--mat-paginator-form-field-container-height, 40px);--mat-form-field-container-vertical-padding: var(--mat-paginator-form-field-container-vertical-padding, 8px)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-sys-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size, 56px)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:var(--mat-paginator-page-size-select-width, 84px)}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}@media(forced-colors: active){.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon,.mat-mdc-paginator-icon{fill:currentColor}.mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-range-actions .mat-mdc-icon-button[aria-disabled]{color:GrayText}}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display, block);position:absolute;top:50%;left:50%;width:var(--mat-paginator-page-size-select-width, 84px);height:var(--mat-paginator-page-size-select-touch-target-height, 48px);background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}
`],encapsulation:2,changeDetection:0})}return n})(),OD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[ilt],imports:[Jv,X1e,pC,Fz]})}return n})();var sge=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({})}return n})();var ND=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[Gi,ch,ch,sge,Gi]})}return n})();var age=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[A1]})}return n})();var BD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[Gi,age,Gi]})}return n})();var Pz=new $e("MAT_DATE_LOCALE",{providedIn:"root",factory:slt});function slt(){return N(Qf)}var e_="Method not implemented",Pl=class{locale;_localeChanges=new Xe;localeChanges=this._localeChanges;setTime(t,e,i,r){throw new Error(e_)}getHours(t){throw new Error(e_)}getMinutes(t){throw new Error(e_)}getSeconds(t){throw new Error(e_)}parseTime(t,e){throw new Error(e_)}addSeconds(t,e){throw new Error(e_)}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return t==null||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}compareTime(t,e){return this.getHours(t)-this.getHours(e)||this.getMinutes(t)-this.getMinutes(e)||this.getSeconds(t)-this.getSeconds(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}sameTime(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareTime(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}},sg=new $e("mat-date-formats");var alt=["mat-calendar-body",""];function llt(n,t){return this._trackRow(t)}var fge=(n,t)=>t.id;function clt(n,t){if(n&1&&(m(0,"tr",0)(1,"td",3),w(2),g()()),n&2){let e=E();_(),In("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Tn("colspan",e.numCols),_(),je(" ",e.label," ")}}function dlt(n,t){if(n&1&&(m(0,"td",3),w(1),g()),n&2){let e=E(2);In("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Tn("colspan",e._firstRowOffset),_(),je(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function ult(n,t){if(n&1){let e=ge();m(0,"td",6)(1,"button",7),X("click",function(r){let o=U(e).$implicit,s=E(2);return j(s._cellClicked(o,r))})("focus",function(r){let o=U(e).$implicit,s=E(2);return j(s._emitActiveDateChange(o,r))}),m(2,"span",8),w(3),g(),ee(4,"span",9),g()()}if(n&2){let e=t.$implicit,i=t.$index,r=E().$index,o=E();In("width",o._cellWidth)("padding-top",o._cellPadding)("padding-bottom",o._cellPadding),Tn("data-mat-row",r)("data-mat-col",i),_(),Ue("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",o._isActiveCell(r,i))("mat-calendar-body-range-start",o._isRangeStart(e.compareValue))("mat-calendar-body-range-end",o._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",o._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",o._isComparisonBridgeStart(e.compareValue,r,i))("mat-calendar-body-comparison-bridge-end",o._isComparisonBridgeEnd(e.compareValue,r,i))("mat-calendar-body-comparison-start",o._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",o._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",o._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",o._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",o._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",o._isInPreview(e.compareValue)),oe("ngClass",e.cssClasses)("tabindex",o._isActiveCell(r,i)?0:-1),Tn("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",o._isSelected(e.compareValue))("aria-current",o.todayValue===e.compareValue?"date":null)("aria-describedby",o._getDescribedby(e.compareValue)),_(),Ue("mat-calendar-body-selected",o._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",o._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",o.todayValue===e.compareValue),_(),je(" ",e.displayValue," ")}}function hlt(n,t){if(n&1&&(m(0,"tr",1),Q(1,dlt,2,6,"td",4),yn(2,ult,5,48,"td",5,fge),g()),n&2){let e=t.$implicit,i=t.$index,r=E();_(),J(i===0&&r._firstRowOffset?1:-1),_(),vn(e)}}function flt(n,t){if(n&1&&(m(0,"th",2)(1,"span",6),w(2),g(),m(3,"span",3),w(4),g()()),n&2){let e=t.$implicit;_(2),Ee(e.long),_(2),Ee(e.narrow)}}var plt=["*"];function mlt(n,t){}function glt(n,t){if(n&1){let e=ge();m(0,"mat-month-view",4),Ne("activeDateChange",function(r){U(e);let o=E();return Ve(o.activeDate,r)||(o.activeDate=r),j(r)}),X("_userSelection",function(r){U(e);let o=E();return j(o._dateSelected(r))})("dragStarted",function(r){U(e);let o=E();return j(o._dragStarted(r))})("dragEnded",function(r){U(e);let o=E();return j(o._dragEnded(r))}),g()}if(n&2){let e=E();Oe("activeDate",e.activeDate),oe("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function ylt(n,t){if(n&1){let e=ge();m(0,"mat-year-view",5),Ne("activeDateChange",function(r){U(e);let o=E();return Ve(o.activeDate,r)||(o.activeDate=r),j(r)}),X("monthSelected",function(r){U(e);let o=E();return j(o._monthSelectedInYearView(r))})("selectedChange",function(r){U(e);let o=E();return j(o._goToDateInView(r,"month"))}),g()}if(n&2){let e=E();Oe("activeDate",e.activeDate),oe("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function vlt(n,t){if(n&1){let e=ge();m(0,"mat-multi-year-view",6),Ne("activeDateChange",function(r){U(e);let o=E();return Ve(o.activeDate,r)||(o.activeDate=r),j(r)}),X("yearSelected",function(r){U(e);let o=E();return j(o._yearSelectedInMultiYearView(r))})("selectedChange",function(r){U(e);let o=E();return j(o._goToDateInView(r,"year"))}),g()}if(n&2){let e=E();Oe("activeDate",e.activeDate),oe("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function _lt(n,t){}var blt=["button"],wlt=[[["","matDatepickerToggleIcon",""]]],Slt=["[matDatepickerToggleIcon]"];function Clt(n,t){n&1&&(lt(),m(0,"svg",2),ee(1,"path",3),g())}var n_=(()=>{class n{changes=new Xe;calendarLabel="Calendar";openCalendarLabel="Open calendar";closeCalendarLabel="Close calendar";prevMonthLabel="Previous month";nextMonthLabel="Next month";prevYearLabel="Previous year";nextYearLabel="Next year";prevMultiYearLabel="Previous 24 years";nextMultiYearLabel="Next 24 years";switchToMonthViewLabel="Choose date";switchToMultiYearViewLabel="Choose month and year";startDateLabel="Start date";endDateLabel="End date";comparisonDateLabel="Comparison range";formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xlt=0,gC=class{value;displayValue;ariaLabel;enabled;cssClasses;compareValue;rawValue;id=xlt++;constructor(t,e,i,r,o={},s=t,a){this.value=t,this.displayValue=e,this.ariaLabel=i,this.enabled=r,this.cssClasses=o,this.compareValue=s,this.rawValue=a}},klt={passive:!1,capture:!0},VD={passive:!0,capture:!0},lge={passive:!0},t_=(()=>{class n{_elementRef=N(Kt);_ngZone=N(Pt);_platform=N(Pr);_intl=N(n_);_eventCleanups;_skipNextFocus;_focusActiveCellAfterViewChecked=!1;label;rows;todayValue;startValue;endValue;labelMinRequiredCells;numCols=7;activeCell=0;ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}isRange=!1;cellAspectRatio=1;comparisonStart;comparisonEnd;previewStart=null;previewEnd=null;startDateAccessibleName;endDateAccessibleName;selectedValueChange=new vt;previewChange=new vt;activeDateChange=new vt;dragStarted=new vt;dragEnded=new vt;_firstRowOffset;_cellPadding;_cellWidth;_startDateLabelId;_endDateLabelId;_comparisonStartDateLabelId;_comparisonEndDateLabelId;_didDragSinceMouseDown=!1;_injector=N(tn);comparisonDateAccessibleName=this._intl.comparisonDateLabel;_trackRow=e=>e;constructor(){let e=N(dr),i=N(Xs);this._startDateLabelId=i.getId("mat-calendar-body-start-"),this._endDateLabelId=i.getId("mat-calendar-body-end-"),this._comparisonStartDateLabelId=i.getId("mat-calendar-body-comparison-start-"),this._comparisonEndDateLabelId=i.getId("mat-calendar-body-comparison-end-"),N(qo).load(Yv),this._ngZone.runOutsideAngular(()=>{let r=this._elementRef.nativeElement,o=[e.listen(r,"touchmove",this._touchmoveHandler,klt),e.listen(r,"mouseenter",this._enterHandler,VD),e.listen(r,"focus",this._enterHandler,VD),e.listen(r,"mouseleave",this._leaveHandler,VD),e.listen(r,"blur",this._leaveHandler,VD),e.listen(r,"mousedown",this._mousedownHandler,lge),e.listen(r,"touchstart",this._mousedownHandler,lge)];this._platform.isBrowser&&o.push(e.listen("window","mouseup",this._mouseupHandler),e.listen("window","touchend",this._touchendHandler)),this._eventCleanups=o})}_cellClicked(e,i){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_emitActiveDateChange(e,i){e.enabled&&this.activeDateChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){let i=e.numCols,{rows:r,numCols:o}=this;(e.rows||i)&&(this._firstRowOffset=r&&r.length&&r[0].length?o-r[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/o}%`),(i||!this._cellWidth)&&(this._cellWidth=`${100/o}%`)}ngOnDestroy(){this._eventCleanups.forEach(e=>e())}_isActiveCell(e,i){let r=e*this.numCols+i;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){Zo(()=>{setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return Oz(e,this.startValue,this.endValue)}_isRangeEnd(e){return Nz(e,this.startValue,this.endValue)}_isInRange(e){return Bz(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return Oz(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let o=this.rows[i][r-1];if(!o){let s=this.rows[i-1];o=s&&s[s.length-1]}return o&&!this._isRangeEnd(o.compareValue)}_isComparisonBridgeEnd(e,i,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let o=this.rows[i][r+1];if(!o){let s=this.rows[i+1];o=s&&s[0]}return o&&!this._isRangeStart(o.compareValue)}_isComparisonEnd(e){return Nz(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return Bz(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return Oz(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return Nz(e,this.previewStart,this.previewEnd)}_isInPreview(e){return Bz(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){if(!this.isRange)return null;if(this.startValue===e&&this.endValue===e)return`${this._startDateLabelId} ${this._endDateLabelId}`;if(this.startValue===e)return this._startDateLabelId;if(this.endValue===e)return this._endDateLabelId;if(this.comparisonStart!==null&&this.comparisonEnd!==null){if(e===this.comparisonStart&&e===this.comparisonEnd)return`${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;if(e===this.comparisonStart)return this._comparisonStartDateLabelId;if(e===this.comparisonEnd)return this._comparisonEndDateLabelId}return null}_enterHandler=e=>{if(this._skipNextFocus&&e.type==="focus"){this._skipNextFocus=!1;return}if(e.target&&this.isRange){let i=this._getCellFromElement(e.target);i&&this._ngZone.run(()=>this.previewChange.emit({value:i.enabled?i:null,event:e}))}};_touchmoveHandler=e=>{if(!this.isRange)return;let i=cge(e),r=i?this._getCellFromElement(i):null;i!==e.target&&(this._didDragSinceMouseDown=!0),Rz(e.target)&&e.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:r?.enabled?r:null,event:e}))};_leaveHandler=e=>{this.previewEnd!==null&&this.isRange&&(e.type!=="blur"&&(this._didDragSinceMouseDown=!0),e.target&&this._getCellFromElement(e.target)&&!(e.relatedTarget&&this._getCellFromElement(e.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:e})))};_mousedownHandler=e=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let i=e.target&&this._getCellFromElement(e.target);!i||!this._isInRange(i.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:i.rawValue,event:e})})};_mouseupHandler=e=>{if(!this.isRange)return;let i=Rz(e.target);if(!i){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:e})});return}i.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let r=this._getCellFromElement(i);this.dragEnded.emit({value:r?.rawValue??null,event:e})})};_touchendHandler=e=>{let i=cge(e);i&&this._mouseupHandler({target:i})};_getCellFromElement(e){let i=Rz(e);if(i){let r=i.getAttribute("data-mat-row"),o=i.getAttribute("data-mat-col");if(r&&o)return this.rows[parseInt(r)]?.[parseInt(o)]||null}return null}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[or],attrs:alt,decls:11,vars:11,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(i,r){i&1&&(Q(0,clt,3,6,"tr",0),yn(1,hlt,4,1,"tr",1,llt,!0),m(3,"span",2),w(4),g(),m(5,"span",2),w(6),g(),m(7,"span",2),w(8),g(),m(9,"span",2),w(10),g()),i&2&&(J(r._firstRowOffset<r.labelMinRequiredCells?0:-1),_(),vn(r.rows),_(2),oe("id",r._startDateLabelId),_(),je(" ",r.startDateAccessibleName,`
`),_(),oe("id",r._endDateLabelId),_(),je(" ",r.endDateAccessibleName,`
`),_(),oe("id",r._comparisonStartDateLabelId),_(),ei(" ",r.comparisonDateAccessibleName," ",r.startDateAccessibleName,`
`),_(),oe("id",r._comparisonEndDateLabelId),_(),ei(" ",r.comparisonDateAccessibleName," ",r.endDateAccessibleName,`
`))},dependencies:[Oa],styles:[`.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function Lz(n){return n?.nodeName==="TD"}function Rz(n){let t;return Lz(n)?t=n:Lz(n.parentNode)?t=n.parentNode:Lz(n.parentNode?.parentNode)&&(t=n.parentNode.parentNode),t?.getAttribute("data-mat-row")!=null?t:null}function Oz(n,t,e){return e!==null&&t!==e&&n<e&&n===t}function Nz(n,t,e){return t!==null&&t!==e&&n>=t&&n===e}function Bz(n,t,e,i){return i&&t!==null&&e!==null&&t!==e&&n>=t&&n<=e}function cge(n){let t=n.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)}var $c=class{start;end;_disableStructuralEquivalency;constructor(t,e){this.start=t,this.end=e}},UD=(()=>{class n{selection;_adapter;_selectionChanged=new Xe;selectionChanged=this._selectionChanged;constructor(e,i){this.selection=e,this._adapter=i,this.selection=e}updateSelection(e,i){let r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static \u0275fac=function(i){tb()};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),Mlt=(()=>{class n extends UD{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new n(this._adapter);return e.updateSelection(this.selection,this),e}static \u0275fac=function(i){return new(i||n)(Ye(Pl))};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function Tlt(n,t){return n||new Mlt(t)}var Elt={provide:UD,deps:[[new Nl,new $f,UD],Pl],useFactory:Tlt};var pge=new $e("MAT_DATE_RANGE_SELECTION_STRATEGY");var Vz=7,Alt=0,dge=(()=>{class n{_changeDetectorRef=N(vi);_dateFormats=N(sg,{optional:!0});_dateAdapter=N(Pl,{optional:!0});_dir=N(ys,{optional:!0});_rangeStrategy=N(pge,{optional:!0});_rerenderSubscription=qn.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof $c?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;activeDrag=null;selectedChange=new vt;_userSelection=new vt;dragStarted=new vt;dragEnded=new vt;activeDateChange=new vt;_matCalendarBody;_monthLabel=P("");_weeks=P([]);_firstWeekOffset=P(0);_rangeStart=P(null);_rangeEnd=P(null);_comparisonRangeStart=P(null);_comparisonRangeEnd=P(null);_previewStart=P(null);_previewEnd=P(null);_isRange=P(!1);_todayDate=P(null);_weekdays=P([]);constructor(){N(qo).load(lh),this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Co(null)).subscribe(()=>this._init())}ngOnChanges(e){let i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){let i=e.value,r=this._getDateFromDayOfMonth(i),o,s;this._selected instanceof $c?(o=this._getDateInCurrentMonth(this._selected.start),s=this._getDateInCurrentMonth(this._selected.end)):o=s=this._getDateInCurrentMonth(this._selected),(o!==i||s!==i)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){let i=e.value,r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&e.preventDefault();return;case 27:this._previewEnd()!=null&&!Tl(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation());return;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate.set(this._getCellCompareValue(this._dateAdapter.today())),this._monthLabel.set(this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase());let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset.set((Vz+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%Vz),this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:i}){if(this._rangeStrategy){let r=i?i.rawValue:null,o=this._rangeStrategy.createPreview(r,this.selected,e);if(this._previewStart.set(this._getCellCompareValue(o.start)),this._previewEnd.set(this._getCellCompareValue(o.end)),this.activeDrag&&r){let s=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,r,e);s&&(this._previewStart.set(this._getCellCompareValue(s.start)),this._previewEnd.set(this._getCellCompareValue(s.end)))}}}_dragEnded(e){if(this.activeDrag)if(e.value){let i=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:i??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){let e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow"),o=this._dateAdapter.getDayOfWeekNames("long").map((s,a)=>({long:s,narrow:i[a],id:Alt++}));this._weekdays.set(o.slice(e).concat(o.slice(0,e)))}_createWeekCells(){let e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames(),r=[[]];for(let o=0,s=this._firstWeekOffset();o<e;o++,s++){s==Vz&&(r.push([]),s=0);let a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),o+1),l=this._shouldEnableDate(a),c=this._dateAdapter.format(a,this._dateFormats.display.dateA11yLabel),d=this.dateClass?this.dateClass(a,"month"):void 0;r[r.length-1].push(new gC(o+1,i[o],c,l,d,this._getCellCompareValue(a),a))}this._weeks.set(r)}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!!(e&&i&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i)&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){let i=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),o=this._dateAdapter.getDate(e);return new Date(i,r,o).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(e){e instanceof $c?(this._rangeStart.set(this._getCellCompareValue(e.start)),this._rangeEnd.set(this._getCellCompareValue(e.end)),this._isRange.set(!0)):(this._rangeStart.set(this._getCellCompareValue(e)),this._rangeEnd.set(this._rangeStart()),this._isRange.set(!1)),this._comparisonRangeStart.set(this._getCellCompareValue(this.comparisonStart)),this._comparisonRangeEnd.set(this._getCellCompareValue(this.comparisonEnd))}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart.set(null),this._previewEnd.set(null)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-month-view"]],viewQuery:function(i,r){if(i&1&&Et(t_,5),i&2){let o;_t(o=bt())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[or],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(i,r){i&1&&(m(0,"table",0)(1,"thead",1)(2,"tr"),yn(3,flt,5,2,"th",2,fge),g(),m(5,"tr",3),ee(6,"th",4),g()(),m(7,"tbody",5),X("selectedValueChange",function(s){return r._dateSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("previewChange",function(s){return r._previewChanged(s)})("dragStarted",function(s){return r.dragStarted.emit(s)})("dragEnded",function(s){return r._dragEnded(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),g()()),i&2&&(_(3),vn(r._weekdays()),_(4),oe("label",r._monthLabel())("rows",r._weeks())("todayValue",r._todayDate())("startValue",r._rangeStart())("endValue",r._rangeEnd())("comparisonStart",r._comparisonRangeStart())("comparisonEnd",r._comparisonRangeEnd())("previewStart",r._previewStart())("previewEnd",r._previewEnd())("isRange",r._isRange())("labelMinRequiredCells",3)("activeCell",r._dateAdapter.getDate(r.activeDate)-1)("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName))},dependencies:[t_],encapsulation:2,changeDetection:0})}return n})(),rc=24,Uz=4,uge=(()=>{class n{_changeDetectorRef=N(vi);_dateAdapter=N(Pl,{optional:!0});_dir=N(ys,{optional:!0});_rerenderSubscription=qn.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),mge(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof $c?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new vt;yearSelected=new vt;activeDateChange=new vt;_matCalendarBody;_years=P([]);_todayYear=P(0);_selectedYear=P(null);constructor(){this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Co(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear.set(this._dateAdapter.getYear(this._dateAdapter.today()));let i=this._dateAdapter.getYear(this._activeDate)-mC(this._dateAdapter,this.activeDate,this.minDate,this.maxDate),r=[];for(let o=0,s=[];o<rc;o++)s.push(i+o),s.length==Uz&&(r.push(s.map(a=>this._createCellForYear(a))),s=[]);this._years.set(r),this._changeDetectorRef.markForCheck()}_yearSelected(e){let i=e.value,r=this._dateAdapter.createDate(i,0,1),o=this._getDateFromYear(i);this.yearSelected.emit(r),this.selectedChange.emit(o)}_updateActiveDate(e){let i=e.value,r=this._activeDate;this.activeDate=this._getDateFromYear(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-Uz);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Uz);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-mC(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,rc-mC(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-rc*10:-rc);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?rc*10:rc);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return mC(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){let i=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,i,1));return this._dateAdapter.createDate(e,i,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(e){let i=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(i),o=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new gC(e,r,r,this._shouldEnableYear(e),o)}_shouldEnableYear(e){if(e==null||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let i=this._dateAdapter.createDate(e,0,1);for(let r=i;this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(e){if(this._selectedYear.set(null),e instanceof $c){let i=e.start||e.end;i&&this._selectedYear.set(this._dateAdapter.getYear(i))}else e&&this._selectedYear.set(this._dateAdapter.getYear(e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-multi-year-view"]],viewQuery:function(i,r){if(i&1&&Et(t_,5),i&2){let o;_t(o=bt())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(i,r){i&1&&(m(0,"table",0)(1,"thead",1)(2,"tr"),ee(3,"th",2),g()(),m(4,"tbody",3),X("selectedValueChange",function(s){return r._yearSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),g()()),i&2&&(_(4),oe("rows",r._years())("todayValue",r._todayYear())("startValue",r._selectedYear())("endValue",r._selectedYear())("numCols",4)("cellAspectRatio",4/7)("activeCell",r._getActiveCell()))},dependencies:[t_],encapsulation:2,changeDetection:0})}return n})();function mge(n,t,e,i,r){let o=n.getYear(t),s=n.getYear(e),a=gge(n,i,r);return Math.floor((o-a)/rc)===Math.floor((s-a)/rc)}function mC(n,t,e,i){let r=n.getYear(t);return Dlt(r-gge(n,e,i),rc)}function gge(n,t,e){let i=0;return e?i=n.getYear(e)-rc+1:t&&(i=n.getYear(t)),i}function Dlt(n,t){return(n%t+t)%t}var hge=(()=>{class n{_changeDetectorRef=N(vi);_dateFormats=N(sg,{optional:!0});_dateAdapter=N(Pl,{optional:!0});_dir=N(ys,{optional:!0});_rerenderSubscription=qn.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof $c?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new vt;monthSelected=new vt;activeDateChange=new vt;_matCalendarBody;_months=P([]);_yearLabel=P("");_todayMonth=P(null);_selectedMonth=P(null);constructor(){this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Co(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){let i=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(r);let o=this._getDateFromMonth(i);this.selectedChange.emit(o)}_updateActiveDate(e){let i=e.value,r=this._activeDate;this.activeDate=this._getDateFromMonth(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth.set(this._getMonthInCurrentYear(this._dateAdapter.today())),this._yearLabel.set(this._dateAdapter.getYearName(this.activeDate));let e=this._dateAdapter.getMonthNames("short");this._months.set([[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(r=>this._createCellForMonth(r,e[r])))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){let i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(e,i){let r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),o=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),s=this.dateClass?this.dateClass(r,"year"):void 0;return new gC(e,i.toLocaleUpperCase(),o,this._shouldEnableMonth(e),s)}_shouldEnableMonth(e){let i=this._dateAdapter.getYear(this.activeDate);if(e==null||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;let r=this._dateAdapter.createDate(i,e,1);for(let o=r;this._dateAdapter.getMonth(o)==e;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){let r=this._dateAdapter.getYear(this.maxDate),o=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&i>o}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){let r=this._dateAdapter.getYear(this.minDate),o=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&i<o}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(e){e instanceof $c?this._selectedMonth.set(this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end)):this._selectedMonth.set(this._getMonthInCurrentYear(e))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-year-view"]],viewQuery:function(i,r){if(i&1&&Et(t_,5),i&2){let o;_t(o=bt())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(i,r){i&1&&(m(0,"table",0)(1,"thead",1)(2,"tr"),ee(3,"th",2),g()(),m(4,"tbody",3),X("selectedValueChange",function(s){return r._monthSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),g()()),i&2&&(_(4),oe("label",r._yearLabel())("rows",r._months())("todayValue",r._todayMonth())("startValue",r._selectedMonth())("endValue",r._selectedMonth())("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._dateAdapter.getMonth(r.activeDate)))},dependencies:[t_],encapsulation:2,changeDetection:0})}return n})(),yge=(()=>{class n{_intl=N(n_);calendar=N(jz);_dateAdapter=N(Pl,{optional:!0});_dateFormats=N(sg,{optional:!0});_periodButtonText;_periodButtonDescription;_periodButtonLabel;_prevButtonLabel;_nextButtonLabel;constructor(){N(qo).load(lh);let e=N(vi);this._updateLabels(),this.calendar.stateChanges.subscribe(()=>{this._updateLabels(),e.markForCheck()})}get periodButtonText(){return this._periodButtonText}get periodButtonDescription(){return this._periodButtonDescription}get periodButtonLabel(){return this._periodButtonLabel}get prevButtonLabel(){return this._prevButtonLabel}get nextButtonLabel(){return this._nextButtonLabel}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.previousEnabled()&&(this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-rc))}nextClicked(){this.nextEnabled()&&(this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:rc))}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_updateLabels(){let e=this.calendar,i=this._intl,r=this._dateAdapter;e.currentView==="month"?(this._periodButtonText=r.format(e.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase(),this._periodButtonDescription=r.format(e.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase(),this._periodButtonLabel=i.switchToMultiYearViewLabel,this._prevButtonLabel=i.prevMonthLabel,this._nextButtonLabel=i.nextMonthLabel):e.currentView==="year"?(this._periodButtonText=r.getYearName(e.activeDate),this._periodButtonDescription=r.getYearName(e.activeDate),this._periodButtonLabel=i.switchToMonthViewLabel,this._prevButtonLabel=i.prevYearLabel,this._nextButtonLabel=i.nextYearLabel):(this._periodButtonText=i.formatYearRange(...this._formatMinAndMaxYearLabels()),this._periodButtonDescription=i.formatYearRangeLabel(...this._formatMinAndMaxYearLabels()),this._periodButtonLabel=i.switchToMonthViewLabel,this._prevButtonLabel=i.prevMultiYearLabel,this._nextButtonLabel=i.nextMultiYearLabel)}_isSameView(e,i){return this.calendar.currentView=="month"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):this.calendar.currentView=="year"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):mge(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let i=this._dateAdapter.getYear(this.calendar.activeDate)-mC(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=i+rc-1,o=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),s=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return[o,s]}_periodButtonLabelId=N(Xs).getId("mat-calendar-period-label-");static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:plt,decls:17,vars:13,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["matButton","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["matIconButton","","type","button","disabledInteractive","",1,"mat-calendar-previous-button",3,"click","disabled","matTooltip"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["matIconButton","","type","button","disabledInteractive","",1,"mat-calendar-next-button",3,"click","disabled","matTooltip"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(i,r){i&1&&(Hr(),m(0,"div",0)(1,"div",1)(2,"span",2),w(3),g(),m(4,"button",3),X("click",function(){return r.currentPeriodClicked()}),m(5,"span",4),w(6),g(),lt(),m(7,"svg",5),ee(8,"polygon",6),g()(),dn(),ee(9,"div",7),Pi(10),m(11,"button",8),X("click",function(){return r.previousClicked()}),lt(),m(12,"svg",9),ee(13,"path",10),g()(),dn(),m(14,"button",11),X("click",function(){return r.nextClicked()}),lt(),m(15,"svg",9),ee(16,"path",12),g()()()()),i&2&&(_(2),oe("id",r._periodButtonLabelId),_(),Ee(r.periodButtonDescription),_(),Tn("aria-label",r.periodButtonLabel)("aria-describedby",r._periodButtonLabelId),_(2),Ee(r.periodButtonText),_(),Ue("mat-calendar-invert",r.calendar.currentView!=="month"),_(4),oe("disabled",!r.previousEnabled())("matTooltip",r.prevButtonLabel),Tn("aria-label",r.prevButtonLabel),_(3),oe("disabled",!r.nextEnabled())("matTooltip",r.nextButtonLabel),Tn("aria-label",r.nextButtonLabel))},dependencies:[Iz,T0,og],encapsulation:2,changeDetection:0})}return n})(),jz=(()=>{class n{_dateAdapter=N(Pl,{optional:!0});_dateFormats=N(sg,{optional:!0});_changeDetectorRef=N(vi);_elementRef=N(Kt);headerComponent;_calendarHeaderPortal;_intlChanges;_moveFocusOnNextTick=!1;get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get selected(){return this._selected}set selected(e){e instanceof $c?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;selectedChange=new vt;yearSelected=new vt;monthSelected=new vt;viewChanged=new vt(!0);_userSelection=new vt;_userDragDrop=new vt;monthView;yearView;multiYearView;get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}_clampedActiveDate;get currentView(){return this._currentView}set currentView(e){let i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&(this.stateChanges.next(),this.viewChanged.emit(i))}_currentView;_activeDrag=null;stateChanges=new Xe;constructor(){this._intlChanges=N(n_).changes.subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new D1(this.headerComponent||yge),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){let i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,o=i||r||e.dateFilter;if(o&&!o.firstChange){let s=this._getCurrentViewComponent();s&&(this._elementRef.nativeElement.contains(fS())&&(this._moveFocusOnNextTick=!0),this._changeDetectorRef.detectChanges(),s._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){let i=e.value;(this.selected instanceof $c||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-calendar"]],viewQuery:function(i,r){if(i&1&&(Et(dge,5),Et(hge,5),Et(uge,5)),i&2){let o;_t(o=bt())&&(r.monthView=o.first),_t(o=bt())&&(r.yearView=o.first),_t(o=bt())&&(r.multiYearView=o.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[Zi([Elt]),or],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(i,r){if(i&1&&(nn(0,mlt,0,0,"ng-template",0),m(1,"div",1),Q(2,glt,1,11,"mat-month-view",2)(3,ylt,1,6,"mat-year-view",3)(4,vlt,1,6,"mat-multi-year-view",3),g()),i&2){let o;oe("cdkPortalOutlet",r._calendarHeaderPortal),_(2),J((o=r.currentView)==="month"?2:o==="year"?3:o==="multi-year"?4:-1)}},dependencies:[_j,rz,dge,hge,uge],styles:[`.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mat-button-text-label-text-color: var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})(),Ilt=new $e("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let n=N(tn);return()=>wa(n)}});function Flt(n){let t=N(tn);return()=>wa(t)}var Plt={provide:Ilt,deps:[],useFactory:Flt},Llt=(()=>{class n{_elementRef=N(Kt);_animationsDisabled=Ys();_changeDetectorRef=N(vi);_globalModel=N(UD);_dateAdapter=N(Pl);_ngZone=N(Pt);_rangeSelectionStrategy=N(pge,{optional:!0});_stateChanges;_model;_eventCleanups;_animationFallback;_calendar;color;datepicker;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;_isAbove;_animationDone=new Xe;_isAnimating=!1;_closeButtonText;_closeButtonFocused;_actionsPortal=null;_dialogLabelId;constructor(){if(N(qo).load(lh),this._closeButtonText=N(n_).closeCalendarLabel,!this._animationsDisabled){let e=this._elementRef.nativeElement,i=N(dr);this._eventCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(e,"animationstart",this._handleAnimationEvent),i.listen(e,"animationend",this._handleAnimationEvent),i.listen(e,"animationcancel",this._handleAnimationEvent)])}}ngAfterViewInit(){this._stateChanges=this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()}),this._calendar.focusActiveCell()}ngOnDestroy(){clearTimeout(this._animationFallback),this._eventCleanups?.forEach(e=>e()),this._stateChanges?.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){let i=this._model.selection,r=e.value,o=i instanceof $c;if(o&&this._rangeSelectionStrategy){let s=this._rangeSelectionStrategy.selectionFinished(r,i,e.event);this._model.updateSelection(s,this)}else r&&(o||!this._dateAdapter.sameDate(r,i))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._elementRef.nativeElement.classList.add("mat-datepicker-content-exit"),this._animationsDisabled?this._animationDone.next():(clearTimeout(this._animationFallback),this._animationFallback=setTimeout(()=>{this._isAnimating||this._animationDone.next()},200))}_handleAnimationEvent=e=>{let i=this._elementRef.nativeElement;e.target!==i||!e.animationName.startsWith("_mat-datepicker-content")||(clearTimeout(this._animationFallback),this._isAnimating=e.type==="animationstart",i.classList.toggle("mat-datepicker-content-animating",this._isAnimating),this._isAnimating||this._animationDone.next())};_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,i){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,i&&this._changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-datepicker-content"]],viewQuery:function(i,r){if(i&1&&Et(jz,5),i&2){let o;_t(o=bt())&&(r._calendar=o.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:6,hostBindings:function(i,r){i&2&&(sl(r.color?"mat-"+r.color:""),Ue("mat-datepicker-content-touch",r.datepicker.touchUi)("mat-datepicker-content-animations-enabled",!r._animationsDisabled))},inputs:{color:"color"},exportAs:["matDatepickerContent"],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","matButton","elevated",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(i,r){i&1&&(m(0,"div",0)(1,"mat-calendar",1),X("yearSelected",function(s){return r.datepicker._selectYear(s)})("monthSelected",function(s){return r.datepicker._selectMonth(s)})("viewChanged",function(s){return r.datepicker._viewChanged(s)})("_userSelection",function(s){return r._handleUserSelection(s)})("_userDragDrop",function(s){return r._handleUserDragDrop(s)}),g(),nn(2,_lt,0,0,"ng-template",2),m(3,"button",3),X("focus",function(){return r._closeButtonFocused=!0})("blur",function(){return r._closeButtonFocused=!1})("click",function(){return r.datepicker.close()}),w(4),g()()),i&2&&(Ue("mat-datepicker-content-container-with-custom-header",r.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",r._actionsPortal),Tn("aria-modal",!0)("aria-labelledby",r._dialogLabelId??void 0),_(),sl(r.datepicker.panelClass),oe("id",r.datepicker.id)("startAt",r.datepicker.startAt)("startView",r.datepicker.startView)("minDate",r.datepicker._getMinDate())("maxDate",r.datepicker._getMaxDate())("dateFilter",r.datepicker._getDateFilter())("headerComponent",r.datepicker.calendarHeaderComponent)("selected",r._getSelected())("dateClass",r.datepicker.dateClass)("comparisonStart",r.comparisonStart)("comparisonEnd",r.comparisonEnd)("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName),_(),oe("cdkPortalOutlet",r._actionsPortal),_(),Ue("cdk-visually-hidden",!r._closeButtonFocused),oe("color",r.color||"primary"),_(),Ee(r._closeButtonText))},dependencies:[lz,jz,_j,Iz],styles:[`@keyframes _mat-datepicker-content-dropdown-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-dialog-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-exit{from{opacity:1}to{opacity:0}}.mat-datepicker-content{display:block;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dropdown-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.mat-datepicker-content-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dialog-enter 150ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}.mat-datepicker-content-exit.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-exit 100ms linear}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}
`],encapsulation:2,changeDetection:0})}return n})();var Rlt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["","matDatepickerToggleIcon",""]]})}return n})(),Olt=(()=>{class n{_intl=N(n_);_changeDetectorRef=N(vi);_stateChanges=qn.EMPTY;datepicker;tabIndex;ariaLabel;get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}_disabled;disableRipple;_customIcon;_button;constructor(){let e=N(new gc("tabindex"),{optional:!0}),i=Number(e);this.tabIndex=i||i===0?i:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){let e=this.datepicker?this.datepicker.stateChanges:Wt(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Wt(),r=this.datepicker?Aa(this.datepicker.openedStream,this.datepicker.closedStream):Wt();this._stateChanges.unsubscribe(),this._stateChanges=Aa(this._intl.changes,e,i,r).subscribe(()=>this._changeDetectorRef.markForCheck())}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-datepicker-toggle"]],contentQueries:function(i,r,o){if(i&1&&Vs(o,Rlt,5),i&2){let s;_t(s=bt())&&(r._customIcon=s.first)}},viewQuery:function(i,r){if(i&1&&Et(blt,5),i&2){let o;_t(o=bt())&&(r._button=o.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(i,r){i&1&&X("click",function(s){return r._open(s)}),i&2&&(Tn("tabindex",null)("data-mat-calendar",r.datepicker?r.datepicker.id:null),Ue("mat-datepicker-toggle-active",r.datepicker&&r.datepicker.opened)("mat-accent",r.datepicker&&r.datepicker.color==="accent")("mat-warn",r.datepicker&&r.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",Fn],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[or],ngContentSelectors:Slt,decls:4,vars:7,consts:[["button",""],["matIconButton","","type","button",3,"tabIndex","disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(i,r){i&1&&(Hr(wlt),m(0,"button",1,0),Q(2,Clt,2,0,":svg:svg",2),Pi(3),g()),i&2&&(oe("tabIndex",r.disabled?-1:r.tabIndex)("disabled",r.disabled)("disableRipple",r.disableRipple),Tn("aria-haspopup",r.datepicker?"dialog":null)("aria-label",r.ariaLabel||r._intl.openCalendarLabel)("aria-expanded",r.datepicker?r.datepicker.opened:null),_(2),J(r._customIcon?-1:2))},dependencies:[T0],styles:[`.mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle button{color:inherit}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}
`],encapsulation:2,changeDetection:0})}return n})();var vge=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[n_,Plt],imports:[Jv,Mn,lC,C8,Gi,Llt,Olt,yge,Yl]})}return n})();var Nlt=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/,Blt=/^(\d?\d)[:.](\d?\d)(?:[:.](\d?\d))?\s*(AM|PM)?$/i;function Hz(n,t){let e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}var Vlt=(()=>{class n extends Pl{useUtcForDisplay=!1;_matDateLocale=N(Pz,{optional:!0});constructor(){super();let e=N(Pz,{optional:!0});e!==void 0&&(this._matDateLocale=e),super.setLocale(this._matDateLocale)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){let i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Hz(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){let e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Hz(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){let i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Hz(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){let i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let e=new Intl.Locale(this.locale),i=(e.getWeekInfo?.()||e.weekInfo)?.firstDay??0;return i===7?0:i}return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let o=this._createDateWithOverflow(e,i,r);return o.getMonth()!=i,o}today(){return new Date}parse(e,i){return typeof e=="number"?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");let r=new Intl.DateTimeFormat(this.locale,Ge(le({},i),{timeZone:"utc"}));return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,i*12)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if(typeof e=="string"){if(!e)return null;if(Nlt.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}setTime(e,i,r,o){let s=this.clone(e);return s.setHours(i,r,o,0),s}getHours(e){return e.getHours()}getMinutes(e){return e.getMinutes()}getSeconds(e){return e.getSeconds()}parseTime(e,i){if(typeof e!="string")return e instanceof Date?new Date(e.getTime()):null;let r=e.trim();if(r.length===0)return null;let o=this._parseTimeString(r);if(o===null){let s=r.replace(/[^0-9:(AM|PM)]/gi,"").trim();s.length>0&&(o=this._parseTimeString(s))}return o||this.invalid()}addSeconds(e,i){return new Date(e.getTime()+i*1e3)}_createDateWithOverflow(e,i,r){let o=new Date;return o.setFullYear(e,i,r),o.setHours(0,0,0,0),o}_2digit(e){return("00"+e).slice(-2)}_format(e,i){let r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}_parseTimeString(e){let i=e.toUpperCase().match(Blt);if(i){let r=parseInt(i[1]),o=parseInt(i[2]),s=i[3]==null?void 0:parseInt(i[3]),a=i[4];if(r===12?r=a==="AM"?0:r:a==="PM"&&(r+=12),Wz(r,0,23)&&Wz(o,0,59)&&(s==null||Wz(s,0,59)))return this.setTime(this.today(),r,o,s||0)}return null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function Wz(n,t,e){return!isNaN(n)&&n>=t&&n<=e}var Ult={parse:{dateInput:null,timeInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},timeInput:{hour:"numeric",minute:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"},timeOptionLabel:{hour:"numeric",minute:"numeric"}}};var _ge=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[jlt()]})}return n})();function jlt(n=Ult){return[{provide:Pl,useClass:Vlt},{provide:sg,useValue:n}]}var Hlt=["determinateSpinner"];function Wlt(n,t){if(n&1&&(lt(),m(0,"svg",11),ee(1,"circle",12),g()),n&2){let e=E();Tn("viewBox",e._viewBox()),_(),In("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Tn("r",e._circleRadius())}}var zlt=new $e("mat-progress-spinner-default-options",{providedIn:"root",factory:qlt});function qlt(){return{diameter:bge}}var bge=100,$lt=10,wge=(()=>{class n{_elementRef=N(Kt);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=N(zlt),i=fz(),r=this._elementRef.nativeElement;this._noopAnimations=i==="di-disabled"&&!!e&&!e._forceAnimations,this.mode=r.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&i==="reduced-motion"&&r.classList.add("mat-progress-spinner-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=bge;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-$lt)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,r){if(i&1&&Et(Hlt,5),i&2){let o;_t(o=bt())&&(r._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,r){i&2&&(Tn("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),sl("mat-"+r.color),In("width",r.diameter,"px")("height",r.diameter,"px")("--mat-progress-spinner-size",r.diameter+"px")("--mat-progress-spinner-active-indicator-width",r.diameter+"px"),Ue("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",xs],diameter:[2,"diameter","diameter",xs],strokeWidth:[2,"strokeWidth","strokeWidth",xs]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,r){if(i&1&&(nn(0,Wlt,2,8,"ng-template",null,0,vr),m(2,"div",2,1),lt(),m(4,"svg",3),ee(5,"circle",4),g()(),dn(),m(6,"div",5)(7,"div",6)(8,"div",7),Yf(9,8),g(),m(10,"div",9),Yf(11,8),g(),m(12,"div",10),Yf(13,8),g()()()),i&2){let o=oa(1);_(4),Tn("viewBox",r._viewBox()),_(),In("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),Tn("r",r._circleRadius()),_(4),oe("ngTemplateOutlet",o),_(2),oe("ngTemplateOutlet",o),_(2),oe("ngTemplateOutlet",o)}},dependencies:[vb],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return n})();var Sge=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[Gi]})}return n})();var jD;function Xlt(){if(jD===void 0&&(jD=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(jD=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return jD}function yC(n){return Xlt()?.createHTML(n)||n}function Cge(n){return Error(`Unable to find icon with the name "${n}"`)}function Ylt(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function xge(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function kge(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var _f=class{url;svgText;options;svgElement;constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}},Tge=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,i,r,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,o){return this._addSvgIconConfig(e,i,new _f(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,o){let s=this._sanitizer.sanitize(Ss.HTML,r);if(!s)throw kge(r);let a=yC(s);return this._addSvgIconConfig(e,i,new _f("",a,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new _f(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){let o=this._sanitizer.sanitize(Ss.HTML,i);if(!o)throw kge(i);let s=yC(o);return this._addSvgIconSetConfig(e,new _f("",s,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize(Ss.RESOURCE_URL,e);if(!i)throw xge(e);let r=this._cachedIconsByUrl.get(i);return r?Wt(HD(r)):this._loadSvgIconFromConfig(new _f(e,null)).pipe(Jr(o=>this._cachedIconsByUrl.set(i,o)),Yt(o=>HD(o)))}getNamedSvgIcon(e,i=""){let r=Mge(i,e),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(e,s):Af(Cge(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Wt(HD(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Yt(i=>HD(i)))}_getSvgFromIconSetConfigs(e,i){let r=this._extractIconWithNameFromAnySet(e,i);if(r)return Wt(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Yc(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(Ss.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Wt(null)})));return y_(o).pipe(Yt(()=>{let s=this._extractIconWithNameFromAnySet(e,i);if(!s)throw Cge(e);return s}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Jr(i=>e.svgText=i),Yt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Wt(null):this._fetchIcon(e).pipe(Jr(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){let o=e.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(yC("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let i=this._svgElementFromString(yC("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&i.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw Ylt();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize(Ss.RESOURCE_URL,i);if(!s)throw xge(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Yt(c=>yC(c)),gh(()=>this._inProgressUrlFetches.delete(s)),__());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(Mge(e,i),r),this}_addSvgIconSetConfig(e,i){let r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,e);if(o)return Zlt(o)?new _f(o.url,null,o.options):new _f(o,null)}}static \u0275fac=function(i){return new(i||n)(Ye(ep,8),Ye(Ab),Ye(gn,8),Ye(ws))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HD(n){return n.cloneNode(!0)}function Mge(n,t){return n+":"+t}function Zlt(n){return!!(n.url&&n.options)}var Qlt=["*"],Jlt=new $e("MAT_ICON_DEFAULT_OPTIONS"),ect=new $e("mat-icon-location",{providedIn:"root",factory:tct});function tct(){let n=N(gn),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var Ege=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],nct=Ege.map(n=>`[${n}]`).join(", "),ict=/^url\(['"]?#(.*?)['"]?\)$/,Age=(()=>{class n{_elementRef=N(Kt);_iconRegistry=N(Tge);_location=N(ect);_errorHandler=N(ws);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=qn.EMPTY;constructor(){let e=N(new gc("aria-hidden"),{optional:!0}),i=N(Jlt,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=e.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(nct),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)Ege.forEach(s=>{let a=i[o],l=a.getAttribute(s),c=l?l.match(ict):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(bs(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=nt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Tn("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),sl(r.color?"mat-"+r.color:""),Ue("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Fn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:Qlt,decls:1,vars:0,template:function(i,r){i&1&&(Hr(),Pi(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),Dge=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({imports:[Gi,Gi]})}return n})();var bf=_i(Ki());var oct=["paymentJson"],sct=["txResultJson"],act=["resultField"];function lct(n,t){if(n&1&&(m(0,"div",11)(1,"div",18),ee(2,"ng-icon",19)(3,"div",20),g()()),n&2){let e=E();_(3),oe("innerHTML",e.txUiService.safeInfo,pn)}}function cct(n,t){if(n&1&&(m(0,"div",12),ee(1,"ng-icon",21)(2,"div",22),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function dct(n,t){if(n&1&&(m(0,"div",13),ee(1,"lucide-icon",23),m(2,"div",24),w(3),g()()),n&2){let e=E();_(3),Ee(e.successMessage)}}function uct(n,t){if(n&1&&(m(0,"div",14),ee(1,"ng-icon",25),m(2,"div",26),w(3),g()()),n&2){let e=E();_(3),Ee(e.result)}}function hct(n,t){if(n&1){let e=ge();m(0,"mat-icon",56),X("click",function(){U(e);let r=E(2);return j(r.clearFilter())}),w(1,"close"),g()}}function fct(n,t){if(n&1){let e=ge();m(0,"div",57)(1,"div",58),ct(2,"date"),w(3),ct(4,"date"),g(),m(5,"div",45)(6,"a",59),w(7),g(),m(8,"button",60),X("click",function(){let r=U(e).$implicit,o=E(2);return j(o.copyToClipboard(r.hash))}),ee(9,"lucide-icon",61),g()(),m(10,"div",46),w(11),g(),m(12,"div",47)(13,"strong"),w(14),ct(15,"number"),g(),m(16,"span",62),w(17),g()(),m(18,"div",48),w(19),ct(20,"number"),g(),m(21,"div",63),w(22),g()()}if(n&2){let e=t.$implicit,i=E(2);_(),oe("matTooltip",S3(lu(2,20,e.date,"medium"))),_(2),Ee(lu(4,23,e.date,"MMM d, y HH:mm")),_(3),oe("href",i.txUiService.explorerUrl()+"tx/"+e.hash,La),_(),ei(" ",e.hash.slice(0,6),"...",e.hash.slice(-6)," "),_(3),In("color",i.getTypeColor(e.type)),_(),Ee(e.type),_(),Ue("positive",e.change>0)("negative",e.change<0),_(2),ei(" ",e.change>0?"+":"","",lu(15,26,e.change,"1.2-8")," "),_(3),Ee(e.currency),_(2),je("-",lu(20,29,e.fees,"1.6-6")," XRP"),_(2),oe("matTooltip",S3(e.counterparty)),_(),Ee(e.counterparty)}}function pct(n,t){n&1&&(m(0,"div",53),ee(1,"mat-spinner",64),m(2,"span"),w(3,"Loading more transactions..."),g()())}function mct(n,t){n&1&&(m(0,"div",54)(1,"p"),w(2,"No balance changes found for this account."),g()())}function gct(n,t){n&1&&(m(0,"div",55)(1,"p"),w(2,"You've reached the end of transaction history."),g()())}function yct(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"div",27)(2,"div",28)(3,"div",29)(4,"label"),w(5,"Search date, hash, type, amount, fees..."),g(),m(6,"div",30)(7,"mat-icon",31),w(8,"search"),g(),m(9,"input",32),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.filterValue,r)||(o.filterValue=r),j(r)}),X("input",function(r){U(e);let o=E();return j(o.onSearchInput(r.target.value))}),g(),Q(10,hct,2,0,"mat-icon",33),g()(),m(11,"div",34)(12,"div",35)(13,"div",36)(14,"label"),w(15,"Start Date"),g(),m(16,"input",37),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.dateRange.start,r)||(o.dateRange.start=r),j(r)}),X("change",function(){U(e);let r=E();return j(r.applyDateFilter())}),g()(),m(17,"div",36)(18,"label"),w(19,"End Date"),g(),m(20,"input",37),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.dateRange.end,r)||(o.dateRange.end=r),j(r)}),X("change",function(){U(e);let r=E();return j(r.applyDateFilter())}),g()(),m(21,"button",38),X("click",function(){U(e);let r=E();return j(r.clearDateFilter())}),ee(22,"lucide-icon",39),g()()()(),m(23,"div",28)(24,"div",29)(25,"div",40)(26,"button",41),X("click",function(){U(e);let r=E();return j(r.loadBalanceChanges(!0))}),w(27),g(),m(28,"button",42),X("click",function(){U(e);let r=E();return j(r.clearFields())}),w(29,"Clear Fields"),g()()()()(),m(30,"div",43)(31,"div",44),w(32,"Date"),g(),m(33,"div",45),w(34,"Transaction"),g(),m(35,"div",46),w(36,"Type"),g(),m(37,"div",47),w(38,"Change"),g(),m(39,"div",48),w(40,"Fee"),g(),m(41,"div",49),w(42,"Counterparty"),g()(),m(43,"div",50)(44,"cdk-virtual-scroll-viewport",51),X("scroll",function(r){U(e);let o=E();return j(o.onScroll(r))}),nn(45,fct,23,32,"div",52),Q(46,pct,4,0,"div",53),Q(47,mct,3,0,"div",54),Q(48,gct,3,0,"div",55),g()()()}if(n&2){let e=E();_(9),Oe("ngModel",e.filterValue),_(),J(e.filterValue?10:-1),_(6),Oe("ngModel",e.dateRange.start),_(4),Oe("ngModel",e.dateRange.end),_(6),oe("disabled",e.loadingInitial),_(),Ee(e.loadingInitial?"Loading...":"Refresh Balance Changes"),_(18),oe("cdkVirtualForOf",e.balanceChanges)("cdkVirtualForTrackBy",e.trackByHash),_(),J(e.loadingMore?46:-1),_(),J(!e.loadingInitial&&e.balanceChanges.length===0?47:-1),_(),J(!e.hasMoreData&&e.balanceChanges.length>0&&!e.loadingMore?48:-1)}}function vct(n,t){n&1&&(m(0,"div",17),ee(1,"lucide-icon",65),m(2,"p"),w(3,"Select an account from the left panel to view balance changes."),g()())}var WD=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);xrplTransactions=N(Yu);walletGenerator=N(h0);router=N(fs);cdr=N(vi);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("balance");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);accountInfo=P(null);destroy$=new Xe;paymentJson;txResultJson;viewport;resultField;sort;injector=N(tn);paginator;displayedColumns=["date","hash","type","change","currency","fees","balanceBefore","balanceAfter","counterparty"];balanceChanges=[];trackByHash=(t,e)=>e.hash;loadingMore=!1;hasMoreData=!0;marker=void 0;currentBalance=0;currencyBalances=new Map;lastResult="";result="";isMessageKey=!1;url="";filterValue="";isExpanded=!1;selectedWalletIndex=0;accountLinesCache=new Map;accountLinesCacheTime=new Map;CACHE_EXPIRY=3e4;scrollDebounce=null;hasInitialized=!1;loadingInitial=!1;ownerCount="";xrpReserves="";totalXrpReserves="";showSecret=!1;successMessage="";encryptionType="";showToast=!1;toastMessage="";editingIndex;tempName="";warningMessage=null;dateRange={start:null,end:null};searchSubject=new Xe;PAGE_SIZE=50;seenHashes=new Set;originalBalanceChanges=[];onSearchInput(t){this.searchSubject.next(t)}selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.searchSubject.pipe(V0(300),Zc(),fn(this.destroy$)).subscribe(t=>{this.filterValue=t,this.applyFilter(t)}),console.log("paginator:",this.paginator,"pageIndex:",this.paginator?.pageIndex,"pageSize:",this.paginator?.pageSize,"length:",this.paginator?.length)}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""),this.txUiService.setInfoMessage(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),yield this.onAccountChange())}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByWalletAddress(t,e){return e.address}onWalletSelected(t){this.selectWallet(t)}ngAfterViewInit(){this.hasInitialized||(this.hasInitialized=!0,this.paginator&&console.log("Warning: paginator present but not used for infinite scroll."))}ngOnDestroy(){this.scrollDebounce&&clearTimeout(this.scrollDebounce),this.destroy$.next(),this.destroy$.complete()}trackByAddress(t,e){return e.address}toggleExpanded(){this.isExpanded=!this.isExpanded}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.txUiService.clearAllOptionsAndMessages(),yield this.onAccountChange()})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}onAccountChange(){return z(this,null,function*(){this.router.url.includes("account-balance-changes")&&this.loadBalanceChanges(!0)})}loadBalanceChanges(t=!0){return z(this,null,function*(){yield this.withPerf("loadBalanceChanges",()=>z(this,null,function*(){if(this.txUiService.clearMessages(),t&&this.loadingInitial){console.log("loadBalanceChanges skipped (initial load in progress)");return}if(!t&&this.loadingMore){console.log("loadBalanceChanges skipped (pagination load in progress)");return}t?this.loadingInitial=!0:this.loadingMore=!0,this.txUiService.spinner.set(!0),this.txUiService.spinnerMessage="Loading balance changes...";let e=Date.now(),i=400;t&&(this.balanceChanges=[],this.originalBalanceChanges=[],this.marker=void 0,this.hasMoreData=!0,this.seenHashes.clear()),console.log("Entering loadBalanceChanges",t?"(reset)":"(load more)");let r=Date.now();try{let[o,s]=yield Promise.all([this.getClient(),this.getWallet()]);if(t){let[u,h]=yield Promise.all([this.xrplService.getAccountInfo(o,s.classicAddress,"validated",""),this.getCachedAccountLines(o,s.classicAddress)]);this.currentBalance=bf.dropsToXrp(u.result.account_data.Balance),this.currencyBalances.set("XRP",this.currentBalance);for(let v of h.result.lines){let b=`${v.currency}+${v.account}`;this.currencyBalances.set(b,Number.parseFloat(v.balance))}let{ownerCount:f,totalXrpReserves:p}=yield this.utilsService.updateOwnerCountAndReserves(o,u,s.classicAddress);this.ownerCount=f.toString(),this.totalXrpReserves=p;let y=(yield o.getXrpBalance(s.classicAddress))-Number.parseFloat(p||"0");this.currentWallet().balance=y.toString()}if(!this.hasMoreData){console.log("No more data to load.");return}let a=yield this.xrplService.getAccountTransactions(o,s.classicAddress,this.PAGE_SIZE,this.marker),l=a?.result?.transactions??[];if(!Array.isArray(l)||l.length===0){this.hasMoreData=!1,console.log("No transactions returned for marker; stopping further loads.");return}console.log(`Fetched ${l.length} transactions from XRPL (marker: ${this.marker})`);let c=this.processTransactionsForBalanceChanges(l,s.classicAddress),d=[];for(let u of c)!u||!u.hash||this.seenHashes.has(u.hash)||(this.seenHashes.add(u.hash),d.push(u));d.length>0&&(this.balanceChanges.push(...d),this.originalBalanceChanges=[...this.balanceChanges],this.balanceChanges=[...this.balanceChanges],t&&this.viewport&&setTimeout(()=>this.viewport.scrollToIndex(0),0)),this.marker=a.result.marker,this.marker||(this.hasMoreData=!1,console.log("XRPL returned no marker -> reached end of ledger history for this query."))}catch(o){console.error("Error loading tx:",o),this.txUiService.setError("Failed to load balance changes")}finally{let o=Date.now()-e,s=Math.max(0,i-o);console.log(`Spinner shown for ${o}ms, waiting ${s}ms more`),setTimeout(()=>{this.txUiService.spinner.set(!1),t?this.loadingInitial=!1:this.loadingMore=!1,this.cdr.detectChanges()},s)}this.updateInfoMessage()}))})}getCachedAccountLines(t,e){return z(this,null,function*(){let i=`${e}-${this.xrplService.getNet().environment}`,r=Date.now(),o=this.accountLinesCache.get(i),s=this.accountLinesCacheTime.get(i);if(o&&s&&r-s<this.CACHE_EXPIRY)return o;let a=yield t.request({command:"account_lines",account:e});return this.accountLinesCache.set(i,a),this.accountLinesCacheTime.set(i,r),a})}processTransactionsForBalanceChanges(t,e){console.log("Entering processTransactionsForBalanceChanges");let i=[];for(let r of t){let o=r.tx_json||r.transaction,s=bf.dropsToXrp(o.Fee).toString(),a=r.meta,l=o.Fee;if(typeof a!="object"||!a.AffectedNodes)continue;let c=o.TransactionType,d=o.Destination||o.Account||"N/A";o.TransactionType==="Payment"?o.Destination===e?c="Payment Received":o.Account===e&&(c="Payment Sent"):o.TransactionType==="PermissionedDomainSet"?c="PDomainSet":o.TransactionType==="PermissionedDomainDelete"&&(c="PDomainDelete");let u=[],h=new Date((o.date+946684800)*1e3),f=r.hash;for(let p of a.AffectedNodes){let y=p.ModifiedNode||p.CreatedNode||p.DeletedNode;if(y){if(y.LedgerEntryType==="AccountRoot"&&y.FinalFields?.Account===e){let v=y.PreviousFields?.Balance??y.FinalFields.Balance,b=y.FinalFields.Balance,S=bf.dropsToXrp(v),x=bf.dropsToXrp(b),k=this.utilsService.roundToEightDecimals(x-S),L="N/A",D=a.AffectedNodes.find(O=>(O.CreatedNode||O.ModifiedNode||O.DeletedNode)?.LedgerEntryType==="AMM"),V="";if(D){let O=D.CreatedNode?.NewFields||D.ModifiedNode?.FinalFields;if(O&&O.Asset&&O.Asset2){let R=O.Asset.currency==="XRP"?"XRP":this.utilsService.formatCurrencyForDisplay(O.Asset.currency),G=O.Asset2.currency==="XRP"?"XRP":this.utilsService.formatCurrencyForDisplay(O.Asset2.currency);V=`AMM Pool (${R}/${G})`}else V="AMM Pool"}switch(o.TransactionType){case"Payment":o.Account===e&&o.Destination?L=o.Destination:o.Destination===e&&o.Account&&(L=o.Account);break;case"OfferCreate":case"OfferCancel":L="XRPL DEX";break;case"AMMCreate":L=V||"AMM Pool (Create)";break;case"AMMDeposit":L=V||"AMM Pool (Deposit)";break;case"AMMWithdraw":L=V||"AMM Pool (Withdraw)";break;case"AMMVote":L=V||"AMM Pool (Vote)";break;case"AMMDelete":L=V||"AMM Pool (Delete)";break;case"AMMTrade":L=V||"AMM Pool (Trade)";break;case"NFTokenMint":L="NFT Mint";break;case"NFTokenBurn":L="NFT Burn";break;case"NFTokenAcceptOffer":case"NFTokenCancelOffer":case"NFTokenCreateOffer":L="NFT Offer";break;case"SignerListSet":L="Signer List";break;case"SetRegularKey":L="Regular Key";break;case"AccountSet":L="Account Set";break;case"DepositPreauth":L="Deposit Auth";break;case"SetHook":L="Hook";break;case"DIDSet":L="DID Update";break;case"TicketCreate":L="Ticket";break;default:L=o.Destination||o.Account||"XRPL Ledger";break}L&&L!=="N/A"&&L.length>12&&!L.includes("(")&&(L=`${L.substring(0,6)}...${L.substring(L.length-6)}`),u.push({fees:bf.dropsToXrp(l),change:k,currency:"XRP",balanceBefore:this.utilsService.roundToEightDecimals(S),balanceAfter:this.utilsService.roundToEightDecimals(x)}),d=L}else if(y.LedgerEntryType==="RippleState"){let v=0,b="",S=0,x=0;if(d=y.FinalFields?.HighLimit?.issuer||y.FinalFields?.LowLimit?.issuer||d,d=`${d.substring(0,6)}...${d.substring(d.length-6)}`,p.DeletedNode){let k=y.FinalFields?.Balance;k&&(v=this.utilsService.roundToEightDecimals(-Number.parseFloat(k.value)),S=this.utilsService.roundToEightDecimals(Number.parseFloat(k.value)),x=0,b=k.currency.length>3?this.utilsService.formatCurrencyForDisplay(k.currency).slice(0,8):k.currency||"")}else if(y.FinalFields?.Balance){let k=y.FinalFields.Balance,L=y.PreviousFields?.Balance||{value:"0"};v=this.utilsService.roundToEightDecimals(Number.parseFloat(k.value)-Number.parseFloat(L.value)),S=this.utilsService.roundToEightDecimals(Number.parseFloat(L.value)),x=this.utilsService.roundToEightDecimals(Number.parseFloat(k.value)),b=k.currency.length>3?this.utilsService.formatCurrencyForDisplay(k.currency).slice(0,8):k.currency||""}else if(y.NewFields?.Balance){let k=y.NewFields.Balance;v=this.utilsService.roundToEightDecimals(Number.parseFloat(k.value)),S=0,x=this.utilsService.roundToEightDecimals(Number.parseFloat(k.value)),b=k.currency.length>3?this.utilsService.formatCurrencyForDisplay(k.currency).slice(0,8):k.currency||""}b&&v!==0&&u.push({fees:bf.dropsToXrp(l),change:v,currency:b,balanceBefore:S,balanceAfter:x})}}}for(let p of u)i.push({date:h,hash:f,type:c,fees:bf.dropsToXrp(l),change:p.change,currency:p.currency,balanceBefore:p.balanceBefore,balanceAfter:p.balanceAfter,counterparty:d,_searchIndex:[c,p.change,p.currency,bf.dropsToXrp(l),p.balanceBefore,p.balanceAfter,d||"",f,this.formatDateForSearch(h)].join(" ").toLowerCase()})}return console.log("Leaving processTransactionsForBalanceChanges"),i}formatDateForSearch(t){let e=new Date(t),i=e.toLocaleString("default",{month:"short"}),r=e.getDate(),o=e.getFullYear();return`${i} ${r}, ${o} ${o} ${r} ${i}`.toLowerCase()}isInDateRange(t){if(!this.dateRange.start&&!this.dateRange.end)return!0;let e=new Date(t);if(e.setHours(0,0,0,0),this.dateRange.start){let i=new Date(this.dateRange.start);if(i.setHours(0,0,0,0),e<i)return!1}if(this.dateRange.end){let i=new Date(this.dateRange.end);if(i.setHours(23,59,59,999),e>i)return!1}return!0}clearFilter(){this.filterValue="",this.applyFilter("")}applyDateFilter(){this.applyFilter(this.filterValue)}clearDateFilter(){this.dateRange={start:null,end:null},this.applyFilter(this.filterValue)}onPageChange(t){let{pageIndex:e,pageSize:i}=t,r=this.balanceChanges.length;(e+1)*i>r&&this.hasMoreData&&!this.loadingMore&&(console.log("Paginator requested more data for page",e),this.loadBalanceChanges(!1))}onScroll(t){if(this.loadingMore||!this.hasMoreData)return;let e=t.target;e.scrollHeight-e.scrollTop<=e.clientHeight+200&&(clearTimeout(this.scrollDebounce),this.scrollDebounce=setTimeout(()=>{this.loadBalanceChanges(!1)},100))}applyFilter(t){let e=(t||"").trim().toLowerCase();this.filterValue=e,!e&&!this.dateRange.start&&!this.dateRange.end?this.balanceChanges=[...this.originalBalanceChanges]:this.balanceChanges=this.originalBalanceChanges.filter(i=>{let r=!e||(i._searchIndex?.includes(e)??!1),o=this.isInDateRange(i.date);return r&&o}),this.viewport?.scrollToIndex(0),this.cdr.detectChanges()}getTypeColor(t){switch(t){case"Payment":case"Payment Sent":case"Payment Received":return"#8BE684";case"PermissionedDomainSet":case"PDomainSet":case"PDomainDelete":case"PermissionedDomainDelete":case"CredentialCreate":case"CredentialAccept":case"DepositPreauth":case"EscrowFinish":case"EscrowCreate":case"EscrowCancel":case"MPTokenIssuanceCreate":case"MPTokenIssuanceSet":case"NFTokenBurn":case"PaymentChannelClaim":case"PaymentChannelCreate":case"AMMDelete":case"CredentialDelete":return"#f0874bff";case"TicketCreate":case"Batch":case"TrustSet":case"MPTokenAuthorize":case"AMMWithdraw":case"AMMCreate":case"AMMDeposit":case"Clawback":return"#79BDD8";case"SignerListSet":case"DIDSet":case"DIDDelete":case"AccountSet":case"AccountDelete":case"SetRegularKey":case"MPTokenIssuanceDestroy":return"#BAD47B";case"NFTokenMint":case"NFTokenModify":case"NFTokenCancelOffer":case"NFTokenCreateOffer":case"NFTokenAcceptOffer":return"#ac7bd4ff";case"CheckCancel":case"CheckCash":case"CheckCreate":return"#9bc5a2ff";case"OfferCreate":case"OfferCancel":return"#9bc5a2ff";default:return"white"}}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}copyToClipboard(t){navigator.clipboard.writeText(t).then(()=>{console.log("Copied:",t),this.txUiService.showToastMessage("Tx Hash copied!")},e=>{this.txUiService.showToastMessage("Clipboard copy failed:",e)})}updateInfoMessage(){if(!this.currentWallet()?.address){this.txUiService.setInfoMessage("No wallet is currently selected.");return}let t=this.currentWallet().name||"Selected wallet";if(this.balanceChanges.length===0){this.txUiService.setInfoMessage(`<code>${t}</code> wallet has no recorded balance changes yet.<br><br>This view shows historical transactions that affected XRP or issued currency balances.`);return}let e=this.balanceChanges.length,i=parseFloat(this.currentWallet().balance||"0").toFixed(6);this.txUiService.setInfoMessage(`<code>${t}</code> wallet:<br><br><strong>${e}</strong> balance change${e===1?"":"s"} loaded.<br><strong>Spendable balance:</strong> ${i} XRP<br><br>This table displays all transactions affecting account balances, including payments, trust lines, AMM activity, DEX offers, and more.`)}clearFields(){this.clearDateFilter(),this.clearFilter(),this.txUiService.clearMessages(),this.clearWarning(),this.cdr.detectChanges()}clearWarning(){this.txUiService.setWarning(null)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-account-changes"]],viewQuery:function(e,i){if(e&1&&(Et(oct,5),Et(sct,5),Et(uv,5),Et(act,5),Et(S1e,5),Et(Fz,5)),e&2){let r;_t(r=bt())&&(i.paymentJson=r.first),_t(r=bt())&&(i.txResultJson=r.first),_t(r=bt())&&(i.viewport=r.first),_t(r=bt())&&(i.resultField=r.first),_t(r=bt())&&(i.sort=r.first),_t(r=bt())&&(i.paginator=r.first)}},features:[Lt],decls:22,vars:5,consts:[[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel","account-changes-form-panel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroChartBar","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"info-panel"],[1,"warning-panel"],[1,"success-message"],[1,"tx-message","error"],[1,"balance-panel"],[1,"panel-body"],[1,"empty-state"],[1,"info-panel-content"],["name","heroInformationCircle","size","20",1,"text-blue-600","info-icon"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],["name","check","size","20"],[1,"success-text"],["name","heroExclamationCircle","size","20",1,"text-red-600"],[1,"tx-text"],[1,"controls-container"],[1,"form-row"],[1,"form-group"],[1,"search-bar"],[1,"search-icon"],["type","text","placeholder","Search transactions...",3,"ngModelChange","input","ngModel"],[1,"clear-icon"],[1,"form-group","date-filter-group"],[1,"date-filter-container"],[1,"date-input-wrapper"],["type","date",1,"date-input",3,"ngModelChange","change","ngModel"],["mat-icon-button","","matTooltip","Clear date filter",1,"clear-date-btn",3,"click"],["name","eraser","size","22"],[1,"button-row-account-changes",2,"padding-left","0px","padding-right","0px"],["type","button",1,"btn-primary-blue",2,"margin-left","0px","margin-right","0px",3,"click","disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click"],[1,"table-header","row"],[1,"col","date"],[1,"col","hash"],[1,"col","type"],[1,"col","change"],[1,"col","fees"],[1,"col","counterparty"],[1,"virtual-table-container"],["itemSize","68",1,"viewport",3,"scroll"],["class","data-row row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"loading-row","row"],[1,"empty-row","row"],[1,"end-row","row"],[1,"clear-icon",3,"click"],[1,"data-row","row"],[1,"col","date",3,"matTooltip"],["target","_blank",1,"tx-link",3,"href"],["mat-icon-button","","matTooltip","Copy hash",1,"copy-btn",3,"click"],["name","copy","size","16"],[1,"currency"],[1,"col","counterparty",2,"padding-left","0.5em",3,"matTooltip"],["diameter","28"],["name","wallet","size","48"]],template:function(e,i){e&1&&(m(0,"div",0),ee(1,"app-navbar"),m(2,"main",1)(3,"div",2)(4,"div",3)(5,"app-wallet-panel",4),X("walletSelected",function(o){return i.onWalletSelected(o)}),g(),m(6,"div",5)(7,"div",6)(8,"div",7),ee(9,"ng-icon",8),g(),m(10,"div")(11,"h2",9),w(12,"Account Balance Changes"),g(),m(13,"p",10),w(14,"View historical account balance changes for the selected account"),g()()(),Q(15,lct,4,1,"div",11),Q(16,cct,3,1,"div",12),Q(17,dct,4,1,"div",13),Q(18,uct,4,1,"div",14),m(19,"div",15),Q(20,yct,49,11,"div",16)(21,vct,4,0,"div",17),g()()()()()()),e&2&&(_(15),J(i.txUiService.infoMessage?15:-1),_(),J(i.txUiService.warningMessage?16:-1),_(),J(i.txUiService.isSuccess&&!i.txUiService.isError?17:-1),_(),J(i.txUiService.isError&&i.result?18:-1),_(2),J(i.selectedWalletIndex!==null?20:21))},dependencies:[ln,Kn,Bn,$n,Wn,si,BD,AD,OD,ND,ch,A1,mj,yj,uv,Sge,wge,Dge,Age,pC,og,Jv,T0,En,xr,ii,vge,_ge,gv,Mn,oi,_b,ld],styles:['.account-changes-form-panel[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;height:100%;padding:20px;box-sizing:border-box}.date-filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:12px}.clear-date-btn[_ngcontent-%COMP%]{align-self:flex-end;height:36px;align-items:center;justify-content:center}.button-row-account-changes[_ngcontent-%COMP%]{display:flex;gap:.75rem}.controls-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:10px}.date-filter-container[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}.date-input.compact[_ngcontent-%COMP%]{height:80px;width:280px}.no-more-row[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#64748b;font-style:italic;background:#f8fafc;border-top:1px solid #e2e8f0}.loading-row[_ngcontent-%COMP%]{text-align:center;padding:10px 0;opacity:.8}.loading-more-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;margin:12px 0;opacity:.95;font-size:.9rem;font-weight:500;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:.9;transform:translateY(0)}}.loading-more-text[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;letter-spacing:.1px}.spinner[_ngcontent-%COMP%]{border:3px solid #f3f3f3;border-top:3px solid #1976d2;border-radius:50%;width:30px;height:30px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.panel-body[_ngcontent-%COMP%], .balance-panel[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;flex:1;min-height:0}.balance-panel[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#ffffffb3;z-index:999;pointer-events:none;opacity:0;transition:opacity .3s ease}.balance-panel[_ngcontent-%COMP%]:has(.spinner-row):before{opacity:1;pointer-events:all}.date-input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.875rem;margin-right:12px}.date-input[_ngcontent-%COMP%]{padding:6px 8px;border-radius:6px;border:1px solid #ccc;font-size:.9rem;width:140px}.date-input[_ngcontent-%COMP%]:focus{border-color:#1976d2;outline:none;box-shadow:0 0 3px #1976d280}.search-bar[_ngcontent-%COMP%]{position:relative;height:36px;box-sizing:border-box;border:1px solid #ccc;border-radius:6px;background:#fff}.search-bar[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{display:block;width:100%;height:33px;padding:0 33px;font-size:14px;border:none;outline:none;background:transparent;box-sizing:border-box;-webkit-appearance:none;appearance:none}.search-bar[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none!important}.search-bar[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%], .search-bar[_ngcontent-%COMP%]   mat-icon.search-icon[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center;pointer-events:none;color:#777;font-size:18px}.search-bar[_ngcontent-%COMP%]   .clear-icon[_ngcontent-%COMP%], .search-bar[_ngcontent-%COMP%]   mat-icon.clear-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;color:#777;font-size:18px}.search-bar[_ngcontent-%COMP%]   .clear-icon[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-50%) scale(1.05)}.search-icon[_ngcontent-%COMP%], .clear-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:36px}.clear-icon[_ngcontent-%COMP%]{margin-left:4px;cursor:pointer;transition:opacity .2s ease,transform .2s ease;opacity:1}.clear-icon[_ngcontent-%COMP%]{transition:opacity .2s ease,transform .2s ease;opacity:1}.virtual-table-container[_ngcontent-%COMP%]{flex:1;min-height:500px;max-height:100%;border-radius:12px;overflow:hidden;display:flex;flex-direction:column;background:#fff}.viewport[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 20px;min-height:45px;border-bottom:1px solid #f3f4f6}.table-header[_ngcontent-%COMP%]{display:flex!important;align-items:center!important;min-height:45px!important;position:sticky;top:0;z-index:100;background:linear-gradient(135deg,#4f8bfc 50%,#002cbb);color:#fff;font-weight:600;text-transform:uppercase;letter-spacing:.8px;font-size:13px;flex-shrink:0;border-radius:8px}.data-row[_ngcontent-%COMP%]{background:#fff;transition:background .2s}.data-row[_ngcontent-%COMP%]:hover{background:#f8fafc}.col[_ngcontent-%COMP%]{flex:1;padding:0 12px;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex;align-items:center}.col.date[_ngcontent-%COMP%]{flex:1.8;color:#374151}.col.hash[_ngcontent-%COMP%]{flex:1.8;display:flex;align-items:center;gap:8px}.col.type[_ngcontent-%COMP%]{flex:1.5;min-width:140px;white-space:normal;word-break:break-word;line-height:1.4;padding:8px 12px;font-weight:600}.col.change[_ngcontent-%COMP%]{flex:1}.col.fees[_ngcontent-%COMP%]{flex:1.1;text-align:right;color:#dc2626;font-weight:600}.col.counterparty[_ngcontent-%COMP%]{flex:1.4;color:#4b5563}.table-header[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;justify-content:normal;color:#fff;font-size:13px}.table-header[_ngcontent-%COMP%]   .col.change[_ngcontent-%COMP%], .table-header[_ngcontent-%COMP%]   .col.fees[_ngcontent-%COMP%]{text-align:right!important}.positive[_ngcontent-%COMP%]{color:#16a34a!important}.negative[_ngcontent-%COMP%]{color:#dc2626!important}.currency[_ngcontent-%COMP%]{margin-left:6px;color:#6b7280;font-size:.9em}.tx-link[_ngcontent-%COMP%]{color:#2563eb;text-decoration:none;font-weight:500}.tx-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#1d4ed8}.copy-btn[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s;color:#6b7280}.data-row[_ngcontent-%COMP%]:hover   .copy-btn[_ngcontent-%COMP%]{opacity:1}.copy-btn[_ngcontent-%COMP%]:hover{color:#2563eb}.loading-row[_ngcontent-%COMP%], .empty-row[_ngcontent-%COMP%], .end-row[_ngcontent-%COMP%]{justify-content:center;padding:40px;color:#6b7280;font-size:15px;background:#f9fafb;border-top:1px solid #e2e8f0}.data-row[_ngcontent-%COMP%], .loading-row[_ngcontent-%COMP%], .empty-row[_ngcontent-%COMP%], .end-row[_ngcontent-%COMP%]{contain:none}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.info-panel[_ngcontent-%COMP%]{background-color:#ebf8ff;border:1px solid #7dd3fc;border-radius:8px;padding:12px 16px;margin:16px 0;box-shadow:0 1px 3px #0000001a}.info-panel-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.info-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.info-text[_ngcontent-%COMP%]{flex:1;font-size:14px;line-height:1.5;color:#0c4a6e}.info-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.info-text[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#cffafe;padding:2px 6px;border-radius:4px;font-family:Courier New,monospace;font-size:13px}.form-panel[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 0 12px #0000001a;padding-left:1.5rem;padding-right:1.5rem;padding-bottom:1.5rem;margin-bottom:5em;min-width:1225px}'],data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]}})};var lg=_i(Ki()),ag=_i(Ki());var _ct=["jsonEditor"],bct=()=>["create","authorize","unauthorize","send","lock","unlock","clawback","destroy"],wct=(n,t)=>t.id;function Sct(n,t){n&1&&(m(0,"div")(1,"div",28)(2,"div",29),ee(3,"ng-icon",30),g(),m(4,"div")(5,"h2",31),w(6,"Create MPT Token"),g(),m(7,"p",32),w(8,"Create MPT Tokens for the selected account."),g()()()())}function Cct(n,t){n&1&&(m(0,"div")(1,"div",28)(2,"div",29),ee(3,"ng-icon",30),g(),m(4,"div")(5,"h2",31),w(6,"Authorize/Unauthorize MPT Token"),g(),m(7,"p",32),w(8,"Authorize/Unauthorize MPT Tokens for the selected account."),g()()()())}function xct(n,t){n&1&&(m(0,"div")(1,"div",28)(2,"div",33),ee(3,"ng-icon",34),g(),m(4,"div")(5,"h2",31),w(6,"Send MPT"),g(),m(7,"p",32),w(8,"Send created MPT to another XRPL address"),g()()()())}function kct(n,t){n&1&&(m(0,"div")(1,"div",28)(2,"div",29),ee(3,"ng-icon",35),g(),m(4,"div")(5,"h2",31),w(6,"Lock/Unlock MPT"),g(),m(7,"p",32),w(8,"Lock/Unlock MPT so another XRPL address can't send it"),g()()()())}function Mct(n,t){n&1&&(m(0,"div")(1,"div",28)(2,"div",36),ee(3,"ng-icon",37),g(),m(4,"div")(5,"h2",31),w(6,"Clawback MPT"),g(),m(7,"p",32),w(8,"Clawback a previously created MPT"),g()()()())}function Tct(n,t){n&1&&(m(0,"div")(1,"div",28)(2,"div",36),ee(3,"ng-icon",37),g(),m(4,"div")(5,"h2",31),w(6,"Destroy MPT"),g(),m(7,"p",32),w(8,"Destroy a previously created MPT"),g()()()())}function Ect(n,t){n&1&&w(0," has no Multi-Purpose Tokens. ")}function Act(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3)),n&2){let e=E();_(2),Ee(e.mptCount),_(),je(" Multi-Purpose Token",e.mptCount===1?"":"s",". ")}}function Dct(n,t){if(n&1&&(m(0,"div",42),ee(1,"span",44),w(2," on XRPL Win"),g()),n&2){let e=E();_(),oe("innerHTML",e.links,pn)}}function Ict(n,t){if(n&1&&(m(0,"span",53),w(1),g()),n&2){let e=E().$implicit;_(),ei(" ",e.amount," ",e.isHolder?"held":"issued"," ")}}function Fct(n,t){if(n&1&&(m(0,"span",53),w(1),g()),n&2){let e=E().$implicit;_(),ei(" ",e.amount," ",e.isHolder?"held":"issued"," ")}}function Pct(n,t){if(n&1&&(m(0,"div"),w(1),g()),n&2){let e=E().$implicit;_(),je("Transfer Fee: ",e.transferFee/1e3,"%")}}function Lct(n,t){if(n&1){let e=ge();m(0,"li",50)(1,"app-tooltip-link",51)(2,"div",52)(3,"strong"),w(4,"MPT"),g(),Q(5,Ict,2,2,"span",53),g(),m(6,"div",54)(7,"div"),w(8,"MPT Issuance ID: "),m(9,"code"),w(10),g()(),Q(11,Fct,2,2,"span",53),Q(12,Pct,2,1,"div"),m(13,"div"),w(14),g()()(),m(15,"button",55),X("click",function(r){let o=U(e).$implicit;return E(4).copyAndToast(o.id,"MPT ID"),j(r.stopPropagation())}),lt(),m(16,"svg",56),ee(17,"rect",57)(18,"path",58),g()()()}if(n&2){let e=t.$implicit,i=E(4);_(),oe("href",i.txUiService.explorerUrl()+"entry/"+e.id),_(4),J(e.amount?5:-1),_(5),ei("",e.mpt_issuance_id.slice(0,12),"...",e.mpt_issuance_id.slice(-10)),_(),J(e.amount&&e.amount!=="0"?11:-1),_(),J(e.transferFee?12:-1),_(2),je("Flags: ",e.flags.length?e.flags:"None")}}function Rct(n,t){if(n&1&&(m(0,"ul",49),yn(1,Lct,19,7,"li",50,wct),g()),n&2){let e=E(2);_(),vn(e.mptsToShow)}}function Oct(n,t){if(n&1){let e=ge();m(0,"div",45),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",46)(2,"span"),w(3),g(),lt(),m(4,"svg",47),ee(5,"path",48),g()(),Q(6,Rct,3,0,"ul",49),g()}if(n&2){let e=E(),i=E();_(3),je("Multi-Purpose Tokens (",e.mptCount,")"),_(),In("transform",i.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(i.infoPanelExpanded()?6:-1)}}function Nct(n,t){if(n&1&&(m(0,"div",15)(1,"div",38)(2,"div",39)(3,"div",40),ee(4,"ng-icon",41),m(5,"code"),w(6),g(),Q(7,Ect,1,0)(8,Act,4,2),Q(9,Dct,3,1,"div",42),g(),Q(10,Oct,7,4,"div",43),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.mptCount===0?7:8),_(2),J(e.links?9:-1),_(),J(e.mptCount>0?10:-1)}}function Bct(n,t){if(n&1&&(m(0,"div",16),ee(1,"ng-icon",59)(2,"div",60),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function Vct(n,t){n&1&&(m(0,"small",74)(1,"strong"),w(2,"Exceeded limit \u2013 transaction will fail"),g()())}function Uct(n,t){if(n&1&&(m(0,"small",75),w(1),g()),n&2){let e=E(2);_(),je(" Approaching limit (",e.metadataByteLength()," bytes) ")}}function jct(n,t){if(n&1){let e=ge();m(0,"div",61)(1,"div",62)(2,"label"),w(3,"Asset Scale"),g(),m(4,"p",63),w(5,"Decimal places for the token (0-15). 2 = 0.01 precision."),g(),m(6,"input",64),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.assetScaleField,r)||(o.assetScaleField=r),j(r)}),g()()(),m(7,"div",61)(8,"div",62)(9,"label"),w(10,"Maximum Tokens"),g(),m(11,"p",63),w(12,"Maximum tokens that can ever be issued."),g(),m(13,"input",65),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.tokenCountField,r)||(o.tokenCountField=r),j(r)}),g()()(),m(14,"div",61)(15,"div",62)(16,"label"),w(17,"Transfer Fee"),g(),m(18,"p",63),w(19,"Fee for secondary sales (0-50,000 = 0%-50%). Only available if Can Transfer is enabled."),g(),m(20,"input",66),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.transferFeeField,r)||(o.transferFeeField=r),j(r)}),g()()(),m(21,"div",61)(22,"div",62)(23,"label",67),w(24," Token Meta Data "),ee(25,"br"),m(26,"span",68),w(27," JSON Metadata "),m(28,"a",69),w(29,"XLS-89"),g()(),m(30,"button",70),X("click",function(){U(e);let r=oa(33);return j(r.format())}),w(31,"Format JSON"),g()(),m(32,"app-json-editor",71,1),Ne("valueChange",function(r){U(e);let o=E();return Ve(o.metaDataField,r)||(o.metaDataField=r),j(r)}),g(),m(34,"div",72)(35,"small",73),w(36),g(),Q(37,Vct,3,0,"small",74)(38,Uct,2,1,"small",75),g()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.assetScaleField),_(7),Oe("ngModel",e.tokenCountField),_(7),Oe("ngModel",e.transferFeeField),_(12),Oe("value",e.metaDataField),_(4),je(" Metadata size: ",e.metadataByteLength()," / 1024 bytes "),_(),J(e.metadataByteLength()>1024?37:e.metadataByteLength()>900?38:-1)}}function Hct(n,t){if(n&1){let e=ge();m(0,"div",61)(1,"div",62)(2,"label"),w(3,"Select MPT to send"),g(),m(4,"p",63),w(5,"MPT this account holds that can be sent to another account."),g(),m(6,"app-select-search-dropdown",76),X("valueChange",function(r){U(e);let o=E();return j(o.onMptSelected(r))}),g()()(),m(7,"div",61)(8,"div",62)(9,"label"),w(10,"MPT Issuance ID"),g(),m(11,"p",63),w(12,"Identifies the MPTokenIssuance."),g(),m(13,"input",77),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.mptIssuanceIdField,r)||(o.mptIssuanceIdField=r),j(r)}),g()()(),m(14,"div",61)(15,"div",62)(16,"label",78),w(17,"Destination"),g(),m(18,"p",63),w(19,"Account that will recieve the MPT."),g(),m(20,"app-select-search-dropdown",79),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()()()}if(n&2){let e=E();_(6),oe("items",e.mptItems())("value",e.selectedMptItem()),_(7),Oe("ngModel",e.mptIssuanceIdField),_(7),oe("items",e.destinationItems())("value",e.selectedDestinationItem())}}function Wct(n,t){if(n&1){let e=ge();m(0,"div",61)(1,"div",62)(2,"label"),w(3,"Select MPT to send"),g(),m(4,"p",63),w(5,"MPT this account holds that can be sent to another account."),g(),m(6,"app-select-search-dropdown",76),X("valueChange",function(r){U(e);let o=E();return j(o.onMptSelected(r))}),g()()(),m(7,"div",62)(8,"label"),w(9,"MPT Issuance ID"),g(),m(10,"p",63),w(11,"Identifies the MPTokenIssuance."),g(),m(12,"input",77),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.mptIssuanceIdField,r)||(o.mptIssuanceIdField=r),j(r)}),g()(),m(13,"div",61)(14,"div",62)(15,"label",78),w(16,"Destination"),g(),m(17,"p",63),w(18,"Account that will recieve the MPT."),g(),m(19,"app-select-search-dropdown",79),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()(),m(20,"div",62)(21,"label"),w(22,"MPT Amount"),g(),m(23,"p",63),w(24,"Amount of MPT to send."),g(),m(25,"input",80),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()()}if(n&2){let e=E();_(6),oe("items",e.mptItems())("value",e.selectedMptItem()),_(6),Oe("ngModel",e.mptIssuanceIdField),_(7),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(6),Oe("ngModel",e.amountField)}}function zct(n,t){if(n&1){let e=ge();m(0,"div",61)(1,"div",62)(2,"label"),w(3,"Select MPT to Clawback"),g(),m(4,"p",63),w(5,"MPT to clawback."),g(),m(6,"app-select-search-dropdown",76),X("valueChange",function(r){U(e);let o=E(2);return j(o.onMptSelected(r))}),g()()(),m(7,"div",61)(8,"div",62)(9,"label"),w(10,"MPT Issuance ID"),g(),m(11,"p",63),w(12,"Identifies the MPTokenIssuance."),g(),m(13,"input",77),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.mptIssuanceIdField,r)||(o.mptIssuanceIdField=r),j(r)}),g()()(),m(14,"div",61)(15,"div",62)(16,"label",78),w(17,"MPT Holder"),g(),m(18,"p",63),w(19,"MPT holder address to clawback tokens from."),g(),m(20,"app-select-search-dropdown",79),X("valueChange",function(r){U(e);let o=E(2);return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()(),m(21,"div",62)(22,"label"),w(23,"Amount to Clawback"),g(),m(24,"p",63),w(25,"MPT amount to clawback form an existing holder."),g(),m(26,"input",80),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),oe("items",e.mptItems())("value",e.selectedMptItem()),_(7),Oe("ngModel",e.mptIssuanceIdField),_(7),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(6),Oe("ngModel",e.amountField)}}function qct(n,t){if(n&1){let e=ge();m(0,"div",62)(1,"label"),w(2,"Select MPT to Destroy"),g(),m(3,"p",63),w(4,"MPT to destroy."),g(),m(5,"app-select-search-dropdown",76),X("valueChange",function(r){U(e);let o=E(2);return j(o.onMptSelected(r))}),g()(),m(6,"div",61)(7,"div",62)(8,"label"),w(9,"MPT Issuance ID"),g(),m(10,"p",63),w(11,"Identifies the MPTokenIssuance."),g(),m(12,"input",77),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.mptIssuanceIdField,r)||(o.mptIssuanceIdField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(5),oe("items",e.mptItems())("value",e.selectedMptItem()),_(7),Oe("ngModel",e.mptIssuanceIdField)}}function $ct(n,t){if(n&1&&(w(0,"` "),Q(1,zct,27,6),Q(2,qct,13,3)),n&2){let e=E();_(),J(e.activeTab()==="clawback"?1:-1),_(),J(e.activeTab()==="destroy"?2:-1)}}function Kct(n,t){if(n&1){let e=ge();m(0,"div",88),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("canLock"))}),m(1,"div",89),ee(2,"input",90),lt(),m(3,"svg",91),ee(4,"path",92),g(),dn(),m(5,"span",93),w(6,"MPTCanLock"),g()(),m(7,"div",94),w(8,"0x00000002 tfMPTCanLock"),g(),m(9,"div",95),w(10,"The MPT can be locked both individually and globally. If not set, the MPT cannot be locked in any way."),g()()}if(n&2){let e=E(2);Ue("enabled",e.flags.canLock),_(2),oe("checked",e.flags.canLock)}}function Gct(n,t){if(n&1){let e=ge();m(0,"div",88),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("isRequireAuth"))}),m(1,"div",96),ee(2,"input",97),lt(),m(3,"svg",91),ee(4,"path",92),g(),dn(),m(5,"span",93),w(6,"MPTRequireAuth"),g()(),m(7,"div",94),w(8,"0x00000004 tfMPTRequireAuth"),g(),m(9,"div",95),w(10,"Individual holders must be authorized. This enables issuers to limit who can hold their assets."),g()()}if(n&2){let e=E(2);Ue("enabled",e.flags.isRequireAuth),_(2),oe("checked",e.flags.isRequireAuth)}}function Xct(n,t){if(n&1){let e=ge();m(0,"div",98),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("canEscrow"))}),m(1,"div",96),ee(2,"input",97),lt(),m(3,"svg",91),ee(4,"path",92),g(),dn(),m(5,"span",93),w(6,"MPTCanEscrow"),g()(),m(7,"div",94),w(8,"0x00000008 tfMPTCanEscrow"),g(),m(9,"div",95),w(10,"Individual holders can place their balances into an escrow."),g()()}if(n&2){let e=E(2);Ue("enabled",e.flags.canEscrow),_(2),oe("checked",e.flags.canEscrow)}}function Yct(n,t){if(n&1){let e=ge();m(0,"div",98),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("canTrade"))}),m(1,"div",96),ee(2,"input",97),lt(),m(3,"svg",91),ee(4,"path",92),g(),dn(),m(5,"span",93),w(6,"MPTCanTrade"),g()(),m(7,"div",94),w(8,"0x00000010 tfMPTCanTrade"),g(),m(9,"div",95),w(10,"Individual holders can trade their balances using the XRP Ledger DEX or AMM."),g()()}if(n&2){let e=E(2);Ue("enabled",e.flags.canTrade),_(2),oe("checked",e.flags.canTrade)}}function Zct(n,t){if(n&1){let e=ge();m(0,"div",98),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("canTransfer"))}),m(1,"div",96),ee(2,"input",97),lt(),m(3,"svg",91),ee(4,"path",92),g(),dn(),m(5,"span",93),w(6,"MPTCanTransfer"),g()(),m(7,"div",94),w(8,"0x00000020 tfMPTCanTransfer"),g(),m(9,"div",95),w(10,"Tokens may be transferred to other accounts that are not the issuer."),g()()}if(n&2){let e=E(2);Ue("enabled",e.flags.canTransfer),_(2),oe("checked",e.flags.canTransfer)}}function Qct(n,t){if(n&1){let e=ge();m(0,"div",98),X("click",function(){U(e);let r=E(2);return j(r.toggleFlag("canClawback"))}),m(1,"div",96),ee(2,"input",97),lt(),m(3,"svg",91),ee(4,"path",92),g(),dn(),m(5,"span",93),w(6,"MPTCanClawback"),g()(),m(7,"div",94),w(8,"0x00000040 tfMPTCanClawback"),g(),m(9,"div",95),w(10,"The issuer may use the Clawback transaction to clawback value from individual holders."),g()()}if(n&2){let e=E(2);Ue("enabled",e.flags.canClawback),_(2),oe("checked",e.flags.canClawback)}}function Jct(n,t){if(n&1&&(m(0,"div",87)(1,"span",99),w(2,"Total Flags Value:"),g(),m(3,"span",100),w(4),g()()),n&2){let e=E(2);_(4),ei("",e.totalFlagsValue()," (",e.totalFlagsHex(),")")}}function edt(n,t){if(n&1&&(m(0,"div",20)(1,"div",81)(2,"div",82),ee(3,"lucide-icon",83),m(4,"span",84),w(5,"MPT Flags"),g()(),Q(6,Kct,11,3,"div",85),Q(7,Gct,11,3,"div",85),Q(8,Xct,11,3,"div",86),Q(9,Yct,11,3,"div",86),Q(10,Zct,11,3,"div",86),Q(11,Qct,11,3,"div",86),Q(12,Jct,5,2,"div",87),g()()),n&2){let e=E();_(6),J(e.activeTab()==="create"?6:-1),_(),J(e.activeTab()==="create"?7:-1),_(),J(e.activeTab()==="create"?8:-1),_(),J(e.activeTab()==="create"?9:-1),_(),J(e.activeTab()==="create"?10:-1),_(),J(e.activeTab()==="create"?11:-1),_(),J(e.activeTab()==="create"?12:-1)}}function tdt(n,t){if(n&1){let e=ge();m(0,"div",22)(1,"app-tooltip-link",102),X("click",function(r){return U(e),j(r.preventDefault())}),m(2,"button",103),w(3),g()()()}if(n&2){let e=E(2);_(),oe("tooltipText",e.getCreateButtonTooltip()),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create MPT")}}function ndt(n,t){if(n&1){let e=ge();m(0,"button",104),ct(1,"async"),X("click",function(){U(e);let r=E(2);return j(r.createMpt())}),w(2),g()}if(n&2){let e=E(2);oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)||!e.metadataIsValid()),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create MPT")}}function idt(n,t){if(n&1&&(Q(0,tdt,4,2,"div",22),ct(1,"async"),Q(2,ndt,3,4,"button",101),ct(3,"async")),n&2){let e=E();J(e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)||!e.metadataIsValid()?0:-1),_(2),J(e.txUiService.spinner()||!mt(3,4,e.walletManagerService.hasWallets$)||e.metadataIsValid()?2:-1)}}function rdt(n,t){if(n&1){let e=ge();m(0,"button",105),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.authorizeMpt("Y"))}),w(2),g(),m(3,"button",105),ct(4,"async"),X("click",function(){U(e);let r=E();return j(r.authorizeMpt("N"))}),w(5),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,4,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Authorize MPT"),_(),oe("disabled",e.txUiService.spinner()||!mt(4,6,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Unauthorize MPT")}}function odt(n,t){if(n&1){let e=ge();m(0,"button",106),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.sendMpt())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Send MPT")}}function sdt(n,t){if(n&1){let e=ge();m(0,"button",105),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.setMptLockUnlock("Y"))}),w(2),g(),m(3,"button",104),ct(4,"async"),X("click",function(){U(e);let r=E();return j(r.setMptLockUnlock("N"))}),w(5),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,4,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Lock MPT"),_(),oe("disabled",e.txUiService.spinner()||!mt(4,6,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Unlock MPT")}}function adt(n,t){if(n&1){let e=ge();m(0,"button",107),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.clawbackMpt())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Clawback MPT")}}function ldt(n,t){if(n&1){let e=ge();m(0,"button",107),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.destroyMpt())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Destroy MPT")}}var zD=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);jsonEditor;typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("create");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");sourceTagField=P("");invoiceIdField=P("");currencyFieldDropDownValue=P("XRP");checkExpirationTime=P("seconds");issuerFields=P("");expirationTimeField=P("");ticketSequence=P("");checkIdField=P("");outstandingChecks=P("");mptIssuanceIdField=P("");isMptEnabled=P(!1);selectedWalletIndex=P(0);isTicketEnabled=P(!1);existingMpts=P([]);existingIOUs=P([]);existingMptsCollapsed=!0;outstandingIOUCollapsed=!0;metaDataField=P("");XLS89_TEMPLATE=P('{"currency":"FLUSD","name":"Florent USD","desc":"A regulated stablecoin issued by Florent.","icon":"https://unsplash.com/photos/a-toy-rocket-is-flying-over-a-pile-of-pink-blocks-zUweo75uccw","asset_class":"rwa","asset_subclass":"stablecoin","acct_name":"Florent","weblinks":[{"url":"https://florent.com/","type":"website","title":"Official Website"},{"url":"https://flo.org/","type":"docs","title":"My Documentation"}]}');monacoOptions={theme:"vs",language:"json",minimap:{enabled:!1},automaticLayout:!0,formatOnPaste:!0,formatOnType:!0,scrollBeyondLastLine:!1};metadataError=P("");tokenCountField=P("");assetScaleField=P(0);isdepositAuthAddress=P(!1);isMptFlagModeEnabled=P(!1);transferFeeField=P(0);totalFlagsValue=P(0);totalFlagsHex=P("0x0");flagValues={canLock:2,isRequireAuth:4,canEscrow:8,canTrade:16,canTransfer:32,canClawback:64};flags={canLock:!1,isRequireAuth:!1,canEscrow:!1,canTrade:!1,canClawback:!1,canTransfer:!1};isAuthorized=P(!1);isUnauthorize=P(!1);lockedUnlock=P("");holderAccount=P("");filterQuery=P("");selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});hasWallets=_e(()=>this.wallets().length>0);infoData=_e(()=>{let t=this.currentWallet();if(!t.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=this.txUiService.explorerUrl(),r=t.address,s=this.existingMpts().length,a=s>0?`<a href="${i}account/${r}/mpts/owned" target="_blank" rel="noopener noreferrer" class="xrpl-win-link">View MPTs</a>`:"",l=this.infoPanelExpanded()?this.existingMpts().map(c=>({mpt_issuance_id:c.mpt_issuance_id||"We have issues",id:c.id||"We have big issues",amount:c.amount,isHolder:c.isHolder,maxAmount:c.MaximumAmount,outstanding:c.OutstandingAmount,transferFee:c.TransferFee,flags:this.decodeMptFlagsForUi(c.Flags||0)})):[];return{walletName:e,mptCount:s,mptsToShow:l,links:a}});mptItems=_e(()=>this.existingMpts().map(e=>{let i=e.LedgerEntryType==="MPToken"?"MPToken":"MPTokenIssuance",r=!1;i==="MPToken"&&(r=!0);let o=r?e.MPTAmount||"0":e.OutstandingAmount||"0",s=o!=="0"?o:"0";return{id:e.mpt_issuance_id?e.mpt_issuance_id:e.id,display:`MPT \u2022 ${s} ${r?"held":"issued"}`,secondary:e.mpt_issuance_id?e.mpt_issuance_id.slice(0,12)+"..."+e.mpt_issuance_id.slice(-10):e.id.slice(0,12)+"..."+e.id.slice(-10),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1}}));selectedMptItem=_e(()=>{let t=this.mptIssuanceIdField();return t&&this.mptItems().find(e=>e.id===t)||null});metadataByteLength=_e(()=>{let t=this.metaDataField().trim();if(!t)return 0;try{return lg.convertStringToHex(t).length/2}catch{return 0}});metadataIsValid=_e(()=>this.metadataByteLength()<=1024);onMptSelected(t){this.mptIssuanceIdField.set(t?.id||"")}constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.metaDataField.set(this.XLS89_TEMPLATE())}ngAfterViewInit(){setTimeout(()=>{this.jsonEditor.format()},0)}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.clearFields(!0),this.selectWallet(i))}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.clearFields(!0),yield this.getMptDetails(!0))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}onMptSelect(t){t&&this.mptIssuanceIdField.set(t.mpt_issuance_id)}toggleExistingMpts(){this.existingMptsCollapsed=!this.existingMptsCollapsed}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.clearFields(!0),this.hasWallets()&&(yield this.getMptDetails(!0))})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getMptDetails(t=!1){return z(this,null,function*(){yield this.withPerf("getMptDetails",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.getExistingMpts(o,i.classicAddress),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getMptDetails:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createMpt(){return z(this,null,function*(){yield this.withPerf("createCheck",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let t=this.metadataByteLength();if(t>1024){this.txUiService.setError(`Token Metadata exceeds maximum size: ${t} bytes (limit: 1024 bytes)`),this.txUiService.spinner.set(!1);return}if(t>0&&!this.metadataIsValid()){this.txUiService.setError("Invalid metadata encoding"),this.txUiService.spinner.set(!1);return}let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:r,accountObjects:o},s,a,l,c]=yield Promise.all([this.xrplCache.getAccountData(i.classicAddress,!1),this.xrplService.getAccountLines(e,i.classicAddress,"validated",""),this.xrplCache.getAccountObjectsWithType(this.currentWallet().address,!0,"check"),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(e)]),d=this.getFlagsValue(this.flags),u={TransactionType:"MPTokenIssuanceCreate",Account:i.classicAddress,MaximumAmount:this.tokenCountField(),Fee:l,Flags:d,LastLedgerSequence:c+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(e,u,i,r,"create");let h=yield this.txExecutor.mptCreate(u,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!h.success)return this.txUiService.setError(`${h.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Create MPT successfully!":"MPT created successfully!",yield this.refreshAfterTx(e,i,null,!1)}catch(t){console.error("Error in createMpt:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}authorizeMpt(t){return z(this,null,function*(){yield this.withPerf("authorizeMpt",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(e,i.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(e),this.xrplService.getLastLedgerIndex(e),this.xrplService.getXrplServerInfo(e,"current","")]),l={TransactionType:"MPTokenAuthorize",Account:i.address,MPTokenIssuanceID:this.mptIssuanceIdField(),LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME,Fee:o};console.log("authorizeFlag",t),t==="N"&&(l.Flags=lg.MPTokenAuthorizeFlags.tfMPTUnauthorize),yield this.setTxOptionalFields(e,l,i,r,"generate");let c=yield this.txExecutor.mptAuthUnauth(l,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);t==="Y"?this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated MPT Authorized successfully!":"MPT Authorized successfully!":this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated MPT Unauthorized successfully!":"MPT Unauthorized successfully!",yield this.refreshAfterTx(e,i,null,!1)}catch(e){console.error("Error in authorizeMpt:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setMptLockUnlock(t){return z(this,null,function*(){yield this.withPerf("setMptLockUnlock",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[r,o,s,a,l]=yield Promise.all([this.xrplService.getAccountInfo(e,i.classicAddress,"validated",""),this.xrplService.getAccountObjects(e,i.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(e),this.xrplService.getLastLedgerIndex(e),this.xrplService.getXrplServerInfo(e,"current","")]);this.utilsService.logAccountInfoObjects(r,null),this.utilsService.logLedgerObjects(s,a,l),this.utilsService.logObjects("mptokenObjects",o),console.debug("MPT Account Objects: ",o);let c=o.result.account_objects.filter(f=>f.LedgerEntryType==="MPTToken"||f.LedgerEntryType==="MPTokenIssuance"||f.LedgerEntryType==="MPToken");if(console.debug("MPT Objects: ",c),console.debug("MPT Issuance ID:",this.mptIssuanceIdField()),!c.some(f=>f.mpt_issuance_id===this.mptIssuanceIdField()))return this.txUiService.setError(`MPT issuance ID ${this.mptIssuanceIdField()} was not issued by ${i.classicAddress}.`);let u={TransactionType:"MPTokenIssuanceSet",Account:i.classicAddress,MPTokenIssuanceID:this.mptIssuanceIdField(),LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME,Fee:s};yield this.setTxOptionalFields(e,u,i,r,"lock");let h=yield this.txExecutor.mptLockUnlock(u,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!h.success)return this.txUiService.setError(`${h.error}`);t==="Y"?this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated MPT Lock successfully!":"MPT Lock successfully!":this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated MPT Unlock successfully!":"MPT Unlock successfully!",yield this.refreshAfterTx(e,i,null,!1)}catch(e){console.error("Error in setMptLocked:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}sendMpt(){return z(this,null,function*(){yield this.withPerf("sendMpt",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[r,o,s,a,l,c]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,i,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]);if(!s?.result?.account_objects)return this.txUiService.setError(`Unable to fetch account objects for destination ${i}`);let d=o.result.account_objects.filter(v=>v.LedgerEntryType==="MPTokenIssuance");console.debug("Wallet MPT Tokens:",d),console.debug("MPT Issuance ID:",this.mptIssuanceIdField());let u=d.find(v=>v.mpt_issuance_id===this.mptIssuanceIdField()),h=s.result.account_objects.filter(v=>v.LedgerEntryType==="MPToken");if(console.debug("Destination MPT Tokens:",h),console.debug("MPT Issuance ID:",this.mptIssuanceIdField()),!h.some(v=>v.MPTokenIssuanceID===this.mptIssuanceIdField()))return this.txUiService.setError(`Destination ${i} is not authorized to receive this MPT (issuance ID ${this.mptIssuanceIdField()}). Please ensure authorization has been completed.`);u&&this.decodeMPTFlags(u.Flags).some(S=>S.MPTokenIssuanceID==="tfMPTRequireAuth")&&console.warn("MPT requires authorization; assuming existence of MPToken entry indicates approval.");let p={TransactionType:"Payment",Account:e.classicAddress,Amount:{mpt_issuance_id:this.mptIssuanceIdField(),value:this.amountField()},Destination:i,LastLedgerSequence:l+Re.LAST_LEDGER_ADD_TIME,Fee:a};yield this.setTxOptionalFields(t,p,e,r,"send");let y=yield this.txExecutor.mptSend(p,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!y.success)return this.txUiService.setError(`${y.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated MPT sent successfully!":"MPT sent successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in sendMpt:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}destroyMpt(){return z(this,null,function*(){yield this.withPerf("destroyMpt",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]);this.utilsService.logAccountInfoObjects(i,null),this.utilsService.logLedgerObjects(o,s,a),this.utilsService.logObjects("destObjects",r);let l={TransactionType:"MPTokenIssuanceDestroy",Account:e.classicAddress,MPTokenIssuanceID:this.mptIssuanceIdField(),Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,l,e,i,"generate");let c=yield this.txExecutor.mptDestroy(l,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!c.success)return this.txUiService.setError(`${c.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated MPT destroy successfully!":"MPT destroyed successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in destroyMpt:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}clawbackMpt(){return z(this,null,function*(){yield this.withPerf("clawbackMpt",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),l={value:this.amountField(),mpt_issuance_id:this.mptIssuanceIdField()},c={TransactionType:"Clawback",Account:e.classicAddress,Amount:l,Holder:i,Fee:o,Flags:0,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,c,e,r,"clawback");let d=yield this.txExecutor.mptClawback(c,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!d.success)return this.txUiService.setError(`${d.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated MPT clawback successfully!":"MPT clawback successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in clawbackMpt:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getExistingMpts(t,e){let i=new Map,r=[];(t.result.account_objects??[]).forEach(s=>{let a=s;a.LedgerEntryType==="MPTokenIssuance"?i.set(a.mpt_issuance_id,a):a.LedgerEntryType==="MPToken"&&a.Account===e&&r.push(a)});let o=[];for(let s of r){let a=i.get(s.MPTokenIssuanceID)||{};o.push({LedgerEntryType:"MPToken",id:s.index,mpt_issuance_id:s.MPTokenIssuanceID,MPTAmount:s.MPTAmount||"0",OutstandingAmount:a.OutstandingAmount||"0",MaximumAmount:a.MaximumAmount||"Unlimited",TransferFee:a.TransferFee||"0",MPTokenMetadata:a.MPTokenMetadata||"N/A",Flags:s.Flags||0,AssetScale:a.AssetScale||"N/A",Issuer:a.Account||"Unknown",isHolder:!0,amount:s.MPTAmount||"0"})}for(let[s,a]of i.entries())o.some(c=>c.mpt_issuance_id===s)||o.push({LedgerEntryType:"MPTokenIssuance",id:a.index,mpt_issuance_id:a.mpt_issuance_id,MPTAmount:"0",OutstandingAmount:a.OutstandingAmount||"0",MaximumAmount:a.MaximumAmount||"Unlimited",TransferFee:a.TransferFee||"0",MPTokenMetadata:a.MPTokenMetadata||"N/A",Flags:a.Flags||0,AssetScale:a.AssetScale||"N/A",Issuer:a.Account||"Unknown",isHolder:!1,amount:a.OutstandingAmount||"0"});this.existingMpts.set(o),this.utilsService.logObjects("existingMpts (holders + issuers)",o)}toggleFlag(t){this.flags[t]=!this.flags[t],this.updateFlagTotal()}updateFlagTotal(){let t=0;this.flags.canClawback&&(t|=this.flagValues.canClawback),this.flags.canLock&&(t|=this.flagValues.canLock),this.flags.isRequireAuth&&(t|=this.flagValues.isRequireAuth),this.flags.canEscrow&&(t|=this.flagValues.canEscrow),this.flags.canTrade&&(t|=this.flagValues.canTrade),this.flags.canTransfer&&(t|=this.flagValues.canTransfer),this.totalFlagsValue.set(t),this.totalFlagsHex.set("0x"+t.toString(16).toUpperCase().padStart(8,"0"))}getFlagsValue(t){let e=0;return t.canLock&&(e|=ag.MPTokenIssuanceCreateFlags.tfMPTCanLock),t.isRequireAuth&&(e|=ag.MPTokenIssuanceCreateFlags.tfMPTRequireAuth),t.canEscrow&&(e|=ag.MPTokenIssuanceCreateFlags.tfMPTCanEscrow),t.canTrade&&(e|=ag.MPTokenIssuanceCreateFlags.tfMPTCanTrade),t.canTransfer&&(e|=ag.MPTokenIssuanceCreateFlags.tfMPTCanTransfer),t.canClawback&&(e|=ag.MPTokenIssuanceCreateFlags.tfMPTCanClawback),e}decodeMPTFlags(t){let e={tfMPTCanLock:2,tfMPTCanEscrow:4,tfMPTCanTrade:8,tfMPTCanClawback:16,tfMPTRequireAuth:32,tfMPTImmutable:64,tfMPTDisallowIncoming:128},i=[];for(let[r,o]of Object.entries(e))(t&o)!==0&&i.push(r);return i}decodeMptFlagsForUi(t){let e=[{value:2,name:"canLock"},{value:4,name:"isRequireAuth"},{value:8,name:"canEscrow"},{value:10,name:"canTrade"},{value:20,name:"canTransfer"},{value:40,name:"canClawback"}],i=[];for(let r of e)(t&r.value)===r.value&&i.push(r.name);return i.length>0?i.join(", "):"None"}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}if(this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),this.assetScaleField()&&this.activeTab()==="create"){let s=this.assetScaleField();if(s<0||s>15)throw new Error("Tick size must be between 3 and 15.");e.AssetScale=s}if(this.flags.canTransfer){if(!this.transferFeeField()&&this.flags.canTransfer)throw new Error("Transfer Fee is required when CanTransfer is enabled");if(this.transferFeeField()){let s=this.transferFeeField();if(isNaN(s)||s<0||s>5e4)throw new Error("Transfer Fee must be a number between 0 and 50,000 (for 0% to 50%).");e.TransferFee=s}}this.tokenCountField()&&this.activeTab()==="create"&&(e.MaximumAmount=this.tokenCountField()),this.metaDataField()&&this.activeTab()==="create"&&(e.MPTokenMetadata=lg.convertStringToHex(this.metaDataField()))})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getExistingMpts(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&lg.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}copyMptId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("MPT Issuance ID copied!")})}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll(/</g,"&lt;").replaceAll(/>/g,"&gt;")}getCreateButtonTooltip(){return this.txUiService.spinner()?"Processing transaction...":this.metadataIsValid()?"Create MPT Issuance":`Token Metadata too large: ${this.metadataByteLength()} bytes (maximum allowed: 1024 bytes)`}loadXls89Template(){this.metaDataField.set(JSON.stringify(this.XLS89_TEMPLATE(),null,2))}clearFields(t){t&&(this.tokenCountField.set(""),this.assetScaleField.set(0),this.transferFeeField.set(0),this.mptIssuanceIdField.set(""),this.amountField.set(""),this.flags.canClawback=!1,this.flags.canLock=!1,this.flags.isRequireAuth=!1,this.flags.canTransfer=!1,this.flags.canTrade=!1,this.flags.canEscrow=!1,this.destinationTagField.set("")),this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.amountField.set(""),this.mptIssuanceIdField.set(""),this.ticketSequence.set(""),this.txUiService.clearAllOptionsAndMessages()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-mpt"]],viewQuery:function(e,i){if(e&1&&Et(_ct,5),e&2){let r;_t(r=bt())&&(i.jsonEditor=r.first)}},features:[Lt],decls:58,vars:36,consts:[["theForm","ngForm"],["jsonEditor",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],[1,"menu-btn",3,"click"],["name","heroBanknotes","size","20",1,"text-red-600"],["name","heroLockOpen","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[1,"tab-content-container","flags-container"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"green-button-submenu"],["name","heroBanknotes","size","27",1,"text-red-600"],["name","heroLockOpen","size","27",1,"text-red-600"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[2,"margin-top","8px","font-size","0.9em"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[3,"innerHTML"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View MPT on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[1,"ml-2","px-2","py-0.5","text-xs","rounded-full","bg-purple-100","text-purple-800"],[2,"color","#555","font-size","0.88em","display","flex","flex-direction","column","gap","4px"],["title","Copy MPT ID",1,"copy-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-row"],[1,"form-group"],[1,"form-hint"],["type","number","name","assetScaleField","placeholder","Value between 1 and 15",3,"ngModelChange","ngModel"],["type","text","name","tokenCountField",3,"ngModelChange","ngModel"],["type","number","name","transferFeeField","placeholder","This will be a percentage",3,"ngModelChange","ngModel"],[1,"label-with-link"],[1,"label-meta"],["href","https://github.com/XRPLF/XRPL-Standards/discussions/264","target","_blank","rel","noopener noreferrer"],["type","button",1,"btn-secondary","btn-xs","ml-2",2,"margin-left","1em",3,"click"],[1,"json-error-banner",3,"valueChange","value"],[1,"metadata-info"],[1,"text-muted"],[1,"text-danger","d-block"],[1,"text-warning","d-block"],["placeholder","Search by ID or amount...","emptyMessage","No MPTs available",3,"valueChange","items","value"],["type","text","name","mptIssuanceIdField","placeholder","",3,"ngModelChange","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["type","text","name","amountField","placeholder","",3,"ngModelChange","ngModel"],[1,"flags-wrapper"],[1,"token-flags-header"],["name","flag","size","20"],[1,"token-flags-title"],[1,"flag-item-account-flags",3,"enabled"],[1,"flag-item",3,"enabled"],[1,"flags-total"],[1,"flag-item-account-flags",3,"click"],[1,"flag-header-account"],["type","checkbox","id","canLock","name","canLock",1,"flag-checkbox",3,"checked"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"flag-icon"],["d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0L3 7m1.582 2H12"],[1,"flag-title"],[1,"flag-value"],[1,"flag-desc"],[1,"flag-header"],["type","checkbox","disabled","",1,"flag-checkbox",3,"checked"],[1,"flag-item",3,"click"],[1,"total-label"],[1,"total-value"],["type","button",1,"btn-primary-blue",3,"disabled"],["href","#",1,"button-wrapper",3,"click","tooltipText"],["type","button","disabled","",1,"btn-primary-blue"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-orange",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",2),ee(1,"app-navbar"),m(2,"main",3)(3,"div",4)(4,"div",5)(5,"app-wallet-panel",6),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",7)(7,"div",8)(8,"button",9),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",10),w(10," Create MPT "),g(),m(11,"button",9),X("click",function(){return U(r),j(i.setTab("unauthorize"))}),ee(12,"ng-icon",10),w(13," Auth/Unauth MPT "),g(),m(14,"button",11),X("click",function(){return U(r),j(i.setTab("send"))}),ee(15,"ng-icon",12),w(16," Send Payment "),g(),m(17,"button",11),X("click",function(){return U(r),j(i.setTab("lock"))}),ee(18,"ng-icon",13),w(19," Lock/Unlock MPT "),g(),m(20,"button",11),X("click",function(){return U(r),j(i.setTab("clawback"))}),ee(21,"ng-icon",14),w(22," Clawback MPT "),g(),m(23,"button",11),X("click",function(){return U(r),j(i.setTab("destroy"))}),ee(24,"ng-icon",14),w(25," Destroy MPT "),g()(),Q(26,Sct,9,0,"div"),Q(27,Cct,9,0,"div"),Q(28,xct,9,0,"div"),Q(29,kct,9,0,"div"),Q(30,Mct,9,0,"div"),Q(31,Tct,9,0,"div"),Q(32,Nct,11,4,"div",15),Q(33,Bct,3,1,"div",16),m(34,"form",17,0)(36,"div")(37,"div",18)(38,"div",19),Q(39,jct,39,6),Q(40,Hct,21,5),Q(41,Wct,26,6),Q(42,$ct,3,2),g(),Q(43,edt,13,7,"div",20),g(),ee(44,"app-transaction-options",21),m(45,"div",22),Q(46,idt,4,6)(47,rdt,6,8)(48,odt,3,4,"button",23)(49,sdt,6,8)(50,adt,3,4,"button",24)(51,ldt,3,4,"button",24),m(52,"button",25),ct(53,"async"),X("click",function(){return U(r),j(i.clearFields(!0))}),w(54,"Clear Fields"),g()()()(),m(55,"div",26)(56,"input",27),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(57,"app-transaction-preview"),g()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="unauthorize"),_(3),Ue("active",i.activeTab()==="send"),_(3),Ue("active",i.activeTab()==="lock"),_(3),Ue("active",i.activeTab()==="clawback"),_(3),Ue("active",i.activeTab()==="destroy"),_(3),J(i.activeTab()==="create"?26:-1),_(),J(i.activeTab()==="authorize"||i.activeTab()==="unauthorize"?27:-1),_(),J(i.activeTab()==="send"?28:-1),_(),J(i.activeTab()==="lock"||i.activeTab()==="unlock"?29:-1),_(),J(i.activeTab()==="clawback"?30:-1),_(),J(i.activeTab()==="destroy"?31:-1),_(),J((r=i.infoData())?32:-1,r),_(),J(i.txUiService.warningMessage?33:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()==="create"?39:-1),_(),J(i.activeTab()==="authorize"||i.activeTab()==="unauthorize"||i.activeTab()==="lock"||i.activeTab()==="unlock"?40:-1),_(),J(i.activeTab()==="send"?41:-1),_(),J(i.activeTab()==="clawback"||i.activeTab()==="destroy"?42:-1),_(),J(i.activeTab()==="create"?43:-1),_(),oe("showWhenTab",Ei(35,bct))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="create"?46:i.activeTab()==="authorize"||i.activeTab()==="unauthorize"?47:i.activeTab()==="send"?48:i.activeTab()==="lock"||i.activeTab()==="unlock"?49:i.activeTab()==="clawback"?50:51),_(6),oe("disabled",!mt(53,33,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,M1,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,$r,Bi,$v,zi],styles:[".flags-container[_ngcontent-%COMP%]{flex:1;min-width:420px;display:flex;flex-direction:column}.copy-link[_ngcontent-%COMP%]:hover{color:#1d4ed8}.json-schema-success[_ngcontent-%COMP%]{color:#10b981}.json-schema-warning[_ngcontent-%COMP%]{color:#f59e0b}.json-schema-error[_ngcontent-%COMP%]{color:#ef4444}"],data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var Ige=_i(Ki());var cdt=()=>["set","delete"],ddt=(n,t)=>t.index;function udt(n,t){n&1&&(m(0,"div")(1,"div",23)(2,"div",24),ee(3,"ng-icon",25),g(),m(4,"div")(5,"h2",26),w(6,"Set Permissioned Domain"),g(),m(7,"p",27),w(8,"Set Permissioned Domain for the selected account."),g()()()())}function hdt(n,t){n&1&&(m(0,"div")(1,"div",23)(2,"div",28),ee(3,"ng-icon",29),g(),m(4,"div")(5,"h2",26),w(6,"Delete Permissioned Domain"),g(),m(7,"p",27),w(8,"Delete Permissioned Domain for the selected account."),g()()()())}function fdt(n,t){n&1&&w(0," has no permissioned domains. ")}function pdt(n,t){if(n&1&&(w(0," has issued "),m(1,"strong"),w(2),g(),w(3)),n&2){let e=E();_(2),Ee(e.permissionedDomainCount),_(),je(" permissioned domain",e.permissionedDomainCount===1?"":"s",". ")}}function mdt(n,t){if(n&1){let e=ge();m(0,"li",40)(1,"app-tooltip-link",41)(2,"div",42),w(3),g(),m(4,"div",43)(5,"span"),w(6,"Domain ID:"),g(),m(7,"code",44),w(8),g()(),m(9,"div",43)(10,"span"),w(11,"Credential"),g(),m(12,"code",44),w(13),g()()(),m(14,"button",45),X("click",function(r){let o=U(e).$implicit;return E(4).copyAndToast(o.index,"Domain ID"),j(r.stopPropagation())}),lt(),m(15,"svg",46),ee(16,"rect",47)(17,"path",48),g()()()}if(n&2){let e=t.$implicit,i=E(4);_(),oe("href",i.txUiService.explorerUrl()+"entry/"+e.index),_(2),Ee(e.Domain||"Permissioned Domain"),_(5),ei("",e.index.slice(0,10),"...",e.index.slice(-8)),_(5),Ee(e.AcceptedCredentials)}}function gdt(n,t){if(n&1&&(m(0,"ul",39),yn(1,mdt,18,5,"li",40,ddt),g()),n&2){let e=E(2);_(),vn(e.permissionedDomainsToShow)}}function ydt(n,t){if(n&1){let e=ge();m(0,"div",35),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",36)(2,"span"),w(3),g(),lt(),m(4,"svg",37),ee(5,"path",38),g()(),Q(6,gdt,3,0,"ul",39),g()}if(n&2){let e=E(),i=E();_(3),je(" Permissioned Domains (",e.permissionedDomainCount,")"),_(),In("transform",i.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(i.infoPanelExpanded()?6:-1)}}function vdt(n,t){if(n&1&&(m(0,"div",11)(1,"div",30)(2,"div",31)(3,"div",32),ee(4,"ng-icon",33),m(5,"code"),w(6),g(),Q(7,fdt,1,0)(8,pdt,4,2),g(),Q(9,ydt,7,4,"div",34),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.permissionedDomainCount===0?7:8),_(2),J(e.permissionedDomainCount>0?9:-1)}}function _dt(n,t){if(n&1&&(m(0,"div",12),ee(1,"ng-icon",49)(2,"div",50),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function bdt(n,t){if(n&1){let e=ge();m(0,"div",51)(1,"label",52),w(2,"Issuer"),g(),m(3,"p",53),w(4,"The credential issuer."),g(),m(5,"app-select-search-dropdown",54),X("valueChange",function(r){U(e);let o=E();return j(o.onDestinationSelected(r))}),g()(),m(6,"div",51)(7,"label",55),w(8,"Credential Type"),g(),m(9,"p",53),w(10,"A hex-encoded value to identify the type of credential from the issuer."),g(),m(11,"input",56),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.credentialType,r)||(o.credentialType=r),j(r)}),g()()}if(n&2){let e=E();_(5),oe("items",e.destinationItems())("value",e.selectedDestinationItem()),_(6),Oe("ngModel",e.credentialType)}}function wdt(n,t){if(n&1){let e=ge();m(0,"div",51)(1,"label",57),w(2,"Select Permissioned Domain to delete"),g(),m(3,"p",53),w(4,"Select an existing permissioined domain attached to the current wallet."),g(),m(5,"app-select-search-dropdown",58),X("valueChange",function(r){U(e);let o=E(2);return j(o.onDomainSelected(r))}),g()(),m(6,"div",15)(7,"div",51)(8,"label",59),w(9,"Domain ID"),g(),m(10,"p",53),w(11,"Ledger hash containing the permissioned domain."),g(),m(12,"input",60),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.domainId,r)||(o.domainId=r),j(r)}),g()()()}if(n&2){let e=E(2);_(5),oe("items",e.domainItems())("value",e.selectedDomainItem()),_(7),Oe("ngModel",e.domainId)}}function Sdt(n,t){if(n&1&&Q(0,wdt,13,3),n&2){let e=E();J(e.createdPermissionedDomains().length>0?0:-1)}}function Cdt(n,t){if(n&1){let e=ge();m(0,"button",61),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.permissionedDomainSet())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Set Permissioned Domain")}}function xdt(n,t){if(n&1){let e=ge();m(0,"button",62),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.permissionedDomainDelete())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Delete Permissioned Domain")}}var qD=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);txExecutor=N(ai);selectedDomainId=P(null);domainSearchQuery=P("");typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("set");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);subject=P("");credentialType=P("");domainId=P("");createdDomains=P(!1);createdPermissionedDomains=P([]);destinationItems=_e(()=>{let t=this.currentWallet().address;return[...this.wallets().map(i=>({address:i.address,name:i.name??`Wallet ${i.address.slice(0,8)}`})),...this.customDestinations()].map(i=>({id:i.address,display:i.name||"Unknown Wallet",secondary:i.address,isCurrentAccount:i.address===t,isCurrentCode:!1,isCurrentToken:!1}))});selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});onDestinationSelected(t){this.selectedDestinationAddress.set(t?.id||"")}domainItems=_e(()=>this.createdPermissionedDomains().map(t=>({id:t.index,display:t.index.slice(0,10)+"..."+t.index.slice(-8),secondary:t.AcceptedCredentials?`Credentials: ${t.AcceptedCredentials.length}`:"No credentials",isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1})));selectedDomainItem=_e(()=>{let t=this.selectedDomainId();return t&&this.domainItems().find(e=>e.id===t)||null});onDomainSelected(t){let e=t?.id||"";this.selectedDomainId.set(e),this.domainId.set(e)}infoData=_e(()=>{if(!this.currentWallet().address)return null;let t=this.createdPermissionedDomains();return{walletName:this.currentWallet().name||"Selected wallet",mode:this.activeTab(),permissionedDomainCount:t.length,permissionedDomainsToShow:t}});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),this.clearInputFields(),yield this.getPermissionedDomainForAccount(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}resetDomainDropDown(){this.selectedDomainId.set(null),this.domainId.set("")}toggleCreatedDomains(){this.createdDomains.update(t=>!t)}trackByWalletAddress(t,e){return e.address}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.txUiService.clearAllOptionsAndMessages(),this.hasWallets()&&(yield this.getPermissionedDomainForAccount())})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getPermissionedDomainForAccount(t=!1){return z(this,null,function*(){yield this.withPerf("getPermissionedDomainForAccount",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.getCreatedPermissionedDomains(o,i.classicAddress),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getPermissionedDomainForAccount:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}permissionedDomainSet(){return z(this,null,function*(){yield this.withPerf("permissionedDomainSet",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[{accountInfo:r,accountObjects:o},s,a]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),l=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:r,accountObjects:o,fee:s,currentLedger:a},subject:{subject:i},credentials:{credentialType:this.credentialType()}}),c=yield this.validationService.validate("PermissionedDomainSet",{inputs:l,client:t,accountInfo:r});if(c.length>0)return this.txUiService.setError(c.join(`
\u2022 `));let d={TransactionType:"PermissionedDomainSet",Account:e.classicAddress,AcceptedCredentials:[{Credential:{Issuer:i,CredentialType:Buffer.from(this.credentialType()||"defaultCredentialType","utf8").toString("hex")}}],Fee:s,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,r);let u=yield this.txExecutor.permissionedDomainSet(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Set Permissioned Domain successfully!":"Set Permissioned Domain successfully!",yield this.refreshAfterTx(t,e,i,!0)}catch(t){console.error("Error in permissionedDomainSet:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}permissionedDomainDelete(){return z(this,null,function*(){yield this.withPerf("permissionedDomainDelete",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),a=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:i,accountObjects:r,fee:o,currentLedger:s},domain:{domainId:this.domainId()}}),l=yield this.validationService.validate("PermissionedDomainDelete",{inputs:a,client:t,accountInfo:i});if(l.length>0)return this.txUiService.setError(l.join(`
\u2022 `));if(!r.result.account_objects.find(h=>h.LedgerEntryType==="PermissionedDomain"&&h.index===this.domainId()))return this.txUiService.setError(`No Permission Domain found for ${e.classicAddress} with ID ${this.domainId()}`);let d={TransactionType:"PermissionedDomainDelete",Account:e.classicAddress,DomainID:this.domainId(),Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,i);let u=yield this.txExecutor.permissionedDomainDelete(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Permisioned Domain deletion successfully!":"Permissioned Domain deleted successfully!",yield this.refreshAfterTx(t,e,null,!1),this.resetDomainDropDown()}catch(t){console.error("Error in permissionedDomainDelete:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getCreatedPermissionedDomains(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="PermissionedDomain"&&r.Owner===e).map(r=>({index:r.index,AcceptedCredentials:r.AcceptedCredentials?JSON.stringify(r.AcceptedCredentials.map(o=>Ge(le({},o),{Credential:Ge(le({},o.Credential),{CredentialType:Buffer.from(o.Credential.CredentialType,"hex").toString("utf8"),Issuer:o.Credential.Issuer})})),null,""):"N/A",Owner:r.Owner,Sequence:r.Sequence})).sort((r,o)=>r.index.localeCompare(o.index));this.createdPermissionedDomains.set(i),this.utilsService.logObjects("createdPermissionedDomains",this.createdPermissionedDomains)}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getCreatedPermissionedDomains(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i??""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}addNewDestinationFromUser(t){!t||!Ige.isValidAddress(t)||this.destinationItems().some(i=>i.id===t)||(this.customDestinations.update(i=>[...i,{name:`Custom ${i.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())))}copyPermissionedDomainId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Permissioned Domain ID copied!")})}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(){this.clearInputFields(),this.txUiService.clearAllOptionsAndMessages()}clearInputFields(){this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.credentialType.set(""),this.domainId.set(""),this.selectedDomainId.set(null)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-permissioned-domain"]],features:[Lt],decls:35,vars:21,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","12px","display","flex","align-items","center","gap","12px"],["tooltipText","View Permissioned Domain on XRPL Explorer",2,"flex","1","min-width","0",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[2,"color","#555","font-size","0.88em","display","flex","align-items","center","gap","8px"],[2,"font-size","0.95em"],["title","Copy Domain ID",1,"copy-btn",2,"background","none","border","none","cursor","pointer","padding","4px","opacity","0.7","margin-left","auto",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-group"],["for","issuer"],[1,"form-hint"],["placeholder","Enter or select issuer address","emptyMessage","No wallets available",3,"valueChange","items","value"],["for","credentialType"],["type","text","name","credential_type",3,"ngModelChange","ngModel"],["for","selectPDtoDelete"],["placeholder","Search by Domain ID...","emptyMessage","No domains found",3,"valueChange","items","value"],["for","domainId"],["type","text","name","domainId","placeholder","",3,"ngModelChange","ngModel"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6)(7,"div",7)(8,"button",8),X("click",function(){return U(r),j(i.setTab("set"))}),ee(9,"ng-icon",9),w(10," Set Permissioned Domain "),g(),m(11,"button",8),X("click",function(){return U(r),j(i.setTab("delete"))}),ee(12,"ng-icon",10),w(13," Delete Permissioned Domain "),g()(),Q(14,udt,9,0,"div"),Q(15,hdt,9,0,"div"),Q(16,vdt,10,3,"div",11),Q(17,_dt,3,1,"div",12),m(18,"form",13,0)(20,"div",14)(21,"div")(22,"div",15),Q(23,bdt,12,3),g(),Q(24,Sdt,1,1),ee(25,"app-transaction-options",16),m(26,"div",17),Q(27,Cdt,3,4,"button",18)(28,xdt,3,4,"button",19),m(29,"button",20),ct(30,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(31,"Clear Fields"),g()()(),m(32,"div",21)(33,"input",22),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(34,"app-transaction-preview"),g()()()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="set"),_(3),Ue("active",i.activeTab()==="delete"),_(3),J(i.activeTab()==="set"?14:-1),_(),J(i.activeTab()==="delete"?15:-1),_(),J((r=i.infoData())?16:-1,r),_(),J(i.txUiService.warningMessage?17:-1),_(4),oe("@tabTransition",i.activeTab()),_(2),J(i.activeTab()==="set"?23:-1),_(),J(i.activeTab()==="delete"?24:-1),_(),oe("showWhenTab",Ei(20,cdt))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="set"?27:i.activeTab()==="delete"?28:-1),_(2),oe("disabled",!mt(30,18,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki,$r,Bi,zi],styles:[".copy-btn[_ngcontent-%COMP%]:hover{opacity:1!important;color:#0369a1}"],data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var Pge=_i(Ki());var kdt=()=>["clear","delete"],Fge=(n,t)=>t.id,Mdt=(n,t)=>t.index;function Tdt(n,t){n&1&&(m(0,"div")(1,"div",31)(2,"div",32),ee(3,"ng-icon",33),g(),m(4,"div")(5,"h2",34),w(6,"Delegate Actions"),g(),m(7,"p",35),w(8,"Delegate Actions to another XRPL address"),g()()()())}function Edt(n,t){n&1&&(m(0,"div")(1,"div",31)(2,"div",36),ee(3,"ng-icon",37),g(),m(4,"div")(5,"h2",34),w(6,"Clear Delegate Actions"),g(),m(7,"p",35),w(8,"Clear Delegated Actions to another XRPL address"),g()()()())}function Adt(n,t){n&1&&(m(0,"div",11)(1,"div",38),ee(2,"ng-icon",39)(3,"div",40),g()()),n&2&&(_(3),oe("innerHTML",t.message,pn))}function Ddt(n,t){if(n&1&&(m(0,"div",12),ee(1,"ng-icon",41)(2,"div",42),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function Idt(n,t){if(n&1&&(m(0,"span",50),w(1),g()),n&2){let e=E().$implicit;_(),je("Credential Index: ",e.index," ")}}function Fdt(n,t){n&1&&(m(0,"span",51),w(1,"Credential Index: Not set "),g())}function Pdt(n,t){if(n&1){let e=ge();m(0,"div",48)(1,"div",49),Q(2,Idt,2,1,"span",50)(3,Fdt,2,0,"span",51),g(),m(4,"div",52)(5,"button",53),X("click",function(r){let o=U(e).$implicit;return E(3).copyDelegateId(o.index),r.stopPropagation(),j(r.preventDefault())}),ee(6,"ng-icon",54),m(7,"a",55),X("click",function(r){return U(e),j(r.stopPropagation())}),ee(8,"ng-icon",56),g()()()()}if(n&2){let e=t.$implicit,i=E(3);_(2),J(e.index?2:3),_(5),oe("href",i.txUiService.explorerUrl()+"entry/"+e.index,La)}}function Ldt(n,t){if(n&1&&(m(0,"div",47),yn(1,Pdt,9,2,"div",48,Mdt),g()),n&2){let e=E(2);_(),vn(e.existingDelegations())}}function Rdt(n,t){if(n&1){let e=ge();m(0,"div",13)(1,"div",43),X("click",function(){U(e);let r=E();return j(r.toggleCreatedDelegations())}),m(2,"h3",44),ee(3,"ng-icon",45),w(4),g()(),m(5,"div",46),Q(6,Ldt,3,0,"div",47),g()()}if(n&2){let e=E();_(4),je(" Created Credentials (",e.existingDelegations().length,") "),_(),Ue("collapsed",e.createdDelegations()),_(),J(e.createdDelegations()?-1:6)}}function Odt(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"div",57)(2,"label",58),w(3,"Authorize Wallet"),g(),m(4,"p",59),w(5,"The authorized account delegated to perform actions on behalf of the selected account."),g(),m(6,"app-select-search-dropdown",60),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()()()}if(n&2){let e=E();_(6),oe("items",e.destinationItems())("value",e.selectedDestinationItem())}}function Ndt(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"div",57)(2,"label",58),w(3,"Unauthorize Wallet"),g(),m(4,"p",59),w(5,"Remove delegated authority on the account."),g(),m(6,"app-select-search-dropdown",60),X("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()()()}if(n&2){let e=E();_(6),oe("items",e.destinationItems())("value",e.selectedDestinationItem())}}function Bdt(n,t){if(n&1){let e=ge();m(0,"div",61),X("click",function(r){let o=U(e).$implicit,s=E();return j(s.toggleSelection(o.id,r))}),m(1,"div",62)(2,"input",63),X("click",function(r){return U(e),j(r.stopPropagation())}),g(),lt(),m(3,"svg",64),ee(4,"path",65),g(),dn(),m(5,"span",66),w(6),g()(),m(7,"div",67),w(8),g(),m(9,"div",68),w(10),g()()}if(n&2){let e=t.$implicit,i=E();Ue("enabled",i.selected.has(e.id)),_(2),oe("id",e.key+"-left")("checked",i.selected.has(e.id)),_(4),Ee(e.key),_(2),ei("",e.id," ",e.txType),_(2),Ee(e.description)}}function Vdt(n,t){if(n&1){let e=ge();m(0,"div",61),X("click",function(r){let o=U(e).$implicit,s=E();return j(s.toggleSelection(o.id,r))}),m(1,"div",62)(2,"input",63),X("click",function(r){return U(e),j(r.stopPropagation())}),g(),lt(),m(3,"svg",64),ee(4,"path",65),g(),dn(),m(5,"span",66),w(6),g()(),m(7,"div",67),w(8),g(),m(9,"div",68),w(10),g()()}if(n&2){let e=t.$implicit,i=E();Ue("enabled",i.selected.has(e.id)),_(2),oe("id",e.key+"-right")("checked",i.selected.has(e.id)),_(4),Ee(e.key),_(2),ei("",e.id," ",e.txType),_(2),Ee(e.description)}}function Udt(n,t){if(n&1){let e=ge();m(0,"button",69),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.delegateActions("delegate"))}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Delegate Actions")}}function jdt(n,t){if(n&1){let e=ge();m(0,"button",70),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.delegateActions("clear"))}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Clear Delegated Actions")}}var $D=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("delegate");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);dropdownOpen=P(!1);actions=Re.DELEGATE_ACTIONS;selected=new Set;delegateSelections={};leftActions;rightActions;createdDelegations=P(!1);existingDelegations=P([]);subject=P("");selectedWalletIndex=P(0);selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||"Selected wallet",i=this.existingDelegations().length,r;return i===0?r=`<code>${e}</code> wallet has no delegations.`:r=`<code>${e}</code> wallet has <strong>${i}</strong> ${i===1?"delegation":"delegations"}.`,{walletName:e,message:r,mode:this.activeTab(),delegationCount:i,existingDelegations:this.existingDelegations()}});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.leftActions=this.actions.slice(0,Math.ceil(this.actions.length/2)),this.rightActions=this.actions.slice(Math.ceil(this.actions.length/2)),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),yield this.getAccountDetails(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByWalletAddress(t,e){return e.address}trackByAddress(t,e){return e.address}trackByTicket(t,e){return e}toggleCreatedDelegations(){this.createdDelegations.update(t=>!t)}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.txUiService.clearAllOptionsAndMessages(),this.hasWallets()&&(yield this.getAccountDetails(!0))})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}toggleSelection(t,e){e&&e.stopPropagation(),this.selected.has(t)?this.selected.delete(t):this.selected.add(t)}getSelectedActions(){return this.actions.filter(t=>this.selected.has(t.id))}getAccountDetails(t=!1){return z(this,null,function*(){yield this.withPerf("getAccountDetails",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.getExistingDelegations(o,i.classicAddress),this.leftActions=this.actions.slice(0,Math.ceil(this.actions.length/2)),this.rightActions=this.actions.slice(Math.ceil(this.actions.length/2)),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getAccountDetails:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}delegateActions(t){return z(this,null,function*(){yield this.withPerf("delegateActions",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),r=this.selectedDestinationAddress()||this.typedDestination(),[{accountInfo:o,accountObjects:s},a,l]=yield Promise.all([this.xrplCache.getAccountData(i.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(e)]),c=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:o,fee:a,currentLedger:l},destination:{address:r,tag:""}}),d=yield this.validationService.validate("DelegateActions",{inputs:c,client:e,accountInfo:o});if(d.length>0)return this.txUiService.setError(d.join(`
\u2022 `));let u=[];if(t==="clear")console.log("Clearing all delegate objects");else{let p=this.getSelectedActions();if(console.log("Selected Actions: ",p),p.length==0)return this.txUiService.setError("Select a delegate objects to set.");if(p.length>10)return this.txUiService.setError("The max delegate objects must be less than 10.");u=p.map(y=>({Permission:{PermissionValue:y.key}})),console.log("permissions: ",u)}let h={TransactionType:"DelegateSet",Account:i.classicAddress,Authorize:r,Permissions:u,Fee:a,LastLedgerSequence:l+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(e,h,i,o,"delegateActions");let f=yield this.txExecutor.delegateActions(h,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!f.success)return this.txUiService.setError(`${f.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Delegate action successfully!":"Delegate action successfully!",yield this.refreshAfterTx(e,i,null,!1)}catch(e){console.error("Error in delegateAction:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getExistingDelegations(t,e){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="Delegate").map(r=>({LedgerEntryType:r.LedgerEntryType,index:r.index,Authorize:r.Authorize,Permissions:r.Permissions,Flags:r.Flags}));this.existingDelegations.set(i),this.utilsService.logObjects("existingDelegations",i)}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(this.txUiService.isTicket()){let s=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(s){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(s))))throw new Error(`Ticket ${s} not found`);this.utilsService.setTicketSequence(e,s,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.getExistingDelegations(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&i&&this.addNewDestinationFromUser(i),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&Pge.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}copyDelegateId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Delegate Id copied!")})}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(){this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.txUiService.clearAllOptionsAndMessages()}clearDelegateActions(){this.selected.clear()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-delegate"]],features:[Lt],decls:48,vars:22,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroArrowUturnLeft","size","20",1,"text-red-600"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-panel"],[1,"warning-panel"],[1,"outstanding-checks-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[1,"flags-wrapper"],[1,"token-flags-header",2,"margin-top","0.8em"],["name","flag","size","20"],[1,"token-flags-title"],[1,"form-row-account-flags",2,"display","flex","gap","20px","flex-wrap","wrap"],[2,"flex","1","min-width","300px"],[1,"flag-item-account-flags",2,"margin-bottom","0.5em",3,"enabled"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"green-button-submenu"],["name","heroArrowUturnLeft","size","27","color","green",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel-content"],["name","heroInformationCircle","size","20",1,"text-blue-600"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"panel-header",2,"cursor","pointer","user-select","none",3,"click"],[1,"panel-title",2,"margin","0","font-size","0.8rem","display","flex","align-items","center","gap","0.5rem"],["name","heroQueueList","size","20",1,"text-red-600"],[1,"credential-list-container"],[1,"checks-list"],[1,"check-card"],[1,"check-extras"],[1,"badge","badge-credential-index"],[1,"badge","badge-credential-index-not-set"],[1,"button-group"],["title","Copy Credential ID","type","button",1,"icon-btn","copy-check-id",3,"click"],["name","heroClipboardDocumentList","size","20",1,"text-red-600"],["target","_blank","rel","noopener noreferrer","title","View on XRPL Win",1,"icon-btn",2,"padding-left","20px",3,"click","href"],["name","heroArrowTopRightOnSquare","size","20",1,"text-blue-600"],[1,"form-group"],["for","destination"],[1,"form-hint"],["placeholder","Enter or select an account.",3,"valueChange","items","value"],[1,"flag-item-account-flags",2,"margin-bottom","0.5em",3,"click"],[1,"flag-header-account"],["type","checkbox",1,"flag-checkbox",3,"click","id","checked"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"flag-icon"],["d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0L3 7m1.582 2H12"],[1,"flag-title-account-flags"],[1,"flag-value"],[1,"flag-desc"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6)(7,"div",7)(8,"button",8),X("click",function(){return U(r),j(i.setTab("delegate"))}),ee(9,"ng-icon",9),w(10," Delegate Actions "),g(),m(11,"button",8),X("click",function(){return U(r),j(i.setTab("clear"))}),ee(12,"ng-icon",10),w(13," Clear Delegate Actions "),g()(),Q(14,Tdt,9,0,"div"),Q(15,Edt,9,0,"div"),Q(16,Adt,4,1,"div",11),Q(17,Ddt,3,1,"div",12),Q(18,Rdt,7,4,"div",13),m(19,"form",14,0)(21,"div",15)(22,"div"),Q(23,Odt,7,2,"div",16),Q(24,Ndt,7,2,"div",16),m(25,"div",17)(26,"div",18),ee(27,"lucide-icon",19),m(28,"span",20),w(29,"Delegate Action Flags"),g()(),m(30,"div")(31,"div",21)(32,"div",22),yn(33,Bdt,11,8,"div",23,Fge),g(),m(35,"div",22),yn(36,Vdt,11,8,"div",23,Fge),g()()()()(),ee(38,"app-transaction-options",24),m(39,"div",25),Q(40,Udt,3,4,"button",26)(41,jdt,3,4,"button",27),m(42,"button",28),ct(43,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(44,"Clear Fields"),g()(),m(45,"div",29)(46,"input",30),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(47,"app-transaction-preview"),g()()()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="delegate"),_(3),Ue("active",i.activeTab()==="clear"),_(3),J(i.activeTab()==="delegate"?14:-1),_(),J(i.activeTab()==="clear"?15:-1),_(),J((r=i.infoData())?16:-1,r),_(),J(i.txUiService.warningMessage?17:-1),_(),J(i.activeTab!==void 0&&i.existingDelegations.length>0?18:-1),_(4),oe("@tabTransition",i.activeTab()),_(),J(i.activeTab()==="delegate"?23:-1),_(),J(i.activeTab()==="clear"?24:-1),_(9),vn(i.leftActions),_(3),vn(i.rightActions),_(2),oe("showWhenTab",Ei(21,kdt))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="delegate"?40:i.activeTab()==="clear"?41:-1),_(2),oe("disabled",!mt(43,19,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var zz=_i(Ki());var Hdt=["paymentJson"],Wdt=["txResultJson"],zdt=["dropdownTemplate"],qdt=["dropdownOrigin"],$dt=()=>["create","modify","authorize","unauthorize","delete"],Kdt=(n,t)=>t.NFTokenID;function Gdt(n,t){n&1&&(m(0,"div")(1,"div",44)(2,"div",45),ee(3,"ng-icon",46),g(),m(4,"div")(5,"h2",47),w(6,"Create Firewall"),g(),m(7,"p",48),w(8,"Create a Firewall for the selected address"),g()()()())}function Xdt(n,t){n&1&&(m(0,"div")(1,"div",44)(2,"div",49),ee(3,"ng-icon",50),g(),m(4,"div")(5,"h2",47),w(6,"Modify Wallet"),g(),m(7,"p",48),w(8,"Modify the firewall for the selected address"),g()()()())}function Ydt(n,t){n&1&&(m(0,"div")(1,"div",44)(2,"div",51),ee(3,"lucide-angular",52),g(),m(4,"div")(5,"h2",47),w(6,"Authorize Wallet"),g(),m(7,"p",48),w(8,"Authorize a wallet to act as a firewall"),g()()()())}function Zdt(n,t){n&1&&(m(0,"div")(1,"div",44)(2,"div",53),ee(3,"lucide-angular",54),g(),m(4,"div")(5,"h2",47),w(6,"Unauthorize Wallet"),g(),m(7,"p",48),w(8,"Unauthorize a wallet that acts as a firewall"),g()()()())}function Qdt(n,t){n&1&&(m(0,"div")(1,"div",44)(2,"div",55),ee(3,"ng-icon",56),g(),m(4,"div")(5,"h2",47),w(6,"Delete Firewall"),g(),m(7,"p",48),w(8,"Delete firewall for the selected account"),g()()()())}function Jdt(n,t){if(n&1&&(m(0,"div",14),ee(1,"ng-icon",57)(2,"div",58),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeInfo,pn)}}function eut(n,t){if(n&1&&(m(0,"div",15),ee(1,"ng-icon",59)(2,"div",60),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function tut(n,t){if(n&1&&(m(0,"span",68),w(1),g()),n&2){let e=E().$implicit;_(),je(" LedgerEntryType: ",e.LedgerEntryType," ")}}function nut(n,t){n&1&&(m(0,"span",69),w(1," LedgerEntryType: Not set "),g())}function iut(n,t){if(n&1&&(m(0,"span",68),w(1),g()),n&2){let e=E().$implicit;_(),je(" NFTokenID: ",e.NFTokenID," ")}}function rut(n,t){n&1&&(m(0,"span",69),w(1," NFTokenID: Not set "),g())}function out(n,t){if(n&1&&(m(0,"span",71),w(1),g()),n&2){let e=E().$implicit;_(),je(" URI: ",e.URI," ")}}function sut(n,t){n&1&&(m(0,"span",72),w(1," URI: Not set "),g())}function aut(n,t){if(n&1){let e=ge();m(0,"div",66)(1,"div",67),Q(2,tut,2,1,"span",68)(3,nut,2,0,"span",69),Q(4,iut,2,1,"span",68)(5,rut,2,0,"span",69),ee(6,"div",70),Q(7,out,2,1,"span",71)(8,sut,2,0,"span",72),g(),m(9,"div",73)(10,"button",74),X("click",function(r){let o=U(e).$implicit;return E(3).copyFirewallID(o.NFTokenID),r.stopPropagation(),j(r.preventDefault())}),ee(11,"ng-icon",75),m(12,"a",76),X("click",function(r){return U(e),j(r.stopPropagation())}),ee(13,"ng-icon",77),g()()()()}if(n&2){let e=t.$implicit,i=E(3);_(2),J(e.LedgerEntryType?2:3),_(2),J(e.NFTokenID?4:5),_(3),J(e.URI?7:8),_(5),oe("href",`${i.url}mpt/`+e.NFTokenID,La)}}function lut(n,t){if(n&1&&(m(0,"div",65),yn(1,aut,14,4,"div",66,Kdt),g()),n&2){let e=E(2);_(),vn(e.existingFirewalls)}}function cut(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"div",61),X("click",function(){U(e);let r=E();return j(r.toggleExistingFirewalls())}),m(2,"h3",62),ee(3,"ng-icon",63),w(4),g()(),m(5,"div",64),Q(6,lut,3,0,"div",65),g()()}if(n&2){let e=E();_(4),je(" Existing NFTs (",e.existingFirewalls.length,") "),_(),In("max-height",e.existingFirewallsCollapsed?"0":e.existingFirewalls.length*80+20+"px")("overflow","hidden")("transition","max-height 0.3s ease"),_(),J(e.existingFirewallsCollapsed?-1:6)}}function dut(n,t){if(n&1){let e=ge();m(0,"button",78),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.createFirewall())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Create Firewall")}}function uut(n,t){if(n&1){let e=ge();m(0,"button",78),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.modifyFirewall())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Modify Firewall")}}function hut(n,t){if(n&1){let e=ge();m(0,"button",79),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.authorizeFirewall("Y"))}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Authorize Firewall")}}function fut(n,t){if(n&1){let e=ge();m(0,"button",80),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.authorizeFirewall("N"))}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Unauthorize Firewall")}}function put(n,t){if(n&1){let e=ge();m(0,"button",81),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.deleteFirewall())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Delete Firewall")}}var KD=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("create");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");currencyFieldDropDownValue=P("XRP");issuerFields=P("");mptIssuanceIdField=P("");isMptEnabled=P(!1);currencyBalanceField=P("0");knownTrustLinesIssuers=P({XRP:[]});currencies=P([]);storedIssuers=P([]);selectedIssuer=P("");issuers=P([]);currencyChangeTrigger=P(0);escrowFinishTimeField=P("");escrowFinishTimeUnit=P("seconds");escrowCancelTimeUnit=P("seconds");escrowCancelTimeField=P("");escrowOwnerField=P("");escrowSequenceNumberField=P("");selectedEscrow=P(null);tokenBalance=P("0");escrowCancelDateTimeField=P("");escrowFinishDateTimeField=P("");expiredOrFulfilledEscrows=P([]);allEscrowsRaw=P([]);finishEscrow=P([]);existingEscrow=P([]);exsitingMpt=P([]);existingIOUs=P([]);outstandingEscrowCollapsed=P(!0);outstandingMptCollapsed=P(!0);outstandingIOUCollapsed=P(!0);escrowConditionField=P("");escrowFulfillmentField=P("");destroy$=new Xe;paymentJson;txResultJson;dropdownTemplate;dropdownOrigin;overlayRef=null;injector=N(tn);selectedFirewall=null;tempNameFirewallId=null;isTicket=!1;ticketArray=[];selectedTickets=[];selectedSingleTicket="";multiSelectMode=!1;selectedTicket="";useMultiSign=!1;multiSignAddress="";multiSignSeeds="";signerQuorum=0;cancelTimePeriodField=P("");cancelTimePeriodUnit=P("seconds");finishTimePeriodField=P("");finishTimePeriodUnit=P("seconds");backupAccountField="";totalOutField="";isMptFlagModeEnabled=!1;memoField="";isMemoEnabled=!1;isRegularKeyAddress=!1;regularKeySeed="";regularKeyAddress="";multiSigningEnabled=!1;regularKeySigningEnabled=!1;masterKeyDisabled=!1;knownDestinations={};whitelistAddress={};showDropdown=!1;dropdownOpen=!1;highlightedIndex=-1;whitelistAddresses=[];newWhitelistAddress="";whitelistAddressToRemove="";signers=[{account:"",seed:"",weight:1}];selectedWalletIndex=0;showManageTokens=!1;showSecret=!1;encryptionType="";existingFirewalls=[];existingFirewallsCollapsed=!0;url="";editingIndex;tempName="";filterQuery="";sourceTagField="";invoiceIdField="";lastPaymentTx="";lastTxResult="";issuerFieldSubject=new Xe;destinationInputSubject=new Xe;checkExpirationTime="seconds";expirationTimeField="";ticketSequence="";checkIdField="";outstandingChecks="";gatewayBalance="0";issuerToRemove="";userAddedCurrencyFieldDropDownValue=[];userAddedissuerFields="";allKnownIssuers=[];newCurrency="";newIssuer="";tokenToRemove="";lastCurrency="";lastIssuer="";cancellableChecks=[];cashableChecks=[];existingChecks=[];outstandingChecksCollapsed=!0;selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return[...this.wallets().map(i=>({address:i.address,name:i.name??`Wallet ${i.address.slice(0,8)}`})),...this.customDestinations()].map(i=>({id:i.address,display:i.name||"Unknown Wallet",secondary:i.address,isCurrentAccount:i.address===t,isCurrentCode:!1,isCurrentToken:!1}))});currencyItems=_e(()=>{let t=this.currencyFieldDropDownValue();return this.availableCurrencies.map(e=>e==="MPT"?{id:"MPT",display:"MPT",secondary:"Multi-Purpose Token",isCurrentAccount:!1,isCurrentCode:t==="MPT",isCurrentToken:!1}:{id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":`${this.trustlineCurrency.getIssuersForCurrency(e).length} issuer${this.trustlineCurrency.getIssuersForCurrency(e).length!==1?"s":""}`,isCurrentAccount:!1,isCurrentCode:e===t,isCurrentToken:!1})});selectedCurrencyItem=_e(()=>{let t=this.currencyFieldDropDownValue();return t&&this.currencyItems().find(e=>e.id===t)||null});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});issuerItems=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return this.issuers().map((e,i)=>({id:e.address,display:e.name||`Issuer ${i+1}`,secondary:e.address.slice(0,7)+"..."+e.address.slice(-7),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:e.address===t}))});selectedIssuerAddress=_e(()=>this.trustlineCurrency.getSelectedIssuer());selectedIssuerItem=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return t&&this.issuerItems().find(e=>e.id===t)||null});timeUnitItems=_e(()=>[{id:"seconds",display:"Seconds"},{id:"minutes",display:"Minutes"},{id:"hours",display:"Hours"},{id:"days",display:"Days"}]);finishTimeUnit=_e(()=>{let t=this.finishTimePeriodUnit();return this.timeUnitItems().find(e=>e.id===t)||null});cancelTimeUnit=_e(()=>{let t=this.cancelTimePeriodUnit();return this.timeUnitItems().find(e=>e.id===t)||null});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadKnownIssuers(),this.refreshStoredIssuers(),this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.trustlineCurrency.currencies$.subscribe(t=>{this.currencies.set(t),t.length>0&&!this.currencyFieldDropDownValue()&&(this.currencyFieldDropDownValue.set(t[0]),this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address))}),this.trustlineCurrency.issuers$.subscribe(t=>{this.issuers.set(t)}),this.trustlineCurrency.selectedIssuer$.subscribe(t=>{this.issuerFields.set(t)}),this.trustlineCurrency.balance$.subscribe(t=>{this.currencyBalanceField.set(t)}),this.currencyFieldDropDownValue.set("XRP")}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.clearFields(!0),this.selectWallet(i))}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.clearFields(!0),yield this.getFirewallDetails(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}onCurrencySelected(t){let e=t?.id||"XRP";this.currencyFieldDropDownValue.set(e),this.onCurrencyChange(e)}onDestinationSelected(t){this.selectedDestinationAddress.set(t?.id||"")}onEscrowSelected(t){if(!t?.id){this.escrowSequenceNumberField.set(""),this.escrowOwnerField.set("");return}let e=this.expiredOrFulfilledEscrows().find(i=>i.EscrowSequence?.toString()===t.id);e&&(this.escrowSequenceNumberField.set(e.EscrowSequence),this.escrowOwnerField.set(e.Sender))}onIssuerSelected(t){let e=t?.id||"";this.trustlineCurrency.selectIssuer(e),this.onIssuerChange(e)}onSelectPermissionedDomain(t){this.selectedFirewall=t,this.tempNameFirewallId=t??""}toggleExistingFirewalls(){this.existingFirewallsCollapsed=!this.existingFirewallsCollapsed}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),Object.keys(this.knownTrustLinesIssuers).length>0&&this.issuerFields()===""&&this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue.set(Object.keys(this.knownTrustLinesIssuers)[0]),this.clearFields(!0),this.hasWallets()&&(yield this.getFirewallDetails(!0))})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getFirewallDetails(t=!1){return z(this,null,function*(){yield this.withPerf("getFirewallDetails",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.refreshUiState(i,r,o)}catch(e){console.error("Error in getFirewallDetails:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createFirewall(){return z(this,null,function*(){yield this.withPerf("createFirewall",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),l=this.selectedDestinationAddress()||this.typedDestination(),c=this.utilsService.addTime(this.finishTimePeriodField(),this.finishTimePeriodField()),d=this.utilsService.addTime(this.cancelTimePeriodField(),this.cancelTimePeriodField());return console.log(`timePeriodUnit: ${this.finishTimePeriodUnit()} timePeriodStartUnit: ${this.cancelTimePeriodUnit()}`),console.log(`timePeriod: ${this.utilsService.convertXRPLTime(c)} timePeriodStart: ${this.utilsService.convertXRPLTime(d)}`),console.log("Total Out: ",this.totalOutField),console.log("Amount: ",this.amountField),console.log("Backup account: ",this.backupAccountField),console.log("Wallet pubkey: ",e.publicKey),this.txUiService.setError("Poopy");let h={TransactionType:"MPTokenIssuanceCreate",Account:e.classicAddress,MaximumAmount:"0",Fee:s,Flags:0,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,h,e,i);let f=yield this.txExecutor.createFirewall(h,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!f.success)return this.txUiService.setError(`${f.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow finished successfully!":"Finished escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in createFirewall:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}modifyFirewall(){return z(this,null,function*(){yield this.withPerf("modifyFirewall",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),l=this.selectedDestinationAddress()||this.typedDestination(),c={TransactionType:"MPTokenAuthorize",Account:e.address,MPTokenIssuanceID:"",LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME,Fee:s};yield this.setTxOptionalFields(t,c,e,i);let d=yield this.txExecutor.modifyFirewall(c,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!d.success)return this.txUiService.setError(`${d.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow finished successfully!":"Finished escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in modifyFirewall:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}authorizeFirewall(t){return z(this,null,function*(){yield this.withPerf("authorizeFirewall",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:r,accountObjects:o},s,a,l]=yield Promise.all([this.xrplCache.getAccountData(i.classicAddress,!1),this.xrplService.getAccountLines(e,i.classicAddress,"validated",""),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(e)]),c=this.selectedDestinationAddress()||this.typedDestination(),d={TransactionType:"Payment",Account:i.classicAddress,Amount:{mpt_issuance_id:"",value:this.amountField()},Destination:this.destinationField(),LastLedgerSequence:l+Re.LAST_LEDGER_ADD_TIME,Fee:a};yield this.setTxOptionalFields(e,d,i,r);let u=yield this.txExecutor.authorizeFlag(d,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow finished successfully!":"Finished escrow successfully!",yield this.refreshAfterTx(e,i,null,!1)}catch(e){console.error("Error in authorizeFirewall:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}deleteFirewall(){return z(this,null,function*(){yield this.withPerf("deleteFirewall",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s,a]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplService.getAccountLines(t,e.classicAddress,"validated",""),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),l=this.selectedDestinationAddress()||this.typedDestination(),c={TransactionType:"MPTokenIssuanceDestroy",Account:e.classicAddress,MPTokenIssuanceID:"",LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME,Fee:s};yield this.setTxOptionalFields(t,c,e,i);let d=yield this.txExecutor.deleteFirewall(c,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!d.success)return this.txUiService.setError(`${d.error}`);this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.onCurrencyChange(this.currencyFieldDropDownValue()),this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated Escrow finished successfully!":"Finished escrow successfully!",yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in createTimeBasedEscrow:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getExistingNfts(t,e){let r=(t.result.account_objects??[]).filter(o=>o.LedgerEntryType==="NFTokenPage").flatMap(o=>o.NFTokens.map(s=>{let a=s.NFToken;return{LedgerEntryType:o.LedgerEntryType,PageIndex:o.index,NFTokenID:a.NFTokenID,Flags:a.Flags??0,Issuer:a.Issuer,Taxon:a.NFTaxon,TransferFee:a.TransferFee,Sequence:a.Sequence,URI_hex:a.URI,URI:a.URI?this.utilsService.decodeHex(a.URI):null}}));return this.existingFirewalls=r,this.utilsService.logObjects("existingFirewalls",this.existingFirewalls),this.existingFirewalls}get availableCurrencies(){return["XRP",...Object.keys(this.knownTrustLinesIssuers()).filter(t=>t&&t!=="XRP"&&t!=="MPT").sort((t,e)=>t.localeCompare(e))]}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),this.txUiService.destinationTagField()&&this.utilsService.setDestinationTag(e,this.txUiService.destinationTagField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&zz.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}addWhitelistAddress(){if(this.newWhitelistAddress&&this.newWhitelistAddress.trim()){let t=this.storageService.getKnownWhitelistAddress("knownWhitelistAddress")||{};if(t[this.newWhitelistAddress]){this.txUiService.setError(`Whitelist Address ${this.newWhitelistAddress} already exists`);return}if(!zz.isValidAddress(this.newWhitelistAddress.trim())){this.txUiService.setError("Invalid issuer address");return}t[this.newWhitelistAddress]=this.newWhitelistAddress,this.storageService.setKnownWhitelistAddress("knownWhitelistAddress",t),this.txUiService.setSuccess(`Added ${this.newWhitelistAddress} to Whitelist accounts`),this.newWhitelistAddress=""}else this.txUiService.setError("Currency code and issuer address are required");this.txUiService.spinner.set(!1)}removeWhitelistAddress(){if(this.whitelistAddressToRemove){let t=this.storageService.getKnownWhitelistAddress("knownWhitelistAddress")||{};t&&t[this.whitelistAddressToRemove]&&(delete t[this.whitelistAddressToRemove],this.storageService.setKnownWhitelistAddress("knownWhitelistAddress",t)),this.txUiService.setSuccess(`Removed ${this.whitelistAddressToRemove} from the Whitelist accounts`),this.whitelistAddressToRemove=""}else this.txUiService.setError("Select a whitelist address to remove");this.txUiService.spinner.set(!1)}comineWhiteListDestiationAddresses(t,e){let i=Object.entries(t).filter(([o,s])=>s&&s.trim()!=="").reduce((o,[s,a])=>(o[a]=a,o),{});return le(le({},i),e)}copyFirewallID(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("MPT Issuance ID copied!")})}updateInfoMessage(){if(!this.currentWallet()?.address){this.txUiService.setInfoMessage("No wallet is currently selected.");return}let t=this.currentWallet.name||"selected",e=this.existingFirewalls.length,i;e===0?i=`<code>${t}</code> wallet has no firewalls.`:i=`<code>${t}</code> wallet has ${e} ${e===1?"firewall":"firewalls"}.`,this.txUiService.setInfoMessage(i)}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}loadKnownIssuers(){let t=this.storageService.getKnownIssuers("knownIssuers");t&&(this.knownTrustLinesIssuers.set(t),this.updateCurrencies())}clearFields(t=!0){t&&(this.useMultiSign=!1,this.isRegularKeyAddress=!1,this.isMptFlagModeEnabled=!1,this.amountField.set(""),this.destinationTagField.set("")),this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.isMemoEnabled=!1,this.memoField="",this.useMultiSign=!1,this.selectedTicket="",this.selectedSingleTicket="",this.isTicket=!1}onCurrencyChange(t){this.trustlineCurrency.selectCurrency(t,this.currentWallet().address),this.currencyChangeTrigger.update(e=>e+1)}onIssuerChange(t){this.trustlineCurrency.selectIssuer(t)}refreshStoredIssuers(){let t=[],e=this.knownTrustLinesIssuers();for(let i in e)if(i!=="XRP")for(let r of e[i])t.push({name:i,address:r});t.sort((i,r)=>i.name.localeCompare(r.name)),this.storedIssuers.set(t)}updateCurrencies(){let i=Object.keys(this.knownTrustLinesIssuers).filter(r=>r!=="XRP").sort((r,o)=>r.localeCompare(o));this.currencies.set(i),i.length>0?(!this.currencyFieldDropDownValue()||!i.includes(this.currencyFieldDropDownValue()))&&(this.currencyFieldDropDownValue.set(i[0]),Promise.resolve().then(()=>{this.currencyFieldDropDownValue()&&this.onCurrencyChange(this.currencyFieldDropDownValue())})):(this.currencyFieldDropDownValue.set(""),this.issuerFields.set(""),this.issuers.set([]))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-firewall"]],viewQuery:function(e,i){if(e&1&&(Et(Hdt,5),Et(Wdt,5),Et(zdt,5),Et(qdt,5)),e&2){let r;_t(r=bt())&&(i.paymentJson=r.first),_t(r=bt())&&(i.txResultJson=r.first),_t(r=bt())&&(i.dropdownTemplate=r.first),_t(r=bt())&&(i.dropdownOrigin=r.first)}},features:[Lt],decls:95,vars:43,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroPlusCircle","size","20",1,"text-red-600"],["name","heroArrowPath","size","20",1,"text-red-600"],["name","shield-ellipsis","size","20",1,"text-red-600",2,"padding-top","5px"],["name","shield-ellipsis","size","23",2,"padding-top","5px"],["name","heroTrash","size","20",1,"text-red-600"],[1,"info-panel"],[1,"warning-panel"],[1,"outstanding-checks-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[1,"form-group"],["type","text","id","finishTimePeriodField","placeholder","Enter time","name","finishTimePeriodField",3,"ngModelChange","ngModel"],["placeholder","Select unit...","emptyMessage","No units",3,"valueChange","items","value","showShortAddress"],["type","text","id","cancelTimePeriodField","placeholder","Enter time","name","cancelTimePeriodField",3,"ngModelChange","ngModel"],["tooltip-data","",1,"tooltip"],["for","totalOutField"],["type","text","id","totalOutField","size","41","placeholder","","name","totalOutField",3,"ngModelChange","ngModel"],["tooltip-data","Number of MPT to send.",1,"tooltip"],["for","amountField"],["type","text","id","amountField","size","41","name","amountField",3,"ngModelChange","ngModel"],["for","backupAccountField"],["type","text","id","backupAccountField","name","backupAccountField",3,"ngModelChange","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"valueChange","items","value"],["type","text","name","destinationTagField",3,"ngModelChange","ngModel"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-orange",3,"disabled"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroPlusCircle","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"white-button-submenu"],["name","heroArrowPath","size","20","color","green",1,"text-red-600"],[1,"orange-button-submenu"],["name","shield-ellipsis","size","27",1,"text-red-600",2,"padding-top","5px"],[1,"green-button-submenu"],["name","shield-ban"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],["name","heroInformationCircle","size","20",1,"text-blue-600"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"panel-header",2,"cursor","pointer","user-select","none",3,"click"],[1,"panel-title",2,"margin","0","font-size","0.8rem","display","flex","align-items","center","gap","0.5rem"],["name","heroQueueList","size","20",1,"text-red-600"],[1,"checks-list-container"],[1,"checks-list"],[1,"check-card"],[1,"check-extras"],[1,"badge","badge-expire"],[1,"badge","badge-expire-not-set"],[1,"line-break"],[1,"badge","badge-tag"],[1,"badge","badge-tag-not-set"],[1,"button-group"],["title","Copy MPT Issuance ID","type","button",1,"icon-btn","copy-check-id",3,"click"],["name","heroClipboardDocumentList","size","20",1,"text-red-600"],["target","_blank","rel","noopener noreferrer","title","View on XRPL Win",1,"icon-btn",2,"padding-left","20px",3,"click","href"],["name","heroArrowTopRightOnSquare","size","20",1,"text-blue-600"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-orange",3,"click","disabled"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6)(7,"div",7)(8,"button",8),X("click",function(){return U(r),j(i.setTab("create"))}),ee(9,"ng-icon",9),w(10," Create Firewall "),g(),m(11,"button",8),X("click",function(){return U(r),j(i.setTab("modify"))}),ee(12,"ng-icon",10),w(13," Modify Firewall Settings "),g(),m(14,"button",8),X("click",function(){return U(r),j(i.setTab("authorize"))}),ee(15,"lucide-angular",11),w(16," Authorize Accounts "),g(),m(17,"button",8),X("click",function(){return U(r),j(i.setTab("unauthorize"))}),ee(18,"lucide-icon",12),w(19," Unauthorize Accounts "),g(),m(20,"button",8),X("click",function(){return U(r),j(i.setTab("delete"))}),ee(21,"ng-icon",13),w(22," Delete Firewall "),g()(),Q(23,Gdt,9,0,"div"),Q(24,Xdt,9,0,"div"),Q(25,Ydt,9,0,"div"),Q(26,Zdt,9,0,"div"),Q(27,Qdt,9,0,"div"),Q(28,Jdt,3,1,"div",14),Q(29,eut,3,1,"div",15),Q(30,cut,7,8,"div",16),m(31,"form",17,0)(33,"div",18)(34,"div")(35,"div")(36,"div",19)(37,"div",20)(38,"label"),w(39,"Finish Time"),g(),m(40,"input",21),Ne("ngModelChange",function(s){return U(r),Ve(i.finishTimePeriodField,s)||(i.finishTimePeriodField=s),j(s)}),g()(),m(41,"div",20)(42,"label"),w(43,"Finish Time Unit"),g(),m(44,"app-select-search-dropdown",22),X("valueChange",function(s){return U(r),j(i.finishTimePeriodUnit.set((s==null?null:s.id)||"seconds"))}),g()()(),m(45,"div",19)(46,"div",20)(47,"label"),w(48,"Cancel Time"),g(),m(49,"input",23),Ne("ngModelChange",function(s){return U(r),Ve(i.cancelTimePeriodField,s)||(i.cancelTimePeriodField=s),j(s)}),g()(),m(50,"div",20)(51,"label"),w(52,"Cancel Time Unit"),g(),m(53,"app-select-search-dropdown",22),X("valueChange",function(s){return U(r),j(i.cancelTimePeriodUnit.set((s==null?null:s.id)||"seconds"))}),g()()(),m(54,"div",19)(55,"div",20)(56,"span",24)(57,"label",25),w(58,"Total Out"),g()(),m(59,"input",26),Ne("ngModelChange",function(s){return U(r),Ve(i.totalOutField,s)||(i.totalOutField=s),j(s)}),g()(),m(60,"div",20)(61,"span",27)(62,"label",28),w(63,"Amount"),g()(),m(64,"input",29),Ne("ngModelChange",function(s){return U(r),Ve(i.amountField,s)||(i.amountField=s),j(s)}),g()()(),m(65,"div",19)(66,"div",20)(67,"label"),w(68,"Whitelist Addresses"),g()(),m(69,"div",20)(70,"label",30),w(71,"Backup Account"),g(),m(72,"input",31),Ne("ngModelChange",function(s){return U(r),Ve(i.backupAccountField,s)||(i.backupAccountField=s),j(s)}),g()()(),m(73,"div",19)(74,"div",20)(75,"label",32),w(76,"Destination"),g(),m(77,"app-select-search-dropdown",33),X("valueChange",function(s){return U(r),j(i.selectedDestinationAddress.set((s==null?null:s.id)||""))}),g()(),m(78,"div",20)(79,"label"),w(80,"Destination Tag"),g(),m(81,"input",34),Ne("ngModelChange",function(s){return U(r),Ve(i.destinationTagField,s)||(i.destinationTagField=s),j(s)}),g()()()()(),ee(82,"app-transaction-options",35),m(83,"div",36),Q(84,dut,3,4,"button",37)(85,uut,3,4,"button",37)(86,hut,3,4,"button",38)(87,fut,3,4,"button",39)(88,put,3,4,"button",40),m(89,"button",41),ct(90,"async"),X("click",function(){return U(r),j(i.clearFields(!0))}),w(91,"Clear Fields"),g()(),m(92,"div",42)(93,"input",43),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(94,"app-transaction-preview"),g()()()()()()()}e&2&&(_(8),Ue("active",i.activeTab()==="create"),_(3),Ue("active",i.activeTab()==="modify"),_(3),Ue("active",i.activeTab()==="authorize"),_(3),Ue("active",i.activeTab()==="unauthorize"),_(3),Ue("active",i.activeTab()==="delete"),_(3),J(i.activeTab()==="create"?23:-1),_(),J(i.activeTab()==="modify"?24:-1),_(),J(i.activeTab()==="authorize"?25:-1),_(),J(i.activeTab()==="unauthorize"?26:-1),_(),J(i.activeTab()==="delete"?27:-1),_(),J(i.txUiService.infoMessage?28:-1),_(),J(i.txUiService.warningMessage?29:-1),_(),J(i.existingFirewalls.length>0?30:-1),_(4),oe("@tabTransition",i.activeTab()),_(6),Oe("ngModel",i.finishTimePeriodField),_(4),oe("items",i.timeUnitItems())("value",i.finishTimeUnit())("showShortAddress",!1),_(5),Oe("ngModel",i.cancelTimePeriodField),_(4),oe("items",i.timeUnitItems())("value",i.cancelTimeUnit())("showShortAddress",!1),_(6),Oe("ngModel",i.totalOutField),_(5),Oe("ngModel",i.amountField),_(8),Oe("ngModel",i.backupAccountField),_(5),oe("items",i.destinationItems())("value",i.selectedDestinationItem()),_(4),Oe("ngModel",i.destinationTagField),_(),oe("showWhenTab",Ei(42,$dt))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="create"?84:i.activeTab()==="modify"?85:i.activeTab()==="authorize"?86:i.activeTab()==="unauthorize"?87:i.activeTab()==="delete"?88:-1),_(5),oe("disabled",!mt(90,40,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime))},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,xr,Mn,si,oi,mi,ki,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var dh=_i(Ki());var mut=()=>["buy","sell","buyOffer","sellOffer","cancelOffer"],gut=(n,t)=>t.index;function yut(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",26),ee(3,"ng-icon",27),g(),m(4,"div")(5,"h2",28),w(6,"Sell NFT"),g(),m(7,"p",29),w(8,"Sell an NFT on the market."),g()()()())}function vut(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",30),ee(3,"ng-icon",27),g(),m(4,"div")(5,"h2",28),w(6,"Buy NFT"),g(),m(7,"p",29),w(8,"Buy an NFT from the market."),g()()()())}function _ut(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",26),ee(3,"ng-icon",27),g(),m(4,"div")(5,"h2",28),w(6,"Sell NFT Offer"),g(),m(7,"p",29),w(8,"Create an offer to sell an NFT."),g()()()())}function but(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",30),ee(3,"ng-icon",27),g(),m(4,"div")(5,"h2",28),w(6,"Buy NFT Offer"),g(),m(7,"p",29),w(8,"Create an offer to buy an NFT."),g()()()())}function wut(n,t){n&1&&(m(0,"div")(1,"div",25)(2,"div",31),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",28),w(6,"Cancel NFT Offer"),g(),m(7,"p",29),w(8,"Cancel and existing NFT offer."),g()()()())}function Sut(n,t){n&1&&w(0," has no active NFT offers. ")}function Cut(n,t){if(n&1&&(w(0," has "),m(1,"strong"),w(2),g(),w(3)),n&2){let e=E();_(2),Ee(e.offerCount),_(),je(" active NFT offer",e.offerCount===1?"":"s",". ")}}function xut(n,t){if(n&1&&(m(0,"div",37),ee(1,"span",39),w(2," on XRPL Win"),g()),n&2){let e=E();_(),oe("innerHTML",e.links,pn)}}function kut(n,t){n&1&&w(0," Buy Offers ")}function Mut(n,t){n&1&&w(0," Sell Offers ")}function Tut(n,t){n&1&&w(0," Your Buy Offers ")}function Eut(n,t){n&1&&w(0," Your Sell Offers ")}function Aut(n,t){n&1&&w(0," Cancellable Offers ")}function Dut(n,t){n&1&&w(0," \u2192 ")}function Iut(n,t){n&1&&w(0," \u2190 ")}function Fut(n,t){if(n&1&&(m(0,"div"),w(1,"Expires: "),m(2,"code"),w(3),g()()),n&2){let e=E().$implicit,i=E(4);_(3),Ee(i.formatXrplTimestamp(e.expiration))}}function Put(n,t){if(n&1){let e=ge();m(0,"li",45)(1,"app-tooltip-link",46)(2,"div",47)(3,"strong"),w(4),g(),Q(5,Dut,1,0)(6,Iut,1,0),w(7),g(),m(8,"div",48)(9,"div"),w(10,"Offer ID: "),m(11,"code"),w(12),g()(),m(13,"div"),w(14,"NFT ID: "),m(15,"code"),w(16),g()(),Q(17,Fut,4,1,"div"),g()(),m(18,"button",49),X("click",function(r){let o=U(e).$implicit;return E(4).copyAndToast(o.index,"Offer ID"),j(r.stopPropagation())}),lt(),m(19,"svg",50),ee(20,"rect",51)(21,"path",52),g()()()}if(n&2){let e=t.$implicit,i=E(4);_(),oe("href",i.txUiService.explorerUrl()+"nft/"+e.nftId),_(3),Ee(e.amount),_(),J(e.isSell?5:6),_(2),je(" ",e.counterparty.slice(0,7)+"..."+e.counterparty.slice(-7)," "),_(5),ei("",e.index.slice(0,12),"...",e.index.slice(-10)),_(4),ei("",e.nftId.slice(0,12),"...",e.nftId.slice(-10)),_(),J(e.expiration?17:-1)}}function Lut(n,t){if(n&1&&(m(0,"ul",44),yn(1,Put,22,9,"li",45,gut),g()),n&2){let e=E(2);_(),vn(e.offersToShow)}}function Rut(n,t){if(n&1){let e=ge();m(0,"div",40),X("click",function(){U(e);let r=E(2);return j(r.toggleInfoPanel())}),m(1,"div",41)(2,"span"),Q(3,kut,1,0)(4,Mut,1,0)(5,Tut,1,0)(6,Eut,1,0)(7,Aut,1,0),w(8),g(),lt(),m(9,"svg",42),ee(10,"path",43),g()(),Q(11,Lut,3,0,"ul",44),g()}if(n&2){let e,i=E(),r=E();_(3),J((e=i.activeTab)==="buy"?3:e==="sell"?4:e==="buyOffer"?5:e==="sellOffer"?6:e==="cancelOffer"?7:-1),_(5),je(" (",i.offerCount,") "),_(),In("transform",r.infoPanelExpanded()?"rotate(180deg)":"rotate(0)"),_(2),J(r.infoPanelExpanded()?11:-1)}}function Out(n,t){if(n&1&&(m(0,"div",12)(1,"div",33)(2,"div",34)(3,"div",35),ee(4,"ng-icon",36),m(5,"code"),w(6),g(),Q(7,Sut,1,0)(8,Cut,4,2),Q(9,xut,3,1,"div",37),g(),Q(10,Rut,12,5,"div",38),g()()()),n&2){let e=t;_(6),Ee(e.walletName),_(),J(e.offerCount===0?7:8),_(2),J(e.links?9:-1),_(),J(e.offerCount>0?10:-1)}}function Nut(n,t){if(n&1&&(m(0,"div",13),ee(1,"ng-icon",53)(2,"div",54),g()),n&2){let e=E();_(2),oe("innerHTML",e.txUiService.safeWarning,pn)}}function But(n,t){n&1&&(m(0,"span",69),w(1,"XRP"),g())}function Vut(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function Uut(n,t){if(n&1&&(m(0,"div",68),Q(1,But,2,0,"span",69)(2,Vut,2,1,"span"),m(3,"span",70),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function jut(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",71),w(3,"Issuer"),g(),m(4,"p",58),w(5,"The XRPL account that issues and controls this currency."),g(),m(6,"app-select-search-dropdown",72),X("valueChange",function(r){U(e);let o=E(2);return j(o.onIssuerSelected(r))}),g()(),m(7,"div",56)(8,"label",73),w(9,"Currency Balance"),g(),m(10,"p",58),w(11,"Total currency balance held by this account."),g(),m(12,"input",74),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.currencyBalanceField,r)||(o.currencyBalanceField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),oe("items",e.issuerItems())("value",e.selectedIssuerItem()),_(6),Oe("ngModel",e.currencyBalanceField)}}function Hut(n,t){if(n&1){let e=ge();m(0,"label"),w(1,"Select NFT"),g(),m(2,"p",58),w(3,"Select an existing NFT to cancel."),g(),m(4,"app-select-search-dropdown",75),X("valueChange",function(r){U(e);let o=E(2);return j(o.onNftSelected(r))}),g()}if(n&2){let e=E(2);_(4),oe("items",e.nftItems())("value",e.selectedNftItem())}}function Wut(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",57),w(3,"Currency Code"),g(),m(4,"p",58),w(5,"Issued asset combined with the issuer to uniquely define a token."),g(),m(6,"app-select-search-dropdown",59),X("valueChange",function(r){U(e);let o=E();return j(o.onCurrencySelected(r))}),nn(7,Uut,5,2,"ng-template",null,1,vr),g()(),m(9,"div",56)(10,"label"),w(11,"Amount"),g(),m(12,"p",58),w(13,"Amount of currency to use in the transaction."),g(),m(14,"input",60),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()(),Q(15,jut,13,3,"div",55),m(16,"div",55)(17,"div",56)(18,"label",61),w(19,"NFT Offer Expiration"),g(),m(20,"p",58),w(21,"NFT offer expiration when the offer will expire."),g(),m(22,"div",62)(23,"input",63),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.expirationTimeField,r)||(o.expirationTimeField=r),j(r)}),X("focus",function(){U(e);let r=E();return j(r.populateDefaultDateTime())}),g(),m(24,"div",64)(25,"button",65),X("click",function(){U(e);let r=E();return j(r.setNftExpirationToNow())}),w(26,"Now"),g(),m(27,"button",65),X("click",function(){U(e);let r=E();return j(r.addNftToExpiration(10))}),w(28,"+10s"),g(),m(29,"button",65),X("click",function(){U(e);let r=E();return j(r.addNftToExpiration(30))}),w(30,"+30s"),g(),m(31,"button",65),X("click",function(){U(e);let r=E();return j(r.addNftToExpiration(60))}),w(32,"+1min"),g(),m(33,"button",65),X("click",function(){U(e);let r=E();return j(r.addNftToExpiration(300))}),w(34,"+5min"),g()()()(),ee(35,"div",56),g(),m(36,"div",55)(37,"div",56),Q(38,Hut,5,2),g()(),m(39,"div",55)(40,"div",66)(41,"label"),w(42,"NFT Token Id"),g(),m(43,"p",58),w(44,"NFT Token ID generated when the NFT was created."),g(),m(45,"input",67),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.nftIdField,r)||(o.nftIdField=r),j(r)}),g()()()}if(n&2){let e=E();_(6),oe("items",e.currencyItems())("value",e.selectedCurrencyItem())("showShortAddress",!1),_(8),Oe("ngModel",e.amountField),oe("placeholder",e.currencyFieldDropDownValue()==="XRP"?"Amount in XRP":"Currency amount"),_(),J(e.currencyFieldDropDownValue()!=="XRP"?15:-1),_(8),Oe("ngModel",e.expirationTimeField),_(15),J(e.existingNfts().length>0?38:-1),_(7),Oe("ngModel",e.nftIdField)}}function zut(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label"),w(3,"NFT Offer Index"),g(),m(4,"p",58),w(5,"NFT Offer Index generated when the offer was created."),g(),m(6,"input",76),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.nftIndexField,r)||(o.nftIndexField=r),j(r)}),g()()(),m(7,"div",55)(8,"div",77)(9,"label"),w(10,"NFT Token Id"),g(),m(11,"p",58),w(12,"NFT Token ID generated when the NFT was created."),g(),m(13,"input",67),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.nftIdField,r)||(o.nftIdField=r),j(r)}),g()()()}if(n&2){let e=E();_(6),Oe("ngModel",e.nftIndexField),_(7),Oe("ngModel",e.nftIdField)}}function qut(n,t){n&1&&(m(0,"span",69),w(1,"XRP"),g())}function $ut(n,t){if(n&1&&(m(0,"span"),w(1),g()),n&2){let e=E().$implicit;_(),Ee(e.display)}}function Kut(n,t){if(n&1&&(m(0,"div",68),Q(1,qut,2,0,"span",69)(2,$ut,2,1,"span"),m(3,"span",70),w(4),g()()),n&2){let e=t.$implicit;_(),J(e.id==="XRP"?1:2),_(3),je("(",e.secondary,")")}}function Gut(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",71),w(3,"Issuer"),g(),m(4,"p",58),w(5,"The XRPL account that issues and controls this currency."),g(),m(6,"app-select-search-dropdown",72),X("valueChange",function(r){U(e);let o=E(2);return j(o.onIssuerSelected(r))}),g()(),m(7,"div",56)(8,"label",73),w(9,"Currency Balance"),g(),m(10,"p",58),w(11,"Total currency balance held by this account."),g(),m(12,"input",74),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.currencyBalanceField,r)||(o.currencyBalanceField=r),j(r)}),g()()()}if(n&2){let e=E(2);_(6),oe("items",e.issuerItems())("value",e.selectedIssuerItem()),_(6),Oe("ngModel",e.currencyBalanceField)}}function Xut(n,t){if(n&1){let e=ge();m(0,"div",56)(1,"label"),w(2,"Owner"),g(),m(3,"p",58),w(4,"Owner of the NFT."),g(),m(5,"input",67),Ne("ngModelChange",function(r){U(e);let o=E(2);return Ve(o.nftIdField,r)||(o.nftIdField=r),j(r)}),g()()}if(n&2){let e=E(2);_(5),Oe("ngModel",e.nftIdField)}}function Yut(n,t){n&1&&ee(0,"div",56)}function Zut(n,t){if(n&1){let e=ge();m(0,"label"),w(1,"Select NFT"),g(),m(2,"p",58),w(3,"Select an existing NFT to sell."),g(),m(4,"app-select-search-dropdown",75),X("valueChange",function(r){U(e);let o=E(3);return j(o.onNftSelected(r))}),g()}if(n&2){let e=E(3);_(4),oe("items",e.nftItems())("value",e.selectedNftItem())}}function Qut(n,t){if(n&1&&(m(0,"div",55)(1,"div",56),Q(2,Zut,5,2),g()()),n&2){let e=E(2);_(2),J(e.existingNfts().length>0?2:-1)}}function Jut(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label",57),w(3,"Currency Code"),g(),m(4,"p",58),w(5,"Issued asset combined with the issuer to uniquely define a token."),g(),m(6,"app-select-search-dropdown",59),X("valueChange",function(r){U(e);let o=E();return j(o.onCurrencySelected(r))}),nn(7,Kut,5,2,"ng-template",null,1,vr),g()(),m(9,"div",56)(10,"label"),w(11,"Amount"),g(),m(12,"p",58),w(13,"Amount of currency to use in the transaction."),g(),m(14,"input",60),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.amountField,r)||(o.amountField=r),j(r)}),g()()(),Q(15,Gut,13,3,"div",55),m(16,"div",55)(17,"div",56)(18,"label",61),w(19,"NFT Offer Expiration"),g(),m(20,"p",58),w(21,"NFT offer expiration when the offer will expire."),g(),m(22,"div",62)(23,"input",63),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.expirationTimeField,r)||(o.expirationTimeField=r),j(r)}),X("focus",function(){U(e);let r=E();return j(r.populateDefaultDateTime())}),g(),m(24,"div",64)(25,"button",65),X("click",function(){U(e);let r=E();return j(r.setNftExpirationToNow())}),w(26,"Now"),g(),m(27,"button",65),X("click",function(){U(e);let r=E();return j(r.addNftToExpiration(10))}),w(28,"+10s"),g(),m(29,"button",65),X("click",function(){U(e);let r=E();return j(r.addNftToExpiration(30))}),w(30,"+30s"),g(),m(31,"button",65),X("click",function(){U(e);let r=E();return j(r.addNftToExpiration(60))}),w(32,"+1min"),g(),m(33,"button",65),X("click",function(){U(e);let r=E();return j(r.addNftToExpiration(300))}),w(34,"+5min"),g()()()(),Q(35,Xut,6,1,"div",56)(36,Yut,1,0,"div",56),g(),Q(37,Qut,3,1,"div",55),m(38,"div",55)(39,"div",66)(40,"label"),w(41,"NFT Token Id"),g(),m(42,"p",58),w(43,"NFT Token ID generated when the NFT was created."),g(),m(44,"input",67),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.nftIdField,r)||(o.nftIdField=r),j(r)}),g()()()}if(n&2){let e=E();_(6),oe("items",e.currencyItems())("value",e.selectedCurrencyItem())("showShortAddress",!1),_(8),Oe("ngModel",e.amountField),oe("placeholder",e.currencyFieldDropDownValue()==="XRP"?"Amount in XRP":"Currency amount"),_(),J(e.currencyFieldDropDownValue()!=="XRP"?15:-1),_(8),Oe("ngModel",e.expirationTimeField),_(12),J(e.activeTab()==="buyOffer"?35:36),_(2),J(e.activeTab()==="sellOffer"?37:-1),_(7),Oe("ngModel",e.nftIdField)}}function eht(n,t){if(n&1){let e=ge();m(0,"div",55)(1,"div",56)(2,"label"),w(3,"Select Offer to Cancel"),g(),m(4,"p",58),w(5,"Select an existing NFT to cancel."),g(),m(6,"app-select-search-dropdown",78),X("valueChange",function(r){U(e);let o=E();return j(o.onOfferSelected(r))}),g()()(),m(7,"div",55)(8,"div",66)(9,"label"),w(10,"NFT Offer Index"),g(),m(11,"p",58),w(12,"NFT Offer Index generated when the offer was created."),g(),m(13,"input",79),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.nftIndexField,r)||(o.nftIndexField=r),j(r)}),g()()()}if(n&2){let e=E();_(6),oe("items",e.offerItems())("value",e.selectedOfferItem()),_(7),Oe("ngModel",e.nftIndexField)}}function tht(n,t){if(n&1){let e=ge();m(0,"button",80),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.buyNFT())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Buy NFT")}}function nht(n,t){if(n&1){let e=ge();m(0,"button",81),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.sellNFT())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Sell NFT")}}function iht(n,t){if(n&1){let e=ge();m(0,"button",80),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.createOffer("Buy"))}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Buy NFT Offer")}}function rht(n,t){if(n&1){let e=ge();m(0,"button",81),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.createOffer("Sell"))}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Sell NFT Offer")}}function oht(n,t){if(n&1){let e=ge();m(0,"button",82),ct(1,"async"),X("click",function(){U(e);let r=E();return j(r.cancelOffer())}),w(2),g()}if(n&2){let e=E();oe("disabled",e.txUiService.spinner()||!mt(1,2,e.walletManagerService.hasWallets$)),_(2),Ee(e.txUiService.spinner()?"Processing...":"Cancel NFT Offer")}}var GD=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);trustlineCurrency=N(so);customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");checkIdSearchQuery=P("");activeTab=P("sell");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");sourceTagField=P("");invoiceIdField=P("");currencyFieldDropDownValue=P("XRP");checkExpirationTime=P("seconds");issuerFields=P("");expirationTimeField=P("");ticketSequence=P("");checkIdField=P("");outstandingChecks=P("");mptIssuanceIdField=P("");isMptEnabled=P(!1);selectedWalletIndex=P(0);isTicketEnabled=P(!1);existingMpts=P([]);existingIOUs=P([]);existingMptsCollapsed=P(!0);outstandingIOUCollapsed=P(!0);metaDataField=P("");tokenCountField=P("");assetScaleField=P("");isdepositAuthAddress=P(!1);isMptFlagModeEnabled=P(!1);transferFeeField=P("");totalFlagsValue=P(0);totalFlagsHex=P("0x0");currencyBalanceField=P("0");gatewayBalance=P("0");knownTrustLinesIssuers=P({XRP:[]});issuerToRemove=P("");currencies=P([]);userAddedCurrencyFieldDropDownValue=P([]);userAddedissuerFields=P("");allKnownIssuers=P([]);storedIssuers=P([]);selectedIssuer=P("");newCurrency=P("");newIssuer=P("");tokenToRemove=P("");showTrustlineOptions=P(!1);issuers=P([]);lastCurrency=P("");lastIssuer=P("");trustlineFlags=le({},Re.TRUSTLINE.FLAGS);trustlineFlagList=Re.TRUSTLINE.FLAG_LIST;flagMap=Re.TRUSTLINE.FLAG_MAP;ledgerFlagMap=Re.TRUSTLINE.LEDGER_FLAG_MAP;showManageTokens=P(!1);encryptionType=P("");accountTrustlines=P([]);isUpdateMetaData=P(!1);isUpdateNFTMetaData=P(!1);isBatchModeEnabled=P(!1);isNftFlagModeEnabled=P(!1);isSubmitSignedTransactionEnabled=P(!1);isDestinationEnabled=P(!1);signedTransactionField=P("");isAuthorizedNFTokenMinter=P(!1);isNFTokenMinterEnabled=P(!1);nfTokenMinterAddress=P("");tickSize=P("");isMessageKey=P(!1);destinationFields=P("");newDestination=P("");tokenBalance=P("0");currencyIssuers=[];domain=P("");memo=P("");taxonField=P("");burnableNft=P(void 0);onlyXrpNft=P(void 0);transferableNft=P(void 0);mutableNft=P(void 0);batchMode="allOrNothing";minterAddressField=P("");issuerAddressField=P("");expirationField=P("");expirationTimeUnit=P("seconds");initialURIField=P("https://ipfs.io/ipfs/bafybeigjro2d2tc43bgv7e4sxqg7f5jga7kjizbk7nnmmyhmq35dtz6deq");nftIdField=P("");nftIndexField=P("");nftCountField=P("");nftFlagValues={burnableNft:1,onlyXrpNft:2,trustLine:4,transferableNft:8,mutableNft:16};nftFlags={burnableNft:!1,onlyXrpNft:!1,trustLine:!1,transferableNft:!1,mutableNft:!1};flags={asfRequireDest:!1,asfRequireAuth:!1,asfDisallowXRP:!1,asfDisableMaster:!1,asfNoFreeze:!1,asfGlobalFreeze:!1,asfDefaultRipple:!1,asfDepositAuth:!1,asfAllowTrustLineClawback:!1,asfDisallowIncomingNFTokenOffer:!1,asfDisallowIncomingCheck:!1,asfDisallowIncomingPayChan:!1,asfDisallowIncomingTrustline:!1,asfAllowTrustLineLocking:!1};existingNfts=P([]);existingNftsCollapsed=P(!0);nftOwnerAddress=P("");currencyChangeTrigger=P(0);selectedNftOfferIndex=P(null);expirationDateTimeUnit=P("seconds");uriField=P("");existingSellOffers=P([]);existingBuyOffers=P([]);existingSellOffersCollapsed=P(!0);selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});currencyItems=_e(()=>{let t=this.currencyFieldDropDownValue();return this.availableCurrencies.map(e=>({id:e,display:e==="XRP"?"XRP":e,secondary:e==="XRP"?"Native currency":(()=>{let i=this.trustlineCurrency.getIssuersForCurrency(e).length;return i===0?"No issuers":`${i} issuer${i!==1?"s":""}`})(),isCurrentAccount:!1,isCurrentCode:e===t,isCurrentToken:!1}))});selectedCurrencyItem=_e(()=>{let t=this.currencyFieldDropDownValue();return t&&this.currencyItems().find(e=>e.id===t)||null});onCurrencySelected(t){let e=t?.id||"XRP";this.currencyFieldDropDownValue.set(e),this.onCurrencyChange(e)}destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});hasWallets=_e(()=>this.wallets().length>0);infoData=_e(()=>{let t=this.currentWallet();if(!t.address)return null;let e=t.name||t.address.slice(0,10)+"...",i=this.txUiService.explorerUrl(),r=t.address,o=[];switch(this.activeTab()){case"buy":case"buyOffer":o=this.existingBuyOffers();break;case"sell":case"sellOffer":case"cancelOffer":o=this.existingSellOffers();break}let s=o.length,a=s>0?`<a href="${i}account/${r}/nft-offers" target="_blank" rel="noopener noreferrer" class="xrpl-win-link">View Offers</a>`:"",l=this.infoPanelExpanded()?o.map(c=>({index:c.OfferIndex||c.nft_offer_index,nftId:c.NFTokenID||c.nftId,amount:typeof c.Amount=="string"?dh.dropsToXrp(c.Amount)+" XRP":c.Amount,counterparty:c.Owner||c.owner||c.Destination||c.buyer,isSell:!!(c.Flags&1),expiration:c.Expiration})):[];return{walletName:e,activeTab:this.activeTab(),offerCount:s,offersToShow:l,links:a}});offerItems=_e(()=>this.existingSellOffers().map(t=>({id:t.OfferIndex,display:`${dh.dropsToXrp(t.Amount)} XRP offer`,secondary:t.NFTokenID.slice(0,12)+"..."+t.NFTokenID.slice(-10),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1})));selectedOfferItem=_e(()=>{let t=this.nftIndexField();return t&&this.offerItems().find(e=>e.id===t)||null});onOfferSelected(t){this.nftIndexField.set(t?.id||"")}issuerItems=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return this.issuers().map((e,i)=>({id:e.address,display:e.name||`Issuer ${i+1}`,secondary:e.address.slice(0,7)+"..."+e.address.slice(-7),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:e.address===t}))});selectedIssuerAddress=_e(()=>this.trustlineCurrency.getSelectedIssuer());selectedIssuerItem=_e(()=>{let t=this.trustlineCurrency.getSelectedIssuer();return t&&this.issuerItems().find(e=>e.id===t)||null});onIssuerSelected(t){let e=t?.id||"";this.trustlineCurrency.selectIssuer(e),this.onIssuerChange(e)}nftItems=_e(()=>this.existingNfts().map(t=>({id:t.NFTokenID,display:t.URI?`NFT \u2022 ${t.URI}`:"NFT \u2022 No URI",secondary:t.NFTokenID.slice(0,12)+"..."+t.NFTokenID.slice(-10),isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:!1})));selectedNftItem=_e(()=>{let t=this.nftIdField();return t&&this.nftItems().find(e=>e.id===t)||null});onNftSelected(t){this.nftIdField.set(t?.id||"")}timeUnitItems=_e(()=>[{id:"seconds",display:"Seconds"},{id:"minutes",display:"Minutes"},{id:"hours",display:"Hours"},{id:"days",display:"Days"}]);selectedTimeUnitItem=_e(()=>{let t=this.expirationTimeUnit();return this.timeUnitItems().find(e=>e.id===t)||null});constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadKnownIssuers(),this.refreshStoredIssuers(),this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.currencyFieldDropDownValue.set("XRP"),this.trustlineCurrency.currencies$.subscribe(t=>{this.currencies.set(t),t.length>0&&!this.currencyFieldDropDownValue()&&(this.currencyFieldDropDownValue.set(t[0]),this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address))}),this.trustlineCurrency.issuers$.subscribe(t=>{this.issuers.set(t)}),this.trustlineCurrency.selectedIssuer$.subscribe(t=>{this.issuerFields.set(t)}),this.trustlineCurrency.balance$.subscribe(t=>{this.currencyBalanceField.set(t)})}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&(this.clearFields(!0),this.selectWallet(i),this.populateDefaultDateTime())}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.clearFields(!0),this.populateDefaultDateTime(),yield this.getNFTOffers(!0))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.existingNfts.set([]),this.nftIdField.set(""),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByAddress(t,e){return e.address}trackByWalletAddress(t,e){return e.address}onSelectNftOfferIndex(t){this.selectedNftOfferIndex.set(t),this.nftIndexField.set(t??"")}trackByOfferIndex(t,e){return e.OfferIndex}toggleExistingNfts(){this.existingNftsCollapsed.set(!this.existingNftsCollapsed)}toggleExistingSellOffers(){this.existingSellOffersCollapsed.set(!this.existingSellOffersCollapsed)}toggleInfoPanel(){this.infoPanelExpanded.update(t=>!t)}onWalletSelected(t){this.selectWallet(t)}copyAndToast(t,e="Content"){this.copyUtilService.copyAndToast(t,e)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),Object.keys(this.knownTrustLinesIssuers).length>0&&this.issuerFields()===""&&this.currencyFieldDropDownValue.set(Object.keys(this.knownTrustLinesIssuers)[0]),this.clearFields(!0),this.hasWallets()&&(this.populateDefaultDateTime(),yield this.getNFTOffers(!0))})}toggleFlags(){}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getNFTOffers(t=!1){return z(this,null,function*(){yield this.withPerf("getNFTOffers",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o,nftInfo:s,sellOffersResponse:a,buyOffersResponse:l}=yield this.getNftOfferDetails(e,i);this.utilsService.logAccountInfoObjects(r,o),this.utilsService.logObjects("nftInfo",s),this.utilsService.logObjects("sellOffersResponse",a),this.utilsService.logObjects("buyOffersResponse",l),this.getExistingSellOffers(o),this.getExistingBuyOffers(o),this.getExistingNfts(o,this.currentWallet().address),this.currencyFieldDropDownValue()!=="XRP"&&this.currencyFieldDropDownValue()!=="MPT"&&this.issuerFields()!==""&&this.trustlineCurrency.selectCurrency(this.currencyFieldDropDownValue(),this.currentWallet().address),this.refreshUiState(i,r,o)}catch(e){console.error("Error in getNFT:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}buyNFT(){return z(this,null,function*(){console.log("Entering buyNFT"),yield this.withPerf("mintNFT",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s,a]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getNFTSellOffers(t,this.nftIdField()),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]);this.utilsService.logAccountInfoObjects(i,null),this.utilsService.logObjects("sellOffersResponse",r),this.utilsService.logLedgerObjects(o,s,a);let l=r.result?.offers||[];if(!Array.isArray(l)||l.length===0){this.txUiService.setError(`No sell offers found for this NFT ${this.nftIdField}`);return}let c=l.filter(p=>{let y=!p.Destination,v=p.Destination===e.classicAddress;return(y||v)&&p.amount});if(c.length===0){this.txUiService.setError("No matching sell offers found for this wallet.");return}c.sort((p,y)=>parseInt(p.amount)-parseInt(y.amount));let d=l.filter(p=>p.amount&&p.flags===1);console.log("Matching Offers:",d);let u=c[0];if(console.log("First sell offer:",c[0]),u&&u.Destination){this.txUiService.setError(`This NFT is only purchasable by: ${u.Destination}`);return}if(u&&u.owner===e.classicAddress){this.txUiService.setError("You already own this NFT.");return}let h={TransactionType:"NFTokenAcceptOffer",Account:e.classicAddress,NFTokenSellOffer:u.nft_offer_index,Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,h,e,i,"buy");let f=yield this.txExecutor.createBuyNft(h,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!f.success)return this.txUiService.setError(`${f.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated NFT buy offer created successfully!":"Created NFT buy offer successfully!",this.onCurrencyChange(this.currencyFieldDropDownValue()),yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in buyNFT:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}sellNFT(){return z(this,null,function*(){yield this.withPerf("sellNFT",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]);this.utilsService.logAccountInfoObjects(i,null),this.utilsService.logLedgerObjects(r,o,s);let a={TransactionType:"NFTokenCreateOffer",Account:e.classicAddress,NFTokenID:this.nftIdField(),Amount:dh.xrpToDrops(this.amountField()),Flags:1,Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};if(this.currencyFieldDropDownValue()!=="XRP"){let c={currency:this.currencyFieldDropDownValue().length>3?this.utilsService.encodeCurrencyCode(this.currencyFieldDropDownValue()):this.currencyFieldDropDownValue(),issuer:this.selectedIssuer(),value:this.amountField()};a.Amount=c}else a.Amount=dh.xrpToDrops(this.amountField());yield this.setTxOptionalFields(t,a,e,i,"sell");let l=yield this.txExecutor.createSellNft(a,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!l.success)return this.txUiService.setError(`${l.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated NFT sell offer created successfully!":"Created NFT sell offer successfully!",this.onCurrencyChange(this.currencyFieldDropDownValue()),yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in sellNFT:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}createOffer(t){return z(this,null,function*(){yield this.withPerf("createOffer",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),[r,o,s,a,l]=yield Promise.all([this.xrplService.getAccountInfo(e,i.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(e),this.xrplService.getLastLedgerIndex(e),this.xrplService.getXrplServerInfo(e,"current",""),this.xrplService.getNFTSellOffers(e,this.nftIdField())]);if(this.utilsService.logAccountInfoObjects(r,null),this.utilsService.logLedgerObjects(o,s,a),!l||l.result?.offers?.length<=0)return this.txUiService.setError(`No NFT offers for ${this.nftIdField}`);let c={TransactionType:"NFTokenCreateOffer",Account:i.classicAddress,NFTokenID:this.nftIdField(),Amount:"",Fee:o,LastLedgerSequence:s+Re.LAST_LEDGER_ADD_TIME};if(this.currencyFieldDropDownValue()!=="XRP"){let u={currency:this.currencyFieldDropDownValue().length>3?this.utilsService.encodeCurrencyCode(this.currencyFieldDropDownValue()):this.currencyFieldDropDownValue(),issuer:this.selectedIssuer(),value:this.amountField()};c.Amount=u}else c.Amount=dh.xrpToDrops(this.amountField());yield this.setTxOptionalFields(e,c,i,r,"sell"),t==="Buy"?(c.Flags=0,c.Owner=l.result.offers[0].owner):c.Flags=1;let d=yield this.txExecutor.createNftOffer(c,i,e,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!d.success)return this.txUiService.setError(`${d.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated NFT offer created successfully!":"Created NFT offer successfully!",this.onCurrencyChange(this.currencyFieldDropDownValue()),yield this.refreshAfterTx(e,i,null,!0)}catch(e){console.error("Error in createOffer:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}cancelOffer(){return z(this,null,function*(){yield this.withPerf("cancelOffer",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t),this.xrplService.getXrplServerInfo(t,"current","")]),a={TransactionType:"NFTokenCancelOffer",Account:e.classicAddress,NFTokenOffers:[this.nftIndexField()],Fee:r,LastLedgerSequence:o+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,a,e,i,"cancelSellOffer");let l=yield this.txExecutor.cancelNftOffer(a,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!l.success)return this.txUiService.setError(`${l.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated NFT offer cancel successfully!":"Cancelled NFT offer successfully!",this.onCurrencyChange(this.currencyFieldDropDownValue()),yield this.refreshAfterTx(t,e,null,!1)}catch(t){console.error("Error in cancelOffer:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getExistingNfts(t,e){let r=(t?.result?.account_objects??[]).filter(o=>o.LedgerEntryType==="NFTokenPage").flatMap(o=>o.NFTokens.map(s=>{let a=s.NFToken;return{LedgerEntryType:o.LedgerEntryType,PageIndex:o.index,NFTokenID:a.NFTokenID,Flags:a.Flags??0,Issuer:a.Issuer,Taxon:a.NFTaxon,TransferFee:a.TransferFee,Sequence:a.Sequence,URI_hex:a.URI,URI:a.URI?this.utilsService.decodeHex(a.URI):null}}));return this.existingNfts.set(r),this.utilsService.logObjects("existingNfts",this.existingNfts()),this.existingNfts()}getExistingSellOffers(t){let e=(t.result.account_objects??[]).filter(i=>i.LedgerEntryType==="NFTokenOffer"&&(i.Flags&1)===1).map(i=>({OfferIndex:i.index,NFTokenID:i.NFTokenID,Amount:i.Amount,Owner:i.Owner,Destination:i.Destination,Expiration:i.Expiration,Flags:i.Flags}));this.existingSellOffers.set(e),this.utilsService.logObjects("existingSellOffers (from account_objects)",e)}getExistingBuyOffers(t){let e=(t.result.account_objects??[]).filter(i=>i.LedgerEntryType==="NFTokenOffer"&&(i.Flags&1)===0).map(i=>({OfferIndex:i.index,NFTokenID:i.NFTokenID,Amount:i.Amount,Owner:i.Owner,Destination:i.Destination,Expiration:i.Expiration,Flags:i.Flags}));this.existingBuyOffers.set(e),this.utilsService.logObjects("existingBuyOffers (from account_objects)",e)}getExistingSellOffers1(t){if(t.length>0){let e=t.flatMap(i=>i.offers.map(r=>({LedgerEntryType:"NFTokenOffer",NFTokenID:i.nftId,OfferIndex:r.nft_offer_index,AmountDrops:r.amount,AmountXRP:dh.dropsToXrp(r.amount),Flags:r.flags??0,Owner:r.owner,IsSellOffer:(r.flags&1)===1})));this.existingSellOffers.set(e)}return this.utilsService.logObjects("existingSellOffers",this.existingSellOffers()),this.existingSellOffers()}getExistingBuyOffers1(t){if(t&&t?.result?.offers?.length>0){let i=(t.result.account_objects??[]).filter(r=>r.LedgerEntryType==="NFTokenPage").flatMap(r=>r.NFTokens.map(o=>{let s=o.NFToken;return{LedgerEntryType:r.LedgerEntryType,PageIndex:r.index,NFTokenID:s.NFTokenID,Flags:s.Flags??0,Issuer:s.Issuer,Taxon:s.NFTaxon,TransferFee:s.TransferFee,Sequence:s.Sequence,URI_hex:s.URI,URI:s.URI?this.utilsService.decodeHex(s.URI):null}}));this.existingBuyOffers.set(i)}return this.utilsService.logObjects("existingBuyOffers",this.existingBuyOffers()),this.existingBuyOffers()}decodeNftFlags(t){let e=[];for(let[i,r]of Object.entries(Re.NFT_FLAGS))(t&r)!==0&&e.push(i);return e.join(", ")}decodeOfferFlags(t){let e=[];for(let[i,r]of Object.entries(Re.NFT_FLAGS))(t&r)!==0&&e.push(i);return e}getNftOfferDetails(t,e){return z(this,null,function*(){if(this.nftIdField){let[i,r,o,s,a,l]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.getAccountNFTs(t,e.classicAddress,"validated","").catch(()=>({result:{account_nfts:[]}})),this.xrplService.getNFTSellOffers(t,this.nftIdField()).catch(()=>({result:{offers:[]}})),this.xrplService.getNFTBuyOffers(t,this.nftIdField()).catch(()=>({result:{offers:[]}})),this.xrplService.getAccountNFTOffers(t,e.classicAddress,"validated","nft_offer").catch(()=>({result:{account_nfts:[]}}))]),c=this.filterSellOffers(l,e),d=this.filterBuyOffers(l,e);return{accountInfo:i,accountObjects:r,nftInfo:o,sellOffersResponse:s,buyOffersResponse:a,s:c,b:d}}else{let[i,r,o,s]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getAccountObjects(t,e.classicAddress,"validated",""),this.xrplService.getAccountNFTs(t,e.classicAddress,"validated","").catch(()=>({result:{account_nfts:[]}})),this.xrplService.getAccountNFTOffers(t,e.classicAddress,"validated","nft_offer").catch(()=>({result:{account_nfts:[]}}))]),a=o.result.account_nfts;if(a.length===0)return{accountInfo:i,accountObjects:r,nftInfo:o,sellOffersResponse:[],buyOffersResponse:[]};let l=this.createBuyOfferPromises(a,t),c=this.createSellOfferPromises(a,t),[d,u]=yield Promise.all([Promise.all(l),Promise.all(c)]),h=this.createBuyOffersResponse(a,d),f=this.createSellOffersResponse(a,u);this.utilsService.logObjects("buyOffersResponse",h),this.utilsService.logObjects("sellOffersResponse",f);let p=this.filterSellOffers(s,e),y=this.filterBuyOffers(s,e);this.utilsService.logObjects("s",p),this.utilsService.logObjects("b",y);let v=this.mergeOffers(h,y),b=this.mergeOffers(f,p);return this.utilsService.logObjects("mergedBuyOffersResponse",v),this.utilsService.logObjects("mergedSellOffersResponse",b),{accountInfo:i,accountObjects:r,nftInfo:o,sellOffersResponse:b,buyOffersResponse:v}}})}createSellOffersResponse(t,e){return t.map((i,r)=>({nftId:i.NFTokenID,offers:e[r]?.result?.offers||[]}))}createBuyOffersResponse(t,e){return t.map((i,r)=>({nftId:i.NFTokenID,offers:e[r]?.result?.offers||[]}))}createSellOfferPromises(t,e){return t.map(i=>this.xrplService.getNFTSellOffers(e,i.NFTokenID).catch(r=>(console.warn(`Sell offers error for ${i.NFTokenID}:`,r.message),{result:{offers:[]}})))}createBuyOfferPromises(t,e){return t.map(i=>this.xrplService.getNFTBuyOffers(e,i.NFTokenID).catch(r=>(console.warn(`Buy offers error for ${i.NFTokenID}:`,r.message),{result:{offers:[]}})))}filterBuyOffers(t,e){return t.result.account_objects.filter(o=>o.LedgerEntryType==="NFTokenOffer"&&o.Flags===0).map(o=>({nftOfferIndex:o.index,nftId:o.NFTokenID,amount:o.Amount,owner:o.Owner,buyer:e.classicAddress,expiration:o.Expiration??null}))}filterSellOffers(t,e){return t.result.account_objects.filter(o=>o.LedgerEntryType==="NFTokenOffer"&&o.Flags===1).map(o=>({nftOfferIndex:o.index,nftId:o.NFTokenID,amount:o.Amount,seller:e.classicAddress,buyer:o.Destination??null,expiration:o.Expiration??null}))}mergeOffers(t,e){let i=new Set(t.flatMap(o=>o.offers.map(s=>s.nftOfferIndex||s.nft_offer_index))),r=e.filter(o=>!i.has(o.nftOfferIndex));return r.length>0?[...t,{nftId:"account_level",offers:r}]:t}mergeByNftId(t,e,i){let r=[...t];for(let o of e){let s=o.nftId,a=r.find(c=>c.nftId===s);a||(a={nftId:s,offers:[]},r.push(a)),new Set(a.offers.map(c=>c.nftOfferIndex||c.index)).has(o.nftOfferIndex)||a.offers.push(o)}return r}setBatchFlags(){let t=0;return this.batchMode==="allOrNothing"&&(t|=Re.BATCH_FLAGS.ALL_OR_NOTHING),this.batchMode==="onlyOne"&&(t|=Re.BATCH_FLAGS.ONLY_ONE),this.batchMode==="untilFailure"&&(t|=Re.BATCH_FLAGS.UNTIL_FAILURE),this.batchMode==="independent"&&(t|=Re.BATCH_FLAGS.INDEPENDENT),console.log("Batch flags "+t),t}get availableCurrencies(){return["XRP",...Object.keys(this.knownTrustLinesIssuers()).filter(t=>t&&t!=="XRP"&&t!=="MPT").sort((t,e)=>t.localeCompare(e))]}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r,o){return z(this,null,function*(){if(this.txUiService.isTicket()){let a=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(a){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(a))))throw new Error(`Ticket ${a} not found`);this.utilsService.setTicketSequence(e,a,!0)}}let s=()=>{if(this.expirationField()){let a=this.utilsService.addTime(this.expirationField(),"hours");return this.utilsService.setExpiration(e,a),!0}return!1};return this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),["sell"].includes(o)&&s(),e})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s,nftInfo:a,sellOffersResponse:l,buyOffersResponse:c}=yield this.getNftOfferDetails(t,e);this.getExistingSellOffers(s),this.getExistingBuyOffers(s),this.getExistingNfts(s,e.classicAddress),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&this.addNewDestinationFromUser(i||""),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t),this.ensureDefaultNotSelected()}ensureDefaultNotSelected(){let t=this.currentWallet().address;if(t&&this.destinations().length>0&&(!this.destinations()||this.destinationField()===t)){let e=this.destinations().find(i=>i.address!==t);this.selectedDestinationAddress.set(e?e.address:this.destinations()[0].address)}}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}setBatchMode(t){this.batchMode=t,this.toggleFlags()}onBurnToggle(t,e){let i=(this.nftIdField()||"").split(",").map(r=>r.trim()).filter(Boolean);if(t)i.includes(e)||i.push(e);else{let r=i.indexOf(e);r!==-1&&i.splice(r,1)}this.nftIdField.set(i.join(", "))}updateNftTextField(t,e){let i=(this.nftIdField()||"").split(",").map(r=>r.trim()).filter(Boolean);e&&!i.includes(t)?i.push(t):e||(i=i.filter(r=>r!==t)),this.nftIdField.set(i.join(", "))}addNewDestinationFromUser(t){t&&dh.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}addToDateTimeField(t,e,i){let r=t();if(!r){let a=new Date;r=this.formatDateTimeLocal(a)}let o=new Date(r);o.setSeconds(o.getSeconds()+i);let s=this.formatDateTimeLocal(o);e.set(s)}formatDateTimeLocal(t){let e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${e}-${i}-${r}T${o}:${s}:${a}`}addNftToExpiration(t){this.addToDateTimeField(this.expirationTimeField,this.expirationTimeField,t)}setNftExpirationToNow(){let t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");this.expirationTimeField.set(`${e}-${i}-${r}T${o}:${s}:${a}`)}populateDefaultDateTime(){this.setNftExpirationToNow()}copyNFTokenID(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("MPT Issuance ID copied!")})}copyCheckId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Check ID copied!")})}copyIOUIssuanceAddress(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("IOU Token Issuer copied!")})}formatXrplTimestamp(t){return this.utilsService.convertXRPLTime(t)}clearFields(t){t&&(this.isBatchModeEnabled.set(!1),this.isNftFlagModeEnabled.set(!1)),this.amountField.set(""),this.minterAddressField.set(""),this.expirationField.set(""),this.nftIdField.set(""),this.nftIndexField.set(""),this.nftCountField.set(""),this.ticketSequence.set("")}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}loadKnownIssuers(){let t=this.storageService.getKnownIssuers("knownIssuers");t&&(this.knownTrustLinesIssuers.set(t),this.updateCurrencies())}onCurrencyChange(t){this.trustlineCurrency.selectCurrency(t,this.currentWallet().address),this.currencyChangeTrigger.update(e=>e+1)}onIssuerChange(t){this.trustlineCurrency.selectIssuer(t)}refreshStoredIssuers(){let t=[],e=this.knownTrustLinesIssuers();for(let i in e)if(i!=="XRP")for(let r of e[i])t.push({name:i,address:r});t.sort((i,r)=>i.name.localeCompare(r.name)),this.storedIssuers.set(t)}updateCurrencies(){let i=Object.keys(this.knownTrustLinesIssuers).filter(r=>r!=="XRP").sort((r,o)=>r.localeCompare(o));this.currencies.set(i),i.length>0?(!this.currencyFieldDropDownValue()||!i.includes(this.currencyFieldDropDownValue()))&&(this.currencyFieldDropDownValue.set(i[0]),Promise.resolve().then(()=>{this.currencyFieldDropDownValue()&&this.onCurrencyChange(this.currencyFieldDropDownValue())})):(this.currencyFieldDropDownValue.set(""),this.issuerFields.set(""),this.issuers.set([]))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-nft-offers"]],features:[Lt],decls:52,vars:32,consts:[["theForm","ngForm"],["itemTemplate",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn",3,"click"],["name","heroCurrencyDollar","size","20",1,"text-red-600"],["name","heroArrowPath","size","20",1,"text-red-600"],[1,"info-message-wrapper"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-green",3,"disabled"],["type","button",1,"btn-primary-blue",3,"disabled"],["type","button",1,"btn-primary-red",3,"disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"blue-button-submenu"],["name","heroCurrencyDollar","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"green-button-submenu"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],[1,"info-panel"],[1,"info-text"],[2,"margin-bottom","16px","line-height","1.5","cursor","default"],["name","heroInformationCircle","size","20",1,"text-blue-600",2,"vertical-align","-4px","margin-right","8px"],[2,"margin-top","8px","font-size","0.9em"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s"],[3,"innerHTML"],[1,"credential-info-panel",2,"background","#f0f9ff","border","1px solid #bae6fd","border-radius","10px","padding","14px 16px","cursor","pointer","user-select","none","box-shadow","0 2px 8px rgba(0, 0, 0, 0.05)","transition","all 0.2s",3,"click"],[1,"info-header",2,"display","flex","justify-content","space-between","align-items","center","font-weight","600","color","#0369a1"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","#0369a1","stroke-width","3",2,"transition","transform 0.25s ease"],["d","M6 9l6 6 6-6"],[2,"margin","12px 0 0","padding-left","22px","font-size","0.9em","line-height","1.7"],[2,"margin-bottom","16px","display","flex","align-items","flex-start","gap","12px"],["tooltipText","View NFT on XRPL Explorer",3,"href"],[2,"font-weight","500","margin-bottom","4px"],[2,"color","#555","font-size","0.88em","display","flex","flex-direction","column","gap","4px"],["title","Copy Offer ID",1,"copy-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["name","heroExclamationTriangle","size","20",1,"text-yellow-600"],[1,"warning-text",3,"innerHTML"],[1,"form-row"],[1,"form-group"],["for","currencyCodeCash"],[1,"form-hint"],["placeholder","Search currency code...","emptyMessage","No currencies available",3,"valueChange","items","value","showShortAddress"],["type","text","id","amountField","name","amountField",3,"ngModelChange","ngModel","placeholder"],["for","credentialExpiration"],[1,"expiration-input-group"],["type","datetime-local","name","expirationDate","step","1",1,"expiration-input",3,"ngModelChange","focus","ngModel"],[1,"expiration-buttons"],["type","button",1,"btn-small","btn-primary-blue",3,"click"],[1,"form-group",2,"padding-top","0.8em"],["type","text","name","nftIdField","placeholder","",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2"],[1,"text-yellow-500","font-bold"],[1,"text-xs","text-gray-500"],["for","issuer"],["placeholder","Search or select issuer...","emptyMessage","No issuers found",3,"valueChange","items","value"],["for","currencyBalanceField"],["type","text","id","currencyBalanceField","readonly","","name","currencyBalanceField",3,"ngModelChange","ngModel"],["placeholder","Search by ID or URI...","emptyMessage","No NFTs found",3,"valueChange","items","value"],["type","text","id","nftIndexField","name","nftIndexField",3,"ngModelChange","ngModel","placeholder"],[1,"form-group",2,"padding-top","0.4em"],["placeholder","Search by amount, NFT ID, or offer ID...","emptyMessage","No cancellable offers",3,"valueChange","items","value"],["type","text","name","nftIndexField","placeholder","",3,"ngModelChange","ngModel"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-primary-red",3,"click","disabled"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",2),ee(1,"app-navbar"),m(2,"main",3)(3,"div",4)(4,"div",5)(5,"app-wallet-panel",6),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",7)(7,"div",8)(8,"button",9),X("click",function(){return U(r),j(i.setTab("sell"))}),ee(9,"ng-icon",10),w(10," Sell NFT "),g(),m(11,"button",9),X("click",function(){return U(r),j(i.setTab("buy"))}),ee(12,"ng-icon",10),w(13," Buy NFT "),g(),m(14,"button",9),X("click",function(){return U(r),j(i.setTab("sellOffer"))}),ee(15,"ng-icon",10),w(16," Sell NFT Offer "),g(),m(17,"button",9),X("click",function(){return U(r),j(i.setTab("buyOffer"))}),ee(18,"ng-icon",10),w(19," Buy NFT Offer "),g(),m(20,"button",9),X("click",function(){return U(r),j(i.setTab("cancelOffer"))}),ee(21,"ng-icon",11),w(22," Cancel Offer "),g()(),Q(23,yut,9,0,"div"),Q(24,vut,9,0,"div"),Q(25,_ut,9,0,"div"),Q(26,but,9,0,"div"),Q(27,wut,9,0,"div"),Q(28,Out,11,4,"div",12),Q(29,Nut,3,1,"div",13),m(30,"form",14,0)(32,"div")(33,"div",15)(34,"div",16),Q(35,Wut,46,9),Q(36,zut,14,2),Q(37,Jut,45,10),Q(38,eht,14,3),g()(),ee(39,"app-transaction-options",17),m(40,"div",18),Q(41,tht,3,4,"button",19)(42,nht,3,4,"button",20)(43,iht,3,4,"button",19)(44,rht,3,4,"button",20)(45,oht,3,4,"button",21),m(46,"button",22),ct(47,"async"),X("click",function(){return U(r),j(i.clearFields(!0))}),w(48,"Clear Fields"),g()()()(),m(49,"div",23)(50,"input",24),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(51,"app-transaction-preview"),g()()()()()}if(e&2){let r;_(8),Ue("active",i.activeTab()==="sell"),_(3),Ue("active",i.activeTab()==="buy"),_(3),Ue("active",i.activeTab()==="sellOffer"),_(3),Ue("active",i.activeTab()==="buyOffer"),_(3),Ue("active",i.activeTab()==="cancelOffer"),_(3),J(i.activeTab()==="sell"?23:-1),_(),J(i.activeTab()==="buy"?24:-1),_(),J(i.activeTab()==="sellOffer"?25:-1),_(),J(i.activeTab()==="buyOffer"?26:-1),_(),J(i.activeTab()==="cancelOffer"?27:-1),_(),J((r=i.infoData())?28:-1,r),_(),J(i.txUiService.warningMessage?29:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()==="sell"?35:-1),_(),J(i.activeTab()==="buy"?36:-1),_(),J(i.activeTab()==="buyOffer"||i.activeTab()==="sellOffer"?37:-1),_(),J(i.activeTab()==="cancelOffer"?38:-1),_(),oe("showWhenTab",Ei(31,mut))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),J(i.activeTab()==="buy"?41:i.activeTab()==="sell"?42:i.activeTab()==="buyOffer"?43:i.activeTab()==="sellOffer"?44:i.activeTab()==="cancelOffer"?45:-1),_(5),oe("disabled",!mt(47,29,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime)}},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki,$r,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var sht=new $e("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let n=N(tn);return()=>wa(n)}});function aht(n){let t=N(tn);return()=>wa(t)}var lht={provide:sht,deps:[],useFactory:aht};var Lge=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=zt({type:n});static \u0275inj=Vt({providers:[lht],imports:[Mn,Qv,Gi,Yl,Qv,Gi]})}return n})();var ka=_i(Ki());var cg=_i(Ki());var XD=class n{constructor(t,e){this.xrplService=t;this.utilsService=e}createBatchpRequestText(i){return z(this,arguments,function*({client:t,wallet:e}){let[r,o]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.getLastLedgerIndex(t)]),s={TransactionType:"Batch",Account:e.classicAddress,Flags:65536,RawTransactions:[{RawTransaction:{TransactionType:"Payment",Flags:1073741824,Account:e.classicAddress,Destination:"rskBKJYGVpTDNfTWV9qmM8smPJnNXEkSYH",Amount:"0.00001",Sequence:r.result.account_data.Sequence+1,Fee:"0",SigningPubKey:""}},{RawTransaction:{TransactionType:"Payment",Flags:1073741824,Account:e.classicAddress,Destination:"r9KUJAJUbLpVeVd8zs78tbHnNroW38vbAq",Amount:"0.00001",Sequence:r.result.account_data.Sequence+2,Fee:"0",SigningPubKey:""}}],Sequence:r.result.account_data.Sequence,Fee:"40",SigningPubKey:"",TxnSignature:"",Memos:[{Memo:{MemoData:"",MemoType:"text/plain"}},{Memo:{MemoData:"",MemoType:"text/plain"}}]};return JSON.stringify(s,null,2)})}buildTransactionText(t){return z(this,null,function*(){let{client:e,wallet:i,selectedTransaction:r,isMemoEnable:o,isTicketEnabled:s,ticketSequence:a}=t;if(!r||!this.builders[r])throw new Error(`Unsupported transaction type: ${r}`);let{accountInfo:l,currentLedger:c,fee:d}=yield this.baseTx(e,i),u=this.builders[r]({wallet:i,accountInfo:l,currentLedger:c,fee:d,selectedTransaction:r});return yield this.applyTicket(u,e,i,s,a),this.applyMemo(u,o),JSON.stringify(u,null,2)})}builders={sendXrp:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"Payment",Account:t.classicAddress,Destination:"rBz1NF3RcLyCk1YwiWNzAhrMngQkXE1tTP",Amount:cg.xrpToDrops("0.000001"),Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),setTrustline:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"TrustSet",Account:t.classicAddress,LimitAmount:{currency:"CTZ",issuer:"rLBknJdCzFGV15Vyyewd3U8jQmDR3abRJ4",value:"10000000000"},Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),removeTrustline:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"TrustSet",Account:t.classicAddress,LimitAmount:{currency:"CTZ",issuer:"rLBknJdCzFGV15Vyyewd3U8jQmDR3abRJ4",value:"0"},Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),issueCurrency:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"Payment",Account:t.classicAddress,Destination:"rHp1RqKdRSG5cJY5ikZadRA91yE35wTJFf",Amount:{currency:"CTZ",issuer:"rLBknJdCzFGV15Vyyewd3U8jQmDR3abRJ4",value:"100"},Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),clawback:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"Clawback",Account:t.classicAddress,Amount:{currency:"CTZ",issuer:"rLBknJdCzFGV15Vyyewd3U8jQmDR3abRJ4",value:"1"},Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),accountFlagSet:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"AccountSet",Account:t.classicAddress,SetFlag:"0",Fee:r,Flags:0,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),accountFlagClear:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"AccountSet",Account:t.classicAddress,ClearFlag:"0",Fee:r,Flags:0,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),createTimeEscrow:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowCreate",Account:t.classicAddress,Destination:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Amount:"0",Fee:r,FinishAfter:815102293,CancelAfter:815102343,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),finishTimeEscrow:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowFinish",Account:t.classicAddress,Owner:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Fee:r,OfferSequence:"0",LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),createTimeEscrowToken:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowCreate",Account:t.classicAddress,Destination:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Amount:{currency:"CTZ",issuer:"rLBknJdCzFGV15Vyyewd3U8jQmDR3abRJ4",value:"100"},Fee:r,FinishAfter:815102293,CancelAfter:815102343,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),finishTimeEscrowToken:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowFinish",Account:t.classicAddress,Owner:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Fee:r,OfferSequence:"0",LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),cancelEscrow:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowCancel",Account:t.classicAddress,Owner:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Fee:r,OfferSequence:"0",LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),createConditionEscrow:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowCreate",Account:t.classicAddress,Destination:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Amount:"0",Fee:"10",Condition:"A0258020B5C9EDAD034B32EE218F7F31ABC1CD42778D0919D5EBC5AF65F460650764E73F810120",CancelAfter:"815102343",LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),finishConditionEscrow:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowFinish",Account:t.classicAddress,Owner:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Fee:"40",Condition:"A0258020B5C9EDAD034B32EE218F7F31ABC1CD42778D0919D5EBC5AF65F460650764E73F810120",Fulfillment:"A0228020A21657FA950220324BC9060B548BFCBE63ADF26AA5716BDB5AC00116CA7CA097",OfferSequence:"0",LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),createConditionEscrowToken:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowCreate",Account:t.classicAddress,Destination:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Amount:{currency:"CTZ",issuer:"rLBknJdCzFGV15Vyyewd3U8jQmDR3abRJ4",value:"100"},Fee:r,Condition:"A0258020B5C9EDAD034B32EE218F7F31ABC1CD42778D0919D5EBC5AF65F460650764E73F810120",CancelAfter:"815102343",LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),finishConditionEscrowToken:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"EscrowFinish",Account:t.classicAddress,Owner:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",Fee:"40",Condition:"A0258020B5C9EDAD034B32EE218F7F31ABC1CD42778D0919D5EBC5AF65F460650764E73F810120",Fulfillment:"A0228020A21657FA950220324BC9060B548BFCBE63ADF26AA5716BDB5AC00116CA7CA097",OfferSequence:"0",LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),createCheck:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"CheckCreate",Account:t.classicAddress,Destination:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",SendMax:"0",Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),createCheckToken:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"CheckCreate",Account:t.classicAddress,Destination:"rB59o63jhXxHU9RHDMUq2bypc8pW4m5f6s",SendMax:{currency:"CTZ",issuer:"rLBknJdCzFGV15Vyyewd3U8jQmDR3abRJ4",value:"1"},Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),cashCheck:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"CheckCash",Account:t.classicAddress,CheckID:"CheckID",Amount:"0",Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),cashCheckToken:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"CheckCash",Account:t.classicAddress,CheckID:"CheckID",Amount:{currency:"CTZ",issuer:"rLBknJdCzFGV15Vyyewd3U8jQmDR3abRJ4",value:"50"},Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),cancelCheck:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"CheckCancel",Account:t.classicAddress,CheckID:"0",Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),createMPT:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"MPTokenIssuanceCreate",Account:t.classicAddress,MaximumAmount:"100",Fee:r,Flags:"0",LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),authorizeMPT:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"MPTokenAuthorize",Account:t.classicAddress,MPTokenIssuanceID:"0",Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),unauthorizeMPT:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"MPTokenAuthorize",Account:t.classicAddress,MPTokenIssuanceID:"0",Flags:cg.MPTokenAuthorizeFlags.tfMPTUnauthorize,Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),sendMPT:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"Payment",Account:t.classicAddress,Amount:{mpt_issuance_id:"",value:"0"},Destination:"",Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),lockMPT:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"MPTokenIssuanceSet",Account:t.classicAddress,MPTokenIssuanceID:"0",Flags:cg.MPTokenIssuanceSetFlags.tfMPTLock,Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),unlockMPT:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"MPTokenIssuanceSet",Account:t.classicAddress,MPTokenIssuanceID:"0",Flags:cg.MPTokenIssuanceSetFlags.tfMPTUnlock,Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence}),destroyMPT:({wallet:t,accountInfo:e,currentLedger:i,fee:r})=>({TransactionType:"MPTokenIssuanceDestroy",Account:t.classicAddress,MPTokenIssuanceID:"0",Fee:r,LastLedgerSequence:i,Sequence:e.result.account_data.Sequence})};applyTicket(t,e,i,r,o){return z(this,null,function*(){if(r){if(o){if(!(yield this.xrplService.checkTicketExists(e,i.classicAddress,Number(o))))throw new Error(`ERROR: Ticket Sequence ${o} not found for account ${i.classicAddress}`);t.TicketSequence=Number(o)}else t.TicketSequence="TICKET_SEQUENCE";t.Sequence=0}})}applyMemo(t,e){e&&(t.Memos=[{Memo:{MemoData:"",MemoType:"text/plain"}},{Memo:{MemoData:"",MemoType:"text/plain"}}])}baseTx(t,e){return z(this,null,function*(){let[i,r,o]=yield Promise.all([this.xrplService.getAccountInfo(t,e.classicAddress,"validated",""),this.xrplService.calculateTransactionFee(t),this.xrplService.getLastLedgerIndex(t)]);return{accountInfo:i,currentLedger:o,fee:r}})}static \u0275fac=function(e){return new(e||n)(Ye(Sr),Ye(Gt))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})};var cht=["paymentJson"],dht=["txResultJson"],uht=["resultFieldError"],hht=["txJsonPre"],fht=["txJsonCode"],pht=["signedPre"],mht=["signedCode"],ght=()=>["getAccountDetails"],Rge=n=>({success:n});function yht(n,t){n&1&&(m(0,"div",11)(1,"div",37)(2,"div",38),ee(3,"lucide-icon",39),g(),m(4,"div")(5,"h2",40),w(6,"Sign Transactions"),g(),m(7,"p",41),w(8,"Sign and submit transactions."),g()()()())}function vht(n,t){if(n&1&&(m(0,"div",12)(1,"div",42),ee(2,"ng-icon",43)(3,"div",44),g()()),n&2){let e=E();_(3),oe("innerHTML",e.infoData(),pn)}}function _ht(n,t){if(n&1&&(m(0,"div",13),ee(1,"ng-icon",45),m(2,"div",46),w(3),g()()),n&2){let e=E();_(3),Ee(e.safeWarningMessage)}}function bht(n,t){if(n&1){let e=ge();m(0,"div",17)(1,"div",47)(2,"label"),w(3,"Transaction Type"),g(),m(4,"p",48),w(5,"Select a transaction type to sign and submit."),g(),m(6,"app-select-search-dropdown",49),X("valueChange",function(r){U(e);let o=E();return j(o.onTransactionSelected(r))}),g()()()}if(n&2){let e=E();_(6),oe("items",e.transactionTypeItems())("value",e.selectedTransactionItem())("showSecondaryInInput",!1)}}function wht(n,t){if(n&1){let e=ge();m(0,"div",19)(1,"button",50),X("click",function(){U(e);let r=E();return j(r.getTransactionJSON())}),w(2),g(),m(3,"button",50),X("click",function(){U(e);let r=E();return j(r.signedTransaction())}),w(4),g(),m(5,"button",50),X("click",function(){U(e);let r=E();return j(r.submitTransaction())}),w(6),g(),m(7,"button",50),X("click",function(){U(e);let r=E();return j(r.signForMultiSign())}),w(8),g()()}if(n&2){let e=E();_(),oe("disabled",e.buttonLoading().getJson||e.isAnyButtonLoading),_(),Ee(e.buttonLoading().getJson?"Processing...":"Get Transaction JSON"),_(),oe("disabled",e.buttonLoading().signed||e.isAnyButtonLoading),_(),Ee(e.buttonLoading().signed?"Processing...":"Signed Transaction"),_(),oe("disabled",e.buttonLoading().submit||e.isAnyButtonLoading),_(),Ee(e.buttonLoading().submit?"Processing...":"Submit Transaction"),_(),oe("disabled",e.buttonLoading().multiSign||e.isAnyButtonLoading),_(),Ee(e.buttonLoading().multiSign?"Processing...":"Sign for Multi-Sign")}}function Sht(n,t){if(n&1){let e=ge();m(0,"div",36)(1,"div",23)(2,"h3",24),w(3,"Transaction Result"),g(),m(4,"div",25)(5,"button",51),X("click",function(){U(e);let r=E();return j(r.copyUtilService.copyTxResult())}),ee(6,"ng-icon",52),w(7," Copy "),g(),m(8,"button",53),X("click",function(){U(e);let r=E();return j(r.downloadUtilService.downloadTxResult())}),ee(9,"ng-icon",54),w(10," Download "),g()()(),m(11,"pre",55),ee(12,"code",31,4),g()()}}var YD=class n extends li{injector=N(tn);destinationSearch$=new Xe;paymentJson;txResultJson;resultFieldError;txJsonPre;txJsonCode;signedPre;signedCode;destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);xrplTransactions=N(Yu);signTransactionUtilService=N(XD);viewContainerRef=N(Dr);overlay=N(Xu);cdr=N(vi);customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("getAccountDetails");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);amountField=P("");destinationField=P("");destinationTagField=P("");sourceTagField=P("");invoiceIdField=P("");memoField=P("");isMemoEnabled=P(!1);useMultiSign=P(!1);isRegularKeyAddress=P(!1);isTicket=P(!1);selectedSingleTicket=P("");selectedTickets=P([]);multiSelectMode=P(!1);selectedTicket=P("");txJson="";outputField=P("");selectedTransaction=P(null);editedTxJson=P({});multiSignedTxBlob=P("");availableSigners=P([]);requiredQuorum=P(0);selectedQuorum=P(0);flagResults=P("");accountInfo=P(null);highlightTimeout=P("");buttonLoading=P({getJson:!1,signed:!1,submit:!1,multiSign:!1});selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});infoData=_e(()=>null);transactionTypeItems=_e(()=>{let t=this.selectedTransaction();return[{id:"batch",display:"Batch",group:"Basic"},{id:"sendXrp",display:"Send XRP",group:"Basic"},{id:"setTrustline",display:"Set Trustline",group:"Trustline"},{id:"removeTrustline",display:"Remove Trustline",group:"Trustline"},{id:"issueCurrency",display:"Issue Currency",group:"Trustline"},{id:"clawback",display:"Clawback Currency",group:"Trustline"},{id:"accountFlagSet",display:"Account Flag Set",group:"Account Flags"},{id:"accountFlagClear",display:"Account Flag Clear",group:"Account Flags"},{id:"createTimeEscrow",display:"Create Time Escrow",group:"Escrow"},{id:"finishTimeEscrow",display:"Finish Time Escrow",group:"Escrow"},{id:"createConditionEscrow",display:"Create Condition Escrow",group:"Escrow"},{id:"finishConditionEscrow",display:"Finish Condition Escrow",group:"Escrow"},{id:"cancelEscrow",display:"Cancel Escrow",group:"Escrow"},{id:"createTimeEscrowToken",display:"Create Token Time Escrow",group:"Token Escrow"},{id:"finishTimeEscrowToken",display:"Finish Token Time Escrow",group:"Token Escrow"},{id:"createConditionEscrowToken",display:"Create Token Condition Escrow",group:"Token Escrow"},{id:"finishConditionEscrowToken",display:"Finish Token Condition Escrow",group:"Token Escrow"},{id:"createCheck",display:"Check Create",group:"Check"},{id:"cashCheck",display:"Check Cash",group:"Check"},{id:"cancelCheck",display:"Check Cancel",group:"Check"},{id:"createCheckToken",display:"Check Token Create",group:"Token Check"},{id:"cashCheckToken",display:"Check Token Cash",group:"Token Check"},{id:"createPaymentChannel",display:"Create Payment Channel",group:"Payment Channel"},{id:"fundPaymentChannel",display:"Fund Payment Channel",group:"Payment Channel"},{id:"claimPaymentChannel",display:"Claim Payment Channel",group:"Payment Channel"},{id:"closePaymentChannel",display:"Close Payment Channel",group:"Payment Channel"},{id:"createMPT",display:"MPT Create",group:"MPT"},{id:"authorizeMPT",display:"Authorize MPT",group:"MPT"},{id:"unauthorizeMPT",display:"Unauthorize MPT",group:"MPT"},{id:"sendMPT",display:"Send MPT",group:"MPT"},{id:"lockMPT",display:"Lock MPT",group:"MPT"},{id:"unlockMPT",display:"Unlock MPT",group:"MPT"},{id:"destroyMPT",display:"Destroy MPT",group:"MPT"}].map(e=>({id:e.id,display:e.display,group:e.group,secondary:void 0,isCurrentAccount:!1,isCurrentCode:!1,isCurrentToken:e.id===t,showSecondaryInInput:!0}))});selectedTransactionItem=_e(()=>{let t=this.selectedTransaction();return t&&this.transactionTypeItems().find(e=>e.id===t)||null});onTransactionSelected(t){let e=t?.id||"";this.selectedTransaction.set(e),this.onTransactionChange()}hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions(),this.selectedTransaction.set("sendXrp"),this.clearMessages(),this.generateTransactionJson(),this.cdr.detectChanges()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),this.clearInputFields(),yield this.getAccountDetails(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByWalletAddress(t,e){return e.address}onWalletSelected(t){this.selectWallet(t)}ngAfterViewInit(){this.scheduleHighlight()}trackByAddress(t,e){return e.address}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.clearMessages(),this.clearFields(!0)})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}get isAnyButtonLoading(){return Object.values(this.buttonLoading).some(t=>t===!0)}onTransactionChange(){this.txJson="",this.outputField.set(""),this.txUiService.isError=!1,this.txUiService.errorMessage=null,this.clearMessages(),this.generateTransactionJson()}setMemoField(){this.generateTransactionJson()}setTicketField(){this.generateTransactionJson()}getTransactionJSON(){this.buttonLoading.update(t=>Ge(le({},t),{getJson:!0})),this.onTransactionChange(),this.buttonLoading.update(t=>Ge(le({},t),{getJson:!1}))}get currentQuorumSelected(){return this.availableSigners().filter(t=>t.isSelectedSigner).reduce((t,e)=>t+(e.quorum||0),0)}updateSelectedQuorum(){this.selectedQuorum=this.availableSigners().filter(t=>t.isSelectedSigner).reduce((t,e)=>t+(e.quorum||0),0)}getAccountDetails(t=!1){return z(this,null,function*(){yield this.withPerf("getAccountDetails",()=>z(this,null,function*(){if(this.txUiService.clearAllOptionsAndMessages(),!this.currentWallet()?.address||!ka.isValidAddress(this.currentWallet().address)){this.txUiService.setError("Invalid or missing wallet address");return}this.txUiService.clearMessages(),this.txUiService.clearWarning();try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.accountInfo.set(r),this.refreshUiState(i,r,o),this.clearFields(!1),this.getTransactionJSON(),this.cdr.detectChanges()}catch(e){console.error("Error in getAccountDetails:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}generateTransactionJson(){return z(this,null,function*(){this.buttonLoading.update(t=>Ge(le({},t),{getJson:!0})),this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=yield this.signTransactionUtilService.buildTransactionText({client:t,wallet:e,selectedTransaction:this.selectedTransaction(),isTicketEnabled:this.isTicket(),isMemoEnable:this.isMemoEnabled(),ticketSequence:this.selectedSingleTicket()});this.txJson=i,this.scheduleHighlight()}catch(t){if(t.message==="No wallets exist. Create a new wallet before continuing."){this.txUiService.setWarning(t.message),this.txUiService.setError("");return}this.txUiService.setError(t.message)}finally{this.buttonLoading.update(t=>Ge(le({},t),{getJson:!1}))}})}unsignedTransaction(){return z(this,null,function*(){yield this.withPerf("unsignedTransaction",()=>z(this,null,function*(){this.clearMessages(),this.txUiService.updateSpinnerMessage("");try{if(this.txUiService.errorMessage="",!this.txJson.trim())return this.txUiService.setError("Transaction cannot be empty");let t=this.txJson.trim(),e=JSON.parse(t),i=this.cleanTx(e);console.log("Edited JSON:",e),console.log("Cleaned JSON:",i);let r=ka.encode(i),o=ka.hashes.hashTx(r);console.log("Unsigned Transaction hash (hex):",o),this.outputField.set(o),this.txUiService.isError=!1}catch(t){console.error("Error in unsignedTransaction:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}signedTransaction(){return z(this,null,function*(){yield this.withPerf("signedTransaction",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages(),this.clearMessages(),this.txUiService.updateSpinnerMessage(""),this.buttonLoading.update(e=>Ge(le({},e),{signed:!0}));let t;try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]);if(!this.txJson.trim())return this.txUiService.setError("Transaction cannot be empty");let r=this.txJson.trim(),o=JSON.parse(r);t=this.cleanTx(o),console.log("Pre txToSign",t);let s=yield e.getLedgerIndex();console.log("currentLedger: ",s),t.LastLedgerSequence=s+1e3,console.log("Post txToSign",t);let a=i.sign(t);this.outputField.set(a.tx_blob),this.setSigned(this.outputField()),console.log("Signed TX blob:",a.tx_blob),console.log("Transaction ID (hash):",a.hash);let l=ka.decode(a.tx_blob);console.log(l)}catch(e){console.error("Error in signedTransaction:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.buttonLoading.update(e=>Ge(le({},e),{signed:!1})),this.txUiService.spinner.set(!1)}}))})}submitTransaction(){return z(this,null,function*(){yield this.withPerf("submitTransaction",()=>z(this,null,function*(){this.clearMessages(),this.txUiService.updateSpinnerMessage(""),this.buttonLoading.update(t=>Ge(le({},t),{submit:!0}));try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]);if(!this.outputField().trim())return this.txUiService.setError("Signed tx blob can not be empty");let i=this.outputField().trim(),r=this.getTransactionLabel(this.selectedTransaction()??"");this.txUiService.showSpinnerWithDelay(this.txUiService.isSimulateEnabled()?`Simulating ${r} (no funds will be moved)...`:`Submitting ${r} to Ledger...`,200);let o;if(this.txUiService.isSimulateEnabled()){let a=this.cleanTx(JSON.parse(this.txJson.trim()));console.log("Pre txToSign",a);let l=yield t.getLedgerIndex();console.log("currentLedger: ",l),a.LastLedgerSequence=l+5,o=yield this.xrplTransactions.simulateTransaction(t,a)}else o=yield t.submitAndWait(i);if(this.txUiService.setTxResult(o.result),this.updateTxResult(),this.utilsService.isTxSuccessful(o))this.txUiService.setSuccess(this.txUiService.result);else{let a=this.utilsService.getTransactionResultMessage(o),l=`Transaction failed.
`+this.utilsService.processErrorMessageFromLedger(a);return console.error(`Transaction ${this.txUiService.isSimulateEnabled()?"simulation":"submission"} failed: ${a}`,o),o.result.errorMessage=l,this.txUiService.setError(l)}this.txUiService.addTxHashSignal(o.result.hash?o.result.hash:o.result.tx_json.hash),this.txUiService.isSimulateEnabled()?this.txUiService.successMessage="Simulated transaction successfully!":(this.txUiService.successMessage="Transaction completed successfully!",yield this.refreshAfterTx(t,e,"",!0),this.resetSigners(),this.clearFields(!1),this.cdr.detectChanges())}catch(t){console.error("Error in submitTransaction:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.buttonLoading.update(t=>Ge(le({},t),{submit:!1})),this.txUiService.spinner.set(!1)}}))})}submitMultiSignedTransaction(){return z(this,null,function*(){yield this.withPerf("submitMultiSignedTransaction",()=>z(this,null,function*(){this.clearMessages(),this.txUiService.updateSpinnerMessage(""),this.buttonLoading.update(t=>Ge(le({},t),{submit:!0}));try{if(!this.outputField().trim())return this.txUiService.setError("Signed tx blob can not be empty");let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.outputField().trim();console.log("multiSignedTxBlob",i);let r=this.getTransactionLabel(this.selectedTransaction()??"");this.txUiService.showSpinnerWithDelay(this.txUiService.isSimulateEnabled()?`Simulating ${r} (no funds will be moved)...`:`Submitting ${r} to Ledger...`,200);let o;if(this.txUiService.isSimulateEnabled()){let a=this.cleanTx(JSON.parse(this.txJson.trim()));console.log("Pre txToSign",a);let l=yield t.getLedgerIndex();console.log("currentLedger: ",l),a.LastLedgerSequence=l+5,o=yield this.xrplTransactions.simulateTransaction(t,a)}else o=yield t.submitAndWait(i);if(this.txUiService.setTxResult(o.result),this.updateTxResult(),this.utilsService.isTxSuccessful(o))this.txUiService.setSuccess(this.txUiService.result);else{let a=this.utilsService.getTransactionResultMessage(o),l=`Transaction failed.
`+this.utilsService.processErrorMessageFromLedger(a);console.error(`Transaction ${this.txUiService.isSimulateEnabled()?"simulation":"submission"} failed: ${a}`,o),o.result.errorMessage=l,this.txUiService.setError(l)}this.txUiService.addTxHashSignal(o.result.hash?o.result.hash:o.result.tx_json.hash),this.txUiService.isSimulateEnabled()?this.txUiService.successMessage="Simulated transaction successfully!":(this.txUiService.successMessage="Transaction completed successfully!",yield this.refreshAfterTx(t,e,"",!0),this.resetSigners(),this.clearFields(!1),this.cdr.detectChanges())}catch(t){console.error("Error in submitMultiSignedTransaction:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.buttonLoading.update(t=>Ge(le({},t),{multiSign:!1})),this.txUiService.spinner.set(!1)}}))})}signForMultiSign(){return z(this,null,function*(){yield this.withPerf("signForMultiSign",()=>z(this,null,function*(){this.clearMessages(),this.txUiService.updateSpinnerMessage(""),this.buttonLoading.update(e=>Ge(le({},e),{submit:!0}));let t;try{if(!this.txJson.trim())return this.txUiService.setError("Transaction cannot be empty");let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),r=this.txJson.trim(),o=JSON.parse(r);t=this.cleanTx(o),console.log("Pre txToSign",t);let s=yield e.getLedgerIndex();console.log("currentLedger: ",s),t.LastLedgerSequence=s+1e3,console.log("Post txToSign",t);let a=this.availableSigners().filter(p=>p.isSelectedSigner);if(!a.length)return this.txUiService.setError("Select at least one signer.");let l=a.map(p=>p.address).join(","),c=a.map(p=>p.seed).join(",");console.log("Addresses:",l),console.log("Seeds:",c);let d=yield this.xrplService.calculateTransactionFee(e),u=this.utilsService.getMultiSignAddress(l),h=this.utilsService.getMultiSignSeeds(c),f=yield this.utilsService.handleMultiSignTransaction({client:e,wallet:i,tx:t,signerAddresses:u,signerSeeds:h,fee:d});console.info("result",f),this.outputField.set(f.signedTx?.tx_blob?f.signedTx?.tx_blob:"Error")}catch(e){console.error("Error in signForMultiSign:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.buttonLoading.update(e=>Ge(le({},e),{multiSign:!1})),this.txUiService.spinner.set(!1)}}))})}cleanTx(t){let e={DestinationTag:[0],SourceTag:[0],InvoiceID:[0,""]};for(let i in e)t.hasOwnProperty(i)&&e[i].includes(t[i])&&delete t[i];return Array.isArray(t.Memos)&&(t.Memos=t.Memos.filter(i=>{let r=i?.Memo;if(!r)return!1;let o=!r.MemoData||r.MemoData===""||r.MemoData===0,s=!r.MemoType||r.MemoType===""||r.MemoType===0;return!(o||s)}),t.Memos.length===0?delete t.Memos:this.encodeMemo(t)),typeof t.Amount=="string"&&this.selectedTransaction()==="sendXrp"&&(t.Amount=ka.xrpToDrops(t.Amount)),this.txUiService.isSimulateEnabled()&&delete t.Sequence,t}populateTxDetails(){if(!this.outputField().trim())return;let t=ka.decode(this.outputField().trim());console.log(t),this.txJson=JSON.stringify(t,null,3)}encodeMemo(t){t.Memos=t.Memos.map(e=>{if(!e||!e.Memo)return e;let a=e.Memo,{MemoData:i,MemoType:r,MemoFormat:o}=a,s=l_(a,["MemoData","MemoType","MemoFormat"]);return{Memo:le(le(le(le({},s),i&&{MemoData:ka.convertStringToHex(i)}),r&&{MemoType:ka.convertStringToHex(r)}),o&&{MemoFormat:ka.convertStringToHex(o)})}})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&i&&this.addNewDestinationFromUser(i),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&ka.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}getWallet(){return z(this,null,function*(){let t=Object.entries(this.currentWallet());if(console.log("this.currentWallet entries",t.length>0),t.length<=0)throw new Error("No wallets exist. Create a new wallet before continuing.");let e=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!e)throw new Error("Wallet could not be created");return e})}onTxJsonBlur(){clearTimeout(this.highlightTimeout());try{let t=this.txJsonPre.nativeElement.innerText.trim();this.txJson=t,this.scheduleHighlight()}catch(t){console.error("Invalid JSON:",t)}}onTxJsonInput(){this.txJson=this.txJsonPre.nativeElement.innerText,clearTimeout(this.highlightTimeout()),this.highlightTimeout.set(setTimeout(()=>{this.scheduleHighlight()},5e3))}updateJsonDisplay(){this.scheduleHighlight(),this.cdr.markForCheck()}setTxJson(t){this.txJson=t,this.scheduleHighlight()}setSigned(t){this.outputField.set(t),this.updateJsonDisplay()}copyCheckId(t){navigator.clipboard.writeText(t).then(()=>{this.txUiService.showToastMessage("Check ID copied!")})}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(t=!0){this.selectedSingleTicket.set(""),this.isTicket.set(!1),this.useMultiSign.set(!1),this.resetSigners(),this.clearInputFields(),this.cdr.markForCheck()}clearMessages(){this.txUiService.result="",this.txUiService.isError=!1,this.txUiService.isSuccess=!1,this.txUiService.successMessage="",this.txUiService.errorMessage="",this.cdr.detectChanges()}clearInputFields(){this.txUiService.amountField.set(""),this.txUiService.destinationTagField.set(""),this.txUiService.invoiceIdField.set(""),this.txUiService.sourceTagField.set("")}resetSigners(){this.availableSigners().forEach(t=>t.isSelectedSigner=!1),this.selectedQuorum.set(0)}getTransactionLabel(t){return Re.SIGN_TRANSACTION_LABEL_MAP[t]||t}updatePaymentTx(){this.scheduleHighlight()}updateTxResult(){this.scheduleHighlight()}scheduleHighlight(){A3(()=>{if(this.txUiService.paymentTx&&this.paymentJson?.nativeElement){let t=JSON.stringify(this.txUiService.paymentTx,null,2);this.paymentJson.nativeElement.textContent=t,Prism.highlightElement(this.paymentJson.nativeElement)}if(this.txUiService.txResult&&this.txResultJson?.nativeElement){let t=JSON.stringify(this.txUiService.txResult,null,2);this.txResultJson.nativeElement.textContent=t,Prism.highlightElement(this.txResultJson.nativeElement)}if(this.txJson&&this.txJsonCode?.nativeElement){let t=JSON.stringify(JSON.parse(this.txJson),null,2);this.txJsonCode.nativeElement.textContent=t,Prism.highlightElement(this.txJsonCode.nativeElement)}this.outputField&&this.signedCode?.nativeElement&&(this.signedCode.nativeElement.textContent=this.outputField(),Prism.highlightElement(this.signedCode.nativeElement)),this.txUiService.isError&&this.txUiService.errorMessage&&this.txJsonCode?.nativeElement?(this.txJsonCode.nativeElement.textContent=`ERROR: ${this.txUiService.errorMessage}`,this.txJsonPre.nativeElement.classList.add("error")):this.txJsonPre.nativeElement.classList.remove("error")},{injector:this.injector})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-sign-transactions"]],viewQuery:function(e,i){if(e&1&&(Et(cht,5),Et(dht,5),Et(uht,5),Et(hht,5),Et(fht,5),Et(pht,5),Et(mht,5)),e&2){let r;_t(r=bt())&&(i.paymentJson=r.first),_t(r=bt())&&(i.txResultJson=r.first),_t(r=bt())&&(i.resultFieldError=r.first),_t(r=bt())&&(i.txJsonPre=r.first),_t(r=bt())&&(i.txJsonCode=r.first),_t(r=bt())&&(i.signedPre=r.first),_t(r=bt())&&(i.signedCode=r.first)}},features:[Lt],decls:50,vars:20,consts:[["theForm","ngForm"],["txJsonPre",""],["txJsonCode",""],["signedEditable",""],["txResultJson",""],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[2,"padding-top","2em"],[1,"info-panel"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-columns"],[1,"tab-content-container","form-fields-container"],[1,"form-row"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row",2,"margin-top","0.8em"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"tx-preview-container",2,"margin-top","1.5rem"],[1,"tx-header"],[1,"tx-title"],[1,"tx-actions"],["type","button","title","Copy JSON",1,"copy-btn",3,"click"],["name","heroClipboardDocumentList","size","20"],["type","button","title","Download TX JSON",1,"download-btn",3,"click"],["name","heroArrowDownOnSquareStack","size","20"],["spellcheck","false","contenteditable","true",1,"tx-json","language-json","editable",3,"blur","input","ngClass"],[1,"language-json"],[1,"tx-preview-container",2,"margin-top","1rem"],["type","button","title","Copy Signed TX",1,"copy-btn",3,"click"],["type","button","title","Download Signed TX",1,"download-btn",3,"click"],["id","hashField","spellcheck","false","contenteditable","true",1,"tx-json","language-json","editable",2,"color","#669900",3,"ngClass","textContent"],[1,"tx-preview-container"],[1,"submenu-info-text"],[1,"white-button-submenu"],["name","signature","size","30",2,"padding-top","15px","color","#1e40af"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"info-panel-content"],["name","heroInformationCircle","size","20",1,"text-blue-600","info-icon"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-red-600"],[1,"warning-text"],[1,"form-group"],[1,"form-hint"],["placeholder","Search transaction type...","emptyMessage","No transaction types available",3,"valueChange","items","value","showSecondaryInInput"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["title","Copy JSON",1,"copy-btn",3,"click"],["name","heroClipboardDocumentList","size","20",1,"text-red-600"],["title","Download JSON",1,"download-btn",3,"click"],["name","heroArrowDownOnSquareStack","size","20",1,"text-red-600"],[1,"tx-json","language-json"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",5),ee(1,"app-navbar"),m(2,"main",6)(3,"div",7)(4,"div",8)(5,"app-wallet-panel",9),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",10),Q(7,yht,9,0,"div",11),Q(8,vht,4,1,"div",12),Q(9,_ht,4,1,"div",13),m(10,"form",14,0)(12,"div")(13,"div",15)(14,"div",16),Q(15,bht,7,3,"div",17),ee(16,"app-transaction-options",18),Q(17,wht,9,8,"div",19),m(18,"div",20)(19,"input",21),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(20,"app-transaction-preview"),m(21,"div",22)(22,"div",23)(23,"h5",24),w(24,"Transaction JSON"),g(),m(25,"div",25)(26,"button",26),X("click",function(){return U(r),j(i.copyUtilService.copySignTx(i.txJson))}),ee(27,"ng-icon",27),w(28," Copy"),g(),m(29,"button",28),X("click",function(){return U(r),j(i.downloadUtilService.downloadSignTxJson(i.txJson))}),ee(30,"ng-icon",29),w(31," Download"),g()()(),m(32,"pre",30,1),X("blur",function(){return U(r),j(i.onTxJsonBlur())})("input",function(){return U(r),j(i.onTxJsonInput())}),ee(34,"code",31,2),g()(),m(36,"div",32)(37,"div",23)(38,"h5",24),w(39,"Signed Transaction"),g(),m(40,"div",25)(41,"button",33),X("click",function(){return U(r),j(i.copyUtilService.copySignedTx(i.outputField()))}),ee(42,"ng-icon",27),w(43," Copy"),g(),m(44,"button",34),X("click",function(){return U(r),j(i.downloadUtilService.downloadSignTxJson(i.outputField()))}),ee(45,"ng-icon",29),w(46," Download"),g()()(),ee(47,"div",35,3),g()()()()(),Q(49,Sht,14,0,"div",36),g()()()()()}e&2&&(_(7),J(i.activeTab()==="getAccountDetails"?7:-1),_(),J(i.infoData()?8:-1),_(),J(i.txUiService.warningMessage?9:-1),_(3),oe("@tabTransition",i.activeTab()),_(3),J(i.activeTab()==="getAccountDetails"?15:-1),_(),oe("showWhenTab",Ei(15,ght))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(),J(i.activeTab()==="getAccountDetails"?17:-1),_(2),Oe("ngModel",i.executionTime),_(13),oe("ngClass",Zf(16,Rge,i.txUiService.isSuccess)),_(15),oe("ngClass",Zf(18,Rge,i.txUiService.isSuccess))("textContent",i.outputField()),_(2),J(i.txUiService.txResult.length>0?49:-1))},dependencies:[ln,Oa,Kn,xi,Bn,$n,Ci,Wn,di,si,En,xr,ii,gv,Mn,Lge,BD,AD,OD,ND,ch,oi,Bi,mi,ki],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]}})};var QD=_i(Ki());var Cht=()=>["send"];function xht(n,t){n&1&&(m(0,"div",7)(1,"div",31)(2,"div",32),ee(3,"ng-icon",33),g(),m(4,"div")(5,"h2",34),w(6,"Send XRP"),g(),m(7,"p",35),w(8,"Send XRP to another XRPL address"),g()()()())}function kht(n,t){if(n&1&&(m(0,"div",8)(1,"div",36),ee(2,"ng-icon",37)(3,"div",38),g()()),n&2){let e=E();_(3),oe("innerHTML",e.infoData(),pn)}}function Mht(n,t){if(n&1&&(m(0,"div",9),ee(1,"ng-icon",39),m(2,"div",40),w(3),g()()),n&2){let e=E();_(3),Ee(e.safeWarningMessage)}}var ZD=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("send");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);accountInfo=P(null);selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||"Selected wallet";return this.accountInfo()?.result?.account_data?.Balance?`<code>${e}</code> wallet has <strong>${this.currentWallet().balance} XRP</strong> available for sending.`:`<code>${e}</code> wallet is ready to send XRP.`});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""),this.txUiService.setInfoMessage(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),this.clearInputFields(),yield this.onAccountChange(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByWalletAddress(t,e){return e.address}onWalletSelected(t){this.selectWallet(t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.txUiService.clearAllOptionsAndMessages(),yield this.onAccountChange(!0)})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}onAccountChange(t=!1){return z(this,null,function*(){yield this.withPerf("onAccountChange",()=>z(this,null,function*(){if(this.txUiService.clearAllOptionsAndMessages(),this.hasWallets()&&this.walletManagerService.getSelectedIndex()<0)throw new Error("Please select a wallet.");try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.accountInfo.set(r),this.refreshUiState(i,r,o)}catch(e){console.error("Failed to load account:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}sendXrp(){return z(this,null,function*(){yield this.withPerf("sendXrp",()=>z(this,null,function*(){this.txUiService.clearTxAndHash();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),i=this.selectedDestinationAddress()||this.typedDestination(),[{accountInfo:r,accountObjects:o},s,a]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),l=this.txUiService.getValidationInputs({wallet:this.currentWallet(),network:{accountInfo:r,accountObjects:o,fee:s,currentLedger:a},paymentXrp:{amount:this.txUiService.amountField(),destination:i}}),c=yield this.validationService.validate("PaymentXrp",{inputs:l,client:t,accountInfo:r});if(c.length>0)return this.txUiService.setError(c.join(`
\u2022 `));let d={TransactionType:"Payment",Account:e.classicAddress,Destination:i,Amount:QD.xrpToDrops(this.txUiService.amountField()),Fee:s,LastLedgerSequence:a+Re.LAST_LEDGER_ADD_TIME};yield this.setTxOptionalFields(t,d,e,r);let u=yield this.txExecutor.sendXrpPayment(d,e,t,{useMultiSign:this.txUiService.useMultiSign(),isRegularKeyAddress:this.txUiService.isRegularKeyAddress(),regularKeySeed:this.txUiService.regularKeySeed(),multiSignAddress:this.txUiService.multiSignAddress(),multiSignSeeds:this.txUiService.multiSignSeeds()});if(!u.success)return this.txUiService.setError(`${u.error}`);this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated XRP payment successfully!":"XRP payment sent successfully!",yield this.refreshAfterTx(t,e,i,!0)}catch(t){console.error("Error in sendXrp:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}this.txUiService.destinationTagField()&&this.utilsService.setDestinationTag(e,this.txUiService.destinationTagField()),this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),this.txUiService.invoiceIdField()&&this.utilsService.setInvoiceIdField(e,this.txUiService.invoiceIdField()),this.txUiService.sourceTagField()&&this.utilsService.setSourceTagField(e,this.txUiService.sourceTagField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.accountInfo.set(o),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&i&&this.addNewDestinationFromUser(i),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&QD.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(){this.clearInputFields(),this.txUiService.clearAllOptionsAndMessages()}clearInputFields(){this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.txUiService.amountField.set(""),this.txUiService.destinationTagField.set(""),this.txUiService.invoiceIdField.set(""),this.txUiService.sourceTagField.set("")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-send-xrp"]],features:[Lt],decls:58,vars:23,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[2,"padding-top","2em"],[1,"info-panel"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[1,"form-group"],["for","amountField"],[1,"form-hint"],["type","text","placeholder","e.g. 10.5","name","amountField",3,"ngModelChange","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"searchQueryChange","valueChange","items","value"],["for","destinationTagField"],["type","text","placeholder","e.g. 123456","name","destinationTagField",3,"ngModelChange","ngModel"],["for","sourceTagField"],["type","text","placeholder","e.g. 456789","name","sourceTagField",3,"ngModelChange","ngModel"],["for","invoiceIdField"],["type","text","placeholder","e.g. INV_123","name","invoiceIdField",3,"ngModelChange","ngModel"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],["type","button",1,"btn-primary-green",3,"click","disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click","disabled"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"green-button-submenu"],["name","heroPaperAirplane","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"info-panel-content"],["name","heroInformationCircle","size","20",1,"text-blue-600","info-icon"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-red-600"],[1,"warning-text"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6),Q(7,xht,9,0,"div",7),Q(8,kht,4,1,"div",8),Q(9,Mht,4,1,"div",9),m(10,"form",10,0)(12,"div",11)(13,"div")(14,"div",12)(15,"div",13)(16,"label",14),w(17,"XRP Amount"),g(),m(18,"p",15),w(19,"Amount, in XRP, to send to the destination."),g(),m(20,"input",16),X("ngModelChange",function(s){return U(r),j(i.txUiService.amountField.set(s))}),g()(),m(21,"div",13)(22,"label",17),w(23,"Destination"),g(),m(24,"p",15),w(25,"The unique address of the account receiving the payment."),g(),m(26,"app-select-search-dropdown",18),X("searchQueryChange",function(s){return U(r),j(i.typedDestination.set(s))})("valueChange",function(s){return U(r),j(i.selectedDestinationAddress.set((s==null?null:s.id)||""))}),g()()(),m(27,"div",12)(28,"div",13)(29,"label",19),w(30,"Destination Tag (opt)"),g(),m(31,"p",15),w(32,"Arbitrary tag that identifies the reason for the payment."),g(),m(33,"input",20),X("ngModelChange",function(s){return U(r),j(i.txUiService.destinationTagField.set(s))}),g()(),m(34,"div",13)(35,"label",21),w(36,"Source Tag (optional)"),g(),m(37,"p",15),w(38,"Identify which internal user, wallet, or sub-account initiated a payment."),g(),m(39,"input",22),X("ngModelChange",function(s){return U(r),j(i.txUiService.sourceTagField.set(s))}),g()()(),m(40,"div",12)(41,"div",13)(42,"label",23),w(43,"Invoice ID (optional)"),g(),m(44,"p",15),w(45,"Arbitrary 256-bit hash representing a specific reason or identifier for this payment."),g(),m(46,"input",24),X("ngModelChange",function(s){return U(r),j(i.txUiService.invoiceIdField.set(s))}),g()()(),ee(47,"app-transaction-options",25),m(48,"div",26)(49,"button",27),ct(50,"async"),X("click",function(){return U(r),j(i.sendXrp())}),w(51),g(),m(52,"button",28),ct(53,"async"),X("click",function(){return U(r),j(i.clearFields())}),w(54,"Clear Fields"),g()(),m(55,"div",29)(56,"input",30),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(57,"app-transaction-preview"),g()()()()()()()()}e&2&&(_(7),J(i.activeTab()==="send"?7:-1),_(),J(i.infoData()?8:-1),_(),J(i.txUiService.warningMessage?9:-1),_(4),oe("@tabTransition",i.activeTab()),_(7),oe("ngModel",i.txUiService.amountField()),_(6),oe("items",i.destinationItems())("value",i.selectedDestinationItem()),_(7),oe("ngModel",i.txUiService.destinationTagField()),_(6),oe("ngModel",i.txUiService.sourceTagField()),_(7),oe("ngModel",i.txUiService.invoiceIdField()),_(),oe("showWhenTab",Ei(22,Cht))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),oe("disabled",i.txUiService.spinner()||!mt(50,18,i.walletManagerService.hasWallets$)),_(2),Ee(i.txUiService.spinner()?"Processing...":"Send XRP"),_(),oe("disabled",!mt(53,20,i.walletManagerService.hasWallets$)),_(4),Oe("ngModel",i.executionTime))},dependencies:[ln,Kn,xi,Bn,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki,Bi,zi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var qz=_i(Ki());var $z=(n,t)=>({valid:n,invalid:t});function Tht(n,t){if(n&1&&(m(0,"div",10)(1,"div",21),ee(2,"ng-icon",22),g(),m(3,"div")(4,"h2",23),w(5,"New Wallet Generator"),g(),m(6,"p",24),w(7),g()()()),n&2){let e=E();_(7),je("Generate a new XRPL Wallet on ",e.environment())}}function Eht(n,t){if(n&1&&(m(0,"div",10)(1,"div",25),ee(2,"ng-icon",22),g(),m(3,"div")(4,"h2",23),w(5,"Derive Wallet from Seed"),g(),m(6,"p",24),w(7),g()()()),n&2){let e=E();_(7),je("Derive an existing XRPL Wallet from a seed on ",e.environment())}}function Aht(n,t){if(n&1&&(m(0,"div",10)(1,"div",25),ee(2,"ng-icon",22),g(),m(3,"div")(4,"h2",23),w(5,"Derive Wallet from Mnemonic"),g(),m(6,"p",24),w(7),g()()()),n&2){let e=E();_(7),je("Derive an existing XRPL Wallet from a mnemonic on ",e.environment())}}function Dht(n,t){if(n&1&&(m(0,"div",10)(1,"div",25),ee(2,"ng-icon",22),g(),m(3,"div")(4,"h2",23),w(5,"Derive Wallet from Secret Numbers"),g(),m(6,"p",24),w(7),g()()()),n&2){let e=E();_(7),je("Derive an existing XRPL Wallet from secret numbers on ",e.environment())}}function Iht(n,t){n&1&&(m(0,"div",10)(1,"div",26),ee(2,"ng-icon",27),g(),m(3,"div")(4,"h2",23),w(5,"Remove Custom Wallets"),g(),m(6,"p",24),w(7,"Remove custom wallets entered in the destination dropdown menu."),g()()())}function Fht(n,t){if(n&1&&(m(0,"div",11),ee(1,"ng-icon",28)(2,"div",29),g()),n&2){let e=E();_(2),oe("innerHTML",e.infoMessage,pn)}}function Pht(n,t){if(n&1&&(m(0,"div",12),ee(1,"ng-icon",30),m(2,"div",31),w(3),g()()),n&2){let e=E();_(3),Ee(e.safeWarningMessage)}}function Lht(n,t){if(n&1&&(m(0,"label")(1,"span",35),w(2),g()()),n&2){let e=E(2);_(),oe("ngClass",lb(2,$z,e.seedValid(),!e.seedValid())),_(),je(" ",e.seedValid()?"Seed Valid \u2705":"Invalid Seed \u274C"," ")}}function Rht(n,t){if(n&1){let e=ge();m(0,"div",15)(1,"div",32)(2,"label"),w(3,"Enter Seed"),g(),Q(4,Lht,3,5,"label"),g()(),m(5,"div",15)(6,"div",32)(7,"input",33),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.seed,r)||(o.seed=r),j(r)}),X("input",function(){U(e);let r=E();return j(r.onSeedInput())}),g(),m(8,"small",34),w(9," Example format: "),m(10,"code"),w(11,"sEddddddddddddddddddddddddda"),g()()()()}if(n&2){let e=E();_(4),J(e.seedInput().length>0?4:-1),_(3),Oe("ngModel",e.seed)}}function Oht(n,t){if(n&1&&(m(0,"label")(1,"span",35),w(2),g()()),n&2){let e=E(2);_(),oe("ngClass",lb(2,$z,e.mnemonicValid(),!e.mnemonicValid())),_(),je(" ",e.mnemonicValid()?"Mnemonic Valid \u2705":"Invalid Mnemonic \u274C"," ")}}function Nht(n,t){if(n&1){let e=ge();m(0,"div",15)(1,"div",32)(2,"label"),w(3,"Enter Mnemonic"),g(),Q(4,Oht,3,5,"label"),g()(),m(5,"div",15)(6,"div",32)(7,"textarea",36),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.mnemonic,r)||(o.mnemonic=r),j(r)}),X("input",function(){U(e);let r=E();return j(r.onMnemonicInput())}),w(8," "),g(),m(9,"small",34),w(10," Example format: "),m(11,"code"),w(12,"joe, bill, john, joe, john, bill, bill, joe, john, bill, john, joe, john, joe, bill, john, bill, joe, joe, bill, john, joe, john, bill"),g()()()()}if(n&2){let e=E();_(4),J(e.mnemonicInput().trim().length>0?4:-1),_(3),Oe("ngModel",e.mnemonic)}}function Bht(n,t){if(n&1&&(m(0,"label")(1,"span",35),w(2),g()()),n&2){let e=E(2);_(),oe("ngClass",lb(2,$z,e.secretNumberValid(),!e.secretNumberValid())),_(),je(" ",e.secretNumberValid()?"Secret Numbers Valid \u2705":"Invalid Secret Numbers \u274C "," ")}}function Vht(n,t){if(n&1){let e=ge();m(0,"div",15)(1,"div",32)(2,"label"),w(3,"Enter Secret Numbers"),g(),Q(4,Bht,3,5,"label"),g()(),m(5,"div",15)(6,"div",32)(7,"input",37),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.secretNumbers,r)||(o.secretNumbers=r),j(r)}),X("input",function(){U(e);let r=E();return j(r.onSecretNumberInput())}),g(),m(8,"small",34),w(9," Example format: "),m(10,"code"),w(11,"123456, 456789, 123456, 456789, 123456, 456789, 123456, 456789"),g()()()()}if(n&2){let e=E();_(4),J(e.secretNumberInput().length>0?4:-1),_(3),Oe("ngModel",e.secretNumbers)}}function Uht(n,t){if(n&1){let e=ge();m(0,"div",15)(1,"div",32)(2,"label",38),w(3,"Custom Wallets"),g(),m(4,"app-select-search-dropdown",39),X("searchQueryChange",function(r){U(e);let o=E();return j(o.typedDestination.set(r))})("valueChange",function(r){U(e);let o=E();return j(o.selectedDestinationAddress.set((r==null?null:r.id)||""))}),g()()()}if(n&2){let e=E();_(4),oe("items",e.destinationItems())("value",e.selectedDestinationItem())}}function jht(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"button",40),X("click",function(){U(e);let r=E();return j(r.generateNewAccount())}),w(2),g(),m(3,"button",40),X("click",function(){U(e);let r=E();return j(r.generateNewWalletFromMnemonic())}),w(4),g(),m(5,"button",40),X("click",function(){U(e);let r=E();return j(r.generateNewWalletFromSecretNumbers())}),w(6),g()()}if(n&2){let e=E();_(),oe("disabled",e.buttonLoading.generateNewWalletFromSeed||e.isAnyButtonLoading),_(),Ee(e.buttonLoading.generateNewWalletFromSeed?"Processing...":"Generate Wallet from Family Seed"),_(),oe("disabled",e.buttonLoading.generateNewWalletFromMnemonic||e.isAnyButtonLoading),_(),Ee(e.buttonLoading.generateNewWalletFromMnemonic?"Processing...":"Generate Wallet from Mnemonic"),_(),oe("disabled",e.buttonLoading.generateNewWalletFromSecretNumbers||e.isAnyButtonLoading),_(),Ee(e.buttonLoading.generateNewWalletFromSecretNumbers?"Processing...":"Generate Wallet from Secret Numbers")}}function Hht(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"button",40),X("click",function(){U(e);let r=E();return j(r.deriveWalletFromFamilySeed())}),w(2),g(),m(3,"button",41),X("click",function(){U(e);let r=E();return j(r.clearFields(!0))}),w(4,"Clear Fields"),g()()}if(n&2){let e=E();_(),oe("disabled",e.buttonLoading.deriveWalletFromFamilySeed||e.isAnyButtonLoading),_(),Ee(e.buttonLoading.deriveWalletFromFamilySeed?"Processing...":"Derive Wallet from Family Seed")}}function Wht(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"button",40),X("click",function(){U(e);let r=E();return j(r.deriveWalletFromMnemonic())}),w(2),g(),m(3,"button",41),X("click",function(){U(e);let r=E();return j(r.clearFields(!0))}),w(4,"Clear Fields"),g()()}if(n&2){let e=E();_(),oe("disabled",e.buttonLoading.deriveWalletFromMnemonic||e.isAnyButtonLoading),_(),Ee(e.buttonLoading.deriveWalletFromMnemonic?"Processing...":"Derive Wallet from Mnemonic")}}function zht(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"button",40),X("click",function(){U(e);let r=E();return j(r.deriveWalletFromSecretNumbers())}),w(2),g(),m(3,"button",41),X("click",function(){U(e);let r=E();return j(r.clearFields(!0))}),w(4,"Clear Fields"),g()()}if(n&2){let e=E();_(),oe("disabled",e.buttonLoading.deriveWalletFromSecretNumbers||e.isAnyButtonLoading),_(),Ee(e.buttonLoading.deriveWalletFromSecretNumbers?"Processing...":"Derive Wallet from Secret Numbers")}}function qht(n,t){if(n&1){let e=ge();m(0,"div",16)(1,"button",42),X("click",function(){U(e);let r=E();return j(r.removeCustomWallet())}),w(2),g()()}if(n&2){let e=E();_(),oe("disabled",e.buttonLoading.deriveWalletFromSecretNumbers||e.isAnyButtonLoading),_(),Ee(e.buttonLoading.deriveWalletFromSecretNumbers?"Processing...":"Remove Custom Wallet")}}function $ht(n,t){if(n&1){let e=ge();m(0,"div",17)(1,"label",43)(2,"input",44),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.ed25519_encryption_type,r)||(o.ed25519_encryption_type=r),j(r)}),X("change",function(){U(e);let r=E();return j(r.onEd25519Change())}),g(),ee(3,"span",45),w(4," ED25519 Encryption "),g(),m(5,"label",43)(6,"input",46),Ne("ngModelChange",function(r){U(e);let o=E();return Ve(o.secp256k1_encryption_type,r)||(o.secp256k1_encryption_type=r),j(r)}),X("change",function(){U(e);let r=E();return j(r.onSecp256k1Change())}),g(),ee(7,"span",45),w(8," SECP256K1 Encryption "),g()()}if(n&2){let e=E();_(2),Oe("ngModel",e.ed25519_encryption_type),_(4),Oe("ngModel",e.secp256k1_encryption_type)}}function Kht(n,t){n&1&&(m(0,"div",18)(1,"strong"),w(2,"Note:"),g(),w(3," Generating a Mnemonic or Secret Number wallet will always be SECP256K1 encryption."),g())}function Ght(n,t){n&1&&(m(0,"div",18)(1,"strong"),w(2,"Note:"),g(),w(3," Deriving a Mnemonic wallet will always be SECP256K1 encryption."),g())}function Xht(n,t){n&1&&(m(0,"div",18)(1,"strong"),w(2,"Note:"),g(),w(3," Deriving a Secret Number wallet will always be SECP256K1 encryption."),g())}var JD=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);walletGenerator=N(h0);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);activeTab=P("generate");encryptionType="";seed=P("");mnemonic=P("");secretNumbers=P("");ed25519_encryption_type=P(!1);secp256k1_encryption_type=P(!1);buttonLoading={generateNewWalletFromSeed:!1,generateNewWalletFromMnemonic:!1,generateNewWalletFromSecretNumbers:!1,deriveWalletFromFamilySeed:!1,deriveWalletFromMnemonic:!1,deriveWalletFromSecretNumbers:!1};mnemonicInput=P("");mnemonicValid=P(!1);secretNumberInput=P([]);secretNumberValid=P(!1);seedInput=P("");seedValid=P(!1);selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});hasWallets=_e(()=>this.wallets().length>0);constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""),this.txUiService.setInfoMessage(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),this.clearFields(),yield this.getAccountDetails(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}get isAnyButtonLoading(){return Object.values(this.buttonLoading).some(t=>t===!0)}onWalletSelected(t){this.selectWallet(t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.clearFields(!0),this.txUiService.clearAllOptionsAndMessages()})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}getAccountDetails(t=!1){return z(this,null,function*(){yield this.withPerf("getAccountDetails",()=>z(this,null,function*(){if(this.txUiService.clearAllOptionsAndMessages(),this.hasWallets()&&this.walletManagerService.getSelectedIndex()<0)throw new Error("Please select a wallet.");try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),r=yield this.xrplCache.getAccountInfo(i.classicAddress,t),o=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(o.length>0)return this.txUiService.setError(o.join(`
\u2022 `));this.clearFields(!1)}catch(e){console.error("Failed to load account:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}generateNewAccount(){return z(this,null,function*(){yield this.withPerf("generateNewAccount",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages(),this.buttonLoading.generateNewWalletFromSeed=!0,this.txUiService.showSpinnerWithDelay("Generating new wallet",5e3);try{this.encryptionType=Re.ENCRYPTION.ED25519,console.log("encryptionType: ",this.encryptionType);let t=yield this.walletGenerator.generateNewAccount(this.wallets(),this.environment(),this.encryptionType),e=yield this.xrplService.getClient();yield this.refreshWallets(e,[t.address]),this.txUiService.spinner.set(!1),this.txUiService.clearWarning(),this.txUiService.setSuccess(`Generated ${t.address?t.address:t.wallet.classicAddress} wallet from a seed successfully!`),this.txUiService.setTxResultSignal(t)}catch(t){console.error("Error in generateNewAccount:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1),this.buttonLoading.generateNewWalletFromSeed=!1}}))})}deriveWalletFromFamilySeed(){return z(this,null,function*(){yield this.withPerf("deriveWalletFromFamilySeed",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages(),this.buttonLoading.deriveWalletFromFamilySeed=!0,this.txUiService.updateSpinnerMessage(""),this.txUiService.showSpinnerWithDelay("Derive wallet",10);try{if(this.encryptionType=this.getEncryptionType(),console.log("encryptionType: ",this.encryptionType),!qz.isValidSecret(this.seed()))return this.txUiService.setError("Invalid seed value.");let t=yield this.xrplService.getClient(),e=this.storageService.get("destinations"),i=e||[],{wallet:r,destinations:o,customDestinations:s}=yield this.walletGenerator.deriveWalletFromFamilySeed(t,this.seed(),i,i);this.destinations=o,this.customDestinations.set(s),this.updateDestinations(),yield this.refreshWallets(t,[r.address]),this.txUiService.spinner.set(!1),this.txUiService.clearWarning(),this.txUiService.setSuccess(`Successfully added ${r.address}`)}catch(t){console.error("Error in deriveWalletFromFamilySeed:",t),t.message==="Failed to fetch account info: Account not found."?this.txUiService.setError(`${t.message} Are you using the correct encryption?`):this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1),this.buttonLoading.deriveWalletFromFamilySeed=!1}}))})}generateNewWalletFromMnemonic(){return z(this,null,function*(){yield this.withPerf("generateNewWalletFromMnemonic",()=>z(this,null,function*(){this.buttonLoading.generateNewWalletFromMnemonic=!0,this.txUiService.showSpinnerWithDelay("Generating new wallet",5e3);try{this.encryptionType=this.getEncryptionType(),console.log("encryptionType: ",this.encryptionType);let t=yield this.walletGenerator.generateNewWalletFromMnemonic(this.wallets(),this.environment(),this.encryptionType),e=yield this.xrplService.getClient();yield this.refreshWallets(e,[t.address]),this.txUiService.spinner.set(!1),this.txUiService.clearWarning(),this.txUiService.setSuccess(`Generated ${t.address} wallet from a Mneomic successfully!`),this.txUiService.setTxResultSignal(t)}catch(t){console.error("Failed to generateNewWalletFromMnemonic:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1),this.buttonLoading.generateNewWalletFromMnemonic=!1}}))})}deriveWalletFromMnemonic(){return z(this,null,function*(){yield this.withPerf("deriveWalletFromMnemonic",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages(),this.buttonLoading.deriveWalletFromMnemonic=!0,this.txUiService.updateSpinnerMessage(""),this.txUiService.showSpinnerWithDelay("Derive wallet",10);try{if(this.encryptionType=this.getEncryptionType(),console.log("encryptionType: ",this.encryptionType),!this.utilsService.isValidMnemonic(this.mnemonic()))return this.txUiService.setError("Invalid Mnemonic.");let t=yield this.xrplService.getClient(),e=this.storageService.get("destinations"),i=e||[],{wallet:r,destinations:o,customDestinations:s}=yield this.walletGenerator.deriveWalletFromMnemonic(t,this.mnemonic(),i,i);this.destinations=o,this.customDestinations=s,this.updateDestinations(),yield this.refreshWallets(t,[r.address]),this.txUiService.spinner.set(!1),this.txUiService.clearWarning(),this.txUiService.setSuccess(`Successfully added ${r.address}`)}catch(t){console.error("Error in deriveWalletFromMnemonic:",t),t.message==="Failed to fetch account info: Account not found."?this.txUiService.setError(`${t.message} Are you using the correct encryption?`):this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1),this.buttonLoading.deriveWalletFromMnemonic=!1}}))})}generateNewWalletFromSecretNumbers(){return z(this,null,function*(){yield this.withPerf("generateNewWalletFromSecretNumbers",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages(),this.buttonLoading.generateNewWalletFromSecretNumbers=!0,this.txUiService.showSpinnerWithDelay("Generating new wallet",5e3);try{this.encryptionType=this.getEncryptionType(),console.log("encryptionType ............................................................",this.encryptionType);let t=yield this.walletGenerator.generateNewWalletFromSecretNumbers(this.wallets(),this.environment(),this.encryptionType),e=yield this.xrplService.getClient();yield this.refreshWallets(e,[t.address]),this.txUiService.spinner.set(!1),this.txUiService.clearWarning(),this.txUiService.setSuccess(`Generated ${t.address} wallet from secret numbers successfully!`),this.txUiService.setTxResultSignal(t)}catch(t){console.error("Error in generateNewWalletFromSecretNumbers:",t),this.txUiService.setError(`${t.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1),this.buttonLoading.generateNewWalletFromSecretNumbers=!1}}))})}deriveWalletFromSecretNumbers(){return z(this,null,function*(){yield this.withPerf("deriveWalletFromSecretNumbers",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages(),this.buttonLoading.deriveWalletFromSecretNumbers=!0,this.txUiService.updateSpinnerMessage(""),this.txUiService.showSpinnerWithDelay("Derive wallet",10);try{if(this.encryptionType=this.getEncryptionType(),console.log("encryptionType: ",this.encryptionType),!this.utilsService.isValidSecret(this.utilsService.convertSecretNumberStringToArray(this.secretNumbers())))return this.txUiService.setError("Invalid Secret Number.");let t=yield this.xrplService.getClient(),e=this.storageService.get("destinations"),i=e||[],{wallet:r,destinations:o,customDestinations:s}=yield this.walletGenerator.deriveWalletFromSecretNumbers(t,this.secretNumbers(),i,i);this.destinations=o,this.customDestinations=s,this.updateDestinations(),yield this.refreshWallets(t,[r.address]),this.txUiService.spinner.set(!1),this.txUiService.clearWarning(),this.txUiService.setSuccess(`Successfully added ${r.address}`)}catch(t){console.error("Error in deriveWalletFromSecretNumbers:",t),t.message==="Failed to fetch account info: Account not found."?this.txUiService.setError(`${t.message} Are you using the correct encryption?`):(this.txUiService.setError(`${t.message}`),this.txUiService.setError(`${t.message||"Transaction failed"}`))}finally{this.txUiService.spinner.set(!1),this.buttonLoading.deriveWalletFromSecretNumbers=!1}}))})}removeCustomWallet(){let t=this.selectedDestinationAddress();if(!t){this.toastService.success("Custom wallet not found");return}this.customDestinations.update(e=>e.filter(i=>i.address!==t)),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations(),this.selectedDestinationAddress.set(""),this.destinationSearchQuery.set(""),this.dropdownService.setSelectedItems(this.destinationItems()),this.dropdownService.closeDropdown(),this.toastService.success(`Custom wallet ${t} removed successfully`)}getEncryptionType(){return this.secp256k1_encryption_type()?Re.ENCRYPTION.SECP256K1:Re.ENCRYPTION.ED25519}onEncryptionChange(){this.storageService.setInputValue("encryptionType",this.encryptionType.toString())}onMnemonicInput(){this.mnemonicInput.set(this.utilsService.normalizeMnemonic(this.mnemonic())),this.mnemonicValid.set(this.utilsService.isValidMnemonic(this.mnemonic()))}onSecretNumberInput(){this.secretNumberInput.set(this.utilsService.normalizeSecrets(this.secretNumbers())),this.secretNumberValid.set(this.utilsService.isValidSecret(this.utilsService.convertSecretNumberStringToArray(this.secretNumbers())))}onSeedInput(){this.seedInput.set(this.utilsService.normalizeFamilySeed(this.seed())),this.seedValid.set(qz.isValidSecret(this.seed()))}onEd25519Change(){this.ed25519_encryption_type()&&this.secp256k1_encryption_type.set(!1),this.saveEncryptionPreference()}onSecp256k1Change(){this.secp256k1_encryption_type()&&this.ed25519_encryption_type.set(!1),this.saveEncryptionPreference()}saveEncryptionPreference(){let t=this.getEncryptionType();this.storageService.setInputValue("encryptionType",t)}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}get infoMessage(){let e={send:{message:"",dynamicText:"",showLink:!1}}[this.activeTab()];if(!e)return null;let i=this.currentWallet.name||"selected",r=e.dynamicText?`${e.dynamicText} `:"";return null}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(t=!0){t&&(this.txUiService.clearMessages(),this.txUiService.clearWarning()),this.seed.set(""),this.mnemonic.set(""),this.secretNumbers.set(""),this.mnemonicInput.set(""),this.mnemonicValid.set(!1),this.secretNumberInput.set([]),this.secretNumberValid.set(!1),this.seedInput.set(""),this.seedValid.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-wallet-configurator"]],features:[Lt],decls:50,vars:32,consts:[["theForm","ngForm"],[1,"app-layout"],[1,"main-content"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[1,"menu-bar"],[1,"menu-btn","active",3,"click"],["name","heroWallet","size","20",1,"text-red-600"],[1,"submenu-info-text"],[1,"info-panel"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[1,"button-row",2,"margin-top","0em"],[1,"switch-group"],[1,"info-box",2,"margin-top","16px","margin-bottom","16px","font-size","0.9em","opacity","0.9","padding-left","0.5em"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"green-button-submenu"],["name","heroWallet","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"blue-button-submenu"],[1,"red-button-submenu"],["name","heroTrash","size","27",1,"text-red-600"],["name","heroInformationCircle","size","20",1,"text-red-600"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-red-600"],[1,"warning-text"],[1,"form-group"],["type","text","name","seed","placeholder","Paste your family seed here...",3,"ngModelChange","input","ngModel"],[1,"helper-text"],[3,"ngClass"],["name","mnemonic","placeholder","Paste your 24-word mnemonic here...","rows","3",1,"mnemonic-textarea",3,"ngModelChange","input","ngModel"],["type","text","name","secretNumbers","placeholder","Paste your secret numbers here...",3,"ngModelChange","input","ngModel"],["for","destination"],["placeholder","Enter or select destination address",3,"searchQueryChange","valueChange","items","value"],["type","button",1,"btn-primary-blue",3,"click","disabled"],["type","button",1,"btn-secondary-clear-fields",3,"click"],["type","button",1,"btn-primary-red",3,"click","disabled"],[1,"switch"],["type","checkbox","name","ed25519_encryption_type",3,"ngModelChange","change","ngModel"],[1,"slider"],["type","checkbox","name","secp256k1_encryption_type",3,"ngModelChange","change","ngModel"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1),ee(1,"app-navbar"),m(2,"main",2)(3,"div",3)(4,"div",4)(5,"app-wallet-panel",5),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(6,"div",6)(7,"div",7)(8,"button",8),X("click",function(){return U(r),j(i.setTab("generate"))}),ee(9,"ng-icon",9),w(10," Generate New Wallet "),g(),m(11,"button",8),X("click",function(){return U(r),j(i.setTab("deriveSeed"))}),ee(12,"ng-icon",9),w(13," Derive Wallet from Seed "),g(),m(14,"button",8),X("click",function(){return U(r),j(i.setTab("deriveMnemonic"))}),ee(15,"ng-icon",9),w(16," Derive Wallet from Mnemonic "),g(),m(17,"button",8),X("click",function(){return U(r),j(i.setTab("deriveSecretNumbers"))}),ee(18,"ng-icon",9),w(19," Derive Wallet from Secret Numbers "),g(),m(20,"button",8),X("click",function(){return U(r),j(i.setTab("removeCustomWallets"))}),ee(21,"ng-icon",9),w(22," Remove Custom Wallets "),g()(),Q(23,Tht,8,1,"div",10),Q(24,Eht,8,1,"div",10),Q(25,Aht,8,1,"div",10),Q(26,Dht,8,1,"div",10),Q(27,Iht,8,0,"div",10),Q(28,Fht,3,1,"div",11),Q(29,Pht,4,1,"div",12),m(30,"form",13,0)(32,"div",14)(33,"div"),Q(34,Rht,12,2),Q(35,Nht,13,2),Q(36,Vht,12,2),Q(37,Uht,5,2,"div",15),Q(38,jht,7,6,"div",16),Q(39,Hht,5,2,"div",16),Q(40,Wht,5,2,"div",16),Q(41,zht,5,2,"div",16),Q(42,qht,3,2,"div",16),g()()(),Q(43,$ht,9,2,"div",17),Q(44,Kht,4,0,"div",18),Q(45,Ght,4,0,"div",18),Q(46,Xht,4,0,"div",18),m(47,"div",19)(48,"input",20),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(49,"app-transaction-preview"),g()()()()()}e&2&&(_(8),Ue("active",i.activeTab()==="generate"),_(3),Ue("active",i.activeTab()==="deriveSeed"),_(3),Ue("active",i.activeTab()==="deriveMnemonic"),_(3),Ue("active",i.activeTab()==="deriveSecretNumbers"),_(3),Ue("active",i.activeTab()==="removeCustomWallets"),_(3),J(i.activeTab()==="generate"?23:-1),_(),J(i.activeTab()==="deriveSeed"?24:-1),_(),J(i.activeTab()==="deriveMnemonic"?25:-1),_(),J(i.activeTab()==="deriveSecretNumbers"?26:-1),_(),J(i.activeTab()==="removeCustomWallets"?27:-1),_(),J(i.infoMessage?28:-1),_(),J(i.txUiService.warningMessage?29:-1),_(4),oe("@tabTransition",i.activeTab()),_(),J(i.activeTab()==="deriveSeed"?34:-1),_(),J(i.activeTab()==="deriveMnemonic"?35:-1),_(),J(i.activeTab()==="deriveSecretNumbers"?36:-1),_(),J(i.activeTab()==="removeCustomWallets"?37:-1),_(),J(i.activeTab()==="generate"?38:-1),_(),J(i.activeTab()==="deriveSeed"?39:-1),_(),J(i.activeTab()==="deriveMnemonic"?40:-1),_(),J(i.activeTab()==="deriveSecretNumbers"?41:-1),_(),J(i.activeTab()==="removeCustomWallets"?42:-1),_(),J(i.activeTab()==="generate"||i.activeTab()==="deriveSeed"?43:-1),_(),J(i.activeTab()==="generate"?44:-1),_(),J(i.activeTab()==="deriveMnemonic"?45:-1),_(),J(i.activeTab()==="deriveSecretNumbers"?46:-1),_(2),Oe("ngModel",i.executionTime))},dependencies:[ln,Oa,Kn,xi,Bn,cS,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,Bi],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]}})};var Oge=_i(Ki());var Yht=()=>["send"];function Zht(n,t){n&1&&(m(0,"div",8)(1,"div",30)(2,"div",31),ee(3,"ng-icon",32),g(),m(4,"div")(5,"h2",33),w(6,"Set Hook"),g(),m(7,"p",34),w(8,"Install custom logic (hook) on your account. Only available on Xahau."),g()()()())}function Qht(n,t){if(n&1&&(m(0,"div",9)(1,"div",35),ee(2,"ng-icon",36)(3,"div",37),g()()),n&2){let e=E();_(3),oe("innerHTML",e.infoData(),pn)}}function Jht(n,t){if(n&1&&(m(0,"div",10),ee(1,"ng-icon",38),m(2,"div",39),w(3),g()()),n&2){let e=E();_(3),Ee(e.safeWarningMessage)}}var eI=class n extends li{destroyRef=N(Zt);utilsService=N(Gt);storageService=N(rn);walletManagerService=N(un);txUiService=N(hn);walletDataService=N(Xn);validationService=N(ri);dropdownService=N(Ni);xrplCache=N(Un);downloadUtilService=N(Gn);copyUtilService=N(Vn);toastService=N(ni);txExecutor=N(ai);hookWasmHex=P("");hookNamespace=P("");hookOn=P("0000000000000000");hookApiVersion=P(0);flags=P(0);typedDestination=P("");customDestinations=P([]);selectedDestinationAddress=P("");destinationSearchQuery=P("");activeTab=P("send");wallets=P([]);currentWallet=P({});infoPanelExpanded=P(!1);accountInfo=P(null);selectedDestinationItem=_e(()=>{let t=this.selectedDestinationAddress();return t&&this.destinationItems().find(e=>e.id===t)||null});destinationItems=_e(()=>{let t=this.currentWallet().address;return this.destinations().map(e=>({id:e.address,display:e.name||"Unknown Wallet",secondary:e.address,isCurrentAccount:e.address===t}))});destinations=_e(()=>[...this.wallets().map(t=>({name:t.name??`Wallet ${t.address.slice(0,8)}`,address:t.address})),...this.customDestinations()]);destinationDisplay=_e(()=>{let t=this.selectedDestinationAddress();if(!t)return this.destinationSearchQuery();let e=this.destinations().find(i=>i.address===t);return e?this.dropdownService.formatDisplay(e):t});filteredDestinations=_e(()=>{let t=this.destinationSearchQuery().trim().toLowerCase(),e=this.destinations();return t===""?e:this.destinations().filter(i=>i.address!==this.currentWallet().address).filter(i=>i.address.toLowerCase().includes(t)||(i.name??"").toLowerCase().includes(t))});infoData=_e(()=>{let t=this.currentWallet();if(!t?.address)return null;let e=t.name||"Selected wallet";return this.accountInfo()?.result?.account_data?.Balance?`<code>${e}</code> wallet has <strong>${this.currentWallet().balance} XRP</strong> available for sending.`:`<code>${e}</code> wallet is ready to send XRP.`});hasWallets=_e(()=>this.wallets().length>0);isXahauNetwork(){return!0}constructor(){super(),this.txUiService.clearAllOptionsAndMessages()}ngOnInit(){this.loadCustomDestinations(),this.setupWalletSubscriptions()}loadCustomDestinations(){let t=this.storageService.get("customDestinations");t&&this.customDestinations.set(JSON.parse(t))}setupWalletSubscriptions(){return z(this,null,function*(){this.walletManagerService.hasWalletsFromWallets$.pipe(yt(this.destroyRef)).subscribe(t=>{t?this.txUiService.clearWarning?.():(this.txUiService.setWarning("No wallets exist. Create a new wallet before continuing."),this.txUiService.setError(""),this.txUiService.setInfoMessage(""))}),this.walletManagerService.wallets$.pipe(yt(this.destroyRef)).subscribe(t=>{if(this.wallets.set(t),this.hasWallets()&&!this.currentWallet().address){let e=this.walletManagerService.getSelectedIndex?.()??0,i=t[e];i&&this.selectWallet(i)}}),this.walletManagerService.selectedIndex$.pipe(yt(this.destroyRef)).subscribe(t=>z(this,null,function*(){let e=this.wallets()[t];e&&(this.selectWallet(e),this.xrplCache.invalidateAccountCache(e.address),this.txUiService.clearAllOptionsAndMessages(),this.clearInputFields(),yield this.onAccountChange(!1))}))})}selectWallet(t){this.currentWallet.set(le({},t)),this.txUiService.currentWallet.set(le({},t)),this.xrplCache.invalidateAccountCache(t.address),this.selectedDestinationAddress()===t.address&&this.selectedDestinationAddress.set("")}trackByWalletAddress(t,e){return e.address}onWalletSelected(t){this.selectWallet(t)}setTab(t){return z(this,null,function*(){this.activeTab.set(t),this.destinationSearchQuery.set(""),this.txUiService.clearAllOptionsAndMessages(),yield this.onAccountChange(!0)})}getClient(){return z(this,null,function*(){return this.xrplCache.getClient(()=>this.xrplService.getClient())})}onAccountChange(t=!1){return z(this,null,function*(){yield this.withPerf("onAccountChange",()=>z(this,null,function*(){if(this.txUiService.clearAllOptionsAndMessages(),this.hasWallets()&&this.walletManagerService.getSelectedIndex()<0)throw new Error("Please select a wallet.");try{let[e,i]=yield Promise.all([this.getClient(),this.getWallet()]),{accountInfo:r,accountObjects:o}=yield this.xrplCache.getAccountData(i.classicAddress,t),s=yield this.validationService.validate("AccountInfo",{inputs:{seed:this.currentWallet().seed,accountInfo:r},client:e,accountInfo:r});if(s.length>0)return this.txUiService.setError(s.join(`
\u2022 `));this.accountInfo.set(r),this.refreshUiState(i,r,o)}catch(e){console.error("Failed to load account:",e),this.txUiService.setError(`${e.message||"Transaction failed"}`)}finally{this.txUiService.spinner.set(!1)}}))})}setHook(){return z(this,null,function*(){yield this.withPerf("sendXrp",()=>z(this,null,function*(){this.txUiService.clearAllOptionsAndMessages();try{let[t,e]=yield Promise.all([this.getClient(),this.getWallet()]),[{accountInfo:i,accountObjects:r},o,s]=yield Promise.all([this.xrplCache.getAccountData(e.classicAddress,!1),this.xrplCache.getFee(this.xrplService,!1),this.xrplService.getLastLedgerIndex(t)]),a=yield this.validationService.validate("SetHook",{inputs:{wallet:this.currentWallet(),hookWasmHex:this.hookWasmHex()},client:t,accountInfo:i});if(a.length>0)return this.txUiService.setError(a.join(`
\u2022 `));this.txUiService.successMessage=this.txUiService.isSimulateEnabled()?"Simulated hook set successfully!":"Hook set successfully!"}catch(t){this.txUiService.setError(`${t.message||"Failed to set hook"}`)}finally{this.txUiService.spinner.set(!1)}}))})}getWallet(){return z(this,null,function*(){let t=yield this.utilsService.getWalletWithEncryptionAlgorithm(this.currentWallet().seed,this.currentWallet().encryptionAlgorithm);if(!t)throw new Error("Wallet could not be created");return t})}setTxOptionalFields(t,e,i,r){return z(this,null,function*(){if(this.txUiService.isTicket()){let o=this.txUiService.selectedSingleTicket()||this.txUiService.selectedTickets()[0];if(o){if(!(yield this.xrplService.checkTicketExists(t,i.classicAddress,Number(o))))throw new Error(`Ticket ${o} not found`);this.utilsService.setTicketSequence(e,o,!0)}}this.txUiService.destinationTagField()&&this.utilsService.setDestinationTag(e,this.txUiService.destinationTagField()),this.txUiService.isMemoEnabled()&&this.txUiService.memoField()&&this.utilsService.setMemoField(e,this.txUiService.memoField()),this.txUiService.invoiceIdField()&&this.utilsService.setInvoiceIdField(e,this.txUiService.invoiceIdField()),this.txUiService.sourceTagField()&&this.utilsService.setSourceTagField(e,this.txUiService.sourceTagField())})}refreshAfterTx(t,e,i,r){return z(this,null,function*(){let{accountInfo:o,accountObjects:s}=yield this.xrplCache.getAccountData(e.classicAddress,!0);this.accountInfo.set(o),i?yield this.refreshWallets(t,[e.classicAddress,i]):yield this.refreshWallets(t,[e.classicAddress]),r&&i&&this.addNewDestinationFromUser(i),this.refreshUiState(e,o,s)})}refreshWallets(t,e){return z(this,null,function*(){yield this.walletDataService.refreshWallets(t,this.wallets(),this.walletManagerService.getSelectedIndex(),e,(i,r)=>{this.currentWallet.set(le({},r))})})}refreshUiState(t,e,i){let r=!!e.result.account_data.RegularKey;this.txUiService.regularKeySigningEnabled.set(r),this.txUiService.ticketArray.set(this.utilsService.getAccountTickets(i));let{signerAccounts:o,signerQuorum:s}=this.utilsService.checkForSignerAccounts(i),a=o?.length>0;if(this.txUiService.signerQuorum.set(s),o?.length>0?this.setupMultiSignersConfiguration(t):this.clearMultiSignersConfiguration(),this.txUiService.multiSigningEnabled.set(a),a){let d=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(d)}let c=this.utilsService.setRegularKeyProperties(e.result.account_data.RegularKey,e.result.account_data.Account)||{regularKeyAddress:"",regularKeySeed:""};this.txUiService.regularKeyAddress.set(c.regularKeyAddress),this.txUiService.regularKeySeed.set(c.regularKeySeed)}setupMultiSignersConfiguration(t){let e=this.storageService.get(`${t.classicAddress}signerEntries`)||[];this.txUiService.signers.set(e),this.txUiService.multiSignAddress.set(e.map(i=>i.Account).join(`,
`)),this.txUiService.multiSignSeeds.set(e.map(i=>i.seed).join(`,
`))}clearMultiSignersConfiguration(){this.txUiService.signerQuorum.set(0),this.txUiService.multiSignAddress.set("No Multi-Sign address configured for account"),this.txUiService.multiSignSeeds.set(""),this.storageService.removeValue("signerEntries")}updateDestinations(){let t=[...this.wallets().map(e=>({name:e.name??this.truncateAddress(e.address),address:e.address})),...this.customDestinations()];this.storageService.set("destinations",t)}truncateAddress(t){return`${t.slice(0,8)}...${t.slice(-6)}`}addNewDestinationFromUser(t){t&&Oge.isValidAddress(t)&&!this.destinations().some(e=>e.address===t)&&(this.customDestinations.update(e=>[...e,{name:`Custom ${e.length+1}`,address:t}]),this.storageService.set("customDestinations",JSON.stringify(this.customDestinations())),this.updateDestinations())}get safeWarningMessage(){return this.txUiService.warningMessage?.replaceAll("<","&lt;").replaceAll(">","&gt;")}clearFields(){this.clearInputFields(),this.txUiService.clearAllOptionsAndMessages()}clearInputFields(){this.typedDestination.set(""),this.selectedDestinationAddress.set(""),this.txUiService.amountField.set(""),this.txUiService.destinationTagField.set(""),this.txUiService.invoiceIdField.set(""),this.txUiService.sourceTagField.set("")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=nt({type:n,selectors:[["app-set-hook"]],features:[Lt],decls:50,vars:15,consts:[["theForm","ngForm"],[1,"banner"],[1,"banner-content"],["id","navbar-container"],[1,"main-container"],[1,"content-wrapper"],[3,"walletSelected"],[1,"form-panel"],[2,"padding-top","2em"],[1,"info-panel"],[1,"warning-panel"],[1,"send-form"],[1,"tab-content-container"],[1,"form-row"],[1,"form-group"],["for","hookWasmHex"],[1,"form-hint"],["name","hookWasmHex",3,"ngModelChange","ngModel"],["for","hookNamespace"],["type","text","name","hookNamespace",3,"ngModelChange","ngModel"],["for","hookOn"],["type","text","name","hookOn",3,"ngModelChange","ngModel"],["for","flags"],["type","number","name","flagsStuff",3,"ngModelChange","ngModel"],[3,"showWhenTab","activeTab","multiSigningEnabled","regularKeySigningEnabled"],[1,"button-row"],[3,"click","disabled"],[3,"click"],[2,"display","flex"],["type","text","name","executionTime","readonly","",3,"ngModelChange","ngModel"],[1,"submenu-info-text"],[1,"green-button-submenu"],["name","heroPaperAirplane","size","27",1,"text-red-600"],[1,"submenu-info-main-text"],[1,"submenu-info-secondary-text"],[1,"info-panel-content"],["name","heroInformationCircle","size","20",1,"text-blue-600","info-icon"],[1,"info-text",3,"innerHTML"],["name","heroExclamationTriangle","size","20",1,"text-red-600"],[1,"warning-text"]],template:function(e,i){if(e&1){let r=ge();m(0,"div",1)(1,"div",2)(2,"div",3),ee(3,"app-navbar"),g()()(),m(4,"div",4)(5,"div",5)(6,"app-wallet-panel",6),X("walletSelected",function(s){return U(r),j(i.onWalletSelected(s))}),g(),m(7,"div",7),Q(8,Zht,9,0,"div",8),Q(9,Qht,4,1,"div",9),Q(10,Jht,4,1,"div",10),m(11,"form",11,0)(13,"div",12)(14,"div")(15,"div",13)(16,"div",14)(17,"label",15),w(18,"Hook WASM Hex"),g(),m(19,"p",16),w(20,"Paste the compiled WASM hex from Hooks Builder."),g(),m(21,"textarea",17),X("ngModelChange",function(s){return U(r),j(i.hookWasmHex.set(s))}),g()(),m(22,"div",14)(23,"label",18),w(24,"Hook Namespace (hex)"),g(),m(25,"p",16),w(26,"SHA-256 hash of a unique string for state storage."),g(),m(27,"input",19),X("ngModelChange",function(s){return U(r),j(i.hookNamespace.set(s))}),g()()(),m(28,"div",13)(29,"div",14)(30,"label",20),w(31,"HookOn Trigger (hex)"),g(),m(32,"p",16),w(33,"e.g., '0000000000000000' for all transactions."),g(),m(34,"input",21),X("ngModelChange",function(s){return U(r),j(i.hookOn.set(s))}),g()(),m(35,"div",14)(36,"label",22),w(37,"Flags"),g(),m(38,"p",16),w(39,"e.g., 1 for override."),g(),m(40,"input",23),X("ngModelChange",function(s){return U(r),j(i.flags.set(s))}),g()()(),ee(41,"app-transaction-options",24),m(42,"div",25)(43,"button",26),X("click",function(){return U(r),j(i.setHook())}),w(44,"Set Hook"),g(),m(45,"button",27),X("click",function(){return U(r),j(i.clearFields())}),w(46,"Clear Fields"),g()(),m(47,"div",28)(48,"input",29),Ne("ngModelChange",function(s){return U(r),Ve(i.executionTime,s)||(i.executionTime=s),j(s)}),g()(),ee(49,"app-transaction-preview"),g()()()()()()}e&2&&(_(8),J(i.activeTab()==="send"?8:-1),_(),J(i.infoData()?9:-1),_(),J(i.txUiService.warningMessage?10:-1),_(4),oe("@tabTransition",i.activeTab()),_(7),oe("ngModel",i.hookWasmHex()),_(6),oe("ngModel",i.hookNamespace()),_(7),oe("ngModel",i.hookOn()),_(6),oe("ngModel",i.flags()),_(),oe("showWhenTab",Ei(14,Yht))("activeTab",i.activeTab)("multiSigningEnabled",i.txUiService.multiSigningEnabled)("regularKeySigningEnabled",i.txUiService.regularKeySigningEnabled),_(2),oe("disabled",i.txUiService.spinner()||!i.isXahauNetwork()),_(5),Oe("ngModel",i.executionTime))},dependencies:[ln,Kn,xi,Bn,M1,$n,Ci,Wn,di,ii,En,Mn,si,oi,mi,ki],encapsulation:2,data:{animation:[Hn("tabTransition",[Ln("* => *",[kt({opacity:0,transform:"translateY(20px)"}),Pn("500ms cubic-bezier(0.4, 0, 0.2, 1)",kt({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0})};var Nge=[{path:"",redirectTo:"/account-configurator",pathMatch:"full"},{path:"account-balance-changes",component:WD,data:{title:"Account Changes"}},{path:"set-hook",component:eI,data:{title:"Set Hook"}},{path:"delete-account",component:K8,data:{title:"Account Delete"}},{path:"account-configurator",component:X8,data:{title:"Account Configurator"}},{path:"wallet-configurator",component:JD,data:{title:"Wallet Configurator"}},{path:"create-credentials",component:Y8,data:{title:"Account Credentials"}},{path:"create-did",component:mD,data:{title:"Account DID"}},{path:"permissioned-domain",component:qD,data:{title:"Permissioned Domain"}},{path:"account-delegate",component:$D,data:{title:"Account Delegate"}},{path:"firewall",component:KD,data:{title:"Firewall"}},{path:"sign-transactions",component:YD,data:{title:"Sign Transactions"}},{path:"send-xrp",component:ZD,data:{title:"Send XRP"}},{path:"payment-channel",component:R8,data:{title:"Payment Channel"}},{path:"time-escrow",component:N8,data:{title:"Time Escrow"}},{path:"conditional-escrow",component:B8,data:{title:"Conditional Escrow"}},{path:"checks",component:V8,data:{title:"Checks"}},{path:"tickets",component:U8,data:{title:"Tickets"}},{path:"create-offer",component:W8,data:{title:"Create Offers"}},{path:"create-nft",component:z8,data:{title:"NFT"}},{path:"nft-offers",component:GD,data:{title:"NFT Offers"}},{path:"create-amm",component:q8,data:{title:"AMM"}},{path:"trustlines",component:$8,data:{title:"Trustlines"}},{path:"mpt",component:zD,data:{title:"MPT"}}];var L2e=_i(e2e());var R2e=_i(o2e());var s2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"></path></svg>';var a2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 7.5h-.75A2.25 2.25 0 0 0 4.5 9.75v7.5a2.25 2.25 0 0 0 2.25 2.25h7.5a2.25 2.25 0 0 0 2.25-2.25v-7.5a2.25 2.25 0 0 0-2.25-2.25h-.75m-6 3.75 3 3m0 0 3-3m-3 3V1.5m6 9h.75a2.25 2.25 0 0 1 2.25 2.25v7.5a2.25 2.25 0 0 1-2.25 2.25h-7.5a2.25 2.25 0 0 1-2.25-2.25v-.75"></path></svg>';var l2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"></path></svg>';var c2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg>';var d2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"></path></svg>';var u2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"></path></svg>';var h2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"></path></svg>';var f2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"></path></svg>';var p2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>';var m2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>';var g2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg>',y2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg>';var v2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"></path></svg>',_2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg>';var b2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';var w2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"></path></svg>';var S2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"></path></svg>',C2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"></path></svg>';var x2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"></path></svg>';var k2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>';var M2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"></path></svg>';var T2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"></path></svg>',E2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>';var A2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"></path></svg>';var D2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"></path></svg>';var I2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3"></path></svg>';var F2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>',P2e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg>';window.Buffer=L2e.Buffer;window.process=R2e.default;oP(YE,{providers:[pL(Nge),cP(),T_(MZ),T_(En.pick({Cog:Zue,BanknoteArrowUp:que,BanknoteArrowDown:zue,Trash2:yhe,DollarSign:the,TicketCheck:ghe,Check:Kue,Hourglass:lhe,Wallet:vhe,Send:dhe,ShieldCheck:hhe,Flag:she,Copy:Jue,FileTextIcon:ohe,ChevronDown:Gue,ChevronRight:Xue,BookOpenCheck:$ue,ArrowBigRight:Wue,RefreshCcw:che,SplitIcon:mhe,Signature:phe,ShieldEllipsis:fhe,CopyPlus:Que,Eraser:nhe,GripVertical:ahe,Eye:rhe,EyeOff:ihe,CircleCheck:Yue,ShieldBan:uhe,CornerUpLeft:ehe})),Hue({heroInformationCircle:b2e,heroExclamationCircle:g2e,heroExclamationTriangle:y2e,heroUsers:D2e,heroClipboardDocumentList:f2e,heroArrowDownOnSquareStack:a2e,heroArrowTopRightOnSquare:c2e,heroCurrencyDollar:m2e,heroTrash:E2e,heroPlusCircle:k2e,heroPaperAirplane:x2e,heroTicket:T2e,heroClock:p2e,heroQueueList:M2e,heroArrowUturnLeft:d2e,heroArrowPath:l2e,heroUserGroup:A2e,heroKey:w2e,heroChartBar:h2e,heroEye:_2e,heroEyeSlash:v2e,heroAdjustmentsVertical:s2e,heroLockOpen:C2e,heroLockClosed:S2e,heroBanknotes:u2e,heroWallet:I2e,heroXMark:P2e,heroXCircle:F2e})]}).catch(n=>console.error(n));
